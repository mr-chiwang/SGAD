var rie=Object.defineProperty;var iie=(n,e,t)=>e in n?rie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var sie=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var pn=(n,e,t)=>(iie(n,typeof e!="symbol"?e+"":e,t),t);var Pst=sie((qo,Ko)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function nD(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Si={},vv=[],xr=()=>{},aie=()=>!1,PM=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),rD=n=>n.startsWith("onUpdate:"),ys=Object.assign,iD=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},oie=Object.prototype.hasOwnProperty,fr=(n,e)=>oie.call(n,e),xt=Array.isArray,gv=n=>D_(n)==="[object Map]",DM=n=>D_(n)==="[object Set]",Zf=n=>D_(n)==="[object Date]",Yt=n=>typeof n=="function",Wt=n=>typeof n=="string",hc=n=>typeof n=="symbol",Mn=n=>n!==null&&typeof n=="object",Kp=n=>(Mn(n)||Yt(n))&&Yt(n.then)&&Yt(n.catch),cG=Object.prototype.toString,D_=n=>cG.call(n),lie=n=>D_(n).slice(8,-1),vb=n=>D_(n)==="[object Object]",sD=n=>Wt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,A1=nD(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),LM=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},cie=/-(\w)/g,Ka=LM(n=>n.replace(cie,(e,t)=>t?t.toUpperCase():"")),uie=/\B([A-Z])/g,Id=LM(n=>n.replace(uie,"-$1").toLowerCase()),L_=LM(n=>n.charAt(0).toUpperCase()+n.slice(1)),E1=LM(n=>n?`on${L_(n)}`:""),Hf=(n,e)=>!Object.is(n,e),Kw=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},mI=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},vI=n=>{const e=parseFloat(n);return isNaN(e)?n:e},die=n=>{const e=Wt(n)?Number(n):NaN;return isNaN(e)?n:e};let NO;const kM=()=>NO||(NO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xt(n){if(xt(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Wt(r)?mie(r):Xt(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Wt(n)||Mn(n))return n}const fie=/;(?![^(]*\))/g,hie=/:([^]+)/,pie=/\/\*[^]*?\*\//g;function mie(n){const e={};return n.replace(pie,"").split(fie).forEach(t=>{if(t){const r=t.split(hie);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Y(n){let e="";if(Wt(n))e=n;else if(xt(n))for(let t=0;t<n.length;t++){const r=Y(n[t]);r&&(e+=r+" ")}else if(Mn(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function Vo(n){if(!n)return null;let{class:e,style:t}=n;return e&&!Wt(e)&&(n.class=Y(e)),t&&(n.style=Xt(t)),n}const vie="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gie=nD(vie);function uG(n){return!!n||n===""}function yie(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=Gv(n[r],e[r]);return t}function Gv(n,e){if(n===e)return!0;let t=Zf(n),r=Zf(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=hc(n),r=hc(e),t||r)return n===e;if(t=xt(n),r=xt(e),t||r)return t&&r?yie(n,e):!1;if(t=Mn(n),r=Mn(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const a in n){const o=n.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Gv(n[a],e[a]))return!1}}return String(n)===String(e)}function dG(n,e){return n.findIndex(t=>Gv(t,e))}const fG=n=>!!(n&&n.__v_isRef===!0),Ct=n=>Wt(n)?n:n==null?"":xt(n)||Mn(n)&&(n.toString===cG||!Yt(n.toString))?fG(n)?Ct(n.value):JSON.stringify(n,hG,2):String(n),hG=(n,e)=>fG(e)?hG(n,e.value):gv(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[LA(r,s)+" =>"]=i,t),{})}:DM(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>LA(t))}:hc(e)?LA(e):Mn(e)&&!xt(e)&&!vb(e)?String(e):e,LA=(n,e="")=>{var t;return hc(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ga;class pG{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ga,!e&&ga&&(this.index=(ga.scopes||(ga.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ga;try{return ga=this,e()}finally{ga=t}}}on(){++this._on===1&&(this.prevScope=ga,ga=this)}off(){this._on>0&&--this._on===0&&(ga=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function bie(n){return new pG(n)}function mG(){return ga}function vG(n,e=!1){ga&&ga.cleanups.push(n)}let Ti;const kA=new WeakSet;class gG{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ga&&ga.active&&ga.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,kA.has(this)&&(kA.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||bG(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,BO(this),_G(this);const e=Ti,t=cc;Ti=this,cc=!0;try{return this.fn()}finally{SG(this),Ti=e,cc=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)lD(e);this.deps=this.depsTail=void 0,BO(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?kA.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gI(this)&&this.run()}get dirty(){return gI(this)}}let yG=0,I1,R1;function bG(n,e=!1){if(n.flags|=8,e){n.next=R1,R1=n;return}n.next=I1,I1=n}function aD(){yG++}function oD(){if(--yG>0)return;if(R1){let e=R1;for(R1=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;I1;){let e=I1;for(I1=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function _G(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function SG(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),lD(r),_ie(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function gI(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(xG(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function xG(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===gb)||(n.globalVersion=gb,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!gI(n))))return;n.flags|=2;const e=n.dep,t=Ti,r=cc;Ti=n,cc=!0;try{_G(n);const i=n.fn(n._value);(e.version===0||Hf(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ti=t,cc=r,SG(n),n.flags&=-3}}function lD(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)lD(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function _ie(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let cc=!0;const wG=[];function vd(){wG.push(cc),cc=!1}function gd(){const n=wG.pop();cc=n===void 0?!0:n}function BO(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ti;Ti=void 0;try{e()}finally{Ti=t}}}let gb=0,Sie=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class OM{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ti||!cc||Ti===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ti)t=this.activeLink=new Sie(Ti,this),Ti.deps?(t.prevDep=Ti.depsTail,Ti.depsTail.nextDep=t,Ti.depsTail=t):Ti.deps=Ti.depsTail=t,CG(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Ti.depsTail,t.nextDep=void 0,Ti.depsTail.nextDep=t,Ti.depsTail=t,Ti.deps===t&&(Ti.deps=r)}return t}trigger(e){this.version++,gb++,this.notify(e)}notify(e){aD();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{oD()}}}function CG(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)CG(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const G2=new WeakMap,Op=Symbol(""),yI=Symbol(""),yb=Symbol("");function _a(n,e,t){if(cc&&Ti){let r=G2.get(n);r||G2.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new OM),i.map=r,i.key=t),i.track()}}function ju(n,e,t,r,i,s){const a=G2.get(n);if(!a){gb++;return}const o=l=>{l&&l.trigger()};if(aD(),e==="clear")a.forEach(o);else{const l=xt(n),c=l&&sD(t);if(l&&t==="length"){const u=Number(r);a.forEach((d,h)=>{(h==="length"||h===yb||!hc(h)&&h>=u)&&o(d)})}else switch((t!==void 0||a.has(void 0))&&o(a.get(t)),c&&o(a.get(yb)),e){case"add":l?c&&o(a.get("length")):(o(a.get(Op)),gv(n)&&o(a.get(yI)));break;case"delete":l||(o(a.get(Op)),gv(n)&&o(a.get(yI)));break;case"set":gv(n)&&o(a.get(Op));break}}oD()}function xie(n,e){const t=G2.get(n);return t&&t.get(e)}function L0(n){const e=zr(n);return e===n?e:(_a(e,"iterate",yb),Rl(n)?e:e.map(Js))}function NM(n){return _a(n=zr(n),"iterate",yb),n}const wie={__proto__:null,[Symbol.iterator](){return OA(this,Symbol.iterator,Js)},concat(...n){return L0(this).concat(...n.map(e=>xt(e)?L0(e):e))},entries(){return OA(this,"entries",n=>(n[1]=Js(n[1]),n))},every(n,e){return Tu(this,"every",n,e,void 0,arguments)},filter(n,e){return Tu(this,"filter",n,e,t=>t.map(Js),arguments)},find(n,e){return Tu(this,"find",n,e,Js,arguments)},findIndex(n,e){return Tu(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Tu(this,"findLast",n,e,Js,arguments)},findLastIndex(n,e){return Tu(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Tu(this,"forEach",n,e,void 0,arguments)},includes(...n){return NA(this,"includes",n)},indexOf(...n){return NA(this,"indexOf",n)},join(n){return L0(this).join(n)},lastIndexOf(...n){return NA(this,"lastIndexOf",n)},map(n,e){return Tu(this,"map",n,e,void 0,arguments)},pop(){return wy(this,"pop")},push(...n){return wy(this,"push",n)},reduce(n,...e){return FO(this,"reduce",n,e)},reduceRight(n,...e){return FO(this,"reduceRight",n,e)},shift(){return wy(this,"shift")},some(n,e){return Tu(this,"some",n,e,void 0,arguments)},splice(...n){return wy(this,"splice",n)},toReversed(){return L0(this).toReversed()},toSorted(n){return L0(this).toSorted(n)},toSpliced(...n){return L0(this).toSpliced(...n)},unshift(...n){return wy(this,"unshift",n)},values(){return OA(this,"values",Js)}};function OA(n,e,t){const r=NM(n),i=r[e]();return r!==n&&!Rl(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const Cie=Array.prototype;function Tu(n,e,t,r,i,s){const a=NM(n),o=a!==n&&!Rl(n),l=a[e];if(l!==Cie[e]){const d=l.apply(n,s);return o?Js(d):d}let c=t;a!==n&&(o?c=function(d,h){return t.call(this,Js(d),h,n)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,n)}));const u=l.call(a,c,r);return o&&i?i(u):u}function FO(n,e,t,r){const i=NM(n);let s=t;return i!==n&&(Rl(n)?t.length>3&&(s=function(a,o,l){return t.call(this,a,o,l,n)}):s=function(a,o,l){return t.call(this,a,Js(o),l,n)}),i[e](s,...r)}function NA(n,e,t){const r=zr(n);_a(r,"iterate",yb);const i=r[e](...t);return(i===-1||i===!1)&&dD(t[0])?(t[0]=zr(t[0]),r[e](...t)):i}function wy(n,e,t=[]){vd(),aD();const r=zr(n)[e].apply(n,t);return oD(),gd(),r}const Mie=nD("__proto__,__v_isRef,__isVue"),MG=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(hc));function Tie(n){hc(n)||(n=String(n));const e=zr(this);return _a(e,"has",n),e.hasOwnProperty(n)}class TG{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Nie:RG:s?IG:EG).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=xt(e);if(!i){let l;if(a&&(l=wie[t]))return l;if(t==="hasOwnProperty")return Tie}const o=Reflect.get(e,t,qr(e)?e:r);return(hc(t)?MG.has(t):Mie(t))||(i||_a(e,"get",t),s)?o:qr(o)?a&&sD(t)?o:o.value:Mn(o)?i?Pg(o):pr(o):o}}class AG extends TG{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=Qf(s);if(!Rl(r)&&!Qf(r)&&(s=zr(s),r=zr(r)),!xt(e)&&qr(s)&&!qr(r))return l?!1:(s.value=r,!0)}const a=xt(e)&&sD(t)?Number(t)<e.length:fr(e,t),o=Reflect.set(e,t,r,qr(e)?e:i);return e===zr(i)&&(a?Hf(r,s)&&ju(e,"set",t,r):ju(e,"add",t,r)),o}deleteProperty(e,t){const r=fr(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&ju(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!hc(t)||!MG.has(t))&&_a(e,"has",t),r}ownKeys(e){return _a(e,"iterate",xt(e)?"length":Op),Reflect.ownKeys(e)}}class Aie extends TG{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Eie=new AG,Iie=new Aie,Rie=new AG(!0),bI=n=>n,MS=n=>Reflect.getPrototypeOf(n);function Pie(n,e,t){return function(...r){const i=this.__v_raw,s=zr(i),a=gv(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,c=i[n](...r),u=t?bI:e?W2:Js;return!e&&_a(s,"iterate",l?yI:Op),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function TS(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Die(n,e){const t={get(i){const s=this.__v_raw,a=zr(s),o=zr(i);n||(Hf(i,o)&&_a(a,"get",i),_a(a,"get",o));const{has:l}=MS(a),c=e?bI:n?W2:Js;if(l.call(a,i))return c(s.get(i));if(l.call(a,o))return c(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&_a(zr(i),"iterate",Op),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=zr(s),o=zr(i);return n||(Hf(i,o)&&_a(a,"has",i),_a(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,l=zr(o),c=e?bI:n?W2:Js;return!n&&_a(l,"iterate",Op),o.forEach((u,d)=>i.call(s,c(u),c(d),a))}};return ys(t,n?{add:TS("add"),set:TS("set"),delete:TS("delete"),clear:TS("clear")}:{add(i){!e&&!Rl(i)&&!Qf(i)&&(i=zr(i));const s=zr(this);return MS(s).has.call(s,i)||(s.add(i),ju(s,"add",i,i)),this},set(i,s){!e&&!Rl(s)&&!Qf(s)&&(s=zr(s));const a=zr(this),{has:o,get:l}=MS(a);let c=o.call(a,i);c||(i=zr(i),c=o.call(a,i));const u=l.call(a,i);return a.set(i,s),c?Hf(s,u)&&ju(a,"set",i,s):ju(a,"add",i,s),this},delete(i){const s=zr(this),{has:a,get:o}=MS(s);let l=a.call(s,i);l||(i=zr(i),l=a.call(s,i)),o&&o.call(s,i);const c=s.delete(i);return l&&ju(s,"delete",i,void 0),c},clear(){const i=zr(this),s=i.size!==0,a=i.clear();return s&&ju(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Pie(i,n,e)}),t}function cD(n,e){const t=Die(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(fr(t,i)&&i in r?t:r,i,s)}const Lie={get:cD(!1,!1)},kie={get:cD(!1,!0)},Oie={get:cD(!0,!1)},EG=new WeakMap,IG=new WeakMap,RG=new WeakMap,Nie=new WeakMap;function Bie(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fie(n){return n.__v_skip||!Object.isExtensible(n)?0:Bie(lie(n))}function pr(n){return Qf(n)?n:uD(n,!1,Eie,Lie,EG)}function PG(n){return uD(n,!1,Rie,kie,IG)}function Pg(n){return uD(n,!0,Iie,Oie,RG)}function uD(n,e,t,r,i){if(!Mn(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=Fie(n);if(s===0)return n;const a=i.get(n);if(a)return a;const o=new Proxy(n,s===2?r:t);return i.set(n,o),o}function yv(n){return Qf(n)?yv(n.__v_raw):!!(n&&n.__v_isReactive)}function Qf(n){return!!(n&&n.__v_isReadonly)}function Rl(n){return!!(n&&n.__v_isShallow)}function dD(n){return n?!!n.__v_raw:!1}function zr(n){const e=n&&n.__v_raw;return e?zr(e):n}function od(n){return!fr(n,"__v_skip")&&Object.isExtensible(n)&&mI(n,"__v_skip",!0),n}const Js=n=>Mn(n)?pr(n):n,W2=n=>Mn(n)?Pg(n):n;function qr(n){return n?n.__v_isRef===!0:!1}function ne(n){return DG(n,!1)}function Pr(n){return DG(n,!0)}function DG(n,e){return qr(n)?n:new zie(n,e)}class zie{constructor(e,t){this.dep=new OM,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:zr(e),this._value=t?e:Js(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Rl(e)||Qf(e);e=r?e:zr(e),Hf(e,t)&&(this._rawValue=e,this._value=r?e:Js(e),this.dep.trigger())}}function Yw(n){n.dep&&n.dep.trigger()}function y(n){return qr(n)?n.value:n}const Uie={get:(n,e,t)=>e==="__v_raw"?n:y(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return qr(i)&&!qr(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function LG(n){return yv(n)?n:new Proxy(n,Uie)}class Hie{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new OM,{get:r,set:i}=e(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Vie(n){return new Hie(n)}function bs(n){const e=xt(n)?new Array(n.length):{};for(const t in n)e[t]=kG(n,t);return e}class $ie{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return xie(zr(this._object),this._key)}}class Gie{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function yr(n,e,t){return qr(n)?n:Yt(n)?new Gie(n):Mn(n)&&arguments.length>1?kG(n,e,t):ne(n)}function kG(n,e,t){const r=n[e];return qr(r)?r:new $ie(n,e,t)}class Wie{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new OM(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=gb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ti!==this)return bG(this,!0),!0}get value(){const e=this.dep.track();return xG(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qie(n,e,t=!1){let r,i;return Yt(n)?r=n:(r=n.get,i=n.set),new Wie(r,i,t)}const AS={},q2=new WeakMap;let ip;function Kie(n,e=!1,t=ip){if(t){let r=q2.get(t);r||q2.set(t,r=[]),r.push(n)}}function Yie(n,e,t=Si){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:o,call:l}=t,c=S=>i?S:Rl(S)||i===!1||i===0?Zu(S,1):Zu(S);let u,d,h,f,p=!1,m=!1;if(qr(n)?(d=()=>n.value,p=Rl(n)):yv(n)?(d=()=>c(n),p=!0):xt(n)?(m=!0,p=n.some(S=>yv(S)||Rl(S)),d=()=>n.map(S=>{if(qr(S))return S.value;if(yv(S))return c(S);if(Yt(S))return l?l(S,2):S()})):Yt(n)?e?d=l?()=>l(n,2):n:d=()=>{if(h){vd();try{h()}finally{gd()}}const S=ip;ip=u;try{return l?l(n,3,[f]):n(f)}finally{ip=S}}:d=xr,e&&i){const S=d,x=i===!0?1/0:i;d=()=>Zu(S(),x)}const v=mG(),g=()=>{u.stop(),v&&v.active&&iD(v.effects,u)};if(s&&e){const S=e;e=(...x)=>{S(...x),g()}}let _=m?new Array(n.length).fill(AS):AS;const b=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const x=u.run();if(i||p||(m?x.some((w,M)=>Hf(w,_[M])):Hf(x,_))){h&&h();const w=ip;ip=u;try{const M=[x,_===AS?void 0:m&&_[0]===AS?[]:_,f];_=x,l?l(e,3,M):e(...M)}finally{ip=w}}}else u.run()};return o&&o(b),u=new gG(d),u.scheduler=a?()=>a(b,!1):b,f=S=>Kie(S,!1,u),h=u.onStop=()=>{const S=q2.get(u);if(S){if(l)l(S,4);else for(const x of S)x();q2.delete(u)}},e?r?b(!0):_=u.run():a?a(b.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function Zu(n,e=1/0,t){if(e<=0||!Mn(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,qr(n))Zu(n.value,e,t);else if(xt(n))for(let r=0;r<n.length;r++)Zu(n[r],e,t);else if(DM(n)||gv(n))n.forEach(r=>{Zu(r,e,t)});else if(vb(n)){for(const r in n)Zu(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Zu(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function k_(n,e,t,r){try{return r?n(...r):n()}catch(i){BM(i,e,t)}}function pc(n,e,t,r){if(Yt(n)){const i=k_(n,e,t,r);return i&&Kp(i)&&i.catch(s=>{BM(s,e,t)}),i}if(xt(n)){const i=[];for(let s=0;s<n.length;s++)i.push(pc(n[s],e,t,r));return i}}function BM(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Si;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}o=o.parent}if(s){vd(),k_(s,null,10,[n,l,c]),gd();return}}Xie(n,t,i,r,a)}function Xie(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const za=[];let Bc=-1;const bv=[];let Cf=null,Hm=0;const OG=Promise.resolve();let K2=null;function Ut(n){const e=K2||OG;return n?e.then(this?n.bind(this):n):e}function jie(n){let e=Bc+1,t=za.length;for(;e<t;){const r=e+t>>>1,i=za[r],s=bb(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function fD(n){if(!(n.flags&1)){const e=bb(n),t=za[za.length-1];!t||!(n.flags&2)&&e>=bb(t)?za.push(n):za.splice(jie(e),0,n),n.flags|=1,NG()}}function NG(){K2||(K2=OG.then(FG))}function Zie(n){xt(n)?bv.push(...n):Cf&&n.id===-1?Cf.splice(Hm+1,0,n):n.flags&1||(bv.push(n),n.flags|=1),NG()}function zO(n,e,t=Bc+1){for(;t<za.length;t++){const r=za[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;za.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function BG(n){if(bv.length){const e=[...new Set(bv)].sort((t,r)=>bb(t)-bb(r));if(bv.length=0,Cf){Cf.push(...e);return}for(Cf=e,Hm=0;Hm<Cf.length;Hm++){const t=Cf[Hm];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Cf=null,Hm=0}}const bb=n=>n.id==null?n.flags&2?-1:1/0:n.id;function FG(n){const e=xr;try{for(Bc=0;Bc<za.length;Bc++){const t=za[Bc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),k_(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Bc<za.length;Bc++){const t=za[Bc];t&&(t.flags&=-2)}Bc=-1,za.length=0,BG(),K2=null,(za.length||bv.length)&&FG()}}let ta=null,zG=null;function Y2(n){const e=ta;return ta=n,zG=n&&n.type.__scopeId||null,e}function Re(n,e=ta,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&QO(-1);const s=Y2(e);let a;try{a=n(...i)}finally{Y2(s),r._d&&QO(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Cn(n,e){if(ta===null)return n;const t=GM(ta),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,o,l=Si]=e[i];s&&(Yt(s)&&(s={mounted:s,updated:s}),s.deep&&Zu(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return n}function Ch(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(vd(),pc(l,t,8,[n.el,o,n,e]),gd())}}const UG=Symbol("_vte"),HG=n=>n.__isTeleport,P1=n=>n&&(n.disabled||n.disabled===""),UO=n=>n&&(n.defer||n.defer===""),HO=n=>typeof SVGElement<"u"&&n instanceof SVGElement,VO=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,_I=(n,e)=>{const t=n&&n.to;return Wt(t)?e?e(t):null:t},VG={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,a,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:v}}=c,g=P1(e.props);let{shapeFlag:_,children:b,dynamicChildren:S}=e;if(n==null){const x=e.el=m(""),w=e.anchor=m("");f(x,t,r),f(w,t,r);const M=(A,T)=>{_&16&&(i&&i.isCE&&(i.ce._teleportTarget=A),u(b,A,T,i,s,a,o,l))},C=()=>{const A=e.target=_I(e.props,p),T=$G(A,e,m,f);A&&(a!=="svg"&&HO(A)?a="svg":a!=="mathml"&&VO(A)&&(a="mathml"),g||(M(A,T),Xw(e,!1)))};g&&(M(t,w),Xw(e,!0)),UO(e.props)?(e.el.__isMounted=!1,Na(()=>{C(),delete e.el.__isMounted},s)):C()}else{if(UO(e.props)&&n.el.__isMounted===!1){Na(()=>{VG.process(n,e,t,r,i,s,a,o,l,c)},s);return}e.el=n.el,e.targetStart=n.targetStart;const x=e.anchor=n.anchor,w=e.target=n.target,M=e.targetAnchor=n.targetAnchor,C=P1(n.props),A=C?t:w,T=C?x:M;if(a==="svg"||HO(w)?a="svg":(a==="mathml"||VO(w))&&(a="mathml"),S?(h(n.dynamicChildren,S,A,i,s,a,o),_D(n,e,!0)):l||d(n,e,A,T,i,s,a,o,!1),g)C?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):ES(e,t,x,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const I=e.target=_I(e.props,p);I&&ES(e,I,null,c,0)}else C&&ES(e,w,M,c,1);Xw(e,g)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=n;if(d&&(i(c),i(u)),s&&i(l),a&16){const f=s||!P1(h);for(let p=0;p<o.length;p++){const m=o[p];r(m,e,t,f,!!m.dynamicChildren)}}},move:ES,hydrate:Qie};function ES(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=n,d=s===2;if(d&&r(a,e,t),(!d||P1(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,t,2);d&&r(o,e,t)}function Qie(n,e,t,r,i,s,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const h=e.target=_I(e.props,l);if(h){const f=P1(e.props),p=h._lpa||h.firstChild;if(e.shapeFlag&16)if(f)e.anchor=d(a(n),e,o(n),t,r,i,s),e.targetStart=p,e.targetAnchor=p&&a(p);else{e.anchor=a(n);let m=p;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,h._lpa=e.targetAnchor&&a(e.targetAnchor);break}}m=a(m)}e.targetAnchor||$G(h,e,u,c),d(p&&a(p),e,h,t,r,i,s)}Xw(e,f)}return e.anchor&&a(e.anchor)}const Jie=VG;function Xw(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function $G(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[UG]=s,n&&(r(i,n),r(s,n)),s}const Mf=Symbol("_leaveCb"),IS=Symbol("_enterCb");function GG(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Rn(()=>{n.isMounted=!0}),br(()=>{n.isUnmounting=!0}),n}const rl=[Function,Array],WG={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rl,onEnter:rl,onAfterEnter:rl,onEnterCancelled:rl,onBeforeLeave:rl,onLeave:rl,onAfterLeave:rl,onLeaveCancelled:rl,onBeforeAppear:rl,onAppear:rl,onAfterAppear:rl,onAppearCancelled:rl},qG=n=>{const e=n.subTree;return e.component?qG(e.component):e},ese={name:"BaseTransition",props:WG,setup(n,{slots:e}){const t=Dn(),r=GG();return()=>{const i=e.default&&hD(e.default(),!0);if(!i||!i.length)return;const s=KG(i),a=zr(n),{mode:o}=a;if(r.isLeaving)return BA(s);const l=$O(s);if(!l)return BA(s);let c=_b(l,a,r,t,d=>c=d);l.type!==Yi&&Yp(l,c);let u=t.subTree&&$O(t.subTree);if(u&&u.type!==Yi&&!dp(l,u)&&qG(t).type!==Yi){let d=_b(u,a,r,t);if(Yp(u,d),o==="out-in"&&l.type!==Yi)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,u=void 0},BA(s);o==="in-out"&&l.type!==Yi?d.delayLeave=(h,f,p)=>{const m=YG(r,u);m[String(u.key)]=u,h[Mf]=()=>{f(),h[Mf]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function KG(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Yi){e=t;break}}return e}const tse=ese;function YG(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function _b(n,e,t,r,i){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:g,onAfterAppear:_,onAppearCancelled:b}=e,S=String(n.key),x=YG(t,n),w=(A,T)=>{A&&pc(A,r,9,T)},M=(A,T)=>{const I=T[1];w(A,T),xt(A)?A.every(D=>D.length<=1)&&I():A.length<=1&&I()},C={mode:a,persisted:o,beforeEnter(A){let T=l;if(!t.isMounted)if(s)T=v||l;else return;A[Mf]&&A[Mf](!0);const I=x[S];I&&dp(n,I)&&I.el[Mf]&&I.el[Mf](),w(T,[A])},enter(A){let T=c,I=u,D=d;if(!t.isMounted)if(s)T=g||c,I=_||u,D=b||d;else return;let B=!1;const O=A[IS]=H=>{B||(B=!0,H?w(D,[A]):w(I,[A]),C.delayedLeave&&C.delayedLeave(),A[IS]=void 0)};T?M(T,[A,O]):O()},leave(A,T){const I=String(n.key);if(A[IS]&&A[IS](!0),t.isUnmounting)return T();w(h,[A]);let D=!1;const B=A[Mf]=O=>{D||(D=!0,T(),O?w(m,[A]):w(p,[A]),A[Mf]=void 0,x[I]===n&&delete x[I])};x[I]=n,f?M(f,[A,B]):B()},clone(A){const T=_b(A,e,t,r,i);return i&&i(T),T}};return C}function BA(n){if(FM(n))return n=yd(n),n.children=null,n}function $O(n){if(!FM(n))return HG(n.type)&&n.children?KG(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Yt(t.default))return t.default()}}function Yp(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Yp(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function hD(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const o=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Bt?(a.patchFlag&128&&i++,r=r.concat(hD(a.children,e,o))):(e||a.type!==Yi)&&r.push(o!=null?yd(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ie(n,e){return Yt(n)?(()=>ys({name:n.name},e,{setup:n}))():n}function XG(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function D1(n,e,t,r,i=!1){if(xt(n)){n.forEach((p,m)=>D1(p,e&&(xt(e)?e[m]:e),t,r,i));return}if(_v(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&D1(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?GM(r.component):r.el,a=i?null:s,{i:o,r:l}=n,c=e&&e.r,u=o.refs===Si?o.refs={}:o.refs,d=o.setupState,h=zr(d),f=d===Si?()=>!1:p=>fr(h,p);if(c!=null&&c!==l&&(Wt(c)?(u[c]=null,f(c)&&(d[c]=null)):qr(c)&&(c.value=null)),Yt(l))k_(l,o,12,[a,u]);else{const p=Wt(l),m=qr(l);if(p||m){const v=()=>{if(n.f){const g=p?f(l)?d[l]:u[l]:l.value;i?xt(g)&&iD(g,s):xt(g)?g.includes(s)||g.push(s):p?(u[l]=[s],f(l)&&(d[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else p?(u[l]=a,f(l)&&(d[l]=a)):m&&(l.value=a,n.k&&(u[n.k]=a))};a?(v.id=-1,Na(v,t)):v()}}}kM().requestIdleCallback;kM().cancelIdleCallback;const _v=n=>!!n.type.__asyncLoader,FM=n=>n.type.__isKeepAlive;function zM(n,e){ZG(n,"a",e)}function jG(n,e){ZG(n,"da",e)}function ZG(n,e,t=Sa){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(UM(e,r,t),t){let i=t.parent;for(;i&&i.parent;)FM(i.parent.vnode)&&nse(r,e,t,i),i=i.parent}}function nse(n,e,t,r){const i=UM(e,n,r,!0);Dg(()=>{iD(r[e],i)},t)}function UM(n,e,t=Sa,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{vd();const o=O_(t),l=pc(e,t,n,a);return o(),gd(),l});return r?i.unshift(s):i.push(s),s}}const Rd=n=>(e,t=Sa)=>{(!xb||n==="sp")&&UM(n,(...r)=>e(...r),t)},HM=Rd("bm"),Rn=Rd("m"),pD=Rd("bu"),yc=Rd("u"),br=Rd("bum"),Dg=Rd("um"),rse=Rd("sp"),ise=Rd("rtg"),sse=Rd("rtc");function ase(n,e=Sa){UM("ec",n,e)}const mD="components",ose="directives";function dn(n,e){return vD(mD,n,!0,e)||n}const QG=Symbol.for("v-ndc");function Ln(n){return Wt(n)?vD(mD,n,!1)||n:n||QG}function VM(n){return vD(ose,n)}function vD(n,e,t=!0,r=!1){const i=ta||Sa;if(i){const s=i.type;if(n===mD){const o=Wse(s,!1);if(o&&(o===e||o===Ka(e)||o===L_(Ka(e))))return s}const a=GO(i[n]||s[n],e)||GO(i.appContext[n],e);return!a&&r?s:a}}function GO(n,e){return n&&(n[e]||n[Ka(e)]||n[L_(Ka(e))])}function Fn(n,e,t,r){let i;const s=t&&t[r],a=xt(n);if(a||Wt(n)){const o=a&&yv(n);let l=!1,c=!1;o&&(l=!Rl(n),c=Qf(n),n=NM(n)),i=new Array(n.length);for(let u=0,d=n.length;u<d;u++)i[u]=e(l?c?W2(Js(n[u])):Js(n[u]):n[u],u,void 0,s&&s[u])}else if(typeof n=="number"){i=new Array(n);for(let o=0;o<n;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Mn(n))if(n[Symbol.iterator])i=Array.from(n,(o,l)=>e(o,l,void 0,s&&s[l]));else{const o=Object.keys(n);i=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];i[l]=e(n[u],u,l,s&&s[l])}}else i=[];return t&&(t[r]=i),i}function wo(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(xt(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return n}function Ye(n,e,t={},r,i){if(ta.ce||ta.parent&&_v(ta.parent)&&ta.parent.ce)return e!=="default"&&(t.name=e),$(),rt(Bt,null,[xe("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),$();const a=s&&JG(s(t)),o=t.key||a&&a.key,l=rt(Bt,{key:(o&&!hc(o)?o:`_${e}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&n._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function JG(n){return n.some(e=>Kr(e)?!(e.type===Yi||e.type===Bt&&!JG(e.children)):!0)?n:null}function lse(n,e){const t={};for(const r in n)t[e&&/[A-Z]/.test(r)?`on:${r}`:E1(r)]=n[r];return t}const SI=n=>n?gW(n)?GM(n):SI(n.parent):null,L1=ys(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>SI(n.parent),$root:n=>SI(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>gD(n),$forceUpdate:n=>n.f||(n.f=()=>{fD(n.update)}),$nextTick:n=>n.n||(n.n=Ut.bind(n.proxy)),$watch:n=>Ise.bind(n)}),FA=(n,e)=>n!==Si&&!n.__isScriptSetup&&fr(n,e),cse={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=n;let c;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(FA(r,e))return a[e]=1,r[e];if(i!==Si&&fr(i,e))return a[e]=2,i[e];if((c=n.propsOptions[0])&&fr(c,e))return a[e]=3,s[e];if(t!==Si&&fr(t,e))return a[e]=4,t[e];xI&&(a[e]=0)}}const u=L1[e];let d,h;if(u)return e==="$attrs"&&_a(n.attrs,"get",""),u(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==Si&&fr(t,e))return a[e]=4,t[e];if(h=l.config.globalProperties,fr(h,e))return h[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return FA(i,e)?(i[e]=t,!0):r!==Si&&fr(r,e)?(r[e]=t,!0):fr(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!t[a]||n!==Si&&fr(n,a)||FA(e,a)||(o=s[0])&&fr(o,a)||fr(r,a)||fr(L1,a)||fr(i.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:fr(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function es(){return eW().slots}function Pd(){return eW().attrs}function eW(n){const e=Dn();return e.setupContext||(e.setupContext=bW(e))}function WO(n){return xt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let xI=!0;function use(n){const e=gD(n),t=n.proxy,r=n.ctx;xI=!1,e.beforeCreate&&qO(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:_,destroyed:b,unmounted:S,render:x,renderTracked:w,renderTriggered:M,errorCaptured:C,serverPrefetch:A,expose:T,inheritAttrs:I,components:D,directives:B,filters:O}=e;if(c&&dse(c,r,null),a)for(const z in a){const k=a[z];Yt(k)&&(r[z]=k.bind(t))}if(i){const z=i.call(t,t);Mn(z)&&(n.data=pr(z))}if(xI=!0,s)for(const z in s){const k=s[z],F=Yt(k)?k.bind(t,t):Yt(k.get)?k.get.bind(t,t):xr,W=!Yt(k)&&Yt(k.set)?k.set.bind(t):xr,q=U({get:F,set:W});Object.defineProperty(r,z,{enumerable:!0,configurable:!0,get:()=>q.value,set:Z=>q.value=Z})}if(o)for(const z in o)tW(o[z],r,t,z);if(l){const z=Yt(l)?l.call(t):l;Reflect.ownKeys(z).forEach(k=>{jn(k,z[k])})}u&&qO(u,n,"c");function L(z,k){xt(k)?k.forEach(F=>z(F.bind(t))):k&&z(k.bind(t))}if(L(HM,d),L(Rn,h),L(pD,f),L(yc,p),L(zM,m),L(jG,v),L(ase,C),L(sse,w),L(ise,M),L(br,_),L(Dg,S),L(rse,A),xt(T))if(T.length){const z=n.exposed||(n.exposed={});T.forEach(k=>{Object.defineProperty(z,k,{get:()=>t[k],set:F=>t[k]=F,enumerable:!0})})}else n.exposed||(n.exposed={});x&&n.render===xr&&(n.render=x),I!=null&&(n.inheritAttrs=I),D&&(n.components=D),B&&(n.directives=B),A&&XG(n)}function dse(n,e,t=xr){xt(n)&&(n=wI(n));for(const r in n){const i=n[r];let s;Mn(i)?"default"in i?s=Lt(i.from||r,i.default,!0):s=Lt(i.from||r):s=Lt(i),qr(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function qO(n,e,t){pc(xt(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function tW(n,e,t,r){let i=r.includes(".")?fW(t,r):()=>t[r];if(Wt(n)){const s=e[n];Yt(s)&&ct(i,s)}else if(Yt(n))ct(i,n.bind(t));else if(Mn(n))if(xt(n))n.forEach(s=>tW(s,e,t,r));else{const s=Yt(n.handler)?n.handler.bind(t):e[n.handler];Yt(s)&&ct(i,s,n)}}function gD(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(e);let l;return o?l=o:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(c=>X2(l,c,a,!0)),X2(l,e,a)),Mn(e)&&s.set(e,l),l}function X2(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&X2(n,s,t,!0),i&&i.forEach(a=>X2(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const o=fse[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const fse={data:KO,props:YO,emits:YO,methods:h1,computed:h1,beforeCreate:Da,created:Da,beforeMount:Da,mounted:Da,beforeUpdate:Da,updated:Da,beforeDestroy:Da,beforeUnmount:Da,destroyed:Da,unmounted:Da,activated:Da,deactivated:Da,errorCaptured:Da,serverPrefetch:Da,components:h1,directives:h1,watch:pse,provide:KO,inject:hse};function KO(n,e){return e?n?function(){return ys(Yt(n)?n.call(this,this):n,Yt(e)?e.call(this,this):e)}:e:n}function hse(n,e){return h1(wI(n),wI(e))}function wI(n){if(xt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Da(n,e){return n?[...new Set([].concat(n,e))]:e}function h1(n,e){return n?ys(Object.create(null),n,e):e}function YO(n,e){return n?xt(n)&&xt(e)?[...new Set([...n,...e])]:ys(Object.create(null),WO(n),WO(e??{})):e}function pse(n,e){if(!n)return e;if(!e)return n;const t=ys(Object.create(null),n);for(const r in e)t[r]=Da(n[r],e[r]);return t}function nW(){return{app:null,config:{isNativeTag:aie,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mse=0;function vse(n,e){return function(r,i=null){Yt(r)||(r=ys({},r)),i!=null&&!Mn(i)&&(i=null);const s=nW(),a=new WeakSet,o=[];let l=!1;const c=s.app={_uid:mse++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Kse,get config(){return s.config},set config(u){},use(u,...d){return a.has(u)||(u&&Yt(u.install)?(a.add(u),u.install(c,...d)):Yt(u)&&(a.add(u),u(c,...d))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,d){return d?(s.components[u]=d,c):s.components[u]},directive(u,d){return d?(s.directives[u]=d,c):s.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||xe(r,i);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(f,u):n(f,u,h),l=!0,c._container=u,u.__vue_app__=c,GM(f.component)}},onUnmount(u){o.push(u)},unmount(){l&&(pc(o,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return s.provides[u]=d,c},runWithContext(u){const d=Sv;Sv=c;try{return u()}finally{Sv=d}}};return c}}let Sv=null;function jn(n,e){if(Sa){let t=Sa.provides;const r=Sa.parent&&Sa.parent.provides;r===t&&(t=Sa.provides=Object.create(r)),t[n]=e}}function Lt(n,e,t=!1){const r=Dn();if(r||Sv){let i=Sv?Sv._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Yt(e)?e.call(r&&r.proxy):e}}const rW={},iW=()=>Object.create(rW),sW=n=>Object.getPrototypeOf(n)===rW;function gse(n,e,t,r=!1){const i={},s=iW();n.propsDefaults=Object.create(null),aW(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:PG(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function yse(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,o=zr(i),[l]=n.propsOptions;let c=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if($M(n.emitsOptions,h))continue;const f=e[h];if(l)if(fr(s,h))f!==s[h]&&(s[h]=f,c=!0);else{const p=Ka(h);i[p]=CI(l,o,p,f,n,!1)}else f!==s[h]&&(s[h]=f,c=!0)}}}else{aW(n,e,i,s)&&(c=!0);let u;for(const d in o)(!e||!fr(e,d)&&((u=Id(d))===d||!fr(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(i[d]=CI(l,o,d,void 0,n,!0)):delete i[d]);if(s!==o)for(const d in s)(!e||!fr(e,d))&&(delete s[d],c=!0)}c&&ju(n.attrs,"set","")}function aW(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(A1(l))continue;const c=e[l];let u;i&&fr(i,u=Ka(l))?!s||!s.includes(u)?t[u]=c:(o||(o={}))[u]=c:$M(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,a=!0)}if(s){const l=zr(t),c=o||Si;for(let u=0;u<s.length;u++){const d=s[u];t[d]=CI(i,l,d,c[d],n,!fr(c,d))}}return a}function CI(n,e,t,r,i,s){const a=n[t];if(a!=null){const o=fr(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Yt(l)){const{propsDefaults:c}=i;if(t in c)r=c[t];else{const u=O_(i);r=c[t]=l.call(null,e),u()}}else r=l;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Id(t))&&(r=!0))}return r}const bse=new WeakMap;function oW(n,e,t=!1){const r=t?bse:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},o=[];let l=!1;if(!Yt(n)){const u=d=>{l=!0;const[h,f]=oW(d,e,!0);ys(a,h),f&&o.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return Mn(n)&&r.set(n,vv),vv;if(xt(s))for(let u=0;u<s.length;u++){const d=Ka(s[u]);XO(d)&&(a[d]=Si)}else if(s)for(const u in s){const d=Ka(u);if(XO(d)){const h=s[u],f=a[d]=xt(h)||Yt(h)?{type:h}:ys({},h),p=f.type;let m=!1,v=!0;if(xt(p))for(let g=0;g<p.length;++g){const _=p[g],b=Yt(_)&&_.name;if(b==="Boolean"){m=!0;break}else b==="String"&&(v=!1)}else m=Yt(p)&&p.name==="Boolean";f[0]=m,f[1]=v,(m||fr(f,"default"))&&o.push(d)}}const c=[a,o];return Mn(n)&&r.set(n,c),c}function XO(n){return n[0]!=="$"&&!A1(n)}const yD=n=>n==="_"||n==="__"||n==="_ctx"||n==="$stable",bD=n=>xt(n)?n.map(Uc):[Uc(n)],_se=(n,e,t)=>{if(e._n)return e;const r=Re((...i)=>bD(e(...i)),t);return r._c=!1,r},lW=(n,e,t)=>{const r=n._ctx;for(const i in n){if(yD(i))continue;const s=n[i];if(Yt(s))e[i]=_se(i,s,r);else if(s!=null){const a=bD(s);e[i]=()=>a}}},cW=(n,e)=>{const t=bD(e);n.slots.default=()=>t},uW=(n,e,t)=>{for(const r in e)(t||!yD(r))&&(n[r]=e[r])},Sse=(n,e,t)=>{const r=n.slots=iW();if(n.vnode.shapeFlag&32){const i=e.__;i&&mI(r,"__",i,!0);const s=e._;s?(uW(r,e,t),t&&mI(r,"_",s,!0)):lW(e,r)}else e&&cW(n,e)},xse=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=Si;if(r.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:uW(i,e,t):(s=!e.$stable,lW(e,i)),a=e}else e&&(cW(n,e),a={default:1});if(s)for(const o in i)!yD(o)&&a[o]==null&&delete i[o]},Na=Nse;function wse(n){return Cse(n)}function Cse(n,e){const t=kM();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=xr,insertStaticContent:p}=n,m=(oe,j,ke,ze=null,Ve=null,Le=null,Ze=void 0,st=null,fe=!!j.dynamicChildren)=>{if(oe===j)return;oe&&!dp(oe,j)&&(ze=ce(oe),Z(oe,Ve,Le,!0),oe=null),j.patchFlag===-2&&(fe=!1,j.dynamicChildren=null);const{type:V,ref:J,shapeFlag:he}=j;switch(V){case Lg:v(oe,j,ke,ze);break;case Yi:g(oe,j,ke,ze);break;case HA:oe==null&&_(j,ke,ze,Ze);break;case Bt:D(oe,j,ke,ze,Ve,Le,Ze,st,fe);break;default:he&1?x(oe,j,ke,ze,Ve,Le,Ze,st,fe):he&6?B(oe,j,ke,ze,Ve,Le,Ze,st,fe):(he&64||he&128)&&V.process(oe,j,ke,ze,Ve,Le,Ze,st,fe,Ge)}J!=null&&Ve?D1(J,oe&&oe.ref,Le,j||oe,!j):J==null&&oe&&oe.ref!=null&&D1(oe.ref,null,Le,oe,!0)},v=(oe,j,ke,ze)=>{if(oe==null)r(j.el=o(j.children),ke,ze);else{const Ve=j.el=oe.el;j.children!==oe.children&&c(Ve,j.children)}},g=(oe,j,ke,ze)=>{oe==null?r(j.el=l(j.children||""),ke,ze):j.el=oe.el},_=(oe,j,ke,ze)=>{[oe.el,oe.anchor]=p(oe.children,j,ke,ze,oe.el,oe.anchor)},b=({el:oe,anchor:j},ke,ze)=>{let Ve;for(;oe&&oe!==j;)Ve=h(oe),r(oe,ke,ze),oe=Ve;r(j,ke,ze)},S=({el:oe,anchor:j})=>{let ke;for(;oe&&oe!==j;)ke=h(oe),i(oe),oe=ke;i(j)},x=(oe,j,ke,ze,Ve,Le,Ze,st,fe)=>{j.type==="svg"?Ze="svg":j.type==="math"&&(Ze="mathml"),oe==null?w(j,ke,ze,Ve,Le,Ze,st,fe):A(oe,j,Ve,Le,Ze,st,fe)},w=(oe,j,ke,ze,Ve,Le,Ze,st)=>{let fe,V;const{props:J,shapeFlag:he,transition:Oe,dirs:je}=oe;if(fe=oe.el=a(oe.type,Le,J&&J.is,J),he&8?u(fe,oe.children):he&16&&C(oe.children,fe,null,ze,Ve,zA(oe,Le),Ze,st),je&&Ch(oe,null,ze,"created"),M(fe,oe,oe.scopeId,Ze,ze),J){for(const pt in J)pt!=="value"&&!A1(pt)&&s(fe,pt,null,J[pt],Le,ze);"value"in J&&s(fe,"value",null,J.value,Le),(V=J.onVnodeBeforeMount)&&Rc(V,ze,oe)}je&&Ch(oe,null,ze,"beforeMount");const dt=Mse(Ve,Oe);dt&&Oe.beforeEnter(fe),r(fe,j,ke),((V=J&&J.onVnodeMounted)||dt||je)&&Na(()=>{V&&Rc(V,ze,oe),dt&&Oe.enter(fe),je&&Ch(oe,null,ze,"mounted")},Ve)},M=(oe,j,ke,ze,Ve)=>{if(ke&&f(oe,ke),ze)for(let Le=0;Le<ze.length;Le++)f(oe,ze[Le]);if(Ve){let Le=Ve.subTree;if(j===Le||pW(Le.type)&&(Le.ssContent===j||Le.ssFallback===j)){const Ze=Ve.vnode;M(oe,Ze,Ze.scopeId,Ze.slotScopeIds,Ve.parent)}}},C=(oe,j,ke,ze,Ve,Le,Ze,st,fe=0)=>{for(let V=fe;V<oe.length;V++){const J=oe[V]=st?Tf(oe[V]):Uc(oe[V]);m(null,J,j,ke,ze,Ve,Le,Ze,st)}},A=(oe,j,ke,ze,Ve,Le,Ze)=>{const st=j.el=oe.el;let{patchFlag:fe,dynamicChildren:V,dirs:J}=j;fe|=oe.patchFlag&16;const he=oe.props||Si,Oe=j.props||Si;let je;if(ke&&Mh(ke,!1),(je=Oe.onVnodeBeforeUpdate)&&Rc(je,ke,j,oe),J&&Ch(j,oe,ke,"beforeUpdate"),ke&&Mh(ke,!0),(he.innerHTML&&Oe.innerHTML==null||he.textContent&&Oe.textContent==null)&&u(st,""),V?T(oe.dynamicChildren,V,st,ke,ze,zA(j,Ve),Le):Ze||k(oe,j,st,null,ke,ze,zA(j,Ve),Le,!1),fe>0){if(fe&16)I(st,he,Oe,ke,Ve);else if(fe&2&&he.class!==Oe.class&&s(st,"class",null,Oe.class,Ve),fe&4&&s(st,"style",he.style,Oe.style,Ve),fe&8){const dt=j.dynamicProps;for(let pt=0;pt<dt.length;pt++){const Te=dt[pt],ft=he[Te],Ke=Oe[Te];(Ke!==ft||Te==="value")&&s(st,Te,ft,Ke,Ve,ke)}}fe&1&&oe.children!==j.children&&u(st,j.children)}else!Ze&&V==null&&I(st,he,Oe,ke,Ve);((je=Oe.onVnodeUpdated)||J)&&Na(()=>{je&&Rc(je,ke,j,oe),J&&Ch(j,oe,ke,"updated")},ze)},T=(oe,j,ke,ze,Ve,Le,Ze)=>{for(let st=0;st<j.length;st++){const fe=oe[st],V=j[st],J=fe.el&&(fe.type===Bt||!dp(fe,V)||fe.shapeFlag&198)?d(fe.el):ke;m(fe,V,J,null,ze,Ve,Le,Ze,!0)}},I=(oe,j,ke,ze,Ve)=>{if(j!==ke){if(j!==Si)for(const Le in j)!A1(Le)&&!(Le in ke)&&s(oe,Le,j[Le],null,Ve,ze);for(const Le in ke){if(A1(Le))continue;const Ze=ke[Le],st=j[Le];Ze!==st&&Le!=="value"&&s(oe,Le,st,Ze,Ve,ze)}"value"in ke&&s(oe,"value",j.value,ke.value,Ve)}},D=(oe,j,ke,ze,Ve,Le,Ze,st,fe)=>{const V=j.el=oe?oe.el:o(""),J=j.anchor=oe?oe.anchor:o("");let{patchFlag:he,dynamicChildren:Oe,slotScopeIds:je}=j;je&&(st=st?st.concat(je):je),oe==null?(r(V,ke,ze),r(J,ke,ze),C(j.children||[],ke,J,Ve,Le,Ze,st,fe)):he>0&&he&64&&Oe&&oe.dynamicChildren?(T(oe.dynamicChildren,Oe,ke,Ve,Le,Ze,st),(j.key!=null||Ve&&j===Ve.subTree)&&_D(oe,j,!0)):k(oe,j,ke,J,Ve,Le,Ze,st,fe)},B=(oe,j,ke,ze,Ve,Le,Ze,st,fe)=>{j.slotScopeIds=st,oe==null?j.shapeFlag&512?Ve.ctx.activate(j,ke,ze,Ze,fe):O(j,ke,ze,Ve,Le,Ze,fe):H(oe,j,fe)},O=(oe,j,ke,ze,Ve,Le,Ze)=>{const st=oe.component=Hse(oe,ze,Ve);if(FM(oe)&&(st.ctx.renderer=Ge),Vse(st,!1,Ze),st.asyncDep){if(Ve&&Ve.registerDep(st,L,Ze),!oe.el){const fe=st.subTree=xe(Yi);g(null,fe,j,ke),oe.placeholder=fe.el}}else L(st,oe,j,ke,Ve,Le,Ze)},H=(oe,j,ke)=>{const ze=j.component=oe.component;if(kse(oe,j,ke))if(ze.asyncDep&&!ze.asyncResolved){z(ze,j,ke);return}else ze.next=j,ze.update();else j.el=oe.el,ze.vnode=j},L=(oe,j,ke,ze,Ve,Le,Ze)=>{const st=()=>{if(oe.isMounted){let{next:he,bu:Oe,u:je,parent:dt,vnode:pt}=oe;{const _e=dW(oe);if(_e){he&&(he.el=pt.el,z(oe,he,Ze)),_e.asyncDep.then(()=>{oe.isUnmounted||st()});return}}let Te=he,ft;Mh(oe,!1),he?(he.el=pt.el,z(oe,he,Ze)):he=pt,Oe&&Kw(Oe),(ft=he.props&&he.props.onVnodeBeforeUpdate)&&Rc(ft,dt,he,pt),Mh(oe,!0);const Ke=UA(oe),Q=oe.subTree;oe.subTree=Ke,m(Q,Ke,d(Q.el),ce(Q),oe,Ve,Le),he.el=Ke.el,Te===null&&Ose(oe,Ke.el),je&&Na(je,Ve),(ft=he.props&&he.props.onVnodeUpdated)&&Na(()=>Rc(ft,dt,he,pt),Ve)}else{let he;const{el:Oe,props:je}=j,{bm:dt,m:pt,parent:Te,root:ft,type:Ke}=oe,Q=_v(j);if(Mh(oe,!1),dt&&Kw(dt),!Q&&(he=je&&je.onVnodeBeforeMount)&&Rc(he,Te,j),Mh(oe,!0),Oe&&be){const _e=()=>{oe.subTree=UA(oe),be(Oe,oe.subTree,oe,Ve,null)};Q&&Ke.__asyncHydrate?Ke.__asyncHydrate(Oe,oe,_e):_e()}else{ft.ce&&ft.ce._def.shadowRoot!==!1&&ft.ce._injectChildStyle(Ke);const _e=oe.subTree=UA(oe);m(null,_e,ke,ze,oe,Ve,Le),j.el=_e.el}if(pt&&Na(pt,Ve),!Q&&(he=je&&je.onVnodeMounted)){const _e=j;Na(()=>Rc(he,Te,_e),Ve)}(j.shapeFlag&256||Te&&_v(Te.vnode)&&Te.vnode.shapeFlag&256)&&oe.a&&Na(oe.a,Ve),oe.isMounted=!0,j=ke=ze=null}};oe.scope.on();const fe=oe.effect=new gG(st);oe.scope.off();const V=oe.update=fe.run.bind(fe),J=oe.job=fe.runIfDirty.bind(fe);J.i=oe,J.id=oe.uid,fe.scheduler=()=>fD(J),Mh(oe,!0),V()},z=(oe,j,ke)=>{j.component=oe;const ze=oe.vnode.props;oe.vnode=j,oe.next=null,yse(oe,j.props,ze,ke),xse(oe,j.children,ke),vd(),zO(oe),gd()},k=(oe,j,ke,ze,Ve,Le,Ze,st,fe=!1)=>{const V=oe&&oe.children,J=oe?oe.shapeFlag:0,he=j.children,{patchFlag:Oe,shapeFlag:je}=j;if(Oe>0){if(Oe&128){W(V,he,ke,ze,Ve,Le,Ze,st,fe);return}else if(Oe&256){F(V,he,ke,ze,Ve,Le,Ze,st,fe);return}}je&8?(J&16&&ae(V,Ve,Le),he!==V&&u(ke,he)):J&16?je&16?W(V,he,ke,ze,Ve,Le,Ze,st,fe):ae(V,Ve,Le,!0):(J&8&&u(ke,""),je&16&&C(he,ke,ze,Ve,Le,Ze,st,fe))},F=(oe,j,ke,ze,Ve,Le,Ze,st,fe)=>{oe=oe||vv,j=j||vv;const V=oe.length,J=j.length,he=Math.min(V,J);let Oe;for(Oe=0;Oe<he;Oe++){const je=j[Oe]=fe?Tf(j[Oe]):Uc(j[Oe]);m(oe[Oe],je,ke,null,Ve,Le,Ze,st,fe)}V>J?ae(oe,Ve,Le,!0,!1,he):C(j,ke,ze,Ve,Le,Ze,st,fe,he)},W=(oe,j,ke,ze,Ve,Le,Ze,st,fe)=>{let V=0;const J=j.length;let he=oe.length-1,Oe=J-1;for(;V<=he&&V<=Oe;){const je=oe[V],dt=j[V]=fe?Tf(j[V]):Uc(j[V]);if(dp(je,dt))m(je,dt,ke,null,Ve,Le,Ze,st,fe);else break;V++}for(;V<=he&&V<=Oe;){const je=oe[he],dt=j[Oe]=fe?Tf(j[Oe]):Uc(j[Oe]);if(dp(je,dt))m(je,dt,ke,null,Ve,Le,Ze,st,fe);else break;he--,Oe--}if(V>he){if(V<=Oe){const je=Oe+1,dt=je<J?j[je].el:ze;for(;V<=Oe;)m(null,j[V]=fe?Tf(j[V]):Uc(j[V]),ke,dt,Ve,Le,Ze,st,fe),V++}}else if(V>Oe)for(;V<=he;)Z(oe[V],Ve,Le,!0),V++;else{const je=V,dt=V,pt=new Map;for(V=dt;V<=Oe;V++){const pe=j[V]=fe?Tf(j[V]):Uc(j[V]);pe.key!=null&&pt.set(pe.key,V)}let Te,ft=0;const Ke=Oe-dt+1;let Q=!1,_e=0;const Ae=new Array(Ke);for(V=0;V<Ke;V++)Ae[V]=0;for(V=je;V<=he;V++){const pe=oe[V];if(ft>=Ke){Z(pe,Ve,Le,!0);continue}let de;if(pe.key!=null)de=pt.get(pe.key);else for(Te=dt;Te<=Oe;Te++)if(Ae[Te-dt]===0&&dp(pe,j[Te])){de=Te;break}de===void 0?Z(pe,Ve,Le,!0):(Ae[de-dt]=V+1,de>=_e?_e=de:Q=!0,m(pe,j[de],ke,null,Ve,Le,Ze,st,fe),ft++)}const ge=Q?Tse(Ae):vv;for(Te=ge.length-1,V=Ke-1;V>=0;V--){const pe=dt+V,de=j[pe],at=j[pe+1],Ee=pe+1<J?at.el||at.placeholder:ze;Ae[V]===0?m(null,de,ke,Ee,Ve,Le,Ze,st,fe):Q&&(Te<0||V!==ge[Te]?q(de,ke,Ee,2):Te--)}}},q=(oe,j,ke,ze,Ve=null)=>{const{el:Le,type:Ze,transition:st,children:fe,shapeFlag:V}=oe;if(V&6){q(oe.component.subTree,j,ke,ze);return}if(V&128){oe.suspense.move(j,ke,ze);return}if(V&64){Ze.move(oe,j,ke,Ge);return}if(Ze===Bt){r(Le,j,ke);for(let he=0;he<fe.length;he++)q(fe[he],j,ke,ze);r(oe.anchor,j,ke);return}if(Ze===HA){b(oe,j,ke);return}if(ze!==2&&V&1&&st)if(ze===0)st.beforeEnter(Le),r(Le,j,ke),Na(()=>st.enter(Le),Ve);else{const{leave:he,delayLeave:Oe,afterLeave:je}=st,dt=()=>{oe.ctx.isUnmounted?i(Le):r(Le,j,ke)},pt=()=>{he(Le,()=>{dt(),je&&je()})};Oe?Oe(Le,dt,pt):pt()}else r(Le,j,ke)},Z=(oe,j,ke,ze=!1,Ve=!1)=>{const{type:Le,props:Ze,ref:st,children:fe,dynamicChildren:V,shapeFlag:J,patchFlag:he,dirs:Oe,cacheIndex:je}=oe;if(he===-2&&(Ve=!1),st!=null&&(vd(),D1(st,null,ke,oe,!0),gd()),je!=null&&(j.renderCache[je]=void 0),J&256){j.ctx.deactivate(oe);return}const dt=J&1&&Oe,pt=!_v(oe);let Te;if(pt&&(Te=Ze&&Ze.onVnodeBeforeUnmount)&&Rc(Te,j,oe),J&6)ie(oe.component,ke,ze);else{if(J&128){oe.suspense.unmount(ke,ze);return}dt&&Ch(oe,null,j,"beforeUnmount"),J&64?oe.type.remove(oe,j,ke,Ge,ze):V&&!V.hasOnce&&(Le!==Bt||he>0&&he&64)?ae(V,j,ke,!1,!0):(Le===Bt&&he&384||!Ve&&J&16)&&ae(fe,j,ke),ze&&se(oe)}(pt&&(Te=Ze&&Ze.onVnodeUnmounted)||dt)&&Na(()=>{Te&&Rc(Te,j,oe),dt&&Ch(oe,null,j,"unmounted")},ke)},se=oe=>{const{type:j,el:ke,anchor:ze,transition:Ve}=oe;if(j===Bt){X(ke,ze);return}if(j===HA){S(oe);return}const Le=()=>{i(ke),Ve&&!Ve.persisted&&Ve.afterLeave&&Ve.afterLeave()};if(oe.shapeFlag&1&&Ve&&!Ve.persisted){const{leave:Ze,delayLeave:st}=Ve,fe=()=>Ze(ke,Le);st?st(oe.el,Le,fe):fe()}else Le()},X=(oe,j)=>{let ke;for(;oe!==j;)ke=h(oe),i(oe),oe=ke;i(j)},ie=(oe,j,ke)=>{const{bum:ze,scope:Ve,job:Le,subTree:Ze,um:st,m:fe,a:V,parent:J,slots:{__:he}}=oe;jO(fe),jO(V),ze&&Kw(ze),J&&xt(he)&&he.forEach(Oe=>{J.renderCache[Oe]=void 0}),Ve.stop(),Le&&(Le.flags|=8,Z(Ze,oe,j,ke)),st&&Na(st,j),Na(()=>{oe.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},ae=(oe,j,ke,ze=!1,Ve=!1,Le=0)=>{for(let Ze=Le;Ze<oe.length;Ze++)Z(oe[Ze],j,ke,ze,Ve)},ce=oe=>{if(oe.shapeFlag&6)return ce(oe.component.subTree);if(oe.shapeFlag&128)return oe.suspense.next();const j=h(oe.anchor||oe.el),ke=j&&j[UG];return ke?h(ke):j};let we=!1;const He=(oe,j,ke)=>{oe==null?j._vnode&&Z(j._vnode,null,null,!0):m(j._vnode||null,oe,j,null,null,null,ke),j._vnode=oe,we||(we=!0,zO(),BG(),we=!1)},Ge={p:m,um:Z,m:q,r:se,mt:O,mc:C,pc:k,pbc:T,n:ce,o:n};let me,be;return e&&([me,be]=e(Ge)),{render:He,hydrate:me,createApp:vse(He,me)}}function zA({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Mh({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Mse(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function _D(n,e,t=!1){const r=n.children,i=e.children;if(xt(r)&&xt(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=Tf(i[s]),o.el=a.el),!t&&o.patchFlag!==-2&&_D(a,o)),o.type===Lg&&(o.el=a.el),o.type===Yi&&!o.el&&(o.el=a.el)}}function Tse(n){const e=n.slice(),t=[0];let r,i,s,a,o;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(i=t[t.length-1],n[i]<c){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,n[t[o]]<c?s=o+1:a=o;c<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function dW(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:dW(e)}function jO(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Ase=Symbol.for("v-scx"),Ese=()=>Lt(Ase);function Gs(n,e){return SD(n,null,e)}function ct(n,e,t){return SD(n,e,t)}function SD(n,e,t=Si){const{immediate:r,deep:i,flush:s,once:a}=t,o=ys({},t),l=e&&r||!e&&s!=="post";let c;if(xb){if(s==="sync"){const f=Ese();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=xr,f.resume=xr,f.pause=xr,f}}const u=Sa;o.call=(f,p,m)=>pc(f,u,p,m);let d=!1;s==="post"?o.scheduler=f=>{Na(f,u&&u.suspense)}:s!=="sync"&&(d=!0,o.scheduler=(f,p)=>{p?f():fD(f)}),o.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=Yie(n,e,o);return xb&&(c?c.push(h):l&&h()),h}function Ise(n,e,t){const r=this.proxy,i=Wt(n)?n.includes(".")?fW(r,n):()=>r[n]:n.bind(r,r);let s;Yt(e)?s=e:(s=e.handler,t=e);const a=O_(this),o=SD(i,s.bind(r),t);return a(),o}function fW(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const Rse=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Ka(e)}Modifiers`]||n[`${Id(e)}Modifiers`];function Pse(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Si;let i=t;const s=e.startsWith("update:"),a=s&&Rse(r,e.slice(7));a&&(a.trim&&(i=t.map(u=>Wt(u)?u.trim():u)),a.number&&(i=t.map(vI)));let o,l=r[o=E1(e)]||r[o=E1(Ka(e))];!l&&s&&(l=r[o=E1(Id(e))]),l&&pc(l,n,6,i);const c=r[o+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,pc(c,n,6,i)}}function hW(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},o=!1;if(!Yt(n)){const l=c=>{const u=hW(c,e,!0);u&&(o=!0,ys(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?(Mn(n)&&r.set(n,null),null):(xt(s)?s.forEach(l=>a[l]=null):ys(a,s),Mn(n)&&r.set(n,a),a)}function $M(n,e){return!n||!PM(e)?!1:(e=e.slice(2).replace(/Once$/,""),fr(n,e[0].toLowerCase()+e.slice(1))||fr(n,Id(e))||fr(n,e))}function UA(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=n,v=Y2(n);let g,_;try{if(t.shapeFlag&4){const S=i||r,x=S;g=Uc(c.call(x,S,u,d,f,h,p)),_=o}else{const S=e;g=Uc(S.length>1?S(d,{attrs:o,slots:a,emit:l}):S(d,null)),_=e.props?o:Dse(o)}}catch(S){k1.length=0,BM(S,n,1),g=xe(Yi)}let b=g;if(_&&m!==!1){const S=Object.keys(_),{shapeFlag:x}=b;S.length&&x&7&&(s&&S.some(rD)&&(_=Lse(_,s)),b=yd(b,_,!1,!0))}return t.dirs&&(b=yd(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&Yp(b,t.transition),g=b,Y2(v),g}const Dse=n=>{let e;for(const t in n)(t==="class"||t==="style"||PM(t))&&((e||(e={}))[t]=n[t]);return e},Lse=(n,e)=>{const t={};for(const r in n)(!rD(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function kse(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:o,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?ZO(r,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(a[h]!==r[h]&&!$M(c,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?ZO(r,a,c):!0:!!a;return!1}function ZO(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!$M(t,s))return!0}return!1}function Ose({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const pW=n=>n.__isSuspense;function Nse(n,e){e&&e.pendingBranch?xt(n)?e.effects.push(...n):e.effects.push(n):Zie(n)}const Bt=Symbol.for("v-fgt"),Lg=Symbol.for("v-txt"),Yi=Symbol.for("v-cmt"),HA=Symbol.for("v-stc"),k1=[];let $o=null;function $(n=!1){k1.push($o=n?null:[])}function Bse(){k1.pop(),$o=k1[k1.length-1]||null}let Sb=1;function QO(n,e=!1){Sb+=n,n<0&&$o&&e&&($o.hasOnce=!0)}function mW(n){return n.dynamicChildren=Sb>0?$o||vv:null,Bse(),Sb>0&&$o&&$o.push(n),n}function ue(n,e,t,r,i,s){return mW(ye(n,e,t,r,i,s,!0))}function rt(n,e,t,r,i){return mW(xe(n,e,t,r,i,!0))}function Kr(n){return n?n.__v_isVNode===!0:!1}function dp(n,e){return n.type===e.type&&n.key===e.key}const vW=({key:n})=>n??null,jw=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Wt(n)||qr(n)||Yt(n)?{i:ta,r:n,k:e,f:!!t}:n:null);function ye(n,e=null,t=null,r=0,i=null,s=n===Bt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&vW(e),ref:e&&jw(e),scopeId:zG,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ta};return o?(xD(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Wt(t)?8:16),Sb>0&&!a&&$o&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&$o.push(l),l}const xe=Fse;function Fse(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===QG)&&(n=Yi),Kr(n)){const o=yd(n,e,!0);return t&&xD(o,t),Sb>0&&!s&&$o&&(o.shapeFlag&6?$o[$o.indexOf(n)]=o:$o.push(o)),o.patchFlag=-2,o}if(qse(n)&&(n=n.__vccOpts),e){e=nu(e);let{class:o,style:l}=e;o&&!Wt(o)&&(e.class=Y(o)),Mn(l)&&(dD(l)&&!xt(l)&&(l=ys({},l)),e.style=Xt(l))}const a=Wt(n)?1:pW(n)?128:HG(n)?64:Mn(n)?4:Yt(n)?2:0;return ye(n,e,t,r,i,a,s,!0)}function nu(n){return n?dD(n)||sW(n)?ys({},n):n:null}function yd(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:l}=n,c=e?Nn(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&vW(c),ref:e&&e.ref?t&&s?xt(s)?s.concat(jw(e)):[s,jw(e)]:jw(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Bt?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&yd(n.ssContent),ssFallback:n.ssFallback&&yd(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Yp(u,l.clone(u)),u}function Bn(n=" ",e=0){return xe(Lg,null,n,e)}function Xe(n="",e=!1){return e?($(),rt(Yi,null,n)):xe(Yi,null,n)}function Uc(n){return n==null||typeof n=="boolean"?xe(Yi):xt(n)?xe(Bt,null,n.slice()):Kr(n)?Tf(n):xe(Lg,null,String(n))}function Tf(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:yd(n)}function xD(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(xt(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),xD(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!sW(e)?e._ctx=ta:i===3&&ta&&(ta.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Yt(e)?(e={default:e,_ctx:ta},t=32):(e=String(e),r&64?(t=16,e=[Bn(e)]):t=8);n.children=e,n.shapeFlag|=t}function Nn(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Y([e.class,r.class]));else if(i==="style")e.style=Xt([e.style,r.style]);else if(PM(i)){const s=e[i],a=r[i];a&&s!==a&&!(xt(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Rc(n,e,t,r=null){pc(n,e,7,[t,r])}const zse=nW();let Use=0;function Hse(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||zse,s={uid:Use++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pG(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oW(r,i),emitsOptions:hW(r,i),emit:null,emitted:null,propsDefaults:Si,inheritAttrs:r.inheritAttrs,ctx:Si,data:Si,props:Si,attrs:Si,slots:Si,refs:Si,setupState:Si,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Pse.bind(null,s),n.ce&&n.ce(s),s}let Sa=null;const Dn=()=>Sa||ta;let j2,MI;{const n=kM(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};j2=e("__VUE_INSTANCE_SETTERS__",t=>Sa=t),MI=e("__VUE_SSR_SETTERS__",t=>xb=t)}const O_=n=>{const e=Sa;return j2(n),n.scope.on(),()=>{n.scope.off(),j2(e)}},JO=()=>{Sa&&Sa.scope.off(),j2(null)};function gW(n){return n.vnode.shapeFlag&4}let xb=!1;function Vse(n,e=!1,t=!1){e&&MI(e);const{props:r,children:i}=n.vnode,s=gW(n);gse(n,r,s,e),Sse(n,i,t||e);const a=s?$se(n,e):void 0;return e&&MI(!1),a}function $se(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,cse);const{setup:r}=t;if(r){vd();const i=n.setupContext=r.length>1?bW(n):null,s=O_(n),a=k_(r,n,0,[n.props,i]),o=Kp(a);if(gd(),s(),(o||n.sp)&&!_v(n)&&XG(n),o){if(a.then(JO,JO),e)return a.then(l=>{eN(n,l,e)}).catch(l=>{BM(l,n,0)});n.asyncDep=a}else eN(n,a,e)}else yW(n,e)}function eN(n,e,t){Yt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Mn(e)&&(n.setupState=LG(e)),yW(n,t)}let tN;function yW(n,e,t){const r=n.type;if(!n.render){if(!e&&tN&&!r.render){const i=r.template||gD(n).template;if(i){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:o,compilerOptions:l}=r,c=ys(ys({isCustomElement:s,delimiters:o},a),l);r.render=tN(i,c)}}n.render=r.render||xr}{const i=O_(n);vd();try{use(n)}finally{gd(),i()}}}const Gse={get(n,e){return _a(n,"get",""),n[e]}};function bW(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,Gse),slots:n.slots,emit:n.emit,expose:e}}function GM(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(LG(od(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in L1)return L1[t](n)},has(e,t){return t in e||t in L1}})):n.proxy}function Wse(n,e=!0){return Yt(n)?n.displayName||n.name:n.name||e&&n.__name}function qse(n){return Yt(n)&&"__vccOpts"in n}const U=(n,e)=>qie(n,e,xb);function tn(n,e,t){const r=arguments.length;return r===2?Mn(e)&&!xt(e)?Kr(e)?xe(n,null,[e]):xe(n,e):xe(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Kr(t)&&(t=[t]),xe(n,e,t))}const Kse="3.5.18",Yse=xr;/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let TI;const nN=typeof window<"u"&&window.trustedTypes;if(nN)try{TI=nN.createPolicy("vue",{createHTML:n=>n})}catch{}const _W=TI?n=>TI.createHTML(n):n=>n,Xse="http://www.w3.org/2000/svg",jse="http://www.w3.org/1998/Math/MathML",Gu=typeof document<"u"?document:null,rN=Gu&&Gu.createElement("template"),Zse={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Gu.createElementNS(Xse,n):e==="mathml"?Gu.createElementNS(jse,n):t?Gu.createElement(n,{is:t}):Gu.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Gu.createTextNode(n),createComment:n=>Gu.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Gu.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{rN.innerHTML=_W(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const o=rN.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Wd="transition",Cy="animation",Wv=Symbol("_vtc"),SW={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},xW=ys({},WG,SW),Qse=n=>(n.displayName="Transition",n.props=xW,n),Os=Qse((n,{slots:e})=>tn(tse,wW(n),e)),Th=(n,e=[])=>{xt(n)?n.forEach(t=>t(...e)):n&&n(...e)},iN=n=>n?xt(n)?n.some(e=>e.length>1):n.length>1:!1;function wW(n){const e={};for(const D in n)D in SW||(e[D]=n[D]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=Jse(i),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:_,onEnterCancelled:b,onLeave:S,onLeaveCancelled:x,onBeforeAppear:w=g,onAppear:M=_,onAppearCancelled:C=b}=e,A=(D,B,O,H)=>{D._enterCancelled=H,yf(D,B?u:o),yf(D,B?c:a),O&&O()},T=(D,B)=>{D._isLeaving=!1,yf(D,d),yf(D,f),yf(D,h),B&&B()},I=D=>(B,O)=>{const H=D?M:_,L=()=>A(B,D,O);Th(H,[B,L]),sN(()=>{yf(B,D?l:s),Oc(B,D?u:o),iN(H)||aN(B,r,m,L)})};return ys(e,{onBeforeEnter(D){Th(g,[D]),Oc(D,s),Oc(D,a)},onBeforeAppear(D){Th(w,[D]),Oc(D,l),Oc(D,c)},onEnter:I(!1),onAppear:I(!0),onLeave(D,B){D._isLeaving=!0;const O=()=>T(D,B);Oc(D,d),D._enterCancelled?(Oc(D,h),AI()):(AI(),Oc(D,h)),sN(()=>{D._isLeaving&&(yf(D,d),Oc(D,f),iN(S)||aN(D,r,v,O))}),Th(S,[D,O])},onEnterCancelled(D){A(D,!1,void 0,!0),Th(b,[D])},onAppearCancelled(D){A(D,!0,void 0,!0),Th(C,[D])},onLeaveCancelled(D){T(D),Th(x,[D])}})}function Jse(n){if(n==null)return null;if(Mn(n))return[VA(n.enter),VA(n.leave)];{const e=VA(n);return[e,e]}}function VA(n){return die(n)}function Oc(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Wv]||(n[Wv]=new Set)).add(e)}function yf(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Wv];t&&(t.delete(e),t.size||(n[Wv]=void 0))}function sN(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let eae=0;function aN(n,e,t,r){const i=n._endId=++eae,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:o,propCount:l}=CW(n,e);if(!a)return r();const c=a+"end";let u=0;const d=()=>{n.removeEventListener(c,h),s()},h=f=>{f.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),n.addEventListener(c,h)}function CW(n,e){const t=window.getComputedStyle(n),r=p=>(t[p]||"").split(", "),i=r(`${Wd}Delay`),s=r(`${Wd}Duration`),a=oN(i,s),o=r(`${Cy}Delay`),l=r(`${Cy}Duration`),c=oN(o,l);let u=null,d=0,h=0;e===Wd?a>0&&(u=Wd,d=a,h=s.length):e===Cy?c>0&&(u=Cy,d=c,h=l.length):(d=Math.max(a,c),u=d>0?a>c?Wd:Cy:null,h=u?u===Wd?s.length:l.length:0);const f=u===Wd&&/\b(transform|all)(,|$)/.test(r(`${Wd}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function oN(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>lN(t)+lN(n[r])))}function lN(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function AI(){return document.body.offsetHeight}function tae(n,e,t){const r=n[Wv];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Z2=Symbol("_vod"),MW=Symbol("_vsh"),cr={beforeMount(n,{value:e},{transition:t}){n[Z2]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):My(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),My(n,!0),r.enter(n)):r.leave(n,()=>{My(n,!1)}):My(n,e))},beforeUnmount(n,{value:e}){My(n,e)}};function My(n,e){n.style.display=e?n[Z2]:"none",n[MW]=!e}const nae=Symbol(""),rae=/(^|;)\s*display\s*:/;function iae(n,e,t){const r=n.style,i=Wt(t);let s=!1;if(t&&!i){if(e)if(Wt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&Zw(r,o,"")}else for(const a in e)t[a]==null&&Zw(r,a,"");for(const a in t)a==="display"&&(s=!0),Zw(r,a,t[a])}else if(i){if(e!==t){const a=r[nae];a&&(t+=";"+a),r.cssText=t,s=rae.test(t)}}else e&&n.removeAttribute("style");Z2 in n&&(n[Z2]=s?r.display:"",n[MW]&&(r.display="none"))}const cN=/\s*!important$/;function Zw(n,e,t){if(xt(t))t.forEach(r=>Zw(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=sae(n,e);cN.test(t)?n.setProperty(Id(r),t.replace(cN,""),"important"):n[r]=t}}const uN=["Webkit","Moz","ms"],$A={};function sae(n,e){const t=$A[e];if(t)return t;let r=Ka(e);if(r!=="filter"&&r in n)return $A[e]=r;r=L_(r);for(let i=0;i<uN.length;i++){const s=uN[i]+r;if(s in n)return $A[e]=s}return e}const dN="http://www.w3.org/1999/xlink";function fN(n,e,t,r,i,s=gie(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(dN,e.slice(6,e.length)):n.setAttributeNS(dN,e,t):t==null||s&&!uG(t)?n.removeAttribute(e):n.setAttribute(e,s?"":hc(t)?String(t):t)}function hN(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?_W(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(o!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=uG(t):t==null&&o==="string"?(t="",a=!0):o==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function If(n,e,t,r){n.addEventListener(e,t,r)}function aae(n,e,t,r){n.removeEventListener(e,t,r)}const pN=Symbol("_vei");function oae(n,e,t,r,i=null){const s=n[pN]||(n[pN]={}),a=s[e];if(r&&a)a.value=r;else{const[o,l]=lae(e);if(r){const c=s[e]=dae(r,i);If(n,o,c,l)}else a&&(aae(n,o,a,l),s[e]=void 0)}}const mN=/(?:Once|Passive|Capture)$/;function lae(n){let e;if(mN.test(n)){e={};let r;for(;r=n.match(mN);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Id(n.slice(2)),e]}let GA=0;const cae=Promise.resolve(),uae=()=>GA||(cae.then(()=>GA=0),GA=Date.now());function dae(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;pc(fae(r,t.value),e,5,[r])};return t.value=n,t.attached=uae(),t}function fae(n,e){if(xt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const vN=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,hae=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?tae(n,r,a):e==="style"?iae(n,t,r):PM(e)?rD(e)||oae(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pae(n,e,r,a))?(hN(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fN(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Wt(r))?hN(n,Ka(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),fN(n,e,r,a))};function pae(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&vN(e)&&Yt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return vN(e)&&Wt(t)?!1:e in n}const TW=new WeakMap,AW=new WeakMap,Q2=Symbol("_moveCb"),gN=Symbol("_enterCb"),mae=n=>(delete n.props.mode,n),vae=mae({name:"TransitionGroup",props:ys({},xW,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Dn(),r=GG();let i,s;return yc(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!_ae(i[0].el,t.vnode.el,a)){i=[];return}i.forEach(gae),i.forEach(yae);const o=i.filter(bae);AI(),o.forEach(l=>{const c=l.el,u=c.style;Oc(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Q2]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[Q2]=null,yf(c,a))};c.addEventListener("transitionend",d)}),i=[]}),()=>{const a=zr(n),o=wW(a);let l=a.tag||Bt;if(i=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(i.push(u),Yp(u,_b(u,o,r,t)),TW.set(u,u.el.getBoundingClientRect()))}s=e.default?hD(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Yp(u,_b(u,o,r,t))}return xe(l,null,s)}}}),EW=vae;function gae(n){const e=n.el;e[Q2]&&e[Q2](),e[gN]&&e[gN]()}function yae(n){AW.set(n,n.el.getBoundingClientRect())}function bae(n){const e=TW.get(n),t=AW.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function _ae(n,e,t){const r=n.cloneNode(),i=n[Wv];i&&i.forEach(o=>{o.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=CW(r);return s.removeChild(r),a}const qv=n=>{const e=n.props["onUpdate:modelValue"]||!1;return xt(e)?t=>Kw(e,t):e};function Sae(n){n.target.composing=!0}function yN(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ld=Symbol("_assign"),WM={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[ld]=qv(i);const s=r||i.props&&i.props.type==="number";If(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),s&&(o=vI(o)),n[ld](o)}),t&&If(n,"change",()=>{n.value=n.value.trim()}),e||(If(n,"compositionstart",Sae),If(n,"compositionend",yN),If(n,"change",yN))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},a){if(n[ld]=qv(a),n.composing)return;const o=(s||n.type==="number")&&!/^0\d/.test(n.value)?vI(n.value):n.value,l=e??"";o!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},J2={deep:!0,created(n,e,t){n[ld]=qv(t),If(n,"change",()=>{const r=n._modelValue,i=RW(n),s=n.checked,a=n[ld];if(xt(r)){const o=dG(r,i),l=o!==-1;if(s&&!l)a(r.concat(i));else if(!s&&l){const c=[...r];c.splice(o,1),a(c)}}else if(DM(r)){const o=new Set(r);s?o.add(i):o.delete(i),a(o)}else a(PW(n,s))})},mounted:bN,beforeUpdate(n,e,t){n[ld]=qv(t),bN(n,e,t)}};function bN(n,{value:e,oldValue:t},r){n._modelValue=e;let i;if(xt(e))i=dG(e,r.props.value)>-1;else if(DM(e))i=e.has(r.props.value);else{if(e===t)return;i=Gv(e,PW(n,!0))}n.checked!==i&&(n.checked=i)}const IW={created(n,{value:e},t){n.checked=Gv(e,t.props.value),n[ld]=qv(t),If(n,"change",()=>{n[ld](RW(n))})},beforeUpdate(n,{value:e,oldValue:t},r){n[ld]=qv(r),e!==t&&(n.checked=Gv(e,r.props.value))}};function RW(n){return"_value"in n?n._value:n.value}function PW(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const xae=["ctrl","shift","alt","meta"],wae={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>xae.some(t=>n[`${t}Key`]&&!e.includes(t))},an=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const o=wae[e[a]];if(o&&o(i,e))return}return n(i,...s)})},Cae={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Dr=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=Id(i.key);if(e.some(a=>a===s||Cae[a]===s))return n(i)})},Mae=ys({patchProp:hae},Zse);let _N;function DW(){return _N||(_N=wse(Mae))}const Jf=(...n)=>{DW().render(...n)},LW=(...n)=>{const e=DW().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=Aae(r);if(!i)return;const s=e._component;!Yt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,Tae(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function Tae(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Aae(n){return Wt(n)?document.querySelector(n):n}const Eae="2.10.6",SN=Symbol("INSTALLED_KEY"),kW=Symbol(),O1="el",Iae="is-",Ah=(n,e,t,r,i)=>{let s=`${n}-${e}`;return t&&(s+=`-${t}`),r&&(s+=`__${r}`),i&&(s+=`--${i}`),s},OW=Symbol("namespaceContextKey"),wD=n=>{const e=n||(Dn()?Lt(OW,ne(O1)):ne(O1));return U(()=>y(e)||O1)},gt=(n,e)=>{const t=wD(e);return{namespace:t,b:(m="")=>Ah(t.value,n,m,"",""),e:m=>m?Ah(t.value,n,"",m,""):"",m:m=>m?Ah(t.value,n,"","",m):"",be:(m,v)=>m&&v?Ah(t.value,n,m,v,""):"",em:(m,v)=>m&&v?Ah(t.value,n,"",m,v):"",bm:(m,v)=>m&&v?Ah(t.value,n,m,"",v):"",bem:(m,v,g)=>m&&v&&g?Ah(t.value,n,m,v,g):"",is:(m,...v)=>{const g=v.length>=1?v[0]:!0;return m&&g?`${Iae}${m}`:""},cssVar:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${g}`]=m[g]);return v},cssVarName:m=>`--${t.value}-${m}`,cssVarBlock:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${n}-${g}`]=m[g]);return v},cssVarBlockName:m=>`--${t.value}-${n}-${m}`}};var Rae=typeof global=="object"&&global&&global.Object===Object&&global;const NW=Rae;var Pae=typeof self=="object"&&self&&self.Object===Object&&self,Dae=NW||Pae||Function("return this")();const bc=Dae;var Lae=bc.Symbol;const Nl=Lae;var BW=Object.prototype,kae=BW.hasOwnProperty,Oae=BW.toString,Ty=Nl?Nl.toStringTag:void 0;function Nae(n){var e=kae.call(n,Ty),t=n[Ty];try{n[Ty]=void 0;var r=!0}catch{}var i=Oae.call(n);return r&&(e?n[Ty]=t:delete n[Ty]),i}var Bae=Object.prototype,Fae=Bae.toString;function zae(n){return Fae.call(n)}var Uae="[object Null]",Hae="[object Undefined]",xN=Nl?Nl.toStringTag:void 0;function p0(n){return n==null?n===void 0?Hae:Uae:xN&&xN in Object(n)?Nae(n):zae(n)}function ru(n){return n!=null&&typeof n=="object"}var Vae="[object Symbol]";function qM(n){return typeof n=="symbol"||ru(n)&&p0(n)==Vae}function CD(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var $ae=Array.isArray;const Ya=$ae;var Gae=1/0,wN=Nl?Nl.prototype:void 0,CN=wN?wN.toString:void 0;function FW(n){if(typeof n=="string")return n;if(Ya(n))return CD(n,FW)+"";if(qM(n))return CN?CN.call(n):"";var e=n+"";return e=="0"&&1/n==-Gae?"-0":e}var Wae=/\s/;function qae(n){for(var e=n.length;e--&&Wae.test(n.charAt(e)););return e}var Kae=/^\s+/;function Yae(n){return n&&n.slice(0,qae(n)+1).replace(Kae,"")}function Xa(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var MN=0/0,Xae=/^[-+]0x[0-9a-f]+$/i,jae=/^0b[01]+$/i,Zae=/^0o[0-7]+$/i,Qae=parseInt;function EI(n){if(typeof n=="number")return n;if(qM(n))return MN;if(Xa(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Xa(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Yae(n);var t=jae.test(n);return t||Zae.test(n)?Qae(n.slice(2),t?2:8):Xae.test(n)?MN:+n}var TN=1/0,Jae=17976931348623157e292;function eoe(n){if(!n)return n===0?n:0;if(n=EI(n),n===TN||n===-TN){var e=n<0?-1:1;return e*Jae}return n===n?n:0}function toe(n){var e=eoe(n),t=e%1;return e===e?t?e-t:e:0}function MD(n){return n}var noe="[object AsyncFunction]",roe="[object Function]",ioe="[object GeneratorFunction]",soe="[object Proxy]";function TD(n){if(!Xa(n))return!1;var e=p0(n);return e==roe||e==ioe||e==noe||e==soe}var aoe=bc["__core-js_shared__"];const WA=aoe;var AN=function(){var n=/[^.]+$/.exec(WA&&WA.keys&&WA.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function ooe(n){return!!AN&&AN in n}var loe=Function.prototype,coe=loe.toString;function m0(n){if(n!=null){try{return coe.call(n)}catch{}try{return n+""}catch{}}return""}var uoe=/[\\^$.*+?()[\]{}|]/g,doe=/^\[object .+?Constructor\]$/,foe=Function.prototype,hoe=Object.prototype,poe=foe.toString,moe=hoe.hasOwnProperty,voe=RegExp("^"+poe.call(moe).replace(uoe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function goe(n){if(!Xa(n)||ooe(n))return!1;var e=TD(n)?voe:doe;return e.test(m0(n))}function yoe(n,e){return n==null?void 0:n[e]}function v0(n,e){var t=yoe(n,e);return goe(t)?t:void 0}var boe=v0(bc,"WeakMap");const II=boe;var EN=Object.create,_oe=function(){function n(){}return function(e){if(!Xa(e))return{};if(EN)return EN(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const Soe=_oe;function xoe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function woe(){}function zW(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Coe=800,Moe=16,Toe=Date.now;function Aoe(n){var e=0,t=0;return function(){var r=Toe(),i=Moe-(r-t);if(t=r,i>0){if(++e>=Coe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function Eoe(n){return function(){return n}}var Ioe=function(){try{var n=v0(Object,"defineProperty");return n({},"",{}),n}catch{}}();const eC=Ioe;var Roe=eC?function(n,e){return eC(n,"toString",{configurable:!0,enumerable:!1,value:Eoe(e),writable:!0})}:MD;const Poe=Roe;var Doe=Aoe(Poe);const UW=Doe;function Loe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function HW(n,e,t,r){for(var i=n.length,s=t+(r?1:-1);r?s--:++s<i;)if(e(n[s],s,n))return s;return-1}function koe(n){return n!==n}function Ooe(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}function Noe(n,e,t){return e===e?Ooe(n,e,t):HW(n,koe,t)}function Boe(n,e){var t=n==null?0:n.length;return!!t&&Noe(n,e,0)>-1}var Foe=9007199254740991,zoe=/^(?:0|[1-9]\d*)$/;function KM(n,e){var t=typeof n;return e=e??Foe,!!e&&(t=="number"||t!="symbol"&&zoe.test(n))&&n>-1&&n%1==0&&n<e}function AD(n,e,t){e=="__proto__"&&eC?eC(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function N_(n,e){return n===e||n!==n&&e!==e}var Uoe=Object.prototype,Hoe=Uoe.hasOwnProperty;function ED(n,e,t){var r=n[e];(!(Hoe.call(n,e)&&N_(r,t))||t===void 0&&!(e in n))&&AD(n,e,t)}function kg(n,e,t,r){var i=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(t[o],n[o],o,t,n):void 0;l===void 0&&(l=n[o]),i?AD(t,o,l):ED(t,o,l)}return t}var IN=Math.max;function VW(n,e,t){return e=IN(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=IN(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=t(a),xoe(n,this,o)}}function $W(n,e){return UW(VW(n,e,MD),n+"")}var Voe=9007199254740991;function ID(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Voe}function Og(n){return n!=null&&ID(n.length)&&!TD(n)}function $oe(n,e,t){if(!Xa(t))return!1;var r=typeof e;return(r=="number"?Og(t)&&KM(e,t.length):r=="string"&&e in t)?N_(t[e],n):!1}function Goe(n){return $W(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,a&&$oe(t[0],t[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=t[r];o&&n(e,o,r,s)}return e})}var Woe=Object.prototype;function RD(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Woe;return n===t}function qoe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Koe="[object Arguments]";function RN(n){return ru(n)&&p0(n)==Koe}var GW=Object.prototype,Yoe=GW.hasOwnProperty,Xoe=GW.propertyIsEnumerable,joe=RN(function(){return arguments}())?RN:function(n){return ru(n)&&Yoe.call(n,"callee")&&!Xoe.call(n,"callee")};const wb=joe;function Zoe(){return!1}var WW=typeof qo=="object"&&qo&&!qo.nodeType&&qo,PN=WW&&typeof Ko=="object"&&Ko&&!Ko.nodeType&&Ko,Qoe=PN&&PN.exports===WW,DN=Qoe?bc.Buffer:void 0,Joe=DN?DN.isBuffer:void 0,ele=Joe||Zoe;const Cb=ele;var tle="[object Arguments]",nle="[object Array]",rle="[object Boolean]",ile="[object Date]",sle="[object Error]",ale="[object Function]",ole="[object Map]",lle="[object Number]",cle="[object Object]",ule="[object RegExp]",dle="[object Set]",fle="[object String]",hle="[object WeakMap]",ple="[object ArrayBuffer]",mle="[object DataView]",vle="[object Float32Array]",gle="[object Float64Array]",yle="[object Int8Array]",ble="[object Int16Array]",_le="[object Int32Array]",Sle="[object Uint8Array]",xle="[object Uint8ClampedArray]",wle="[object Uint16Array]",Cle="[object Uint32Array]",Ei={};Ei[vle]=Ei[gle]=Ei[yle]=Ei[ble]=Ei[_le]=Ei[Sle]=Ei[xle]=Ei[wle]=Ei[Cle]=!0;Ei[tle]=Ei[nle]=Ei[ple]=Ei[rle]=Ei[mle]=Ei[ile]=Ei[sle]=Ei[ale]=Ei[ole]=Ei[lle]=Ei[cle]=Ei[ule]=Ei[dle]=Ei[fle]=Ei[hle]=!1;function Mle(n){return ru(n)&&ID(n.length)&&!!Ei[p0(n)]}function PD(n){return function(e){return n(e)}}var qW=typeof qo=="object"&&qo&&!qo.nodeType&&qo,N1=qW&&typeof Ko=="object"&&Ko&&!Ko.nodeType&&Ko,Tle=N1&&N1.exports===qW,qA=Tle&&NW.process,Ale=function(){try{var n=N1&&N1.require&&N1.require("util").types;return n||qA&&qA.binding&&qA.binding("util")}catch{}}();const Kv=Ale;var LN=Kv&&Kv.isTypedArray,Ele=LN?PD(LN):Mle;const DD=Ele;var Ile=Object.prototype,Rle=Ile.hasOwnProperty;function KW(n,e){var t=Ya(n),r=!t&&wb(n),i=!t&&!r&&Cb(n),s=!t&&!r&&!i&&DD(n),a=t||r||i||s,o=a?qoe(n.length,String):[],l=o.length;for(var c in n)(e||Rle.call(n,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||KM(c,l)))&&o.push(c);return o}function YW(n,e){return function(t){return n(e(t))}}var Ple=YW(Object.keys,Object);const Dle=Ple;var Lle=Object.prototype,kle=Lle.hasOwnProperty;function Ole(n){if(!RD(n))return Dle(n);var e=[];for(var t in Object(n))kle.call(n,t)&&t!="constructor"&&e.push(t);return e}function B_(n){return Og(n)?KW(n):Ole(n)}function Nle(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Ble=Object.prototype,Fle=Ble.hasOwnProperty;function zle(n){if(!Xa(n))return Nle(n);var e=RD(n),t=[];for(var r in n)r=="constructor"&&(e||!Fle.call(n,r))||t.push(r);return t}function F_(n){return Og(n)?KW(n,!0):zle(n)}var Ule=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hle=/^\w*$/;function LD(n,e){if(Ya(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||qM(n)?!0:Hle.test(n)||!Ule.test(n)||e!=null&&n in Object(e)}var Vle=v0(Object,"create");const Mb=Vle;function $le(){this.__data__=Mb?Mb(null):{},this.size=0}function Gle(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Wle="__lodash_hash_undefined__",qle=Object.prototype,Kle=qle.hasOwnProperty;function Yle(n){var e=this.__data__;if(Mb){var t=e[n];return t===Wle?void 0:t}return Kle.call(e,n)?e[n]:void 0}var Xle=Object.prototype,jle=Xle.hasOwnProperty;function Zle(n){var e=this.__data__;return Mb?e[n]!==void 0:jle.call(e,n)}var Qle="__lodash_hash_undefined__";function Jle(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Mb&&e===void 0?Qle:e,this}function Xp(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Xp.prototype.clear=$le;Xp.prototype.delete=Gle;Xp.prototype.get=Yle;Xp.prototype.has=Zle;Xp.prototype.set=Jle;function ece(){this.__data__=[],this.size=0}function YM(n,e){for(var t=n.length;t--;)if(N_(n[t][0],e))return t;return-1}var tce=Array.prototype,nce=tce.splice;function rce(n){var e=this.__data__,t=YM(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():nce.call(e,t,1),--this.size,!0}function ice(n){var e=this.__data__,t=YM(e,n);return t<0?void 0:e[t][1]}function sce(n){return YM(this.__data__,n)>-1}function ace(n,e){var t=this.__data__,r=YM(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Dd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Dd.prototype.clear=ece;Dd.prototype.delete=rce;Dd.prototype.get=ice;Dd.prototype.has=sce;Dd.prototype.set=ace;var oce=v0(bc,"Map");const Tb=oce;function lce(){this.size=0,this.__data__={hash:new Xp,map:new(Tb||Dd),string:new Xp}}function cce(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function XM(n,e){var t=n.__data__;return cce(e)?t[typeof e=="string"?"string":"hash"]:t.map}function uce(n){var e=XM(this,n).delete(n);return this.size-=e?1:0,e}function dce(n){return XM(this,n).get(n)}function fce(n){return XM(this,n).has(n)}function hce(n,e){var t=XM(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Ld(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ld.prototype.clear=lce;Ld.prototype.delete=uce;Ld.prototype.get=dce;Ld.prototype.has=fce;Ld.prototype.set=hce;var pce="Expected a function";function jM(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(pce);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var a=n.apply(this,r);return t.cache=s.set(i,a)||s,a};return t.cache=new(jM.Cache||Ld),t}jM.Cache=Ld;var mce=500;function vce(n){var e=jM(n,function(r){return t.size===mce&&t.clear(),r}),t=e.cache;return e}var gce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yce=/\\(\\)?/g,bce=vce(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(gce,function(t,r,i,s){e.push(i?s.replace(yce,"$1"):r||t)}),e});const _ce=bce;function Sce(n){return n==null?"":FW(n)}function Ng(n,e){return Ya(n)?n:LD(n,e)?[n]:_ce(Sce(n))}var xce=1/0;function Bg(n){if(typeof n=="string"||qM(n))return n;var e=n+"";return e=="0"&&1/n==-xce?"-0":e}function ZM(n,e){e=Ng(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Bg(e[t++])];return t&&t==r?n:void 0}function Vi(n,e,t){var r=n==null?void 0:ZM(n,e);return r===void 0?t:r}function kD(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var kN=Nl?Nl.isConcatSpreadable:void 0;function wce(n){return Ya(n)||wb(n)||!!(kN&&n&&n[kN])}function z_(n,e,t,r,i){var s=-1,a=n.length;for(t||(t=wce),i||(i=[]);++s<a;){var o=n[s];e>0&&t(o)?e>1?z_(o,e-1,t,r,i):kD(i,o):r||(i[i.length]=o)}return i}function XW(n){var e=n==null?0:n.length;return e?z_(n,1):[]}function jW(n){return UW(VW(n,void 0,XW),n+"")}var Cce=YW(Object.getPrototypeOf,Object);const OD=Cce;var Mce="[object Object]",Tce=Function.prototype,Ace=Object.prototype,ZW=Tce.toString,Ece=Ace.hasOwnProperty,Ice=ZW.call(Object);function QW(n){if(!ru(n)||p0(n)!=Mce)return!1;var e=OD(n);if(e===null)return!0;var t=Ece.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ZW.call(t)==Ice}function Rce(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function Is(){if(!arguments.length)return[];var n=arguments[0];return Ya(n)?n:[n]}function Pce(){this.__data__=new Dd,this.size=0}function Dce(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function Lce(n){return this.__data__.get(n)}function kce(n){return this.__data__.has(n)}var Oce=200;function Nce(n,e){var t=this.__data__;if(t instanceof Dd){var r=t.__data__;if(!Tb||r.length<Oce-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Ld(r)}return t.set(n,e),this.size=t.size,this}function uc(n){var e=this.__data__=new Dd(n);this.size=e.size}uc.prototype.clear=Pce;uc.prototype.delete=Dce;uc.prototype.get=Lce;uc.prototype.has=kce;uc.prototype.set=Nce;function Bce(n,e){return n&&kg(e,B_(e),n)}function Fce(n,e){return n&&kg(e,F_(e),n)}var JW=typeof qo=="object"&&qo&&!qo.nodeType&&qo,ON=JW&&typeof Ko=="object"&&Ko&&!Ko.nodeType&&Ko,zce=ON&&ON.exports===JW,NN=zce?bc.Buffer:void 0,BN=NN?NN.allocUnsafe:void 0;function eq(n,e){if(e)return n.slice();var t=n.length,r=BN?BN(t):new n.constructor(t);return n.copy(r),r}function Uce(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var a=n[t];e(a,t,n)&&(s[i++]=a)}return s}function tq(){return[]}var Hce=Object.prototype,Vce=Hce.propertyIsEnumerable,FN=Object.getOwnPropertySymbols,$ce=FN?function(n){return n==null?[]:(n=Object(n),Uce(FN(n),function(e){return Vce.call(n,e)}))}:tq;const ND=$ce;function Gce(n,e){return kg(n,ND(n),e)}var Wce=Object.getOwnPropertySymbols,qce=Wce?function(n){for(var e=[];n;)kD(e,ND(n)),n=OD(n);return e}:tq;const nq=qce;function Kce(n,e){return kg(n,nq(n),e)}function rq(n,e,t){var r=e(n);return Ya(n)?r:kD(r,t(n))}function RI(n){return rq(n,B_,ND)}function iq(n){return rq(n,F_,nq)}var Yce=v0(bc,"DataView");const PI=Yce;var Xce=v0(bc,"Promise");const DI=Xce;var jce=v0(bc,"Set");const xv=jce;var zN="[object Map]",Zce="[object Object]",UN="[object Promise]",HN="[object Set]",VN="[object WeakMap]",$N="[object DataView]",Qce=m0(PI),Jce=m0(Tb),eue=m0(DI),tue=m0(xv),nue=m0(II),sp=p0;(PI&&sp(new PI(new ArrayBuffer(1)))!=$N||Tb&&sp(new Tb)!=zN||DI&&sp(DI.resolve())!=UN||xv&&sp(new xv)!=HN||II&&sp(new II)!=VN)&&(sp=function(n){var e=p0(n),t=e==Zce?n.constructor:void 0,r=t?m0(t):"";if(r)switch(r){case Qce:return $N;case Jce:return zN;case eue:return UN;case tue:return HN;case nue:return VN}return e});const Ab=sp;var rue=Object.prototype,iue=rue.hasOwnProperty;function sue(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&iue.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var aue=bc.Uint8Array;const tC=aue;function BD(n){var e=new n.constructor(n.byteLength);return new tC(e).set(new tC(n)),e}function oue(n,e){var t=e?BD(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var lue=/\w*$/;function cue(n){var e=new n.constructor(n.source,lue.exec(n));return e.lastIndex=n.lastIndex,e}var GN=Nl?Nl.prototype:void 0,WN=GN?GN.valueOf:void 0;function uue(n){return WN?Object(WN.call(n)):{}}function sq(n,e){var t=e?BD(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var due="[object Boolean]",fue="[object Date]",hue="[object Map]",pue="[object Number]",mue="[object RegExp]",vue="[object Set]",gue="[object String]",yue="[object Symbol]",bue="[object ArrayBuffer]",_ue="[object DataView]",Sue="[object Float32Array]",xue="[object Float64Array]",wue="[object Int8Array]",Cue="[object Int16Array]",Mue="[object Int32Array]",Tue="[object Uint8Array]",Aue="[object Uint8ClampedArray]",Eue="[object Uint16Array]",Iue="[object Uint32Array]";function Rue(n,e,t){var r=n.constructor;switch(e){case bue:return BD(n);case due:case fue:return new r(+n);case _ue:return oue(n,t);case Sue:case xue:case wue:case Cue:case Mue:case Tue:case Aue:case Eue:case Iue:return sq(n,t);case hue:return new r;case pue:case gue:return new r(n);case mue:return cue(n);case vue:return new r;case yue:return uue(n)}}function aq(n){return typeof n.constructor=="function"&&!RD(n)?Soe(OD(n)):{}}var Pue="[object Map]";function Due(n){return ru(n)&&Ab(n)==Pue}var qN=Kv&&Kv.isMap,Lue=qN?PD(qN):Due;const kue=Lue;var Oue="[object Set]";function Nue(n){return ru(n)&&Ab(n)==Oue}var KN=Kv&&Kv.isSet,Bue=KN?PD(KN):Nue;const Fue=Bue;var zue=1,Uue=2,Hue=4,oq="[object Arguments]",Vue="[object Array]",$ue="[object Boolean]",Gue="[object Date]",Wue="[object Error]",lq="[object Function]",que="[object GeneratorFunction]",Kue="[object Map]",Yue="[object Number]",cq="[object Object]",Xue="[object RegExp]",jue="[object Set]",Zue="[object String]",Que="[object Symbol]",Jue="[object WeakMap]",ede="[object ArrayBuffer]",tde="[object DataView]",nde="[object Float32Array]",rde="[object Float64Array]",ide="[object Int8Array]",sde="[object Int16Array]",ade="[object Int32Array]",ode="[object Uint8Array]",lde="[object Uint8ClampedArray]",cde="[object Uint16Array]",ude="[object Uint32Array]",Mi={};Mi[oq]=Mi[Vue]=Mi[ede]=Mi[tde]=Mi[$ue]=Mi[Gue]=Mi[nde]=Mi[rde]=Mi[ide]=Mi[sde]=Mi[ade]=Mi[Kue]=Mi[Yue]=Mi[cq]=Mi[Xue]=Mi[jue]=Mi[Zue]=Mi[Que]=Mi[ode]=Mi[lde]=Mi[cde]=Mi[ude]=!0;Mi[Wue]=Mi[lq]=Mi[Jue]=!1;function wv(n,e,t,r,i,s){var a,o=e&zue,l=e&Uue,c=e&Hue;if(t&&(a=i?t(n,r,i,s):t(n)),a!==void 0)return a;if(!Xa(n))return n;var u=Ya(n);if(u){if(a=sue(n),!o)return zW(n,a)}else{var d=Ab(n),h=d==lq||d==que;if(Cb(n))return eq(n,o);if(d==cq||d==oq||h&&!i){if(a=l||h?{}:aq(n),!o)return l?Kce(n,Fce(a,n)):Gce(n,Bce(a,n))}else{if(!Mi[d])return i?n:{};a=Rue(n,d,o)}}s||(s=new uc);var f=s.get(n);if(f)return f;s.set(n,a),Fue(n)?n.forEach(function(v){a.add(wv(v,e,t,v,n,s))}):kue(n)&&n.forEach(function(v,g){a.set(g,wv(v,e,t,g,n,s))});var p=c?l?iq:RI:l?F_:B_,m=u?void 0:p(n);return Loe(m||n,function(v,g){m&&(g=v,v=n[g]),ED(a,g,wv(v,e,t,g,n,s))}),a}var dde=4;function YN(n){return wv(n,dde)}var fde=1,hde=4;function nC(n){return wv(n,fde|hde)}var pde="__lodash_hash_undefined__";function mde(n){return this.__data__.set(n,pde),this}function vde(n){return this.__data__.has(n)}function Eb(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Ld;++e<t;)this.add(n[e])}Eb.prototype.add=Eb.prototype.push=mde;Eb.prototype.has=vde;function gde(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function uq(n,e){return n.has(e)}var yde=1,bde=2;function dq(n,e,t,r,i,s){var a=t&yde,o=n.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,f=t&bde?new Eb:void 0;for(s.set(n,e),s.set(e,n);++d<o;){var p=n[d],m=e[d];if(r)var v=a?r(m,p,d,e,n,s):r(p,m,d,n,e,s);if(v!==void 0){if(v)continue;h=!1;break}if(f){if(!gde(e,function(g,_){if(!uq(f,_)&&(p===g||i(p,g,t,r,s)))return f.push(_)})){h=!1;break}}else if(!(p===m||i(p,m,t,r,s))){h=!1;break}}return s.delete(n),s.delete(e),h}function _de(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function FD(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var Sde=1,xde=2,wde="[object Boolean]",Cde="[object Date]",Mde="[object Error]",Tde="[object Map]",Ade="[object Number]",Ede="[object RegExp]",Ide="[object Set]",Rde="[object String]",Pde="[object Symbol]",Dde="[object ArrayBuffer]",Lde="[object DataView]",XN=Nl?Nl.prototype:void 0,KA=XN?XN.valueOf:void 0;function kde(n,e,t,r,i,s,a){switch(t){case Lde:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Dde:return!(n.byteLength!=e.byteLength||!s(new tC(n),new tC(e)));case wde:case Cde:case Ade:return N_(+n,+e);case Mde:return n.name==e.name&&n.message==e.message;case Ede:case Rde:return n==e+"";case Tde:var o=_de;case Ide:var l=r&Sde;if(o||(o=FD),n.size!=e.size&&!l)return!1;var c=a.get(n);if(c)return c==e;r|=xde,a.set(n,e);var u=dq(o(n),o(e),r,i,s,a);return a.delete(n),u;case Pde:if(KA)return KA.call(n)==KA.call(e)}return!1}var Ode=1,Nde=Object.prototype,Bde=Nde.hasOwnProperty;function Fde(n,e,t,r,i,s){var a=t&Ode,o=RI(n),l=o.length,c=RI(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var h=o[d];if(!(a?h in e:Bde.call(e,h)))return!1}var f=s.get(n),p=s.get(e);if(f&&p)return f==e&&p==n;var m=!0;s.set(n,e),s.set(e,n);for(var v=a;++d<l;){h=o[d];var g=n[h],_=e[h];if(r)var b=a?r(_,g,h,e,n,s):r(g,_,h,n,e,s);if(!(b===void 0?g===_||i(g,_,t,r,s):b)){m=!1;break}v||(v=h=="constructor")}if(m&&!v){var S=n.constructor,x=e.constructor;S!=x&&"constructor"in n&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof x=="function"&&x instanceof x)&&(m=!1)}return s.delete(n),s.delete(e),m}var zde=1,jN="[object Arguments]",ZN="[object Array]",RS="[object Object]",Ude=Object.prototype,QN=Ude.hasOwnProperty;function Hde(n,e,t,r,i,s){var a=Ya(n),o=Ya(e),l=a?ZN:Ab(n),c=o?ZN:Ab(e);l=l==jN?RS:l,c=c==jN?RS:c;var u=l==RS,d=c==RS,h=l==c;if(h&&Cb(n)){if(!Cb(e))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new uc),a||DD(n)?dq(n,e,t,r,i,s):kde(n,e,l,t,r,i,s);if(!(t&zde)){var f=u&&QN.call(n,"__wrapped__"),p=d&&QN.call(e,"__wrapped__");if(f||p){var m=f?n.value():n,v=p?e.value():e;return s||(s=new uc),i(m,v,t,r,s)}}return h?(s||(s=new uc),Fde(n,e,t,r,i,s)):!1}function QM(n,e,t,r,i){return n===e?!0:n==null||e==null||!ru(n)&&!ru(e)?n!==n&&e!==e:Hde(n,e,t,r,QM,i)}var Vde=1,$de=2;function Gde(n,e,t,r){var i=t.length,s=i,a=!r;if(n==null)return!s;for(n=Object(n);i--;){var o=t[i];if(a&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++i<s;){o=t[i];var l=o[0],c=n[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in n))return!1}else{var d=new uc;if(r)var h=r(c,u,l,n,e,d);if(!(h===void 0?QM(u,c,Vde|$de,r,d):h))return!1}}return!0}function fq(n){return n===n&&!Xa(n)}function Wde(n){for(var e=B_(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,fq(i)]}return e}function hq(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function qde(n){var e=Wde(n);return e.length==1&&e[0][2]?hq(e[0][0],e[0][1]):function(t){return t===n||Gde(t,n,e)}}function Kde(n,e){return n!=null&&e in Object(n)}function Yde(n,e,t){e=Ng(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var a=Bg(e[r]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&ID(i)&&KM(a,i)&&(Ya(n)||wb(n)))}function pq(n,e){return n!=null&&Yde(n,e,Kde)}var Xde=1,jde=2;function Zde(n,e){return LD(n)&&fq(e)?hq(Bg(n),e):function(t){var r=Vi(t,n);return r===void 0&&r===e?pq(t,n):QM(e,r,Xde|jde)}}function Qde(n){return function(e){return e==null?void 0:e[n]}}function Jde(n){return function(e){return ZM(e,n)}}function efe(n){return LD(n)?Qde(Bg(n)):Jde(n)}function mq(n){return typeof n=="function"?n:n==null?MD:typeof n=="object"?Ya(n)?Zde(n[0],n[1]):qde(n):efe(n)}function tfe(n){return function(e,t,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[n?o:++i];if(t(s[l],l,s)===!1)break}return e}}var nfe=tfe();const vq=nfe;function rfe(n,e){return n&&vq(n,e,B_)}function ife(n,e){return function(t,r){if(t==null)return t;if(!Og(t))return n(t,r);for(var i=t.length,s=e?i:-1,a=Object(t);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return t}}var sfe=ife(rfe);const afe=sfe;var ofe=function(){return bc.Date.now()};const YA=ofe;var lfe="Expected a function",cfe=Math.max,ufe=Math.min;function Co(n,e,t){var r,i,s,a,o,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(lfe);e=EI(e)||0,Xa(t)&&(u=!!t.leading,d="maxWait"in t,s=d?cfe(EI(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function f(w){var M=r,C=i;return r=i=void 0,c=w,a=n.apply(C,M),a}function p(w){return c=w,o=setTimeout(g,e),u?f(w):a}function m(w){var M=w-l,C=w-c,A=e-M;return d?ufe(A,s-C):A}function v(w){var M=w-l,C=w-c;return l===void 0||M>=e||M<0||d&&C>=s}function g(){var w=YA();if(v(w))return _(w);o=setTimeout(g,m(w))}function _(w){return o=void 0,h&&r?f(w):(r=i=void 0,a)}function b(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function S(){return o===void 0?a:_(YA())}function x(){var w=YA(),M=v(w);if(r=arguments,i=this,l=w,M){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(g,e),f(l)}return o===void 0&&(o=setTimeout(g,e)),a}return x.cancel=b,x.flush=S,x}function LI(n,e,t){(t!==void 0&&!N_(n[e],t)||t===void 0&&!(e in n))&&AD(n,e,t)}function gq(n){return ru(n)&&Og(n)}function kI(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function dfe(n){return kg(n,F_(n))}function ffe(n,e,t,r,i,s,a){var o=kI(n,t),l=kI(e,t),c=a.get(l);if(c){LI(n,t,c);return}var u=s?s(o,l,t+"",n,e,a):void 0,d=u===void 0;if(d){var h=Ya(l),f=!h&&Cb(l),p=!h&&!f&&DD(l);u=l,h||f||p?Ya(o)?u=o:gq(o)?u=zW(o):f?(d=!1,u=eq(l,!0)):p?(d=!1,u=sq(l,!0)):u=[]:QW(l)||wb(l)?(u=o,wb(o)?u=dfe(o):(!Xa(o)||TD(o))&&(u=aq(l))):d=!1}d&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),LI(n,t,u)}function yq(n,e,t,r,i){n!==e&&vq(e,function(s,a){if(i||(i=new uc),Xa(s))ffe(n,e,a,t,yq,r,i);else{var o=r?r(kI(n,a),s,a+"",n,e,i):void 0;o===void 0&&(o=s),LI(n,a,o)}},F_)}function hfe(n,e,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}function pfe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var mfe=Math.max,vfe=Math.min;function bq(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r-1;return t!==void 0&&(i=toe(t),i=t<0?mfe(r+i,0):vfe(i,r-1)),HW(n,mq(e),i,!0)}function gfe(n,e){var t=-1,r=Og(n)?Array(n.length):[];return afe(n,function(i,s,a){r[++t]=e(i,s,a)}),r}function yfe(n,e){var t=Ya(n)?CD:gfe;return t(n,mq(e))}function _q(n,e){return z_(yfe(n,e),1)}var bfe=1/0;function _fe(n){var e=n==null?0:n.length;return e?z_(n,bfe):[]}function Ib(n){for(var e=-1,t=n==null?0:n.length,r={};++e<t;){var i=n[e];r[i[0]]=i[1]}return r}function Sfe(n,e){return e.length<2?n:ZM(n,Rce(e,0,-1))}function rs(n,e){return QM(n,e)}function Zi(n){return n==null}function U_(n){return n===null}function xfe(n){return n===void 0}var wfe=Goe(function(n,e,t){yq(n,e,t)});const Sq=wfe;function Cfe(n,e){return e=Ng(e,n),n=Sfe(n,e),n==null||delete n[Bg(pfe(e))]}function Mfe(n){return QW(n)?void 0:n}var Tfe=1,Afe=2,Efe=4,Ife=jW(function(n,e){var t={};if(n==null)return t;var r=!1;e=CD(e,function(s){return s=Ng(s,n),r||(r=s.length>1),s}),kg(n,iq(n),t),r&&(t=wv(t,Tfe|Afe|Efe,Mfe));for(var i=e.length;i--;)Cfe(t,e[i]);return t});const xq=Ife;function wq(n,e,t,r){if(!Xa(n))return n;e=Ng(e,n);for(var i=-1,s=e.length,a=s-1,o=n;o!=null&&++i<s;){var l=Bg(e[i]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(i!=a){var u=o[l];c=r?r(u,l,o):void 0,c===void 0&&(c=Xa(u)?u:KM(e[i+1])?[]:{})}ED(o,l,c),o=o[l]}return n}function Rfe(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],o=ZM(n,a);t(o,a)&&wq(s,Ng(a,n),o)}return s}function Pfe(n,e){return Rfe(n,e,function(t,r){return pq(n,r)})}var Dfe=jW(function(n,e){return n==null?{}:Pfe(n,e)});const Cl=Dfe;function Lfe(n,e,t){return n==null?n:wq(n,e,t)}var kfe="Expected a function";function Np(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(kfe);return Xa(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Co(n,e,{leading:r,maxWait:e,trailing:i})}var Ofe=1/0,Nfe=xv&&1/FD(new xv([,-0]))[1]==Ofe?function(n){return new xv(n)}:woe;const Bfe=Nfe;var Ffe=200;function zfe(n,e,t){var r=-1,i=Boe,s=n.length,a=!0,o=[],l=o;if(t)a=!1,i=hfe;else if(s>=Ffe){var c=e?null:Bfe(n);if(c)return FD(c);a=!1,i=uq,l=new Eb}else l=e?[]:o;e:for(;++r<s;){var u=n[r],d=e?e(u):u;if(u=t||u!==0?u:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),o.push(u)}else i(l,d,t)||(l!==o&&l.push(d),o.push(u))}return o}var Ufe=$W(function(n){return zfe(z_(n,1,gq,!0))});const XA=Ufe,nr=n=>n===void 0,Cr=n=>typeof n=="boolean",en=n=>typeof n=="number",Uo=n=>!n&&n!==0||xt(n)&&n.length===0||Mn(n)&&!Object.keys(n).length,Ga=n=>typeof Element>"u"?!1:n instanceof Element,vo=n=>Zi(n),Hfe=n=>Wt(n)?!Number.isNaN(Number(n)):!1,H_=n=>n===window;var Vfe=Object.defineProperty,$fe=Object.defineProperties,Gfe=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,Wfe=Object.prototype.hasOwnProperty,qfe=Object.prototype.propertyIsEnumerable,eB=(n,e,t)=>e in n?Vfe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Kfe=(n,e)=>{for(var t in e||(e={}))Wfe.call(e,t)&&eB(n,t,e[t]);if(JN)for(var t of JN(e))qfe.call(e,t)&&eB(n,t,e[t]);return n},Yfe=(n,e)=>$fe(n,Gfe(e));function rC(n,e){var t;const r=Pr();return Gs(()=>{r.value=n()},Yfe(Kfe({},e),{flush:(t=e==null?void 0:e.flush)!=null?t:"sync"})),Pg(r)}var tB;const ar=typeof window<"u",Xfe=n=>typeof n<"u",OI=n=>typeof n=="function",jfe=n=>typeof n=="string",cd=()=>{},iC=ar&&((tB=window==null?void 0:window.navigator)==null?void 0:tB.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function eh(n){return typeof n=="function"?n():y(n)}function Cq(n,e){function t(...r){return new Promise((i,s)=>{Promise.resolve(n(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(s)})}return t}function Zfe(n,e={}){let t,r,i=cd;const s=o=>{clearTimeout(o),i(),i=cd};return o=>{const l=eh(n),c=eh(e.maxWait);return t&&s(t),l<=0||c!==void 0&&c<=0?(r&&(s(r),r=null),Promise.resolve(o())):new Promise((u,d)=>{i=e.rejectOnCancel?d:u,c&&!r&&(r=setTimeout(()=>{t&&s(t),r=null,u(o())},c)),t=setTimeout(()=>{r&&s(r),r=null,u(o())},l)})}}function Qfe(n,e=!0,t=!0,r=!1){let i=0,s,a=!0,o=cd,l;const c=()=>{s&&(clearTimeout(s),s=void 0,o(),o=cd)};return d=>{const h=eh(n),f=Date.now()-i,p=()=>l=d();return c(),h<=0?(i=Date.now(),p()):(f>h&&(t||!a)?(i=Date.now(),p()):e&&(l=new Promise((m,v)=>{o=r?v:m,s=setTimeout(()=>{i=Date.now(),a=!0,m(p()),c()},Math.max(0,h-f))})),!t&&!s&&(s=setTimeout(()=>a=!0,h)),a=!1,l)}}function Jfe(n){return n}function ehe(n,e){let t,r,i;const s=ne(!0),a=()=>{s.value=!0,i()};ct(n,a,{flush:"sync"});const o=OI(e)?e:e.get,l=OI(e)?void 0:e.set,c=Vie((u,d)=>(r=u,i=d,{get(){return s.value&&(t=o(),s.value=!1),r(),t},set(h){l==null||l(h)}}));return Object.isExtensible(c)&&(c.trigger=a),c}function Fg(n){return mG()?(vG(n),!0):!1}function the(n,e=200,t={}){return Cq(Zfe(e,t),n)}function nhe(n,e=200,t={}){const r=ne(n.value),i=the(()=>{r.value=n.value},e,t);return ct(n,()=>i()),r}function Mq(n,e=200,t=!1,r=!0,i=!1){return Cq(Qfe(e,t,r,i),n)}function zD(n,e=!0){Dn()?Rn(n):e?n():Ut(n)}function jp(n,e,t={}){const{immediate:r=!0}=t,i=ne(!1);let s=null;function a(){s&&(clearTimeout(s),s=null)}function o(){i.value=!1,a()}function l(...c){a(),i.value=!0,s=setTimeout(()=>{i.value=!1,s=null,n(...c)},eh(e))}return r&&(i.value=!0,ar&&l()),Fg(o),{isPending:Pg(i),start:l,stop:o}}function ms(n){var e;const t=eh(n);return(e=t==null?void 0:t.$el)!=null?e:t}const hu=ar?window:void 0,rhe=ar?window.document:void 0;function Lr(...n){let e,t,r,i;if(jfe(n[0])||Array.isArray(n[0])?([t,r,i]=n,e=hu):[e,t,r,i]=n,!e)return cd;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const s=[],a=()=>{s.forEach(u=>u()),s.length=0},o=(u,d,h,f)=>(u.addEventListener(d,h,f),()=>u.removeEventListener(d,h,f)),l=ct(()=>[ms(e),eh(i)],([u,d])=>{a(),u&&s.push(...t.flatMap(h=>r.map(f=>o(u,h,f,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),a()};return Fg(c),c}let nB=!1;function UD(n,e,t={}){const{window:r=hu,ignore:i=[],capture:s=!0,detectIframe:a=!1}=t;if(!r)return;iC&&!nB&&(nB=!0,Array.from(r.document.body.children).forEach(h=>h.addEventListener("click",cd)));let o=!0;const l=h=>i.some(f=>{if(typeof f=="string")return Array.from(r.document.querySelectorAll(f)).some(p=>p===h.target||h.composedPath().includes(p));{const p=ms(f);return p&&(h.target===p||h.composedPath().includes(p))}}),u=[Lr(r,"click",h=>{const f=ms(n);if(!(!f||f===h.target||h.composedPath().includes(f))){if(h.detail===0&&(o=!l(h)),!o){o=!0;return}e(h)}},{passive:!0,capture:s}),Lr(r,"pointerdown",h=>{const f=ms(n);f&&(o=!h.composedPath().includes(f)&&!l(h))},{passive:!0}),a&&Lr(r,"blur",h=>{var f;const p=ms(n);((f=r.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(p!=null&&p.contains(r.document.activeElement))&&e(h)})].filter(Boolean);return()=>u.forEach(h=>h())}function ihe(n={}){var e;const{window:t=hu}=n,r=(e=n.document)!=null?e:t==null?void 0:t.document,i=ehe(()=>null,()=>r==null?void 0:r.activeElement);return t&&(Lr(t,"blur",s=>{s.relatedTarget===null&&i.trigger()},!0),Lr(t,"focus",i.trigger,!0)),i}function HD(n,e=!1){const t=ne(),r=()=>t.value=!!n();return r(),zD(r,e),t}function she(n){return JSON.parse(JSON.stringify(n))}const rB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iB="__vueuse_ssr_handlers__";rB[iB]=rB[iB]||{};function ahe(n,e,{window:t=hu,initialValue:r=""}={}){const i=ne(r),s=U(()=>{var a;return ms(e)||((a=t==null?void 0:t.document)==null?void 0:a.documentElement)});return ct([s,()=>eh(n)],([a,o])=>{var l;if(a&&t){const c=(l=t.getComputedStyle(a).getPropertyValue(o))==null?void 0:l.trim();i.value=c||r}},{immediate:!0}),ct(i,a=>{var o;(o=s.value)!=null&&o.style&&s.value.style.setProperty(eh(n),a)}),i}function ohe({document:n=rhe}={}){if(!n)return ne("visible");const e=ne(n.visibilityState);return Lr(n,"visibilitychange",()=>{e.value=n.visibilityState}),e}var sB=Object.getOwnPropertySymbols,lhe=Object.prototype.hasOwnProperty,che=Object.prototype.propertyIsEnumerable,uhe=(n,e)=>{var t={};for(var r in n)lhe.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&sB)for(var r of sB(n))e.indexOf(r)<0&&che.call(n,r)&&(t[r]=n[r]);return t};function fi(n,e,t={}){const r=t,{window:i=hu}=r,s=uhe(r,["window"]);let a;const o=HD(()=>i&&"ResizeObserver"in i),l=()=>{a&&(a.disconnect(),a=void 0)},c=ct(()=>ms(n),d=>{l(),o.value&&i&&d&&(a=new ResizeObserver(e),a.observe(d,s))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return Fg(u),{isSupported:o,stop:u}}function aB(n,e={}){const{reset:t=!0,windowResize:r=!0,windowScroll:i=!0,immediate:s=!0}=e,a=ne(0),o=ne(0),l=ne(0),c=ne(0),u=ne(0),d=ne(0),h=ne(0),f=ne(0);function p(){const m=ms(n);if(!m){t&&(a.value=0,o.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,f.value=0);return}const v=m.getBoundingClientRect();a.value=v.height,o.value=v.bottom,l.value=v.left,c.value=v.right,u.value=v.top,d.value=v.width,h.value=v.x,f.value=v.y}return fi(n,p),ct(()=>ms(n),m=>!m&&p()),i&&Lr("scroll",p,{capture:!0,passive:!0}),r&&Lr("resize",p,{passive:!0}),zD(()=>{s&&p()}),{height:a,bottom:o,left:l,right:c,top:u,width:d,x:h,y:f,update:p}}function dhe(n,e={width:0,height:0},t={}){const{window:r=hu,box:i="content-box"}=t,s=U(()=>{var l,c;return(c=(l=ms(n))==null?void 0:l.namespaceURI)==null?void 0:c.includes("svg")}),a=ne(e.width),o=ne(e.height);return fi(n,([l])=>{const c=i==="border-box"?l.borderBoxSize:i==="content-box"?l.contentBoxSize:l.devicePixelContentBoxSize;if(r&&s.value){const u=ms(n);if(u){const d=r.getComputedStyle(u);a.value=parseFloat(d.width),o.value=parseFloat(d.height)}}else if(c){const u=Array.isArray(c)?c:[c];a.value=u.reduce((d,{inlineSize:h})=>d+h,0),o.value=u.reduce((d,{blockSize:h})=>d+h,0)}else a.value=l.contentRect.width,o.value=l.contentRect.height},t),ct(()=>ms(n),l=>{a.value=l?e.width:0,o.value=l?e.height:0}),{width:a,height:o}}function fhe(n,e,t={}){const{root:r,rootMargin:i="0px",threshold:s=.1,window:a=hu}=t,o=HD(()=>a&&"IntersectionObserver"in a);let l=cd;const c=o.value?ct(()=>({el:ms(n),root:ms(r)}),({el:d,root:h})=>{if(l(),!d)return;const f=new IntersectionObserver(e,{root:h,rootMargin:i,threshold:s});f.observe(d),l=()=>{f.disconnect(),l=cd}},{immediate:!0,flush:"post"}):cd,u=()=>{l(),c()};return Fg(u),{isSupported:o,stop:u}}var oB=Object.getOwnPropertySymbols,hhe=Object.prototype.hasOwnProperty,phe=Object.prototype.propertyIsEnumerable,mhe=(n,e)=>{var t={};for(var r in n)hhe.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&oB)for(var r of oB(n))e.indexOf(r)<0&&phe.call(n,r)&&(t[r]=n[r]);return t};function Tq(n,e,t={}){const r=t,{window:i=hu}=r,s=mhe(r,["window"]);let a;const o=HD(()=>i&&"MutationObserver"in i),l=()=>{a&&(a.disconnect(),a=void 0)},c=ct(()=>ms(n),d=>{l(),o.value&&i&&d&&(a=new MutationObserver(e),a.observe(d,s))},{immediate:!0}),u=()=>{l(),c()};return Fg(u),{isSupported:o,stop:u}}var lB;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(lB||(lB={}));var vhe=Object.defineProperty,cB=Object.getOwnPropertySymbols,ghe=Object.prototype.hasOwnProperty,yhe=Object.prototype.propertyIsEnumerable,uB=(n,e,t)=>e in n?vhe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bhe=(n,e)=>{for(var t in e||(e={}))ghe.call(e,t)&&uB(n,t,e[t]);if(cB)for(var t of cB(e))yhe.call(e,t)&&uB(n,t,e[t]);return n};const _he={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};bhe({linear:Jfe},_he);function Aq(n,e,t,r={}){var i,s,a;const{clone:o=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=r,h=Dn(),f=t||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((a=(s=h==null?void 0:h.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(h==null?void 0:h.proxy));let p=c;e||(e="modelValue"),p=c||p||`update:${e.toString()}`;const m=g=>o?OI(o)?o(g):she(g):g,v=()=>Xfe(n[e])?m(n[e]):d;if(l){const g=v(),_=ne(g);return ct(()=>n[e],b=>_.value=m(b)),ct(_,b=>{(b!==n[e]||u)&&f(p,b)},{deep:u}),_}else return U({get(){return v()},set(g){f(p,g)}})}function She({window:n=hu}={}){if(!n)return ne(!1);const e=ne(n.document.hasFocus());return Lr(n,"blur",()=>{e.value=!1}),Lr(n,"focus",()=>{e.value=!0}),e}function xhe(n={}){const{window:e=hu,initialWidth:t=1/0,initialHeight:r=1/0,listenOrientation:i=!0,includeScrollbar:s=!0}=n,a=ne(t),o=ne(r),l=()=>{e&&(s?(a.value=e.innerWidth,o.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,o.value=e.document.documentElement.clientHeight))};return l(),zD(l),Lr("resize",l,{passive:!0}),i&&Lr("orientationchange",l,{passive:!0}),{width:a,height:o}}const dB={current:0},fB=ne(0),Eq=2e3,hB=Symbol("elZIndexContextKey"),Iq=Symbol("zIndexContextKey"),zg=n=>{const e=Dn()?Lt(hB,dB):dB,t=n||(Dn()?Lt(Iq,void 0):void 0),r=U(()=>{const a=y(t);return en(a)?a:Eq}),i=U(()=>r.value+fB.value),s=()=>(e.current++,fB.value=e.current,i.value);return!ar&&Lt(hB),{initialZIndex:r,currentZIndex:i,nextZIndex:s}};var whe={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Che=n=>(e,t)=>Mhe(e,t,y(n)),Mhe=(n,e,t)=>Vi(t,n,n).replace(/\{(\w+)\}/g,(r,i)=>{var s;return`${(s=e==null?void 0:e[i])!=null?s:`{${i}}`}`}),The=n=>{const e=U(()=>y(n).name),t=qr(n)?n:ne(n);return{lang:e,locale:t,t:Che(n)}},Rq=Symbol("localeContextKey"),sr=n=>{const e=n||Lt(Rq,ne());return The(U(()=>e.value||whe))},Pq="__epPropKey",Fe=n=>n,Ahe=n=>Mn(n)&&!!n[Pq],_c=(n,e)=>{if(!Mn(n)||Ahe(n))return n;const{values:t,required:r,default:i,type:s,validator:a}=n,l={type:s,required:!!r,validator:t||a?c=>{let u=!1,d=[];if(t&&(d=Array.from(t),fr(n,"default")&&d.push(i),u||(u=d.includes(c))),a&&(u||(u=a(c))),!u&&d.length>0){const h=[...new Set(d)].map(f=>JSON.stringify(f)).join(", ");Yse(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[Pq]:!0};return fr(n,"default")&&(l.default=i),l},Tt=n=>Ib(Object.entries(n).map(([e,t])=>[e,_c(t,e)])),pu=["","default","small","large"],as=_c({type:String,values:pu,required:!1}),Dq=Symbol("size"),Lq=()=>{const n=Lt(Dq,{});return U(()=>y(n.size)||"")},kq=Symbol("emptyValuesContextKey"),Ehe=["",void 0,null],Ihe=void 0,g0=Tt({emptyValues:Array,valueOnClear:{type:Fe([String,Number,Boolean,Function]),default:void 0,validator:n=>Yt(n)?!n():!n}}),V_=(n,e)=>{const t=Dn()?Lt(kq,ne({})):ne({}),r=U(()=>n.emptyValues||t.value.emptyValues||Ehe),i=U(()=>Yt(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:Yt(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:e!==void 0?e:Ihe),s=a=>r.value.includes(a);return r.value.includes(i.value),{emptyValues:r,valueOnClear:i,isEmptyValue:s}},Yv=n=>Object.keys(n),Oq=n=>Object.entries(n),B1=(n,e,t)=>({get value(){return Vi(n,e,t)},set value(r){Lfe(n,e,r)}}),sC=ne();function Ug(n,e=void 0){const t=Dn()?Lt(kW,sC):sC;return n?U(()=>{var r,i;return(i=(r=t.value)==null?void 0:r[n])!=null?i:e}):t}function JM(n,e){const t=Ug(),r=gt(n,U(()=>{var o;return((o=t.value)==null?void 0:o.namespace)||O1})),i=sr(U(()=>{var o;return(o=t.value)==null?void 0:o.locale})),s=zg(U(()=>{var o;return((o=t.value)==null?void 0:o.zIndex)||Eq})),a=U(()=>{var o;return y(e)||((o=t.value)==null?void 0:o.size)||""});return VD(U(()=>y(t)||{})),{ns:r,locale:i,zIndex:s,size:a}}const VD=(n,e,t=!1)=>{var r;const i=!!Dn(),s=i?Ug():void 0,a=(r=e==null?void 0:e.provide)!=null?r:i?jn:void 0;if(!a)return;const o=U(()=>{const l=y(n);return s!=null&&s.value?Rhe(s.value,l):l});return a(kW,o),a(Rq,U(()=>o.value.locale)),a(OW,U(()=>o.value.namespace)),a(Iq,U(()=>o.value.zIndex)),a(Dq,{size:U(()=>o.value.size||"")}),a(kq,U(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(t||!sC.value)&&(sC.value=o.value),o},Rhe=(n,e)=>{const t=[...new Set([...Yv(n),...Yv(e)])],r={};for(const i of t)r[i]=e[i]!==void 0?e[i]:n[i];return r},Phe=(n=[])=>({version:Eae,install:(t,r)=>{t[SN]||(t[SN]=!0,n.forEach(i=>t.use(i)),r&&VD(r,t,!0))}}),mn="update:modelValue",Hn="change",is="input",Dhe=Tt({zIndex:{type:Fe([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Lhe={scroll:({scrollTop:n,fixed:e})=>en(n)&&Cr(e),[Hn]:n=>Cr(n)};var Et=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t};function khe(n,e,t,r){const i=t-e;return n/=r/2,n<1?i/2*n*n*n+e:i/2*((n-=2)*n*n+2)+e}const th=n=>ar?window.requestAnimationFrame(n):setTimeout(n,16),Zp=n=>ar?window.cancelAnimationFrame(n):clearTimeout(n),Nq=(n="")=>n.split(" ").filter(e=>!!e.trim()),ho=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},Ml=(n,e)=>{!n||!e.trim()||n.classList.add(...Nq(e))},Ma=(n,e)=>{!n||!e.trim()||n.classList.remove(...Nq(e))},Qu=(n,e)=>{var t;if(!ar||!n||!e)return"";let r=Ka(e);r==="float"&&(r="cssFloat");try{const i=n.style[r];if(i)return i;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return s?s[r]:""}catch{return n.style[r]}},Bq=(n,e,t)=>{if(!(!n||!e))if(Mn(e))Oq(e).forEach(([r,i])=>Bq(n,r,i));else{const r=Ka(e);n.style[r]=t}};function wi(n,e="px"){if(!n)return"";if(en(n)||Hfe(n))return`${n}${e}`;if(Wt(n))return n}const Ohe=(n,e)=>{if(!ar)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=Qu(n,t);return["scroll","auto","overlay"].some(i=>r.includes(i))},$D=(n,e)=>{if(!ar)return;let t=n;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(Ohe(t,e))return t;t=t.parentNode}return t};let PS;const Fq=n=>{var e;if(!ar)return 0;if(PS!==void 0)return PS;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const r=t.offsetWidth;t.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",t.appendChild(i);const s=i.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),PS=r-s,PS};function GD(n,e){if(!ar)return;if(!e){n.scrollTop=0;return}const t=[];let r=e.offsetParent;for(;r!==null&&n!==r&&n.contains(r);)t.push(r),r=r.offsetParent;const i=e.offsetTop+t.reduce((l,c)=>l+c.offsetTop,0),s=i+e.offsetHeight,a=n.scrollTop,o=a+n.clientHeight;i<a?n.scrollTop=i:s>o&&(n.scrollTop=s-n.clientHeight)}function Nhe(n,e,t,r,i){const s=Date.now();let a;const o=()=>{const c=Date.now()-s,u=khe(c>r?r:c,e,t,r);H_(n)?n.scrollTo(window.pageXOffset,u):n.scrollTop=u,c<r?a=th(o):Yt(i)&&i()};return o(),()=>{a&&Zp(a)}}const pB=(n,e)=>H_(e)?n.ownerDocument.documentElement:e,mB=n=>H_(n)?window.scrollY:n.scrollTop;class Bhe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Gi(n,e){throw new Bhe(`[${n}] ${e}`)}const zq="ElAffix",Fhe=Ie({name:zq}),zhe=Ie({...Fhe,props:Dhe,emits:Lhe,setup(n,{expose:e,emit:t}){const r=n,i=gt("affix"),s=Pr(),a=Pr(),o=Pr(),{height:l}=xhe(),{height:c,width:u,top:d,bottom:h,update:f}=aB(a,{windowScroll:!1}),p=aB(s),m=ne(!1),v=ne(0),g=ne(0),_=U(()=>({height:m.value?`${c.value}px`:"",width:m.value?`${u.value}px`:""})),b=U(()=>{if(!m.value)return{};const M=r.offset?wi(r.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:r.position==="top"?M:"",bottom:r.position==="bottom"?M:"",transform:g.value?`translateY(${g.value}px)`:"",zIndex:r.zIndex}}),S=()=>{if(!o.value)return;v.value=o.value instanceof Window?document.documentElement.scrollTop:o.value.scrollTop||0;const{position:M,target:C,offset:A}=r,T=A+c.value;if(M==="top")if(C){const I=p.bottom.value-T;m.value=A>d.value&&p.bottom.value>0,g.value=I<0?I:0}else m.value=A>d.value;else if(C){const I=l.value-p.top.value-T;m.value=l.value-A<h.value&&l.value>p.top.value,g.value=I<0?-I:0}else m.value=l.value-A<h.value},x=async()=>{if(!m.value){f();return}m.value=!1,await Ut(),f(),m.value=!0},w=async()=>{f(),await Ut(),t("scroll",{scrollTop:v.value,fixed:m.value})};return ct(m,M=>t(Hn,M)),Rn(()=>{var M;r.target?(s.value=(M=document.querySelector(r.target))!=null?M:void 0,s.value||Gi(zq,`Target does not exist: ${r.target}`)):s.value=document.documentElement,o.value=$D(a.value,!0),f()}),Lr(o,"scroll",w),Gs(S),e({update:S,updateRoot:x}),(M,C)=>($(),ue("div",{ref_key:"root",ref:a,class:Y(y(i).b()),style:Xt(y(_))},[ye("div",{class:Y({[y(i).m("fixed")]:m.value}),style:Xt(y(b))},[Ye(M.$slots,"default")],6)],6))}});var Uhe=Et(zhe,[["__file","affix.vue"]]);const bn=(n,e)=>{if(n.install=t=>{for(const r of[n,...Object.values(e??{})])t.component(r.name,r)},e)for(const[t,r]of Object.entries(e))n[t]=r;return n},Uq=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),Hhe=(n,e)=>(n.install=t=>{t.directive(e,n)},n),pi=n=>(n.install=xr,n),Vhe=bn(Uhe),$he=Tt({size:{type:Fe([Number,String])},color:{type:String}}),Ghe=Ie({name:"ElIcon",inheritAttrs:!1}),Whe=Ie({...Ghe,props:$he,setup(n){const e=n,t=gt("icon"),r=U(()=>{const{size:i,color:s}=e;return!i&&!s?{}:{fontSize:nr(i)?void 0:wi(i),"--color":s}});return(i,s)=>($(),ue("i",Nn({class:y(t).b(),style:y(r)},i.$attrs),[Ye(i.$slots,"default")],16))}});var qhe=Et(Whe,[["__file","icon.vue"]]);const zt=bn(qhe);function vB(){let n;const e=(r,i)=>{t(),n=window.setTimeout(r,i)},t=()=>window.clearTimeout(n);return Fg(()=>t()),{registerTimeout:e,cancelTimeout:t}}const Hq=Tt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),Vq=({showAfter:n,hideAfter:e,autoClose:t,open:r,close:i})=>{const{registerTimeout:s}=vB(),{registerTimeout:a,cancelTimeout:o}=vB();return{onOpen:u=>{s(()=>{r(u);const d=y(t);en(d)&&d>0&&a(()=>{i(u)},d)},y(n))},onClose:u=>{o(),s(()=>{i(u)},y(e))}}};/*! Element Plus Icons Vue v2.3.2 */var Khe=Ie({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.59 30.59 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.59 30.59 0 0 0-42.752 0z"})]))}}),mu=Khe,Yhe=Ie({name:"ArrowLeft",__name:"arrow-left",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0"})]))}}),bd=Yhe,Xhe=Ie({name:"ArrowRight",__name:"arrow-right",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),Ta=Xhe,jhe=Ie({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),eT=jhe,Zhe=Ie({name:"Back",__name:"back",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),ye("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),Qhe=Zhe,Jhe=Ie({name:"Calendar",__name:"calendar",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),epe=Jhe,tpe=Ie({name:"CaretRight",__name:"caret-right",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),$q=tpe,npe=Ie({name:"CaretTop",__name:"caret-top",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),rpe=npe,ipe=Ie({name:"Check",__name:"check",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),$_=ipe,spe=Ie({name:"CircleCheckFilled",__name:"circle-check-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),ape=spe,ope=Ie({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ye("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),WD=ope,lpe=Ie({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),qD=lpe,cpe=Ie({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),kd=cpe,upe=Ie({name:"Clock",__name:"clock",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ye("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),ye("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),Gq=upe,dpe=Ie({name:"Close",__name:"close",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Bl=dpe,fpe=Ie({name:"DArrowLeft",__name:"d-arrow-left",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672zm256 0a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672z"})]))}}),nh=fpe,hpe=Ie({name:"DArrowRight",__name:"d-arrow-right",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L764.736 512 452.864 192a30.59 30.59 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L508.736 512 196.864 192a30.59 30.59 0 0 1 0-42.688"})]))}}),rh=hpe,ppe=Ie({name:"Delete",__name:"delete",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),mpe=ppe,vpe=Ie({name:"Document",__name:"document",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),gpe=vpe,ype=Ie({name:"FullScreen",__name:"full-screen",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),bpe=ype,_pe=Ie({name:"Hide",__name:"hide",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),ye("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),Spe=_pe,xpe=Ie({name:"HomeFilled",__name:"home-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"})]))}}),wpe=xpe,Cpe=Ie({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),Rb=Cpe,Mpe=Ie({name:"Loading",__name:"loading",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),iu=Mpe,Tpe=Ie({name:"Message",__name:"message",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M128 224v512a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V224zm0-64h768a64 64 0 0 1 64 64v512a128 128 0 0 1-128 128H192A128 128 0 0 1 64 736V224a64 64 0 0 1 64-64"}),ye("path",{fill:"currentColor",d:"M904 224 656.512 506.88a192 192 0 0 1-289.024 0L120 224zm-698.944 0 210.56 240.704a128 128 0 0 0 192.704 0L818.944 224z"})]))}}),Ape=Tpe,Epe=Ie({name:"Minus",__name:"minus",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),Ipe=Epe,Rpe=Ie({name:"MoreFilled",__name:"more-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),gB=Rpe,Ppe=Ie({name:"More",__name:"more",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),Dpe=Ppe,Lpe=Ie({name:"PictureFilled",__name:"picture-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),kpe=Lpe,Ope=Ie({name:"Picture",__name:"picture",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),ye("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64-64-64 64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),Npe=Ope,Bpe=Ie({name:"Plus",__name:"plus",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),Wq=Bpe,Fpe=Ie({name:"QuestionFilled",__name:"question-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592q0-64.416-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.27 54.27 0 0 0-38.72 14.784 49.4 49.4 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.85 54.85 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.97 51.97 0 0 0-15.488-38.016 55.94 55.94 0 0 0-39.424-14.784"})]))}}),zpe=Fpe,Upe=Ie({name:"RefreshLeft",__name:"refresh-left",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),Hpe=Upe,Vpe=Ie({name:"RefreshRight",__name:"refresh-right",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88"})]))}}),$pe=Vpe,Gpe=Ie({name:"ScaleToOriginal",__name:"scale-to-original",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.12 30.12 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.12 30.12 0 0 0-30.118-30.118m-361.412 0a30.12 30.12 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.12 30.12 0 0 0-30.118-30.118M512 361.412a30.12 30.12 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.12 30.12 0 0 0 512 361.412M512 512a30.12 30.12 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.12 30.12 0 0 0 512 512"})]))}}),Wpe=Gpe,qpe=Ie({name:"Search",__name:"search",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),Kpe=qpe,Ype=Ie({name:"SortDown",__name:"sort-down",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),Xpe=Ype,jpe=Ie({name:"SortUp",__name:"sort-up",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),Zpe=jpe,Qpe=Ie({name:"StarFilled",__name:"star-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M313.6 924.48a70.4 70.4 0 0 1-74.152-5.365 70.4 70.4 0 0 1-27.992-68.875l37.888-220.928L88.96 472.96a70.4 70.4 0 0 1 3.788-104.225A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 100.246-28.595 70.4 70.4 0 0 1 25.962 28.595l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),DS=Qpe,Jpe=Ie({name:"Star",__name:"star",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),e0e=Jpe,t0e=Ie({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),KD=t0e,n0e=Ie({name:"View",__name:"view",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),r0e=n0e,i0e=Ie({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),tT=i0e,s0e=Ie({name:"ZoomIn",__name:"zoom-in",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),qq=s0e,a0e=Ie({name:"ZoomOut",__name:"zoom-out",setup(n){return(e,t)=>($(),ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ye("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),o0e=a0e;const Ar=Fe([String,Object,Function]),Kq={Close:Bl},YD={Close:Bl,SuccessFilled:KD,InfoFilled:Rb,WarningFilled:tT,CircleCloseFilled:qD},ih={primary:Rb,success:KD,warning:tT,error:qD,info:Rb},nT={validating:iu,success:WD,error:kd},l0e=["light","dark"],c0e=Tt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Yv(ih),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:l0e,default:"light"},...Hq}),u0e={open:()=>!0,close:n=>nr(n)||n instanceof Event},d0e=Ie({name:"ElAlert"}),f0e=Ie({...d0e,props:c0e,emits:u0e,setup(n,{emit:e}){const t=n,{Close:r}=YD,i=es(),s=gt("alert"),a=ne(!1),o=U(()=>ih[t.type]),l=U(()=>!!(t.description||i.default)),c=()=>{a.value=!0,e("open")},u=f=>{a.value=!1,e("close",f)},{onOpen:d,onClose:h}=Vq({showAfter:yr(t,"showAfter"),hideAfter:yr(t,"hideAfter"),autoClose:yr(t,"autoClose"),open:c,close:u});return ar&&d(),(f,p)=>($(),rt(Os,{name:y(s).b("fade"),persisted:""},{default:Re(()=>[Cn(ye("div",{class:Y([y(s).b(),y(s).m(f.type),y(s).is("center",f.center),y(s).is(f.effect)]),role:"alert"},[f.showIcon&&(f.$slots.icon||y(o))?($(),rt(y(zt),{key:0,class:Y([y(s).e("icon"),{[y(s).is("big")]:y(l)}])},{default:Re(()=>[Ye(f.$slots,"icon",{},()=>[($(),rt(Ln(y(o))))])]),_:3},8,["class"])):Xe("v-if",!0),ye("div",{class:Y(y(s).e("content"))},[f.title||f.$slots.title?($(),ue("span",{key:0,class:Y([y(s).e("title"),{"with-description":y(l)}])},[Ye(f.$slots,"title",{},()=>[Bn(Ct(f.title),1)])],2)):Xe("v-if",!0),y(l)?($(),ue("p",{key:1,class:Y(y(s).e("description"))},[Ye(f.$slots,"default",{},()=>[Bn(Ct(f.description),1)])],2)):Xe("v-if",!0),f.closable?($(),ue(Bt,{key:2},[f.closeText?($(),ue("div",{key:0,class:Y([y(s).e("close-btn"),y(s).is("customed")]),onClick:u},Ct(f.closeText),3)):($(),rt(y(zt),{key:1,class:Y(y(s).e("close-btn")),onClick:y(h)},{default:Re(()=>[xe(y(r))]),_:1},8,["class","onClick"]))],64)):Xe("v-if",!0)],2)],2),[[cr,a.value]])]),_:3},8,["name"]))}});var h0e=Et(f0e,[["__file","alert.vue"]]);const p0e=bn(h0e),XD=()=>ar&&/firefox/i.test(window.navigator.userAgent);let eo;const m0e={height:"0",visibility:"hidden",overflow:XD()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},v0e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function g0e(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:v0e.map(a=>[a,e.getPropertyValue(a)]),paddingSize:r,borderSize:i,boxSizing:t}}function yB(n,e=1,t){var r;eo||(eo=document.createElement("textarea"),document.body.appendChild(eo));const{paddingSize:i,borderSize:s,boxSizing:a,contextStyle:o}=g0e(n);o.forEach(([d,h])=>eo==null?void 0:eo.style.setProperty(d,h)),Object.entries(m0e).forEach(([d,h])=>eo==null?void 0:eo.style.setProperty(d,h,"important")),eo.value=n.value||n.placeholder||"";let l=eo.scrollHeight;const c={};a==="border-box"?l=l+s:a==="content-box"&&(l=l-i),eo.value="";const u=eo.scrollHeight-i;if(en(e)){let d=u*e;a==="border-box"&&(d=d+i+s),l=Math.max(d,l),c.minHeight=`${d}px`}if(en(t)){let d=u*t;a==="border-box"&&(d=d+i+s),l=Math.min(d,l)}return c.height=`${l}px`,(r=eo.parentNode)==null||r.removeChild(eo),eo=void 0,c}const hi=n=>n,y0e=Tt({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),aa=n=>Cl(y0e,n),G_=Tt({id:{type:String,default:void 0},size:as,disabled:Boolean,modelValue:{type:Fe([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Fe([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ar},prefixIcon:{type:Ar},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Fe([Object,Array,String]),default:()=>hi({})},autofocus:Boolean,rows:{type:Number,default:2},...aa(["ariaLabel"]),inputmode:{type:Fe(String),default:void 0},name:String}),b0e={[mn]:n=>Wt(n),input:n=>Wt(n),change:n=>Wt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},_0e=["class","style"],S0e=/^on[A-Z]/,rT=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,r=U(()=>((t==null?void 0:t.value)||[]).concat(_0e)),i=Dn();return U(i?()=>{var s;return Ib(Object.entries((s=i.proxy)==null?void 0:s.$attrs).filter(([a])=>!r.value.includes(a)&&!(e&&S0e.test(a))))}:()=>({}))},bB={prefix:Math.floor(Math.random()*1e4),current:0},x0e=Symbol("elIdInjection"),jD=()=>Dn()?Lt(x0e,bB):bB,Ws=n=>{const e=jD(),t=wD();return rC(()=>y(n)||`${t.value}-id-${e.prefix}-${e.current++}`)},y0=Symbol("formContextKey"),su=Symbol("formItemContextKey"),oa=()=>{const n=Lt(y0,void 0),e=Lt(su,void 0);return{form:n,formItem:e}},Vl=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:r})=>{t||(t=ne(!1)),r||(r=ne(!1));const i=Dn(),s=()=>{let c=i==null?void 0:i.parent;for(;c;){if(c.type.name==="ElFormItem")return!1;if(c.type.name==="ElLabelWrap")return!0;c=c.parent}return!1},a=ne();let o;const l=U(()=>{var c;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((c=e.inputIds)==null?void 0:c.length)<=1)});return Rn(()=>{o=ct([yr(n,"id"),t],([c,u])=>{const d=c??(u?void 0:Ws().value);d!==a.value&&(e!=null&&e.removeInputId&&!s()&&(a.value&&e.removeInputId(a.value),!(r!=null&&r.value)&&!u&&d&&e.addInputId(d)),a.value=d)},{immediate:!0})}),Dg(()=>{o&&o(),e!=null&&e.removeInputId&&a.value&&e.removeInputId(a.value)}),{isLabeledByFormItem:l,inputId:a}},Yq=n=>{const e=Dn();return U(()=>{var t,r;return(r=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:r[n]})},Qi=(n,e={})=>{const t=ne(void 0),r=e.prop?t:Yq("size"),i=e.global?t:Lq(),s=e.form?{size:void 0}:Lt(y0,void 0),a=e.formItem?{size:void 0}:Lt(su,void 0);return U(()=>r.value||y(n)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||i.value||"")},la=n=>{const e=Yq("disabled"),t=Lt(y0,void 0);return U(()=>e.value||y(n)||(t==null?void 0:t.disabled)||!1)},w0e='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',C0e=n=>getComputedStyle(n).position==="fixed"?!1:n.offsetParent!==null,_B=n=>Array.from(n.querySelectorAll(w0e)).filter(e=>Pb(e)&&C0e(e)),Pb=n=>{if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.tabIndex<0||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true")return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return!(n.type==="hidden"||n.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Qw=function(n,e,...t){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const i=document.createEvent(r);return i.initEvent(e,...t),n.dispatchEvent(i),n},Xq=n=>!n.getAttribute("aria-owns"),jq=(n,e,t)=>{const{parentNode:r}=n;if(!r)return null;const i=r.querySelectorAll(t),s=Array.prototype.indexOf.call(i,n);return i[s+e]||null},Jw=n=>{n&&(n.focus(),!Xq(n)&&n.click())};function gh(n,{disabled:e,beforeFocus:t,afterFocus:r,beforeBlur:i,afterBlur:s}={}){const a=Dn(),{emit:o}=a,l=Pr(),c=ne(!1),u=f=>{const p=Yt(t)?t(f):!1;y(e)||c.value||p||(c.value=!0,o("focus",f),r==null||r())},d=f=>{var p;const m=Yt(i)?i(f):!1;y(e)||f.relatedTarget&&((p=l.value)!=null&&p.contains(f.relatedTarget))||m||(c.value=!1,o("blur",f),s==null||s())},h=f=>{var p,m;y(e)||Pb(f.target)||(p=l.value)!=null&&p.contains(document.activeElement)&&l.value!==document.activeElement||(m=n.value)==null||m.focus()};return ct([l,()=>y(e)],([f,p])=>{f&&(p?f.removeAttribute("tabindex"):f.setAttribute("tabindex","-1"))}),Lr(l,"focus",u,!0),Lr(l,"blur",d,!0),Lr(l,"click",h,!0),{isFocused:c,wrapperRef:l,handleFocus:u,handleBlur:d}}const M0e=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function W_({afterComposition:n,emit:e}){const t=ne(!1),r=o=>{e==null||e("compositionstart",o),t.value=!0},i=o=>{var l;e==null||e("compositionupdate",o);const c=(l=o.target)==null?void 0:l.value,u=c[c.length-1]||"";t.value=!M0e(u)},s=o=>{e==null||e("compositionend",o),t.value&&(t.value=!1,Ut(()=>n(o)))};return{isComposing:t,handleComposition:o=>{o.type==="compositionend"?s(o):i(o)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:s}}function T0e(n){let e;function t(){if(n.value==null)return;const{selectionStart:i,selectionEnd:s,value:a}=n.value;if(i==null||s==null)return;const o=a.slice(0,Math.max(0,i)),l=a.slice(Math.max(0,s));e={selectionStart:i,selectionEnd:s,value:a,beforeTxt:o,afterTxt:l}}function r(){if(n.value==null||e==null)return;const{value:i}=n.value,{beforeTxt:s,afterTxt:a,selectionStart:o}=e;if(s==null||a==null||o==null)return;let l=i.length;if(i.endsWith(a))l=i.length-a.length;else if(i.startsWith(s))l=s.length;else{const c=s[o-1],u=i.indexOf(c,o-1);u!==-1&&(l=u+1)}n.value.setSelectionRange(l,l)}return[t,r]}const A0e="ElInput",E0e=Ie({name:A0e,inheritAttrs:!1}),I0e=Ie({...E0e,props:G_,emits:b0e,setup(n,{expose:e,emit:t}){const r=n,i=Pd(),s=rT(),a=es(),o=U(()=>[r.type==="textarea"?m.b():p.b(),p.m(h.value),p.is("disabled",f.value),p.is("exceed",Z.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||r.prefixIcon,[p.m("suffix")]:a.suffix||r.suffixIcon||r.clearable||r.showPassword,[p.bm("suffix","password-clear")]:k.value&&F.value,[p.b("hidden")]:r.type==="hidden"},i.class]),l=U(()=>[p.e("wrapper"),p.is("focus",C.value)]),{form:c,formItem:u}=oa(),{inputId:d}=Vl(r,{formItemContext:u}),h=Qi(),f=la(),p=gt("input"),m=gt("textarea"),v=Pr(),g=Pr(),_=ne(!1),b=ne(!1),S=ne(),x=Pr(r.inputStyle),w=U(()=>v.value||g.value),{wrapperRef:M,isFocused:C,handleFocus:A,handleBlur:T}=gh(w,{disabled:f,afterBlur(){var he;r.validateEvent&&((he=u==null?void 0:u.validate)==null||he.call(u,"blur").catch(Oe=>void 0))}}),I=U(()=>{var he;return(he=c==null?void 0:c.statusIcon)!=null?he:!1}),D=U(()=>(u==null?void 0:u.validateState)||""),B=U(()=>D.value&&nT[D.value]),O=U(()=>b.value?r0e:Spe),H=U(()=>[i.style]),L=U(()=>[r.inputStyle,x.value,{resize:r.resize}]),z=U(()=>Zi(r.modelValue)?"":String(r.modelValue)),k=U(()=>r.clearable&&!f.value&&!r.readonly&&!!z.value&&(C.value||_.value)),F=U(()=>r.showPassword&&!f.value&&!!z.value),W=U(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!f.value&&!r.readonly&&!r.showPassword),q=U(()=>z.value.length),Z=U(()=>!!W.value&&q.value>Number(r.maxlength)),se=U(()=>!!a.suffix||!!r.suffixIcon||k.value||r.showPassword||W.value||!!D.value&&I.value),[X,ie]=T0e(v);fi(g,he=>{if(we(),!W.value||r.resize!=="both")return;const Oe=he[0],{width:je}=Oe.contentRect;S.value={right:`calc(100% - ${je+15+6}px)`}});const ae=()=>{const{type:he,autosize:Oe}=r;if(!(!ar||he!=="textarea"||!g.value))if(Oe){const je=Mn(Oe)?Oe.minRows:void 0,dt=Mn(Oe)?Oe.maxRows:void 0,pt=yB(g.value,je,dt);x.value={overflowY:"hidden",...pt},Ut(()=>{g.value.offsetHeight,x.value=pt})}else x.value={minHeight:yB(g.value).minHeight}},we=(he=>{let Oe=!1;return()=>{var je;if(Oe||!r.autosize)return;((je=g.value)==null?void 0:je.offsetParent)===null||(he(),Oe=!0)}})(ae),He=()=>{const he=w.value,Oe=r.formatter?r.formatter(z.value):z.value;!he||he.value===Oe||(he.value=Oe)},Ge=async he=>{X();let{value:Oe}=he.target;if(r.formatter&&r.parser&&(Oe=r.parser(Oe)),!be.value){if(Oe===z.value){He();return}t(mn,Oe),t(is,Oe),await Ut(),He(),ie()}},me=he=>{let{value:Oe}=he.target;r.formatter&&r.parser&&(Oe=r.parser(Oe)),t(Hn,Oe)},{isComposing:be,handleCompositionStart:oe,handleCompositionUpdate:j,handleCompositionEnd:ke}=W_({emit:t,afterComposition:Ge}),ze=()=>{X(),b.value=!b.value,setTimeout(ie)},Ve=()=>{var he;return(he=w.value)==null?void 0:he.focus()},Le=()=>{var he;return(he=w.value)==null?void 0:he.blur()},Ze=he=>{_.value=!1,t("mouseleave",he)},st=he=>{_.value=!0,t("mouseenter",he)},fe=he=>{t("keydown",he)},V=()=>{var he;(he=w.value)==null||he.select()},J=()=>{t(mn,""),t(Hn,""),t("clear"),t(is,"")};return ct(()=>r.modelValue,()=>{var he;Ut(()=>ae()),r.validateEvent&&((he=u==null?void 0:u.validate)==null||he.call(u,"change").catch(Oe=>void 0))}),ct(z,()=>He()),ct(()=>r.type,async()=>{await Ut(),He(),ae()}),Rn(()=>{!r.formatter&&r.parser,He(),Ut(ae)}),e({input:v,textarea:g,ref:w,textareaStyle:L,autosize:yr(r,"autosize"),isComposing:be,focus:Ve,blur:Le,select:V,clear:J,resizeTextarea:ae}),(he,Oe)=>($(),ue("div",{class:Y([y(o),{[y(p).bm("group","append")]:he.$slots.append,[y(p).bm("group","prepend")]:he.$slots.prepend}]),style:Xt(y(H)),onMouseenter:st,onMouseleave:Ze},[Xe(" input "),he.type!=="textarea"?($(),ue(Bt,{key:0},[Xe(" prepend slot "),he.$slots.prepend?($(),ue("div",{key:0,class:Y(y(p).be("group","prepend"))},[Ye(he.$slots,"prepend")],2)):Xe("v-if",!0),ye("div",{ref_key:"wrapperRef",ref:M,class:Y(y(l))},[Xe(" prefix slot "),he.$slots.prefix||he.prefixIcon?($(),ue("span",{key:0,class:Y(y(p).e("prefix"))},[ye("span",{class:Y(y(p).e("prefix-inner"))},[Ye(he.$slots,"prefix"),he.prefixIcon?($(),rt(y(zt),{key:0,class:Y(y(p).e("icon"))},{default:Re(()=>[($(),rt(Ln(he.prefixIcon)))]),_:1},8,["class"])):Xe("v-if",!0)],2)],2)):Xe("v-if",!0),ye("input",Nn({id:y(d),ref_key:"input",ref:v,class:y(p).e("inner")},y(s),{name:he.name,minlength:he.minlength,maxlength:he.maxlength,type:he.showPassword?b.value?"text":"password":he.type,disabled:y(f),readonly:he.readonly,autocomplete:he.autocomplete,tabindex:he.tabindex,"aria-label":he.ariaLabel,placeholder:he.placeholder,style:he.inputStyle,form:he.form,autofocus:he.autofocus,role:he.containerRole,inputmode:he.inputmode,onCompositionstart:y(oe),onCompositionupdate:y(j),onCompositionend:y(ke),onInput:Ge,onChange:me,onKeydown:fe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),Xe(" suffix slot "),y(se)?($(),ue("span",{key:1,class:Y(y(p).e("suffix"))},[ye("span",{class:Y(y(p).e("suffix-inner"))},[!y(k)||!y(F)||!y(W)?($(),ue(Bt,{key:0},[Ye(he.$slots,"suffix"),he.suffixIcon?($(),rt(y(zt),{key:0,class:Y(y(p).e("icon"))},{default:Re(()=>[($(),rt(Ln(he.suffixIcon)))]),_:1},8,["class"])):Xe("v-if",!0)],64)):Xe("v-if",!0),y(k)?($(),rt(y(zt),{key:1,class:Y([y(p).e("icon"),y(p).e("clear")]),onMousedown:an(y(xr),["prevent"]),onClick:J},{default:Re(()=>[xe(y(kd))]),_:1},8,["class","onMousedown"])):Xe("v-if",!0),y(F)?($(),rt(y(zt),{key:2,class:Y([y(p).e("icon"),y(p).e("password")]),onClick:ze},{default:Re(()=>[($(),rt(Ln(y(O))))]),_:1},8,["class"])):Xe("v-if",!0),y(W)?($(),ue("span",{key:3,class:Y(y(p).e("count"))},[ye("span",{class:Y(y(p).e("count-inner"))},Ct(y(q))+" / "+Ct(he.maxlength),3)],2)):Xe("v-if",!0),y(D)&&y(B)&&y(I)?($(),rt(y(zt),{key:4,class:Y([y(p).e("icon"),y(p).e("validateIcon"),y(p).is("loading",y(D)==="validating")])},{default:Re(()=>[($(),rt(Ln(y(B))))]),_:1},8,["class"])):Xe("v-if",!0)],2)],2)):Xe("v-if",!0)],2),Xe(" append slot "),he.$slots.append?($(),ue("div",{key:1,class:Y(y(p).be("group","append"))},[Ye(he.$slots,"append")],2)):Xe("v-if",!0)],64)):($(),ue(Bt,{key:1},[Xe(" textarea "),ye("textarea",Nn({id:y(d),ref_key:"textarea",ref:g,class:[y(m).e("inner"),y(p).is("focus",y(C))]},y(s),{minlength:he.minlength,maxlength:he.maxlength,tabindex:he.tabindex,disabled:y(f),readonly:he.readonly,autocomplete:he.autocomplete,style:y(L),"aria-label":he.ariaLabel,placeholder:he.placeholder,form:he.form,autofocus:he.autofocus,rows:he.rows,role:he.containerRole,onCompositionstart:y(oe),onCompositionupdate:y(j),onCompositionend:y(ke),onInput:Ge,onFocus:y(A),onBlur:y(T),onChange:me,onKeydown:fe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),y(W)?($(),ue("span",{key:0,style:Xt(S.value),class:Y(y(p).e("count"))},Ct(y(q))+" / "+Ct(he.maxlength),7)):Xe("v-if",!0)],64))],38))}});var R0e=Et(I0e,[["__file","input.vue"]]);const wa=bn(R0e),k0=4,Zq={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},P0e=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),ZD=Symbol("scrollbarContextKey"),D0e=Tt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),L0e="Thumb",k0e=Ie({__name:"thumb",props:D0e,setup(n){const e=n,t=Lt(ZD),r=gt("scrollbar");t||Gi(L0e,"can not inject scrollbar context");const i=ne(),s=ne(),a=ne({}),o=ne(!1);let l=!1,c=!1,u=0,d=0,h=ar?document.onselectstart:null;const f=U(()=>Zq[e.vertical?"vertical":"horizontal"]),p=U(()=>P0e({size:e.size,move:e.move,bar:f.value})),m=U(()=>i.value[f.value.offset]**2/t.wrapElement[f.value.scrollSize]/e.ratio/s.value[f.value.offset]),v=C=>{var A;if(C.stopPropagation(),C.ctrlKey||[1,2].includes(C.button))return;(A=window.getSelection())==null||A.removeAllRanges(),_(C);const T=C.currentTarget;T&&(a.value[f.value.axis]=T[f.value.offset]-(C[f.value.client]-T.getBoundingClientRect()[f.value.direction]))},g=C=>{if(!s.value||!i.value||!t.wrapElement)return;const A=Math.abs(C.target.getBoundingClientRect()[f.value.direction]-C[f.value.client]),T=s.value[f.value.offset]/2,I=(A-T)*100*m.value/i.value[f.value.offset];t.wrapElement[f.value.scroll]=I*t.wrapElement[f.value.scrollSize]/100},_=C=>{C.stopImmediatePropagation(),l=!0,u=t.wrapElement.scrollHeight,d=t.wrapElement.scrollWidth,document.addEventListener("mousemove",b),document.addEventListener("mouseup",S),h=document.onselectstart,document.onselectstart=()=>!1},b=C=>{if(!i.value||!s.value||l===!1)return;const A=a.value[f.value.axis];if(!A)return;const T=(i.value.getBoundingClientRect()[f.value.direction]-C[f.value.client])*-1,I=s.value[f.value.offset]-A,D=(T-I)*100*m.value/i.value[f.value.offset];f.value.scroll==="scrollLeft"?t.wrapElement[f.value.scroll]=D*d/100:t.wrapElement[f.value.scroll]=D*u/100},S=()=>{l=!1,a.value[f.value.axis]=0,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",S),M(),c&&(o.value=!1)},x=()=>{c=!1,o.value=!!e.size},w=()=>{c=!0,o.value=l};br(()=>{M(),document.removeEventListener("mouseup",S)});const M=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return Lr(yr(t,"scrollbarElement"),"mousemove",x),Lr(yr(t,"scrollbarElement"),"mouseleave",w),(C,A)=>($(),rt(Os,{name:y(r).b("fade"),persisted:""},{default:Re(()=>[Cn(ye("div",{ref_key:"instance",ref:i,class:Y([y(r).e("bar"),y(r).is(y(f).key)]),onMousedown:g,onClick:an(()=>{},["stop"])},[ye("div",{ref_key:"thumb",ref:s,class:Y(y(r).e("thumb")),style:Xt(y(p)),onMousedown:v},null,38)],42,["onClick"]),[[cr,C.always||o.value]])]),_:1},8,["name"]))}});var SB=Et(k0e,[["__file","thumb.vue"]]);const O0e=Tt({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),N0e=Ie({__name:"bar",props:O0e,setup(n,{expose:e}){const t=n,r=Lt(ZD),i=ne(0),s=ne(0),a=ne(""),o=ne(""),l=ne(1),c=ne(1);return e({handleScroll:h=>{if(h){const f=h.offsetHeight-k0,p=h.offsetWidth-k0;s.value=h.scrollTop*100/f*l.value,i.value=h.scrollLeft*100/p*c.value}},update:()=>{const h=r==null?void 0:r.wrapElement;if(!h)return;const f=h.offsetHeight-k0,p=h.offsetWidth-k0,m=f**2/h.scrollHeight,v=p**2/h.scrollWidth,g=Math.max(m,t.minSize),_=Math.max(v,t.minSize);l.value=m/(f-m)/(g/(f-g)),c.value=v/(p-v)/(_/(p-_)),o.value=g+k0<f?`${g}px`:"",a.value=_+k0<p?`${_}px`:""}}),(h,f)=>($(),ue(Bt,null,[xe(SB,{move:i.value,ratio:c.value,size:a.value,always:h.always},null,8,["move","ratio","size","always"]),xe(SB,{move:s.value,ratio:l.value,size:o.value,vertical:"",always:h.always},null,8,["move","ratio","size","always"])],64))}});var B0e=Et(N0e,[["__file","bar.vue"]]);const F0e=Tt({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:Fe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...aa(["ariaLabel","ariaOrientation"])}),Qq={"end-reached":n=>["left","right","top","bottom"].includes(n),scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(en)},z0e="ElScrollbar",U0e=Ie({name:z0e}),H0e=Ie({...U0e,props:F0e,emits:Qq,setup(n,{expose:e,emit:t}){const r=n,i=gt("scrollbar");let s,a,o=0,l=0,c="";const u={bottom:!1,top:!1,right:!1,left:!1},d=ne(),h=ne(),f=ne(),p=ne(),m=U(()=>{const T={};return r.height&&(T.height=wi(r.height)),r.maxHeight&&(T.maxHeight=wi(r.maxHeight)),[r.wrapStyle,T]}),v=U(()=>[r.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!r.native}]),g=U(()=>[i.e("view"),r.viewClass]),_=T=>{var I;return(I=u[T])!=null?I:!1},b={top:"bottom",bottom:"top",left:"right",right:"left"},S=T=>{const I=b[c];if(!I)return;const D=T[c],B=T[I];D&&!u[c]&&(u[c]=!0),!B&&u[I]&&(u[I]=!1)},x=()=>{var T;if(h.value){(T=p.value)==null||T.handleScroll(h.value);const I=o,D=l;o=h.value.scrollTop,l=h.value.scrollLeft;const B={bottom:o+h.value.clientHeight>=h.value.scrollHeight-r.distance,top:o<=r.distance&&I!==0,right:l+h.value.clientWidth>=h.value.scrollWidth-r.distance&&D!==l,left:l<=r.distance&&D!==0};if(t("scroll",{scrollTop:o,scrollLeft:l}),I!==o&&(c=o>I?"bottom":"top"),D!==l&&(c=l>D?"right":"left"),r.distance>0){if(_(c))return;S(B)}B[c]&&t("end-reached",c)}};function w(T,I){Mn(T)?h.value.scrollTo(T):en(T)&&en(I)&&h.value.scrollTo(T,I)}const M=T=>{en(T)&&(h.value.scrollTop=T)},C=T=>{en(T)&&(h.value.scrollLeft=T)},A=()=>{var T;(T=p.value)==null||T.update(),u[c]=!1};return ct(()=>r.noresize,T=>{T?(s==null||s(),a==null||a()):({stop:s}=fi(f,A),a=Lr("resize",A))},{immediate:!0}),ct(()=>[r.maxHeight,r.height],()=>{r.native||Ut(()=>{var T;A(),h.value&&((T=p.value)==null||T.handleScroll(h.value))})}),jn(ZD,pr({scrollbarElement:d,wrapElement:h})),zM(()=>{h.value&&(h.value.scrollTop=o,h.value.scrollLeft=l)}),Rn(()=>{r.native||Ut(()=>{A()})}),yc(()=>A()),e({wrapRef:h,update:A,scrollTo:w,setScrollTop:M,setScrollLeft:C,handleScroll:x}),(T,I)=>($(),ue("div",{ref_key:"scrollbarRef",ref:d,class:Y(y(i).b())},[ye("div",{ref_key:"wrapRef",ref:h,class:Y(y(v)),style:Xt(y(m)),tabindex:T.tabindex,onScroll:x},[($(),rt(Ln(T.tag),{id:T.id,ref_key:"resizeRef",ref:f,class:Y(y(g)),style:Xt(T.viewStyle),role:T.role,"aria-label":T.ariaLabel,"aria-orientation":T.ariaOrientation},{default:Re(()=>[Ye(T.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),T.native?Xe("v-if",!0):($(),rt(B0e,{key:0,ref_key:"barRef",ref:p,always:T.always,"min-size":T.minSize},null,8,["always","min-size"]))],2))}});var V0e=Et(H0e,[["__file","scrollbar.vue"]]);const mc=bn(V0e),QD=Symbol("popper"),Jq=Symbol("popperContent"),eK=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],tK=Tt({role:{type:String,values:eK,default:"tooltip"}}),$0e=Ie({name:"ElPopper",inheritAttrs:!1}),G0e=Ie({...$0e,props:tK,setup(n,{expose:e}){const t=n,r=ne(),i=ne(),s=ne(),a=ne(),o=U(()=>t.role),l={triggerRef:r,popperInstanceRef:i,contentRef:s,referenceRef:a,role:o};return e(l),jn(QD,l),(c,u)=>Ye(c.$slots,"default")}});var W0e=Et(G0e,[["__file","popper.vue"]]);const q0e=Ie({name:"ElPopperArrow",inheritAttrs:!1}),K0e=Ie({...q0e,setup(n,{expose:e}){const t=gt("popper"),{arrowRef:r,arrowStyle:i}=Lt(Jq,void 0);return br(()=>{r.value=void 0}),e({arrowRef:r}),(s,a)=>($(),ue("span",{ref_key:"arrowRef",ref:r,class:Y(y(t).e("arrow")),style:Xt(y(i)),"data-popper-arrow":""},null,6))}});var Y0e=Et(K0e,[["__file","arrow.vue"]]);const nK=Tt({virtualRef:{type:Fe(Object)},virtualTriggering:Boolean,onMouseenter:{type:Fe(Function)},onMouseleave:{type:Fe(Function)},onClick:{type:Fe(Function)},onKeydown:{type:Fe(Function)},onFocus:{type:Fe(Function)},onBlur:{type:Fe(Function)},onContextmenu:{type:Fe(Function)},id:String,open:Boolean}),rK=Symbol("elForwardRef"),X0e=n=>{jn(rK,{setForwardRef:t=>{n.value=t}})},j0e=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),Z0e="ElOnlyChild",iK=Ie({name:Z0e,setup(n,{slots:e,attrs:t}){var r;const i=Lt(rK),s=j0e((r=i==null?void 0:i.setForwardRef)!=null?r:xr);return()=>{var a;const o=(a=e.default)==null?void 0:a.call(e,t);if(!o||o.length>1)return null;const l=sK(o);return l?Cn(yd(l,t),[[s]]):null}}});function sK(n){if(!n)return null;const e=n;for(const t of e){if(Mn(t))switch(t.type){case Yi:continue;case Lg:case"svg":return xB(t);case Bt:return sK(t.children);default:return t}return xB(t)}return null}function xB(n){const e=gt("only-child");return xe("span",{class:e.e("content")},[n])}const Q0e=Ie({name:"ElPopperTrigger",inheritAttrs:!1}),J0e=Ie({...Q0e,props:nK,setup(n,{expose:e}){const t=n,{role:r,triggerRef:i}=Lt(QD,void 0);X0e(i);const s=U(()=>o.value?t.id:void 0),a=U(()=>{if(r&&r.value==="tooltip")return t.open&&t.id?t.id:void 0}),o=U(()=>{if(r&&r.value!=="tooltip")return r.value}),l=U(()=>o.value?`${t.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Rn(()=>{ct(()=>t.virtualRef,d=>{d&&(i.value=ms(d))},{immediate:!0}),ct(i,(d,h)=>{c==null||c(),c=void 0,Ga(d)&&(u.forEach(f=>{var p;const m=t[f];m&&(d.addEventListener(f.slice(2).toLowerCase(),m),(p=h==null?void 0:h.removeEventListener)==null||p.call(h,f.slice(2).toLowerCase(),m))}),Pb(d)&&(c=ct([s,a,o,l],f=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{Zi(f[m])?d.removeAttribute(p):d.setAttribute(p,f[m])})},{immediate:!0}))),Ga(h)&&Pb(h)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(f=>h.removeAttribute(f))},{immediate:!0})}),br(()=>{if(c==null||c(),c=void 0,i.value&&Ga(i.value)){const d=i.value;u.forEach(h=>{const f=t[h];f&&d.removeEventListener(h.slice(2).toLowerCase(),f)}),i.value=void 0}}),e({triggerRef:i}),(d,h)=>d.virtualTriggering?Xe("v-if",!0):($(),rt(y(iK),Nn({key:0},d.$attrs,{"aria-controls":y(s),"aria-describedby":y(a),"aria-expanded":y(l),"aria-haspopup":y(o)}),{default:Re(()=>[Ye(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var eme=Et(J0e,[["__file","trigger.vue"]]);const jA="focus-trap.focus-after-trapped",ZA="focus-trap.focus-after-released",tme="focus-trap.focusout-prevented",wB={cancelable:!0,bubbles:!1},nme={cancelable:!0,bubbles:!1},CB="focusAfterTrapped",MB="focusAfterReleased",JD=Symbol("elFocusTrap"),e6=ne(),iT=ne(0),t6=ne(0);let LS=0;const aK=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},TB=(n,e)=>{for(const t of n)if(!rme(t,e))return t},rme=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},ime=n=>{const e=aK(n),t=TB(e,n),r=TB(e.reverse(),n);return[t,r]},sme=n=>n instanceof HTMLInputElement&&"select"in n,Wu=(n,e)=>{if(n&&n.focus){const t=document.activeElement;let r=!1;Ga(n)&&!Pb(n)&&!n.getAttribute("tabindex")&&(n.setAttribute("tabindex","-1"),r=!0),n.focus({preventScroll:!0}),t6.value=window.performance.now(),n!==t&&sme(n)&&e&&n.select(),Ga(n)&&r&&n.removeAttribute("tabindex")}};function AB(n,e){const t=[...n],r=n.indexOf(e);return r!==-1&&t.splice(r,1),t}const ame=()=>{let n=[];return{push:r=>{const i=n[0];i&&r!==i&&i.pause(),n=AB(n,r),n.unshift(r)},remove:r=>{var i,s;n=AB(n,r),(s=(i=n[0])==null?void 0:i.resume)==null||s.call(i)}}},ome=(n,e=!1)=>{const t=document.activeElement;for(const r of n)if(Wu(r,e),document.activeElement!==t)return},EB=ame(),lme=()=>iT.value>t6.value,kS=()=>{e6.value="pointer",iT.value=window.performance.now()},IB=()=>{e6.value="keyboard",iT.value=window.performance.now()},cme=()=>(Rn(()=>{LS===0&&(document.addEventListener("mousedown",kS),document.addEventListener("touchstart",kS),document.addEventListener("keydown",IB)),LS++}),br(()=>{LS--,LS<=0&&(document.removeEventListener("mousedown",kS),document.removeEventListener("touchstart",kS),document.removeEventListener("keydown",IB))}),{focusReason:e6,lastUserFocusTimestamp:iT,lastAutomatedFocusTimestamp:t6}),OS=n=>new CustomEvent(tme,{...nme,detail:n}),Rt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Vm=[];const RB=n=>{n.code===Rt.esc&&Vm.forEach(e=>e(n))},ume=n=>{Rn(()=>{Vm.length===0&&document.addEventListener("keydown",RB),ar&&Vm.push(n)}),br(()=>{Vm=Vm.filter(e=>e!==n),Vm.length===0&&ar&&document.removeEventListener("keydown",RB)})},dme=Ie({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[CB,MB,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=ne();let r,i;const{focusReason:s}=cme();ume(p=>{n.trapped&&!a.paused&&e("release-requested",p)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=p=>{if(!n.loop&&!n.trapped||a.paused)return;const{code:m,altKey:v,ctrlKey:g,metaKey:_,currentTarget:b,shiftKey:S}=p,{loop:x}=n,w=m===Rt.tab&&!v&&!g&&!_,M=document.activeElement;if(w&&M){const C=b,[A,T]=ime(C);if(A&&T){if(!S&&M===T){const D=OS({focusReason:s.value});e("focusout-prevented",D),D.defaultPrevented||(p.preventDefault(),x&&Wu(A,!0))}else if(S&&[A,C].includes(M)){const D=OS({focusReason:s.value});e("focusout-prevented",D),D.defaultPrevented||(p.preventDefault(),x&&Wu(T,!0))}}else if(M===C){const D=OS({focusReason:s.value});e("focusout-prevented",D),D.defaultPrevented||p.preventDefault()}}};jn(JD,{focusTrapRef:t,onKeydown:o}),ct(()=>n.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),ct([t],([p],[m])=>{p&&(p.addEventListener("keydown",o),p.addEventListener("focusin",u),p.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",o),m.removeEventListener("focusin",u),m.removeEventListener("focusout",d))});const l=p=>{e(CB,p)},c=p=>e(MB,p),u=p=>{const m=y(t);if(!m)return;const v=p.target,g=p.relatedTarget,_=v&&m.contains(v);n.trapped||g&&m.contains(g)||(r=g),_&&e("focusin",p),!a.paused&&n.trapped&&(_?i=v:Wu(i,!0))},d=p=>{const m=y(t);if(!(a.paused||!m))if(n.trapped){const v=p.relatedTarget;!Zi(v)&&!m.contains(v)&&setTimeout(()=>{if(!a.paused&&n.trapped){const g=OS({focusReason:s.value});e("focusout-prevented",g),g.defaultPrevented||Wu(i,!0)}},0)}else{const v=p.target;v&&m.contains(v)||e("focusout",p)}};async function h(){await Ut();const p=y(t);if(p){EB.push(a);const m=p.contains(document.activeElement)?r:document.activeElement;if(r=m,!p.contains(m)){const g=new Event(jA,wB);p.addEventListener(jA,l),p.dispatchEvent(g),g.defaultPrevented||Ut(()=>{let _=n.focusStartEl;Wt(_)||(Wu(_),document.activeElement!==_&&(_="first")),_==="first"&&ome(aK(p),!0),(document.activeElement===m||_==="container")&&Wu(p)})}}}function f(){const p=y(t);if(p){p.removeEventListener(jA,l);const m=new CustomEvent(ZA,{...wB,detail:{focusReason:s.value}});p.addEventListener(ZA,c),p.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!lme()||p.contains(document.activeElement))&&Wu(r??document.body),p.removeEventListener(ZA,c),EB.remove(a)}}return Rn(()=>{n.trapped&&h(),ct(()=>n.trapped,p=>{p?h():f()})}),br(()=>{n.trapped&&f(),t.value&&(t.value.removeEventListener("keydown",o),t.value.removeEventListener("focusin",u),t.value.removeEventListener("focusout",d),t.value=void 0)}),{onKeydown:o}}});function fme(n,e,t,r,i,s){return Ye(n.$slots,"default",{handleKeydown:n.onKeydown})}var Hg=Et(dme,[["render",fme],["__file","focus-trap.vue"]]),go="top",Fl="bottom",zl="right",yo="left",n6="auto",q_=[go,Fl,zl,yo],Xv="start",Db="end",hme="clippingParents",oK="viewport",Ay="popper",pme="reference",PB=q_.reduce(function(n,e){return n.concat([e+"-"+Xv,e+"-"+Db])},[]),Od=[].concat(q_,[n6]).reduce(function(n,e){return n.concat([e,e+"-"+Xv,e+"-"+Db])},[]),mme="beforeRead",vme="read",gme="afterRead",yme="beforeMain",bme="main",_me="afterMain",Sme="beforeWrite",xme="write",wme="afterWrite",Cme=[mme,vme,gme,yme,bme,_me,Sme,xme,wme];function au(n){return n?(n.nodeName||"").toLowerCase():null}function Sc(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function jv(n){var e=Sc(n).Element;return n instanceof e||n instanceof Element}function Pl(n){var e=Sc(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function r6(n){if(typeof ShadowRoot>"u")return!1;var e=Sc(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Mme(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!Pl(s)||!au(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function Tme(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),o=a.reduce(function(l,c){return l[c]="",l},{});!Pl(i)||!au(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}var lK={name:"applyStyles",enabled:!0,phase:"write",fn:Mme,effect:Tme,requires:["computeStyles"]};function Qc(n){return n.split("-")[0]}var Bp=Math.max,aC=Math.min,Zv=Math.round;function Qv(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Pl(n)&&e){var s=n.offsetHeight,a=n.offsetWidth;a>0&&(r=Zv(t.width)/a||1),s>0&&(i=Zv(t.height)/s||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function i6(n){var e=Qv(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function cK(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&r6(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _d(n){return Sc(n).getComputedStyle(n)}function Ame(n){return["table","td","th"].indexOf(au(n))>=0}function yh(n){return((jv(n)?n.ownerDocument:n.document)||window.document).documentElement}function sT(n){return au(n)==="html"?n:n.assignedSlot||n.parentNode||(r6(n)?n.host:null)||yh(n)}function DB(n){return!Pl(n)||_d(n).position==="fixed"?null:n.offsetParent}function Eme(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Pl(n)){var r=_d(n);if(r.position==="fixed")return null}var i=sT(n);for(r6(i)&&(i=i.host);Pl(i)&&["html","body"].indexOf(au(i))<0;){var s=_d(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function K_(n){for(var e=Sc(n),t=DB(n);t&&Ame(t)&&_d(t).position==="static";)t=DB(t);return t&&(au(t)==="html"||au(t)==="body"&&_d(t).position==="static")?e:t||Eme(n)||e}function s6(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function F1(n,e,t){return Bp(n,aC(e,t))}function Ime(n,e,t){var r=F1(n,e,t);return r>t?t:r}function uK(){return{top:0,right:0,bottom:0,left:0}}function dK(n){return Object.assign({},uK(),n)}function fK(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var Rme=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,dK(typeof n!="number"?n:fK(n,q_))};function Pme(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,a=t.modifiersData.popperOffsets,o=Qc(t.placement),l=s6(o),c=[yo,zl].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var d=Rme(i.padding,t),h=i6(s),f=l==="y"?go:yo,p=l==="y"?Fl:zl,m=t.rects.reference[u]+t.rects.reference[l]-a[l]-t.rects.popper[u],v=a[l]-t.rects.reference[l],g=K_(s),_=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,b=m/2-v/2,S=d[f],x=_-h[u]-d[p],w=_/2-h[u]/2+b,M=F1(S,w,x),C=l;t.modifiersData[r]=(e={},e[C]=M,e.centerOffset=M-w,e)}}function Dme(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!cK(e.elements.popper,i)||(e.elements.arrow=i))}var Lme={name:"arrow",enabled:!0,phase:"main",fn:Pme,effect:Dme,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Jv(n){return n.split("-")[1]}var kme={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ome(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:Zv(e*i)/i||0,y:Zv(t*i)/i||0}}function LB(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,a=n.offsets,o=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=a.x,f=h===void 0?0:h,p=a.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var g=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),b=yo,S=go,x=window;if(c){var w=K_(t),M="clientHeight",C="clientWidth";if(w===Sc(t)&&(w=yh(t),_d(w).position!=="static"&&o==="absolute"&&(M="scrollHeight",C="scrollWidth")),w=w,i===go||(i===yo||i===zl)&&s===Db){S=Fl;var A=d&&w===x&&x.visualViewport?x.visualViewport.height:w[M];m-=A-r.height,m*=l?1:-1}if(i===yo||(i===go||i===Fl)&&s===Db){b=zl;var T=d&&w===x&&x.visualViewport?x.visualViewport.width:w[C];f-=T-r.width,f*=l?1:-1}}var I=Object.assign({position:o},c&&kme),D=u===!0?Ome({x:f,y:m}):{x:f,y:m};if(f=D.x,m=D.y,l){var B;return Object.assign({},I,(B={},B[S]=_?"0":"",B[b]=g?"0":"",B.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",B))}return Object.assign({},I,(e={},e[S]=_?m+"px":"",e[b]=g?f+"px":"",e.transform="",e))}function Nme(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,a=s===void 0?!0:s,o=t.roundOffsets,l=o===void 0?!0:o,c={placement:Qc(e.placement),variation:Jv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,LB(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,LB(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var hK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nme,data:{}},NS={passive:!0};function Bme(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=Sc(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,NS)}),o&&l.addEventListener("resize",t.update,NS),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,NS)}),o&&l.removeEventListener("resize",t.update,NS)}}var pK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Bme,data:{}},Fme={left:"right",right:"left",bottom:"top",top:"bottom"};function e2(n){return n.replace(/left|right|bottom|top/g,function(e){return Fme[e]})}var zme={start:"end",end:"start"};function kB(n){return n.replace(/start|end/g,function(e){return zme[e]})}function a6(n){var e=Sc(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function o6(n){return Qv(yh(n)).left+a6(n).scrollLeft}function Ume(n){var e=Sc(n),t=yh(n),r=e.visualViewport,i=t.clientWidth,s=t.clientHeight,a=0,o=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,o=r.offsetTop)),{width:i,height:s,x:a+o6(n),y:o}}function Hme(n){var e,t=yh(n),r=a6(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=Bp(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Bp(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+o6(n),l=-r.scrollTop;return _d(i||t).direction==="rtl"&&(o+=Bp(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function l6(n){var e=_d(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function mK(n){return["html","body","#document"].indexOf(au(n))>=0?n.ownerDocument.body:Pl(n)&&l6(n)?n:mK(sT(n))}function z1(n,e){var t;e===void 0&&(e=[]);var r=mK(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=Sc(r),a=i?[s].concat(s.visualViewport||[],l6(r)?r:[]):r,o=e.concat(a);return i?o:o.concat(z1(sT(a)))}function NI(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Vme(n){var e=Qv(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function OB(n,e){return e===oK?NI(Ume(n)):jv(e)?Vme(e):NI(Hme(yh(n)))}function $me(n){var e=z1(sT(n)),t=["absolute","fixed"].indexOf(_d(n).position)>=0,r=t&&Pl(n)?K_(n):n;return jv(r)?e.filter(function(i){return jv(i)&&cK(i,r)&&au(i)!=="body"}):[]}function Gme(n,e,t){var r=e==="clippingParents"?$me(n):[].concat(e),i=[].concat(r,[t]),s=i[0],a=i.reduce(function(o,l){var c=OB(n,l);return o.top=Bp(c.top,o.top),o.right=aC(c.right,o.right),o.bottom=aC(c.bottom,o.bottom),o.left=Bp(c.left,o.left),o},OB(n,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function vK(n){var e=n.reference,t=n.element,r=n.placement,i=r?Qc(r):null,s=r?Jv(r):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(i){case go:l={x:a,y:e.y-t.height};break;case Fl:l={x:a,y:e.y+e.height};break;case zl:l={x:e.x+e.width,y:o};break;case yo:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var c=i?s6(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Xv:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Db:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function Lb(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.boundary,a=s===void 0?hme:s,o=t.rootBoundary,l=o===void 0?oK:o,c=t.elementContext,u=c===void 0?Ay:c,d=t.altBoundary,h=d===void 0?!1:d,f=t.padding,p=f===void 0?0:f,m=dK(typeof p!="number"?p:fK(p,q_)),v=u===Ay?pme:Ay,g=n.rects.popper,_=n.elements[h?v:u],b=Gme(jv(_)?_:_.contextElement||yh(n.elements.popper),a,l),S=Qv(n.elements.reference),x=vK({reference:S,element:g,strategy:"absolute",placement:i}),w=NI(Object.assign({},g,x)),M=u===Ay?w:S,C={top:b.top-M.top+m.top,bottom:M.bottom-b.bottom+m.bottom,left:b.left-M.left+m.left,right:M.right-b.right+m.right},A=n.modifiersData.offset;if(u===Ay&&A){var T=A[i];Object.keys(C).forEach(function(I){var D=[zl,Fl].indexOf(I)>=0?1:-1,B=[go,Fl].indexOf(I)>=0?"y":"x";C[I]+=T[B]*D})}return C}function Wme(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Od:l,u=Jv(r),d=u?o?PB:PB.filter(function(p){return Jv(p)===u}):q_,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=Lb(n,{placement:m,boundary:i,rootBoundary:s,padding:a})[Qc(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function qme(n){if(Qc(n)===n6)return[];var e=e2(n);return[kB(n),e,kB(e)]}function Kme(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,p=f===void 0?!0:f,m=t.allowedAutoPlacements,v=e.options.placement,g=Qc(v),_=g===v,b=l||(_||!p?[e2(v)]:qme(v)),S=[v].concat(b).reduce(function(X,ie){return X.concat(Qc(ie)===n6?Wme(e,{placement:ie,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):ie)},[]),x=e.rects.reference,w=e.rects.popper,M=new Map,C=!0,A=S[0],T=0;T<S.length;T++){var I=S[T],D=Qc(I),B=Jv(I)===Xv,O=[go,Fl].indexOf(D)>=0,H=O?"width":"height",L=Lb(e,{placement:I,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),z=O?B?zl:yo:B?Fl:go;x[H]>w[H]&&(z=e2(z));var k=e2(z),F=[];if(s&&F.push(L[D]<=0),o&&F.push(L[z]<=0,L[k]<=0),F.every(function(X){return X})){A=I,C=!1;break}M.set(I,F)}if(C)for(var W=p?3:1,q=function(X){var ie=S.find(function(ae){var ce=M.get(ae);if(ce)return ce.slice(0,X).every(function(we){return we})});if(ie)return A=ie,"break"},Z=W;Z>0;Z--){var se=q(Z);if(se==="break")break}e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}}var Yme={name:"flip",enabled:!0,phase:"main",fn:Kme,requiresIfExists:["offset"],data:{_skip:!1}};function NB(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function BB(n){return[go,zl,Fl,yo].some(function(e){return n[e]>=0})}function Xme(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=Lb(e,{elementContext:"reference"}),o=Lb(e,{altBoundary:!0}),l=NB(a,r),c=NB(o,i,s),u=BB(l),d=BB(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var jme={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Xme};function Zme(n,e,t){var r=Qc(n),i=[yo,go].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[yo,zl].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function Qme(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,a=Od.reduce(function(u,d){return u[d]=Zme(d,e.rects,s),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}var Jme={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qme};function eve(n){var e=n.state,t=n.name;e.modifiersData[t]=vK({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var gK={name:"popperOffsets",enabled:!0,phase:"read",fn:eve,data:{}};function tve(n){return n==="x"?"y":"x"}function nve(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,f=h===void 0?!0:h,p=t.tetherOffset,m=p===void 0?0:p,v=Lb(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=Qc(e.placement),_=Jv(e.placement),b=!_,S=s6(g),x=tve(S),w=e.modifiersData.popperOffsets,M=e.rects.reference,C=e.rects.popper,A=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,T=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(w){if(s){var B,O=S==="y"?go:yo,H=S==="y"?Fl:zl,L=S==="y"?"height":"width",z=w[S],k=z+v[O],F=z-v[H],W=f?-C[L]/2:0,q=_===Xv?M[L]:C[L],Z=_===Xv?-C[L]:-M[L],se=e.elements.arrow,X=f&&se?i6(se):{width:0,height:0},ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:uK(),ae=ie[O],ce=ie[H],we=F1(0,M[L],X[L]),He=b?M[L]/2-W-we-ae-T.mainAxis:q-we-ae-T.mainAxis,Ge=b?-M[L]/2+W+we+ce+T.mainAxis:Z+we+ce+T.mainAxis,me=e.elements.arrow&&K_(e.elements.arrow),be=me?S==="y"?me.clientTop||0:me.clientLeft||0:0,oe=(B=I==null?void 0:I[S])!=null?B:0,j=z+He-oe-be,ke=z+Ge-oe,ze=F1(f?aC(k,j):k,z,f?Bp(F,ke):F);w[S]=ze,D[S]=ze-z}if(o){var Ve,Le=S==="x"?go:yo,Ze=S==="x"?Fl:zl,st=w[x],fe=x==="y"?"height":"width",V=st+v[Le],J=st-v[Ze],he=[go,yo].indexOf(g)!==-1,Oe=(Ve=I==null?void 0:I[x])!=null?Ve:0,je=he?V:st-M[fe]-C[fe]-Oe+T.altAxis,dt=he?st+M[fe]+C[fe]-Oe-T.altAxis:J,pt=f&&he?Ime(je,st,dt):F1(f?je:V,st,f?dt:J);w[x]=pt,D[x]=pt-st}e.modifiersData[r]=D}}var rve={name:"preventOverflow",enabled:!0,phase:"main",fn:nve,requiresIfExists:["offset"]};function ive(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function sve(n){return n===Sc(n)||!Pl(n)?a6(n):ive(n)}function ave(n){var e=n.getBoundingClientRect(),t=Zv(e.width)/n.offsetWidth||1,r=Zv(e.height)/n.offsetHeight||1;return t!==1||r!==1}function ove(n,e,t){t===void 0&&(t=!1);var r=Pl(e),i=Pl(e)&&ave(e),s=yh(e),a=Qv(n,i),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((au(e)!=="body"||l6(s))&&(o=sve(e)),Pl(e)?(l=Qv(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=o6(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function lve(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&i(l)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function cve(n){var e=lve(n);return Cme.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function uve(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function dve(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var FB={placement:"bottom",modifiers:[],strategy:"absolute"};function zB(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function c6(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?FB:i;return function(a,o,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},FB,s),modifiersData:{},elements:{reference:a,popper:o},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(m){var v=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:jv(a)?z1(a):a.contextElement?z1(a.contextElement):[],popper:z1(o)};var g=cve(dve([].concat(r,c.options.modifiers)));return c.orderedModifiers=g.filter(function(_){return _.enabled}),f(),h.update()},forceUpdate:function(){if(!d){var m=c.elements,v=m.reference,g=m.popper;if(zB(v,g)){c.rects={reference:ove(v,K_(g),c.options.strategy==="fixed"),popper:i6(g)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var b=c.orderedModifiers[_],S=b.fn,x=b.options,w=x===void 0?{}:x,M=b.name;typeof S=="function"&&(c=S({state:c,options:w,name:M,instance:h})||c)}}}},update:uve(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!zB(a,o))return h;h.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function f(){c.orderedModifiers.forEach(function(m){var v=m.name,g=m.options,_=g===void 0?{}:g,b=m.effect;if(typeof b=="function"){var S=b({state:c,name:v,instance:h,options:_}),x=function(){};u.push(S||x)}})}function p(){u.forEach(function(m){return m()}),u=[]}return h}}c6();var fve=[pK,gK,hK,lK];c6({defaultModifiers:fve});var hve=[pK,gK,hK,lK,Jme,Yme,rve,Lme,jme],pve=c6({defaultModifiers:hve});const yK=Tt({arrowOffset:{type:Number,default:5}}),mve=["fixed","absolute"],vve=Tt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Fe(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Od,default:"bottom"},popperOptions:{type:Fe(Object),default:()=>({})},strategy:{type:String,values:mve,default:"absolute"}}),bK=Tt({...vve,...yK,id:String,style:{type:Fe([String,Array,Object])},className:{type:Fe([String,Array,Object])},effect:{type:Fe(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:Boolean,trapping:Boolean,popperClass:{type:Fe([String,Array,Object])},popperStyle:{type:Fe([String,Array,Object])},referenceEl:{type:Fe(Object)},triggerTargetEl:{type:Fe(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...aa(["ariaLabel"])}),gve={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},yve=(n,e)=>{const t=ne(!1),r=ne();return{focusStartRef:r,trapped:t,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{n.visible&&!t.value&&(c.target&&(r.value=c.target),t.value=!0)},onFocusoutPrevented:c=>{n.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},bve=(n,e=[])=>{const{placement:t,strategy:r,popperOptions:i}=n,s={placement:t,strategy:r,...i,modifiers:[...Sve(n),...e]};return xve(s,i==null?void 0:i.modifiers),s},_ve=n=>{if(ar)return ms(n)};function Sve(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:r}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function xve(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const wve=(n,e,t={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=Cve(l);Object.assign(a.value,c)},requires:["computeStyles"]},i=U(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=y(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],r,{name:"applyStyles",enabled:!1}]}}),s=Pr(),a=ne({styles:{popper:{position:y(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return ct(i,l=>{const c=y(s);c&&c.setOptions(l)},{deep:!0}),ct([n,e],([l,c])=>{o(),!(!l||!c)&&(s.value=pve(l,c,y(i)))}),br(()=>{o()}),{state:U(()=>{var l;return{...((l=y(s))==null?void 0:l.state)||{}}}),styles:U(()=>y(a).styles),attributes:U(()=>y(a).attributes),update:()=>{var l;return(l=y(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=y(s))==null?void 0:l.forceUpdate()},instanceRef:U(()=>y(s))}};function Cve(n){const e=Object.keys(n.elements),t=Ib(e.map(i=>[i,n.styles[i]||{}])),r=Ib(e.map(i=>[i,n.attributes[i]]));return{styles:t,attributes:r}}const Mve=0,Tve=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:r,role:i}=Lt(QD,void 0),s=ne(),a=U(()=>n.arrowOffset),o=U(()=>({name:"eventListeners",enabled:!!n.visible})),l=U(()=>{var g;const _=y(s),b=(g=y(a))!=null?g:Mve;return{name:"arrow",enabled:!xfe(_),options:{element:_,padding:b}}}),c=U(()=>({onFirstUpdate:()=>{p()},...bve(n,[y(l),y(o)])})),u=U(()=>_ve(n.referenceEl)||y(r)),{attributes:d,state:h,styles:f,update:p,forceUpdate:m,instanceRef:v}=wve(u,t,c);return ct(v,g=>e.value=g,{flush:"sync"}),Rn(()=>{ct(()=>{var g;return(g=y(u))==null?void 0:g.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:s,contentRef:t,instanceRef:v,state:h,styles:f,role:i,forceUpdate:m,update:p}},Ave=(n,{attributes:e,styles:t,role:r})=>{const{nextZIndex:i}=zg(),s=gt("popper"),a=U(()=>y(e).popper),o=ne(en(n.zIndex)?n.zIndex:i()),l=U(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),c=U(()=>[{zIndex:y(o)},y(t).popper,n.popperStyle||{}]),u=U(()=>r.value==="dialog"?"false":void 0),d=U(()=>y(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:a,contentClass:l,contentStyle:c,contentZIndex:o,updateZIndex:()=>{o.value=en(n.zIndex)?n.zIndex:i()}}},Eve=Ie({name:"ElPopperContent"}),Ive=Ie({...Eve,props:bK,emits:gve,setup(n,{expose:e,emit:t}){const r=n,{focusStartRef:i,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=yve(r,t),{attributes:d,arrowRef:h,contentRef:f,styles:p,instanceRef:m,role:v,update:g}=Tve(r),{ariaModal:_,arrowStyle:b,contentAttrs:S,contentClass:x,contentStyle:w,updateZIndex:M}=Ave(r,{styles:p,attributes:d,role:v}),C=Lt(su,void 0);jn(Jq,{arrowStyle:b,arrowRef:h}),C&&jn(su,{...C,addInputId:xr,removeInputId:xr});let A;const T=(D=!0)=>{g(),D&&M()},I=()=>{T(!1),r.visible&&r.focusOnShow?s.value=!0:r.visible===!1&&(s.value=!1)};return Rn(()=>{ct(()=>r.triggerTargetEl,(D,B)=>{A==null||A(),A=void 0;const O=y(D||f.value),H=y(B||f.value);Ga(O)&&(A=ct([v,()=>r.ariaLabel,_,()=>r.id],L=>{["role","aria-label","aria-modal","id"].forEach((z,k)=>{Zi(L[k])?O.removeAttribute(z):O.setAttribute(z,L[k])})},{immediate:!0})),H!==O&&Ga(H)&&["role","aria-label","aria-modal","id"].forEach(L=>{H.removeAttribute(L)})},{immediate:!0}),ct(()=>r.visible,I,{immediate:!0})}),br(()=>{A==null||A(),A=void 0}),e({popperContentRef:f,popperInstanceRef:m,updatePopper:T,contentStyle:w}),(D,B)=>($(),ue("div",Nn({ref_key:"contentRef",ref:f},y(S),{style:y(w),class:y(x),tabindex:"-1",onMouseenter:O=>D.$emit("mouseenter",O),onMouseleave:O=>D.$emit("mouseleave",O)}),[xe(y(Hg),{trapped:y(s),"trap-on-focus-in":!0,"focus-trap-el":y(f),"focus-start-el":y(i),onFocusAfterTrapped:y(o),onFocusAfterReleased:y(a),onFocusin:y(l),onFocusoutPrevented:y(c),onReleaseRequested:y(u)},{default:Re(()=>[Ye(D.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var Rve=Et(Ive,[["__file","content.vue"]]);const _K=bn(W0e),aT=Symbol("elTooltip"),oT=Tt({to:{type:Fe([String,Object]),required:!0},disabled:Boolean}),Ri=Tt({...Hq,...bK,appendTo:{type:oT.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Fe(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...aa(["ariaLabel"])}),Cv=Tt({...nK,disabled:Boolean,trigger:{type:Fe([String,Array]),default:"hover"},triggerKeys:{type:Fe(Array),default:()=>[Rt.enter,Rt.numpadEnter,Rt.space]}}),Pve=_c({type:Fe(Boolean),default:null}),Dve=_c({type:Fe(Function)}),SK=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,r=[e],i={[n]:Pve,[t]:Dve};return{useModelToggle:({indicator:a,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const h=Dn(),{emit:f}=h,p=h.props,m=U(()=>Yt(p[t])),v=U(()=>p[n]===null),g=M=>{a.value!==!0&&(a.value=!0,o&&(o.value=M),Yt(u)&&u(M))},_=M=>{a.value!==!1&&(a.value=!1,o&&(o.value=M),Yt(d)&&d(M))},b=M=>{if(p.disabled===!0||Yt(c)&&!c())return;const C=m.value&&ar;C&&f(e,!0),(v.value||!C)&&g(M)},S=M=>{if(p.disabled===!0||!ar)return;const C=m.value&&ar;C&&f(e,!1),(v.value||!C)&&_(M)},x=M=>{Cr(M)&&(p.disabled&&M?m.value&&f(e,!1):a.value!==M&&(M?g():_()))},w=()=>{a.value?S():b()};return ct(()=>p[n],x),l&&h.appContext.config.globalProperties.$route!==void 0&&ct(()=>({...h.proxy.$route}),()=>{l.value&&a.value&&S()}),Rn(()=>{x(p[n])}),{hide:S,show:b,toggle:w,hasUpdateHandler:m}},useModelToggleProps:i,useModelToggleEmits:r}};SK("modelValue");const{useModelToggleProps:Lve,useModelToggleEmits:kve,useModelToggle:Ove}=SK("visible"),Nve=Tt({...tK,...Lve,...Ri,...Cv,...yK,showArrow:{type:Boolean,default:!0}}),Bve=[...kve,"before-show","before-hide","show","hide","open","close"],Fve=(n,e)=>xt(n)?n.includes(e):n===e,O0=(n,e,t)=>r=>{Fve(y(n),e)&&t(r)},Ai=(n,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const s=n==null?void 0:n(i);if(t===!1||!s)return e==null?void 0:e(i)},UB=n=>e=>e.pointerType==="mouse"?n(e):void 0,zve=Ie({name:"ElTooltipTrigger"}),Uve=Ie({...zve,props:Cv,setup(n,{expose:e}){const t=n,r=gt("tooltip"),{controlled:i,id:s,open:a,onOpen:o,onClose:l,onToggle:c}=Lt(aT,void 0),u=ne(null),d=()=>{if(y(i)||t.disabled)return!0},h=yr(t,"trigger"),f=Ai(d,O0(h,"hover",o)),p=Ai(d,O0(h,"hover",l)),m=Ai(d,O0(h,"click",S=>{S.button===0&&c(S)})),v=Ai(d,O0(h,"focus",o)),g=Ai(d,O0(h,"focus",l)),_=Ai(d,O0(h,"contextmenu",S=>{S.preventDefault(),c(S)})),b=Ai(d,S=>{const{code:x}=S;t.triggerKeys.includes(x)&&(S.preventDefault(),c(S))});return e({triggerRef:u}),(S,x)=>($(),rt(y(eme),{id:y(s),"virtual-ref":S.virtualRef,open:y(a),"virtual-triggering":S.virtualTriggering,class:Y(y(r).e("trigger")),onBlur:y(g),onClick:y(m),onContextmenu:y(_),onFocus:y(v),onMouseenter:y(f),onMouseleave:y(p),onKeydown:y(b)},{default:Re(()=>[Ye(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Hve=Et(Uve,[["__file","trigger.vue"]]);const Vve=Ie({__name:"teleport",props:oT,setup(n){return(e,t)=>e.disabled?Ye(e.$slots,"default",{key:0}):($(),rt(Jie,{key:1,to:e.to},[Ye(e.$slots,"default")],8,["to"]))}});var $ve=Et(Vve,[["__file","teleport.vue"]]);const Vg=bn($ve),xK=()=>{const n=wD(),e=jD(),t=U(()=>`${n.value}-popper-container-${e.prefix}`),r=U(()=>`#${t.value}`);return{id:t,selector:r}},Gve=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},Wve=()=>{const{id:n,selector:e}=xK();return HM(()=>{ar&&(document.body.querySelector(e.value)||Gve(n.value))}),{id:n,selector:e}},qve=Ie({name:"ElTooltipContent",inheritAttrs:!1}),Kve=Ie({...qve,props:Ri,setup(n,{expose:e}){const t=n,{selector:r}=xK(),i=gt("tooltip"),s=ne(),a=rC(()=>{var k;return(k=s.value)==null?void 0:k.popperContentRef});let o;const{controlled:l,id:c,open:u,trigger:d,onClose:h,onOpen:f,onShow:p,onHide:m,onBeforeShow:v,onBeforeHide:g}=Lt(aT,void 0),_=U(()=>t.transition||`${i.namespace.value}-fade-in-linear`),b=U(()=>t.persistent);br(()=>{o==null||o()});const S=U(()=>y(b)?!0:y(u)),x=U(()=>t.disabled?!1:y(u)),w=U(()=>t.appendTo||r.value),M=U(()=>{var k;return(k=t.style)!=null?k:{}}),C=ne(!0),A=()=>{m(),z()&&Wu(document.body),C.value=!0},T=()=>{if(y(l))return!0},I=Ai(T,()=>{t.enterable&&y(d)==="hover"&&f()}),D=Ai(T,()=>{y(d)==="hover"&&h()}),B=()=>{var k,F;(F=(k=s.value)==null?void 0:k.updatePopper)==null||F.call(k),v==null||v()},O=()=>{g==null||g()},H=()=>{p()},L=()=>{t.virtualTriggering||h()},z=k=>{var F;const W=(F=s.value)==null?void 0:F.popperContentRef,q=(k==null?void 0:k.relatedTarget)||document.activeElement;return W==null?void 0:W.contains(q)};return ct(()=>y(u),k=>{k?(C.value=!1,o=UD(a,()=>{if(y(l))return;y(d)!=="hover"&&h()})):o==null||o()},{flush:"post"}),ct(()=>t.content,()=>{var k,F;(F=(k=s.value)==null?void 0:k.updatePopper)==null||F.call(k)}),e({contentRef:s,isFocusInsideContent:z}),(k,F)=>($(),rt(y(Vg),{disabled:!k.teleported,to:y(w)},{default:Re(()=>[y(S)||!C.value?($(),rt(Os,{key:0,name:y(_),appear:!y(b),onAfterLeave:A,onBeforeEnter:B,onAfterEnter:H,onBeforeLeave:O,persisted:""},{default:Re(()=>[Cn(xe(y(Rve),Nn({id:y(c),ref_key:"contentRef",ref:s},k.$attrs,{"aria-label":k.ariaLabel,"aria-hidden":C.value,"boundaries-padding":k.boundariesPadding,"fallback-placements":k.fallbackPlacements,"gpu-acceleration":k.gpuAcceleration,offset:k.offset,placement:k.placement,"popper-options":k.popperOptions,"arrow-offset":k.arrowOffset,strategy:k.strategy,effect:k.effect,enterable:k.enterable,pure:k.pure,"popper-class":k.popperClass,"popper-style":[k.popperStyle,y(M)],"reference-el":k.referenceEl,"trigger-target-el":k.triggerTargetEl,visible:y(x),"z-index":k.zIndex,onMouseenter:y(I),onMouseleave:y(D),onBlur:L,onClose:y(h)}),{default:Re(()=>[Ye(k.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","arrow-offset","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"]),[[cr,y(x)]])]),_:3},8,["name","appear"])):Xe("v-if",!0)]),_:3},8,["disabled","to"]))}});var Yve=Et(Kve,[["__file","content.vue"]]);const Xve=Ie({name:"ElTooltip"}),jve=Ie({...Xve,props:Nve,emits:Bve,setup(n,{expose:e,emit:t}){const r=n;Wve();const i=gt("tooltip"),s=Ws(),a=ne(),o=ne(),l=()=>{var b;const S=y(a);S&&((b=S.popperInstanceRef)==null||b.update())},c=ne(!1),u=ne(),{show:d,hide:h,hasUpdateHandler:f}=Ove({indicator:c,toggleReason:u}),{onOpen:p,onClose:m}=Vq({showAfter:yr(r,"showAfter"),hideAfter:yr(r,"hideAfter"),autoClose:yr(r,"autoClose"),open:d,close:h}),v=U(()=>Cr(r.visible)&&!f.value),g=U(()=>[i.b(),r.popperClass]);jn(aT,{controlled:v,id:s,open:Pg(c),trigger:yr(r,"trigger"),onOpen:p,onClose:m,onToggle:b=>{y(c)?m(b):p(b)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:l}),ct(()=>r.disabled,b=>{b&&c.value&&(c.value=!1)});const _=b=>{var S;return(S=o.value)==null?void 0:S.isFocusInsideContent(b)};return jG(()=>c.value&&h()),e({popperRef:a,contentRef:o,isFocusInsideContent:_,updatePopper:l,onOpen:p,onClose:m,hide:h}),(b,S)=>($(),rt(y(_K),{ref_key:"popperRef",ref:a,role:b.role},{default:Re(()=>[xe(Hve,{disabled:b.disabled,trigger:b.trigger,"trigger-keys":b.triggerKeys,"virtual-ref":b.virtualRef,"virtual-triggering":b.virtualTriggering},{default:Re(()=>[b.$slots.default?Ye(b.$slots,"default",{key:0}):Xe("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),xe(Yve,{ref_key:"contentRef",ref:o,"aria-label":b.ariaLabel,"boundaries-padding":b.boundariesPadding,content:b.content,disabled:b.disabled,effect:b.effect,enterable:b.enterable,"fallback-placements":b.fallbackPlacements,"hide-after":b.hideAfter,"gpu-acceleration":b.gpuAcceleration,offset:b.offset,persistent:b.persistent,"popper-class":y(g),"popper-style":b.popperStyle,placement:b.placement,"popper-options":b.popperOptions,"arrow-offset":b.arrowOffset,pure:b.pure,"raw-content":b.rawContent,"reference-el":b.referenceEl,"trigger-target-el":b.triggerTargetEl,"show-after":b.showAfter,strategy:b.strategy,teleported:b.teleported,transition:b.transition,"virtual-triggering":b.virtualTriggering,"z-index":b.zIndex,"append-to":b.appendTo},{default:Re(()=>[Ye(b.$slots,"content",{},()=>[b.rawContent?($(),ue("span",{key:0,innerHTML:b.content},null,8,["innerHTML"])):($(),ue("span",{key:1},Ct(b.content),1))]),b.showArrow?($(),rt(y(Y0e),{key:0})):Xe("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","arrow-offset","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Zve=Et(jve,[["__file","tooltip.vue"]]);const ia=bn(Zve),Qve=Tt({...G_,valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Fe(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Fe([Function,Array]),default:xr},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:Boolean,hideLoading:Boolean,teleported:Ri.teleported,appendTo:Ri.appendTo,highlightFirstItem:Boolean,fitInputWidth:Boolean}),Jve={[mn]:n=>Wt(n),[is]:n=>Wt(n),[Hn]:n=>Wt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,select:n=>Mn(n)},wK="ElAutocomplete",ege=Ie({name:wK,inheritAttrs:!1}),tge=Ie({...ege,props:Qve,emits:Jve,setup(n,{expose:e,emit:t}){const r=n,i=U(()=>Cl(r,Object.keys(G_))),s=Pd(),a=la(),o=gt("autocomplete"),l=ne(),c=ne(),u=ne(),d=ne();let h=!1,f=!1;const p=ne([]),m=ne(-1),v=ne(""),g=ne(!1),_=ne(!1),b=ne(!1),S=Ws(),x=U(()=>s.style),w=U(()=>(p.value.length>0||b.value)&&g.value),M=U(()=>!r.hideLoading&&b.value),C=U(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),A=()=>{w.value&&(v.value=`${l.value.$el.offsetWidth}px`)},T=()=>{m.value=-1},I=async ce=>{if(_.value)return;const we=He=>{b.value=!1,!_.value&&(xt(He)?(p.value=He,m.value=r.highlightFirstItem?0:-1):Gi(wK,"autocomplete suggestions must be an array"))};if(b.value=!0,xt(r.fetchSuggestions))we(r.fetchSuggestions);else{const He=await r.fetchSuggestions(ce,we);xt(He)&&we(He)}},D=Co(I,r.debounce),B=ce=>{const we=!!ce;if(t(is,ce),t(mn,ce),_.value=!1,g.value||(g.value=we),!r.triggerOnFocus&&!ce){_.value=!0,p.value=[];return}D(ce)},O=ce=>{var we;a.value||(((we=ce.target)==null?void 0:we.tagName)!=="INPUT"||C.value.includes(document.activeElement))&&(g.value=!0)},H=ce=>{t(Hn,ce)},L=ce=>{var we;if(f)f=!1;else{g.value=!0,t("focus",ce);const He=(we=r.modelValue)!=null?we:"";r.triggerOnFocus&&!h&&D(String(He))}},z=ce=>{setTimeout(()=>{var we;if((we=u.value)!=null&&we.isFocusInsideContent()){f=!0;return}g.value&&q(),t("blur",ce)})},k=()=>{g.value=!1,t(mn,""),t("clear")},F=async()=>{w.value&&m.value>=0&&m.value<p.value.length?X(p.value[m.value]):r.selectWhenUnmatched&&(t("select",{value:r.modelValue}),p.value=[],m.value=-1)},W=ce=>{w.value&&(ce.preventDefault(),ce.stopPropagation(),q())},q=()=>{g.value=!1},Z=()=>{var ce;(ce=l.value)==null||ce.focus()},se=()=>{var ce;(ce=l.value)==null||ce.blur()},X=async ce=>{t(is,ce[r.valueKey]),t(mn,ce[r.valueKey]),t("select",ce),p.value=[],m.value=-1},ie=ce=>{if(!w.value||b.value)return;if(ce<0){m.value=-1;return}ce>=p.value.length&&(ce=p.value.length-1);const we=c.value.querySelector(`.${o.be("suggestion","wrap")}`),Ge=we.querySelectorAll(`.${o.be("suggestion","list")} li`)[ce],me=we.scrollTop,{offsetTop:be,scrollHeight:oe}=Ge;be+oe>me+we.clientHeight&&(we.scrollTop+=oe),be<me&&(we.scrollTop-=oe),m.value=ce,l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${m.value}`)},ae=UD(d,()=>{var ce;(ce=u.value)!=null&&ce.isFocusInsideContent()||w.value&&q()});return br(()=>{ae==null||ae()}),Rn(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${m.value}`),h=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:m,activated:g,loading:b,inputRef:l,popperRef:u,suggestions:p,handleSelect:X,handleKeyEnter:F,focus:Z,blur:se,close:q,highlight:ie,getData:I}),(ce,we)=>($(),rt(y(ia),{ref_key:"popperRef",ref:u,visible:y(w),placement:ce.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[y(o).e("popper"),ce.popperClass],teleported:ce.teleported,"append-to":ce.appendTo,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${y(o).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:A,onHide:T},{content:Re(()=>[ye("div",{ref_key:"regionRef",ref:c,class:Y([y(o).b("suggestion"),y(o).is("loading",y(M))]),style:Xt({[ce.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[ce.$slots.header?($(),ue("div",{key:0,class:Y(y(o).be("suggestion","header")),onClick:an(()=>{},["stop"])},[Ye(ce.$slots,"header")],10,["onClick"])):Xe("v-if",!0),xe(y(mc),{id:y(S),tag:"ul","wrap-class":y(o).be("suggestion","wrap"),"view-class":y(o).be("suggestion","list"),role:"listbox"},{default:Re(()=>[y(M)?($(),ue("li",{key:0},[Ye(ce.$slots,"loading",{},()=>[xe(y(zt),{class:Y(y(o).is("loading"))},{default:Re(()=>[xe(y(iu))]),_:1},8,["class"])])])):($(!0),ue(Bt,{key:1},Fn(p.value,(He,Ge)=>($(),ue("li",{id:`${y(S)}-item-${Ge}`,key:Ge,class:Y({highlighted:m.value===Ge}),role:"option","aria-selected":m.value===Ge,onClick:me=>X(He)},[Ye(ce.$slots,"default",{item:He},()=>[Bn(Ct(He[ce.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"]),ce.$slots.footer?($(),ue("div",{key:1,class:Y(y(o).be("suggestion","footer")),onClick:an(()=>{},["stop"])},[Ye(ce.$slots,"footer")],10,["onClick"])):Xe("v-if",!0)],6)]),default:Re(()=>[ye("div",{ref_key:"listboxRef",ref:d,class:Y([y(o).b(),ce.$attrs.class]),style:Xt(y(x)),role:"combobox","aria-haspopup":"listbox","aria-expanded":y(w),"aria-owns":y(S)},[xe(y(wa),Nn({ref_key:"inputRef",ref:l},Nn(y(i),ce.$attrs),{"model-value":ce.modelValue,disabled:y(a),onInput:B,onChange:H,onFocus:L,onBlur:z,onClear:k,onKeydown:[Dr(an(He=>ie(m.value-1),["prevent"]),["up"]),Dr(an(He=>ie(m.value+1),["prevent"]),["down"]),Dr(F,["enter"]),Dr(q,["tab"]),Dr(W,["esc"])],onMousedown:O}),wo({_:2},[ce.$slots.prepend?{name:"prepend",fn:Re(()=>[Ye(ce.$slots,"prepend")])}:void 0,ce.$slots.append?{name:"append",fn:Re(()=>[Ye(ce.$slots,"append")])}:void 0,ce.$slots.prefix?{name:"prefix",fn:Re(()=>[Ye(ce.$slots,"prefix")])}:void 0,ce.$slots.suffix?{name:"suffix",fn:Re(()=>[Ye(ce.$slots,"suffix")])}:void 0]),1040,["model-value","disabled","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","append-to","transition"]))}});var nge=Et(tge,[["__file","autocomplete.vue"]]);const rge=bn(nge),ige=Tt({size:{type:[Number,String],values:pu,default:"",validator:n=>en(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Ar},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Fe(String),default:"cover"}}),sge={error:n=>n instanceof Event},age=Ie({name:"ElAvatar"}),oge=Ie({...age,props:ige,emits:sge,setup(n,{emit:e}){const t=n,r=gt("avatar"),i=ne(!1),s=U(()=>{const{size:c,icon:u,shape:d}=t,h=[r.b()];return Wt(c)&&h.push(r.m(c)),u&&h.push(r.m("icon")),d&&h.push(r.m(d)),h}),a=U(()=>{const{size:c}=t;return en(c)?r.cssVarBlock({size:wi(c)||""}):void 0}),o=U(()=>({objectFit:t.fit}));ct(()=>t.src,()=>i.value=!1);function l(c){i.value=!0,e("error",c)}return(c,u)=>($(),ue("span",{class:Y(y(s)),style:Xt(y(a))},[(c.src||c.srcSet)&&!i.value?($(),ue("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:Xt(y(o)),onError:l},null,44,["src","alt","srcset"])):c.icon?($(),rt(y(zt),{key:1},{default:Re(()=>[($(),rt(Ln(c.icon)))]),_:1})):Ye(c.$slots,"default",{key:2})],6))}});var lge=Et(oge,[["__file","avatar.vue"]]);const cge=bn(lge),uge={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},dge={click:n=>n instanceof MouseEvent},fge=(n,e,t)=>{const r=Pr(),i=Pr(),s=ne(!1),a=()=>{r.value&&(s.value=r.value.scrollTop>=n.visibilityHeight)},o=c=>{var u;(u=r.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=Mq(a,300,!0);return Lr(i,"scroll",l),Rn(()=>{var c;i.value=document,r.value=document.documentElement,n.target&&(r.value=(c=document.querySelector(n.target))!=null?c:void 0,r.value||Gi(t,`target does not exist: ${n.target}`),i.value=r.value),a()}),{visible:s,handleClick:o}},CK="ElBacktop",hge=Ie({name:CK}),pge=Ie({...hge,props:uge,emits:dge,setup(n,{emit:e}){const t=n,r=gt("backtop"),{handleClick:i,visible:s}=fge(t,e,CK),a=U(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(o,l)=>($(),rt(Os,{name:`${y(r).namespace.value}-fade-in`},{default:Re(()=>[y(s)?($(),ue("div",{key:0,style:Xt(y(a)),class:Y(y(r).b()),onClick:an(y(i),["stop"])},[Ye(o.$slots,"default",{},()=>[xe(y(zt),{class:Y(y(r).e("icon"))},{default:Re(()=>[xe(y(rpe))]),_:1},8,["class"])])],14,["onClick"])):Xe("v-if",!0)]),_:3},8,["name"]))}});var mge=Et(pge,[["__file","backtop.vue"]]);const vge=bn(mge),gge=Tt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Fe([String,Object,Array])},offset:{type:Fe(Array),default:[0,0]},badgeClass:{type:String}}),yge=Ie({name:"ElBadge"}),bge=Ie({...yge,props:gge,setup(n,{expose:e}){const t=n,r=gt("badge"),i=U(()=>t.isDot?"":en(t.value)&&en(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),s=U(()=>{var a,o,l,c,u;return[{backgroundColor:t.color,marginRight:wi(-((o=(a=t.offset)==null?void 0:a[0])!=null?o:0)),marginTop:wi((c=(l=t.offset)==null?void 0:l[1])!=null?c:0)},(u=t.badgeStyle)!=null?u:{}]});return e({content:i}),(a,o)=>($(),ue("div",{class:Y(y(r).b())},[Ye(a.$slots,"default"),xe(Os,{name:`${y(r).namespace.value}-zoom-in-center`,persisted:""},{default:Re(()=>[Cn(ye("sup",{class:Y([y(r).e("content"),y(r).em("content",a.type),y(r).is("fixed",!!a.$slots.default),y(r).is("dot",a.isDot),y(r).is("hide-zero",!a.showZero&&t.value===0),a.badgeClass]),style:Xt(y(s))},[Ye(a.$slots,"content",{value:y(i)},()=>[Bn(Ct(y(i)),1)])],6),[[cr,!a.hidden&&(y(i)||a.isDot||a.$slots.content)]])]),_:3},8,["name"])],2))}});var _ge=Et(bge,[["__file","badge.vue"]]);const MK=bn(_ge),TK=Symbol("breadcrumbKey"),Sge=Tt({separator:{type:String,default:"/"},separatorIcon:{type:Ar}}),xge=Ie({name:"ElBreadcrumb"}),wge=Ie({...xge,props:Sge,setup(n){const e=n,{t}=sr(),r=gt("breadcrumb"),i=ne();return jn(TK,e),Rn(()=>{const s=i.value.querySelectorAll(`.${r.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,a)=>($(),ue("div",{ref_key:"breadcrumb",ref:i,class:Y(y(r).b()),"aria-label":y(t)("el.breadcrumb.label"),role:"navigation"},[Ye(s.$slots,"default")],10,["aria-label"]))}});var Cge=Et(wge,[["__file","breadcrumb.vue"]]);const Mge=Tt({to:{type:Fe([String,Object]),default:""},replace:Boolean}),Tge=Ie({name:"ElBreadcrumbItem"}),Age=Ie({...Tge,props:Mge,setup(n){const e=n,t=Dn(),r=Lt(TK,void 0),i=gt("breadcrumb"),s=t.appContext.config.globalProperties.$router,a=ne(),o=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(l,c)=>{var u,d;return $(),ue("span",{class:Y(y(i).e("item"))},[ye("span",{ref_key:"link",ref:a,class:Y([y(i).e("inner"),y(i).is("link",!!l.to)]),role:"link",onClick:o},[Ye(l.$slots,"default")],2),(u=y(r))!=null&&u.separatorIcon?($(),rt(y(zt),{key:0,class:Y(y(i).e("separator"))},{default:Re(()=>[($(),rt(Ln(y(r).separatorIcon)))]),_:1},8,["class"])):($(),ue("span",{key:1,class:Y(y(i).e("separator")),role:"presentation"},Ct((d=y(r))==null?void 0:d.separator),3))],2)}}});var AK=Et(Age,[["__file","breadcrumb-item.vue"]]);const Ege=bn(Cge,{BreadcrumbItem:AK}),Ige=pi(AK),EK=Symbol("buttonGroupContextKey"),ud=({from:n,replacement:e,scope:t,version:r,ref:i,type:s="API"},a)=>{ct(()=>y(a),o=>{},{immediate:!0})},Rge=(n,e)=>{ud({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},U(()=>n.type==="text"));const t=Lt(EK,void 0),r=Ug("button"),{form:i}=oa(),s=Qi(U(()=>t==null?void 0:t.size)),a=la(),o=ne(),l=es(),c=U(()=>{var v;return n.type||(t==null?void 0:t.type)||((v=r.value)==null?void 0:v.type)||""}),u=U(()=>{var v,g,_;return(_=(g=n.autoInsertSpace)!=null?g:(v=r.value)==null?void 0:v.autoInsertSpace)!=null?_:!1}),d=U(()=>{var v,g,_;return(_=(g=n.plain)!=null?g:(v=r.value)==null?void 0:v.plain)!=null?_:!1}),h=U(()=>{var v,g,_;return(_=(g=n.round)!=null?g:(v=r.value)==null?void 0:v.round)!=null?_:!1}),f=U(()=>n.tag==="button"?{ariaDisabled:a.value||n.loading,disabled:a.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),p=U(()=>{var v;const g=(v=l.default)==null?void 0:v.call(l);if(u.value&&(g==null?void 0:g.length)===1){const _=g[0];if((_==null?void 0:_.type)===Lg){const b=_.children;return/^\p{Unified_Ideograph}{2}$/u.test(b.trim())}}return!1});return{_disabled:a,_size:s,_type:c,_ref:o,_props:f,_plain:d,_round:h,shouldAddSpace:p,handleClick:v=>{if(a.value||n.loading){v.stopPropagation();return}n.nativeType==="reset"&&(i==null||i.resetFields()),e("click",v)}}},BI=["default","primary","success","warning","info","danger","text",""],Pge=["button","submit","reset"],FI=Tt({size:as,disabled:Boolean,type:{type:String,values:BI,default:""},icon:{type:Ar},nativeType:{type:String,values:Pge,default:"button"},loading:Boolean,loadingIcon:{type:Ar,default:()=>iu},plain:{type:Boolean,default:void 0},text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:{type:Boolean,default:void 0},circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Fe([String,Object]),default:"button"}}),Dge={click:n=>n instanceof MouseEvent};function ra(n,e){Lge(n)&&(n="100%");var t=kge(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function BS(n){return Math.min(1,Math.max(0,n))}function Lge(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function kge(n){return typeof n=="string"&&n.indexOf("%")!==-1}function IK(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function FS(n){return n<=1?"".concat(Number(n)*100,"%"):n}function Sp(n){return n.length===1?"0"+n:String(n)}function Oge(n,e,t){return{r:ra(n,255)*255,g:ra(e,255)*255,b:ra(t,255)*255}}function HB(n,e,t){n=ra(n,255),e=ra(e,255),t=ra(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s=0,a=0,o=(r+i)/2;if(r===i)a=0,s=0;else{var l=r-i;switch(a=o>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function QA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Nge(n,e,t){var r,i,s;if(n=ra(n,360),e=ra(e,100),t=ra(t,100),e===0)i=t,s=t,r=t;else{var a=t<.5?t*(1+e):t+e-t*e,o=2*t-a;r=QA(o,a,n+1/3),i=QA(o,a,n),s=QA(o,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function VB(n,e,t){n=ra(n,255),e=ra(e,255),t=ra(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s=0,a=r,o=r-i,l=r===0?0:o/r;if(r===i)s=0;else{switch(r){case n:s=(e-t)/o+(e<t?6:0);break;case e:s=(t-n)/o+2;break;case t:s=(n-e)/o+4;break}s/=6}return{h:s,s:l,v:a}}function Bge(n,e,t){n=ra(n,360)*6,e=ra(e,100),t=ra(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),a=t*(1-i*e),o=t*(1-(1-i)*e),l=r%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:c*255,g:u*255,b:d*255}}function $B(n,e,t,r){var i=[Sp(Math.round(n).toString(16)),Sp(Math.round(e).toString(16)),Sp(Math.round(t).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Fge(n,e,t,r,i){var s=[Sp(Math.round(n).toString(16)),Sp(Math.round(e).toString(16)),Sp(Math.round(t).toString(16)),Sp(zge(r))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function zge(n){return Math.round(parseFloat(n)*255).toString(16)}function GB(n){return Bo(n)/255}function Bo(n){return parseInt(n,16)}function Uge(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var zI={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Hge(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,a=!1,o=!1;return typeof n=="string"&&(n=Gge(n)),typeof n=="object"&&(Au(n.r)&&Au(n.g)&&Au(n.b)?(e=Oge(n.r,n.g,n.b),a=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Au(n.h)&&Au(n.s)&&Au(n.v)?(r=FS(n.s),i=FS(n.v),e=Bge(n.h,r,i),a=!0,o="hsv"):Au(n.h)&&Au(n.s)&&Au(n.l)&&(r=FS(n.s),s=FS(n.l),e=Nge(n.h,r,s),a=!0,o="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=IK(t),{ok:a,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var Vge="[-\\+]?\\d+%?",$ge="[-\\+]?\\d*\\.\\d+%?",Df="(?:".concat($ge,")|(?:").concat(Vge,")"),JA="[\\s|\\(]+(".concat(Df,")[,|\\s]+(").concat(Df,")[,|\\s]+(").concat(Df,")\\s*\\)?"),e3="[\\s|\\(]+(".concat(Df,")[,|\\s]+(").concat(Df,")[,|\\s]+(").concat(Df,")[,|\\s]+(").concat(Df,")\\s*\\)?"),ec={CSS_UNIT:new RegExp(Df),rgb:new RegExp("rgb"+JA),rgba:new RegExp("rgba"+e3),hsl:new RegExp("hsl"+JA),hsla:new RegExp("hsla"+e3),hsv:new RegExp("hsv"+JA),hsva:new RegExp("hsva"+e3),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Gge(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(zI[n])n=zI[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=ec.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=ec.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ec.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=ec.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ec.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=ec.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ec.hex8.exec(n),t?{r:Bo(t[1]),g:Bo(t[2]),b:Bo(t[3]),a:GB(t[4]),format:e?"name":"hex8"}:(t=ec.hex6.exec(n),t?{r:Bo(t[1]),g:Bo(t[2]),b:Bo(t[3]),format:e?"name":"hex"}:(t=ec.hex4.exec(n),t?{r:Bo(t[1]+t[1]),g:Bo(t[2]+t[2]),b:Bo(t[3]+t[3]),a:GB(t[4]+t[4]),format:e?"name":"hex8"}:(t=ec.hex3.exec(n),t?{r:Bo(t[1]+t[1]),g:Bo(t[2]+t[2]),b:Bo(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Au(n){return!!ec.CSS_UNIT.exec(String(n))}var tv=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var r;if(e instanceof n)return e;typeof e=="number"&&(e=Uge(e)),this.originalInput=e;var i=Hge(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=t.format)!==null&&r!==void 0?r:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,r,i,s=e.r/255,a=e.g/255,o=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),.2126*t+.7152*r+.0722*i},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=IK(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=VB(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=VB(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=HB(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=HB(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),$B(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),Fge(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(ra(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(ra(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+$B(this.r,this.g,this.b,!1),t=0,r=Object.entries(zI);t<r.length;t++){var i=r[t],s=i[0],a=i[1];if(e===a)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,s=!t&&i&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=BS(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=BS(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=BS(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=BS(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var r=this.toRgb(),i=new n(e).toRgb(),s=t/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return new n(a)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var r=this.toHsl(),i=360/t,s=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(new n(r));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),r=t.h,i=t.s,s=t.v,a=[],o=1/e;e--;)a.push(new n({h:r,s:i,v:s})),s=(s+o)%1;return a},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),r=new n(e).toRgb(),i=t.a+r.a*(1-t.a);return new n({r:(t.r*t.a+r.r*r.a*(1-t.a))/i,g:(t.g*t.a+r.g*r.a*(1-t.a))/i,b:(t.b*t.a+r.b*r.a*(1-t.a))/i,a:i})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),r=t.h,i=[this],s=360/e,a=1;a<e;a++)i.push(new n({h:(r+a*s)%360,s:t.s,l:t.l}));return i},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function qd(n,e=20){return n.mix("#141414",e).toString()}function Wge(n){const e=la(),t=gt("button");return U(()=>{let r={},i=n.color;if(i){const s=i.match(/var\((.*?)\)/);s&&(i=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const a=new tv(i),o=n.dark?a.tint(20).toString():qd(a,20);if(n.plain)r=t.cssVarBlock({"bg-color":n.dark?qd(a,90):a.tint(90).toString(),"text-color":i,"border-color":n.dark?qd(a,50):a.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(r[t.cssVarBlockName("disabled-bg-color")]=n.dark?qd(a,90):a.tint(90).toString(),r[t.cssVarBlockName("disabled-text-color")]=n.dark?qd(a,50):a.tint(50).toString(),r[t.cssVarBlockName("disabled-border-color")]=n.dark?qd(a,80):a.tint(80).toString());else{const l=n.dark?qd(a,30):a.tint(30).toString(),c=a.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(r=t.cssVarBlock({"bg-color":i,"text-color":c,"border-color":i,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":o,"active-border-color":o}),e.value){const u=n.dark?qd(a,50):a.tint(50).toString();r[t.cssVarBlockName("disabled-bg-color")]=u,r[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,r[t.cssVarBlockName("disabled-border-color")]=u}}}return r})}const qge=Ie({name:"ElButton"}),Kge=Ie({...qge,props:FI,emits:Dge,setup(n,{expose:e,emit:t}){const r=n,i=Wge(r),s=gt("button"),{_ref:a,_size:o,_type:l,_disabled:c,_props:u,_plain:d,_round:h,shouldAddSpace:f,handleClick:p}=Rge(r,t),m=U(()=>[s.b(),s.m(l.value),s.m(o.value),s.is("disabled",c.value),s.is("loading",r.loading),s.is("plain",d.value),s.is("round",h.value),s.is("circle",r.circle),s.is("text",r.text),s.is("link",r.link),s.is("has-bg",r.bg)]);return e({ref:a,size:o,type:l,disabled:c,shouldAddSpace:f}),(v,g)=>($(),rt(Ln(v.tag),Nn({ref_key:"_ref",ref:a},y(u),{class:y(m),style:y(i),onClick:y(p)}),{default:Re(()=>[v.loading?($(),ue(Bt,{key:0},[v.$slots.loading?Ye(v.$slots,"loading",{key:0}):($(),rt(y(zt),{key:1,class:Y(y(s).is("loading"))},{default:Re(()=>[($(),rt(Ln(v.loadingIcon)))]),_:1},8,["class"]))],64)):v.icon||v.$slots.icon?($(),rt(y(zt),{key:1},{default:Re(()=>[v.icon?($(),rt(Ln(v.icon),{key:0})):Ye(v.$slots,"icon",{key:1})]),_:3})):Xe("v-if",!0),v.$slots.default?($(),ue("span",{key:2,class:Y({[y(s).em("text","expand")]:y(f)})},[Ye(v.$slots,"default")],2)):Xe("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Yge=Et(Kge,[["__file","button.vue"]]);const Xge={size:FI.size,type:FI.type},jge=Ie({name:"ElButtonGroup"}),Zge=Ie({...jge,props:Xge,setup(n){const e=n;jn(EK,pr({size:yr(e,"size"),type:yr(e,"type")}));const t=gt("button");return(r,i)=>($(),ue("div",{class:Y(y(t).b("group"))},[Ye(r.$slots,"default")],2))}});var RK=Et(Zge,[["__file","button-group.vue"]]);const ks=bn(Yge,{ButtonGroup:RK}),PK=pi(RK);var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var DK={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){var t=1e3,r=6e4,i=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",p="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var H=["th","st","nd","rd"],L=O%100;return"["+O+(H[(L-20)%10]||H[L]||H[0])+"]"}},b=function(O,H,L){var z=String(O);return!z||z.length>=H?O:""+Array(H+1-z.length).join(L)+O},S={s:b,z:function(O){var H=-O.utcOffset(),L=Math.abs(H),z=Math.floor(L/60),k=L%60;return(H<=0?"+":"-")+b(z,2,"0")+":"+b(k,2,"0")},m:function O(H,L){if(H.date()<L.date())return-O(L,H);var z=12*(L.year()-H.year())+(L.month()-H.month()),k=H.clone().add(z,d),F=L-k<0,W=H.clone().add(z+(F?-1:1),d);return+(-(z+(L-k)/(F?k-W:W-k))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:d,y:f,w:u,d:c,D:p,h:l,m:o,s:a,ms:s,Q:h}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},x="en",w={};w[x]=_;var M="$isDayjsObject",C=function(O){return O instanceof D||!(!O||!O[M])},A=function O(H,L,z){var k;if(!H)return x;if(typeof H=="string"){var F=H.toLowerCase();w[F]&&(k=F),L&&(w[F]=L,k=F);var W=H.split("-");if(!k&&W.length>1)return O(W[0])}else{var q=H.name;w[q]=H,k=q}return!z&&k&&(x=k),k||!z&&x},T=function(O,H){if(C(O))return O.clone();var L=typeof H=="object"?H:{};return L.date=O,L.args=arguments,new D(L)},I=S;I.l=A,I.i=C,I.w=function(O,H){return T(O,{locale:H.$L,utc:H.$u,x:H.$x,$offset:H.$offset})};var D=function(){function O(L){this.$L=A(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[M]=!0}var H=O.prototype;return H.parse=function(L){this.$d=function(z){var k=z.date,F=z.utc;if(k===null)return new Date(NaN);if(I.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var W=k.match(v);if(W){var q=W[2]-1||0,Z=(W[7]||"0").substring(0,3);return F?new Date(Date.UTC(W[1],q,W[3]||1,W[4]||0,W[5]||0,W[6]||0,Z)):new Date(W[1],q,W[3]||1,W[4]||0,W[5]||0,W[6]||0,Z)}}return new Date(k)}(L),this.init()},H.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},H.$utils=function(){return I},H.isValid=function(){return this.$d.toString()!==m},H.isSame=function(L,z){var k=T(L);return this.startOf(z)<=k&&k<=this.endOf(z)},H.isAfter=function(L,z){return T(L)<this.startOf(z)},H.isBefore=function(L,z){return this.endOf(z)<T(L)},H.$g=function(L,z,k){return I.u(L)?this[z]:this.set(k,L)},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this.$d.getTime()},H.startOf=function(L,z){var k=this,F=!!I.u(z)||z,W=I.p(L),q=function(He,Ge){var me=I.w(k.$u?Date.UTC(k.$y,Ge,He):new Date(k.$y,Ge,He),k);return F?me:me.endOf(c)},Z=function(He,Ge){return I.w(k.toDate()[He].apply(k.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(Ge)),k)},se=this.$W,X=this.$M,ie=this.$D,ae="set"+(this.$u?"UTC":"");switch(W){case f:return F?q(1,0):q(31,11);case d:return F?q(1,X):q(0,X+1);case u:var ce=this.$locale().weekStart||0,we=(se<ce?se+7:se)-ce;return q(F?ie-we:ie+(6-we),X);case c:case p:return Z(ae+"Hours",0);case l:return Z(ae+"Minutes",1);case o:return Z(ae+"Seconds",2);case a:return Z(ae+"Milliseconds",3);default:return this.clone()}},H.endOf=function(L){return this.startOf(L,!1)},H.$set=function(L,z){var k,F=I.p(L),W="set"+(this.$u?"UTC":""),q=(k={},k[c]=W+"Date",k[p]=W+"Date",k[d]=W+"Month",k[f]=W+"FullYear",k[l]=W+"Hours",k[o]=W+"Minutes",k[a]=W+"Seconds",k[s]=W+"Milliseconds",k)[F],Z=F===c?this.$D+(z-this.$W):z;if(F===d||F===f){var se=this.clone().set(p,1);se.$d[q](Z),se.init(),this.$d=se.set(p,Math.min(this.$D,se.daysInMonth())).$d}else q&&this.$d[q](Z);return this.init(),this},H.set=function(L,z){return this.clone().$set(L,z)},H.get=function(L){return this[I.p(L)]()},H.add=function(L,z){var k,F=this;L=Number(L);var W=I.p(z),q=function(X){var ie=T(F);return I.w(ie.date(ie.date()+Math.round(X*L)),F)};if(W===d)return this.set(d,this.$M+L);if(W===f)return this.set(f,this.$y+L);if(W===c)return q(1);if(W===u)return q(7);var Z=(k={},k[o]=r,k[l]=i,k[a]=t,k)[W]||1,se=this.$d.getTime()+L*Z;return I.w(se,this)},H.subtract=function(L,z){return this.add(-1*L,z)},H.format=function(L){var z=this,k=this.$locale();if(!this.isValid())return k.invalidDate||m;var F=L||"YYYY-MM-DDTHH:mm:ssZ",W=I.z(this),q=this.$H,Z=this.$m,se=this.$M,X=k.weekdays,ie=k.months,ae=k.meridiem,ce=function(Ge,me,be,oe){return Ge&&(Ge[me]||Ge(z,F))||be[me].slice(0,oe)},we=function(Ge){return I.s(q%12||12,Ge,"0")},He=ae||function(Ge,me,be){var oe=Ge<12?"AM":"PM";return be?oe.toLowerCase():oe};return F.replace(g,function(Ge,me){return me||function(be){switch(be){case"YY":return String(z.$y).slice(-2);case"YYYY":return I.s(z.$y,4,"0");case"M":return se+1;case"MM":return I.s(se+1,2,"0");case"MMM":return ce(k.monthsShort,se,ie,3);case"MMMM":return ce(ie,se);case"D":return z.$D;case"DD":return I.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return ce(k.weekdaysMin,z.$W,X,2);case"ddd":return ce(k.weekdaysShort,z.$W,X,3);case"dddd":return X[z.$W];case"H":return String(q);case"HH":return I.s(q,2,"0");case"h":return we(1);case"hh":return we(2);case"a":return He(q,Z,!0);case"A":return He(q,Z,!1);case"m":return String(Z);case"mm":return I.s(Z,2,"0");case"s":return String(z.$s);case"ss":return I.s(z.$s,2,"0");case"SSS":return I.s(z.$ms,3,"0");case"Z":return W}return null}(Ge)||W.replace(":","")})},H.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},H.diff=function(L,z,k){var F,W=this,q=I.p(z),Z=T(L),se=(Z.utcOffset()-this.utcOffset())*r,X=this-Z,ie=function(){return I.m(W,Z)};switch(q){case f:F=ie()/12;break;case d:F=ie();break;case h:F=ie()/3;break;case u:F=(X-se)/6048e5;break;case c:F=(X-se)/864e5;break;case l:F=X/i;break;case o:F=X/r;break;case a:F=X/t;break;default:F=X}return k?F:I.a(F)},H.daysInMonth=function(){return this.endOf(d).$D},H.$locale=function(){return w[this.$L]},H.locale=function(L,z){if(!L)return this.$L;var k=this.clone(),F=A(L,z,!0);return F&&(k.$L=F),k},H.clone=function(){return I.w(this.$d,this)},H.toDate=function(){return new Date(this.valueOf())},H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toISOString=function(){return this.$d.toISOString()},H.toString=function(){return this.$d.toUTCString()},O}(),B=D.prototype;return T.prototype=B,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",f],["$D",p]].forEach(function(O){B[O[1]]=function(H){return this.$g(H,O[0],O[1])}}),T.extend=function(O,H){return O.$i||(O(H,D,T),O.$i=!0),T},T.locale=A,T.isDayjs=C,T.unix=function(O){return T(1e3*O)},T.en=w[x],T.Ls=w,T.p={},T})})(DK);var Qge=DK.exports;const xn=gu(Qge),t3=(n,e)=>[n>0?n-1:void 0,n,n<e?n+1:void 0],Vf=n=>Array.from(Array.from({length:n}).keys()),LK=n=>n.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),kK=n=>n.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),WB=function(n,e){const t=Zf(n),r=Zf(e);return t&&r?n.getTime()===e.getTime():!t&&!r?n===e:!1},qB=function(n,e){const t=xt(n),r=xt(e);return t&&r?n.length!==e.length?!1:n.every((i,s)=>WB(i,e[s])):!t&&!r?WB(n,e):!1},KB=function(n,e,t){const r=Uo(e)||e==="x"?xn(n).locale(t):xn(n,e).locale(t);return r.isValid()?r:void 0},YB=function(n,e,t){return Uo(e)?n:e==="x"?+n:xn(n).locale(t).format(e)},n3=(n,e)=>{var t;const r=[],i=e==null?void 0:e();for(let s=0;s<n;s++)r.push((t=i==null?void 0:i.includes(s))!=null?t:!1);return r},zS=n=>xt(n)?n.map(e=>e.toDate()):n.toDate(),Jge=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return Vf(e).map((r,i)=>t-(e-i-1))},eye=n=>{const e=n.daysInMonth();return Vf(e).map((t,r)=>r+1)},tye=n=>Vf(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),nye=Tt({selectedDay:{type:Fe(Object)},range:{type:Fe(Array)},date:{type:Fe(Object),required:!0},hideHeader:{type:Boolean}}),rye={pick:n=>Mn(n)};var OK={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){return function(t,r,i){var s=r.prototype,a=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,h,f,p,m){var v=d.name?d:d.$locale(),g=a(v[h]),_=a(v[f]),b=g||_.map(function(x){return x.slice(0,p)});if(!m)return b;var S=v.weekStart;return b.map(function(x,w){return b[(w+(S||0))%7]})},l=function(){return i.Ls[i.locale()]},c=function(d,h){return d.formats[h]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,v){return m||v.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):o(d,"months")},monthsShort:function(h){return h?h.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):o(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return u.bind(this)()},i.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},i.months=function(){return o(l(),"months")},i.monthsShort=function(){return o(l(),"monthsShort","months",3)},i.weekdays=function(d){return o(l(),"weekdays",null,null,d)},i.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},i.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(OK);var iye=OK.exports;const NK=gu(iye),sye=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],r3=["sun","mon","tue","wed","thu","fri","sat"],aye=(n,e)=>{xn.extend(NK);const t=xn.localeData().firstDayOfWeek(),{t:r,lang:i}=sr(),s=xn().locale(i.value),a=U(()=>!!n.range&&!!n.range.length),o=U(()=>{let h=[];if(a.value){const[f,p]=n.range,m=Vf(p.date()-f.date()+1).map(_=>({text:f.date()+_,type:"current"}));let v=m.length%7;v=v===0?0:7-v;const g=Vf(v).map((_,b)=>({text:b+1,type:"next"}));h=m.concat(g)}else{const f=n.date.startOf("month").day(),p=Jge(n.date,(f-t+7)%7).map(_=>({text:_,type:"prev"})),m=eye(n.date).map(_=>({text:_,type:"current"}));h=[...p,...m];const v=7-(h.length%7||7),g=Vf(v).map((_,b)=>({text:b+1,type:"next"}));h=h.concat(g)}return tye(h)}),l=U(()=>{const h=t;return h===0?r3.map(f=>r(`el.datepicker.weeks.${f}`)):r3.slice(h).concat(r3.slice(0,h)).map(f=>r(`el.datepicker.weeks.${f}`))}),c=(h,f)=>{switch(f){case"prev":return n.date.startOf("month").subtract(1,"month").date(h);case"next":return n.date.startOf("month").add(1,"month").date(h);case"current":return n.date.date(h)}};return{now:s,isInRange:a,rows:o,weekDays:l,getFormattedDate:c,handlePickDay:({text:h,type:f})=>{const p=c(h,f);e("pick",p)},getSlotData:({text:h,type:f})=>{const p=c(h,f);return{isSelected:p.isSame(n.selectedDay),type:`${f}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},oye=Ie({name:"DateTable"}),lye=Ie({...oye,props:nye,emits:rye,setup(n,{expose:e,emit:t}){const r=n,{isInRange:i,now:s,rows:a,weekDays:o,getFormattedDate:l,handlePickDay:c,getSlotData:u}=aye(r,t),d=gt("calendar-table"),h=gt("calendar-day"),f=({text:p,type:m})=>{const v=[m];if(m==="current"){const g=l(p,m);g.isSame(r.selectedDay,"day")&&v.push(h.is("selected")),g.isSame(s,"day")&&v.push(h.is("today"))}return v};return e({getFormattedDate:l}),(p,m)=>($(),ue("table",{class:Y([y(d).b(),y(d).is("range",y(i))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?Xe("v-if",!0):($(),ue("thead",{key:0},[ye("tr",null,[($(!0),ue(Bt,null,Fn(y(o),v=>($(),ue("th",{key:v,scope:"col"},Ct(v),1))),128))])])),ye("tbody",null,[($(!0),ue(Bt,null,Fn(y(a),(v,g)=>($(),ue("tr",{key:g,class:Y({[y(d).e("row")]:!0,[y(d).em("row","hide-border")]:g===0&&p.hideHeader})},[($(!0),ue(Bt,null,Fn(v,(_,b)=>($(),ue("td",{key:b,class:Y(f(_)),onClick:S=>y(c)(_)},[ye("div",{class:Y(y(h).b())},[Ye(p.$slots,"date-cell",{data:y(u)(_)},()=>[ye("span",null,Ct(_.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var XB=Et(lye,[["__file","date-table.vue"]]);const cye=(n,e)=>{const t=n.endOf("month"),r=e.startOf("month"),s=t.isSame(r,"week")?r.add(1,"week"):r;return[[n,t],[s.startOf("week"),e]]},uye=(n,e)=>{const t=n.endOf("month"),r=n.add(1,"month").startOf("month"),i=t.isSame(r,"week")?r.add(1,"week"):r,s=i.endOf("month"),a=e.startOf("month"),o=s.isSame(a,"week")?a.add(1,"week"):a;return[[n,t],[i.startOf("week"),s],[o.startOf("week"),e]]},dye=(n,e,t)=>{const{lang:r}=sr(),i=ne(),s=xn().locale(r.value),a=U({get(){return n.modelValue?l.value:i.value},set(v){if(!v)return;i.value=v;const g=v.toDate();e(is,g),e(mn,g)}}),o=U(()=>{if(!n.range||!xt(n.range)||n.range.length!==2||n.range.some(b=>!Zf(b)))return[];const v=n.range.map(b=>xn(b).locale(r.value)),[g,_]=v;return g.isAfter(_)?[]:g.isSame(_,"month")?f(g,_):g.add(1,"month").month()!==_.month()?[]:f(g,_)}),l=U(()=>n.modelValue?xn(n.modelValue).locale(r.value):a.value||(o.value.length?o.value[0][0]:s)),c=U(()=>l.value.subtract(1,"month").date(1)),u=U(()=>l.value.add(1,"month").date(1)),d=U(()=>l.value.subtract(1,"year").date(1)),h=U(()=>l.value.add(1,"year").date(1)),f=(v,g)=>{const _=v.startOf("week"),b=g.endOf("week"),S=_.get("month"),x=b.get("month");return S===x?[[_,b]]:(S+1)%12===x?cye(_,b):S+2===x||(S+1)%11===x?uye(_,b):[]},p=v=>{a.value=v};return{calculateValidatedDateRange:f,date:l,realSelectedDay:a,pickDay:p,selectDate:v=>{const _={"prev-month":c.value,"next-month":u.value,"prev-year":d.value,"next-year":h.value,today:s}[v];_.isSame(l.value,"day")||p(_)},validatedRange:o}},fye=n=>xt(n)&&n.length===2&&n.every(e=>Zf(e)),hye=Tt({modelValue:{type:Date},range:{type:Fe(Array),validator:fye}}),pye={[mn]:n=>Zf(n),[is]:n=>Zf(n)},mye="ElCalendar",vye=Ie({name:mye}),gye=Ie({...vye,props:hye,emits:pye,setup(n,{expose:e,emit:t}){const r=n,i=gt("calendar"),{calculateValidatedDateRange:s,date:a,pickDay:o,realSelectedDay:l,selectDate:c,validatedRange:u}=dye(r,t),{t:d}=sr(),h=U(()=>{const f=`el.datepicker.month${a.value.format("M")}`;return`${a.value.year()} ${d("el.datepicker.year")} ${d(f)}`});return e({selectedDay:l,pickDay:o,selectDate:c,calculateValidatedDateRange:s}),(f,p)=>($(),ue("div",{class:Y(y(i).b())},[ye("div",{class:Y(y(i).e("header"))},[Ye(f.$slots,"header",{date:y(h)},()=>[ye("div",{class:Y(y(i).e("title"))},Ct(y(h)),3),y(u).length===0?($(),ue("div",{key:0,class:Y(y(i).e("button-group"))},[xe(y(PK),null,{default:Re(()=>[xe(y(ks),{size:"small",onClick:m=>y(c)("prev-month")},{default:Re(()=>[Bn(Ct(y(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),xe(y(ks),{size:"small",onClick:m=>y(c)("today")},{default:Re(()=>[Bn(Ct(y(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),xe(y(ks),{size:"small",onClick:m=>y(c)("next-month")},{default:Re(()=>[Bn(Ct(y(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):Xe("v-if",!0)])],2),y(u).length===0?($(),ue("div",{key:0,class:Y(y(i).e("body"))},[xe(XB,{date:y(a),"selected-day":y(l),onPick:y(o)},wo({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:Re(m=>[Ye(f.$slots,"date-cell",Vo(nu(m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):($(),ue("div",{key:1,class:Y(y(i).e("body"))},[($(!0),ue(Bt,null,Fn(y(u),(m,v)=>($(),rt(XB,{key:v,date:m[0],"selected-day":y(l),range:m,"hide-header":v!==0,onPick:y(o)},wo({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:Re(g=>[Ye(f.$slots,"date-cell",Vo(nu(g)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var yye=Et(gye,[["__file","calendar.vue"]]);const bye=bn(yye),_ye=Tt({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Fe([String,Object,Array]),default:""},headerClass:String,bodyClass:String,footerClass:String,shadow:{type:String,values:["always","hover","never"],default:void 0}}),Sye=Ie({name:"ElCard"}),xye=Ie({...Sye,props:_ye,setup(n){const e=Ug("card"),t=gt("card");return(r,i)=>{var s;return $(),ue("div",{class:Y([y(t).b(),y(t).is(`${r.shadow||((s=y(e))==null?void 0:s.shadow)||"always"}-shadow`)])},[r.$slots.header||r.header?($(),ue("div",{key:0,class:Y([y(t).e("header"),r.headerClass])},[Ye(r.$slots,"header",{},()=>[Bn(Ct(r.header),1)])],2)):Xe("v-if",!0),ye("div",{class:Y([y(t).e("body"),r.bodyClass]),style:Xt(r.bodyStyle)},[Ye(r.$slots,"default")],6),r.$slots.footer||r.footer?($(),ue("div",{key:1,class:Y([y(t).e("footer"),r.footerClass])},[Ye(r.$slots,"footer",{},()=>[Bn(Ct(r.footer),1)])],2)):Xe("v-if",!0)],2)}}});var wye=Et(xye,[["__file","card.vue"]]);const Cye=bn(wye),Mye=Tt({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),Tye={change:(n,e)=>[n,e].every(en)},BK=Symbol("carouselContextKey"),UI="ElCarouselItem";var pl=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(pl||{});function HI(n){return Kr(n)&&n.type===Bt}function Aye(n){return Kr(n)&&n.type===Yi}function Eye(n){return Kr(n)&&!HI(n)&&!Aye(n)}const Iye=n=>{if(!Kr(n))return{};const e=n.props||{},t=(Kr(n.type)?n.type.props:void 0)||{},r={};return Object.keys(t).forEach(i=>{fr(t[i],"default")&&(r[i]=t[i].default)}),Object.keys(e).forEach(i=>{r[Ka(i)]=e[i]}),r},Rye=n=>{if(!xt(n)||n.length>1)throw new Error("expect to receive a single Vue element child");return n[0]},Wc=n=>{const e=xt(n)?n:[n],t=[];return e.forEach(r=>{var i;xt(r)?t.push(...Wc(r)):Kr(r)&&((i=r.component)!=null&&i.subTree)?t.push(r,...Wc(r.component.subTree)):Kr(r)&&xt(r.children)?t.push(...Wc(r.children)):Kr(r)&&r.shapeFlag===2?t.push(...Wc(r.type())):t.push(r)}),t};function FK(n){return n.some(e=>Kr(e)?!(e.type===Yi||e.type===Bt&&!FK(e.children)):!0)?n:null}const Pye=(n,e,t)=>Wc(n.subTree).filter(s=>{var a;return Kr(s)&&((a=s.type)==null?void 0:a.name)===e&&!!s.component}).map(s=>s.component.uid).map(s=>t[s]).filter(s=>!!s),lT=(n,e)=>{const t=Pr({}),r=Pr([]),i=new WeakMap,s=u=>{t.value[u.uid]=u,Yw(t),Rn(()=>{const d=u.getVnode().el,h=d.parentNode;if(!i.has(h)){i.set(h,[]);const f=h.insertBefore.bind(h);h.insertBefore=(p,m)=>(i.get(h).some(g=>p===g||m===g)&&Yw(t),f(p,m))}i.get(h).push(d)})},a=u=>{delete t.value[u.uid],Yw(t);const d=u.getVnode().el,h=d.parentNode,f=i.get(h),p=f.indexOf(d);f.splice(p,1)},o=()=>{r.value=Pye(n,e,t.value)},l=u=>u.render();return{children:r,addChild:s,removeChild:a,ChildrenSorter:Ie({setup(u,{slots:d}){return()=>(o(),d.default?tn(l,{render:d.default}):null)}})}},jB=300,Dye=(n,e,t)=>{const{children:r,addChild:i,removeChild:s,ChildrenSorter:a}=lT(Dn(),UI),o=es(),l=ne(-1),c=ne(null),u=ne(!1),d=ne(),h=ne(0),f=ne(!0),p=U(()=>n.arrow!=="never"&&!y(g)),m=U(()=>r.value.some(X=>X.props.label.toString().length>0)),v=U(()=>n.type==="card"),g=U(()=>n.direction==="vertical"),_=U(()=>n.height!=="auto"?{height:n.height}:{height:`${h.value}px`,overflow:"hidden"}),b=Np(X=>{A(X)},jB,{trailing:!0}),S=Np(X=>{z(X)},jB),x=X=>f.value?l.value<=1?X<=1:X>1:!0;function w(){c.value&&(clearInterval(c.value),c.value=null)}function M(){n.interval<=0||!n.autoplay||c.value||(c.value=setInterval(()=>C(),n.interval))}const C=()=>{l.value<r.value.length-1?l.value=l.value+1:n.loop&&(l.value=0)};function A(X){if(Wt(X)){const ce=r.value.filter(we=>we.props.name===X);ce.length>0&&(X=r.value.indexOf(ce[0]))}if(X=Number(X),Number.isNaN(X)||X!==Math.floor(X))return;const ie=r.value.length,ae=l.value;X<0?l.value=n.loop?ie-1:0:X>=ie?l.value=n.loop?0:ie-1:l.value=X,ae===l.value&&T(ae),W()}function T(X){r.value.forEach((ie,ae)=>{ie.translateItem(ae,l.value,X)})}function I(X,ie){var ae,ce,we,He;const Ge=y(r),me=Ge.length;if(me===0||!X.states.inStage)return!1;const be=ie+1,oe=ie-1,j=me-1,ke=Ge[j].states.active,ze=Ge[0].states.active,Ve=(ce=(ae=Ge[be])==null?void 0:ae.states)==null?void 0:ce.active,Le=(He=(we=Ge[oe])==null?void 0:we.states)==null?void 0:He.active;return ie===j&&ze||Ve?"left":ie===0&&ke||Le?"right":!1}function D(){u.value=!0,n.pauseOnHover&&w()}function B(){u.value=!1,M()}function O(X){y(g)||r.value.forEach((ie,ae)=>{X===I(ie,ae)&&(ie.states.hover=!0)})}function H(){y(g)||r.value.forEach(X=>{X.states.hover=!1})}function L(X){l.value=X}function z(X){n.trigger==="hover"&&X!==l.value&&(l.value=X)}function k(){A(l.value-1)}function F(){A(l.value+1)}function W(){w(),n.pauseOnHover||M()}function q(X){n.height==="auto"&&(h.value=X)}function Z(){var X;const ie=(X=o.default)==null?void 0:X.call(o);if(!ie)return null;const ce=Wc(ie).filter(we=>Kr(we)&&we.type.name===UI);return(ce==null?void 0:ce.length)===2&&n.loop&&!v.value?(f.value=!0,ce):(f.value=!1,null)}ct(()=>l.value,(X,ie)=>{T(ie),f.value&&(X=X%2,ie=ie%2),ie>-1&&e(Hn,X,ie)}),ct(()=>n.autoplay,X=>{X?M():w()}),ct(()=>n.loop,()=>{A(l.value)}),ct(()=>n.interval,()=>{W()});const se=Pr();return Rn(()=>{ct(()=>r.value,()=>{r.value.length>0&&A(n.initialIndex)},{immediate:!0}),se.value=fi(d.value,()=>{T()}),M()}),br(()=>{w(),d.value&&se.value&&se.value.stop()}),jn(BK,{root:d,isCardType:v,isVertical:g,items:r,loop:n.loop,cardScale:n.cardScale,addItem:i,removeItem:s,setActiveItem:A,setContainerHeight:q}),{root:d,activeIndex:l,arrowDisplay:p,hasLabel:m,hover:u,isCardType:v,items:r,isVertical:g,containerStyle:_,isItemsTwoLength:f,handleButtonEnter:O,handleButtonLeave:H,handleIndicatorClick:L,handleMouseEnter:D,handleMouseLeave:B,setActiveItem:A,prev:k,next:F,PlaceholderItem:Z,isTwoLengthShow:x,ItemsSorter:a,throttledArrowClick:b,throttledIndicatorHover:S}},Lye="ElCarousel",kye=Ie({name:Lye}),Oye=Ie({...kye,props:Mye,emits:Tye,setup(n,{expose:e,emit:t}){const r=n,{root:i,activeIndex:s,arrowDisplay:a,hasLabel:o,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:h,handleButtonEnter:f,handleButtonLeave:p,handleIndicatorClick:m,handleMouseEnter:v,handleMouseLeave:g,setActiveItem:_,prev:b,next:S,PlaceholderItem:x,isTwoLengthShow:w,ItemsSorter:M,throttledArrowClick:C,throttledIndicatorHover:A}=Dye(r,t),T=gt("carousel"),{t:I}=sr(),D=U(()=>{const L=[T.b(),T.m(r.direction)];return y(c)&&L.push(T.m("card")),L}),B=U(()=>{const L=[T.e("indicators"),T.em("indicators",r.direction)];return y(o)&&L.push(T.em("indicators","labels")),r.indicatorPosition==="outside"&&L.push(T.em("indicators","outside")),y(d)&&L.push(T.em("indicators","right")),L});function O(L){if(!r.motionBlur)return;const z=y(d)?`${T.namespace.value}-transitioning-vertical`:`${T.namespace.value}-transitioning`;L.currentTarget.classList.add(z)}function H(L){if(!r.motionBlur)return;const z=y(d)?`${T.namespace.value}-transitioning-vertical`:`${T.namespace.value}-transitioning`;L.currentTarget.classList.remove(z)}return e({activeIndex:s,setActiveItem:_,prev:b,next:S}),(L,z)=>($(),ue("div",{ref_key:"root",ref:i,class:Y(y(D)),onMouseenter:an(y(v),["stop"]),onMouseleave:an(y(g),["stop"])},[y(a)?($(),rt(Os,{key:0,name:"carousel-arrow-left",persisted:""},{default:Re(()=>[Cn(ye("button",{type:"button",class:Y([y(T).e("arrow"),y(T).em("arrow","left")]),"aria-label":y(I)("el.carousel.leftArrow"),onMouseenter:k=>y(f)("left"),onMouseleave:y(p),onClick:an(k=>y(C)(y(s)-1),["stop"])},[xe(y(zt),null,{default:Re(()=>[xe(y(bd))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[cr,(L.arrow==="always"||y(l))&&(r.loop||y(s)>0)]])]),_:1})):Xe("v-if",!0),y(a)?($(),rt(Os,{key:1,name:"carousel-arrow-right",persisted:""},{default:Re(()=>[Cn(ye("button",{type:"button",class:Y([y(T).e("arrow"),y(T).em("arrow","right")]),"aria-label":y(I)("el.carousel.rightArrow"),onMouseenter:k=>y(f)("right"),onMouseleave:y(p),onClick:an(k=>y(C)(y(s)+1),["stop"])},[xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[cr,(L.arrow==="always"||y(l))&&(r.loop||y(s)<y(u).length-1)]])]),_:1})):Xe("v-if",!0),ye("div",{class:Y(y(T).e("container")),style:Xt(y(h)),onTransitionstart:O,onTransitionend:H},[xe(y(x)),Ye(L.$slots,"default")],38),xe(y(M),null,{default:Re(()=>[L.indicatorPosition!=="none"?($(),ue("ul",{key:0,class:Y(y(B))},[($(!0),ue(Bt,null,Fn(y(u),(k,F)=>Cn(($(),ue("li",{key:F,class:Y([y(T).e("indicator"),y(T).em("indicator",L.direction),y(T).is("active",F===y(s))]),onMouseenter:W=>y(A)(F),onClick:an(W=>y(m)(F),["stop"])},[ye("button",{class:Y(y(T).e("button")),"aria-label":y(I)("el.carousel.indicator",{index:F+1})},[y(o)?($(),ue("span",{key:0},Ct(k.props.label),1)):Xe("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[cr,y(w)(F)]])),128))],2)):Xe("v-if",!0)]),_:1}),r.motionBlur?($(),ue("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[ye("defs",null,[ye("filter",{id:"elCarouselHorizontal"},[ye("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),ye("filter",{id:"elCarouselVertical"},[ye("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):Xe("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var Nye=Et(Oye,[["__file","carousel.vue"]]);const Bye=Tt({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Fye=n=>{const e=Lt(BK),t=Dn(),r=ne(),i=ne(!1),s=ne(0),a=ne(1),o=ne(!1),l=ne(!1),c=ne(!1),u=ne(!1),{isCardType:d,isVertical:h,cardScale:f}=e;function p(S,x,w){const M=w-1,C=x-1,A=x+1,T=w/2;return x===0&&S===M?-1:x===M&&S===0?w:S<C&&x-S>=T?w+1:S>A&&S-x>=T?-2:S}function m(S,x){var w,M;const C=y(h)?((w=e.root.value)==null?void 0:w.offsetHeight)||0:((M=e.root.value)==null?void 0:M.offsetWidth)||0;return c.value?C*((2-f)*(S-x)+1)/4:S<x?-(1+f)*C/4:(3+f)*C/4}function v(S,x,w){const M=e.root.value;return M?((w?M.offsetHeight:M.offsetWidth)||0)*(S-x):0}const g=(S,x,w)=>{var M;const C=y(d),A=(M=e.items.value.length)!=null?M:Number.NaN,T=S===x;!C&&!nr(w)&&(u.value=T||S===w),!T&&A>2&&e.loop&&(S=p(S,x,A));const I=y(h);o.value=T,C?(c.value=Math.round(Math.abs(S-x))<=1,s.value=m(S,x),a.value=y(o)?1:f):s.value=v(S,x,I),l.value=!0,T&&r.value&&e.setContainerHeight(r.value.offsetHeight)};function _(){if(e&&y(d)){const S=e.items.value.findIndex(({uid:x})=>x===t.uid);e.setActiveItem(S)}}const b={props:n,states:pr({hover:i,translate:s,scale:a,active:o,ready:l,inStage:c,animating:u}),uid:t.uid,getVnode:()=>t.vnode,translateItem:g};return e.addItem(b),br(()=>{e.removeItem(b)}),{carouselItemRef:r,active:o,animating:u,hover:i,inStage:c,isVertical:h,translate:s,isCardType:d,scale:a,ready:l,handleItemClick:_}},zye=Ie({name:UI}),Uye=Ie({...zye,props:Bye,setup(n){const e=n,t=gt("carousel"),{carouselItemRef:r,active:i,animating:s,hover:a,inStage:o,isVertical:l,translate:c,isCardType:u,scale:d,ready:h,handleItemClick:f}=Fye(e),p=U(()=>[t.e("item"),t.is("active",i.value),t.is("in-stage",o.value),t.is("hover",a.value),t.is("animating",s.value),{[t.em("item","card")]:u.value,[t.em("item","card-vertical")]:u.value&&l.value}]),m=U(()=>{const g=`${`translate${y(l)?"Y":"X"}`}(${y(c)}px)`,_=`scale(${y(d)})`;return{transform:[g,_].join(" ")}});return(v,g)=>Cn(($(),ue("div",{ref_key:"carouselItemRef",ref:r,class:Y(y(p)),style:Xt(y(m)),onClick:y(f)},[y(u)?Cn(($(),ue("div",{key:0,class:Y(y(t).e("mask"))},null,2)),[[cr,!y(i)]]):Xe("v-if",!0),Ye(v.$slots,"default")],14,["onClick"])),[[cr,y(h)]])}});var zK=Et(Uye,[["__file","carousel-item.vue"]]);const Hye=bn(Nye,{CarouselItem:zK}),Vye=pi(zK),UK={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:as,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...aa(["ariaControls"])},HK={[mn]:n=>Wt(n)||en(n)||Cr(n),change:n=>Wt(n)||en(n)||Cr(n)},$g=Symbol("checkboxGroupContextKey"),$ye=({model:n,isChecked:e})=>{const t=Lt($g,void 0),r=U(()=>{var s,a;const o=(s=t==null?void 0:t.max)==null?void 0:s.value,l=(a=t==null?void 0:t.min)==null?void 0:a.value;return!nr(o)&&n.value.length>=o&&!e.value||!nr(l)&&n.value.length<=l&&e.value});return{isDisabled:la(U(()=>(t==null?void 0:t.disabled.value)||r.value)),isLimitDisabled:r}},Gye=(n,{model:e,isLimitExceeded:t,hasOwnLabel:r,isDisabled:i,isLabeledByFormItem:s})=>{const a=Lt($g,void 0),{formItem:o}=oa(),{emit:l}=Dn();function c(p){var m,v,g,_;return[!0,n.trueValue,n.trueLabel].includes(p)?(v=(m=n.trueValue)!=null?m:n.trueLabel)!=null?v:!0:(_=(g=n.falseValue)!=null?g:n.falseLabel)!=null?_:!1}function u(p,m){l(Hn,c(p),m)}function d(p){if(t.value)return;const m=p.target;l(Hn,c(m.checked),p)}async function h(p){t.value||!r.value&&!i.value&&s.value&&(p.composedPath().some(g=>g.tagName==="LABEL")||(e.value=c([!1,n.falseValue,n.falseLabel].includes(e.value)),await Ut(),u(e.value,p)))}const f=U(()=>(a==null?void 0:a.validateEvent)||n.validateEvent);return ct(()=>n.modelValue,()=>{f.value&&(o==null||o.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:h}},Wye=n=>{const e=ne(!1),{emit:t}=Dn(),r=Lt($g,void 0),i=U(()=>nr(r)===!1),s=ne(!1),a=U({get(){var o,l;return i.value?(o=r==null?void 0:r.modelValue)==null?void 0:o.value:(l=n.modelValue)!=null?l:e.value},set(o){var l,c;i.value&&xt(o)?(s.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&o.length>(r==null?void 0:r.max.value)&&o.length>a.value.length,s.value===!1&&((c=r==null?void 0:r.changeEvent)==null||c.call(r,o))):(t(mn,o),e.value=o)}});return{model:a,isGroup:i,isLimitExceeded:s}},qye=(n,e,{model:t})=>{const r=Lt($g,void 0),i=ne(!1),s=U(()=>vo(n.value)?n.label:n.value),a=U(()=>{const u=t.value;return Cr(u)?u:xt(u)?Mn(s.value)?u.map(zr).some(d=>rs(d,s.value)):u.map(zr).includes(s.value):u!=null?u===n.trueValue||u===n.trueLabel:!!u}),o=Qi(U(()=>{var u;return(u=r==null?void 0:r.size)==null?void 0:u.value}),{prop:!0}),l=Qi(U(()=>{var u;return(u=r==null?void 0:r.size)==null?void 0:u.value})),c=U(()=>!!e.default||!vo(s.value));return{checkboxButtonSize:o,isChecked:a,isFocused:i,checkboxSize:l,hasOwnLabel:c,actualValue:s}},VK=(n,e)=>{const{formItem:t}=oa(),{model:r,isGroup:i,isLimitExceeded:s}=Wye(n),{isFocused:a,isChecked:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=qye(n,e,{model:r}),{isDisabled:h}=$ye({model:r,isChecked:o}),{inputId:f,isLabeledByFormItem:p}=Vl(n,{formItemContext:t,disableIdGeneration:u,disableIdManagement:i}),{handleChange:m,onClickRoot:v}=Gye(n,{model:r,isLimitExceeded:s,hasOwnLabel:u,isDisabled:h,isLabeledByFormItem:p});return(()=>{function _(){var b,S;xt(r.value)&&!r.value.includes(d.value)?r.value.push(d.value):r.value=(S=(b=n.trueValue)!=null?b:n.trueLabel)!=null?S:!0}n.checked&&_()})(),ud({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},U(()=>i.value&&vo(n.value))),ud({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},U(()=>!!n.trueLabel)),ud({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},U(()=>!!n.falseLabel)),{inputId:f,isLabeledByFormItem:p,isChecked:o,isDisabled:h,isFocused:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:r,actualValue:d,handleChange:m,onClickRoot:v}},Kye=Ie({name:"ElCheckbox"}),Yye=Ie({...Kye,props:UK,emits:HK,setup(n){const e=n,t=es(),{inputId:r,isLabeledByFormItem:i,isChecked:s,isDisabled:a,isFocused:o,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:h,onClickRoot:f}=VK(e,t),p=gt("checkbox"),m=U(()=>[p.b(),p.m(l.value),p.is("disabled",a.value),p.is("bordered",e.border),p.is("checked",s.value)]),v=U(()=>[p.e("input"),p.is("disabled",a.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",o.value)]);return(g,_)=>($(),rt(Ln(!y(c)&&y(i)?"span":"label"),{class:Y(y(m)),"aria-controls":g.indeterminate?g.ariaControls:null,onClick:y(f)},{default:Re(()=>{var b,S,x,w;return[ye("span",{class:Y(y(v))},[g.trueValue||g.falseValue||g.trueLabel||g.falseLabel?Cn(($(),ue("input",{key:0,id:y(r),"onUpdate:modelValue":M=>qr(u)?u.value=M:null,class:Y(y(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,name:g.name,tabindex:g.tabindex,disabled:y(a),"true-value":(S=(b=g.trueValue)!=null?b:g.trueLabel)!=null?S:!0,"false-value":(w=(x=g.falseValue)!=null?x:g.falseLabel)!=null?w:!1,onChange:y(h),onFocus:M=>o.value=!0,onBlur:M=>o.value=!1,onClick:an(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[J2,y(u)]]):Cn(($(),ue("input",{key:1,id:y(r),"onUpdate:modelValue":M=>qr(u)?u.value=M:null,class:Y(y(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,disabled:y(a),value:y(d),name:g.name,tabindex:g.tabindex,onChange:y(h),onFocus:M=>o.value=!0,onBlur:M=>o.value=!1,onClick:an(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[J2,y(u)]]),ye("span",{class:Y(y(p).e("inner"))},null,2)],2),y(c)?($(),ue("span",{key:0,class:Y(y(p).e("label"))},[Ye(g.$slots,"default"),g.$slots.default?Xe("v-if",!0):($(),ue(Bt,{key:0},[Bn(Ct(g.label),1)],64))],2)):Xe("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var Xye=Et(Yye,[["__file","checkbox.vue"]]);const jye=Ie({name:"ElCheckboxButton"}),Zye=Ie({...jye,props:UK,emits:HK,setup(n){const e=n,t=es(),{isFocused:r,isChecked:i,isDisabled:s,checkboxButtonSize:a,model:o,actualValue:l,handleChange:c}=VK(e,t),u=Lt($g,void 0),d=gt("checkbox"),h=U(()=>{var p,m,v,g;const _=(m=(p=u==null?void 0:u.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:_,borderColor:_,color:(g=(v=u==null?void 0:u.textColor)==null?void 0:v.value)!=null?g:"",boxShadow:_?`-1px 0 0 0 ${_}`:void 0}}),f=U(()=>[d.b("button"),d.bm("button",a.value),d.is("disabled",s.value),d.is("checked",i.value),d.is("focus",r.value)]);return(p,m)=>{var v,g,_,b;return $(),ue("label",{class:Y(y(f))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Cn(($(),ue("input",{key:0,"onUpdate:modelValue":S=>qr(o)?o.value=S:null,class:Y(y(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:y(s),"true-value":(g=(v=p.trueValue)!=null?v:p.trueLabel)!=null?g:!0,"false-value":(b=(_=p.falseValue)!=null?_:p.falseLabel)!=null?b:!1,onChange:y(c),onFocus:S=>r.value=!0,onBlur:S=>r.value=!1,onClick:an(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[J2,y(o)]]):Cn(($(),ue("input",{key:1,"onUpdate:modelValue":S=>qr(o)?o.value=S:null,class:Y(y(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:y(s),value:y(l),onChange:y(c),onFocus:S=>r.value=!0,onBlur:S=>r.value=!1,onClick:an(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[J2,y(o)]]),p.$slots.default||p.label?($(),ue("span",{key:2,class:Y(y(d).be("button","inner")),style:Xt(y(i)?y(h):void 0)},[Ye(p.$slots,"default",{},()=>[Bn(Ct(p.label),1)])],6)):Xe("v-if",!0)],2)}}});var $K=Et(Zye,[["__file","checkbox-button.vue"]]);const Qye=Tt({modelValue:{type:Fe(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:as,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...aa(["ariaLabel"])}),Jye={[mn]:n=>xt(n),change:n=>xt(n)},e1e=Ie({name:"ElCheckboxGroup"}),t1e=Ie({...e1e,props:Qye,emits:Jye,setup(n,{emit:e}){const t=n,r=gt("checkbox"),{formItem:i}=oa(),{inputId:s,isLabeledByFormItem:a}=Vl(t,{formItemContext:i}),o=async c=>{e(mn,c),await Ut(),e(Hn,c)},l=U({get(){return t.modelValue},set(c){o(c)}});return jn($g,{...Cl(bs(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:o}),ct(()=>t.modelValue,(c,u)=>{t.validateEvent&&!rs(c,u)&&(i==null||i.validate("change").catch(d=>void 0))}),(c,u)=>{var d;return $(),rt(Ln(c.tag),{id:y(s),class:Y(y(r).b("group")),role:"group","aria-label":y(a)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":y(a)?(d=y(i))==null?void 0:d.labelId:void 0},{default:Re(()=>[Ye(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var GK=Et(t1e,[["__file","checkbox-group.vue"]]);const Ul=bn(Xye,{CheckboxButton:$K,CheckboxGroup:GK}),n1e=pi($K),WK=pi(GK),qK=Tt({modelValue:{type:[String,Number,Boolean],default:void 0},size:as,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),r1e=Tt({...qK,border:Boolean}),KK={[mn]:n=>Wt(n)||en(n)||Cr(n),[Hn]:n=>Wt(n)||en(n)||Cr(n)},YK=Symbol("radioGroupKey"),XK=(n,e)=>{const t=ne(),r=Lt(YK,void 0),i=U(()=>!!r),s=U(()=>vo(n.value)?n.label:n.value),a=U({get(){return i.value?r.modelValue:n.modelValue},set(d){i.value?r.changeEvent(d):e&&e(mn,d),t.value.checked=n.modelValue===s.value}}),o=Qi(U(()=>r==null?void 0:r.size)),l=la(U(()=>r==null?void 0:r.disabled)),c=ne(!1),u=U(()=>l.value||i.value&&a.value!==s.value?-1:0);return ud({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},U(()=>i.value&&vo(n.value))),{radioRef:t,isGroup:i,radioGroup:r,focus:c,size:o,disabled:l,tabIndex:u,modelValue:a,actualValue:s}},i1e=Ie({name:"ElRadio"}),s1e=Ie({...i1e,props:r1e,emits:KK,setup(n,{emit:e}){const t=n,r=gt("radio"),{radioRef:i,radioGroup:s,focus:a,size:o,disabled:l,modelValue:c,actualValue:u}=XK(t,e);function d(){Ut(()=>e(Hn,c.value))}return(h,f)=>{var p;return $(),ue("label",{class:Y([y(r).b(),y(r).is("disabled",y(l)),y(r).is("focus",y(a)),y(r).is("bordered",h.border),y(r).is("checked",y(c)===y(u)),y(r).m(y(o))])},[ye("span",{class:Y([y(r).e("input"),y(r).is("disabled",y(l)),y(r).is("checked",y(c)===y(u))])},[Cn(ye("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":m=>qr(c)?c.value=m:null,class:Y(y(r).e("original")),value:y(u),name:h.name||((p=y(s))==null?void 0:p.name),disabled:y(l),checked:y(c)===y(u),type:"radio",onFocus:m=>a.value=!0,onBlur:m=>a.value=!1,onChange:d,onClick:an(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[IW,y(c)]]),ye("span",{class:Y(y(r).e("inner"))},null,2)],2),ye("span",{class:Y(y(r).e("label")),onKeydown:an(()=>{},["stop"])},[Ye(h.$slots,"default",{},()=>[Bn(Ct(h.label),1)])],42,["onKeydown"])],2)}}});var a1e=Et(s1e,[["__file","radio.vue"]]);const o1e=Tt({...qK}),l1e=Ie({name:"ElRadioButton"}),c1e=Ie({...l1e,props:o1e,setup(n){const e=n,t=gt("radio"),{radioRef:r,focus:i,size:s,disabled:a,modelValue:o,radioGroup:l,actualValue:c}=XK(e),u=U(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,h)=>{var f;return $(),ue("label",{class:Y([y(t).b("button"),y(t).is("active",y(o)===y(c)),y(t).is("disabled",y(a)),y(t).is("focus",y(i)),y(t).bm("button",y(s))])},[Cn(ye("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":p=>qr(o)?o.value=p:null,class:Y(y(t).be("button","original-radio")),value:y(c),type:"radio",name:d.name||((f=y(l))==null?void 0:f.name),disabled:y(a),onFocus:p=>i.value=!0,onBlur:p=>i.value=!1,onClick:an(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[IW,y(o)]]),ye("span",{class:Y(y(t).be("button","inner")),style:Xt(y(o)===y(c)?y(u):{}),onKeydown:an(()=>{},["stop"])},[Ye(d.$slots,"default",{},()=>[Bn(Ct(d.label),1)])],46,["onKeydown"])],2)}}});var jK=Et(c1e,[["__file","radio-button.vue"]]);const u1e=Tt({id:{type:String,default:void 0},size:as,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...aa(["ariaLabel"])}),d1e=KK,f1e=Ie({name:"ElRadioGroup"}),h1e=Ie({...f1e,props:u1e,emits:d1e,setup(n,{emit:e}){const t=n,r=gt("radio"),i=Ws(),s=ne(),{formItem:a}=oa(),{inputId:o,isLabeledByFormItem:l}=Vl(t,{formItemContext:a}),c=d=>{e(mn,d),Ut(()=>e(Hn,d))};Rn(()=>{const d=s.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(f=>f.checked)&&h&&(h.tabIndex=0)});const u=U(()=>t.name||i.value);return jn(YK,pr({...bs(t),changeEvent:c,name:u})),ct(()=>t.modelValue,()=>{t.validateEvent&&(a==null||a.validate("change").catch(d=>void 0))}),(d,h)=>($(),ue("div",{id:y(o),ref_key:"radioGroupRef",ref:s,class:Y(y(r).b("group")),role:"radiogroup","aria-label":y(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":y(l)?y(a).labelId:void 0},[Ye(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var ZK=Et(h1e,[["__file","radio-group.vue"]]);const QK=bn(a1e,{RadioButton:jK,RadioGroup:ZK}),p1e=pi(ZK),m1e=pi(jK),cT=Symbol();function v1e(n){return!!(xt(n)?n.every(({type:e})=>e===Yi):(n==null?void 0:n.type)===Yi)}var g1e=Ie({name:"NodeContent",props:{node:{type:Object,required:!0},disabled:Boolean},setup(n,{emit:e}){const t=gt("cascader-node"),{config:r,renderLabelFn:i}=Lt(cT),{checkOnClickNode:s,checkOnClickLeaf:a}=r,{node:o,disabled:l}=n,{data:c,label:u}=o,d=()=>{const f=i==null?void 0:i({node:o,data:c});return v1e(f)?u:f??u};function h(){(s||o.isLeaf&&a)&&!l&&e("handleSelectCheck",!o.checked)}return()=>xe("span",{class:t.e("label"),onClick:h},[d()])}});const y1e=Ie({name:"ElCascaderNode"}),b1e=Ie({...y1e,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(n,{emit:e}){const t=n,r=Lt(cT),i=gt("cascader-node"),s=U(()=>r.isHoverMenu),a=U(()=>r.config.multiple),o=U(()=>r.config.checkStrictly),l=U(()=>r.config.showPrefix),c=U(()=>{var C;return(C=r.checkedNodes[0])==null?void 0:C.uid}),u=U(()=>t.node.isDisabled),d=U(()=>t.node.isLeaf),h=U(()=>o.value&&!d.value||!u.value),f=U(()=>m(r.expandingNode)),p=U(()=>o.value&&r.checkedNodes.some(m)),m=C=>{var A;const{level:T,uid:I}=t.node;return((A=C==null?void 0:C.pathNodes[T-1])==null?void 0:A.uid)===I},v=()=>{f.value||r.expandNode(t.node)},g=C=>{const{node:A}=t;C!==A.checked&&r.handleCheckChange(A,C)},_=()=>{r.lazyLoad(t.node,()=>{d.value||v()})},b=C=>{s.value&&(S(),!d.value&&e("expand",C))},S=()=>{const{node:C}=t;!h.value||C.loading||(C.loaded?v():_())},x=()=>{s.value&&!d.value||(d.value&&!u.value&&!o.value&&!a.value?M(!0):S())},w=C=>{o.value?(g(C),t.node.loaded&&v()):M(C)},M=C=>{t.node.loaded?(g(C),!o.value&&v()):_()};return(C,A)=>($(),ue("li",{id:`${n.menuId}-${n.node.uid}`,role:"menuitem","aria-haspopup":!y(d),"aria-owns":y(d)?void 0:n.menuId,"aria-expanded":y(f),tabindex:y(h)?-1:void 0,class:Y([y(i).b(),y(i).is("selectable",y(o)),y(i).is("active",n.node.checked),y(i).is("disabled",!y(h)),y(f)&&"in-active-path",y(p)&&"in-checked-path"]),onMouseenter:b,onFocus:b,onClick:x},[Xe(" prefix "),y(a)&&y(l)?($(),rt(y(Ul),{key:0,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:y(u),onClick:an(()=>{},["stop"]),"onUpdate:modelValue":w},null,8,["model-value","indeterminate","disabled","onClick"])):y(o)&&y(l)?($(),rt(y(QK),{key:1,"model-value":y(c),label:n.node.uid,disabled:y(u),"onUpdate:modelValue":w,onClick:an(()=>{},["stop"])},{default:Re(()=>[Xe(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ye("span")]),_:1},8,["model-value","label","disabled","onClick"])):y(d)&&n.node.checked?($(),rt(y(zt),{key:2,class:Y(y(i).e("prefix"))},{default:Re(()=>[xe(y($_))]),_:1},8,["class"])):Xe("v-if",!0),Xe(" content "),xe(y(g1e),{node:n.node,disabled:y(u),onHandleSelectCheck:w},null,8,["node","disabled"]),Xe(" postfix "),y(d)?Xe("v-if",!0):($(),ue(Bt,{key:3},[n.node.loading?($(),rt(y(zt),{key:0,class:Y([y(i).is("loading"),y(i).e("postfix")])},{default:Re(()=>[xe(y(iu))]),_:1},8,["class"])):($(),rt(y(zt),{key:1,class:Y(["arrow-right",y(i).e("postfix")])},{default:Re(()=>[xe(y(Ta))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}});var _1e=Et(b1e,[["__file","node.vue"]]);const S1e=Ie({name:"ElCascaderMenu"}),x1e=Ie({...S1e,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(n){const e=n,t=Dn(),r=gt("cascader-menu"),{t:i}=sr(),s=Ws();let a,o;const l=Lt(cT),c=ne(),u=U(()=>!e.nodes.length),d=U(()=>!l.initialLoaded),h=U(()=>`${s.value}-${e.index}`),f=g=>{a=g.target},p=g=>{if(!(!l.isHoverMenu||!a||!c.value))if(a.contains(g.target)){m();const _=t.vnode.el,{left:b}=_.getBoundingClientRect(),{offsetWidth:S,offsetHeight:x}=_,w=g.clientX-b,M=a.offsetTop,C=M+a.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${w} ${M} L${S} 0 V${M} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${w} ${C} L${S} ${x} V${C} Z" />
        `}else o||(o=window.setTimeout(v,l.config.hoverThreshold))},m=()=>{o&&(clearTimeout(o),o=void 0)},v=()=>{c.value&&(c.value.innerHTML="",m())};return(g,_)=>($(),rt(y(mc),{key:y(h),tag:"ul",role:"menu",class:Y(y(r).b()),"wrap-class":y(r).e("wrap"),"view-class":[y(r).e("list"),y(r).is("empty",y(u))],onMousemove:p,onMouseleave:v},{default:Re(()=>{var b;return[($(!0),ue(Bt,null,Fn(n.nodes,S=>($(),rt(_1e,{key:S.uid,node:S,"menu-id":y(h),onExpand:f},null,8,["node","menu-id"]))),128)),y(d)?($(),ue("div",{key:0,class:Y(y(r).e("empty-text"))},[xe(y(zt),{size:"14",class:Y(y(r).is("loading"))},{default:Re(()=>[xe(y(iu))]),_:1},8,["class"]),Bn(" "+Ct(y(i)("el.cascader.loading")),1)],2)):y(u)?($(),ue("div",{key:1,class:Y(y(r).e("empty-text"))},[Ye(g.$slots,"empty",{},()=>[Bn(Ct(y(i)("el.cascader.noData")),1)])],2)):(b=y(l))!=null&&b.isHoverMenu?($(),ue(Bt,{key:2},[Xe(" eslint-disable-next-line vue/html-self-closing "),($(),ue("svg",{ref_key:"hoverZone",ref:c,class:Y(y(r).e("hover-zone"))},null,2))],2112)):Xe("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}});var w1e=Et(x1e,[["__file","menu.vue"]]);let C1e=0;const M1e=n=>{const e=[n];let{parent:t}=n;for(;t;)e.unshift(t),t=t.parent;return e};let VI=class $I{constructor(e,t,r,i=!1){this.data=e,this.config=t,this.parent=r,this.root=i,this.uid=C1e++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:a,children:o}=t,l=e[o],c=M1e(this);this.level=i?0:r?r.level+1:1,this.value=e[s],this.label=e[a],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new $I(u,t,this)),this.loaded=!t.lazy||this.isLeaf||!Uo(l),this.text=""}get isDisabled(){const{data:e,parent:t,config:r}=this,{disabled:i,checkStrictly:s}=r;return(Yt(i)?i(e,this):!!e[i])||!s&&!!(t!=null&&t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:r,loaded:i}=this,{lazy:s,leaf:a}=t,o=Yt(a)?a(e,this):e[a];return nr(o)?s&&!i?!1:!(xt(r)&&r.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:r}=this,i=new $I(e,this.config,this);return xt(t)?t.push(e):this.childrenData=[e],r.push(i),i}calcText(e,t){const r=e?this.pathLabels.join(t):this.label;return this.text=r,r}broadcast(e){this.children.forEach(t=>{var r;t&&(t.broadcast(e),(r=t.onParentCheck)==null||r.call(t,e))})}emit(){var e;const{parent:t}=this;t&&((e=t.onChildCheck)==null||e.call(t),t.emit())}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(i=>!i.isDisabled),r=t.length?t.every(i=>i.checked):!1;this.setCheckState(r)}setCheckState(e){const t=this.children.length,r=this.children.reduce((i,s)=>{const a=s.checked?1:s.indeterminate?.5:0;return i+a},0);this.checked=this.loaded&&this.children.filter(i=>!i.isDisabled).every(i=>i.loaded&&i.checked)&&e,this.indeterminate=this.loaded&&r!==t&&r>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:r}=this.config;t||!r?this.checked=e:(this.broadcast(e),this.setCheckState(e),this.emit())}};const GI=(n,e)=>n.reduce((t,r)=>(r.isLeaf?t.push(r):(!e&&t.push(r),t=t.concat(GI(r.children,e))),t),[]);class ZB{constructor(e,t){this.config=t;const r=(e||[]).map(i=>new VI(i,this.config));this.nodes=r,this.allNodes=GI(r,!1),this.leafNodes=GI(r,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const r=t?t.appendChild(e):new VI(e,this.config);t||this.nodes.push(r),this.appendAllNodesAndLeafNodes(r)}appendNodes(e,t){e.forEach(r=>this.appendNode(r,t))}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(t=>{this.appendAllNodesAndLeafNodes(t)})}getNodeByValue(e,t=!1){return vo(e)?null:this.getFlattedNodes(t).find(i=>rs(i.value,e)||rs(i.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:r,level:i})=>rs(e.value,r)&&e.level===i)||null}}const JK=Tt({modelValue:{type:Fe([Number,String,Array])},options:{type:Fe(Array),default:()=>[]},props:{type:Fe(Object),default:()=>({})}}),T1e={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:xr,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500,checkOnClickNode:!1,checkOnClickLeaf:!0,showPrefix:!0},A1e=Tt({...JK,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),QB=n=>!0,E1e={[mn]:QB,[Hn]:QB,close:()=>!0,"expand-change":n=>n},I1e=n=>U(()=>({...T1e,...n.props})),JB=n=>{if(!n)return 0;const e=n.id.split("-");return Number(e[e.length-2])},R1e=n=>{if(!n)return;const e=n.querySelector("input");e?e.click():Xq(n)&&n.click()},P1e=(n,e)=>{const t=e.slice(0),r=t.map(s=>s.uid),i=n.reduce((s,a)=>{const o=r.indexOf(a.uid);return o>-1&&(s.push(a),t.splice(o,1),r.splice(o,1)),s},[]);return i.push(...t),i},e7=n=>[...new Set(n)],Ha=n=>!n&&n!==0?[]:xt(n)?n:[n],D1e=Ie({name:"ElCascaderPanel",inheritAttrs:!1}),L1e=Ie({...D1e,props:A1e,emits:E1e,setup(n,{expose:e,emit:t}){const r=n;let i=!1;const s=gt("cascader"),a=I1e(r),o=es();let l;const c=ne(!0),u=ne([]),d=ne(),h=ne([]),f=ne(),p=ne([]),m=U(()=>a.value.expandTrigger==="hover"),v=U(()=>r.renderLabel||o.default),g=()=>{const{options:O}=r,H=a.value;i=!1,l=new ZB(O,H),h.value=[l.getNodes()],H.lazy&&Uo(r.options)?(c.value=!1,_(void 0,L=>{L&&(l=new ZB(L,H),h.value=[l.getNodes()]),c.value=!0,T(!1,!0)})):T(!1,!0)},_=(O,H)=>{const L=a.value;O=O||new VI({},L,void 0,!0),O.loading=!0;const z=k=>{const F=O,W=F.root?null:F;k&&(l==null||l.appendNodes(k,W)),F.loading=!1,F.loaded=!0,F.childrenData=F.childrenData||[],k&&(H==null||H(k))};L.lazyLoad(O,z)},b=(O,H)=>{var L;const{level:z}=O,k=h.value.slice(0,z);let F;O.isLeaf?F=O.pathNodes[z-2]:(F=O,k.push(O.children)),((L=f.value)==null?void 0:L.uid)!==(F==null?void 0:F.uid)&&(f.value=O,h.value=k,!H&&t("expand-change",(O==null?void 0:O.pathValues)||[]))},S=(O,H,L=!0)=>{const{checkStrictly:z,multiple:k}=a.value,F=p.value[0];i=!0,!k&&(F==null||F.doCheck(!1)),O.doCheck(H),A(),L&&!k&&!z&&t("close"),!L&&!k&&!z&&x(O)},x=O=>{O&&(O=O.parent,x(O),O&&b(O))},w=O=>l==null?void 0:l.getFlattedNodes(O),M=O=>{var H;return(H=w(O))==null?void 0:H.filter(({checked:L})=>L!==!1)},C=()=>{p.value.forEach(O=>O.doCheck(!1)),A(),h.value=h.value.slice(0,1),f.value=void 0,t("expand-change",[])},A=()=>{const{checkStrictly:O,multiple:H}=a.value,L=p.value,z=M(!O),k=P1e(L,z),F=k.map(W=>W.valueByOption);p.value=k,d.value=H?F:F[0]},T=(O=!1,H=!1)=>{const{modelValue:L}=r,{lazy:z,multiple:k,checkStrictly:F}=a.value,W=!F;if(!(!c.value||i||!H&&rs(L,d.value)))if(z&&!O){const Z=e7(_fe(Ha(L))).map(se=>l==null?void 0:l.getNodeByValue(se)).filter(se=>!!se&&!se.loaded&&!se.loading);Z.length?Z.forEach(se=>{_(se,()=>T(!1,H))}):T(!0,H)}else{const q=k?Ha(L):[L],Z=e7(q.map(se=>l==null?void 0:l.getNodeByValue(se,W)));I(Z,H),d.value=nC(L??void 0)}},I=(O,H=!0)=>{const{checkStrictly:L}=a.value,z=p.value,k=O.filter(q=>!!q&&(L||q.isLeaf)),F=l==null?void 0:l.getSameNode(f.value),W=H&&F||k[0];W?W.pathNodes.forEach(q=>b(q,!0)):f.value=void 0,z.forEach(q=>q.doCheck(!1)),pr(k).forEach(q=>q.doCheck(!0)),p.value=k,Ut(D)},D=()=>{ar&&u.value.forEach(O=>{const H=O==null?void 0:O.$el;if(H){const L=H.querySelector(`.${s.namespace.value}-scrollbar__wrap`),z=H.querySelector(`.${s.b("node")}.${s.is("active")}:last-child`)||H.querySelector(`.${s.b("node")}.in-active-path`);GD(L,z)}})},B=O=>{const H=O.target,{code:L}=O;switch(L){case Rt.up:case Rt.down:{O.preventDefault();const z=L===Rt.up?-1:1;Jw(jq(H,z,`.${s.b("node")}[tabindex="-1"]`));break}case Rt.left:{O.preventDefault();const z=u.value[JB(H)-1],k=z==null?void 0:z.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);Jw(k);break}case Rt.right:{O.preventDefault();const z=u.value[JB(H)+1],k=z==null?void 0:z.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);Jw(k);break}case Rt.enter:case Rt.numpadEnter:R1e(H);break}};return jn(cT,pr({config:a,expandingNode:f,checkedNodes:p,isHoverMenu:m,initialLoaded:c,renderLabelFn:v,lazyLoad:_,expandNode:b,handleCheckChange:S})),ct(a,(O,H)=>{rs(O,H)||g()},{immediate:!0}),ct(()=>r.options,g,{deep:!0}),ct(()=>r.modelValue,()=>{i=!1,T()},{deep:!0}),ct(()=>d.value,O=>{rs(O,r.modelValue)||(t(mn,O),t(Hn,O))}),pD(()=>u.value=[]),Rn(()=>!Uo(r.modelValue)&&T()),e({menuList:u,menus:h,checkedNodes:p,handleKeyDown:B,handleCheckChange:S,getFlattedNodes:w,getCheckedNodes:M,clearCheckedNodes:C,calculateCheckedValue:A,scrollToExpandingNode:D}),(O,H)=>($(),ue("div",{class:Y([y(s).b("panel"),y(s).is("bordered",O.border)]),onKeydown:B},[($(!0),ue(Bt,null,Fn(h.value,(L,z)=>($(),rt(w1e,{key:z,ref_for:!0,ref:k=>u.value[z]=k,index:z,nodes:[...L]},{empty:Re(()=>[Ye(O.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}});var k1e=Et(L1e,[["__file","index.vue"]]);const eY=bn(k1e),Sd=Tt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:pu},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),O1e={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},N1e=Ie({name:"ElTag"}),B1e=Ie({...N1e,props:Sd,emits:O1e,setup(n,{emit:e}){const t=n,r=Qi(),i=gt("tag"),s=U(()=>{const{type:c,hit:u,effect:d,closable:h,round:f}=t;return[i.b(),i.is("closable",h),i.m(c||"primary"),i.m(r.value),i.m(d),i.is("hit",u),i.is("round",f)]}),a=c=>{e("close",c)},o=c=>{e("click",c)},l=c=>{var u,d,h;(h=(d=(u=c==null?void 0:c.component)==null?void 0:u.subTree)==null?void 0:d.component)!=null&&h.bum&&(c.component.subTree.component.bum=null)};return(c,u)=>c.disableTransitions?($(),ue("span",{key:0,class:Y(y(s)),style:Xt({backgroundColor:c.color}),onClick:o},[ye("span",{class:Y(y(i).e("content"))},[Ye(c.$slots,"default")],2),c.closable?($(),rt(y(zt),{key:0,class:Y(y(i).e("close")),onClick:an(a,["stop"])},{default:Re(()=>[xe(y(Bl))]),_:1},8,["class","onClick"])):Xe("v-if",!0)],6)):($(),rt(Os,{key:1,name:`${y(i).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:Re(()=>[ye("span",{class:Y(y(s)),style:Xt({backgroundColor:c.color}),onClick:o},[ye("span",{class:Y(y(i).e("content"))},[Ye(c.$slots,"default")],2),c.closable?($(),rt(y(zt),{key:0,class:Y(y(i).e("close")),onClick:an(a,["stop"])},{default:Re(()=>[xe(y(Bl))]),_:1},8,["class","onClick"])):Xe("v-if",!0)],6)]),_:3},8,["name"]))}});var F1e=Et(B1e,[["__file","tag.vue"]]);const eg=bn(F1e),z1e=Tt({...JK,size:as,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Fe(Function),default:(n,e)=>n.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:Boolean,maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:Fe(Function),default:()=>!0},placement:{type:Fe(String),values:Od,default:"bottom-start"},fallbackPlacements:{type:Fe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ri.teleported,effect:{type:Fe(String),default:"light"},tagType:{...Sd.type,default:"info"},tagEffect:{...Sd.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},showCheckedStrategy:{type:String,values:["parent","child"],default:"child"},checkOnClickNode:Boolean,showPrefix:{type:Boolean,default:!0},...g0}),t7=n=>!0,U1e={[mn]:t7,[Hn]:t7,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,visibleChange:n=>Cr(n),expandChange:n=>!!n,removeTag:n=>!!n},bf=new Map;if(ar){let n;document.addEventListener("mousedown",e=>n=e),document.addEventListener("mouseup",e=>{if(n){for(const t of bf.values())for(const{documentHandler:r}of t)r(e,n);n=void 0}})}function n7(n,e){let t=[];return xt(e.arg)?t=e.arg:Ga(e.arg)&&t.push(e.arg),function(r,i){const s=e.instance.popperRef,a=r.target,o=i==null?void 0:i.target,l=!e||!e.instance,c=!a||!o,u=n.contains(a)||n.contains(o),d=n===a,h=t.length&&t.some(p=>p==null?void 0:p.contains(a))||t.length&&t.includes(o),f=s&&(s.contains(a)||s.contains(o));l||c||u||d||h||f||e.value(r,i)}}const xd={beforeMount(n,e){bf.has(n)||bf.set(n,[]),bf.get(n).push({documentHandler:n7(n,e),bindingFn:e.value})},updated(n,e){bf.has(n)||bf.set(n,[]);const t=bf.get(n),r=t.findIndex(s=>s.bindingFn===e.oldValue),i={documentHandler:n7(n,e),bindingFn:e.value};r>=0?t.splice(r,1,i):t.push(i)},unmounted(n){bf.delete(n)}},H1e="ElCascader",V1e=Ie({name:H1e}),$1e=Ie({...V1e,props:z1e,emits:U1e,setup(n,{expose:e,emit:t}){const r=n,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:ge})=>{const{modifiersData:pe,placement:de}=ge;["right","left","bottom","top"].includes(de)||pe.arrow&&(pe.arrow.x=35)},requires:["arrow"]}]},s=Pd();let a=0,o=0;const l=gt("cascader"),c=gt("input"),{t:u}=sr(),{form:d,formItem:h}=oa(),{valueOnClear:f}=V_(r),{isComposing:p,handleComposition:m}=W_({afterComposition(ge){var pe;const de=(pe=ge.target)==null?void 0:pe.value;_e(de)}}),v=ne(null),g=ne(null),_=ne(null),b=ne(null),S=ne(null),x=ne(!1),w=ne(!1),M=ne(!1),C=ne(!1),A=ne(""),T=ne(""),I=ne([]),D=ne([]),B=ne([]),O=U(()=>s.style),H=U(()=>r.disabled||(d==null?void 0:d.disabled)),L=U(()=>{var ge;return(ge=r.placeholder)!=null?ge:u("el.cascader.placeholder")}),z=U(()=>T.value||I.value.length>0||p.value?"":L.value),k=Qi(),F=U(()=>k.value==="small"?"small":"default"),W=U(()=>!!r.props.multiple),q=U(()=>!r.filterable||W.value),Z=U(()=>W.value?T.value:A.value),se=U(()=>{var ge;return((ge=b.value)==null?void 0:ge.checkedNodes)||[]}),X=U(()=>!r.clearable||H.value||M.value||!w.value?!1:!!se.value.length),ie=U(()=>{const{showAllLevels:ge,separator:pe}=r,de=se.value;return de.length?W.value?"":de[0].calcText(ge,pe):""}),ae=U(()=>(h==null?void 0:h.validateState)||""),ce=U({get(){return nC(r.modelValue)},set(ge){const pe=ge??f.value;t(mn,pe),t(Hn,pe),r.validateEvent&&(h==null||h.validate("change").catch(de=>void 0))}}),we=U(()=>[l.b(),l.m(k.value),l.is("disabled",H.value),s.class]),He=U(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",x.value)]),Ge=U(()=>l.is("focus",x.value||C.value)),me=U(()=>{var ge,pe;return(pe=(ge=v.value)==null?void 0:ge.popperRef)==null?void 0:pe.contentRef}),be=ge=>{var pe,de,at;H.value||(ge=ge??!x.value,ge!==x.value&&(x.value=ge,(de=(pe=g.value)==null?void 0:pe.input)==null||de.setAttribute("aria-expanded",`${ge}`),ge?(oe(),Ut((at=b.value)==null?void 0:at.scrollToExpandingNode)):r.filterable&&je(),t("visibleChange",ge)))},oe=()=>{Ut(()=>{var ge;(ge=v.value)==null||ge.updatePopper()})},j=()=>{M.value=!1},ke=ge=>{const{showAllLevels:pe,separator:de}=r;return{node:ge,key:ge.uid,text:ge.calcText(pe,de),hitState:!1,closable:!H.value&&!ge.isDisabled,isCollapseTag:!1}},ze=ge=>{var pe;const de=ge.node;de.doCheck(!1),(pe=b.value)==null||pe.calculateCheckedValue(),t("removeTag",de.valueByOption)},Ve=()=>{switch(r.showCheckedStrategy){case"child":return se.value;case"parent":{const ge=V(!1),pe=ge.map(at=>at.value);return ge.filter(at=>!at.parent||!pe.includes(at.parent.value))}default:return[]}},Le=()=>{if(!W.value)return;const ge=Ve(),pe=[],de=[];if(ge.forEach(at=>de.push(ke(at))),D.value=de,ge.length){ge.slice(0,r.maxCollapseTags).forEach(vt=>pe.push(ke(vt)));const at=ge.slice(r.maxCollapseTags),Ee=at.length;Ee&&(r.collapseTags?pe.push({key:-1,text:`+ ${Ee}`,closable:!1,isCollapseTag:!0}):at.forEach(vt=>pe.push(ke(vt))))}I.value=pe},Ze=()=>{var ge,pe;const{filterMethod:de,showAllLevels:at,separator:Ee}=r,vt=(pe=(ge=b.value)==null?void 0:ge.getFlattedNodes(!r.props.checkStrictly))==null?void 0:pe.filter(et=>et.isDisabled?!1:(et.calcText(at,Ee),de(et,Z.value)));W.value&&(I.value.forEach(et=>{et.hitState=!1}),D.value.forEach(et=>{et.hitState=!1})),M.value=!0,B.value=vt,oe()},st=()=>{var ge;let pe;M.value&&S.value?pe=S.value.$el.querySelector(`.${l.e("suggestion-item")}`):pe=(ge=b.value)==null?void 0:ge.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),pe&&(pe.focus(),!M.value&&pe.click())},fe=()=>{var ge,pe;const de=(ge=g.value)==null?void 0:ge.input,at=_.value,Ee=(pe=S.value)==null?void 0:pe.$el;if(!(!ar||!de)){if(Ee){const vt=Ee.querySelector(`.${l.e("suggestion-list")}`);vt.style.minWidth=`${de.offsetWidth}px`}if(at){const{offsetHeight:vt}=at,et=I.value.length>0?`${Math.max(vt,a)-2}px`:`${a}px`;de.style.height=et,oe()}}},V=ge=>{var pe;return(pe=b.value)==null?void 0:pe.getCheckedNodes(ge)},J=ge=>{oe(),t("expandChange",ge)},he=ge=>{if(!p.value)switch(ge.code){case Rt.enter:case Rt.numpadEnter:be();break;case Rt.down:be(!0),Ut(st),ge.preventDefault();break;case Rt.esc:x.value===!0&&(ge.preventDefault(),ge.stopPropagation(),be(!1));break;case Rt.tab:be(!1);break}},Oe=()=>{var ge;(ge=b.value)==null||ge.clearCheckedNodes(),!x.value&&r.filterable&&je(),be(!1),t("clear")},je=()=>{const{value:ge}=ie;A.value=ge,T.value=ge},dt=ge=>{var pe,de;const{checked:at}=ge;W.value?(pe=b.value)==null||pe.handleCheckChange(ge,!at,!1):(!at&&((de=b.value)==null||de.handleCheckChange(ge,!0,!1)),be(!1))},pt=ge=>{const pe=ge.target,{code:de}=ge;switch(de){case Rt.up:case Rt.down:{ge.preventDefault();const at=de===Rt.up?-1:1;Jw(jq(pe,at,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case Rt.enter:case Rt.numpadEnter:pe.click();break}},Te=()=>{const ge=I.value,pe=ge[ge.length-1];o=T.value?0:o+1,!(!pe||!o||r.collapseTags&&ge.length>1)&&(pe.hitState?ze(pe):pe.hitState=!0)},ft=ge=>{const pe=ge.target,de=l.e("search-input");pe.className===de&&(C.value=!0),t("focus",ge)},Ke=ge=>{C.value=!1,t("blur",ge)},Q=Co(()=>{const{value:ge}=Z;if(!ge)return;const pe=r.beforeFilter(ge);Kp(pe)?pe.then(Ze).catch(()=>{}):pe!==!1?Ze():j()},r.debounce),_e=(ge,pe)=>{!x.value&&be(!0),!(pe!=null&&pe.isComposing)&&(ge?Q():j())},Ae=ge=>Number.parseFloat(ahe(c.cssVarName("input-height"),ge).value)-2;return ct(M,oe),ct([se,H,()=>r.collapseTags],Le),ct(I,()=>{Ut(()=>fe())}),ct(k,async()=>{await Ut();const ge=g.value.input;a=Ae(ge)||a,fe()}),ct(ie,je,{immediate:!0}),Rn(()=>{const ge=g.value.input,pe=Ae(ge);a=ge.offsetHeight||pe,fi(ge,fe)}),e({getCheckedNodes:V,cascaderPanelRef:b,togglePopperVisible:be,contentRef:me,presentText:ie}),(ge,pe)=>($(),rt(y(ia),{ref_key:"tooltipRef",ref:v,visible:x.value,teleported:ge.teleported,"popper-class":[y(l).e("dropdown"),ge.popperClass],"popper-options":i,"fallback-placements":ge.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:ge.placement,transition:`${y(l).namespace.value}-zoom-in-top`,effect:ge.effect,pure:"",persistent:ge.persistent,onHide:j},{default:Re(()=>[Cn(($(),ue("div",{class:Y(y(we)),style:Xt(y(O)),onClick:()=>be(y(q)?void 0:!0),onKeydown:he,onMouseenter:de=>w.value=!0,onMouseleave:de=>w.value=!1},[xe(y(wa),{ref_key:"input",ref:g,modelValue:A.value,"onUpdate:modelValue":de=>A.value=de,placeholder:y(z),readonly:y(q),disabled:y(H),"validate-event":!1,size:y(k),class:Y(y(Ge)),tabindex:y(W)&&ge.filterable&&!y(H)?-1:void 0,onCompositionstart:y(m),onCompositionupdate:y(m),onCompositionend:y(m),onFocus:ft,onBlur:Ke,onInput:_e},wo({suffix:Re(()=>[y(X)?($(),rt(y(zt),{key:"clear",class:Y([y(c).e("icon"),"icon-circle-close"]),onClick:an(Oe,["stop"])},{default:Re(()=>[xe(y(kd))]),_:1},8,["class","onClick"])):($(),rt(y(zt),{key:"arrow-down",class:Y(y(He)),onClick:an(de=>be(),["stop"])},{default:Re(()=>[xe(y(mu))]),_:1},8,["class","onClick"]))]),_:2},[ge.$slots.prefix?{name:"prefix",fn:Re(()=>[Ye(ge.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),y(W)?($(),ue("div",{key:0,ref_key:"tagWrapper",ref:_,class:Y([y(l).e("tags"),y(l).is("validate",!!y(ae))])},[Ye(ge.$slots,"tag",{data:D.value,deleteTag:ze},()=>[($(!0),ue(Bt,null,Fn(I.value,de=>($(),rt(y(eg),{key:de.key,type:ge.tagType,size:y(F),effect:ge.tagEffect,hit:de.hitState,closable:de.closable,"disable-transitions":"",onClose:at=>ze(de)},{default:Re(()=>[de.isCollapseTag===!1?($(),ue("span",{key:0},Ct(de.text),1)):($(),rt(y(ia),{key:1,disabled:x.value||!ge.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:ge.effect},{default:Re(()=>[ye("span",null,Ct(de.text),1)]),content:Re(()=>[xe(y(mc),{"max-height":ge.maxCollapseTagsTooltipHeight},{default:Re(()=>[ye("div",{class:Y(y(l).e("collapse-tags"))},[($(!0),ue(Bt,null,Fn(D.value.slice(ge.maxCollapseTags),(at,Ee)=>($(),ue("div",{key:Ee,class:Y(y(l).e("collapse-tag"))},[($(),rt(y(eg),{key:at.key,class:"in-tooltip",type:ge.tagType,size:y(F),effect:ge.tagEffect,hit:at.hitState,closable:at.closable,"disable-transitions":"",onClose:vt=>ze(at)},{default:Re(()=>[ye("span",null,Ct(at.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:2},1032,["disabled","effect"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128))]),ge.filterable&&!y(H)?Cn(($(),ue("input",{key:0,"onUpdate:modelValue":de=>T.value=de,type:"text",class:Y(y(l).e("search-input")),placeholder:y(ie)?"":y(L),onInput:de=>_e(T.value,de),onClick:an(de=>be(!0),["stop"]),onKeydown:Dr(Te,["delete"]),onCompositionstart:y(m),onCompositionupdate:y(m),onCompositionend:y(m),onFocus:ft,onBlur:Ke},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[WM,T.value]]):Xe("v-if",!0)],2)):Xe("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[y(xd),()=>be(!1),y(me)]])]),content:Re(()=>[ge.$slots.header?($(),ue("div",{key:0,class:Y(y(l).e("header")),onClick:an(()=>{},["stop"])},[Ye(ge.$slots,"header")],10,["onClick"])):Xe("v-if",!0),Cn(xe(y(eY),{ref_key:"cascaderPanelRef",ref:b,modelValue:y(ce),"onUpdate:modelValue":de=>qr(ce)?ce.value=de:null,options:ge.options,props:r.props,border:!1,"render-label":ge.$slots.default,onExpandChange:J,onClose:de=>ge.$nextTick(()=>be(!1))},{empty:Re(()=>[Ye(ge.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[cr,!M.value]]),ge.filterable?Cn(($(),rt(y(mc),{key:1,ref_key:"suggestionPanel",ref:S,tag:"ul",class:Y(y(l).e("suggestion-panel")),"view-class":y(l).e("suggestion-list"),onKeydown:pt},{default:Re(()=>[B.value.length?($(!0),ue(Bt,{key:0},Fn(B.value,de=>($(),ue("li",{key:de.uid,class:Y([y(l).e("suggestion-item"),y(l).is("checked",de.checked)]),tabindex:-1,onClick:at=>dt(de)},[Ye(ge.$slots,"suggestion-item",{item:de},()=>[ye("span",null,Ct(de.text),1),de.checked?($(),rt(y(zt),{key:0},{default:Re(()=>[xe(y($_))]),_:1})):Xe("v-if",!0)])],10,["onClick"]))),128)):Ye(ge.$slots,"empty",{key:1},()=>[ye("li",{class:Y(y(l).e("empty-text"))},Ct(y(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[cr,M.value]]):Xe("v-if",!0),ge.$slots.footer?($(),ue("div",{key:2,class:Y(y(l).e("footer")),onClick:an(()=>{},["stop"])},[Ye(ge.$slots,"footer")],10,["onClick"])):Xe("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","effect","persistent"]))}});var G1e=Et($1e,[["__file","cascader.vue"]]);const W1e=bn(G1e),q1e=Tt({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),K1e={"update:checked":n=>Cr(n),[Hn]:n=>Cr(n)},Y1e=Ie({name:"ElCheckTag"}),X1e=Ie({...Y1e,props:q1e,emits:K1e,setup(n,{emit:e}){const t=n,r=gt("check-tag"),i=U(()=>t.disabled),s=U(()=>[r.b(),r.is("checked",t.checked),r.is("disabled",i.value),r.m(t.type||"primary")]),a=()=>{if(i.value)return;const o=!t.checked;e(Hn,o),e("update:checked",o)};return(o,l)=>($(),ue("span",{class:Y(y(s)),onClick:a},[Ye(o.$slots,"default")],2))}});var j1e=Et(X1e,[["__file","check-tag.vue"]]);const Z1e=bn(j1e),Q1e=Tt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Fe([Number,Object]),default:()=>hi({})},sm:{type:Fe([Number,Object]),default:()=>hi({})},md:{type:Fe([Number,Object]),default:()=>hi({})},lg:{type:Fe([Number,Object]),default:()=>hi({})},xl:{type:Fe([Number,Object]),default:()=>hi({})}}),tY=Symbol("rowContextKey"),J1e=Ie({name:"ElCol"}),ebe=Ie({...J1e,props:Q1e,setup(n){const e=n,{gutter:t}=Lt(tY,{gutter:U(()=>0)}),r=gt("col"),i=U(()=>{const a={};return t.value&&(a.paddingLeft=a.paddingRight=`${t.value/2}px`),a}),s=U(()=>{const a=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];en(u)&&(c==="span"?a.push(r.b(`${e[c]}`)):u>0&&a.push(r.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{en(e[c])?a.push(r.b(`${c}-${e[c]}`)):Mn(e[c])&&Object.entries(e[c]).forEach(([u,d])=>{a.push(u!=="span"?r.b(`${c}-${u}-${d}`):r.b(`${c}-${d}`))})}),t.value&&a.push(r.is("guttered")),[r.b(),a]});return(a,o)=>($(),rt(Ln(a.tag),{class:Y(y(s)),style:Xt(y(i))},{default:Re(()=>[Ye(a.$slots,"default")]),_:3},8,["class","style"]))}});var tbe=Et(ebe,[["__file","col.vue"]]);const nbe=bn(tbe),r7=n=>en(n)||Wt(n)||xt(n),rbe=Tt({accordion:Boolean,modelValue:{type:Fe([Array,String,Number]),default:()=>hi([])},expandIconPosition:{type:Fe([String]),default:"right"},beforeCollapse:{type:Fe(Function)}}),ibe={[mn]:r7,[Hn]:r7},nY=Symbol("collapseContextKey"),sbe="ElCollapse",abe=(n,e)=>{const t=ne(Is(n.modelValue)),r=a=>{t.value=a;const o=n.accordion?t.value[0]:t.value;e(mn,o),e(Hn,o)},i=a=>{if(n.accordion)r([t.value[0]===a?"":a]);else{const o=[...t.value],l=o.indexOf(a);l>-1?o.splice(l,1):o.push(a),r(o)}},s=async a=>{const{beforeCollapse:o}=n;if(!o){i(a);return}const l=o(a);[Kp(l),Cr(l)].includes(!0)||Gi(sbe,"beforeCollapse must return type `Promise<boolean>` or `boolean`"),Kp(l)?l.then(u=>{u!==!1&&i(a)}).catch(u=>{}):l&&i(a)};return ct(()=>n.modelValue,()=>t.value=Is(n.modelValue),{deep:!0}),jn(nY,{activeNames:t,handleItemClick:s}),{activeNames:t,setActiveNames:r}},obe=n=>{const e=gt("collapse");return{rootKls:U(()=>[e.b(),e.b(`icon-position-${n.expandIconPosition}`)])}},lbe=Ie({name:"ElCollapse"}),cbe=Ie({...lbe,props:rbe,emits:ibe,setup(n,{expose:e,emit:t}){const r=n,{activeNames:i,setActiveNames:s}=abe(r,t),{rootKls:a}=obe(r);return e({activeNames:i,setActiveNames:s}),(o,l)=>($(),ue("div",{class:Y(y(a))},[Ye(o.$slots,"default")],2))}});var ube=Et(cbe,[["__file","collapse.vue"]]);const dbe=Ie({name:"ElCollapseTransition"}),fbe=Ie({...dbe,setup(n){const e=gt("collapse-transition"),t=i=>{i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom},r={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.height&&(i.dataset.elExistsHeight=i.style.height),i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){requestAnimationFrame(()=>{i.dataset.oldOverflow=i.style.overflow,i.dataset.elExistsHeight?i.style.maxHeight=i.dataset.elExistsHeight:i.scrollHeight!==0?i.style.maxHeight=`${i.scrollHeight}px`:i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom,i.style.overflow="hidden"})},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},enterCancelled(i){t(i)},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){t(i)},leaveCancelled(i){t(i)}};return(i,s)=>($(),rt(Os,Nn({name:y(e).b()},lse(r)),{default:Re(()=>[Ye(i.$slots,"default")]),_:3},16,["name"]))}});var hbe=Et(fbe,[["__file","collapse-transition.vue"]]);const uT=bn(hbe),pbe=Tt({title:{type:String,default:""},name:{type:Fe([String,Number]),default:void 0},icon:{type:Ar,default:Ta},disabled:Boolean}),mbe=n=>{const e=Lt(nY),{namespace:t}=gt("collapse"),r=ne(!1),i=ne(!1),s=jD(),a=U(()=>s.current++),o=U(()=>{var h;return(h=n.name)!=null?h:`${t.value}-id-${s.prefix}-${y(a)}`}),l=U(()=>e==null?void 0:e.activeNames.value.includes(y(o)));return{focusing:r,id:a,isActive:l,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:r.value=!0},50)},handleHeaderClick:h=>{if(n.disabled)return;const f=h.target;f!=null&&f.closest("input, textarea, select")||(e==null||e.handleItemClick(y(o)),r.value=!1,i.value=!0)},handleEnterClick:h=>{const f=h.target;f!=null&&f.closest("input, textarea, select")||(h.preventDefault(),e==null||e.handleItemClick(y(o)))}}},vbe=(n,{focusing:e,isActive:t,id:r})=>{const i=gt("collapse"),s=U(()=>[i.b("item"),i.is("active",y(t)),i.is("disabled",n.disabled)]),a=U(()=>[i.be("item","header"),i.is("active",y(t)),{focusing:y(e)&&!n.disabled}]),o=U(()=>[i.be("item","arrow"),i.is("active",y(t))]),l=U(()=>[i.be("item","title")]),c=U(()=>i.be("item","wrap")),u=U(()=>i.be("item","content")),d=U(()=>i.b(`content-${y(r)}`)),h=U(()=>i.b(`head-${y(r)}`));return{itemTitleKls:l,arrowKls:o,headKls:a,rootKls:s,itemWrapperKls:c,itemContentKls:u,scopedContentId:d,scopedHeadId:h}},gbe=Ie({name:"ElCollapseItem"}),ybe=Ie({...gbe,props:pbe,setup(n,{expose:e}){const t=n,{focusing:r,id:i,isActive:s,handleFocus:a,handleHeaderClick:o,handleEnterClick:l}=mbe(t),{arrowKls:c,headKls:u,rootKls:d,itemTitleKls:h,itemWrapperKls:f,itemContentKls:p,scopedContentId:m,scopedHeadId:v}=vbe(t,{focusing:r,isActive:s,id:i});return e({isActive:s}),(g,_)=>($(),ue("div",{class:Y(y(d))},[ye("div",{id:y(v),class:Y(y(u)),"aria-expanded":y(s),"aria-controls":y(m),"aria-describedby":y(m),tabindex:g.disabled?-1:0,role:"button",onClick:y(o),onKeydown:Dr(an(y(l),["stop"]),["space","enter"]),onFocus:y(a),onBlur:b=>r.value=!1},[ye("span",{class:Y(y(h))},[Ye(g.$slots,"title",{isActive:y(s)},()=>[Bn(Ct(g.title),1)])],2),Ye(g.$slots,"icon",{isActive:y(s)},()=>[xe(y(zt),{class:Y(y(c))},{default:Re(()=>[($(),rt(Ln(g.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),xe(y(uT),null,{default:Re(()=>[Cn(ye("div",{id:y(m),role:"region",class:Y(y(f)),"aria-hidden":!y(s),"aria-labelledby":y(v)},[ye("div",{class:Y(y(p))},[Ye(g.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[cr,y(s)]])]),_:3})],2))}});var rY=Et(ybe,[["__file","collapse-item.vue"]]);const bbe=bn(ube,{CollapseItem:rY}),_be=pi(rY),Sbe=Tt({color:{type:Fe(Object),required:!0},vertical:Boolean});let i3=!1;function kb(n,e){if(!ar)return;const t=function(s){var a;(a=e.drag)==null||a.call(e,s)},r=function(s){var a;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,i3=!1,(a=e.end)==null||a.call(e,s)},i=function(s){var a;i3||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",r),document.addEventListener("touchmove",t),document.addEventListener("touchend",r),i3=!0,(a=e.start)==null||a.call(e,s))};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i,{passive:!1})}const i7=n=>{let e=0,t=n;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},WI=(n,e)=>Math.abs(i7(n)-i7(e)),u6=n=>{let e,t;return n.type==="touchend"?(t=n.changedTouches[0].clientY,e=n.changedTouches[0].clientX):n.type.startsWith("touch")?(t=n.touches[0].clientY,e=n.touches[0].clientX):(t=n.clientY,e=n.clientX),{clientX:e,clientY:t}},xbe=n=>{const e=Dn(),{t}=sr(),r=Pr(),i=Pr(),s=U(()=>n.color.get("alpha")),a=U(()=>t("el.colorpicker.alphaLabel"));function o(d){var h;d.target!==r.value&&l(d),(h=r.value)==null||h.focus()}function l(d){if(!i.value||!r.value)return;const f=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:m}=u6(d);if(n.vertical){let v=m-f.top;v=Math.max(r.value.offsetHeight/2,v),v=Math.min(v,f.height-r.value.offsetHeight/2),n.color.set("alpha",Math.round((v-r.value.offsetHeight/2)/(f.height-r.value.offsetHeight)*100))}else{let v=p-f.left;v=Math.max(r.value.offsetWidth/2,v),v=Math.min(v,f.width-r.value.offsetWidth/2),n.color.set("alpha",Math.round((v-r.value.offsetWidth/2)/(f.width-r.value.offsetWidth)*100))}}function c(d){const{code:h,shiftKey:f}=d,p=f?10:1;switch(h){case Rt.left:case Rt.down:d.preventDefault(),d.stopPropagation(),u(-p);break;case Rt.right:case Rt.up:d.preventDefault(),d.stopPropagation(),u(p);break}}function u(d){let h=s.value+d;h=h<0?0:h>100?100:h,n.color.set("alpha",h)}return{thumb:r,bar:i,alpha:s,alphaLabel:a,handleDrag:l,handleClick:o,handleKeydown:c}},wbe=(n,{bar:e,thumb:t,handleDrag:r})=>{const i=Dn(),s=gt("color-alpha-slider"),a=ne(0),o=ne(0),l=ne();function c(){if(!t.value||n.vertical)return 0;const _=i.vnode.el,b=n.color.get("alpha");return _?Math.round(b*(_.offsetWidth-t.value.offsetWidth/2)/100):0}function u(){if(!t.value)return 0;const _=i.vnode.el;if(!n.vertical)return 0;const b=n.color.get("alpha");return _?Math.round(b*(_.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(n.color&&n.color.value){const{r:_,g:b,b:S}=n.color.toRgb();return`linear-gradient(to right, rgba(${_}, ${b}, ${S}, 0) 0%, rgba(${_}, ${b}, ${S}, 1) 100%)`}return""}function h(){a.value=c(),o.value=u(),l.value=d()}Rn(()=>{if(!e.value||!t.value)return;const _={drag:b=>{r(b)},end:b=>{r(b)}};kb(e.value,_),kb(t.value,_),h()}),ct(()=>n.color.get("alpha"),()=>h()),ct(()=>n.color.value,()=>h());const f=U(()=>[s.b(),s.is("vertical",n.vertical)]),p=U(()=>s.e("bar")),m=U(()=>s.e("thumb")),v=U(()=>({background:l.value})),g=U(()=>({left:wi(a.value),top:wi(o.value)}));return{rootKls:f,barKls:p,barStyle:v,thumbKls:m,thumbStyle:g,update:h}},Cbe="ElColorAlphaSlider",Mbe=Ie({name:Cbe}),Tbe=Ie({...Mbe,props:Sbe,setup(n,{expose:e}){const t=n,{alpha:r,alphaLabel:i,bar:s,thumb:a,handleDrag:o,handleClick:l,handleKeydown:c}=xbe(t),{rootKls:u,barKls:d,barStyle:h,thumbKls:f,thumbStyle:p,update:m}=wbe(t,{bar:s,thumb:a,handleDrag:o});return e({update:m,bar:s,thumb:a}),(v,g)=>($(),ue("div",{class:Y(y(u))},[ye("div",{ref_key:"bar",ref:s,class:Y(y(d)),style:Xt(y(h)),onClick:y(l)},null,14,["onClick"]),ye("div",{ref_key:"thumb",ref:a,class:Y(y(f)),style:Xt(y(p)),"aria-label":y(i),"aria-valuenow":y(r),"aria-orientation":v.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:y(c)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Abe=Et(Tbe,[["__file","alpha-slider.vue"]]);const Ebe=Ie({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(n){const e=gt("color-hue-slider"),t=Dn(),r=ne(),i=ne(),s=ne(0),a=ne(0),o=U(()=>n.color.get("hue"));ct(()=>o.value,()=>{h()});function l(f){f.target!==r.value&&c(f)}function c(f){if(!i.value||!r.value)return;const m=t.vnode.el.getBoundingClientRect(),{clientX:v,clientY:g}=u6(f);let _;if(n.vertical){let b=g-m.top;b=Math.min(b,m.height-r.value.offsetHeight/2),b=Math.max(r.value.offsetHeight/2,b),_=Math.round((b-r.value.offsetHeight/2)/(m.height-r.value.offsetHeight)*360)}else{let b=v-m.left;b=Math.min(b,m.width-r.value.offsetWidth/2),b=Math.max(r.value.offsetWidth/2,b),_=Math.round((b-r.value.offsetWidth/2)/(m.width-r.value.offsetWidth)*360)}n.color.set("hue",_)}function u(){if(!r.value)return 0;const f=t.vnode.el;if(n.vertical)return 0;const p=n.color.get("hue");return f?Math.round(p*(f.offsetWidth-r.value.offsetWidth/2)/360):0}function d(){if(!r.value)return 0;const f=t.vnode.el;if(!n.vertical)return 0;const p=n.color.get("hue");return f?Math.round(p*(f.offsetHeight-r.value.offsetHeight/2)/360):0}function h(){s.value=u(),a.value=d()}return Rn(()=>{if(!i.value||!r.value)return;const f={drag:p=>{c(p)},end:p=>{c(p)}};kb(i.value,f),kb(r.value,f),h()}),{bar:i,thumb:r,thumbLeft:s,thumbTop:a,hueValue:o,handleClick:l,update:h,ns:e}}});function Ibe(n,e,t,r,i,s){return $(),ue("div",{class:Y([n.ns.b(),n.ns.is("vertical",n.vertical)])},[ye("div",{ref:"bar",class:Y(n.ns.e("bar")),onClick:n.handleClick},null,10,["onClick"]),ye("div",{ref:"thumb",class:Y(n.ns.e("thumb")),style:Xt({left:n.thumbLeft+"px",top:n.thumbTop+"px"})},null,6)],2)}var Rbe=Et(Ebe,[["render",Ibe],["__file","hue-slider.vue"]]);const Pbe=Tt({persistent:{type:Boolean,default:!0},modelValue:{type:Fe(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:as,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Ri.teleported,appendTo:Ri.appendTo,predefine:{type:Fe(Array)},validateEvent:{type:Boolean,default:!0},...g0,...aa(["ariaLabel"])}),Dbe={[mn]:n=>Wt(n)||Zi(n),[Hn]:n=>Wt(n)||Zi(n),activeChange:n=>Wt(n)||Zi(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},iY=Symbol("colorPickerContextKey");let oC=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new tv,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const t in e)fr(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const r in e)fr(e,r)&&this.set(r,e[r]);return}this[`_${e}`]=t,this._isValid=!0,this.doOnChange()}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const t=new tv(e);if(this._isValid=t.isValid,t.isValid){const{h:r,s:i,v:s,a}=t.toHsv();this._hue=r,this._saturation=i*100,this._value=s*100,this._alpha=a*100}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(e){const t=new tv({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(t)}doOnChange(){const{_hue:e,_saturation:t,_value:r,_alpha:i,format:s,enableAlpha:a}=this;let o=s||(a?"rgb":"hex");s==="hex"&&a&&(o="hex8"),this._tiny=new tv({h:e,s:t/100,v:r/100,a:i/100}),this.value=this._isValid?this._tiny.toString(o):""}};const Lbe=Ie({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(n){const e=gt("color-predefine"),{currentColor:t}=Lt(iY),r=ne(s(n.colors,n.color));ct(()=>t.value,a=>{const o=new oC({value:a});r.value.forEach(l=>{l.selected=o.compare(l)})}),Gs(()=>{r.value=s(n.colors,n.color)});function i(a){n.color.fromString(n.colors[a])}function s(a,o){return a.map(l=>{const c=new oC({value:l});return c.selected=c.compare(o),c})}return{rgbaColors:r,handleSelect:i,ns:e}}});function kbe(n,e,t,r,i,s){return $(),ue("div",{class:Y(n.ns.b())},[ye("div",{class:Y(n.ns.e("colors"))},[($(!0),ue(Bt,null,Fn(n.rgbaColors,(a,o)=>($(),ue("div",{key:n.colors[o],class:Y([n.ns.e("color-selector"),n.ns.is("alpha",a.get("alpha")<100),{selected:a.selected}]),onClick:l=>n.handleSelect(o)},[ye("div",{style:Xt({backgroundColor:a.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Obe=Et(Lbe,[["render",kbe],["__file","predefine.vue"]]);const Nbe=Ie({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(n){const e=gt("color-svpanel"),t=Dn(),r=ne(0),i=ne(0),s=ne("hsl(0, 100%, 50%)"),a=U(()=>{const c=n.color.get("hue"),u=n.color.get("value");return{hue:c,value:u}});function o(){const c=n.color.get("saturation"),u=n.color.get("value"),d=t.vnode.el,{clientWidth:h,clientHeight:f}=d;i.value=c*h/100,r.value=(100-u)*f/100,s.value=`hsl(${n.color.get("hue")}, 100%, 50%)`}function l(c){const d=t.vnode.el.getBoundingClientRect(),{clientX:h,clientY:f}=u6(c);let p=h-d.left,m=f-d.top;p=Math.max(0,p),p=Math.min(p,d.width),m=Math.max(0,m),m=Math.min(m,d.height),i.value=p,r.value=m,n.color.set({saturation:p/d.width*100,value:100-m/d.height*100})}return ct(()=>a.value,()=>{o()}),Rn(()=>{kb(t.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),o()}),{cursorTop:r,cursorLeft:i,background:s,colorValue:a,handleDrag:l,update:o,ns:e}}});function Bbe(n,e,t,r,i,s){return $(),ue("div",{class:Y(n.ns.b()),style:Xt({backgroundColor:n.background})},[ye("div",{class:Y(n.ns.e("white"))},null,2),ye("div",{class:Y(n.ns.e("black"))},null,2),ye("div",{class:Y(n.ns.e("cursor")),style:Xt({top:n.cursorTop+"px",left:n.cursorLeft+"px"})},[ye("div")],6)],6)}var Fbe=Et(Nbe,[["render",Bbe],["__file","sv-panel.vue"]]);const zbe=Ie({name:"ElColorPicker"}),Ube=Ie({...zbe,props:Pbe,emits:Dbe,setup(n,{expose:e,emit:t}){const r=n,{t:i}=sr(),s=gt("color"),{formItem:a}=oa(),o=Qi(),l=la(),{valueOnClear:c,isEmptyValue:u}=V_(r,null),{inputId:d,isLabeledByFormItem:h}=Vl(r,{formItemContext:a}),f=ne(),p=ne(),m=ne(),v=ne(),g=ne(),_=ne(),{isFocused:b,handleFocus:S,handleBlur:x}=gh(g,{disabled:l,beforeBlur(me){var be;return(be=v.value)==null?void 0:be.isFocusInsideContent(me)},afterBlur(){z(!1),q()}});let w=!0;const M=pr(new oC({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),C=ne(!1),A=ne(!1),T=ne(""),I=U(()=>!r.modelValue&&!A.value?"transparent":L(M,r.showAlpha)),D=U(()=>!r.modelValue&&!A.value?"":M.value),B=U(()=>h.value?void 0:r.ariaLabel||i("el.colorpicker.defaultLabel")),O=U(()=>h.value?a==null?void 0:a.labelId:void 0),H=U(()=>[s.b("picker"),s.is("disabled",l.value),s.bm("picker",o.value),s.is("focused",b.value)]);function L(me,be){const{r:oe,g:j,b:ke,a:ze}=me.toRgb();return be?`rgba(${oe}, ${j}, ${ke}, ${ze})`:`rgb(${oe}, ${j}, ${ke})`}function z(me){C.value=me}const k=Co(z,100,{leading:!0});function F(){l.value||z(!0)}function W(){k(!1),q()}function q(){Ut(()=>{r.modelValue?M.fromString(r.modelValue):(M.value="",!D.value&&T.value&&(T.value=""),Ut(()=>{A.value=!1}))})}function Z(){l.value||(C.value&&q(),k(!C.value))}function se(){M.fromString(T.value),M.value!==T.value&&(T.value=M.value)}function X(){const me=u(M.value)?c.value:M.value;t(mn,me),t(Hn,me),r.validateEvent&&(a==null||a.validate("change").catch(be=>void 0)),k(!1),Ut(()=>{const be=new oC({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});M.compare(be)||q()})}function ie(){k(!1),t(mn,c.value),t(Hn,c.value),r.modelValue!==c.value&&r.validateEvent&&(a==null||a.validate("change").catch(me=>void 0)),q()}function ae(){C.value&&(W(),b.value&&He())}function ce(me){me.preventDefault(),me.stopPropagation(),z(!1),q()}function we(me){switch(me.code){case Rt.enter:case Rt.numpadEnter:case Rt.space:me.preventDefault(),me.stopPropagation(),F(),_.value.focus();break;case Rt.esc:ce(me);break}}function He(){g.value.focus()}function Ge(){g.value.blur()}return Rn(()=>{r.modelValue&&(T.value=D.value)}),ct(()=>r.modelValue,me=>{me?me&&me!==M.value&&(w=!1,M.fromString(me)):A.value=!1}),ct(()=>[r.colorFormat,r.showAlpha],()=>{M.enableAlpha=r.showAlpha,M.format=r.colorFormat||M.format,M.doOnChange(),t(mn,M.value)}),ct(()=>D.value,me=>{T.value=me,w&&t("activeChange",me),w=!0}),ct(()=>M.value,()=>{!r.modelValue&&!A.value&&(A.value=!0)}),ct(()=>C.value,()=>{Ut(()=>{var me,be,oe;(me=f.value)==null||me.update(),(be=p.value)==null||be.update(),(oe=m.value)==null||oe.update()})}),jn(iY,{currentColor:D}),e({color:M,show:F,hide:W,focus:He,blur:Ge}),(me,be)=>($(),rt(y(ia),{ref_key:"popper",ref:v,visible:C.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[y(s).be("picker","panel"),y(s).b("dropdown"),me.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:me.teleported,transition:`${y(s).namespace.value}-zoom-in-top`,persistent:me.persistent,"append-to":me.appendTo,onHide:oe=>z(!1)},{content:Re(()=>[Cn(($(),ue("div",{onKeydown:Dr(ce,["esc"])},[ye("div",{class:Y(y(s).be("dropdown","main-wrapper"))},[xe(Rbe,{ref_key:"hue",ref:f,class:"hue-slider",color:y(M),vertical:""},null,8,["color"]),xe(Fbe,{ref_key:"sv",ref:p,color:y(M)},null,8,["color"])],2),me.showAlpha?($(),rt(Abe,{key:0,ref_key:"alpha",ref:m,color:y(M)},null,8,["color"])):Xe("v-if",!0),me.predefine?($(),rt(Obe,{key:1,ref:"predefine","enable-alpha":me.showAlpha,color:y(M),colors:me.predefine},null,8,["enable-alpha","color","colors"])):Xe("v-if",!0),ye("div",{class:Y(y(s).be("dropdown","btns"))},[ye("span",{class:Y(y(s).be("dropdown","value"))},[xe(y(wa),{ref_key:"inputRef",ref:_,modelValue:T.value,"onUpdate:modelValue":oe=>T.value=oe,"validate-event":!1,size:"small",onChange:se},null,8,["modelValue","onUpdate:modelValue"])],2),xe(y(ks),{class:Y(y(s).be("dropdown","link-btn")),text:"",size:"small",onClick:ie},{default:Re(()=>[Bn(Ct(y(i)("el.colorpicker.clear")),1)]),_:1},8,["class"]),xe(y(ks),{plain:"",size:"small",class:Y(y(s).be("dropdown","btn")),onClick:X},{default:Re(()=>[Bn(Ct(y(i)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[y(xd),ae,g.value]])]),default:Re(()=>[ye("div",Nn({id:y(d),ref_key:"triggerRef",ref:g},me.$attrs,{class:y(H),role:"button","aria-label":y(B),"aria-labelledby":y(O),"aria-description":y(i)("el.colorpicker.description",{color:me.modelValue||""}),"aria-disabled":y(l),tabindex:y(l)?void 0:me.tabindex,onKeydown:we,onFocus:y(S),onBlur:y(x)}),[ye("div",{class:Y(y(s).be("picker","trigger")),onClick:Z},[ye("span",{class:Y([y(s).be("picker","color"),y(s).is("alpha",me.showAlpha)])},[ye("span",{class:Y(y(s).be("picker","color-inner")),style:Xt({backgroundColor:y(I)})},[Cn(xe(y(zt),{class:Y([y(s).be("picker","icon"),y(s).is("icon-arrow-down")])},{default:Re(()=>[xe(y(mu))]),_:1},8,["class"]),[[cr,me.modelValue||A.value]]),Cn(xe(y(zt),{class:Y([y(s).be("picker","empty"),y(s).is("icon-close")])},{default:Re(()=>[xe(y(Bl))]),_:1},8,["class"]),[[cr,!me.modelValue&&!A.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","persistent","append-to","onHide"]))}});var Hbe=Et(Ube,[["__file","color-picker.vue"]]);const Vbe=bn(Hbe),$be=Tt({a11y:{type:Boolean,default:!0},locale:{type:Fe(Object)},size:as,button:{type:Fe(Object)},card:{type:Fe(Object)},link:{type:Fe(Object)},experimentalFeatures:{type:Fe(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Fe(Object)},zIndex:Number,namespace:{type:String,default:"el"},...g0}),Fo={},Gbe=Ie({name:"ElConfigProvider",props:$be,setup(n,{slots:e}){const t=VD(n);return ct(()=>n.message,r=>{var i,s;Object.assign(Fo,(s=(i=t==null?void 0:t.value)==null?void 0:i.message)!=null?s:{},r??{})},{immediate:!0,deep:!0}),()=>Ye(e,"default",{config:t==null?void 0:t.value})}}),Wbe=bn(Gbe),qbe=Ie({name:"ElContainer"}),Kbe=Ie({...qbe,props:{direction:{type:String}},setup(n){const e=n,t=es(),r=gt("container"),i=U(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(a=>{const o=a.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(s,a)=>($(),ue("section",{class:Y([y(r).b(),y(r).is("vertical",y(i))])},[Ye(s.$slots,"default")],2))}});var Ybe=Et(Kbe,[["__file","container.vue"]]);const Xbe=Ie({name:"ElAside"}),jbe=Ie({...Xbe,props:{width:{type:String,default:null}},setup(n){const e=n,t=gt("aside"),r=U(()=>e.width?t.cssVarBlock({width:e.width}):{});return(i,s)=>($(),ue("aside",{class:Y(y(t).b()),style:Xt(y(r))},[Ye(i.$slots,"default")],6))}});var sY=Et(jbe,[["__file","aside.vue"]]);const Zbe=Ie({name:"ElFooter"}),Qbe=Ie({...Zbe,props:{height:{type:String,default:null}},setup(n){const e=n,t=gt("footer"),r=U(()=>e.height?t.cssVarBlock({height:e.height}):{});return(i,s)=>($(),ue("footer",{class:Y(y(t).b()),style:Xt(y(r))},[Ye(i.$slots,"default")],6))}});var aY=Et(Qbe,[["__file","footer.vue"]]);const Jbe=Ie({name:"ElHeader"}),e_e=Ie({...Jbe,props:{height:{type:String,default:null}},setup(n){const e=n,t=gt("header"),r=U(()=>e.height?t.cssVarBlock({height:e.height}):{});return(i,s)=>($(),ue("header",{class:Y(y(t).b()),style:Xt(y(r))},[Ye(i.$slots,"default")],6))}});var oY=Et(e_e,[["__file","header.vue"]]);const t_e=Ie({name:"ElMain"}),n_e=Ie({...t_e,setup(n){const e=gt("main");return(t,r)=>($(),ue("main",{class:Y(y(e).b())},[Ye(t.$slots,"default")],2))}});var lY=Et(n_e,[["__file","main.vue"]]);const r_e=bn(Ybe,{Aside:sY,Footer:aY,Header:oY,Main:lY}),i_e=pi(sY),s_e=pi(aY),a_e=pi(oY),o_e=pi(lY);var cY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},c=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(g){this[v]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var _=g.match(/([+-]|\d\d)/g),b=60*_[1]+(+_[2]||0);return b===0?0:_[0]==="+"?-b:b}(v)}],h=function(v){var g=l[v];return g&&(g.indexOf?g:g.s.concat(g.f))},f=function(v,g){var _,b=l.meridiem;if(b){for(var S=1;S<=24;S+=1)if(v.indexOf(b(S,0,g))>-1){_=S>12;break}}else _=v===(g?"pm":"PM");return _},p={A:[o,function(v){this.afternoon=f(v,!1)}],a:[o,function(v){this.afternoon=f(v,!0)}],Q:[i,function(v){this.month=3*(v-1)+1}],S:[i,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[a,u("seconds")],ss:[a,u("seconds")],m:[a,u("minutes")],mm:[a,u("minutes")],H:[a,u("hours")],h:[a,u("hours")],HH:[a,u("hours")],hh:[a,u("hours")],D:[a,u("day")],DD:[s,u("day")],Do:[o,function(v){var g=l.ordinal,_=v.match(/\d+/);if(this.day=_[0],g)for(var b=1;b<=31;b+=1)g(b).replace(/\[|\]/g,"")===v&&(this.day=b)}],w:[a,u("week")],ww:[s,u("week")],M:[a,u("month")],MM:[s,u("month")],MMM:[o,function(v){var g=h("months"),_=(h("monthsShort")||g.map(function(b){return b.slice(0,3)})).indexOf(v)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[o,function(v){var g=h("months").indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(v){this.year=c(v)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function m(v){var g,_;g=v,_=l&&l.formats;for(var b=(v=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(T,I,D){var B=D&&D.toUpperCase();return I||_[D]||t[D]||_[B].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(O,H,L){return H||L.slice(1)})})).match(r),S=b.length,x=0;x<S;x+=1){var w=b[x],M=p[w],C=M&&M[0],A=M&&M[1];b[x]=A?{regex:C,parser:A}:w.replace(/^\[|\]$/g,"")}return function(T){for(var I={},D=0,B=0;D<S;D+=1){var O=b[D];if(typeof O=="string")B+=O.length;else{var H=O.regex,L=O.parser,z=T.slice(B),k=H.exec(z)[0];L.call(I,k),T=T.replace(k,"")}}return function(F){var W=F.afternoon;if(W!==void 0){var q=F.hours;W?q<12&&(F.hours+=12):q===12&&(F.hours=0),delete F.afternoon}}(I),I}}return function(v,g,_){_.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(c=v.parseTwoDigitYear);var b=g.prototype,S=b.parse;b.parse=function(x){var w=x.date,M=x.utc,C=x.args;this.$u=M;var A=C[1];if(typeof A=="string"){var T=C[2]===!0,I=C[3]===!0,D=T||I,B=C[2];I&&(B=C[2]),l=this.$locale(),!T&&B&&(l=_.Ls[B]),this.$d=function(z,k,F,W){try{if(["x","X"].indexOf(k)>-1)return new Date((k==="X"?1e3:1)*z);var q=m(k)(z),Z=q.year,se=q.month,X=q.day,ie=q.hours,ae=q.minutes,ce=q.seconds,we=q.milliseconds,He=q.zone,Ge=q.week,me=new Date,be=X||(Z||se?1:me.getDate()),oe=Z||me.getFullYear(),j=0;Z&&!se||(j=se>0?se-1:me.getMonth());var ke,ze=ie||0,Ve=ae||0,Le=ce||0,Ze=we||0;return He?new Date(Date.UTC(oe,j,be,ze,Ve,Le,Ze+60*He.offset*1e3)):F?new Date(Date.UTC(oe,j,be,ze,Ve,Le,Ze)):(ke=new Date(oe,j,be,ze,Ve,Le,Ze),Ge&&(ke=W(ke).week(Ge).toDate()),ke)}catch{return new Date("")}}(w,A,M,_),this.init(),B&&B!==!0&&(this.$L=this.locale(B).$L),D&&w!=this.format(A)&&(this.$d=new Date("")),l={}}else if(A instanceof Array)for(var O=A.length,H=1;H<=O;H+=1){C[1]=A[H-1];var L=_.apply(this,C);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}H===O&&(this.$d=new Date(""))}else S.call(this,x)}}})})(cY);var l_e=cY.exports;const d6=gu(l_e);var uY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){return function(t,r){var i=r.prototype,s=i.format;i.format=function(a){var o=this,l=this.$locale();if(!this.isValid())return s.bind(this)(a);var c=this.$utils(),u=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return c.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return s.bind(this)(u)}}})})(uY);var c_e=uY.exports;const u_e=gu(c_e);var dY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){var t="week",r="year";return function(i,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=a(this).startOf(r).add(1,r).date(c),d=a(this).endOf(t);if(u.isBefore(d))return 1}var h=a(this).startOf(r).date(c).startOf(t).subtract(1,"millisecond"),f=this.diff(h,t,!0);return f<0?a(this).startOf("week").week():Math.ceil(f)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(dY);var d_e=dY.exports;const f_e=gu(d_e);var fY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){return function(t,r){r.prototype.weekYear=function(){var i=this.month(),s=this.week(),a=this.year();return s===1&&i===11?a+1:i===0&&s>=52?a-1:a}}})})(fY);var h_e=fY.exports;const p_e=gu(h_e);var hY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){return function(t,r,i){r.prototype.dayOfYear=function(s){var a=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return s==null?a:this.add(s-a,"day")}}})})(hY);var m_e=hY.exports;const v_e=gu(m_e);var pY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){return function(t,r){r.prototype.isSameOrAfter=function(i,s){return this.isSame(i,s)||this.isAfter(i,s)}}})})(pY);var g_e=pY.exports;const y_e=gu(g_e);var mY={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(vu,function(){return function(t,r){r.prototype.isSameOrBefore=function(i,s){return this.isSame(i,s)||this.isBefore(i,s)}}})})(mY);var b_e=mY.exports;const __e=gu(b_e),s7=["hours","minutes","seconds"],Nd="EP_PICKER_BASE",f6="ElPopperOptions",lC="HH:mm:ss",$m="YYYY-MM-DD",S_e={date:$m,dates:$m,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${$m} ${lC}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:$m,datetimerange:`${$m} ${lC}`},vY=Tt({disabledHours:{type:Fe(Function)},disabledMinutes:{type:Fe(Function)},disabledSeconds:{type:Fe(Function)}}),gY=Tt({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),h6=Tt({id:{type:Fe([Array,String])},name:{type:Fe([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Fe([String,Object]),default:kd},editable:{type:Boolean,default:!0},prefixIcon:{type:Fe([String,Object]),default:""},size:as,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Fe(Object),default:()=>({})},modelValue:{type:Fe([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Fe([Date,Array])},defaultTime:{type:Fe([Date,Array])},isRange:Boolean,...vY,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:Fe([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:Fe(String),values:Od,default:"bottom"},fallbackPlacements:{type:Fe(Array),default:["bottom","top","right","left"]},...g0,...aa(["ariaLabel"]),showNow:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showWeekNumber:Boolean}),x_e=Tt({id:{type:Fe(Array)},name:{type:Fe(Array)},modelValue:{type:Fe([Array,String])},startPlaceholder:String,endPlaceholder:String,disabled:Boolean}),w_e=Ie({name:"PickerRangeTrigger",inheritAttrs:!1}),C_e=Ie({...w_e,props:x_e,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(n,{expose:e,emit:t}){const r=n,i=rT(),s=gt("date"),a=gt("range"),o=ne(),l=ne(),{wrapperRef:c,isFocused:u}=gh(o,{disabled:U(()=>r.disabled)}),d=x=>{t("click",x)},h=x=>{t("mouseenter",x)},f=x=>{t("mouseleave",x)},p=x=>{t("touchstart",x)},m=x=>{t("startInput",x)},v=x=>{t("endInput",x)},g=x=>{t("startChange",x)},_=x=>{t("endChange",x)};return e({focus:()=>{var x;(x=o.value)==null||x.focus()},blur:()=>{var x,w;(x=o.value)==null||x.blur(),(w=l.value)==null||w.blur()}}),(x,w)=>($(),ue("div",{ref_key:"wrapperRef",ref:c,class:Y([y(s).is("active",y(u)),x.$attrs.class]),style:Xt(x.$attrs.style),onClick:d,onMouseenter:h,onMouseleave:f,onTouchstartPassive:p},[Ye(x.$slots,"prefix"),ye("input",Nn(y(i),{id:x.id&&x.id[0],ref_key:"inputRef",ref:o,name:x.name&&x.name[0],placeholder:x.startPlaceholder,value:x.modelValue&&x.modelValue[0],class:y(a).b("input"),disabled:x.disabled,onInput:m,onChange:g}),null,16,["id","name","placeholder","value","disabled"]),Ye(x.$slots,"range-separator"),ye("input",Nn(y(i),{id:x.id&&x.id[1],ref_key:"endInputRef",ref:l,name:x.name&&x.name[1],placeholder:x.endPlaceholder,value:x.modelValue&&x.modelValue[1],class:y(a).b("input"),disabled:x.disabled,onInput:v,onChange:_}),null,16,["id","name","placeholder","value","disabled"]),Ye(x.$slots,"suffix")],38))}});var M_e=Et(C_e,[["__file","picker-range-trigger.vue"]]);const T_e=Ie({name:"Picker"}),A_e=Ie({...T_e,props:h6,emits:[mn,Hn,"focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(n,{expose:e,emit:t}){const r=n,i=Pd(),{lang:s}=sr(),a=gt("date"),o=gt("input"),l=gt("range"),{form:c,formItem:u}=oa(),d=Lt(f6,{}),{valueOnClear:h}=V_(r,null),f=ne(),p=ne(),m=ne(!1),v=ne(!1),g=ne(null);let _=!1;const b=U(()=>r.disabled||!!(c!=null&&c.disabled)),{isFocused:S,handleFocus:x,handleBlur:w}=gh(p,{disabled:b,beforeFocus(){return r.readonly},afterFocus(){m.value=!0},beforeBlur(pe){var de;return!_&&((de=f.value)==null?void 0:de.isFocusInsideContent(pe))},afterBlur(){st(),m.value=!1,_=!1,r.validateEvent&&(u==null||u.validate("blur").catch(pe=>void 0))}}),M=U(()=>[a.b("editor"),a.bm("editor",r.type),o.e("wrapper"),a.is("disabled",b.value),a.is("active",m.value),l.b("editor"),ze?l.bm("editor",ze.value):"",i.class]),C=U(()=>[o.e("icon"),l.e("close-icon"),we.value?"":l.e("close-icon--hidden")]);ct(m,pe=>{pe?Ut(()=>{pe&&(g.value=r.modelValue)}):(Ze.value=null,Ut(()=>{A(r.modelValue)}))});const A=(pe,de)=>{(de||!qB(pe,g.value))&&(t(Hn,pe),de&&(g.value=pe),r.validateEvent&&(u==null||u.validate("change").catch(at=>void 0)))},T=pe=>{if(!qB(r.modelValue,pe)){let de;xt(pe)?de=pe.map(at=>YB(at,r.valueFormat,s.value)):pe&&(de=YB(pe,r.valueFormat,s.value)),t(mn,pe&&de,s.value)}},I=pe=>{t("keydown",pe)},D=U(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),B=(pe,de,at)=>{const Ee=D.value;Ee.length&&(!at||at==="min"?(Ee[0].setSelectionRange(pe,de),Ee[0].focus()):at==="max"&&(Ee[1].setSelectionRange(pe,de),Ee[1].focus()))},O=(pe="",de=!1)=>{m.value=de;let at;xt(pe)?at=pe.map(Ee=>Ee.toDate()):at=pe&&pe.toDate(),Ze.value=null,T(at)},H=()=>{v.value=!0},L=()=>{t("visible-change",!0)},z=()=>{v.value=!1,m.value=!1,t("visible-change",!1)},k=()=>{m.value=!0},F=()=>{m.value=!1},W=U(()=>{var pe;let de;if(Ge.value?ft.value.getDefaultValue&&(de=ft.value.getDefaultValue()):xt(r.modelValue)?de=r.modelValue.map(at=>KB(at,r.valueFormat,s.value)):de=KB((pe=r.modelValue)!=null?pe:"",r.valueFormat,s.value),ft.value.getRangeAvailableTime){const at=ft.value.getRangeAvailableTime(de);rs(at,de)||(de=at,Ge.value||T(zS(de)))}return xt(de)&&de.some(at=>!at)&&(de=[]),de}),q=U(()=>{if(!ft.value.panelReady)return"";const pe=V(W.value);return xt(Ze.value)?[Ze.value[0]||pe&&pe[0]||"",Ze.value[1]||pe&&pe[1]||""]:Ze.value!==null?Ze.value:!se.value&&Ge.value||!m.value&&Ge.value?"":pe?X.value||ie.value||ae.value?pe.join(", "):pe:""}),Z=U(()=>r.type.includes("time")),se=U(()=>r.type.startsWith("time")),X=U(()=>r.type==="dates"),ie=U(()=>r.type==="months"),ae=U(()=>r.type==="years"),ce=U(()=>r.prefixIcon||(Z.value?Gq:epe)),we=ne(!1),He=pe=>{r.readonly||b.value||(we.value&&(pe.stopPropagation(),ft.value.handleClear?ft.value.handleClear():T(h.value),A(h.value,!0),we.value=!1,z()),t("clear"))},Ge=U(()=>{const{modelValue:pe}=r;return!pe||xt(pe)&&!pe.filter(Boolean).length}),me=async pe=>{var de;r.readonly||b.value||(((de=pe.target)==null?void 0:de.tagName)!=="INPUT"||S.value)&&(m.value=!0)},be=()=>{r.readonly||b.value||!Ge.value&&r.clearable&&(we.value=!0)},oe=()=>{we.value=!1},j=pe=>{var de;r.readonly||b.value||(((de=pe.touches[0].target)==null?void 0:de.tagName)!=="INPUT"||S.value)&&(m.value=!0)},ke=U(()=>r.type.includes("range")),ze=Qi(),Ve=U(()=>{var pe,de;return(de=(pe=y(f))==null?void 0:pe.popperRef)==null?void 0:de.contentRef}),Le=UD(p,pe=>{const de=y(Ve),at=ms(p);de&&(pe.target===de||pe.composedPath().includes(de))||pe.target===at||at&&pe.composedPath().includes(at)||(m.value=!1)});br(()=>{Le==null||Le()});const Ze=ne(null),st=()=>{if(Ze.value){const pe=fe(q.value);pe&&J(pe)&&(T(zS(pe)),Ze.value=null)}Ze.value===""&&(T(h.value),A(h.value,!0),Ze.value=null)},fe=pe=>pe?ft.value.parseUserInput(pe):null,V=pe=>pe?ft.value.formatToString(pe):null,J=pe=>ft.value.isValidValue(pe),he=async pe=>{if(r.readonly||b.value)return;const{code:de}=pe;if(I(pe),de===Rt.esc){m.value===!0&&(m.value=!1,pe.preventDefault(),pe.stopPropagation());return}if(de===Rt.down&&(ft.value.handleFocusPicker&&(pe.preventDefault(),pe.stopPropagation()),m.value===!1&&(m.value=!0,await Ut()),ft.value.handleFocusPicker)){ft.value.handleFocusPicker();return}if(de===Rt.tab){_=!0;return}if(de===Rt.enter||de===Rt.numpadEnter){(Ze.value===null||Ze.value===""||J(fe(q.value)))&&(st(),m.value=!1),pe.stopPropagation();return}if(Ze.value){pe.stopPropagation();return}ft.value.handleKeydownInput&&ft.value.handleKeydownInput(pe)},Oe=pe=>{Ze.value=pe,m.value||(m.value=!0)},je=pe=>{const de=pe.target;Ze.value?Ze.value=[de.value,Ze.value[1]]:Ze.value=[de.value,null]},dt=pe=>{const de=pe.target;Ze.value?Ze.value=[Ze.value[0],de.value]:Ze.value=[null,de.value]},pt=()=>{var pe;const de=Ze.value,at=fe(de&&de[0]),Ee=y(W);if(at&&at.isValid()){Ze.value=[V(at),((pe=q.value)==null?void 0:pe[1])||null];const vt=[at,Ee&&(Ee[1]||null)];J(vt)&&(T(zS(vt)),Ze.value=null)}},Te=()=>{var pe;const de=y(Ze),at=fe(de&&de[1]),Ee=y(W);if(at&&at.isValid()){Ze.value=[((pe=y(q))==null?void 0:pe[0])||null,V(at)];const vt=[Ee&&Ee[0],at];J(vt)&&(T(zS(vt)),Ze.value=null)}},ft=ne({}),Ke=pe=>{ft.value[pe[0]]=pe[1],ft.value.panelReady=!0},Q=pe=>{t("calendar-change",pe)},_e=(pe,de,at)=>{t("panel-change",pe,de,at)},Ae=()=>{var pe;(pe=p.value)==null||pe.focus()},ge=()=>{var pe;(pe=p.value)==null||pe.blur()};return jn(Nd,{props:r}),e({focus:Ae,blur:ge,handleOpen:k,handleClose:F,onPick:O}),(pe,de)=>($(),rt(y(ia),Nn({ref_key:"refPopper",ref:f,visible:m.value,effect:"light",pure:"",trigger:"click"},pe.$attrs,{role:"dialog",teleported:"",transition:`${y(a).namespace.value}-zoom-in-top`,"popper-class":[`${y(a).namespace.value}-picker__popper`,pe.popperClass],"popper-options":y(d),"fallback-placements":pe.fallbackPlacements,"gpu-acceleration":!1,placement:pe.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:H,onShow:L,onHide:z}),{default:Re(()=>[y(ke)?($(),rt(M_e,{key:1,id:pe.id,ref_key:"inputRef",ref:p,"model-value":y(q),name:pe.name,disabled:y(b),readonly:!pe.editable||pe.readonly,"start-placeholder":pe.startPlaceholder,"end-placeholder":pe.endPlaceholder,class:Y(y(M)),style:Xt(pe.$attrs.style),"aria-label":pe.ariaLabel,tabindex:pe.tabindex,autocomplete:"off",role:"combobox",onClick:me,onFocus:y(x),onBlur:y(w),onStartInput:je,onStartChange:pt,onEndInput:dt,onEndChange:Te,onMousedown:me,onMouseenter:be,onMouseleave:oe,onTouchstartPassive:j,onKeydown:he},{prefix:Re(()=>[y(ce)?($(),rt(y(zt),{key:0,class:Y([y(o).e("icon"),y(l).e("icon")])},{default:Re(()=>[($(),rt(Ln(y(ce))))]),_:1},8,["class"])):Xe("v-if",!0)]),"range-separator":Re(()=>[Ye(pe.$slots,"range-separator",{},()=>[ye("span",{class:Y(y(l).b("separator"))},Ct(pe.rangeSeparator),3)])]),suffix:Re(()=>[pe.clearIcon?($(),rt(y(zt),{key:0,class:Y(y(C)),onMousedown:an(y(xr),["prevent"]),onClick:He},{default:Re(()=>[($(),rt(Ln(pe.clearIcon)))]),_:1},8,["class","onMousedown"])):Xe("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):($(),rt(y(wa),{key:0,id:pe.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":y(q),name:pe.name,size:y(ze),disabled:y(b),placeholder:pe.placeholder,class:Y([y(a).b("editor"),y(a).bm("editor",pe.type),pe.$attrs.class]),style:Xt(pe.$attrs.style),readonly:!pe.editable||pe.readonly||y(X)||y(ie)||y(ae)||pe.type==="week","aria-label":pe.ariaLabel,tabindex:pe.tabindex,"validate-event":!1,onInput:Oe,onFocus:y(x),onBlur:y(w),onKeydown:he,onChange:st,onMousedown:me,onMouseenter:be,onMouseleave:oe,onTouchstartPassive:j,onClick:an(()=>{},["stop"])},{prefix:Re(()=>[y(ce)?($(),rt(y(zt),{key:0,class:Y(y(o).e("icon")),onMousedown:an(me,["prevent"]),onTouchstartPassive:j},{default:Re(()=>[($(),rt(Ln(y(ce))))]),_:1},8,["class","onMousedown"])):Xe("v-if",!0)]),suffix:Re(()=>[we.value&&pe.clearIcon?($(),rt(y(zt),{key:0,class:Y(`${y(o).e("icon")} clear-icon`),onMousedown:an(y(xr),["prevent"]),onClick:He},{default:Re(()=>[($(),rt(Ln(pe.clearIcon)))]),_:1},8,["class","onMousedown"])):Xe("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:Re(()=>[Ye(pe.$slots,"default",{visible:m.value,actualVisible:v.value,parsedValue:y(W),format:pe.format,dateFormat:pe.dateFormat,timeFormat:pe.timeFormat,unlinkPanels:pe.unlinkPanels,type:pe.type,defaultValue:pe.defaultValue,showNow:pe.showNow,showFooter:pe.showFooter,showWeekNumber:pe.showWeekNumber,onPick:O,onSelectRange:B,onSetPickerOption:Ke,onCalendarChange:Q,onPanelChange:_e,onMousedown:an(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var yY=Et(A_e,[["__file","picker.vue"]]);const E_e=Tt({...gY,datetimeRole:String,parsedValue:{type:Fe(Object)}}),bY=({getAvailableHours:n,getAvailableMinutes:e,getAvailableSeconds:t})=>{const r=(a,o,l,c)=>{const u={hour:n,minute:e,second:t};let d=a;return["hour","minute","second"].forEach(h=>{if(u[h]){let f;const p=u[h];switch(h){case"minute":{f=p(d.hour(),o,c);break}case"second":{f=p(d.hour(),d.minute(),o,c);break}default:{f=p(o,c);break}}if(f!=null&&f.length&&!f.includes(d[h]())){const m=l?0:f.length-1;d=d[h](f[m])}}}),d},i={};return{timePickerOptions:i,getAvailableTime:r,onSetOption:([a,o])=>{i[a]=o}}},s3=n=>{const e=(r,i)=>r||i,t=r=>r!==!0;return n.map(e).filter(t)},_Y=(n,e,t)=>({getHoursList:(a,o)=>n3(24,n&&(()=>n==null?void 0:n(a,o))),getMinutesList:(a,o,l)=>n3(60,e&&(()=>e==null?void 0:e(a,o,l))),getSecondsList:(a,o,l,c)=>n3(60,t&&(()=>t==null?void 0:t(a,o,l,c)))}),SY=(n,e,t)=>{const{getHoursList:r,getMinutesList:i,getSecondsList:s}=_Y(n,e,t);return{getAvailableHours:(c,u)=>s3(r(c,u)),getAvailableMinutes:(c,u,d)=>s3(i(c,u,d)),getAvailableSeconds:(c,u,d,h)=>s3(s(c,u,d,h))}},xY=n=>{const e=ne(n.parsedValue);return ct(()=>n.visible,t=>{t||(e.value=n.parsedValue)}),e},I_e=Tt({role:{type:String,required:!0},spinnerDate:{type:Fe(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Fe(String),default:""},...vY}),R_e=100,P_e=600,cC={beforeMount(n,e){const t=e.value,{interval:r=R_e,delay:i=P_e}=Yt(t)?{}:t;let s,a;const o=()=>Yt(t)?t():t.handler(),l=()=>{a&&(clearTimeout(a),a=void 0),s&&(clearInterval(s),s=void 0)};n.addEventListener("mousedown",c=>{c.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),a=setTimeout(()=>{s=setInterval(()=>{o()},r)},i))})}},D_e=Ie({__name:"basic-time-spinner",props:I_e,emits:[Hn,"select-range","set-option"],setup(n,{emit:e}){const t=n,r=Lt(Nd),{isRange:i,format:s}=r.props,a=gt("time"),{getHoursList:o,getMinutesList:l,getSecondsList:c}=_Y(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let u=!1;const d=ne(),h=ne(),f=ne(),p=ne(),m={hours:h,minutes:f,seconds:p},v=U(()=>t.showSeconds?s7:s7.slice(0,2)),g=U(()=>{const{spinnerDate:Z}=t,se=Z.hour(),X=Z.minute(),ie=Z.second();return{hours:se,minutes:X,seconds:ie}}),_=U(()=>{const{hours:Z,minutes:se}=y(g),{role:X,spinnerDate:ie}=t,ae=i?void 0:ie;return{hours:o(X,ae),minutes:l(Z,X,ae),seconds:c(Z,se,X,ae)}}),b=U(()=>{const{hours:Z,minutes:se,seconds:X}=y(g);return{hours:t3(Z,23),minutes:t3(se,59),seconds:t3(X,59)}}),S=Co(Z=>{u=!1,M(Z)},200),x=Z=>{if(!!!t.amPmMode)return"";const X=t.amPmMode==="A";let ie=Z<12?" am":" pm";return X&&(ie=ie.toUpperCase()),ie},w=Z=>{let se=[0,0];const X=s||lC,ie=X.indexOf("HH"),ae=X.indexOf("mm"),ce=X.indexOf("ss");switch(Z){case"hours":ie!==-1&&(se=[ie,ie+2]);break;case"minutes":ae!==-1&&(se=[ae,ae+2]);break;case"seconds":ce!==-1&&(se=[ce,ce+2]);break}const[we,He]=se;e("select-range",we,He),d.value=Z},M=Z=>{T(Z,y(g)[Z])},C=()=>{M("hours"),M("minutes"),M("seconds")},A=Z=>Z.querySelector(`.${a.namespace.value}-scrollbar__wrap`),T=(Z,se)=>{if(t.arrowControl)return;const X=y(m[Z]);X&&X.$el&&(A(X.$el).scrollTop=Math.max(0,se*I(Z)))},I=Z=>{const se=y(m[Z]),X=se==null?void 0:se.$el.querySelector("li");return X&&Number.parseFloat(Qu(X,"height"))||0},D=()=>{O(1)},B=()=>{O(-1)},O=Z=>{d.value||w("hours");const se=d.value,X=y(g)[se],ie=d.value==="hours"?24:60,ae=H(se,X,Z,ie);L(se,ae),T(se,ae),Ut(()=>w(se))},H=(Z,se,X,ie)=>{let ae=(se+X+ie)%ie;const ce=y(_)[Z];for(;ce[ae]&&ae!==se;)ae=(ae+X+ie)%ie;return ae},L=(Z,se)=>{if(y(_)[Z][se])return;const{hours:ae,minutes:ce,seconds:we}=y(g);let He;switch(Z){case"hours":He=t.spinnerDate.hour(se).minute(ce).second(we);break;case"minutes":He=t.spinnerDate.hour(ae).minute(se).second(we);break;case"seconds":He=t.spinnerDate.hour(ae).minute(ce).second(se);break}e(Hn,He)},z=(Z,{value:se,disabled:X})=>{X||(L(Z,se),w(Z),T(Z,se))},k=Z=>{const se=y(m[Z]);if(!se)return;u=!0,S(Z);const X=Math.min(Math.round((A(se.$el).scrollTop-(F(Z)*.5-10)/I(Z)+3)/I(Z)),Z==="hours"?23:59);L(Z,X)},F=Z=>y(m[Z]).$el.offsetHeight,W=()=>{const Z=se=>{const X=y(m[se]);X&&X.$el&&(A(X.$el).onscroll=()=>{k(se)})};Z("hours"),Z("minutes"),Z("seconds")};Rn(()=>{Ut(()=>{!t.arrowControl&&W(),C(),t.role==="start"&&w("hours")})});const q=(Z,se)=>{m[se].value=Z??void 0};return e("set-option",[`${t.role}_scrollDown`,O]),e("set-option",[`${t.role}_emitSelectRange`,w]),ct(()=>t.spinnerDate,()=>{u||C()}),(Z,se)=>($(),ue("div",{class:Y([y(a).b("spinner"),{"has-seconds":Z.showSeconds}])},[Z.arrowControl?Xe("v-if",!0):($(!0),ue(Bt,{key:0},Fn(y(v),X=>($(),rt(y(mc),{key:X,ref_for:!0,ref:ie=>q(ie,X),class:Y(y(a).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":y(a).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ie=>w(X),onMousemove:ie=>M(X)},{default:Re(()=>[($(!0),ue(Bt,null,Fn(y(_)[X],(ie,ae)=>($(),ue("li",{key:ae,class:Y([y(a).be("spinner","item"),y(a).is("active",ae===y(g)[X]),y(a).is("disabled",ie)]),onClick:ce=>z(X,{value:ae,disabled:ie})},[X==="hours"?($(),ue(Bt,{key:0},[Bn(Ct(("0"+(Z.amPmMode?ae%12||12:ae)).slice(-2))+Ct(x(ae)),1)],64)):($(),ue(Bt,{key:1},[Bn(Ct(("0"+ae).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),Z.arrowControl?($(!0),ue(Bt,{key:1},Fn(y(v),X=>($(),ue("div",{key:X,class:Y([y(a).be("spinner","wrapper"),y(a).is("arrow")]),onMouseenter:ie=>w(X)},[Cn(($(),rt(y(zt),{class:Y(["arrow-up",y(a).be("spinner","arrow")])},{default:Re(()=>[xe(y(eT))]),_:1},8,["class"])),[[y(cC),B]]),Cn(($(),rt(y(zt),{class:Y(["arrow-down",y(a).be("spinner","arrow")])},{default:Re(()=>[xe(y(mu))]),_:1},8,["class"])),[[y(cC),D]]),ye("ul",{class:Y(y(a).be("spinner","list"))},[($(!0),ue(Bt,null,Fn(y(b)[X],(ie,ae)=>($(),ue("li",{key:ae,class:Y([y(a).be("spinner","item"),y(a).is("active",ie===y(g)[X]),y(a).is("disabled",y(_)[X][ie])])},[y(en)(ie)?($(),ue(Bt,{key:0},[X==="hours"?($(),ue(Bt,{key:0},[Bn(Ct(("0"+(Z.amPmMode?ie%12||12:ie)).slice(-2))+Ct(x(ie)),1)],64)):($(),ue(Bt,{key:1},[Bn(Ct(("0"+ie).slice(-2)),1)],64))],64)):Xe("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):Xe("v-if",!0)],2))}});var qI=Et(D_e,[["__file","basic-time-spinner.vue"]]);const L_e=Ie({__name:"panel-time-pick",props:E_e,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,r=Lt(Nd),{arrowControl:i,disabledHours:s,disabledMinutes:a,disabledSeconds:o,defaultValue:l}=r.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=SY(s,a,o),h=gt("time"),{t:f,lang:p}=sr(),m=ne([0,2]),v=xY(t),g=U(()=>nr(t.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),_=U(()=>t.format.includes("ss")),b=U(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),S=k=>{const F=xn(k).locale(p.value),W=O(F);return F.isSame(W)},x=()=>{e("pick",v.value,!1)},w=(k=!1,F=!1)=>{F||e("pick",t.parsedValue,k)},M=k=>{if(!t.visible)return;const F=O(k).millisecond(0);e("pick",F,!0)},C=(k,F)=>{e("select-range",k,F),m.value=[k,F]},A=k=>{const F=t.format,W=F.indexOf("HH"),q=F.indexOf("mm"),Z=F.indexOf("ss"),se=[],X=[];W!==-1&&(se.push(W),X.push("hours")),q!==-1&&(se.push(q),X.push("minutes")),Z!==-1&&_.value&&(se.push(Z),X.push("seconds"));const ae=(se.indexOf(m.value[0])+k+se.length)%se.length;I.start_emitSelectRange(X[ae])},T=k=>{const F=k.code,{left:W,right:q,up:Z,down:se}=Rt;if([W,q].includes(F)){A(F===W?-1:1),k.preventDefault();return}if([Z,se].includes(F)){const X=F===Z?-1:1;I.start_scrollDown(X),k.preventDefault();return}},{timePickerOptions:I,onSetOption:D,getAvailableTime:B}=bY({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),O=k=>B(k,t.datetimeRole||"",!0),H=k=>k?xn(k,t.format).locale(p.value):null,L=k=>k?k.format(t.format):null,z=()=>xn(l).locale(p.value);return e("set-picker-option",["isValidValue",S]),e("set-picker-option",["formatToString",L]),e("set-picker-option",["parseUserInput",H]),e("set-picker-option",["handleKeydownInput",T]),e("set-picker-option",["getRangeAvailableTime",O]),e("set-picker-option",["getDefaultValue",z]),(k,F)=>($(),rt(Os,{name:y(g)},{default:Re(()=>[k.actualVisible||k.visible?($(),ue("div",{key:0,class:Y(y(h).b("panel"))},[ye("div",{class:Y([y(h).be("panel","content"),{"has-seconds":y(_)}])},[xe(qI,{ref:"spinner",role:k.datetimeRole||"start","arrow-control":y(i),"show-seconds":y(_),"am-pm-mode":y(b),"spinner-date":k.parsedValue,"disabled-hours":y(s),"disabled-minutes":y(a),"disabled-seconds":y(o),onChange:M,onSetOption:y(D),onSelectRange:C},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),ye("div",{class:Y(y(h).be("panel","footer"))},[ye("button",{type:"button",class:Y([y(h).be("panel","btn"),"cancel"]),onClick:x},Ct(y(f)("el.datepicker.cancel")),3),ye("button",{type:"button",class:Y([y(h).be("panel","btn"),"confirm"]),onClick:W=>w()},Ct(y(f)("el.datepicker.confirm")),11,["onClick"])],2)],2)):Xe("v-if",!0)]),_:1},8,["name"]))}});var uC=Et(L_e,[["__file","panel-time-pick.vue"]]);const k_e=Tt({...gY,parsedValue:{type:Fe(Array)}}),O_e=Ie({__name:"panel-time-range",props:k_e,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,r=(me,be)=>{const oe=[];for(let j=me;j<=be;j++)oe.push(j);return oe},{t:i,lang:s}=sr(),a=gt("time"),o=gt("picker"),l=Lt(Nd),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:f}=l.props,p=U(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",c),S.value?"has-seconds":""]),m=U(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",c),S.value?"has-seconds":""]),v=U(()=>t.parsedValue[0]),g=U(()=>t.parsedValue[1]),_=xY(t),b=()=>{e("pick",_.value,!1)},S=U(()=>t.format.includes("ss")),x=U(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),w=(me=!1)=>{e("pick",[v.value,g.value],me)},M=me=>{T(me.millisecond(0),g.value)},C=me=>{T(v.value,me.millisecond(0))},A=me=>{const be=me.map(j=>xn(j).locale(s.value)),oe=q(be);return be[0].isSame(oe[0])&&be[1].isSame(oe[1])},T=(me,be)=>{t.visible&&e("pick",[me,be],!0)},I=U(()=>v.value>g.value),D=ne([0,2]),B=(me,be)=>{e("select-range",me,be,"min"),D.value=[me,be]},O=U(()=>S.value?11:8),H=(me,be)=>{e("select-range",me,be,"max");const oe=y(O);D.value=[me+oe,be+oe]},L=me=>{const be=S.value?[0,3,6,11,14,17]:[0,3,8,11],oe=["hours","minutes"].concat(S.value?["seconds"]:[]),ke=(be.indexOf(D.value[0])+me+be.length)%be.length,ze=be.length/2;ke<ze?ie.start_emitSelectRange(oe[ke]):ie.end_emitSelectRange(oe[ke-ze])},z=me=>{const be=me.code,{left:oe,right:j,up:ke,down:ze}=Rt;if([oe,j].includes(be)){L(be===oe?-1:1),me.preventDefault();return}if([ke,ze].includes(be)){const Ve=be===ke?-1:1,Le=D.value[0]<O.value?"start":"end";ie[`${Le}_scrollDown`](Ve),me.preventDefault();return}},k=(me,be)=>{const oe=u?u(me):[],j=me==="start",ze=(be||(j?g.value:v.value)).hour(),Ve=j?r(ze+1,23):r(0,ze-1);return XA(oe,Ve)},F=(me,be,oe)=>{const j=d?d(me,be):[],ke=be==="start",ze=oe||(ke?g.value:v.value),Ve=ze.hour();if(me!==Ve)return j;const Le=ze.minute(),Ze=ke?r(Le+1,59):r(0,Le-1);return XA(j,Ze)},W=(me,be,oe,j)=>{const ke=h?h(me,be,oe):[],ze=oe==="start",Ve=j||(ze?g.value:v.value),Le=Ve.hour(),Ze=Ve.minute();if(me!==Le||be!==Ze)return ke;const st=Ve.second(),fe=ze?r(st+1,59):r(0,st-1);return XA(ke,fe)},q=([me,be])=>[ae(me,"start",!0,be),ae(be,"end",!1,me)],{getAvailableHours:Z,getAvailableMinutes:se,getAvailableSeconds:X}=SY(k,F,W),{timePickerOptions:ie,getAvailableTime:ae,onSetOption:ce}=bY({getAvailableHours:Z,getAvailableMinutes:se,getAvailableSeconds:X}),we=me=>me?xt(me)?me.map(be=>xn(be,t.format).locale(s.value)):xn(me,t.format).locale(s.value):null,He=me=>me?xt(me)?me.map(be=>be.format(t.format)):me.format(t.format):null,Ge=()=>{if(xt(f))return f.map(be=>xn(be).locale(s.value));const me=xn(f).locale(s.value);return[me,me.add(60,"m")]};return e("set-picker-option",["formatToString",He]),e("set-picker-option",["parseUserInput",we]),e("set-picker-option",["isValidValue",A]),e("set-picker-option",["handleKeydownInput",z]),e("set-picker-option",["getDefaultValue",Ge]),e("set-picker-option",["getRangeAvailableTime",q]),(me,be)=>me.actualVisible?($(),ue("div",{key:0,class:Y([y(a).b("range-picker"),y(o).b("panel")])},[ye("div",{class:Y(y(a).be("range-picker","content"))},[ye("div",{class:Y(y(a).be("range-picker","cell"))},[ye("div",{class:Y(y(a).be("range-picker","header"))},Ct(y(i)("el.datepicker.startTime")),3),ye("div",{class:Y(y(p))},[xe(qI,{ref:"minSpinner",role:"start","show-seconds":y(S),"am-pm-mode":y(x),"arrow-control":y(c),"spinner-date":y(v),"disabled-hours":k,"disabled-minutes":F,"disabled-seconds":W,onChange:M,onSetOption:y(ce),onSelectRange:B},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),ye("div",{class:Y(y(a).be("range-picker","cell"))},[ye("div",{class:Y(y(a).be("range-picker","header"))},Ct(y(i)("el.datepicker.endTime")),3),ye("div",{class:Y(y(m))},[xe(qI,{ref:"maxSpinner",role:"end","show-seconds":y(S),"am-pm-mode":y(x),"arrow-control":y(c),"spinner-date":y(g),"disabled-hours":k,"disabled-minutes":F,"disabled-seconds":W,onChange:C,onSetOption:y(ce),onSelectRange:H},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),ye("div",{class:Y(y(a).be("panel","footer"))},[ye("button",{type:"button",class:Y([y(a).be("panel","btn"),"cancel"]),onClick:oe=>b()},Ct(y(i)("el.datepicker.cancel")),11,["onClick"]),ye("button",{type:"button",class:Y([y(a).be("panel","btn"),"confirm"]),disabled:y(I),onClick:oe=>w()},Ct(y(i)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Xe("v-if",!0)}});var N_e=Et(O_e,[["__file","panel-time-range.vue"]]);xn.extend(d6);var B_e=Ie({name:"ElTimePicker",install:null,props:{...h6,isRange:Boolean},emits:[mn],setup(n,e){const t=ne(),[r,i]=n.isRange?["timerange",N_e]:["time",uC],s=a=>e.emit(mn,a);return jn(f6,n.popperOptions),e.expose({focus:()=>{var a;(a=t.value)==null||a.focus()},blur:()=>{var a;(a=t.value)==null||a.blur()},handleOpen:()=>{var a;(a=t.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=t.value)==null||a.handleClose()}}),()=>{var a;const o=(a=n.format)!=null?a:lC;return xe(yY,Nn(n,{ref:t,type:r,format:o,"onUpdate:modelValue":s}),{default:l=>xe(i,l,null)})}}});const F_e=bn(B_e),p6=Symbol(),Y_="ElIsDefaultFormat",z_e=Tt({...h6,type:{type:Fe(String),default:"date"}}),U_e=["date","dates","year","years","month","months","week","range"],m6=Tt({disabledDate:{type:Fe(Function)},date:{type:Fe(Object),required:!0},minDate:{type:Fe(Object)},maxDate:{type:Fe(Object)},parsedValue:{type:Fe([Object,Array])},rangeState:{type:Fe(Object),default:()=>({endDate:null,selecting:!1})}}),wY=Tt({type:{type:Fe(String),required:!0,values:sye},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showWeekNumber:Boolean}),v6=Tt({unlinkPanels:Boolean,visible:Boolean,showFooter:{type:Boolean,default:!0},parsedValue:{type:Fe(Array)}}),g6=n=>({type:String,values:U_e,default:n}),H_e=Tt({...wY,parsedValue:{type:Fe([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Ob=n=>{if(!xt(n))return!1;const[e,t]=n;return xn.isDayjs(e)&&xn.isDayjs(t)&&xn(e).isValid()&&xn(t).isValid()&&e.isSameOrBefore(t)},dT=(n,{lang:e,step:t=1,unit:r,unlinkPanels:i})=>{let s;if(xt(n)){let[a,o]=n.map(l=>xn(l).locale(e));return i||(o=a.add(t,r)),[a,o]}else n?s=xn(n):s=xn();return s=s.locale(e),[s,s.add(t,r)]},V_e=(n,e,{columnIndexOffset:t,startDate:r,nextEndDate:i,now:s,unit:a,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<n.row;u++){const d=e[u];for(let h=0;h<n.column;h++){let f=d[h+t];f||(f={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const p=u*n.column+h,m=o(p);f.dayjs=m,f.date=m.toDate(),f.timestamp=m.valueOf(),f.type="normal",f.inRange=!!(r&&m.isSameOrAfter(r,a)&&i&&m.isSameOrBefore(i,a))||!!(r&&m.isSameOrBefore(r,a)&&i&&m.isSameOrAfter(i,a)),r!=null&&r.isSameOrAfter(i)?(f.start=!!i&&m.isSame(i,a),f.end=r&&m.isSame(r,a)):(f.start=!!r&&m.isSame(r,a),f.end=!!i&&m.isSame(i,a)),m.isSame(s,a)&&(f.type="today"),l==null||l(f,{rowIndex:u,columnIndex:h}),d[h+t]=f}c==null||c(d)}},dC=(n,e,t,r)=>{const i=xn().locale(r).startOf("month").month(t).year(e).hour(n.hour()).minute(n.minute()).second(n.second()),s=i.daysInMonth();return Vf(s).map(a=>i.add(a,"day").toDate())},tg=(n,e,t,r,i)=>{const s=xn().year(e).month(t).startOf("month").hour(n.hour()).minute(n.minute()).second(n.second()),a=dC(n,e,t,r).find(o=>!(i!=null&&i(o)));return a?xn(a).locale(r):s.locale(r)},fC=(n,e,t)=>{const r=n.year();if(!(t!=null&&t(n.toDate())))return n.locale(e);const i=n.month();if(!dC(n,r,i,e).every(t))return tg(n,r,i,e,t);for(let s=0;s<12;s++)if(!dC(n,r,s,e).every(t))return tg(n,r,s,e,t);return n},ng=(n,e,t,r)=>{if(xt(n))return n.map(i=>ng(i,e,t,r));if(Wt(n)){const i=r.value?xn(n):xn(n,e);if(!i.isValid())return i}return xn(n,e).locale(t)},$_e=Tt({...m6,cellClassName:{type:Fe(Function)},showWeekNumber:Boolean,selectionMode:g6("date")}),G_e=["changerange","pick","select"],KI=(n="")=>["normal","today"].includes(n),W_e=(n,e)=>{const{lang:t}=sr(),r=ne(),i=ne(),s=ne(),a=ne(),o=ne([[],[],[],[],[],[]]);let l=!1;const c=n.date.$locale().weekStart||7,u=n.date.locale("en").localeData().weekdaysShort().map(F=>F.toLowerCase()),d=U(()=>c>3?7-c:-c),h=U(()=>{const F=n.date.startOf("month");return F.subtract(F.day()||7,"day")}),f=U(()=>u.concat(u).slice(c,c+7)),p=U(()=>XW(y(S)).some(F=>F.isCurrent)),m=U(()=>{const F=n.date.startOf("month"),W=F.day()||7,q=F.daysInMonth(),Z=F.subtract(1,"month").daysInMonth();return{startOfMonthDay:W,dateCountOfMonth:q,dateCountOfLastMonth:Z}}),v=U(()=>n.selectionMode==="dates"?Ha(n.parsedValue):[]),g=(F,{count:W,rowIndex:q,columnIndex:Z})=>{const{startOfMonthDay:se,dateCountOfMonth:X,dateCountOfLastMonth:ie}=y(m),ae=y(d);if(q>=0&&q<=1){const ce=se+ae<0?7+se+ae:se+ae;if(Z+q*7>=ce)return F.text=W,!0;F.text=ie-(ce-Z%7)+1+q*7,F.type="prev-month"}else return W<=X?F.text=W:(F.text=W-X,F.type="next-month"),!0;return!1},_=(F,{columnIndex:W,rowIndex:q},Z)=>{const{disabledDate:se,cellClassName:X}=n,ie=y(v),ae=g(F,{count:Z,rowIndex:q,columnIndex:W}),ce=F.dayjs.toDate();return F.selected=ie.find(we=>we.isSame(F.dayjs,"day")),F.isSelected=!!F.selected,F.isCurrent=w(F),F.disabled=se==null?void 0:se(ce),F.customClass=X==null?void 0:X(ce),ae},b=F=>{if(n.selectionMode==="week"){const[W,q]=n.showWeekNumber?[1,7]:[0,6],Z=k(F[W+1]);F[W].inRange=Z,F[W].start=Z,F[q].inRange=Z,F[q].end=Z}},S=U(()=>{const{minDate:F,maxDate:W,rangeState:q,showWeekNumber:Z}=n,se=y(d),X=y(o),ie="day";let ae=1;if(V_e({row:6,column:7},X,{startDate:F,columnIndexOffset:Z?1:0,nextEndDate:q.endDate||W||q.selecting&&F||null,now:xn().locale(y(t)).startOf(ie),unit:ie,relativeDateGetter:ce=>y(h).add(ce-se,ie),setCellMetadata:(...ce)=>{_(...ce,ae)&&(ae+=1)},setRowMetadata:b}),Z)for(let ce=0;ce<6;ce++)X[ce][1].dayjs&&(X[ce][0]={type:"week",text:X[ce][1].dayjs.week()});return X});ct(()=>n.date,async()=>{var F;(F=y(r))!=null&&F.contains(document.activeElement)&&(await Ut(),await x())});const x=async()=>{var F;return(F=y(i))==null?void 0:F.focus()},w=F=>n.selectionMode==="date"&&KI(F.type)&&M(F,n.parsedValue),M=(F,W)=>W?xn(W).locale(y(t)).isSame(n.date.date(Number(F.text)),"day"):!1,C=(F,W)=>{const q=F*7+(W-(n.showWeekNumber?1:0))-y(d);return y(h).add(q,"day")},A=F=>{var W;if(!n.rangeState.selecting)return;let q=F.target;if(q.tagName==="SPAN"&&(q=(W=q.parentNode)==null?void 0:W.parentNode),q.tagName==="DIV"&&(q=q.parentNode),q.tagName!=="TD")return;const Z=q.parentNode.rowIndex-1,se=q.cellIndex;y(S)[Z][se].disabled||(Z!==y(s)||se!==y(a))&&(s.value=Z,a.value=se,e("changerange",{selecting:!0,endDate:C(Z,se)}))},T=F=>!y(p)&&(F==null?void 0:F.text)===1&&F.type==="normal"||F.isCurrent,I=F=>{l||y(p)||n.selectionMode!=="date"||z(F,!0)},D=F=>{F.target.closest("td")&&(l=!0)},B=F=>{F.target.closest("td")&&(l=!1)},O=F=>{!n.rangeState.selecting||!n.minDate?(e("pick",{minDate:F,maxDate:null}),e("select",!0)):(F>=n.minDate?e("pick",{minDate:n.minDate,maxDate:F}):e("pick",{minDate:F,maxDate:n.minDate}),e("select",!1))},H=F=>{const W=F.week(),q=`${F.year()}w${W}`;e("pick",{year:F.year(),week:W,value:q,date:F.startOf("week")})},L=(F,W)=>{const q=W?Ha(n.parsedValue).filter(Z=>(Z==null?void 0:Z.valueOf())!==F.valueOf()):Ha(n.parsedValue).concat([F]);e("pick",q)},z=(F,W=!1)=>{const q=F.target.closest("td");if(!q)return;const Z=q.parentNode.rowIndex-1,se=q.cellIndex,X=y(S)[Z][se];if(X.disabled||X.type==="week")return;const ie=C(Z,se);switch(n.selectionMode){case"range":{O(ie);break}case"date":{e("pick",ie,W);break}case"week":{H(ie);break}case"dates":{L(ie,!!X.selected);break}}},k=F=>{if(n.selectionMode!=="week")return!1;let W=n.date.startOf("day");if(F.type==="prev-month"&&(W=W.subtract(1,"month")),F.type==="next-month"&&(W=W.add(1,"month")),W=W.date(Number.parseInt(F.text,10)),n.parsedValue&&!xt(n.parsedValue)){const q=(n.parsedValue.day()-c+7)%7-1;return n.parsedValue.subtract(q,"day").isSame(W,"day")}return!1};return{WEEKS:f,rows:S,tbodyRef:r,currentCellRef:i,focus:x,isCurrent:w,isWeekActive:k,isSelectedCell:T,handlePickDate:z,handleMouseUp:B,handleMouseDown:D,handleMouseMove:A,handleFocus:I}},q_e=(n,{isCurrent:e,isWeekActive:t})=>{const r=gt("date-table"),{t:i}=sr(),s=U(()=>[r.b(),{"is-week-mode":n.selectionMode==="week"}]),a=U(()=>i("el.datepicker.dateTablePrompt")),o=c=>{const u=[];return KI(c.type)&&!c.disabled?(u.push("available"),c.type==="today"&&u.push("today")):u.push(c.type),e(c)&&u.push("current"),c.inRange&&(KI(c.type)||n.selectionMode==="week")&&(u.push("in-range"),c.start&&u.push("start-date"),c.end&&u.push("end-date")),c.disabled&&u.push("disabled"),c.selected&&u.push("selected"),c.customClass&&u.push(c.customClass),u.join(" ")},l=c=>[r.e("row"),{current:t(c)}];return{tableKls:s,tableLabel:a,weekHeaderClass:r.e("week-header"),getCellClasses:o,getRowKls:l,t:i}},K_e=Tt({cell:{type:Fe(Object)}});var y6=Ie({name:"ElDatePickerCell",props:K_e,setup(n){const e=gt("date-table-cell"),{slots:t}=Lt(p6);return()=>{const{cell:r}=n;return Ye(t,"default",{...r},()=>{var i;return[xe("div",{class:e.b()},[xe("span",{class:e.e("text")},[(i=r==null?void 0:r.renderText)!=null?i:r==null?void 0:r.text])])]})}}});const Y_e=Ie({__name:"basic-date-table",props:$_e,emits:G_e,setup(n,{expose:e,emit:t}){const r=n,{WEEKS:i,rows:s,tbodyRef:a,currentCellRef:o,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:h,handleMouseUp:f,handleMouseDown:p,handleMouseMove:m,handleFocus:v}=W_e(r,t),{tableLabel:g,tableKls:_,getCellClasses:b,getRowKls:S,weekHeaderClass:x,t:w}=q_e(r,{isCurrent:c,isWeekActive:u});let M=!1;return br(()=>{M=!0}),e({focus:l}),(C,A)=>($(),ue("table",{"aria-label":y(g),class:Y(y(_)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:y(h),onMousemove:y(m),onMousedown:y(p),onMouseup:y(f)},[ye("tbody",{ref_key:"tbodyRef",ref:a},[ye("tr",null,[C.showWeekNumber?($(),ue("th",{key:0,scope:"col",class:Y(y(x))},null,2)):Xe("v-if",!0),($(!0),ue(Bt,null,Fn(y(i),(T,I)=>($(),ue("th",{key:I,"aria-label":y(w)("el.datepicker.weeksFull."+T),scope:"col"},Ct(y(w)("el.datepicker.weeks."+T)),9,["aria-label"]))),128))]),($(!0),ue(Bt,null,Fn(y(s),(T,I)=>($(),ue("tr",{key:I,class:Y(y(S)(T[1]))},[($(!0),ue(Bt,null,Fn(T,(D,B)=>($(),ue("td",{key:`${I}.${B}`,ref_for:!0,ref:O=>!y(M)&&y(d)(D)&&(o.value=O),class:Y(y(b)(D)),"aria-current":D.isCurrent?"date":void 0,"aria-selected":D.isCurrent,tabindex:y(d)(D)?0:-1,onFocus:y(v)},[xe(y(y6),{cell:D},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var YI=Et(Y_e,[["__file","basic-date-table.vue"]]);const X_e=Tt({...m6,selectionMode:g6("month")}),j_e=Ie({__name:"basic-month-table",props:X_e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const r=n,i=gt("month-table"),{t:s,lang:a}=sr(),o=ne(),l=ne(),c=ne(r.date.locale("en").localeData().monthsShort().map(b=>b.toLowerCase())),u=ne([[],[],[]]),d=ne(),h=ne(),f=U(()=>{var b,S;const x=u.value,w=xn().locale(a.value).startOf("month");for(let M=0;M<3;M++){const C=x[M];for(let A=0;A<4;A++){const T=C[A]||(C[A]={row:M,column:A,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});T.type="normal";const I=M*4+A,D=r.date.startOf("year").month(I),B=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;T.inRange=!!(r.minDate&&D.isSameOrAfter(r.minDate,"month")&&B&&D.isSameOrBefore(B,"month"))||!!(r.minDate&&D.isSameOrBefore(r.minDate,"month")&&B&&D.isSameOrAfter(B,"month")),(b=r.minDate)!=null&&b.isSameOrAfter(B)?(T.start=!!(B&&D.isSame(B,"month")),T.end=r.minDate&&D.isSame(r.minDate,"month")):(T.start=!!(r.minDate&&D.isSame(r.minDate,"month")),T.end=!!(B&&D.isSame(B,"month"))),w.isSame(D)&&(T.type="today"),T.text=I,T.disabled=((S=r.disabledDate)==null?void 0:S.call(r,D.toDate()))||!1}}return x}),p=()=>{var b;(b=l.value)==null||b.focus()},m=b=>{const S={},x=r.date.year(),w=new Date,M=b.text;return S.disabled=r.disabledDate?dC(r.date,x,M,a.value).every(r.disabledDate):!1,S.current=Ha(r.parsedValue).findIndex(C=>xn.isDayjs(C)&&C.year()===x&&C.month()===M)>=0,S.today=w.getFullYear()===x&&w.getMonth()===M,b.inRange&&(S["in-range"]=!0,b.start&&(S["start-date"]=!0),b.end&&(S["end-date"]=!0)),S},v=b=>{const S=r.date.year(),x=b.text;return Ha(r.date).findIndex(w=>w.year()===S&&w.month()===x)>=0},g=b=>{var S;if(!r.rangeState.selecting)return;let x=b.target;if(x.tagName==="SPAN"&&(x=(S=x.parentNode)==null?void 0:S.parentNode),x.tagName==="DIV"&&(x=x.parentNode),x.tagName!=="TD")return;const w=x.parentNode.rowIndex,M=x.cellIndex;f.value[w][M].disabled||(w!==d.value||M!==h.value)&&(d.value=w,h.value=M,t("changerange",{selecting:!0,endDate:r.date.startOf("year").month(w*4+M)}))},_=b=>{var S;const x=(S=b.target)==null?void 0:S.closest("td");if((x==null?void 0:x.tagName)!=="TD"||ho(x,"disabled"))return;const w=x.cellIndex,C=x.parentNode.rowIndex*4+w,A=r.date.startOf("year").month(C);if(r.selectionMode==="months"){if(b.type==="keydown"){t("pick",Ha(r.parsedValue),!1);return}const T=tg(r.date,r.date.year(),C,a.value,r.disabledDate),I=ho(x,"current")?Ha(r.parsedValue).filter(D=>(D==null?void 0:D.year())!==T.year()||(D==null?void 0:D.month())!==T.month()):Ha(r.parsedValue).concat([xn(T)]);t("pick",I)}else r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&A>=r.minDate?t("pick",{minDate:r.minDate,maxDate:A}):t("pick",{minDate:A,maxDate:r.minDate}),t("select",!1)):(t("pick",{minDate:A,maxDate:null}),t("select",!0)):t("pick",C)};return ct(()=>r.date,async()=>{var b,S;(b=o.value)!=null&&b.contains(document.activeElement)&&(await Ut(),(S=l.value)==null||S.focus())}),e({focus:p}),(b,S)=>($(),ue("table",{role:"grid","aria-label":y(s)("el.datepicker.monthTablePrompt"),class:Y(y(i).b()),onClick:_,onMousemove:g},[ye("tbody",{ref_key:"tbodyRef",ref:o},[($(!0),ue(Bt,null,Fn(y(f),(x,w)=>($(),ue("tr",{key:w},[($(!0),ue(Bt,null,Fn(x,(M,C)=>($(),ue("td",{key:C,ref_for:!0,ref:A=>v(M)&&(l.value=A),class:Y(m(M)),"aria-selected":`${v(M)}`,"aria-label":y(s)(`el.datepicker.month${+M.text+1}`),tabindex:v(M)?0:-1,onKeydown:[Dr(an(_,["prevent","stop"]),["space"]),Dr(an(_,["prevent","stop"]),["enter"])]},[xe(y(y6),{cell:{...M,renderText:y(s)("el.datepicker.months."+c.value[M.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var Nb=Et(j_e,[["__file","basic-month-table.vue"]]);const Z_e=Tt({...m6,selectionMode:g6("year")}),Q_e=Ie({__name:"basic-year-table",props:Z_e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const r=n,i=(S,x)=>{const w=xn(String(S)).locale(x).startOf("year"),C=w.endOf("year").dayOfYear();return Vf(C).map(A=>w.add(A,"day").toDate())},s=gt("year-table"),{t:a,lang:o}=sr(),l=ne(),c=ne(),u=U(()=>Math.floor(r.date.year()/10)*10),d=ne([[],[],[]]),h=ne(),f=ne(),p=U(()=>{var S;const x=d.value,w=xn().locale(o.value).startOf("year");for(let M=0;M<3;M++){const C=x[M];for(let A=0;A<4&&!(M*4+A>=10);A++){let T=C[A];T||(T={row:M,column:A,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),T.type="normal";const I=M*4+A+u.value,D=xn().year(I),B=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;T.inRange=!!(r.minDate&&D.isSameOrAfter(r.minDate,"year")&&B&&D.isSameOrBefore(B,"year"))||!!(r.minDate&&D.isSameOrBefore(r.minDate,"year")&&B&&D.isSameOrAfter(B,"year")),(S=r.minDate)!=null&&S.isSameOrAfter(B)?(T.start=!!(B&&D.isSame(B,"year")),T.end=!!(r.minDate&&D.isSame(r.minDate,"year"))):(T.start=!!(r.minDate&&D.isSame(r.minDate,"year")),T.end=!!(B&&D.isSame(B,"year"))),w.isSame(D)&&(T.type="today"),T.text=I;const H=D.toDate();T.disabled=r.disabledDate&&r.disabledDate(H)||!1,C[A]=T}}return x}),m=()=>{var S;(S=c.value)==null||S.focus()},v=S=>{const x={},w=xn().locale(o.value),M=S.text;return x.disabled=r.disabledDate?i(M,o.value).every(r.disabledDate):!1,x.today=w.year()===M,x.current=Ha(r.parsedValue).findIndex(C=>C.year()===M)>=0,S.inRange&&(x["in-range"]=!0,S.start&&(x["start-date"]=!0),S.end&&(x["end-date"]=!0)),x},g=S=>{const x=S.text;return Ha(r.date).findIndex(w=>w.year()===x)>=0},_=S=>{var x;const w=(x=S.target)==null?void 0:x.closest("td");if(!w||!w.textContent||ho(w,"disabled"))return;const M=w.cellIndex,A=w.parentNode.rowIndex*4+M+u.value,T=xn().year(A);if(r.selectionMode==="range")r.rangeState.selecting?(r.minDate&&T>=r.minDate?t("pick",{minDate:r.minDate,maxDate:T}):t("pick",{minDate:T,maxDate:r.minDate}),t("select",!1)):(t("pick",{minDate:T,maxDate:null}),t("select",!0));else if(r.selectionMode==="years"){if(S.type==="keydown"){t("pick",Ha(r.parsedValue),!1);return}const I=fC(T.startOf("year"),o.value,r.disabledDate),D=ho(w,"current")?Ha(r.parsedValue).filter(B=>(B==null?void 0:B.year())!==A):Ha(r.parsedValue).concat([I]);t("pick",D)}else t("pick",A)},b=S=>{var x;if(!r.rangeState.selecting)return;const w=(x=S.target)==null?void 0:x.closest("td");if(!w)return;const M=w.parentNode.rowIndex,C=w.cellIndex;p.value[M][C].disabled||(M!==h.value||C!==f.value)&&(h.value=M,f.value=C,t("changerange",{selecting:!0,endDate:xn().year(u.value).add(M*4+C,"year")}))};return ct(()=>r.date,async()=>{var S,x;(S=l.value)!=null&&S.contains(document.activeElement)&&(await Ut(),(x=c.value)==null||x.focus())}),e({focus:m}),(S,x)=>($(),ue("table",{role:"grid","aria-label":y(a)("el.datepicker.yearTablePrompt"),class:Y(y(s).b()),onClick:_,onMousemove:b},[ye("tbody",{ref_key:"tbodyRef",ref:l},[($(!0),ue(Bt,null,Fn(y(p),(w,M)=>($(),ue("tr",{key:M},[($(!0),ue(Bt,null,Fn(w,(C,A)=>($(),ue("td",{key:`${M}_${A}`,ref_for:!0,ref:T=>g(C)&&(c.value=T),class:Y(["available",v(C)]),"aria-selected":g(C),"aria-label":String(C.text),tabindex:g(C)?0:-1,onKeydown:[Dr(an(_,["prevent","stop"]),["space"]),Dr(an(_,["prevent","stop"]),["enter"])]},[xe(y(y6),{cell:C},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var Bb=Et(Q_e,[["__file","basic-year-table.vue"]]);const J_e=Ie({__name:"panel-date-pick",props:H_e,emits:["pick","set-picker-option","panel-change"],setup(n,{emit:e}){const t=n,r=(Ae,ge,pe)=>!0,i=gt("picker-panel"),s=gt("date-picker"),a=Pd(),o=es(),{t:l,lang:c}=sr(),u=Lt(Nd),d=Lt(Y_),h=Lt(aT),{shortcuts:f,disabledDate:p,cellClassName:m,defaultTime:v}=u.props,g=yr(u.props,"defaultValue"),_=ne(),b=ne(xn().locale(c.value)),S=ne(!1);let x=!1;const w=U(()=>xn(v).locale(c.value)),M=U(()=>b.value.month()),C=U(()=>b.value.year()),A=ne([]),T=ne(null),I=ne(null),D=Ae=>A.value.length>0?r(Ae,A.value,t.format||"HH:mm:ss"):!0,B=Ae=>v&&!ze.value&&!S.value&&!x?w.value.year(Ae.year()).month(Ae.month()).date(Ae.date()):we.value?Ae.millisecond(0):Ae.startOf("day"),O=(Ae,...ge)=>{if(!Ae)e("pick",Ae,...ge);else if(xt(Ae)){const pe=Ae.map(B);e("pick",pe,...ge)}else e("pick",B(Ae),...ge);T.value=null,I.value=null,S.value=!1,x=!1},H=async(Ae,ge)=>{if(q.value==="date"){Ae=Ae;let pe=t.parsedValue?t.parsedValue.year(Ae.year()).month(Ae.month()).date(Ae.date()):Ae;D(pe)||(pe=A.value[0][0].year(Ae.year()).month(Ae.month()).date(Ae.date())),b.value=pe,O(pe,we.value||ge)}else q.value==="week"?O(Ae.date):q.value==="dates"&&O(Ae,!0)},L=Ae=>{const ge=Ae?"add":"subtract";b.value=b.value[ge](1,"month"),_e("month")},z=Ae=>{const ge=b.value,pe=Ae?"add":"subtract";b.value=k.value==="year"?ge[pe](10,"year"):ge[pe](1,"year"),_e("year")},k=ne("date"),F=U(()=>{const Ae=l("el.datepicker.year");if(k.value==="year"){const ge=Math.floor(C.value/10)*10;return Ae?`${ge} ${Ae} - ${ge+9} ${Ae}`:`${ge} - ${ge+9}`}return`${C.value} ${Ae}`}),W=Ae=>{const ge=Yt(Ae.value)?Ae.value():Ae.value;if(ge){x=!0,O(xn(ge).locale(c.value));return}Ae.onClick&&Ae.onClick({attrs:a,slots:o,emit:e})},q=U(()=>{const{type:Ae}=t;return["week","month","months","year","years","dates"].includes(Ae)?Ae:"date"}),Z=U(()=>q.value==="dates"||q.value==="months"||q.value==="years"),se=U(()=>q.value==="date"?k.value:q.value),X=U(()=>!!f.length),ie=async(Ae,ge)=>{q.value==="month"?(b.value=tg(b.value,b.value.year(),Ae,c.value,p),O(b.value,!1)):q.value==="months"?O(Ae,ge??!0):(b.value=tg(b.value,b.value.year(),Ae,c.value,p),k.value="date",["month","year","date","week"].includes(q.value)&&(O(b.value,!0),await Ut(),Te())),_e("month")},ae=async(Ae,ge)=>{if(q.value==="year"){const pe=b.value.startOf("year").year(Ae);b.value=fC(pe,c.value,p),O(b.value,!1)}else if(q.value==="years")O(Ae,ge??!0);else{const pe=b.value.year(Ae);b.value=fC(pe,c.value,p),k.value="month",["month","year","date","week"].includes(q.value)&&(O(b.value,!0),await Ut(),Te())}_e("year")},ce=async Ae=>{k.value=Ae,await Ut(),Te()},we=U(()=>t.type==="datetime"||t.type==="datetimerange"),He=U(()=>{const Ae=we.value||q.value==="dates",ge=q.value==="years",pe=q.value==="months",de=k.value==="date",at=k.value==="year",Ee=k.value==="month";return Ae&&de||ge&&at||pe&&Ee}),Ge=U(()=>p?t.parsedValue?xt(t.parsedValue)?p(t.parsedValue[0].toDate()):p(t.parsedValue.toDate()):!0:!1),me=()=>{if(Z.value)O(t.parsedValue);else{let Ae=t.parsedValue;if(!Ae){const ge=xn(v).locale(c.value),pe=pt();Ae=ge.year(pe.year()).month(pe.month()).date(pe.date())}b.value=Ae,O(Ae)}},be=U(()=>p?p(xn().locale(c.value).toDate()):!1),oe=()=>{const ge=xn().locale(c.value).toDate();S.value=!0,(!p||!p(ge))&&D(ge)&&(b.value=xn().locale(c.value),O(b.value))},j=U(()=>t.timeFormat||kK(t.format)),ke=U(()=>t.dateFormat||LK(t.format)),ze=U(()=>{if(I.value)return I.value;if(!(!t.parsedValue&&!g.value))return(t.parsedValue||b.value).format(j.value)}),Ve=U(()=>{if(T.value)return T.value;if(!(!t.parsedValue&&!g.value))return(t.parsedValue||b.value).format(ke.value)}),Le=ne(!1),Ze=()=>{Le.value=!0},st=()=>{Le.value=!1},fe=Ae=>({hour:Ae.hour(),minute:Ae.minute(),second:Ae.second(),year:Ae.year(),month:Ae.month(),date:Ae.date()}),V=(Ae,ge,pe)=>{const{hour:de,minute:at,second:Ee}=fe(Ae),vt=t.parsedValue?t.parsedValue.hour(de).minute(at).second(Ee):Ae;b.value=vt,O(b.value,!0),pe||(Le.value=ge)},J=Ae=>{const ge=xn(Ae,j.value).locale(c.value);if(ge.isValid()&&D(ge)){const{year:pe,month:de,date:at}=fe(b.value);b.value=ge.year(pe).month(de).date(at),I.value=null,Le.value=!1,O(b.value,!0)}},he=Ae=>{const ge=ng(Ae,ke.value,c.value,d);if(ge.isValid()){if(p&&p(ge.toDate()))return;const{hour:pe,minute:de,second:at}=fe(b.value);b.value=ge.hour(pe).minute(de).second(at),T.value=null,O(b.value,!0)}},Oe=Ae=>xn.isDayjs(Ae)&&Ae.isValid()&&(p?!p(Ae.toDate()):!0),je=Ae=>xt(Ae)?Ae.map(ge=>ge.format(t.format)):Ae.format(t.format),dt=Ae=>ng(Ae,t.format,c.value,d),pt=()=>{const Ae=xn(g.value).locale(c.value);if(!g.value){const ge=w.value;return xn().hour(ge.hour()).minute(ge.minute()).second(ge.second()).locale(c.value)}return Ae},Te=()=>{var Ae;["week","month","year","date"].includes(q.value)&&((Ae=_.value)==null||Ae.focus())},ft=()=>{Te(),q.value==="week"&&Q(Rt.down)},Ke=Ae=>{const{code:ge}=Ae;[Rt.up,Rt.down,Rt.left,Rt.right,Rt.home,Rt.end,Rt.pageUp,Rt.pageDown].includes(ge)&&(Q(ge),Ae.stopPropagation(),Ae.preventDefault()),[Rt.enter,Rt.space,Rt.numpadEnter].includes(ge)&&T.value===null&&I.value===null&&(Ae.preventDefault(),O(b.value,!1))},Q=Ae=>{var ge;const{up:pe,down:de,left:at,right:Ee,home:vt,end:et,pageUp:yt,pageDown:Ht}=Rt,Ot={year:{[pe]:-4,[de]:4,[at]:-1,[Ee]:1,offset:(Vt,kt)=>Vt.setFullYear(Vt.getFullYear()+kt)},month:{[pe]:-4,[de]:4,[at]:-1,[Ee]:1,offset:(Vt,kt)=>Vt.setMonth(Vt.getMonth()+kt)},week:{[pe]:-1,[de]:1,[at]:-1,[Ee]:1,offset:(Vt,kt)=>Vt.setDate(Vt.getDate()+kt*7)},date:{[pe]:-7,[de]:7,[at]:-1,[Ee]:1,[vt]:Vt=>-Vt.getDay(),[et]:Vt=>-Vt.getDay()+6,[yt]:Vt=>-new Date(Vt.getFullYear(),Vt.getMonth(),0).getDate(),[Ht]:Vt=>new Date(Vt.getFullYear(),Vt.getMonth()+1,0).getDate(),offset:(Vt,kt)=>Vt.setDate(Vt.getDate()+kt)}},ln=b.value.toDate();for(;Math.abs(b.value.diff(ln,"year",!0))<1;){const Vt=Ot[se.value];if(!Vt)return;if(Vt.offset(ln,Yt(Vt[Ae])?Vt[Ae](ln):(ge=Vt[Ae])!=null?ge:0),p&&p(ln))break;const kt=xn(ln).locale(c.value);b.value=kt,e("pick",kt,!0);break}},_e=Ae=>{e("panel-change",b.value.toDate(),Ae,k.value)};return ct(()=>q.value,Ae=>{if(["month","year"].includes(Ae)){k.value=Ae;return}else if(Ae==="years"){k.value="year";return}else if(Ae==="months"){k.value="month";return}k.value="date"},{immediate:!0}),ct(()=>k.value,()=>{h==null||h.updatePopper()}),ct(()=>g.value,Ae=>{Ae&&(b.value=pt())},{immediate:!0}),ct(()=>t.parsedValue,Ae=>{if(Ae){if(Z.value||xt(Ae))return;b.value=Ae}else b.value=pt()},{immediate:!0}),e("set-picker-option",["isValidValue",Oe]),e("set-picker-option",["formatToString",je]),e("set-picker-option",["parseUserInput",dt]),e("set-picker-option",["handleFocusPicker",ft]),(Ae,ge)=>($(),ue("div",{class:Y([y(i).b(),y(s).b(),{"has-sidebar":Ae.$slots.sidebar||y(X),"has-time":y(we)}])},[ye("div",{class:Y(y(i).e("body-wrapper"))},[Ye(Ae.$slots,"sidebar",{class:Y(y(i).e("sidebar"))}),y(X)?($(),ue("div",{key:0,class:Y(y(i).e("sidebar"))},[($(!0),ue(Bt,null,Fn(y(f),(pe,de)=>($(),ue("button",{key:de,type:"button",class:Y(y(i).e("shortcut")),onClick:at=>W(pe)},Ct(pe.text),11,["onClick"]))),128))],2)):Xe("v-if",!0),ye("div",{class:Y(y(i).e("body"))},[y(we)?($(),ue("div",{key:0,class:Y(y(s).e("time-header"))},[ye("span",{class:Y(y(s).e("editor-wrap"))},[xe(y(wa),{placeholder:y(l)("el.datepicker.selectDate"),"model-value":y(Ve),size:"small","validate-event":!1,onInput:pe=>T.value=pe,onChange:he},null,8,["placeholder","model-value","onInput"])],2),Cn(($(),ue("span",{class:Y(y(s).e("editor-wrap"))},[xe(y(wa),{placeholder:y(l)("el.datepicker.selectTime"),"model-value":y(ze),size:"small","validate-event":!1,onFocus:Ze,onInput:pe=>I.value=pe,onChange:J},null,8,["placeholder","model-value","onInput"]),xe(y(uC),{visible:Le.value,format:y(j),"parsed-value":b.value,onPick:V},null,8,["visible","format","parsed-value"])],2)),[[y(xd),st]])],2)):Xe("v-if",!0),Cn(ye("div",{class:Y([y(s).e("header"),(k.value==="year"||k.value==="month")&&y(s).e("header--bordered")])},[ye("span",{class:Y(y(s).e("prev-btn"))},[ye("button",{type:"button","aria-label":y(l)("el.datepicker.prevYear"),class:Y(["d-arrow-left",y(i).e("icon-btn")]),onClick:pe=>z(!1)},[Ye(Ae.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["aria-label","onClick"]),Cn(ye("button",{type:"button","aria-label":y(l)("el.datepicker.prevMonth"),class:Y([y(i).e("icon-btn"),"arrow-left"]),onClick:pe=>L(!1)},[Ye(Ae.$slots,"prev-month",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(bd))]),_:1})])],10,["aria-label","onClick"]),[[cr,k.value==="date"]])],2),ye("span",{role:"button",class:Y(y(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Dr(pe=>ce("year"),["enter"]),onClick:pe=>ce("year")},Ct(y(F)),43,["onKeydown","onClick"]),Cn(ye("span",{role:"button","aria-live":"polite",tabindex:"0",class:Y([y(s).e("header-label"),{active:k.value==="month"}]),onKeydown:Dr(pe=>ce("month"),["enter"]),onClick:pe=>ce("month")},Ct(y(l)(`el.datepicker.month${y(M)+1}`)),43,["onKeydown","onClick"]),[[cr,k.value==="date"]]),ye("span",{class:Y(y(s).e("next-btn"))},[Cn(ye("button",{type:"button","aria-label":y(l)("el.datepicker.nextMonth"),class:Y([y(i).e("icon-btn"),"arrow-right"]),onClick:pe=>L(!0)},[Ye(Ae.$slots,"next-month",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})])],10,["aria-label","onClick"]),[[cr,k.value==="date"]]),ye("button",{type:"button","aria-label":y(l)("el.datepicker.nextYear"),class:Y([y(i).e("icon-btn"),"d-arrow-right"]),onClick:pe=>z(!0)},[Ye(Ae.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[cr,k.value!=="time"]]),ye("div",{class:Y(y(i).e("content")),onKeydown:Ke},[k.value==="date"?($(),rt(YI,{key:0,ref_key:"currentViewRef",ref:_,"selection-mode":y(q),date:b.value,"parsed-value":Ae.parsedValue,"disabled-date":y(p),"cell-class-name":y(m),"show-week-number":Ae.showWeekNumber,onPick:H},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name","show-week-number"])):Xe("v-if",!0),k.value==="year"?($(),rt(Bb,{key:1,ref_key:"currentViewRef",ref:_,"selection-mode":y(q),date:b.value,"disabled-date":y(p),"parsed-value":Ae.parsedValue,onPick:ae},null,8,["selection-mode","date","disabled-date","parsed-value"])):Xe("v-if",!0),k.value==="month"?($(),rt(Nb,{key:2,ref_key:"currentViewRef",ref:_,"selection-mode":y(q),date:b.value,"parsed-value":Ae.parsedValue,"disabled-date":y(p),onPick:ie},null,8,["selection-mode","date","parsed-value","disabled-date"])):Xe("v-if",!0)],34)],2)],2),Ae.showFooter&&y(He)?($(),ue("div",{key:0,class:Y(y(i).e("footer"))},[Cn(xe(y(ks),{text:"",size:"small",class:Y(y(i).e("link-btn")),disabled:y(be),onClick:oe},{default:Re(()=>[Bn(Ct(y(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[cr,!y(Z)&&Ae.showNow]]),xe(y(ks),{plain:"",size:"small",class:Y(y(i).e("link-btn")),disabled:y(Ge),onClick:me},{default:Re(()=>[Bn(Ct(y(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):Xe("v-if",!0)],2))}});var eSe=Et(J_e,[["__file","panel-date-pick.vue"]]);const tSe=Tt({...wY,...v6}),nSe=n=>{const{emit:e}=Dn(),t=Pd(),r=es();return s=>{const a=Yt(s.value)?s.value():s.value;if(a){e("pick",[xn(a[0]).locale(n.value),xn(a[1]).locale(n.value)]);return}s.onClick&&s.onClick({attrs:t,slots:r,emit:e})}},b6=(n,{defaultValue:e,defaultTime:t,leftDate:r,rightDate:i,step:s,unit:a,onParsedValueChanged:o})=>{const{emit:l}=Dn(),{pickerNs:c}=Lt(p6),u=gt("date-range-picker"),{t:d,lang:h}=sr(),f=nSe(h),p=ne(),m=ne(),v=ne({endDate:null,selecting:!1}),g=w=>{v.value=w},_=(w=!1)=>{const M=y(p),C=y(m);Ob([M,C])&&l("pick",[M,C],w)},b=w=>{v.value.selecting=w,w||(v.value.endDate=null)},S=w=>{if(xt(w)&&w.length===2){const[M,C]=w;p.value=M,r.value=M,m.value=C,o(y(p),y(m))}else x()},x=()=>{let[w,M]=dT(y(e),{lang:y(h),step:s,unit:a,unlinkPanels:n.unlinkPanels});const C=T=>T.diff(T.startOf("d"),"ms"),A=y(t);if(A){let T=0,I=0;if(xt(A)){const[D,B]=A.map(xn);T=C(D),I=C(B)}else{const D=C(xn(A));T=D,I=D}w=w.startOf("d").add(T,"ms"),M=M.startOf("d").add(I,"ms")}p.value=void 0,m.value=void 0,r.value=w,i.value=M};return ct(e,w=>{w&&x()},{immediate:!0}),ct(()=>n.parsedValue,w=>{w!=null&&w.length||S(w)},{immediate:!0}),ct(()=>n.visible,()=>{n.visible&&S(n.parsedValue)},{immediate:!0}),{minDate:p,maxDate:m,rangeState:v,lang:h,ppNs:c,drpNs:u,handleChangeRange:g,handleRangeConfirm:_,handleShortcutClick:f,onSelect:b,onReset:S,t:d}},rSe=(n,e,t,r)=>{const i=ne("date"),s=ne(),a=ne("date"),o=ne(),l=Lt(Nd),{disabledDate:c}=l.props,{t:u,lang:d}=sr(),h=U(()=>t.value.year()),f=U(()=>t.value.month()),p=U(()=>r.value.year()),m=U(()=>r.value.month());function v(w,M){const C=u("el.datepicker.year");if(w.value==="year"){const A=Math.floor(M.value/10)*10;return C?`${A} ${C} - ${A+9} ${C}`:`${A} - ${A+9}`}return`${M.value} ${C}`}function g(w){w==null||w.focus()}async function _(w,M){const C=w==="left"?i:a,A=w==="left"?s:o;C.value=M,await Ut(),g(A.value)}async function b(w,M,C){const A=M==="left",T=A?t:r,I=A?r:t,D=A?i:a,B=A?s:o;if(w==="year"){const O=T.value.year(C);T.value=fC(O,d.value,c)}w==="month"&&(T.value=tg(T.value,T.value.year(),C,d.value,c)),n.unlinkPanels||(I.value=M==="left"?T.value.add(1,"month"):T.value.subtract(1,"month")),D.value=w==="year"?"month":"date",await Ut(),g(B.value),S(w)}function S(w){e("panel-change",[t.value.toDate(),r.value.toDate()],w)}function x(w,M,C){const A=C?"add":"subtract";return w==="year"?M[A](10,"year"):M[A](1,"year")}return{leftCurrentView:i,rightCurrentView:a,leftCurrentViewRef:s,rightCurrentViewRef:o,leftYear:h,rightYear:p,leftMonth:f,rightMonth:m,leftYearLabel:U(()=>v(i,h)),rightYearLabel:U(()=>v(a,p)),showLeftPicker:w=>_("left",w),showRightPicker:w=>_("right",w),handleLeftYearPick:w=>b("year","left",w),handleRightYearPick:w=>b("year","right",w),handleLeftMonthPick:w=>b("month","left",w),handleRightMonthPick:w=>b("month","right",w),handlePanelChange:S,adjustDateByView:x}},US="month",iSe=Ie({__name:"panel-date-range",props:tSe,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(n,{emit:e}){const t=n,r=Lt(Nd),i=Lt(Y_),{disabledDate:s,cellClassName:a,defaultTime:o,clearable:l}=r.props,c=yr(r.props,"format"),u=yr(r.props,"shortcuts"),d=yr(r.props,"defaultValue"),{lang:h}=sr(),f=ne(xn().locale(h.value)),p=ne(xn().locale(h.value).add(1,US));let m=!0;const{minDate:v,maxDate:g,rangeState:_,ppNs:b,drpNs:S,handleChangeRange:x,handleRangeConfirm:w,handleShortcutClick:M,onSelect:C,onReset:A,t:T}=b6(t,{defaultValue:d,defaultTime:o,leftDate:f,rightDate:p,unit:US,onParsedValueChanged:Vt});ct(()=>t.visible,kt=>{!kt&&_.value.selecting&&(A(t.parsedValue),C(!1))});const I=ne({min:null,max:null}),D=ne({min:null,max:null}),{leftCurrentView:B,rightCurrentView:O,leftCurrentViewRef:H,rightCurrentViewRef:L,leftYear:z,rightYear:k,leftMonth:F,rightMonth:W,leftYearLabel:q,rightYearLabel:Z,showLeftPicker:se,showRightPicker:X,handleLeftYearPick:ie,handleRightYearPick:ae,handleLeftMonthPick:ce,handleRightMonthPick:we,handlePanelChange:He,adjustDateByView:Ge}=rSe(t,e,f,p),me=U(()=>!!u.value.length),be=U(()=>I.value.min!==null?I.value.min:v.value?v.value.format(Ve.value):""),oe=U(()=>I.value.max!==null?I.value.max:g.value||v.value?(g.value||v.value).format(Ve.value):""),j=U(()=>D.value.min!==null?D.value.min:v.value?v.value.format(ze.value):""),ke=U(()=>D.value.max!==null?D.value.max:g.value||v.value?(g.value||v.value).format(ze.value):""),ze=U(()=>t.timeFormat||kK(c.value)),Ve=U(()=>t.dateFormat||LK(c.value)),Le=kt=>Ob(kt)&&(s?!s(kt[0].toDate())&&!s(kt[1].toDate()):!0),Ze=()=>{f.value=Ge(B.value,f.value,!1),t.unlinkPanels||(p.value=f.value.add(1,"month")),He("year")},st=()=>{f.value=f.value.subtract(1,"month"),t.unlinkPanels||(p.value=f.value.add(1,"month")),He("month")},fe=()=>{t.unlinkPanels?p.value=Ge(O.value,p.value,!0):(f.value=Ge(O.value,f.value,!0),p.value=f.value.add(1,"month")),He("year")},V=()=>{t.unlinkPanels?p.value=p.value.add(1,"month"):(f.value=f.value.add(1,"month"),p.value=f.value.add(1,"month")),He("month")},J=()=>{f.value=Ge(B.value,f.value,!0),He("year")},he=()=>{f.value=f.value.add(1,"month"),He("month")},Oe=()=>{p.value=Ge(O.value,p.value,!1),He("year")},je=()=>{p.value=p.value.subtract(1,"month"),He("month")},dt=U(()=>{const kt=(F.value+1)%12,Jt=F.value+1>=12?1:0;return t.unlinkPanels&&new Date(z.value+Jt,kt)<new Date(k.value,W.value)}),pt=U(()=>t.unlinkPanels&&k.value*12+W.value-(z.value*12+F.value+1)>=12),Te=U(()=>!(v.value&&g.value&&!_.value.selecting&&Ob([v.value,g.value]))),ft=U(()=>t.type==="datetime"||t.type==="datetimerange"),Ke=(kt,Jt)=>{if(kt)return o?xn(o[Jt]||o).locale(h.value).year(kt.year()).month(kt.month()).date(kt.date()):kt},Q=(kt,Jt=!0)=>{const on=kt.minDate,qn=kt.maxDate,K=Ke(on,0),te=Ke(qn,1);g.value===te&&v.value===K||(e("calendar-change",[on.toDate(),qn&&qn.toDate()]),g.value=te,v.value=K,!ft.value&&Jt&&(Jt=!K||!te),m=Jt)};ct([g,v],([kt,Jt])=>{kt&&Jt&&w(m)});const _e=ne(!1),Ae=ne(!1),ge=()=>{_e.value=!1},pe=()=>{Ae.value=!1},de=(kt,Jt)=>{I.value[Jt]=kt;const on=xn(kt,Ve.value).locale(h.value);if(on.isValid()){if(s&&s(on.toDate()))return;Jt==="min"?(f.value=on,v.value=(v.value||f.value).year(on.year()).month(on.month()).date(on.date()),!t.unlinkPanels&&(!g.value||g.value.isBefore(v.value))&&(p.value=on.add(1,"month"),g.value=v.value.add(1,"month"))):(p.value=on,g.value=(g.value||p.value).year(on.year()).month(on.month()).date(on.date()),!t.unlinkPanels&&(!v.value||v.value.isAfter(g.value))&&(f.value=on.subtract(1,"month"),v.value=g.value.subtract(1,"month")))}},at=(kt,Jt)=>{I.value[Jt]=null},Ee=(kt,Jt)=>{D.value[Jt]=kt;const on=xn(kt,ze.value).locale(h.value);on.isValid()&&(Jt==="min"?(_e.value=!0,v.value=(v.value||f.value).hour(on.hour()).minute(on.minute()).second(on.second())):(Ae.value=!0,g.value=(g.value||p.value).hour(on.hour()).minute(on.minute()).second(on.second()),p.value=g.value))},vt=(kt,Jt)=>{D.value[Jt]=null,Jt==="min"?(f.value=v.value,_e.value=!1,(!g.value||g.value.isBefore(v.value))&&(g.value=v.value)):(p.value=g.value,Ae.value=!1,g.value&&g.value.isBefore(v.value)&&(v.value=g.value))},et=(kt,Jt,on)=>{D.value.min||(kt&&(f.value=kt,v.value=(v.value||f.value).hour(kt.hour()).minute(kt.minute()).second(kt.second())),on||(_e.value=Jt),(!g.value||g.value.isBefore(v.value))&&(g.value=v.value,p.value=kt,Ut(()=>{A(t.parsedValue)})))},yt=(kt,Jt,on)=>{D.value.max||(kt&&(p.value=kt,g.value=(g.value||p.value).hour(kt.hour()).minute(kt.minute()).second(kt.second())),on||(Ae.value=Jt),g.value&&g.value.isBefore(v.value)&&(v.value=g.value))},Ht=()=>{f.value=dT(y(d),{lang:y(h),unit:"month",unlinkPanels:t.unlinkPanels})[0],p.value=f.value.add(1,"month"),g.value=void 0,v.value=void 0,e("pick",null)},Ot=kt=>xt(kt)?kt.map(Jt=>Jt.format(c.value)):kt.format(c.value),ln=kt=>ng(kt,c.value,h.value,i);function Vt(kt,Jt){if(t.unlinkPanels&&Jt){const on=(kt==null?void 0:kt.year())||0,qn=(kt==null?void 0:kt.month())||0,K=Jt.year(),te=Jt.month();p.value=on===K&&qn===te?Jt.add(1,US):Jt}else p.value=f.value.add(1,US),Jt&&(p.value=p.value.hour(Jt.hour()).minute(Jt.minute()).second(Jt.second()))}return e("set-picker-option",["isValidValue",Le]),e("set-picker-option",["parseUserInput",ln]),e("set-picker-option",["formatToString",Ot]),e("set-picker-option",["handleClear",Ht]),(kt,Jt)=>($(),ue("div",{class:Y([y(b).b(),y(S).b(),{"has-sidebar":kt.$slots.sidebar||y(me),"has-time":y(ft)}])},[ye("div",{class:Y(y(b).e("body-wrapper"))},[Ye(kt.$slots,"sidebar",{class:Y(y(b).e("sidebar"))}),y(me)?($(),ue("div",{key:0,class:Y(y(b).e("sidebar"))},[($(!0),ue(Bt,null,Fn(y(u),(on,qn)=>($(),ue("button",{key:qn,type:"button",class:Y(y(b).e("shortcut")),onClick:K=>y(M)(on)},Ct(on.text),11,["onClick"]))),128))],2)):Xe("v-if",!0),ye("div",{class:Y(y(b).e("body"))},[y(ft)?($(),ue("div",{key:0,class:Y(y(S).e("time-header"))},[ye("span",{class:Y(y(S).e("editors-wrap"))},[ye("span",{class:Y(y(S).e("time-picker-wrap"))},[xe(y(wa),{size:"small",disabled:y(_).selecting,placeholder:y(T)("el.datepicker.startDate"),class:Y(y(S).e("editor")),"model-value":y(be),"validate-event":!1,onInput:on=>de(on,"min"),onChange:on=>at(on,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Cn(($(),ue("span",{class:Y(y(S).e("time-picker-wrap"))},[xe(y(wa),{size:"small",class:Y(y(S).e("editor")),disabled:y(_).selecting,placeholder:y(T)("el.datepicker.startTime"),"model-value":y(j),"validate-event":!1,onFocus:on=>_e.value=!0,onInput:on=>Ee(on,"min"),onChange:on=>vt(on,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),xe(y(uC),{visible:_e.value,format:y(ze),"datetime-role":"start","parsed-value":f.value,onPick:et},null,8,["visible","format","parsed-value"])],2)),[[y(xd),ge]])],2),ye("span",null,[xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})]),ye("span",{class:Y([y(S).e("editors-wrap"),"is-right"])},[ye("span",{class:Y(y(S).e("time-picker-wrap"))},[xe(y(wa),{size:"small",class:Y(y(S).e("editor")),disabled:y(_).selecting,placeholder:y(T)("el.datepicker.endDate"),"model-value":y(oe),readonly:!y(v),"validate-event":!1,onInput:on=>de(on,"max"),onChange:on=>at(on,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Cn(($(),ue("span",{class:Y(y(S).e("time-picker-wrap"))},[xe(y(wa),{size:"small",class:Y(y(S).e("editor")),disabled:y(_).selecting,placeholder:y(T)("el.datepicker.endTime"),"model-value":y(ke),readonly:!y(v),"validate-event":!1,onFocus:on=>y(v)&&(Ae.value=!0),onInput:on=>Ee(on,"max"),onChange:on=>vt(on,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),xe(y(uC),{"datetime-role":"end",visible:Ae.value,format:y(ze),"parsed-value":p.value,onPick:yt},null,8,["visible","format","parsed-value"])],2)),[[y(xd),pe]])],2)],2)):Xe("v-if",!0),ye("div",{class:Y([[y(b).e("content"),y(S).e("content")],"is-left"])},[ye("div",{class:Y(y(S).e("header"))},[ye("button",{type:"button",class:Y([y(b).e("icon-btn"),"d-arrow-left"]),"aria-label":y(T)("el.datepicker.prevYear"),onClick:Ze},[Ye(kt.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["aria-label"]),Cn(ye("button",{type:"button",class:Y([y(b).e("icon-btn"),"arrow-left"]),"aria-label":y(T)("el.datepicker.prevMonth"),onClick:st},[Ye(kt.$slots,"prev-month",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(bd))]),_:1})])],10,["aria-label"]),[[cr,y(B)==="date"]]),kt.unlinkPanels?($(),ue("button",{key:0,type:"button",disabled:!y(pt),class:Y([[y(b).e("icon-btn"),{"is-disabled":!y(pt)}],"d-arrow-right"]),"aria-label":y(T)("el.datepicker.nextYear"),onClick:J},[Ye(kt.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["disabled","aria-label"])):Xe("v-if",!0),kt.unlinkPanels&&y(B)==="date"?($(),ue("button",{key:1,type:"button",disabled:!y(dt),class:Y([[y(b).e("icon-btn"),{"is-disabled":!y(dt)}],"arrow-right"]),"aria-label":y(T)("el.datepicker.nextMonth"),onClick:he},[Ye(kt.$slots,"next-month",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})])],10,["disabled","aria-label"])):Xe("v-if",!0),ye("div",null,[ye("span",{role:"button",class:Y(y(S).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Dr(on=>y(se)("year"),["enter"]),onClick:on=>y(se)("year")},Ct(y(q)),43,["onKeydown","onClick"]),Cn(ye("span",{role:"button","aria-live":"polite",tabindex:"0",class:Y([y(S).e("header-label"),{active:y(B)==="month"}]),onKeydown:Dr(on=>y(se)("month"),["enter"]),onClick:on=>y(se)("month")},Ct(y(T)(`el.datepicker.month${f.value.month()+1}`)),43,["onKeydown","onClick"]),[[cr,y(B)==="date"]])])],2),y(B)==="date"?($(),rt(YI,{key:0,ref_key:"leftCurrentViewRef",ref:H,"selection-mode":"range",date:f.value,"min-date":y(v),"max-date":y(g),"range-state":y(_),"disabled-date":y(s),"cell-class-name":y(a),"show-week-number":kt.showWeekNumber,onChangerange:y(x),onPick:Q,onSelect:y(C)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","show-week-number","onChangerange","onSelect"])):Xe("v-if",!0),y(B)==="year"?($(),rt(Bb,{key:1,ref_key:"leftCurrentViewRef",ref:H,"selection-mode":"year",date:f.value,"disabled-date":y(s),"parsed-value":kt.parsedValue,onPick:y(ie)},null,8,["date","disabled-date","parsed-value","onPick"])):Xe("v-if",!0),y(B)==="month"?($(),rt(Nb,{key:2,ref_key:"leftCurrentViewRef",ref:H,"selection-mode":"month",date:f.value,"parsed-value":kt.parsedValue,"disabled-date":y(s),onPick:y(ce)},null,8,["date","parsed-value","disabled-date","onPick"])):Xe("v-if",!0)],2),ye("div",{class:Y([[y(b).e("content"),y(S).e("content")],"is-right"])},[ye("div",{class:Y(y(S).e("header"))},[kt.unlinkPanels?($(),ue("button",{key:0,type:"button",disabled:!y(pt),class:Y([[y(b).e("icon-btn"),{"is-disabled":!y(pt)}],"d-arrow-left"]),"aria-label":y(T)("el.datepicker.prevYear"),onClick:Oe},[Ye(kt.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["disabled","aria-label"])):Xe("v-if",!0),kt.unlinkPanels&&y(O)==="date"?($(),ue("button",{key:1,type:"button",disabled:!y(dt),class:Y([[y(b).e("icon-btn"),{"is-disabled":!y(dt)}],"arrow-left"]),"aria-label":y(T)("el.datepicker.prevMonth"),onClick:je},[Ye(kt.$slots,"prev-month",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(bd))]),_:1})])],10,["disabled","aria-label"])):Xe("v-if",!0),ye("button",{type:"button","aria-label":y(T)("el.datepicker.nextYear"),class:Y([y(b).e("icon-btn"),"d-arrow-right"]),onClick:fe},[Ye(kt.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["aria-label"]),Cn(ye("button",{type:"button",class:Y([y(b).e("icon-btn"),"arrow-right"]),"aria-label":y(T)("el.datepicker.nextMonth"),onClick:V},[Ye(kt.$slots,"next-month",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})])],10,["aria-label"]),[[cr,y(O)==="date"]]),ye("div",null,[ye("span",{role:"button",class:Y(y(S).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Dr(on=>y(X)("year"),["enter"]),onClick:on=>y(X)("year")},Ct(y(Z)),43,["onKeydown","onClick"]),Cn(ye("span",{role:"button","aria-live":"polite",tabindex:"0",class:Y([y(S).e("header-label"),{active:y(O)==="month"}]),onKeydown:Dr(on=>y(X)("month"),["enter"]),onClick:on=>y(X)("month")},Ct(y(T)(`el.datepicker.month${p.value.month()+1}`)),43,["onKeydown","onClick"]),[[cr,y(O)==="date"]])])],2),y(O)==="date"?($(),rt(YI,{key:0,ref_key:"rightCurrentViewRef",ref:L,"selection-mode":"range",date:p.value,"min-date":y(v),"max-date":y(g),"range-state":y(_),"disabled-date":y(s),"cell-class-name":y(a),"show-week-number":kt.showWeekNumber,onChangerange:y(x),onPick:Q,onSelect:y(C)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","show-week-number","onChangerange","onSelect"])):Xe("v-if",!0),y(O)==="year"?($(),rt(Bb,{key:1,ref_key:"rightCurrentViewRef",ref:L,"selection-mode":"year",date:p.value,"disabled-date":y(s),"parsed-value":kt.parsedValue,onPick:y(ae)},null,8,["date","disabled-date","parsed-value","onPick"])):Xe("v-if",!0),y(O)==="month"?($(),rt(Nb,{key:2,ref_key:"rightCurrentViewRef",ref:L,"selection-mode":"month",date:p.value,"parsed-value":kt.parsedValue,"disabled-date":y(s),onPick:y(we)},null,8,["date","parsed-value","disabled-date","onPick"])):Xe("v-if",!0)],2)],2)],2),kt.showFooter&&y(ft)?($(),ue("div",{key:0,class:Y(y(b).e("footer"))},[y(l)?($(),rt(y(ks),{key:0,text:"",size:"small",class:Y(y(b).e("link-btn")),onClick:Ht},{default:Re(()=>[Bn(Ct(y(T)("el.datepicker.clear")),1)]),_:1},8,["class"])):Xe("v-if",!0),xe(y(ks),{plain:"",size:"small",class:Y(y(b).e("link-btn")),disabled:y(Te),onClick:on=>y(w)(!1)},{default:Re(()=>[Bn(Ct(y(T)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):Xe("v-if",!0)],2))}});var sSe=Et(iSe,[["__file","panel-date-range.vue"]]);const aSe=Tt({...v6}),oSe=["pick","set-picker-option","calendar-change"],lSe=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const{t:r}=sr(),i=()=>{e.value=e.value.subtract(1,"year"),n.value||(t.value=t.value.subtract(1,"year"))},s=()=>{n.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},a=()=>{e.value=e.value.add(1,"year")},o=()=>{t.value=t.value.subtract(1,"year")},l=U(()=>`${e.value.year()} ${r("el.datepicker.year")}`),c=U(()=>`${t.value.year()} ${r("el.datepicker.year")}`),u=U(()=>e.value.year()),d=U(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:i,rightNextYear:s,leftNextYear:a,rightPrevYear:o,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},HS="year",cSe=Ie({name:"DatePickerMonthRange"}),uSe=Ie({...cSe,props:aSe,emits:oSe,setup(n,{emit:e}){const t=n,{lang:r}=sr(),i=Lt(Nd),s=Lt(Y_),{shortcuts:a,disabledDate:o}=i.props,l=yr(i.props,"format"),c=yr(i.props,"defaultValue"),u=ne(xn().locale(r.value)),d=ne(xn().locale(r.value).add(1,HS)),{minDate:h,maxDate:f,rangeState:p,ppNs:m,drpNs:v,handleChangeRange:g,handleRangeConfirm:_,handleShortcutClick:b,onSelect:S,onReset:x}=b6(t,{defaultValue:c,leftDate:u,rightDate:d,unit:HS,onParsedValueChanged:W}),w=U(()=>!!a.length),{leftPrevYear:M,rightNextYear:C,leftNextYear:A,rightPrevYear:T,leftLabel:I,rightLabel:D,leftYear:B,rightYear:O}=lSe({unlinkPanels:yr(t,"unlinkPanels"),leftDate:u,rightDate:d}),H=U(()=>t.unlinkPanels&&O.value>B.value+1),L=(q,Z=!0)=>{const se=q.minDate,X=q.maxDate;f.value===X&&h.value===se||(e("calendar-change",[se.toDate(),X&&X.toDate()]),f.value=X,h.value=se,Z&&_())},z=()=>{u.value=dT(y(c),{lang:y(r),unit:"year",unlinkPanels:t.unlinkPanels})[0],d.value=u.value.add(1,"year"),e("pick",null)},k=q=>xt(q)?q.map(Z=>Z.format(l.value)):q.format(l.value),F=q=>ng(q,l.value,r.value,s);function W(q,Z){if(t.unlinkPanels&&Z){const se=(q==null?void 0:q.year())||0,X=Z.year();d.value=se===X?Z.add(1,HS):Z}else d.value=u.value.add(1,HS)}return ct(()=>t.visible,q=>{!q&&p.value.selecting&&(x(t.parsedValue),S(!1))}),e("set-picker-option",["isValidValue",Ob]),e("set-picker-option",["formatToString",k]),e("set-picker-option",["parseUserInput",F]),e("set-picker-option",["handleClear",z]),(q,Z)=>($(),ue("div",{class:Y([y(m).b(),y(v).b(),{"has-sidebar":!!q.$slots.sidebar||y(w)}])},[ye("div",{class:Y(y(m).e("body-wrapper"))},[Ye(q.$slots,"sidebar",{class:Y(y(m).e("sidebar"))}),y(w)?($(),ue("div",{key:0,class:Y(y(m).e("sidebar"))},[($(!0),ue(Bt,null,Fn(y(a),(se,X)=>($(),ue("button",{key:X,type:"button",class:Y(y(m).e("shortcut")),onClick:ie=>y(b)(se)},Ct(se.text),11,["onClick"]))),128))],2)):Xe("v-if",!0),ye("div",{class:Y(y(m).e("body"))},[ye("div",{class:Y([[y(m).e("content"),y(v).e("content")],"is-left"])},[ye("div",{class:Y(y(v).e("header"))},[ye("button",{type:"button",class:Y([y(m).e("icon-btn"),"d-arrow-left"]),onClick:y(M)},[Ye(q.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["onClick"]),q.unlinkPanels?($(),ue("button",{key:0,type:"button",disabled:!y(H),class:Y([[y(m).e("icon-btn"),{[y(m).is("disabled")]:!y(H)}],"d-arrow-right"]),onClick:y(A)},[Ye(q.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["disabled","onClick"])):Xe("v-if",!0),ye("div",null,Ct(y(I)),1)],2),xe(Nb,{"selection-mode":"range",date:u.value,"min-date":y(h),"max-date":y(f),"range-state":y(p),"disabled-date":y(o),onChangerange:y(g),onPick:L,onSelect:y(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ye("div",{class:Y([[y(m).e("content"),y(v).e("content")],"is-right"])},[ye("div",{class:Y(y(v).e("header"))},[q.unlinkPanels?($(),ue("button",{key:0,type:"button",disabled:!y(H),class:Y([[y(m).e("icon-btn"),{"is-disabled":!y(H)}],"d-arrow-left"]),onClick:y(T)},[Ye(q.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["disabled","onClick"])):Xe("v-if",!0),ye("button",{type:"button",class:Y([y(m).e("icon-btn"),"d-arrow-right"]),onClick:y(C)},[Ye(q.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["onClick"]),ye("div",null,Ct(y(D)),1)],2),xe(Nb,{"selection-mode":"range",date:d.value,"min-date":y(h),"max-date":y(f),"range-state":y(p),"disabled-date":y(o),onChangerange:y(g),onPick:L,onSelect:y(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var dSe=Et(uSe,[["__file","panel-month-range.vue"]]);const fSe=Tt({...v6}),hSe=["pick","set-picker-option","calendar-change"],pSe=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const r=()=>{e.value=e.value.subtract(10,"year"),n.value||(t.value=t.value.subtract(10,"year"))},i=()=>{n.value||(e.value=e.value.add(10,"year")),t.value=t.value.add(10,"year")},s=()=>{e.value=e.value.add(10,"year")},a=()=>{t.value=t.value.subtract(10,"year")},o=U(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),l=U(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),c=U(()=>Math.floor(e.value.year()/10)*10+9),u=U(()=>Math.floor(t.value.year()/10)*10);return{leftPrevYear:r,rightNextYear:i,leftNextYear:s,rightPrevYear:a,leftLabel:o,rightLabel:l,leftYear:c,rightYear:u}},N0=10,Ey="year",mSe=Ie({name:"DatePickerYearRange"}),vSe=Ie({...mSe,props:fSe,emits:hSe,setup(n,{emit:e}){const t=n,{lang:r}=sr(),i=ne(xn().locale(r.value)),s=ne(xn().locale(r.value).add(N0,Ey)),a=Lt(Y_),o=Lt(Nd),{shortcuts:l,disabledDate:c}=o.props,u=yr(o.props,"format"),d=yr(o.props,"defaultValue"),{minDate:h,maxDate:f,rangeState:p,ppNs:m,drpNs:v,handleChangeRange:g,handleRangeConfirm:_,handleShortcutClick:b,onSelect:S,onReset:x}=b6(t,{defaultValue:d,leftDate:i,rightDate:s,step:N0,unit:Ey,onParsedValueChanged:X}),{leftPrevYear:w,rightNextYear:M,leftNextYear:C,rightPrevYear:A,leftLabel:T,rightLabel:I,leftYear:D,rightYear:B}=pSe({unlinkPanels:yr(t,"unlinkPanels"),leftDate:i,rightDate:s}),O=U(()=>!!l.length),H=U(()=>[m.b(),v.b(),{"has-sidebar":!!es().sidebar||O.value}]),L=U(()=>({content:[m.e("content"),v.e("content"),"is-left"],arrowLeftBtn:[m.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[m.e("icon-btn"),{[m.is("disabled")]:!k.value},"d-arrow-right"]})),z=U(()=>({content:[m.e("content"),v.e("content"),"is-right"],arrowLeftBtn:[m.e("icon-btn"),{"is-disabled":!k.value},"d-arrow-left"],arrowRightBtn:[m.e("icon-btn"),"d-arrow-right"]})),k=U(()=>t.unlinkPanels&&B.value>D.value+1),F=(ie,ae=!0)=>{const ce=ie.minDate,we=ie.maxDate;f.value===we&&h.value===ce||(e("calendar-change",[ce.toDate(),we&&we.toDate()]),f.value=we,h.value=ce,ae&&_())},W=ie=>ng(ie,u.value,r.value,a),q=ie=>xt(ie)?ie.map(ae=>ae.format(u.value)):ie.format(u.value),Z=ie=>Ob(ie)&&(c?!c(ie[0].toDate())&&!c(ie[1].toDate()):!0),se=()=>{const ie=dT(y(d),{lang:y(r),step:N0,unit:Ey,unlinkPanels:t.unlinkPanels});i.value=ie[0],s.value=ie[1],e("pick",null)};function X(ie,ae){if(t.unlinkPanels&&ae){const ce=(ie==null?void 0:ie.year())||0,we=ae.year();s.value=ce+N0>we?ae.add(N0,Ey):ae}else s.value=i.value.add(N0,Ey)}return ct(()=>t.visible,ie=>{!ie&&p.value.selecting&&(x(t.parsedValue),S(!1))}),e("set-picker-option",["isValidValue",Z]),e("set-picker-option",["parseUserInput",W]),e("set-picker-option",["formatToString",q]),e("set-picker-option",["handleClear",se]),(ie,ae)=>($(),ue("div",{class:Y(y(H))},[ye("div",{class:Y(y(m).e("body-wrapper"))},[Ye(ie.$slots,"sidebar",{class:Y(y(m).e("sidebar"))}),y(O)?($(),ue("div",{key:0,class:Y(y(m).e("sidebar"))},[($(!0),ue(Bt,null,Fn(y(l),(ce,we)=>($(),ue("button",{key:we,type:"button",class:Y(y(m).e("shortcut")),onClick:He=>y(b)(ce)},Ct(ce.text),11,["onClick"]))),128))],2)):Xe("v-if",!0),ye("div",{class:Y(y(m).e("body"))},[ye("div",{class:Y(y(L).content)},[ye("div",{class:Y(y(v).e("header"))},[ye("button",{type:"button",class:Y(y(L).arrowLeftBtn),onClick:y(w)},[Ye(ie.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["onClick"]),ie.unlinkPanels?($(),ue("button",{key:0,type:"button",disabled:!y(k),class:Y(y(L).arrowRightBtn),onClick:y(C)},[Ye(ie.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["disabled","onClick"])):Xe("v-if",!0),ye("div",null,Ct(y(T)),1)],2),xe(Bb,{"selection-mode":"range",date:i.value,"min-date":y(h),"max-date":y(f),"range-state":y(p),"disabled-date":y(c),onChangerange:y(g),onPick:F,onSelect:y(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ye("div",{class:Y(y(z).content)},[ye("div",{class:Y(y(v).e("header"))},[ie.unlinkPanels?($(),ue("button",{key:0,type:"button",disabled:!y(k),class:Y(y(z).arrowLeftBtn),onClick:y(A)},[Ye(ie.$slots,"prev-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(nh))]),_:1})])],10,["disabled","onClick"])):Xe("v-if",!0),ye("button",{type:"button",class:Y(y(z).arrowRightBtn),onClick:y(M)},[Ye(ie.$slots,"next-year",{},()=>[xe(y(zt),null,{default:Re(()=>[xe(y(rh))]),_:1})])],10,["onClick"]),ye("div",null,Ct(y(I)),1)],2),xe(Bb,{"selection-mode":"range",date:s.value,"min-date":y(h),"max-date":y(f),"range-state":y(p),"disabled-date":y(c),onChangerange:y(g),onPick:F,onSelect:y(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var gSe=Et(vSe,[["__file","panel-year-range.vue"]]);const ySe=function(n){switch(n){case"daterange":case"datetimerange":return sSe;case"monthrange":return dSe;case"yearrange":return gSe;default:return eSe}};xn.extend(NK);xn.extend(u_e);xn.extend(d6);xn.extend(f_e);xn.extend(p_e);xn.extend(v_e);xn.extend(y_e);xn.extend(__e);var bSe=Ie({name:"ElDatePicker",install:null,props:z_e,emits:[mn],setup(n,{expose:e,emit:t,slots:r}){const i=gt("picker-panel"),s=U(()=>!n.format);jn(Y_,s),jn(f6,pr(yr(n,"popperOptions"))),jn(p6,{slots:r,pickerNs:i});const a=ne();e({focus:()=>{var c;(c=a.value)==null||c.focus()},blur:()=>{var c;(c=a.value)==null||c.blur()},handleOpen:()=>{var c;(c=a.value)==null||c.handleOpen()},handleClose:()=>{var c;(c=a.value)==null||c.handleClose()}});const l=c=>{t(mn,c)};return()=>{var c;const u=(c=n.format)!=null?c:S_e[n.type]||$m,d=ySe(n.type);return xe(yY,Nn(n,{format:u,type:n.type,ref:a,"onUpdate:modelValue":l}),{default:h=>xe(d,h,{"prev-month":r["prev-month"],"next-month":r["next-month"],"prev-year":r["prev-year"],"next-year":r["next-year"]}),"range-separator":r["range-separator"]})}}});const _Se=bn(bSe),_6=Symbol("elDescriptions");var Iy=Ie({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Lt(_6,{})}},render(){var n;const e=Iye(this.cell),t=(((n=this.cell)==null?void 0:n.dirs)||[]).map(g=>{const{dir:_,arg:b,modifiers:S,value:x}=g;return[_,x,b,S]}),{border:r,direction:i}=this.descriptions,s=i==="vertical",a=()=>{var g,_,b;return((b=(_=(g=this.cell)==null?void 0:g.children)==null?void 0:_.label)==null?void 0:b.call(_))||e.label},o=()=>{var g,_,b;return(b=(_=(g=this.cell)==null?void 0:g.children)==null?void 0:_.default)==null?void 0:b.call(_)},l=e.span,c=e.rowspan,u=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:u,h=e.className,f=e.labelClassName,p=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,m={width:wi(p),minWidth:wi(e.minWidth)},v=gt("descriptions");switch(this.type){case"label":return Cn(tn(this.tag,{style:m,class:[v.e("cell"),v.e("label"),v.is("bordered-label",r),v.is("vertical-label",s),d,f],colSpan:s?l:1,rowspan:s?1:c},a()),t);case"content":return Cn(tn(this.tag,{style:m,class:[v.e("cell"),v.e("content"),v.is("bordered-content",r),v.is("vertical-content",s),u,h],colSpan:s?l:l*2-1,rowspan:s?c*2-1:c},o()),t);default:{const g=a(),_={},b=wi(e.labelWidth||this.descriptions.labelWidth);return b&&(_.width=b,_.display="inline-block"),Cn(tn("td",{style:m,class:[v.e("cell"),u],colSpan:l,rowspan:c},[Zi(g)?void 0:tn("span",{style:_,class:[v.e("label"),f]},g),tn("span",{class:[v.e("content"),h]},o())]),t)}}}});const SSe=Tt({row:{type:Fe(Array),default:()=>[]}}),xSe=Ie({name:"ElDescriptionsRow"}),wSe=Ie({...xSe,props:SSe,setup(n){const e=Lt(_6,{});return(t,r)=>y(e).direction==="vertical"?($(),ue(Bt,{key:0},[ye("tr",null,[($(!0),ue(Bt,null,Fn(t.row,(i,s)=>($(),rt(y(Iy),{key:`tr1-${s}`,cell:i,tag:"th",type:"label"},null,8,["cell"]))),128))]),ye("tr",null,[($(!0),ue(Bt,null,Fn(t.row,(i,s)=>($(),rt(y(Iy),{key:`tr2-${s}`,cell:i,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):($(),ue("tr",{key:1},[($(!0),ue(Bt,null,Fn(t.row,(i,s)=>($(),ue(Bt,{key:`tr3-${s}`},[y(e).border?($(),ue(Bt,{key:0},[xe(y(Iy),{cell:i,tag:"td",type:"label"},null,8,["cell"]),xe(y(Iy),{cell:i,tag:"td",type:"content"},null,8,["cell"])],64)):($(),rt(y(Iy),{key:1,cell:i,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var CSe=Et(wSe,[["__file","descriptions-row.vue"]]);const MSe=Tt({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:as,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),CY="ElDescriptionsItem",TSe=Ie({name:"ElDescriptions"}),ASe=Ie({...TSe,props:MSe,setup(n){const e=n,t=gt("descriptions"),r=Qi(),i=es();jn(_6,e);const s=U(()=>[t.b(),t.m(r.value)]),a=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),o=()=>{if(!i.default)return[];const l=Wc(i.default()).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)===CY}),c=[];let u=[],d=e.column,h=0;const f=[];return l.forEach((p,m)=>{var v,g,_;const b=((v=p.props)==null?void 0:v.span)||1,S=((g=p.props)==null?void 0:g.rowspan)||1,x=c.length;if(f[x]||(f[x]=0),S>1)for(let w=1;w<S;w++)f[_=x+w]||(f[_]=0),f[x+w]++,h++;if(f[x]>0&&(d-=f[x],f[x]=0),m<l.length-1&&(h+=b>d?d:b),m===l.length-1){const w=e.column-h%e.column;u.push(a(p,w,d,!0)),c.push(u);return}b<d?(d-=b,u.push(p)):(u.push(a(p,b,d)),c.push(u),d=e.column,u=[])}),c};return(l,c)=>($(),ue("div",{class:Y(y(s))},[l.title||l.extra||l.$slots.title||l.$slots.extra?($(),ue("div",{key:0,class:Y(y(t).e("header"))},[ye("div",{class:Y(y(t).e("title"))},[Ye(l.$slots,"title",{},()=>[Bn(Ct(l.title),1)])],2),ye("div",{class:Y(y(t).e("extra"))},[Ye(l.$slots,"extra",{},()=>[Bn(Ct(l.extra),1)])],2)],2)):Xe("v-if",!0),ye("div",{class:Y(y(t).e("body"))},[ye("table",{class:Y([y(t).e("table"),y(t).is("bordered",l.border)])},[ye("tbody",null,[($(!0),ue(Bt,null,Fn(o(),(u,d)=>($(),rt(CSe,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var ESe=Et(ASe,[["__file","description.vue"]]);const a7=["left","center","right"],ISe=Tt({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,values:a7,default:"left"},labelAlign:{type:String,values:a7},className:{type:String,default:""},labelClassName:{type:String,default:""}}),MY=Ie({name:CY,props:ISe}),RSe=bn(ESe,{DescriptionsItem:MY}),PSe=pi(MY),S6=n=>{if(!n)return{onClick:xr,onMousedown:xr,onMouseup:xr};let e=!1,t=!1;return{onClick:a=>{e&&t&&n(a),e=t=!1},onMousedown:a=>{e=a.target===a.currentTarget},onMouseup:a=>{t=a.target===a.currentTarget}}},DSe=Tt({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Fe([String,Array,Object])},zIndex:{type:Fe([String,Number])}}),LSe={click:n=>n instanceof MouseEvent},kSe="overlay";var OSe=Ie({name:"ElOverlay",props:DSe,emits:LSe,setup(n,{slots:e,emit:t}){const r=gt(kSe),i=l=>{t("click",l)},{onClick:s,onMousedown:a,onMouseup:o}=S6(n.customMaskEvent?void 0:i);return()=>n.mask?xe("div",{class:[r.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:s,onMousedown:a,onMouseup:o},[Ye(e,"default")],pl.STYLE|pl.CLASS|pl.PROPS,["onClick","onMouseup","onMousedown"]):tn("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Ye(e,"default")])}});const x6=OSe,TY=Symbol("dialogInjectionKey"),AY="dialog-fade",EY=Tt({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ar},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),NSe={close:()=>!0},IY=(n,e,t,r)=>{const i={offsetX:0,offsetY:0},s=(d,h)=>{if(n.value){const{offsetX:f,offsetY:p}=i,m=n.value.getBoundingClientRect(),v=m.left,g=m.top,_=m.width,b=m.height,S=document.documentElement.clientWidth,x=document.documentElement.clientHeight,w=-v+f,M=-g+p,C=S-v-_+f,A=x-g-(b<x?b:0)+p;r!=null&&r.value||(d=Math.min(Math.max(d,w),C),h=Math.min(Math.max(h,M),A)),i.offsetX=d,i.offsetY=h,n.value.style.transform=`translate(${wi(d)}, ${wi(h)})`}},a=d=>{const h=d.clientX,f=d.clientY,{offsetX:p,offsetY:m}=i,v=_=>{const b=p+_.clientX-h,S=m+_.clientY-f;s(b,S)},g=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",g)},o=()=>{e.value&&n.value&&(e.value.addEventListener("mousedown",a),window.addEventListener("resize",u))},l=()=>{e.value&&n.value&&(e.value.removeEventListener("mousedown",a),window.removeEventListener("resize",u))},c=()=>{i.offsetX=0,i.offsetY=0,n.value&&(n.value.style.transform="")},u=()=>{const{offsetX:d,offsetY:h}=i;s(d,h)};return Rn(()=>{Gs(()=>{t.value?o():l()})}),br(()=>{l()}),{resetPosition:c,updatePosition:u}},fT=(...n)=>e=>{n.forEach(t=>{Yt(t)?t(e):t.value=e})},BSe=Ie({name:"ElDialogContent"}),FSe=Ie({...BSe,props:EY,emits:NSe,setup(n,{expose:e}){const t=n,{t:r}=sr(),{Close:i}=Kq,{dialogRef:s,headerRef:a,bodyId:o,ns:l,style:c}=Lt(TY),{focusTrapRef:u}=Lt(JD),d=U(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),h=fT(u,s),f=U(()=>t.draggable),p=U(()=>t.overflow),{resetPosition:m,updatePosition:v}=IY(s,a,f,p);return e({resetPosition:m,updatePosition:v}),(g,_)=>($(),ue("div",{ref:y(h),class:Y(y(d)),style:Xt(y(c)),tabindex:"-1"},[ye("header",{ref_key:"headerRef",ref:a,class:Y([y(l).e("header"),g.headerClass,{"show-close":g.showClose}])},[Ye(g.$slots,"header",{},()=>[ye("span",{role:"heading","aria-level":g.ariaLevel,class:Y(y(l).e("title"))},Ct(g.title),11,["aria-level"])]),g.showClose?($(),ue("button",{key:0,"aria-label":y(r)("el.dialog.close"),class:Y(y(l).e("headerbtn")),type:"button",onClick:b=>g.$emit("close")},[xe(y(zt),{class:Y(y(l).e("close"))},{default:Re(()=>[($(),rt(Ln(g.closeIcon||y(i))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Xe("v-if",!0)],2),ye("div",{id:y(o),class:Y([y(l).e("body"),g.bodyClass])},[Ye(g.$slots,"default")],10,["id"]),g.$slots.footer?($(),ue("footer",{key:0,class:Y([y(l).e("footer"),g.footerClass])},[Ye(g.$slots,"footer")],2)):Xe("v-if",!0)],6))}});var zSe=Et(FSe,[["__file","dialog-content.vue"]]);const RY=Tt({...EY,appendToBody:Boolean,appendTo:{type:oT.to.type,default:"body"},beforeClose:{type:Fe(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:Fe([String,Object]),default:AY}}),PY={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[mn]:n=>Cr(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},w6=(n,e={})=>{qr(n)||Gi("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||gt("popup"),r=U(()=>t.bm("parent","hidden"));if(!ar||ho(document.body,r.value))return;let i=0,s=!1,a="0";const o=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=a,Ma(document.body,r.value))},200)};ct(n,l=>{if(!l){o();return}s=!ho(document.body,r.value),s&&(a=document.body.style.width,Ml(document.body,r.value)),i=Fq(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Qu(document.body,"overflowY");i>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${i}px)`)}),vG(()=>o())},DY=(n,e)=>{var t;const i=Dn().emit,{nextZIndex:s}=zg();let a="";const o=Ws(),l=Ws(),c=ne(!1),u=ne(!1),d=ne(!1),h=ne((t=n.zIndex)!=null?t:s());let f,p;const m=Ug("namespace",O1),v=U(()=>{const L={},z=`--${m.value}-dialog`;return n.fullscreen||(n.top&&(L[`${z}-margin-top`]=n.top),n.width&&(L[`${z}-width`]=wi(n.width))),L}),g=U(()=>n.alignCenter?{display:"flex"}:{}),_=U(()=>{const L={name:n.transition,onAfterEnter:b,onBeforeLeave:x,onAfterLeave:S};if(Mn(n.transition)){const z={...n.transition},k=(F,W)=>q=>{xt(F)?F.forEach(Z=>{Yt(Z)&&Z(q)}):Yt(F)&&F(q),W()};return z.onAfterEnter=k(z.onAfterEnter,b),z.onBeforeLeave=k(z.onBeforeLeave,x),z.onAfterLeave=k(z.onAfterLeave,S),z.name||(z.name=AY),z}return L});function b(){i("opened")}function S(){i("closed"),i(mn,!1),n.destroyOnClose&&(d.value=!1)}function x(){i("close")}function w(){p==null||p(),f==null||f(),n.openDelay&&n.openDelay>0?{stop:f}=jp(()=>T(),n.openDelay):T()}function M(){f==null||f(),p==null||p(),n.closeDelay&&n.closeDelay>0?{stop:p}=jp(()=>I(),n.closeDelay):I()}function C(){function L(z){z||(u.value=!0,c.value=!1)}n.beforeClose?n.beforeClose(L):M()}function A(){n.closeOnClickModal&&C()}function T(){ar&&(c.value=!0)}function I(){c.value=!1}function D(){i("openAutoFocus")}function B(){i("closeAutoFocus")}function O(L){var z;((z=L.detail)==null?void 0:z.focusReason)==="pointer"&&L.preventDefault()}n.lockScroll&&w6(c);function H(){n.closeOnPressEscape&&C()}return ct(()=>n.zIndex,()=>{var L;h.value=(L=n.zIndex)!=null?L:s()}),ct(()=>n.modelValue,L=>{var z;L?(u.value=!1,w(),d.value=!0,h.value=(z=n.zIndex)!=null?z:s(),Ut(()=>{i("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):c.value&&M()}),ct(()=>n.fullscreen,L=>{e.value&&(L?(a=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=a)}),Rn(()=>{n.modelValue&&(c.value=!0,d.value=!0,w())}),{afterEnter:b,afterLeave:S,beforeLeave:x,handleClose:C,onModalClick:A,close:M,doClose:I,onOpenAutoFocus:D,onCloseAutoFocus:B,onCloseRequested:H,onFocusoutPrevented:O,titleId:o,bodyId:l,closed:u,style:v,overlayDialogStyle:g,rendered:d,visible:c,zIndex:h,transitionConfig:_}},USe=Ie({name:"ElDialog",inheritAttrs:!1}),HSe=Ie({...USe,props:RY,emits:PY,setup(n,{expose:e}){const t=n,r=es();ud({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},U(()=>!!r.title));const i=gt("dialog"),s=ne(),a=ne(),o=ne(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:f,transitionConfig:p,zIndex:m,handleClose:v,onModalClick:g,onOpenAutoFocus:_,onCloseAutoFocus:b,onCloseRequested:S,onFocusoutPrevented:x}=DY(t,s);jn(TY,{dialogRef:s,headerRef:a,bodyId:u,ns:i,rendered:f,style:d});const w=S6(g),M=U(()=>t.draggable&&!t.fullscreen),C=U(()=>t.modalPenetrable&&!t.modal&&!t.fullscreen);return e({visible:l,dialogContentRef:o,resetPosition:()=>{var T;(T=o.value)==null||T.resetPosition()},handleClose:v}),(T,I)=>($(),rt(y(Vg),{to:T.appendTo,disabled:T.appendTo!=="body"?!1:!T.appendToBody},{default:Re(()=>[xe(Os,Nn(y(p),{persisted:""}),{default:Re(()=>{var D;return[Cn(xe(y(x6),{"custom-mask-event":"",mask:T.modal,"overlay-class":[(D=T.modalClass)!=null?D:"",`${y(i).namespace.value}-modal-dialog`,y(i).is("penetrable",y(C))],"z-index":y(m)},{default:Re(()=>[ye("div",{role:"dialog","aria-modal":"true","aria-label":T.title||void 0,"aria-labelledby":T.title?void 0:y(c),"aria-describedby":y(u),class:Y(`${y(i).namespace.value}-overlay-dialog`),style:Xt(y(h)),onClick:y(w).onClick,onMousedown:y(w).onMousedown,onMouseup:y(w).onMouseup},[xe(y(Hg),{loop:"",trapped:y(l),"focus-start-el":"container",onFocusAfterTrapped:y(_),onFocusAfterReleased:y(b),onFocusoutPrevented:y(x),onReleaseRequested:y(S)},{default:Re(()=>[y(f)?($(),rt(zSe,Nn({key:0,ref_key:"dialogContentRef",ref:o},T.$attrs,{center:T.center,"align-center":T.alignCenter,"close-icon":T.closeIcon,draggable:y(M),overflow:T.overflow,fullscreen:T.fullscreen,"header-class":T.headerClass,"body-class":T.bodyClass,"footer-class":T.footerClass,"show-close":T.showClose,title:T.title,"aria-level":T.headerAriaLevel,onClose:y(v)}),wo({header:Re(()=>[T.$slots.title?Ye(T.$slots,"title",{key:1}):Ye(T.$slots,"header",{key:0,close:y(v),titleId:y(c),titleClass:y(i).e("title")})]),default:Re(()=>[Ye(T.$slots,"default")]),_:2},[T.$slots.footer?{name:"footer",fn:Re(()=>[Ye(T.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Xe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[cr,y(l)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var VSe=Et(HSe,[["__file","dialog.vue"]]);const $Se=bn(VSe),GSe=Tt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Fe(String),default:"solid"}}),WSe=Ie({name:"ElDivider"}),qSe=Ie({...WSe,props:GSe,setup(n){const e=n,t=gt("divider"),r=U(()=>t.cssVar({"border-style":e.borderStyle}));return(i,s)=>($(),ue("div",{class:Y([y(t).b(),y(t).m(i.direction)]),style:Xt(y(r)),role:"separator"},[i.$slots.default&&i.direction!=="vertical"?($(),ue("div",{key:0,class:Y([y(t).e("text"),y(t).is(i.contentPosition)])},[Ye(i.$slots,"default")],2)):Xe("v-if",!0)],6))}});var KSe=Et(qSe,[["__file","divider.vue"]]);const LY=bn(KSe),YSe=Tt({...RY,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),XSe=PY,jSe=Ie({name:"ElDrawer",inheritAttrs:!1}),ZSe=Ie({...jSe,props:YSe,emits:XSe,setup(n,{expose:e}){const t=n,r=es();ud({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},U(()=>!!r.title));const i=ne(),s=ne(),a=gt("drawer"),{t:o}=sr(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:d,rendered:h,titleId:f,bodyId:p,zIndex:m,onModalClick:v,onOpenAutoFocus:g,onCloseAutoFocus:_,onFocusoutPrevented:b,onCloseRequested:S,handleClose:x}=DY(t,i),w=U(()=>t.direction==="rtl"||t.direction==="ltr"),M=U(()=>wi(t.size));return e({handleClose:x,afterEnter:l,afterLeave:c}),(C,A)=>($(),rt(y(Vg),{to:C.appendTo,disabled:C.appendTo!=="body"?!1:!C.appendToBody},{default:Re(()=>[xe(Os,{name:y(a).b("fade"),onAfterEnter:y(l),onAfterLeave:y(c),onBeforeLeave:y(u),persisted:""},{default:Re(()=>[Cn(xe(y(x6),{mask:C.modal,"overlay-class":C.modalClass,"z-index":y(m),onClick:y(v)},{default:Re(()=>[xe(y(Hg),{loop:"",trapped:y(d),"focus-trap-el":i.value,"focus-start-el":s.value,onFocusAfterTrapped:y(g),onFocusAfterReleased:y(_),onFocusoutPrevented:y(b),onReleaseRequested:y(S)},{default:Re(()=>[ye("div",Nn({ref_key:"drawerRef",ref:i,"aria-modal":"true","aria-label":C.title||void 0,"aria-labelledby":C.title?void 0:y(f),"aria-describedby":y(p)},C.$attrs,{class:[y(a).b(),C.direction,y(d)&&"open"],style:y(w)?"width: "+y(M):"height: "+y(M),role:"dialog",onClick:an(()=>{},["stop"])}),[ye("span",{ref_key:"focusStartRef",ref:s,class:Y(y(a).e("sr-focus")),tabindex:"-1"},null,2),C.withHeader?($(),ue("header",{key:0,class:Y([y(a).e("header"),C.headerClass])},[C.$slots.title?Ye(C.$slots,"title",{key:1},()=>[Xe(" DEPRECATED SLOT ")]):Ye(C.$slots,"header",{key:0,close:y(x),titleId:y(f),titleClass:y(a).e("title")},()=>[C.$slots.title?Xe("v-if",!0):($(),ue("span",{key:0,id:y(f),role:"heading","aria-level":C.headerAriaLevel,class:Y(y(a).e("title"))},Ct(C.title),11,["id","aria-level"]))]),C.showClose?($(),ue("button",{key:2,"aria-label":y(o)("el.drawer.close"),class:Y(y(a).e("close-btn")),type:"button",onClick:y(x)},[xe(y(zt),{class:Y(y(a).e("close"))},{default:Re(()=>[xe(y(Bl))]),_:1},8,["class"])],10,["aria-label","onClick"])):Xe("v-if",!0)],2)):Xe("v-if",!0),y(h)?($(),ue("div",{key:1,id:y(p),class:Y([y(a).e("body"),C.bodyClass])},[Ye(C.$slots,"default")],10,["id"])):Xe("v-if",!0),C.$slots.footer?($(),ue("div",{key:2,class:Y([y(a).e("footer"),C.footerClass])},[Ye(C.$slots,"footer")],2)):Xe("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[cr,y(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var QSe=Et(ZSe,[["__file","drawer.vue"]]);const JSe=bn(QSe),exe=Ie({inheritAttrs:!1});function txe(n,e,t,r,i,s){return Ye(n.$slots,"default")}var nxe=Et(exe,[["render",txe],["__file","collection.vue"]]);const rxe=Ie({name:"ElCollectionItem",inheritAttrs:!1});function ixe(n,e,t,r,i,s){return Ye(n.$slots,"default")}var sxe=Et(rxe,[["render",ixe],["__file","collection-item.vue"]]);const kY="data-el-collection-item",OY=n=>{const e=`El${n}Collection`,t=`${e}Item`,r=Symbol(e),i=Symbol(t),s={...nxe,name:e,setup(){const o=ne(),l=new Map;jn(r,{itemMap:l,getItems:()=>{const u=y(o);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${kY}]`));return[...l.values()].sort((f,p)=>d.indexOf(f.ref)-d.indexOf(p.ref))},collectionRef:o})}},a={...sxe,name:t,setup(o,{attrs:l}){const c=ne(),u=Lt(r,void 0);jn(i,{collectionItemRef:c}),Rn(()=>{const d=y(c);d&&u.itemMap.set(d,{ref:d,...l})}),br(()=>{const d=y(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:s,ElCollectionItem:a}},axe=Tt({style:{type:Fe([String,Array,Object])},currentTabId:{type:Fe(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Fe(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:oxe,ElCollectionItem:lxe,COLLECTION_INJECTION_KEY:C6,COLLECTION_ITEM_INJECTION_KEY:cxe}=OY("RovingFocusGroup"),M6=Symbol("elRovingFocusGroup"),NY=Symbol("elRovingFocusGroupItem"),uxe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},dxe=(n,e)=>{if(e!=="rtl")return n;switch(n){case Rt.right:return Rt.left;case Rt.left:return Rt.right;default:return n}},fxe=(n,e,t)=>{const r=dxe(n.code,t);if(!(e==="vertical"&&[Rt.left,Rt.right].includes(r))&&!(e==="horizontal"&&[Rt.up,Rt.down].includes(r)))return uxe[r]},hxe=(n,e)=>n.map((t,r)=>n[(r+e)%n.length]),T6=n=>{const{activeElement:e}=document;for(const t of n)if(t===e||(t.focus(),e!==document.activeElement))return},o7="currentTabIdChange",l7="rovingFocusGroup.entryFocus",pxe={bubbles:!1,cancelable:!0},mxe=Ie({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:axe,emits:[o7,"entryFocus"],setup(n,{emit:e}){var t;const r=ne((t=n.currentTabId||n.defaultCurrentTabId)!=null?t:null),i=ne(!1),s=ne(!1),a=ne(),{getItems:o}=Lt(C6,void 0),l=U(()=>[{outline:"none"},n.style]),c=m=>{e(o7,m)},u=()=>{i.value=!0},d=Ai(m=>{var v;(v=n.onMousedown)==null||v.call(n,m)},()=>{s.value=!0}),h=Ai(m=>{var v;(v=n.onFocus)==null||v.call(n,m)},m=>{const v=!y(s),{target:g,currentTarget:_}=m;if(g===_&&v&&!y(i)){const b=new Event(l7,pxe);if(_==null||_.dispatchEvent(b),!b.defaultPrevented){const S=o().filter(A=>A.focusable),x=S.find(A=>A.active),w=S.find(A=>A.id===y(r)),C=[x,w,...S].filter(Boolean).map(A=>A.ref);T6(C)}}s.value=!1}),f=Ai(m=>{var v;(v=n.onBlur)==null||v.call(n,m)},()=>{i.value=!1}),p=(...m)=>{e("entryFocus",...m)};jn(M6,{currentTabbedId:Pg(r),loop:yr(n,"loop"),tabIndex:U(()=>y(i)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:l,orientation:yr(n,"orientation"),dir:yr(n,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:f,onFocus:h,onMousedown:d}),ct(()=>n.currentTabId,m=>{r.value=m??null}),Lr(a,l7,p)}});function vxe(n,e,t,r,i,s){return Ye(n.$slots,"default")}var gxe=Et(mxe,[["render",vxe],["__file","roving-focus-group-impl.vue"]]);const yxe=Ie({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:oxe,ElRovingFocusGroupImpl:gxe}});function bxe(n,e,t,r,i,s){const a=dn("el-roving-focus-group-impl"),o=dn("el-focus-group-collection");return $(),rt(o,null,{default:Re(()=>[xe(a,Vo(nu(n.$attrs)),{default:Re(()=>[Ye(n.$slots,"default")]),_:3},16)]),_:3})}var _xe=Et(yxe,[["render",bxe],["__file","roving-focus-group.vue"]]);const t2=Tt({trigger:Cv.trigger,triggerKeys:{type:Fe(Array),default:()=>[Rt.enter,Rt.numpadEnter,Rt.space,Rt.down]},effect:{...Ri.effect,default:"light"},type:{type:Fe(String)},placement:{type:Fe(String),default:"bottom"},popperOptions:{type:Fe(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Fe([Number,String]),default:0},maxHeight:{type:Fe([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:eK,default:"menu"},buttonProps:{type:Fe(Object)},teleported:Ri.teleported,persistent:{type:Boolean,default:!0}}),BY=Tt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Ar}}),Sxe=Tt({onKeydown:{type:Fe(Function)}}),xxe=[Rt.down,Rt.pageDown,Rt.home],FY=[Rt.up,Rt.pageUp,Rt.end],wxe=[...xxe,...FY],{ElCollection:Cxe,ElCollectionItem:Mxe,COLLECTION_INJECTION_KEY:Txe,COLLECTION_ITEM_INJECTION_KEY:Axe}=OY("Dropdown"),hT=Symbol("elDropdown"),zY="elDropdown",{ButtonGroup:Exe}=ks,Ixe=Ie({name:"ElDropdown",components:{ElButton:ks,ElButtonGroup:Exe,ElScrollbar:mc,ElDropdownCollection:Cxe,ElTooltip:ia,ElRovingFocusGroup:_xe,ElOnlyChild:iK,ElIcon:zt,ArrowDown:mu},props:t2,emits:["visible-change","click","command"],setup(n,{emit:e}){const t=Dn(),r=gt("dropdown"),{t:i}=sr(),s=ne(),a=ne(),o=ne(),l=ne(),c=ne(null),u=ne(null),d=ne(!1),h=U(()=>({maxHeight:wi(n.maxHeight)})),f=U(()=>[r.m(S.value)]),p=U(()=>Is(n.trigger)),m=Ws().value,v=U(()=>n.id||m);ct([s,p],([L,z],[k])=>{var F,W,q;(F=k==null?void 0:k.$el)!=null&&F.removeEventListener&&k.$el.removeEventListener("pointerenter",w),(W=L==null?void 0:L.$el)!=null&&W.removeEventListener&&L.$el.removeEventListener("pointerenter",w),(q=L==null?void 0:L.$el)!=null&&q.addEventListener&&z.includes("hover")&&L.$el.addEventListener("pointerenter",w)},{immediate:!0}),br(()=>{var L,z;(z=(L=s.value)==null?void 0:L.$el)!=null&&z.removeEventListener&&s.value.$el.removeEventListener("pointerenter",w)});function g(){_()}function _(){var L;(L=o.value)==null||L.onClose()}function b(){var L;(L=o.value)==null||L.onOpen()}const S=Qi();function x(...L){e("command",...L)}function w(){var L,z;(z=(L=s.value)==null?void 0:L.$el)==null||z.focus({preventScroll:!0})}function M(){}function C(){const L=y(l);p.value.includes("hover")&&(L==null||L.focus({preventScroll:!0})),u.value=null}function A(L){u.value=L}function T(L){d.value||(L.preventDefault(),L.stopImmediatePropagation())}function I(){e("visible-change",!0)}function D(L){var z;(L==null?void 0:L.type)==="keydown"&&((z=l.value)==null||z.focus())}function B(){e("visible-change",!1)}return jn(hT,{contentRef:l,role:U(()=>n.role),triggerId:v,isUsingKeyboard:d,onItemEnter:M,onItemLeave:C}),jn(zY,{instance:t,dropdownSize:S,handleClick:g,commandHandler:x,trigger:yr(n,"trigger"),hideOnClick:yr(n,"hideOnClick")}),{t:i,ns:r,scrollbar:c,wrapStyle:h,dropdownTriggerKls:f,dropdownSize:S,triggerId:v,currentTabId:u,handleCurrentTabIdChange:A,handlerMainButtonClick:L=>{e("click",L)},handleEntryFocus:T,handleClose:_,handleOpen:b,handleBeforeShowTooltip:I,handleShowTooltip:D,handleBeforeHideTooltip:B,onFocusAfterTrapped:L=>{var z,k;L.preventDefault(),(k=(z=l.value)==null?void 0:z.focus)==null||k.call(z,{preventScroll:!0})},popperRef:o,contentRef:l,triggeringElementRef:s,referenceElementRef:a}}});function Rxe(n,e,t,r,i,s){var a;const o=dn("el-dropdown-collection"),l=dn("el-roving-focus-group"),c=dn("el-scrollbar"),u=dn("el-only-child"),d=dn("el-tooltip"),h=dn("el-button"),f=dn("arrow-down"),p=dn("el-icon"),m=dn("el-button-group");return $(),ue("div",{class:Y([n.ns.b(),n.ns.is("disabled",n.disabled)])},[xe(d,{ref:"popperRef",role:n.role,effect:n.effect,"fallback-placements":["bottom","top"],"popper-options":n.popperOptions,"gpu-acceleration":!1,"hide-after":n.trigger==="hover"?n.hideTimeout:0,"manual-mode":!0,placement:n.placement,"popper-class":[n.ns.e("popper"),n.popperClass],"reference-element":(a=n.referenceElementRef)==null?void 0:a.$el,trigger:n.trigger,"trigger-keys":n.triggerKeys,"trigger-target-el":n.contentRef,"show-after":n.trigger==="hover"?n.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":n.triggeringElementRef,"virtual-triggering":n.splitButton,disabled:n.disabled,transition:`${n.ns.namespace.value}-zoom-in-top`,teleported:n.teleported,pure:"",persistent:n.persistent,onBeforeShow:n.handleBeforeShowTooltip,onShow:n.handleShowTooltip,onBeforeHide:n.handleBeforeHideTooltip},wo({content:Re(()=>[xe(c,{ref:"scrollbar","wrap-style":n.wrapStyle,tag:"div","view-class":n.ns.e("list")},{default:Re(()=>[xe(l,{loop:n.loop,"current-tab-id":n.currentTabId,orientation:"horizontal",onCurrentTabIdChange:n.handleCurrentTabIdChange,onEntryFocus:n.handleEntryFocus},{default:Re(()=>[xe(o,null,{default:Re(()=>[Ye(n.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[n.splitButton?void 0:{name:"default",fn:Re(()=>[xe(u,{id:n.triggerId,ref:"triggeringElementRef",role:"button",tabindex:n.tabindex},{default:Re(()=>[Ye(n.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),n.splitButton?($(),rt(m,{key:0},{default:Re(()=>[xe(h,Nn({ref:"referenceElementRef"},n.buttonProps,{size:n.dropdownSize,type:n.type,disabled:n.disabled,tabindex:n.tabindex,onClick:n.handlerMainButtonClick}),{default:Re(()=>[Ye(n.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),xe(h,Nn({id:n.triggerId,ref:"triggeringElementRef"},n.buttonProps,{role:"button",size:n.dropdownSize,type:n.type,class:n.ns.e("caret-button"),disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.t("el.dropdown.toggleDropdown")}),{default:Re(()=>[xe(p,{class:Y(n.ns.e("icon"))},{default:Re(()=>[xe(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Xe("v-if",!0)],2)}var Pxe=Et(Ixe,[["render",Rxe],["__file","dropdown.vue"]]);const Dxe=Ie({components:{ElRovingFocusCollectionItem:lxe},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(n,{emit:e}){const{currentTabbedId:t,loop:r,onItemFocus:i,onItemShiftTab:s}=Lt(M6,void 0),{getItems:a}=Lt(C6,void 0),o=Ws(),l=ne(),c=Ai(f=>{e("mousedown",f)},f=>{n.focusable?i(y(o)):f.preventDefault()}),u=Ai(f=>{e("focus",f)},()=>{i(y(o))}),d=Ai(f=>{e("keydown",f)},f=>{const{code:p,shiftKey:m,target:v,currentTarget:g}=f;if(p===Rt.tab&&m){s();return}if(v!==g)return;const _=fxe(f);if(_){f.preventDefault();let S=a().filter(x=>x.focusable).map(x=>x.ref);switch(_){case"last":{S.reverse();break}case"prev":case"next":{_==="prev"&&S.reverse();const x=S.indexOf(g);S=r.value?hxe(S,x+1):S.slice(x+1);break}}Ut(()=>{T6(S)})}}),h=U(()=>t.value===y(o));return jn(NY,{rovingFocusGroupItemRef:l,tabIndex:U(()=>y(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:o,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function Lxe(n,e,t,r,i,s){const a=dn("el-roving-focus-collection-item");return $(),rt(a,{id:n.id,focusable:n.focusable,active:n.active},{default:Re(()=>[Ye(n.$slots,"default")]),_:3},8,["id","focusable","active"])}var kxe=Et(Dxe,[["render",Lxe],["__file","roving-focus-item.vue"]]);const Oxe=Ie({name:"DropdownItemImpl",components:{ElIcon:zt},props:BY,emits:["pointermove","pointerleave","click","clickimpl"],setup(n,{emit:e}){const t=gt("dropdown"),{role:r}=Lt(hT,void 0),{collectionItemRef:i}=Lt(Axe,void 0),{collectionItemRef:s}=Lt(cxe,void 0),{rovingFocusGroupItemRef:a,tabIndex:o,handleFocus:l,handleKeydown:c,handleMousedown:u}=Lt(NY,void 0),d=fT(i,s,a),h=U(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),f=Ai(p=>{if([Rt.enter,Rt.numpadEnter,Rt.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),e("clickimpl",p),!0},c);return{ns:t,itemRef:d,dataset:{[kY]:""},role:h,tabIndex:o,handleFocus:l,handleKeydown:f,handleMousedown:u}}});function Nxe(n,e,t,r,i,s){const a=dn("el-icon");return $(),ue(Bt,null,[n.divided?($(),ue("li",{key:0,role:"separator",class:Y(n.ns.bem("menu","item","divided"))},null,2)):Xe("v-if",!0),ye("li",Nn({ref:n.itemRef},{...n.dataset,...n.$attrs},{"aria-disabled":n.disabled,class:[n.ns.be("menu","item"),n.ns.is("disabled",n.disabled)],tabindex:n.tabIndex,role:n.role,onClick:o=>n.$emit("clickimpl",o),onFocus:n.handleFocus,onKeydown:an(n.handleKeydown,["self"]),onMousedown:n.handleMousedown,onPointermove:o=>n.$emit("pointermove",o),onPointerleave:o=>n.$emit("pointerleave",o)}),[n.icon?($(),rt(a,{key:0},{default:Re(()=>[($(),rt(Ln(n.icon)))]),_:1})):Xe("v-if",!0),Ye(n.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Bxe=Et(Oxe,[["render",Nxe],["__file","dropdown-item-impl.vue"]]);const UY=()=>{const n=Lt(zY,{}),e=U(()=>n==null?void 0:n.dropdownSize);return{elDropdown:n,_elDropdownSize:e}},Fxe=Ie({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Mxe,ElRovingFocusItem:kxe,ElDropdownItemImpl:Bxe},inheritAttrs:!1,props:BY,emits:["pointermove","pointerleave","click"],setup(n,{emit:e,attrs:t}){const{elDropdown:r}=UY(),i=Dn(),s=ne(null),a=U(()=>{var f,p;return(p=(f=y(s))==null?void 0:f.textContent)!=null?p:""}),{onItemEnter:o,onItemLeave:l}=Lt(hT,void 0),c=Ai(f=>(e("pointermove",f),f.defaultPrevented),UB(f=>{if(n.disabled){l(f);return}const p=f.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(o(f),f.defaultPrevented||p==null||p.focus({preventScroll:!0}))})),u=Ai(f=>(e("pointerleave",f),f.defaultPrevented),UB(l)),d=Ai(f=>{if(!n.disabled)return e("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var p,m,v;if(n.disabled){f.stopImmediatePropagation();return}(p=r==null?void 0:r.hideOnClick)!=null&&p.value&&((m=r.handleClick)==null||m.call(r)),(v=r.commandHandler)==null||v.call(r,n.command,i,f)}),h=U(()=>({...n,...t}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:a,propsAndAttrs:h}}});function zxe(n,e,t,r,i,s){var a;const o=dn("el-dropdown-item-impl"),l=dn("el-roving-focus-item"),c=dn("el-dropdown-collection-item");return $(),rt(c,{disabled:n.disabled,"text-value":(a=n.textValue)!=null?a:n.textContent},{default:Re(()=>[xe(l,{focusable:!n.disabled},{default:Re(()=>[xe(o,Nn(n.propsAndAttrs,{onPointerleave:n.handlePointerLeave,onPointermove:n.handlePointerMove,onClickimpl:n.handleClick}),{default:Re(()=>[Ye(n.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var HY=Et(Fxe,[["render",zxe],["__file","dropdown-item.vue"]]);const Uxe=Ie({name:"ElDropdownMenu",props:Sxe,setup(n){const e=gt("dropdown"),{_elDropdownSize:t}=UY(),r=t.value,{focusTrapRef:i,onKeydown:s}=Lt(JD,void 0),{contentRef:a,role:o,triggerId:l}=Lt(hT,void 0),{collectionRef:c,getItems:u}=Lt(Txe,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:f,onBlur:p,onFocus:m,onMousedown:v}=Lt(M6,void 0),{collectionRef:g}=Lt(C6,void 0),_=U(()=>[e.b("menu"),e.bm("menu",r==null?void 0:r.value)]),b=fT(a,c,i,d,g),S=Ai(w=>{var M;(M=n.onKeydown)==null||M.call(n,w)},w=>{const{currentTarget:M,code:C,target:A}=w;if(M.contains(A),Rt.tab===C&&w.stopImmediatePropagation(),w.preventDefault(),A!==y(a)||!wxe.includes(C))return;const I=u().filter(D=>!D.disabled).map(D=>D.ref);FY.includes(C)&&I.reverse(),T6(I)});return{size:r,rovingFocusGroupRootStyle:h,tabIndex:f,dropdownKls:_,role:o,triggerId:l,dropdownListWrapperRef:b,handleKeydown:w=>{S(w),s(w)},onBlur:p,onFocus:m,onMousedown:v}}});function Hxe(n,e,t,r,i,s){return $(),ue("ul",{ref:n.dropdownListWrapperRef,class:Y(n.dropdownKls),style:Xt(n.rovingFocusGroupRootStyle),tabindex:-1,role:n.role,"aria-labelledby":n.triggerId,onBlur:n.onBlur,onFocus:n.onFocus,onKeydown:an(n.handleKeydown,["self"]),onMousedown:an(n.onMousedown,["self"])},[Ye(n.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var VY=Et(Uxe,[["render",Hxe],["__file","dropdown-menu.vue"]]);const Vxe=bn(Pxe,{DropdownItem:HY,DropdownMenu:VY}),$xe=pi(HY),Gxe=pi(VY),Wxe=Ie({name:"ImgEmpty"}),qxe=Ie({...Wxe,setup(n){const e=gt("empty"),t=Ws();return(r,i)=>($(),ue("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[ye("defs",null,[ye("linearGradient",{id:`linearGradient-1-${y(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[ye("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ye("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ye("linearGradient",{id:`linearGradient-2-${y(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[ye("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ye("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ye("rect",{id:`path-3-${y(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),ye("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[ye("g",{transform:"translate(-1268.000000, -535.000000)"},[ye("g",{transform:"translate(1268.000000, 535.000000)"},[ye("path",{d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${y(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),ye("polygon",{fill:`var(${y(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),ye("g",{transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[ye("polygon",{fill:`var(${y(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),ye("polygon",{fill:`var(${y(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),ye("rect",{fill:`url(#linearGradient-1-${y(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),ye("polygon",{fill:`var(${y(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),ye("rect",{fill:`url(#linearGradient-2-${y(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),ye("g",{transform:"translate(53.000000, 45.000000)"},[ye("use",{fill:`var(${y(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${y(t)}`},null,8,["fill","xlink:href"]),ye("polygon",{fill:`var(${y(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${y(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),ye("polygon",{fill:`var(${y(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var Kxe=Et(qxe,[["__file","img-empty.vue"]]);const Yxe=Tt({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),Xxe=Ie({name:"ElEmpty"}),jxe=Ie({...Xxe,props:Yxe,setup(n){const e=n,{t}=sr(),r=gt("empty"),i=U(()=>e.description||t("el.table.emptyText")),s=U(()=>({width:wi(e.imageSize)}));return(a,o)=>($(),ue("div",{class:Y(y(r).b())},[ye("div",{class:Y(y(r).e("image")),style:Xt(y(s))},[a.image?($(),ue("img",{key:0,src:a.image,ondragstart:"return false"},null,8,["src"])):Ye(a.$slots,"image",{key:1},()=>[xe(Kxe)])],6),ye("div",{class:Y(y(r).e("description"))},[a.$slots.description?Ye(a.$slots,"description",{key:0}):($(),ue("p",{key:1},Ct(y(i)),1))],2),a.$slots.default?($(),ue("div",{key:0,class:Y(y(r).e("bottom"))},[Ye(a.$slots,"default")],2)):Xe("v-if",!0)],2))}});var Zxe=Et(jxe,[["__file","empty.vue"]]);const $Y=bn(Zxe),Qxe=Tt({size:{type:String,values:pu},disabled:Boolean}),Jxe=Tt({...Qxe,model:Object,rules:{type:Fe(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:Fe([Object,Boolean]),default:!0}}),ewe={validate:(n,e,t)=>(xt(n)||Wt(n))&&Cr(e)&&Wt(t)};function twe(){const n=ne([]),e=U(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const a=n.value.indexOf(s);return a===-1&&e.value,a}function r(s,a){if(s&&a){const o=t(a);n.value.splice(o,1,s)}else s&&n.value.push(s)}function i(s){const a=t(s);a>-1&&n.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:i}}const VS=(n,e)=>{const t=Is(e).map(r=>xt(r)?r.join("."):r);return t.length>0?n.filter(r=>r.propString&&t.includes(r.propString)):n},nwe="ElForm",rwe=Ie({name:nwe}),iwe=Ie({...rwe,props:Jxe,emits:ewe,setup(n,{expose:e,emit:t}){const r=n,i=ne(),s=pr([]),a=Qi(),o=gt("form"),l=U(()=>{const{labelPosition:S,inline:x}=r;return[o.b(),o.m(a.value||"default"),{[o.m(`label-${S}`)]:S,[o.m("inline")]:x}]}),c=S=>VS(s,[S])[0],u=S=>{s.push(S)},d=S=>{S.prop&&s.splice(s.indexOf(S),1)},h=(S=[])=>{r.model&&VS(s,S).forEach(x=>x.resetField())},f=(S=[])=>{VS(s,S).forEach(x=>x.clearValidate())},p=U(()=>!!r.model),m=S=>{if(s.length===0)return[];const x=VS(s,S);return x.length?x:[]},v=async S=>_(void 0,S),g=async(S=[])=>{if(!p.value)return!1;const x=m(S);if(x.length===0)return!0;let w={};for(const M of x)try{await M.validate(""),M.validateState==="error"&&!M.error&&M.resetField()}catch(C){w={...w,...C}}return Object.keys(w).length===0?!0:Promise.reject(w)},_=async(S=[],x)=>{let w=!1;const M=!Yt(x);try{return w=await g(S),w===!0&&await(x==null?void 0:x(w)),w}catch(C){if(C instanceof Error)throw C;const A=C;if(r.scrollToError&&i.value){const T=i.value.querySelector(`.${o.b()}-item.is-error`);T==null||T.scrollIntoView(r.scrollIntoViewOptions)}return!w&&await(x==null?void 0:x(!1,A)),M&&Promise.reject(A)}},b=S=>{var x;const w=c(S);w&&((x=w.$el)==null||x.scrollIntoView(r.scrollIntoViewOptions))};return ct(()=>r.rules,()=>{r.validateOnRuleChange&&v().catch(S=>void 0)},{deep:!0,flush:"post"}),jn(y0,pr({...bs(r),emit:t,resetFields:h,clearValidate:f,validateField:_,getField:c,addField:u,removeField:d,...twe()})),e({validate:v,validateField:_,resetFields:h,clearValidate:f,scrollToField:b,getField:c,fields:s}),(S,x)=>($(),ue("form",{ref_key:"formRef",ref:i,class:Y(y(l))},[Ye(S.$slots,"default")],2))}});var swe=Et(iwe,[["__file","form.vue"]]);function xp(){return xp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xp.apply(this,arguments)}function awe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Fb(n,e)}function XI(n){return XI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},XI(n)}function Fb(n,e){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Fb(n,e)}function owe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function n2(n,e,t){return owe()?n2=Reflect.construct.bind():n2=function(i,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(i,o),c=new l;return a&&Fb(c,a.prototype),c},n2.apply(null,arguments)}function lwe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function jI(n){var e=typeof Map=="function"?new Map:void 0;return jI=function(r){if(r===null||!lwe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return n2(r,arguments,XI(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Fb(i,r)},jI(n)}var cwe=/%[sdj%]/g,uwe=function(){};typeof process<"u"&&process.env;function ZI(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function Go(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var a=n.replace(cwe,function(o){if(o==="%%")return"%";if(i>=s)return o;switch(o){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return o}});return a}return n}function dwe(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function Ns(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||dwe(e)&&typeof n=="string"&&!n)}function fwe(n,e,t){var r=[],i=0,s=n.length;function a(o){r.push.apply(r,o||[]),i++,i===s&&t(r)}n.forEach(function(o){e(o,a)})}function c7(n,e,t){var r=0,i=n.length;function s(a){if(a&&a.length){t(a);return}var o=r;r=r+1,o<i?e(n[o],s):t([])}s([])}function hwe(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var u7=function(n){awe(e,n);function e(t,r){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=r,i}return e}(jI(Error));function pwe(n,e,t,r,i){if(e.first){var s=new Promise(function(h,f){var p=function(g){return r(g),g.length?f(new u7(g,ZI(g))):h(i)},m=hwe(n);c7(m,t,p)});return s.catch(function(h){return h}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],o=Object.keys(n),l=o.length,c=0,u=[],d=new Promise(function(h,f){var p=function(v){if(u.push.apply(u,v),c++,c===l)return r(u),u.length?f(new u7(u,ZI(u))):h(i)};o.length||(r(u),h(i)),o.forEach(function(m){var v=n[m];a.indexOf(m)!==-1?c7(v,t,p):fwe(v,t,p)})});return d.catch(function(h){return h}),d}function mwe(n){return!!(n&&n.message!==void 0)}function vwe(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function d7(n,e){return function(t){var r;return n.fullFields?r=vwe(e,n.fullFields):r=e[t.field||n.fullField],mwe(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function f7(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=xp({},n[t],r):n[t]=r}}return n}var GY=function(e,t,r,i,s,a){e.required&&(!r.hasOwnProperty(e.field)||Ns(t,a||e.type))&&i.push(Go(s.messages.required,e.fullField))},gwe=function(e,t,r,i,s){(/^\s+$/.test(t)||t==="")&&i.push(Go(s.messages.whitespace,e.fullField))},$S,ywe=function(){if($S)return $S;var n="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),a=new RegExp("^"+t+"$"),o=new RegExp("^"+i+"$"),l=function(S){return S&&S.exact?s:new RegExp("(?:"+e(S)+t+e(S)+")|(?:"+e(S)+i+e(S)+")","g")};l.v4=function(b){return b&&b.exact?a:new RegExp(""+e(b)+t+e(b),"g")},l.v6=function(b){return b&&b.exact?o:new RegExp(""+e(b)+i+e(b),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',_="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+f+p+m+")"+v+g;return $S=new RegExp("(?:^"+_+"$)","i"),$S},h7={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},p1={integer:function(e){return p1.number(e)&&parseInt(e,10)===e},float:function(e){return p1.number(e)&&!p1.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!p1.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(h7.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(ywe())},hex:function(e){return typeof e=="string"&&!!e.match(h7.hex)}},bwe=function(e,t,r,i,s){if(e.required&&t===void 0){GY(e,t,r,i,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?p1[o](t)||i.push(Go(s.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&i.push(Go(s.messages.types[o],e.fullField,e.type))},_we=function(e,t,r,i,s){var a=typeof e.len=="number",o=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,h=typeof t=="number",f=typeof t=="string",p=Array.isArray(t);if(h?d="number":f?d="string":p&&(d="array"),!d)return!1;p&&(u=t.length),f&&(u=t.replace(c,"_").length),a?u!==e.len&&i.push(Go(s.messages[d].len,e.fullField,e.len)):o&&!l&&u<e.min?i.push(Go(s.messages[d].min,e.fullField,e.min)):l&&!o&&u>e.max?i.push(Go(s.messages[d].max,e.fullField,e.max)):o&&l&&(u<e.min||u>e.max)&&i.push(Go(s.messages[d].range,e.fullField,e.min,e.max))},B0="enum",Swe=function(e,t,r,i,s){e[B0]=Array.isArray(e[B0])?e[B0]:[],e[B0].indexOf(t)===-1&&i.push(Go(s.messages[B0],e.fullField,e[B0].join(", ")))},xwe=function(e,t,r,i,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(Go(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(t)||i.push(Go(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},$r={required:GY,whitespace:gwe,type:bwe,range:_we,enum:Swe,pattern:xwe},wwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t,"string")&&!e.required)return r();$r.required(e,t,i,a,s,"string"),Ns(t,"string")||($r.type(e,t,i,a,s),$r.range(e,t,i,a,s),$r.pattern(e,t,i,a,s),e.whitespace===!0&&$r.whitespace(e,t,i,a,s))}r(a)},Cwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&$r.type(e,t,i,a,s)}r(a)},Mwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(t===""&&(t=void 0),Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&($r.type(e,t,i,a,s),$r.range(e,t,i,a,s))}r(a)},Twe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&$r.type(e,t,i,a,s)}r(a)},Awe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),Ns(t)||$r.type(e,t,i,a,s)}r(a)},Ewe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&($r.type(e,t,i,a,s),$r.range(e,t,i,a,s))}r(a)},Iwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&($r.type(e,t,i,a,s),$r.range(e,t,i,a,s))}r(a)},Rwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(t==null&&!e.required)return r();$r.required(e,t,i,a,s,"array"),t!=null&&($r.type(e,t,i,a,s),$r.range(e,t,i,a,s))}r(a)},Pwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&$r.type(e,t,i,a,s)}r(a)},Dwe="enum",Lwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s),t!==void 0&&$r[Dwe](e,t,i,a,s)}r(a)},kwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t,"string")&&!e.required)return r();$r.required(e,t,i,a,s),Ns(t,"string")||$r.pattern(e,t,i,a,s)}r(a)},Owe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t,"date")&&!e.required)return r();if($r.required(e,t,i,a,s),!Ns(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),$r.type(e,l,i,a,s),l&&$r.range(e,l.getTime(),i,a,s)}}r(a)},Nwe=function(e,t,r,i,s){var a=[],o=Array.isArray(t)?"array":typeof t;$r.required(e,t,i,a,s,o),r(a)},a3=function(e,t,r,i,s){var a=e.type,o=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(Ns(t,a)&&!e.required)return r();$r.required(e,t,i,o,s,a),Ns(t,a)||$r.type(e,t,i,o,s)}r(o)},Bwe=function(e,t,r,i,s){var a=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(Ns(t)&&!e.required)return r();$r.required(e,t,i,a,s)}r(a)},U1={string:wwe,method:Cwe,number:Mwe,boolean:Twe,regexp:Awe,integer:Ewe,float:Iwe,array:Rwe,object:Pwe,enum:Lwe,pattern:kwe,date:Owe,url:a3,hex:a3,email:a3,required:Nwe,any:Bwe};function QI(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var JI=QI(),X_=function(){function n(t){this.rules=null,this._messages=JI,this.define(t)}var e=n.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var a=r[s];i.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(r){return r&&(this._messages=f7(QI(),r)),this._messages},e.validate=function(r,i,s){var a=this;i===void 0&&(i={}),s===void 0&&(s=function(){});var o=r,l=i,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,o),Promise.resolve(o);function u(m){var v=[],g={};function _(S){if(Array.isArray(S)){var x;v=(x=v).concat.apply(x,S)}else v.push(S)}for(var b=0;b<m.length;b++)_(m[b]);v.length?(g=ZI(v),c(v,g)):c(null,o)}if(l.messages){var d=this.messages();d===JI&&(d=QI()),f7(d,l.messages),l.messages=d}else l.messages=this.messages();var h={},f=l.keys||Object.keys(this.rules);f.forEach(function(m){var v=a.rules[m],g=o[m];v.forEach(function(_){var b=_;typeof b.transform=="function"&&(o===r&&(o=xp({},o)),g=o[m]=b.transform(g)),typeof b=="function"?b={validator:b}:b=xp({},b),b.validator=a.getValidationMethod(b),b.validator&&(b.field=m,b.fullField=b.fullField||m,b.type=a.getType(b),h[m]=h[m]||[],h[m].push({rule:b,value:g,source:o,field:m}))})});var p={};return pwe(h,l,function(m,v){var g=m.rule,_=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");_=_&&(g.required||!g.required&&m.value),g.field=m.field;function b(w,M){return xp({},M,{fullField:g.fullField+"."+w,fullFields:g.fullFields?[].concat(g.fullFields,[w]):[w]})}function S(w){w===void 0&&(w=[]);var M=Array.isArray(w)?w:[w];!l.suppressWarning&&M.length&&n.warning("async-validator:",M),M.length&&g.message!==void 0&&(M=[].concat(g.message));var C=M.map(d7(g,o));if(l.first&&C.length)return p[g.field]=1,v(C);if(!_)v(C);else{if(g.required&&!m.value)return g.message!==void 0?C=[].concat(g.message).map(d7(g,o)):l.error&&(C=[l.error(g,Go(l.messages.required,g.field))]),v(C);var A={};g.defaultField&&Object.keys(m.value).map(function(D){A[D]=g.defaultField}),A=xp({},A,m.rule.fields);var T={};Object.keys(A).forEach(function(D){var B=A[D],O=Array.isArray(B)?B:[B];T[D]=O.map(b.bind(null,D))});var I=new n(T);I.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),I.validate(m.value,m.rule.options||l,function(D){var B=[];C&&C.length&&B.push.apply(B,C),D&&D.length&&B.push.apply(B,D),v(B.length?B:null)})}}var x;if(g.asyncValidator)x=g.asyncValidator(g,m.value,S,m.source,l);else if(g.validator){try{x=g.validator(g,m.value,S,m.source,l)}catch(w){console.error==null||console.error(w),l.suppressValidatorError||setTimeout(function(){throw w},0),S(w.message)}x===!0?S():x===!1?S(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):x instanceof Array?S(x):x instanceof Error&&S(x.message)}x&&x.then&&x.then(function(){return S()},function(w){return S(w)})},function(m){u(m)},o)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!U1.hasOwnProperty(r.type))throw new Error(Go("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),s=i.indexOf("message");return s!==-1&&i.splice(s,1),i.length===1&&i[0]==="required"?U1.required:U1[this.getType(r)]||void 0},n}();X_.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");U1[e]=t};X_.warning=uwe;X_.messages=JI;X_.validators=U1;const Fwe=["","error","validating","success"],zwe=Tt({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Fe([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Fe([Object,Array])},error:String,validateStatus:{type:String,values:Fwe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:pu}}),p7="ElLabelWrap";var Uwe=Ie({name:p7,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=Lt(y0,void 0),r=Lt(su);r||Gi(p7,"usage: <el-form-item><label-wrap /></el-form-item>");const i=gt("form"),s=ne(),a=ne(0),o=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{Ut(()=>{e.default&&n.isAutoWidth&&(u==="update"?a.value=o():u==="remove"&&(t==null||t.deregisterLabelWidth(a.value)))})},c=()=>l("update");return Rn(()=>{c()}),br(()=>{l("remove")}),yc(()=>c()),ct(a,(u,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(u,d))}),fi(U(()=>{var u,d;return(d=(u=s.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:h}=n;if(h){const f=t==null?void 0:t.autoLabelWidth,p=r==null?void 0:r.hasLabel,m={};if(p&&f&&f!=="auto"){const v=Math.max(0,Number.parseInt(f,10)-a.value),_=(r.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";v&&(m[_]=`${v}px`)}return xe("div",{ref:s,class:[i.be("item","label-wrap")],style:m},[(u=e.default)==null?void 0:u.call(e)])}else return xe(Bt,{ref:s},[(d=e.default)==null?void 0:d.call(e)])}}});const Hwe=Ie({name:"ElFormItem"}),Vwe=Ie({...Hwe,props:zwe,setup(n,{expose:e}){const t=n,r=es(),i=Lt(y0,void 0),s=Lt(su,void 0),a=Qi(void 0,{formItem:!1}),o=gt("form-item"),l=Ws().value,c=ne([]),u=ne(""),d=nhe(u,100),h=ne(""),f=ne();let p,m=!1;const v=U(()=>t.labelPosition||(i==null?void 0:i.labelPosition)),g=U(()=>{if(v.value==="top")return{};const we=wi(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return we?{width:we}:{}}),_=U(()=>{if(v.value==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&T)return{};const we=wi(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!r.label?{marginLeft:we}:{}}),b=U(()=>[o.b(),o.m(a.value),o.is("error",u.value==="error"),o.is("validating",u.value==="validating"),o.is("success",u.value==="success"),o.is("required",H.value||t.required),o.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:i==null?void 0:i.statusIcon,[o.m(`label-${v.value}`)]:v.value}]),S=U(()=>Cr(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),x=U(()=>[o.e("error"),{[o.em("error","inline")]:S.value}]),w=U(()=>t.prop?xt(t.prop)?t.prop.join("."):t.prop:""),M=U(()=>!!(t.label||r.label)),C=U(()=>{var we;return(we=t.for)!=null?we:c.value.length===1?c.value[0]:void 0}),A=U(()=>!C.value&&M.value),T=!!s,I=U(()=>{const we=i==null?void 0:i.model;if(!(!we||!t.prop))return B1(we,t.prop).value}),D=U(()=>{const{required:we}=t,He=[];t.rules&&He.push(...Is(t.rules));const Ge=i==null?void 0:i.rules;if(Ge&&t.prop){const me=B1(Ge,t.prop).value;me&&He.push(...Is(me))}if(we!==void 0){const me=He.map((be,oe)=>[be,oe]).filter(([be])=>Object.keys(be).includes("required"));if(me.length>0)for(const[be,oe]of me)be.required!==we&&(He[oe]={...be,required:we});else He.push({required:we})}return He}),B=U(()=>D.value.length>0),O=we=>D.value.filter(Ge=>!Ge.trigger||!we?!0:xt(Ge.trigger)?Ge.trigger.includes(we):Ge.trigger===we).map(({trigger:Ge,...me})=>me),H=U(()=>D.value.some(we=>we.required)),L=U(()=>{var we;return d.value==="error"&&t.showMessage&&((we=i==null?void 0:i.showMessage)!=null?we:!0)}),z=U(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),k=we=>{u.value=we},F=we=>{var He,Ge;const{errors:me,fields:be}=we;(!me||!be)&&console.error(we),k("error"),h.value=me?(Ge=(He=me==null?void 0:me[0])==null?void 0:He.message)!=null?Ge:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,h.value)},W=()=>{k("success"),i==null||i.emit("validate",t.prop,!0,"")},q=async we=>{const He=w.value;return new X_({[He]:we}).validate({[He]:I.value},{firstFields:!0}).then(()=>(W(),!0)).catch(me=>(F(me),Promise.reject(me)))},Z=async(we,He)=>{if(m||!t.prop)return!1;const Ge=Yt(He);if(!B.value)return He==null||He(!1),!1;const me=O(we);return me.length===0?(He==null||He(!0),!0):(k("validating"),q(me).then(()=>(He==null||He(!0),!0)).catch(be=>{const{fields:oe}=be;return He==null||He(!1,oe),Ge?!1:Promise.reject(oe)}))},se=()=>{k(""),h.value="",m=!1},X=async()=>{const we=i==null?void 0:i.model;if(!we||!t.prop)return;const He=B1(we,t.prop);m=!0,He.value=YN(p),await Ut(),se(),m=!1},ie=we=>{c.value.includes(we)||c.value.push(we)},ae=we=>{c.value=c.value.filter(He=>He!==we)};ct(()=>t.error,we=>{h.value=we||"",k(we?"error":"")},{immediate:!0}),ct(()=>t.validateStatus,we=>k(we||""));const ce=pr({...bs(t),$el:f,size:a,validateMessage:h,validateState:u,labelId:l,inputIds:c,isGroup:A,hasLabel:M,fieldValue:I,addInputId:ie,removeInputId:ae,resetField:X,clearValidate:se,validate:Z,propString:w});return jn(su,ce),Rn(()=>{t.prop&&(i==null||i.addField(ce),p=YN(I.value))}),br(()=>{i==null||i.removeField(ce)}),e({size:a,validateMessage:h,validateState:u,validate:Z,clearValidate:se,resetField:X}),(we,He)=>{var Ge;return $(),ue("div",{ref_key:"formItemRef",ref:f,class:Y(y(b)),role:y(A)?"group":void 0,"aria-labelledby":y(A)?y(l):void 0},[xe(y(Uwe),{"is-auto-width":y(g).width==="auto","update-all":((Ge=y(i))==null?void 0:Ge.labelWidth)==="auto"},{default:Re(()=>[y(M)?($(),rt(Ln(y(C)?"label":"div"),{key:0,id:y(l),for:y(C),class:Y(y(o).e("label")),style:Xt(y(g))},{default:Re(()=>[Ye(we.$slots,"label",{label:y(z)},()=>[Bn(Ct(y(z)),1)])]),_:3},8,["id","for","class","style"])):Xe("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ye("div",{class:Y(y(o).e("content")),style:Xt(y(_))},[Ye(we.$slots,"default"),xe(EW,{name:`${y(o).namespace.value}-zoom-in-top`},{default:Re(()=>[y(L)?Ye(we.$slots,"error",{key:0,error:h.value},()=>[ye("div",{class:Y(y(x))},Ct(h.value),3)]):Xe("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var WY=Et(Vwe,[["__file","form-item.vue"]]);const $we=bn(swe,{FormItem:WY}),Gwe=pi(WY),Wwe=Tt({urlList:{type:Fe(Array),default:()=>hi([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:Fe(String)}}),qwe={close:()=>!0,switch:n=>en(n),rotate:n=>en(n)},Kwe=Ie({name:"ElImageViewer"}),Ywe=Ie({...Kwe,props:Wwe,emits:qwe,setup(n,{expose:e,emit:t}){var r;const i=n,s={CONTAIN:{name:"contain",icon:od(bpe)},ORIGINAL:{name:"original",icon:od(Wpe)}};let a,o="";const{t:l}=sr(),c=gt("image-viewer"),{nextZIndex:u}=zg(),d=ne(),h=ne([]),f=bie(),p=ne(!0),m=ne(i.initialIndex),v=Pr(s.CONTAIN),g=ne({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),_=ne((r=i.zIndex)!=null?r:u()),b=U(()=>{const{urlList:ae}=i;return ae.length<=1}),S=U(()=>m.value===0),x=U(()=>m.value===i.urlList.length-1),w=U(()=>i.urlList[m.value]),M=U(()=>[c.e("btn"),c.e("prev"),c.is("disabled",!i.infinite&&S.value)]),C=U(()=>[c.e("btn"),c.e("next"),c.is("disabled",!i.infinite&&x.value)]),A=U(()=>{const{scale:ae,deg:ce,offsetX:we,offsetY:He,enableTransition:Ge}=g.value;let me=we/ae,be=He/ae;const oe=ce*Math.PI/180,j=Math.cos(oe),ke=Math.sin(oe);me=me*j+be*ke,be=be*j-we/ae*ke;const ze={transform:`scale(${ae}) rotate(${ce}deg) translate(${me}px, ${be}px)`,transition:Ge?"transform .3s":""};return v.value.name===s.CONTAIN.name&&(ze.maxWidth=ze.maxHeight="100%"),ze}),T=U(()=>`${m.value+1} / ${i.urlList.length}`);function I(){B(),a==null||a(),document.body.style.overflow=o,t("close")}function D(){const ae=Np(we=>{switch(we.code){case Rt.esc:i.closeOnPressEscape&&I();break;case Rt.space:k();break;case Rt.left:W();break;case Rt.up:Z("zoomIn");break;case Rt.right:q();break;case Rt.down:Z("zoomOut");break}}),ce=Np(we=>{const He=we.deltaY||we.deltaX;Z(He<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});f.run(()=>{Lr(document,"keydown",ae),Lr(document,"wheel",ce)})}function B(){f.stop()}function O(){p.value=!1}function H(ae){p.value=!1,ae.target.alt=l("el.image.error")}function L(ae){if(p.value||ae.button!==0||!d.value)return;g.value.enableTransition=!1;const{offsetX:ce,offsetY:we}=g.value,He=ae.pageX,Ge=ae.pageY,me=Np(oe=>{g.value={...g.value,offsetX:ce+oe.pageX-He,offsetY:we+oe.pageY-Ge}}),be=Lr(document,"mousemove",me);Lr(document,"mouseup",()=>{be()}),ae.preventDefault()}function z(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function k(){if(p.value)return;const ae=Yv(s),ce=Object.values(s),we=v.value.name,Ge=(ce.findIndex(me=>me.name===we)+1)%ae.length;v.value=s[ae[Ge]],z()}function F(ae){const ce=i.urlList.length;m.value=(ae+ce)%ce}function W(){S.value&&!i.infinite||F(m.value-1)}function q(){x.value&&!i.infinite||F(m.value+1)}function Z(ae,ce={}){if(p.value)return;const{minScale:we,maxScale:He}=i,{zoomRate:Ge,rotateDeg:me,enableTransition:be}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...ce};switch(ae){case"zoomOut":g.value.scale>we&&(g.value.scale=Number.parseFloat((g.value.scale/Ge).toFixed(3)));break;case"zoomIn":g.value.scale<He&&(g.value.scale=Number.parseFloat((g.value.scale*Ge).toFixed(3)));break;case"clockwise":g.value.deg+=me,t("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=me,t("rotate",g.value.deg);break}g.value.enableTransition=be}function se(ae){var ce;((ce=ae.detail)==null?void 0:ce.focusReason)==="pointer"&&ae.preventDefault()}function X(){i.closeOnPressEscape&&I()}function ie(ae){if(ae.ctrlKey){if(ae.deltaY<0)return ae.preventDefault(),!1;if(ae.deltaY>0)return ae.preventDefault(),!1}}return ct(w,()=>{Ut(()=>{const ae=h.value[0];ae!=null&&ae.complete||(p.value=!0)})}),ct(m,ae=>{z(),t("switch",ae)}),Rn(()=>{D(),a=Lr("wheel",ie,{passive:!1}),o=document.body.style.overflow,document.body.style.overflow="hidden"}),e({setActiveItem:F}),(ae,ce)=>($(),rt(y(Vg),{to:"body",disabled:!ae.teleported},{default:Re(()=>[xe(Os,{name:"viewer-fade",appear:""},{default:Re(()=>[ye("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:Y(y(c).e("wrapper")),style:Xt({zIndex:_.value})},[xe(y(Hg),{loop:"",trapped:"","focus-trap-el":d.value,"focus-start-el":"container",onFocusoutPrevented:se,onReleaseRequested:X},{default:Re(()=>[ye("div",{class:Y(y(c).e("mask")),onClick:an(we=>ae.hideOnClickModal&&I(),["self"])},null,10,["onClick"]),Xe(" CLOSE "),ye("span",{class:Y([y(c).e("btn"),y(c).e("close")]),onClick:I},[xe(y(zt),null,{default:Re(()=>[xe(y(Bl))]),_:1})],2),Xe(" ARROW "),y(b)?Xe("v-if",!0):($(),ue(Bt,{key:0},[ye("span",{class:Y(y(M)),onClick:W},[xe(y(zt),null,{default:Re(()=>[xe(y(bd))]),_:1})],2),ye("span",{class:Y(y(C)),onClick:q},[xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})],2)],64)),ae.$slots.progress||ae.showProgress?($(),ue("div",{key:1,class:Y([y(c).e("btn"),y(c).e("progress")])},[Ye(ae.$slots,"progress",{activeIndex:m.value,total:ae.urlList.length},()=>[Bn(Ct(y(T)),1)])],2)):Xe("v-if",!0),Xe(" ACTIONS "),ye("div",{class:Y([y(c).e("btn"),y(c).e("actions")])},[ye("div",{class:Y(y(c).e("actions__inner"))},[Ye(ae.$slots,"toolbar",{actions:Z,prev:W,next:q,reset:k,activeIndex:m.value,setActiveItem:F},()=>[xe(y(zt),{onClick:we=>Z("zoomOut")},{default:Re(()=>[xe(y(o0e))]),_:1},8,["onClick"]),xe(y(zt),{onClick:we=>Z("zoomIn")},{default:Re(()=>[xe(y(qq))]),_:1},8,["onClick"]),ye("i",{class:Y(y(c).e("actions__divider"))},null,2),xe(y(zt),{onClick:k},{default:Re(()=>[($(),rt(Ln(y(v).icon)))]),_:1}),ye("i",{class:Y(y(c).e("actions__divider"))},null,2),xe(y(zt),{onClick:we=>Z("anticlockwise")},{default:Re(()=>[xe(y(Hpe))]),_:1},8,["onClick"]),xe(y(zt),{onClick:we=>Z("clockwise")},{default:Re(()=>[xe(y($pe))]),_:1},8,["onClick"])])],2)],2),Xe(" CANVAS "),ye("div",{class:Y(y(c).e("canvas"))},[($(!0),ue(Bt,null,Fn(ae.urlList,(we,He)=>($(),ue(Bt,{key:He},[He===m.value?($(),ue("img",{key:0,ref_for:!0,ref:Ge=>h.value[He]=Ge,src:we,style:Xt(y(A)),class:Y(y(c).e("img")),crossorigin:ae.crossorigin,onLoad:O,onError:H,onMousedown:L},null,46,["src","crossorigin"])):Xe("v-if",!0)],64))),128))],2),Ye(ae.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var Xwe=Et(Ywe,[["__file","image-viewer.vue"]]);const qY=bn(Xwe),jwe=Tt({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Fe([String,Object])},previewSrcList:{type:Fe(Array),default:()=>hi([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:Fe(String)}}),Zwe={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>en(n),close:()=>!0,show:()=>!0},Qwe=Ie({name:"ElImage",inheritAttrs:!1}),Jwe=Ie({...Qwe,props:jwe,emits:Zwe,setup(n,{expose:e,emit:t}){const r=n,{t:i}=sr(),s=gt("image"),a=Pd(),o=U(()=>Ib(Object.entries(a).filter(([L])=>/^(data-|on[A-Z])/i.test(L)||["id","style"].includes(L)))),l=rT({excludeListeners:!0,excludeKeys:U(()=>Object.keys(o.value))}),c=ne(),u=ne(!1),d=ne(!0),h=ne(!1),f=ne(),p=ne(),m=ar&&"loading"in HTMLImageElement.prototype;let v;const g=U(()=>[s.e("inner"),b.value&&s.e("preview"),d.value&&s.is("loading")]),_=U(()=>{const{fit:L}=r;return ar&&L?{objectFit:L}:{}}),b=U(()=>{const{previewSrcList:L}=r;return xt(L)&&L.length>0}),S=U(()=>{const{previewSrcList:L,initialIndex:z}=r;let k=z;return z>L.length-1&&(k=0),k}),x=U(()=>r.loading==="eager"?!1:!m&&r.loading==="lazy"||r.lazy),w=()=>{ar&&(d.value=!0,u.value=!1,c.value=r.src)};function M(L){d.value=!1,u.value=!1,t("load",L)}function C(L){d.value=!1,u.value=!0,t("error",L)}function A(L){L&&(w(),D())}const T=Mq(A,200,!0);async function I(){var L;if(!ar)return;await Ut();const{scrollContainer:z}=r;if(Ga(z))p.value=z;else if(Wt(z)&&z!=="")p.value=(L=document.querySelector(z))!=null?L:void 0;else if(f.value){const F=$D(f.value);p.value=H_(F)?void 0:F}const{stop:k}=fhe(f,([F])=>{T(F.isIntersecting)},{root:p});v=k}function D(){!ar||!T||(v==null||v(),p.value=void 0,v=void 0)}function B(){b.value&&(h.value=!0,t("show"))}function O(){h.value=!1,t("close")}function H(L){t("switch",L)}return ct(()=>r.src,()=>{x.value?(d.value=!0,u.value=!1,D(),I()):w()}),Rn(()=>{x.value?I():w()}),e({showPreview:B}),(L,z)=>($(),ue("div",Nn({ref_key:"container",ref:f},y(o),{class:[y(s).b(),L.$attrs.class]}),[u.value?Ye(L.$slots,"error",{key:0},()=>[ye("div",{class:Y(y(s).e("error"))},Ct(y(i)("el.image.error")),3)]):($(),ue(Bt,{key:1},[c.value!==void 0?($(),ue("img",Nn({key:0},y(l),{src:c.value,loading:L.loading,style:y(_),class:y(g),crossorigin:L.crossorigin,onClick:B,onLoad:M,onError:C}),null,16,["src","loading","crossorigin"])):Xe("v-if",!0),d.value?($(),ue("div",{key:1,class:Y(y(s).e("wrapper"))},[Ye(L.$slots,"placeholder",{},()=>[ye("div",{class:Y(y(s).e("placeholder"))},null,2)])],2)):Xe("v-if",!0)],64)),y(b)?($(),ue(Bt,{key:2},[h.value?($(),rt(y(qY),{key:0,"z-index":L.zIndex,"initial-index":y(S),infinite:L.infinite,"zoom-rate":L.zoomRate,"min-scale":L.minScale,"max-scale":L.maxScale,"show-progress":L.showProgress,"url-list":L.previewSrcList,crossorigin:L.crossorigin,"hide-on-click-modal":L.hideOnClickModal,teleported:L.previewTeleported,"close-on-press-escape":L.closeOnPressEscape,onClose:O,onSwitch:H},wo({toolbar:Re(k=>[Ye(L.$slots,"toolbar",Vo(nu(k)))]),default:Re(()=>[L.$slots.viewer?($(),ue("div",{key:0},[Ye(L.$slots,"viewer")])):Xe("v-if",!0)]),_:2},[L.$slots.progress?{name:"progress",fn:Re(k=>[Ye(L.$slots,"progress",Vo(nu(k)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Xe("v-if",!0)],64)):Xe("v-if",!0)],16))}});var e2e=Et(Jwe,[["__file","image.vue"]]);const t2e=bn(e2e),n2e=Tt({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:as,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||en(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...aa(["ariaLabel"]),inputmode:{type:Fe(String),default:void 0},align:{type:Fe(String),default:"center"},disabledScientific:Boolean}),r2e={[Hn]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[is]:n=>en(n)||Zi(n),[mn]:n=>en(n)||Zi(n)},i2e=Ie({name:"ElInputNumber"}),s2e=Ie({...i2e,props:n2e,emits:r2e,setup(n,{expose:e,emit:t}){const r=n,{t:i}=sr(),s=gt("input-number"),a=ne(),o=pr({currentValue:r.modelValue,userInput:null}),{formItem:l}=oa(),c=U(()=>en(r.modelValue)&&r.modelValue<=r.min),u=U(()=>en(r.modelValue)&&r.modelValue>=r.max),d=U(()=>{const L=g(r.step);return nr(r.precision)?Math.max(g(r.modelValue),L):(L>r.precision,r.precision)}),h=U(()=>r.controls&&r.controlsPosition==="right"),f=Qi(),p=la(),m=U(()=>{if(o.userInput!==null)return o.userInput;let L=o.currentValue;if(Zi(L))return"";if(en(L)){if(Number.isNaN(L))return"";nr(r.precision)||(L=L.toFixed(r.precision))}return L}),v=(L,z)=>{if(nr(z)&&(z=d.value),z===0)return Math.round(L);let k=String(L);const F=k.indexOf(".");if(F===-1||!k.replace(".","").split("")[F+z])return L;const Z=k.length;return k.charAt(Z-1)==="5"&&(k=`${k.slice(0,Math.max(0,Z-1))}6`),Number.parseFloat(Number(k).toFixed(z))},g=L=>{if(Zi(L))return 0;const z=L.toString(),k=z.indexOf(".");let F=0;return k!==-1&&(F=z.length-k-1),F},_=(L,z=1)=>en(L)?L>=Number.MAX_SAFE_INTEGER&&z===1||L<=Number.MIN_SAFE_INTEGER&&z===-1?L:v(L+r.step*z):o.currentValue,b=L=>{var z;const k=L;if(r.disabledScientific&&["e","E"].includes(k.key)){k.preventDefault();return}const F={[Rt.up]:()=>{k.preventDefault(),S()},[Rt.down]:()=>{k.preventDefault(),x()}};(z=F[k.key])==null||z.call(F)},S=()=>{if(r.readonly||p.value||u.value)return;const L=Number(m.value)||0,z=_(L);M(z),t(is,o.currentValue),O()},x=()=>{if(r.readonly||p.value||c.value)return;const L=Number(m.value)||0,z=_(L,-1);M(z),t(is,o.currentValue),O()},w=(L,z)=>{const{max:k,min:F,step:W,precision:q,stepStrictly:Z,valueOnClear:se}=r;k<F&&Gi("InputNumber","min should not be greater than max.");let X=Number(L);if(Zi(L)||Number.isNaN(X))return null;if(L===""){if(se===null)return null;X=Wt(se)?{min:F,max:k}[se]:se}return Z&&(X=v(Math.round(X/W)*W,q),X!==L&&z&&t(mn,X)),nr(q)||(X=v(X,q)),(X>k||X<F)&&(X=X>k?k:F,z&&t(mn,X)),X},M=(L,z=!0)=>{var k;const F=o.currentValue,W=w(L);if(!z){t(mn,W);return}F===W&&L||(o.userInput=null,t(mn,W),F!==W&&t(Hn,W,F),r.validateEvent&&((k=l==null?void 0:l.validate)==null||k.call(l,"change").catch(q=>void 0)),o.currentValue=W)},C=L=>{o.userInput=L;const z=L===""?null:Number(L);t(is,z),M(z,!1)},A=L=>{const z=L!==""?Number(L):"";(en(z)&&!Number.isNaN(z)||L==="")&&M(z),O(),o.userInput=null},T=()=>{var L,z;(z=(L=a.value)==null?void 0:L.focus)==null||z.call(L)},I=()=>{var L,z;(z=(L=a.value)==null?void 0:L.blur)==null||z.call(L)},D=L=>{t("focus",L)},B=L=>{var z,k;o.userInput=null,o.currentValue===null&&((z=a.value)!=null&&z.input)&&(a.value.input.value=""),t("blur",L),r.validateEvent&&((k=l==null?void 0:l.validate)==null||k.call(l,"blur").catch(F=>void 0))},O=()=>{o.currentValue!==r.modelValue&&(o.currentValue=r.modelValue)},H=L=>{document.activeElement===L.target&&L.preventDefault()};return ct(()=>r.modelValue,(L,z)=>{const k=w(L,!0);o.userInput===null&&k!==z&&(o.currentValue=k)},{immediate:!0}),ct(()=>r.precision,()=>{o.currentValue=w(r.modelValue)}),Rn(()=>{var L;const{min:z,max:k,modelValue:F}=r,W=(L=a.value)==null?void 0:L.input;if(W.setAttribute("role","spinbutton"),Number.isFinite(k)?W.setAttribute("aria-valuemax",String(k)):W.removeAttribute("aria-valuemax"),Number.isFinite(z)?W.setAttribute("aria-valuemin",String(z)):W.removeAttribute("aria-valuemin"),W.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),W.setAttribute("aria-disabled",String(p.value)),!en(F)&&F!=null){let q=Number(F);Number.isNaN(q)&&(q=null),t(mn,q)}W.addEventListener("wheel",H,{passive:!1})}),yc(()=>{var L,z;const k=(L=a.value)==null?void 0:L.input;k==null||k.setAttribute("aria-valuenow",`${(z=o.currentValue)!=null?z:""}`)}),e({focus:T,blur:I}),(L,z)=>($(),ue("div",{class:Y([y(s).b(),y(s).m(y(f)),y(s).is("disabled",y(p)),y(s).is("without-controls",!L.controls),y(s).is("controls-right",y(h)),y(s).is(L.align,!!L.align)]),onDragstart:an(()=>{},["prevent"])},[L.controls?Cn(($(),ue("span",{key:0,role:"button","aria-label":y(i)("el.inputNumber.decrease"),class:Y([y(s).e("decrease"),y(s).is("disabled",y(c))]),onKeydown:Dr(x,["enter"])},[Ye(L.$slots,"decrease-icon",{},()=>[xe(y(zt),null,{default:Re(()=>[y(h)?($(),rt(y(mu),{key:0})):($(),rt(y(Ipe),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[y(cC),x]]):Xe("v-if",!0),L.controls?Cn(($(),ue("span",{key:1,role:"button","aria-label":y(i)("el.inputNumber.increase"),class:Y([y(s).e("increase"),y(s).is("disabled",y(u))]),onKeydown:Dr(S,["enter"])},[Ye(L.$slots,"increase-icon",{},()=>[xe(y(zt),null,{default:Re(()=>[y(h)?($(),rt(y(eT),{key:0})):($(),rt(y(Wq),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[y(cC),S]]):Xe("v-if",!0),xe(y(wa),{id:L.id,ref_key:"input",ref:a,type:"number",step:L.step,"model-value":y(m),placeholder:L.placeholder,readonly:L.readonly,disabled:y(p),size:y(f),max:L.max,min:L.min,name:L.name,"aria-label":L.ariaLabel,"validate-event":!1,inputmode:L.inputmode,onKeydown:b,onBlur:B,onFocus:D,onInput:C,onChange:A},wo({_:2},[L.$slots.prefix?{name:"prefix",fn:Re(()=>[Ye(L.$slots,"prefix")])}:void 0,L.$slots.suffix?{name:"suffix",fn:Re(()=>[Ye(L.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}});var a2e=Et(s2e,[["__file","input-number.vue"]]);const KY=bn(a2e),o2e=Tt({modelValue:{type:Fe(Array)},max:Number,tagType:{...Sd.type,default:"info"},tagEffect:Sd.effect,trigger:{type:Fe(String),default:Rt.enter},draggable:Boolean,delimiter:{type:[String,RegExp],default:""},size:as,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},saveOnBlur:{type:Boolean,default:!0},ariaLabel:String}),l2e={[mn]:n=>xt(n)||nr(n),[Hn]:n=>xt(n)||nr(n),[is]:n=>Wt(n),"add-tag":n=>Wt(n)||xt(n),"remove-tag":n=>Wt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0};function c2e({props:n,emit:e,formItem:t}){const r=la(),i=Qi(),s=Pr(),a=ne(),o=U(()=>["small"].includes(i.value)?"small":"default"),l=U(()=>{var I;return(I=n.modelValue)!=null&&I.length?void 0:n.placeholder}),c=U(()=>!(n.readonly||r.value)),u=U(()=>{var I,D;return nr(n.max)?!1:((D=(I=n.modelValue)==null?void 0:I.length)!=null?D:0)>=n.max}),d=I=>{var D;const B=[...(D=n.modelValue)!=null?D:[],...Is(I)];e(mn,B),e(Hn,B),e("add-tag",I),a.value=void 0},h=I=>{var D,B;const O=I.split(n.delimiter).filter(H=>H&&H!==I);if(n.max){const H=n.max-((B=(D=n.modelValue)==null?void 0:D.length)!=null?B:0);O.splice(H)}return O.length===1?O[0]:O},f=I=>{if(u.value){a.value=void 0;return}if(!M.value){if(n.delimiter&&a.value){const D=h(a.value);D.length&&d(D)}e(is,I.target.value)}},p=I=>{var D;if(!M.value)switch(I.code){case n.trigger:I.preventDefault(),I.stopPropagation(),m();break;case Rt.numpadEnter:n.trigger===Rt.enter&&(I.preventDefault(),I.stopPropagation(),m());break;case Rt.backspace:!a.value&&((D=n.modelValue)!=null&&D.length)&&(I.preventDefault(),I.stopPropagation(),v(n.modelValue.length-1));break}},m=()=>{var I;const D=(I=a.value)==null?void 0:I.trim();!D||u.value||d(D)},v=I=>{var D;const B=((D=n.modelValue)!=null?D:[]).slice(),[O]=B.splice(I,1);e(mn,B),e(Hn,B),e("remove-tag",O)},g=()=>{a.value=void 0,e(mn,void 0),e(Hn,void 0),e("clear")},_=(I,D,B)=>{var O;const H=((O=n.modelValue)!=null?O:[]).slice(),[L]=H.splice(I,1),z=D>I&&B==="before"?-1:D<I&&B==="after"?1:0;H.splice(D+z,0,L),e(mn,H),e(Hn,H)},b=()=>{var I;(I=s.value)==null||I.focus()},S=()=>{var I;(I=s.value)==null||I.blur()},{wrapperRef:x,isFocused:w}=gh(s,{disabled:r,afterBlur(){var I;n.saveOnBlur?m():a.value=void 0,n.validateEvent&&((I=t==null?void 0:t.validate)==null||I.call(t,"blur").catch(D=>void 0))}}),{isComposing:M,handleCompositionStart:C,handleCompositionUpdate:A,handleCompositionEnd:T}=W_({afterComposition:f});return ct(()=>n.modelValue,()=>{var I;n.validateEvent&&((I=t==null?void 0:t.validate)==null||I.call(t,Hn).catch(D=>void 0))}),{inputRef:s,wrapperRef:x,isFocused:w,isComposing:M,inputValue:a,size:i,tagSize:o,placeholder:l,closable:c,disabled:r,inputLimit:u,handleDragged:_,handleInput:f,handleKeydown:p,handleAddTag:m,handleRemoveTag:v,handleClear:g,handleCompositionStart:C,handleCompositionUpdate:A,handleCompositionEnd:T,focus:b,blur:S}}function u2e(){const n=ne(!1);return{hovering:n,handleMouseEnter:()=>{n.value=!0},handleMouseLeave:()=>{n.value=!1}}}function A6(){const n=Pr(),e=ne(0),t=11,r=U(()=>({minWidth:`${Math.max(e.value,t)}px`}));return fi(n,()=>{var s,a;e.value=(a=(s=n.value)==null?void 0:s.getBoundingClientRect().width)!=null?a:0}),{calculatorRef:n,calculatorWidth:e,inputStyle:r}}function d2e({wrapperRef:n,handleDragged:e,afterDragged:t}){const r=gt("input-tag"),i=Pr(),s=ne(!1);let a,o,l,c;function u(p){return`.${r.e("inner")} .${r.namespace.value}-tag:nth-child(${p+1})`}function d(p,m){a=m,o=n.value.querySelector(u(m)),o&&(o.style.opacity="0.5"),p.dataTransfer.effectAllowed="move"}function h(p,m){if(l=m,p.preventDefault(),p.dataTransfer.dropEffect="move",nr(a)||a===m){s.value=!1;return}const v=n.value.querySelector(u(m)).getBoundingClientRect(),g=a+1!==m,_=a-1!==m,b=p.clientX-v.left,S=g?_?.5:1:-1,x=_?g?.5:0:1;b<=v.width*S?c="before":b>v.width*x?c="after":c=void 0;const w=n.value.querySelector(`.${r.e("inner")}`),M=w.getBoundingClientRect(),C=Number.parseFloat(Qu(w,"gap"))/2,A=v.top-M.top;let T=-9999;if(c==="before")T=Math.max(v.left-M.left-C,Math.floor(-C/2));else if(c==="after"){const I=v.right-M.left;T=I+(M.width===I?Math.floor(C/2):C)}Bq(i.value,{top:`${A}px`,left:`${T}px`}),s.value=!!c}function f(p){p.preventDefault(),o&&(o.style.opacity=""),c&&!nr(a)&&!nr(l)&&a!==l&&e(a,l,c),s.value=!1,a=void 0,o=null,l=void 0,c=void 0,t==null||t()}return{dropIndicatorRef:i,showDropIndicator:s,handleDragStart:d,handleDragOver:h,handleDragEnd:f}}function f2e({props:n,isFocused:e,hovering:t,disabled:r,inputValue:i,size:s,validateState:a,validateIcon:o,needStatusIcon:l}){const c=Pd(),u=es(),d=gt("input-tag"),h=gt("input"),f=U(()=>[d.b(),d.is("focused",e.value),d.is("hovering",t.value),d.is("disabled",r.value),d.m(s.value),d.e("wrapper"),c.class]),p=U(()=>[c.style]),m=U(()=>{var _,b;return[d.e("inner"),d.is("draggable",n.draggable),d.is("left-space",!((_=n.modelValue)!=null&&_.length)&&!u.prefix),d.is("right-space",!((b=n.modelValue)!=null&&b.length)&&!g.value)]}),v=U(()=>{var _;return n.clearable&&!r.value&&!n.readonly&&(((_=n.modelValue)==null?void 0:_.length)||i.value)&&(e.value||t.value)}),g=U(()=>u.suffix||v.value||a.value&&o.value&&l.value);return{ns:d,nsInput:h,containerKls:f,containerStyle:p,innerKls:m,showClear:v,showSuffix:g}}const h2e=Ie({name:"ElInputTag",inheritAttrs:!1}),p2e=Ie({...h2e,props:o2e,emits:l2e,setup(n,{expose:e,emit:t}){const r=n,i=rT(),s=es(),{form:a,formItem:o}=oa(),{inputId:l}=Vl(r,{formItemContext:o}),c=U(()=>{var be;return(be=a==null?void 0:a.statusIcon)!=null?be:!1}),u=U(()=>(o==null?void 0:o.validateState)||""),d=U(()=>u.value&&nT[u.value]),{inputRef:h,wrapperRef:f,isFocused:p,inputValue:m,size:v,tagSize:g,placeholder:_,closable:b,disabled:S,handleDragged:x,handleInput:w,handleKeydown:M,handleRemoveTag:C,handleClear:A,handleCompositionStart:T,handleCompositionUpdate:I,handleCompositionEnd:D,focus:B,blur:O}=c2e({props:r,emit:t,formItem:o}),{hovering:H,handleMouseEnter:L,handleMouseLeave:z}=u2e(),{calculatorRef:k,inputStyle:F}=A6(),{dropIndicatorRef:W,showDropIndicator:q,handleDragStart:Z,handleDragOver:se,handleDragEnd:X}=d2e({wrapperRef:f,handleDragged:x,afterDragged:B}),{ns:ie,nsInput:ae,containerKls:ce,containerStyle:we,innerKls:He,showClear:Ge,showSuffix:me}=f2e({props:r,hovering:H,isFocused:p,inputValue:m,disabled:S,size:v,validateState:u,validateIcon:d,needStatusIcon:c});return e({focus:B,blur:O}),(be,oe)=>($(),ue("div",{ref_key:"wrapperRef",ref:f,class:Y(y(ce)),style:Xt(y(we)),onMouseenter:y(L),onMouseleave:y(z)},[y(s).prefix?($(),ue("div",{key:0,class:Y(y(ie).e("prefix"))},[Ye(be.$slots,"prefix")],2)):Xe("v-if",!0),ye("div",{class:Y(y(He))},[($(!0),ue(Bt,null,Fn(be.modelValue,(j,ke)=>($(),rt(y(eg),{key:ke,size:y(g),closable:y(b),type:be.tagType,effect:be.tagEffect,draggable:y(b)&&be.draggable,"disable-transitions":"",onClose:ze=>y(C)(ke),onDragstart:ze=>y(Z)(ze,ke),onDragover:ze=>y(se)(ze,ke),onDragend:y(X),onDrop:an(()=>{},["stop"])},{default:Re(()=>[Ye(be.$slots,"tag",{value:j,index:ke},()=>[Bn(Ct(j),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),ye("div",{class:Y(y(ie).e("input-wrapper"))},[Cn(ye("input",Nn({id:y(l),ref_key:"inputRef",ref:h,"onUpdate:modelValue":j=>qr(m)?m.value=j:null},y(i),{type:"text",minlength:be.minlength,maxlength:be.maxlength,disabled:y(S),readonly:be.readonly,autocomplete:be.autocomplete,tabindex:be.tabindex,placeholder:y(_),autofocus:be.autofocus,ariaLabel:be.ariaLabel,class:y(ie).e("input"),style:y(F),onCompositionstart:y(T),onCompositionupdate:y(I),onCompositionend:y(D),onInput:y(w),onKeydown:y(M)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[WM,y(m)]]),ye("span",{ref_key:"calculatorRef",ref:k,"aria-hidden":"true",class:Y(y(ie).e("input-calculator")),textContent:Ct(y(m))},null,10,["textContent"])],2),Cn(ye("div",{ref_key:"dropIndicatorRef",ref:W,class:Y(y(ie).e("drop-indicator"))},null,2),[[cr,y(q)]])],2),y(me)?($(),ue("div",{key:1,class:Y(y(ie).e("suffix"))},[Ye(be.$slots,"suffix"),y(Ge)?($(),rt(y(zt),{key:0,class:Y([y(ie).e("icon"),y(ie).e("clear")]),onMousedown:an(y(xr),["prevent"]),onClick:y(A)},{default:Re(()=>[xe(y(kd))]),_:1},8,["class","onMousedown","onClick"])):Xe("v-if",!0),y(u)&&y(d)&&y(c)?($(),rt(y(zt),{key:1,class:Y([y(ae).e("icon"),y(ae).e("validateIcon"),y(ae).is("loading",y(u)==="validating")])},{default:Re(()=>[($(),rt(Ln(y(d))))]),_:1},8,["class"])):Xe("v-if",!0)],2)):Xe("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var m2e=Et(p2e,[["__file","input-tag.vue"]]);const v2e=bn(m2e),g2e=Tt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Ar}}),y2e={click:n=>n instanceof MouseEvent},b2e=Ie({name:"ElLink"}),_2e=Ie({...b2e,props:g2e,emits:y2e,setup(n,{emit:e}){const t=n,r=Ug("link");ud({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},U(()=>Cr(t.underline)));const i=gt("link"),s=U(()=>{var l,c,u;return[i.b(),i.m((u=(c=t.type)!=null?c:(l=r.value)==null?void 0:l.type)!=null?u:"default"),i.is("disabled",t.disabled),i.is("underline",a.value==="always"),i.is("hover-underline",a.value==="hover"&&!t.disabled)]}),a=U(()=>{var l,c,u;return Cr(t.underline)?t.underline?"hover":"never":(u=(c=t.underline)!=null?c:(l=r.value)==null?void 0:l.underline)!=null?u:"hover"});function o(l){t.disabled||e("click",l)}return(l,c)=>($(),ue("a",{class:Y(y(s)),href:l.disabled||!l.href?void 0:l.href,target:l.disabled||!l.href?void 0:l.target,onClick:o},[l.icon?($(),rt(y(zt),{key:0},{default:Re(()=>[($(),rt(Ln(l.icon)))]),_:1})):Xe("v-if",!0),l.$slots.default?($(),ue("span",{key:1,class:Y(y(i).e("inner"))},[Ye(l.$slots,"default")],2)):Xe("v-if",!0),l.$slots.icon?Ye(l.$slots,"icon",{key:2}):Xe("v-if",!0)],10,["href","target"]))}});var S2e=Et(_2e,[["__file","link.vue"]]);const x2e=bn(S2e);let w2e=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",r=>{let i=!1;switch(r.code){case Rt.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case Rt.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case Rt.tab:{Qw(e,"mouseleave");break}case Rt.enter:case Rt.numpadEnter:case Rt.space:{i=!0,r.currentTarget.click();break}}return i&&(r.preventDefault(),r.stopPropagation()),!1})})}},C2e=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new w2e(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case Rt.down:{Qw(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case Rt.up:{Qw(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case Rt.tab:{Qw(e.currentTarget,"mouseleave");break}case Rt.enter:case Rt.numpadEnter:case Rt.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},M2e=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(r=>{r.nodeType===1&&new C2e(r,e)})}};const T2e=Ie({name:"ElMenuCollapseTransition"}),A2e=Ie({...T2e,setup(n){const e=gt("menu"),t={onBeforeEnter:r=>r.style.opacity="0.2",onEnter(r,i){Ml(r,`${e.namespace.value}-opacity-transition`),r.style.opacity="1",i()},onAfterEnter(r){Ma(r,`${e.namespace.value}-opacity-transition`),r.style.opacity=""},onBeforeLeave(r){r.dataset||(r.dataset={}),ho(r,e.m("collapse"))?(Ma(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),Ml(r,e.m("collapse"))):(Ml(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),Ma(r,e.m("collapse"))),r.style.width=`${r.scrollWidth}px`,r.style.overflow="hidden"},onLeave(r){Ml(r,"horizontal-collapse-transition"),r.style.width=`${r.dataset.scrollWidth}px`}};return(r,i)=>($(),rt(Os,Nn({mode:"out-in"},y(t)),{default:Re(()=>[Ye(r.$slots,"default")]),_:3},16))}});var E2e=Et(A2e,[["__file","menu-collapse-transition.vue"]]);function YY(n,e){const t=U(()=>{let i=n.parent;const s=[e.value];for(;i.type.name!=="ElMenu";)i.props.index&&s.unshift(i.props.index),i=i.parent;return s});return{parentMenu:U(()=>{let i=n.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:t}}function I2e(n){return U(()=>{const t=n.backgroundColor;return t?new tv(t).shade(20).toString():""})}const XY=(n,e)=>{const t=gt("menu");return U(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":I2e(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},E6="rootMenu",hC="subMenu:",R2e=Tt({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Ar},expandOpenIcon:{type:Ar},collapseCloseIcon:{type:Ar},collapseOpenIcon:{type:Ar}}),o3="ElSubMenu";var I6=Ie({name:o3,props:R2e,setup(n,{slots:e,expose:t}){const r=Dn(),{indexPath:i,parentMenu:s}=YY(r,U(()=>n.index)),a=gt("menu"),o=gt("sub-menu"),l=Lt(E6);l||Gi(o3,"can not inject root menu");const c=Lt(`${hC}${s.value.uid}`);c||Gi(o3,"can not inject sub menu");const u=ne({}),d=ne({});let h;const f=ne(!1),p=ne(),m=ne(),v=U(()=>C.value==="horizontal"&&_.value?"bottom-start":"right-start"),g=U(()=>C.value==="horizontal"&&_.value||C.value==="vertical"&&!l.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?w.value?n.expandOpenIcon:n.expandCloseIcon:mu:n.collapseCloseIcon&&n.collapseOpenIcon?w.value?n.collapseOpenIcon:n.collapseCloseIcon:Ta),_=U(()=>c.level===0),b=U(()=>{const q=n.teleported;return nr(q)?_.value:q}),S=U(()=>l.props.collapse?`${a.namespace.value}-zoom-in-left`:`${a.namespace.value}-zoom-in-top`),x=U(()=>C.value==="horizontal"&&_.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),w=U(()=>l.openedMenus.includes(n.index)),M=U(()=>[...Object.values(u.value),...Object.values(d.value)].some(({active:q})=>q)),C=U(()=>l.props.mode),A=U(()=>l.props.persistent),T=pr({index:n.index,indexPath:i,active:M}),I=XY(l.props,c.level+1),D=U(()=>{var q;return(q=n.popperOffset)!=null?q:l.props.popperOffset}),B=U(()=>{var q;return(q=n.popperClass)!=null?q:l.props.popperClass}),O=U(()=>{var q;return(q=n.showTimeout)!=null?q:l.props.showTimeout}),H=U(()=>{var q;return(q=n.hideTimeout)!=null?q:l.props.hideTimeout}),L=()=>{var q,Z,se;return(se=(Z=(q=m.value)==null?void 0:q.popperRef)==null?void 0:Z.popperInstanceRef)==null?void 0:se.destroy()},z=q=>{q||L()},k=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||n.disabled||l.handleSubMenuClick({index:n.index,indexPath:i.value,active:M.value})},F=(q,Z=O.value)=>{var se;if(q.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||n.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,h==null||h(),{stop:h}=jp(()=>{l.openMenu(n.index,i.value)},Z),b.value&&((se=s.value.vnode.el)==null||se.dispatchEvent(new MouseEvent("mouseenter")))}},W=(q=!1)=>{var Z;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}h==null||h(),c.mouseInChild.value=!1,{stop:h}=jp(()=>!f.value&&l.closeMenu(n.index,i.value),H.value),b.value&&q&&((Z=c.handleMouseleave)==null||Z.call(c,!0))};ct(()=>l.props.collapse,q=>z(!!q));{const q=se=>{d.value[se.index]=se},Z=se=>{delete d.value[se.index]};jn(`${hC}${r.uid}`,{addSubMenu:q,removeSubMenu:Z,handleMouseleave:W,mouseInChild:f,level:c.level+1})}return t({opened:w}),Rn(()=>{l.addSubMenu(T),c.addSubMenu(T)}),br(()=>{c.removeSubMenu(T),l.removeSubMenu(T)}),()=>{var q;const Z=[(q=e.title)==null?void 0:q.call(e),tn(zt,{class:o.e("icon-arrow"),style:{transform:w.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Wt(g.value)?tn(r.appContext.components[g.value]):tn(g.value)})],se=l.isMenuPopup?tn(ia,{ref:m,visible:w.value,effect:"light",pure:!0,offset:D.value,showArrow:!1,persistent:A.value,popperClass:B.value,placement:v.value,teleported:b.value,fallbackPlacements:x.value,transition:S.value,gpuAcceleration:!1},{content:()=>{var X;return tn("div",{class:[a.m(C.value),a.m("popup-container"),B.value],onMouseenter:ie=>F(ie,100),onMouseleave:()=>W(!0),onFocus:ie=>F(ie,100)},[tn("ul",{class:[a.b(),a.m("popup"),a.m(`popup-${v.value}`)],style:I.value},[(X=e.default)==null?void 0:X.call(e)])])},default:()=>tn("div",{class:o.e("title"),onClick:k},Z)}):tn(Bt,{},[tn("div",{class:o.e("title"),ref:p,onClick:k},Z),tn(uT,{},{default:()=>{var X;return Cn(tn("ul",{role:"menu",class:[a.b(),a.m("inline")],style:I.value},[(X=e.default)==null?void 0:X.call(e)]),[[cr,w.value]])}})]);return tn("li",{class:[o.b(),o.is("active",M.value),o.is("opened",w.value),o.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:F,onMouseleave:()=>W(),onFocus:F},[se])}}});const P2e=Tt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Fe(Array),default:()=>hi([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Ar,default:()=>Dpe},popperEffect:{type:Fe(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),l3=n=>xt(n)&&n.every(e=>Wt(e)),D2e={close:(n,e)=>Wt(n)&&l3(e),open:(n,e)=>Wt(n)&&l3(e),select:(n,e,t,r)=>Wt(n)&&l3(e)&&Mn(t)&&(nr(r)||r instanceof Promise)};var L2e=Ie({name:"ElMenu",props:P2e,emits:D2e,setup(n,{emit:e,slots:t,expose:r}){const i=Dn(),s=i.appContext.config.globalProperties.$router,a=ne(),o=ne(),l=gt("menu"),c=gt("sub-menu");let u=64;const d=ne(-1),h=ne(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),f=ne(n.defaultActive),p=ne({}),m=ne({}),v=U(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),g=()=>{const z=f.value&&p.value[f.value];if(!z||n.mode==="horizontal"||n.collapse)return;z.indexPath.forEach(F=>{const W=m.value[F];W&&_(F,W.indexPath)})},_=(z,k)=>{h.value.includes(z)||(n.uniqueOpened&&(h.value=h.value.filter(F=>k.includes(F))),h.value.push(z),e("open",z,k))},b=z=>{const k=h.value.indexOf(z);k!==-1&&h.value.splice(k,1)},S=(z,k)=>{b(z),e("close",z,k)},x=({index:z,indexPath:k})=>{h.value.includes(z)?S(z,k):_(z,k)},w=z=>{(n.mode==="horizontal"||n.collapse)&&(h.value=[]);const{index:k,indexPath:F}=z;if(!(Zi(k)||Zi(F)))if(n.router&&s){const W=z.route||k,q=s.push(W).then(Z=>(Z||(f.value=k),Z));e("select",k,F,{index:k,indexPath:F,route:W},q)}else f.value=k,e("select",k,F,{index:k,indexPath:F})},M=z=>{var k;const F=p.value,W=F[z]||f.value&&F[f.value]||F[n.defaultActive];f.value=(k=W==null?void 0:W.index)!=null?k:z},C=z=>{const k=getComputedStyle(z),F=Number.parseInt(k.marginLeft,10),W=Number.parseInt(k.marginRight,10);return z.offsetWidth+F+W||0},A=()=>{var z,k;if(!a.value)return-1;const F=Array.from((k=(z=a.value)==null?void 0:z.childNodes)!=null?k:[]).filter(ae=>ae.nodeName!=="#text"||ae.nodeValue),W=getComputedStyle(a.value),q=Number.parseInt(W.paddingLeft,10),Z=Number.parseInt(W.paddingRight,10),se=a.value.clientWidth-q-Z;let X=0,ie=0;return F.forEach((ae,ce)=>{ae.nodeName!=="#comment"&&(X+=C(ae),X<=se-u&&(ie=ce+1))}),ie===F.length?-1:ie},T=z=>m.value[z].indexPath,I=(z,k=33.34)=>{let F;return()=>{F&&clearTimeout(F),F=setTimeout(()=>{z()},k)}};let D=!0;const B=()=>{const z=ms(o);if(z&&(u=C(z)||64),d.value===A())return;const k=()=>{d.value=-1,Ut(()=>{d.value=A()})};D?k():I(k)(),D=!1};ct(()=>n.defaultActive,z=>{p.value[z]||(f.value=""),M(z)}),ct(()=>n.collapse,z=>{z&&(h.value=[])}),ct(p.value,g);let O;Gs(()=>{n.mode==="horizontal"&&n.ellipsis?O=fi(a,B).stop:O==null||O()});const H=ne(!1);{const z=q=>{m.value[q.index]=q},k=q=>{delete m.value[q.index]};jn(E6,pr({props:n,openedMenus:h,items:p,subMenus:m,activeIndex:f,isMenuPopup:v,addMenuItem:q=>{p.value[q.index]=q},removeMenuItem:q=>{delete p.value[q.index]},addSubMenu:z,removeSubMenu:k,openMenu:_,closeMenu:S,handleMenuItemClick:w,handleSubMenuClick:x})),jn(`${hC}${i.uid}`,{addSubMenu:z,removeSubMenu:k,mouseInChild:H,level:0})}Rn(()=>{n.mode==="horizontal"&&new M2e(i.vnode.el,l.namespace.value)}),r({open:k=>{const{indexPath:F}=m.value[k];F.forEach(W=>_(W,F))},close:b,updateActiveIndex:M,handleResize:B});const L=XY(n,0);return()=>{var z,k;let F=(k=(z=t.default)==null?void 0:z.call(t))!=null?k:[];const W=[];if(n.mode==="horizontal"&&a.value){const se=Wc(F),X=d.value===-1?se:se.slice(0,d.value),ie=d.value===-1?[]:se.slice(d.value);ie!=null&&ie.length&&n.ellipsis&&(F=X,W.push(tn(I6,{ref:o,index:"sub-menu-more",class:c.e("hide-arrow"),popperOffset:n.popperOffset},{title:()=>tn(zt,{class:c.e("icon-more")},{default:()=>tn(n.ellipsisIcon)}),default:()=>ie})))}const q=n.closeOnClickOutside?[[xd,()=>{h.value.length&&(H.value||(h.value.forEach(se=>e("close",se,T(se))),h.value=[]))}]]:[],Z=Cn(tn("ul",{key:String(n.collapse),role:"menubar",ref:a,style:L.value,class:{[l.b()]:!0,[l.m(n.mode)]:!0,[l.m("collapse")]:n.collapse}},[...F,...W]),q);return n.collapseTransition&&n.mode==="vertical"?tn(E2e,()=>Z):Z}}});const k2e=Tt({index:{type:Fe([String,null]),default:null},route:{type:Fe([String,Object])},disabled:Boolean}),O2e={click:n=>Wt(n.index)&&xt(n.indexPath)},eR="ElMenuItem",N2e=Ie({name:eR}),B2e=Ie({...N2e,props:k2e,emits:O2e,setup(n,{expose:e,emit:t}){const r=n;vo(r.index)&&void 0;const i=Dn(),s=Lt(E6),a=gt("menu"),o=gt("menu-item");s||Gi(eR,"can not inject root menu");const{parentMenu:l,indexPath:c}=YY(i,yr(r,"index")),u=Lt(`${hC}${l.value.uid}`);u||Gi(eR,"can not inject sub menu");const d=U(()=>r.index===s.activeIndex),h=pr({index:r.index,indexPath:c,active:d}),f=()=>{r.disabled||(s.handleMenuItemClick({index:r.index,indexPath:c.value,route:r.route}),t("click",h))};return Rn(()=>{u.addSubMenu(h),s.addMenuItem(h)}),br(()=>{u.removeSubMenu(h),s.removeMenuItem(h)}),e({parentMenu:l,rootMenu:s,active:d,nsMenu:a,nsMenuItem:o,handleClick:f}),(p,m)=>($(),ue("li",{class:Y([y(o).b(),y(o).is("active",y(d)),y(o).is("disabled",p.disabled)]),role:"menuitem",tabindex:"-1",onClick:f},[y(l).type.name==="ElMenu"&&y(s).props.collapse&&p.$slots.title?($(),rt(y(ia),{key:0,effect:y(s).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:y(s).props.persistent},{content:Re(()=>[Ye(p.$slots,"title")]),default:Re(()=>[ye("div",{class:Y(y(a).be("tooltip","trigger"))},[Ye(p.$slots,"default")],2)]),_:3},8,["effect","persistent"])):($(),ue(Bt,{key:1},[Ye(p.$slots,"default"),Ye(p.$slots,"title")],64))],2))}});var jY=Et(B2e,[["__file","menu-item.vue"]]);const F2e={title:String},z2e=Ie({name:"ElMenuItemGroup"}),U2e=Ie({...z2e,props:F2e,setup(n){const e=gt("menu-item-group");return(t,r)=>($(),ue("li",{class:Y(y(e).b())},[ye("div",{class:Y(y(e).e("title"))},[t.$slots.title?Ye(t.$slots,"title",{key:1}):($(),ue(Bt,{key:0},[Bn(Ct(t.title),1)],64))],2),ye("ul",null,[Ye(t.$slots,"default")])],2))}});var ZY=Et(U2e,[["__file","menu-item-group.vue"]]);const H2e=bn(L2e,{MenuItem:jY,MenuItemGroup:ZY,SubMenu:I6}),V2e=pi(jY),$2e=pi(ZY),G2e=pi(I6),W2e=Tt({icon:{type:Ar,default:()=>Qhe},title:String,content:{type:String,default:""}}),q2e={back:()=>!0},K2e=Ie({name:"ElPageHeader"}),Y2e=Ie({...K2e,props:W2e,emits:q2e,setup(n,{emit:e}){const{t}=sr(),r=gt("page-header");function i(){e("back")}return(s,a)=>($(),ue("div",{class:Y([y(r).b(),{[y(r).m("has-breadcrumb")]:!!s.$slots.breadcrumb,[y(r).m("has-extra")]:!!s.$slots.extra,[y(r).is("contentful")]:!!s.$slots.default}])},[s.$slots.breadcrumb?($(),ue("div",{key:0,class:Y(y(r).e("breadcrumb"))},[Ye(s.$slots,"breadcrumb")],2)):Xe("v-if",!0),ye("div",{class:Y(y(r).e("header"))},[ye("div",{class:Y(y(r).e("left"))},[ye("div",{class:Y(y(r).e("back")),role:"button",tabindex:"0",onClick:i},[s.icon||s.$slots.icon?($(),ue("div",{key:0,"aria-label":s.title||y(t)("el.pageHeader.title"),class:Y(y(r).e("icon"))},[Ye(s.$slots,"icon",{},()=>[s.icon?($(),rt(y(zt),{key:0},{default:Re(()=>[($(),rt(Ln(s.icon)))]),_:1})):Xe("v-if",!0)])],10,["aria-label"])):Xe("v-if",!0),ye("div",{class:Y(y(r).e("title"))},[Ye(s.$slots,"title",{},()=>[Bn(Ct(s.title||y(t)("el.pageHeader.title")),1)])],2)],2),xe(y(LY),{direction:"vertical"}),ye("div",{class:Y(y(r).e("content"))},[Ye(s.$slots,"content",{},()=>[Bn(Ct(s.content),1)])],2)],2),s.$slots.extra?($(),ue("div",{key:0,class:Y(y(r).e("extra"))},[Ye(s.$slots,"extra")],2)):Xe("v-if",!0)],2),s.$slots.default?($(),ue("div",{key:1,class:Y(y(r).e("main"))},[Ye(s.$slots,"default")],2)):Xe("v-if",!0)],2))}});var X2e=Et(Y2e,[["__file","page-header.vue"]]);const j2e=bn(X2e),QY=Symbol("elPaginationKey"),Z2e=Tt({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Ar}}),Q2e={click:n=>n instanceof MouseEvent},J2e=Ie({name:"ElPaginationPrev"}),eCe=Ie({...J2e,props:Z2e,emits:Q2e,setup(n){const e=n,{t}=sr(),r=U(()=>e.disabled||e.currentPage<=1);return(i,s)=>($(),ue("button",{type:"button",class:"btn-prev",disabled:y(r),"aria-label":i.prevText||y(t)("el.pagination.prev"),"aria-disabled":y(r),onClick:a=>i.$emit("click",a)},[i.prevText?($(),ue("span",{key:0},Ct(i.prevText),1)):($(),rt(y(zt),{key:1},{default:Re(()=>[($(),rt(Ln(i.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var tCe=Et(eCe,[["__file","prev.vue"]]);const nCe=Tt({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Ar}}),rCe=Ie({name:"ElPaginationNext"}),iCe=Ie({...rCe,props:nCe,emits:["click"],setup(n){const e=n,{t}=sr(),r=U(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(i,s)=>($(),ue("button",{type:"button",class:"btn-next",disabled:y(r),"aria-label":i.nextText||y(t)("el.pagination.next"),"aria-disabled":y(r),onClick:a=>i.$emit("click",a)},[i.nextText?($(),ue("span",{key:0},Ct(i.nextText),1)):($(),rt(y(zt),{key:1},{default:Re(()=>[($(),rt(Ln(i.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var sCe=Et(iCe,[["__file","next.vue"]]);const JY=Symbol("ElSelectGroup"),Gg=Symbol("ElSelect"),tR="ElOption",aCe=Tt({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean}),R6=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Rf=n=>L_(n);function oCe(n,e){const t=Lt(Gg);t||Gi(tR,"usage: <el-select><el-option /></el-select/>");const r=Lt(JY,{disabled:!1}),i=U(()=>u(Is(t.props.modelValue),n.value)),s=U(()=>{var f;if(t.props.multiple){const p=Is((f=t.props.modelValue)!=null?f:[]);return!i.value&&p.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),a=U(()=>{var f;return(f=n.label)!=null?f:Mn(n.value)?"":n.value}),o=U(()=>n.value||n.label||""),l=U(()=>n.disabled||e.groupDisabled||s.value),c=Dn(),u=(f=[],p)=>{if(Mn(n.value)){const m=t.props.valueKey;return f&&f.some(v=>zr(Vi(v,m))===Vi(p,m))}else return f&&f.includes(p)},d=()=>{!n.disabled&&!r.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(c.proxy))},h=f=>{const p=new RegExp(R6(f),"i");e.visible=p.test(String(a.value))||n.created};return ct(()=>a.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),ct(()=>n.value,(f,p)=>{const{remote:m,valueKey:v}=t.props;if((m?f!==p:!rs(f,p))&&(t.onOptionDestroy(p,c.proxy),t.onOptionCreate(c.proxy)),!n.created&&!m){if(v&&Mn(f)&&Mn(p)&&f[v]===p[v])return;t.setSelected()}}),ct(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0}),{select:t,currentLabel:a,currentValue:o,itemSelected:i,isDisabled:l,hoverItem:d,updateOption:h}}const lCe=Ie({name:tR,componentName:tR,props:aCe,setup(n){const e=gt("select"),t=Ws(),r=U(()=>[e.be("dropdown","item"),e.is("disabled",y(o)),e.is("selected",y(a)),e.is("hovering",y(h))]),i=pr({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:c,updateOption:u}=oCe(n,i),{visible:d,hover:h}=bs(i),f=Dn().proxy;l.onOptionCreate(f),br(()=>{const m=f.value;Ut(()=>{const{selected:v}=l.states,g=v.some(_=>_.value===f.value);l.states.cachedOptions.get(m)===f&&!g&&l.states.cachedOptions.delete(m)}),l.onOptionDestroy(m,f)});function p(){o.value||l.handleOptionSelect(f)}return{ns:e,id:t,containerKls:r,currentLabel:s,itemSelected:a,isDisabled:o,select:l,visible:d,hover:h,states:i,hoverItem:c,updateOption:u,selectOptionClick:p}}});function cCe(n,e){return Cn(($(),ue("li",{id:n.id,class:Y(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMousemove:n.hoverItem,onClick:an(n.selectOptionClick,["stop"])},[Ye(n.$slots,"default",{},()=>[ye("span",null,Ct(n.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[cr,n.visible]])}var P6=Et(lCe,[["render",cCe],["__file","option.vue"]]);const uCe=Ie({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=Lt(Gg),e=gt("select"),t=U(()=>n.props.popperClass),r=U(()=>n.props.multiple),i=U(()=>n.props.fitInputWidth),s=ne("");function a(){var o;s.value=`${(o=n.selectRef)==null?void 0:o.offsetWidth}px`}return Rn(()=>{a(),fi(n.selectRef,a)}),{ns:e,minWidth:s,popperClass:t,isMultiple:r,isFitInputWidth:i}}});function dCe(n,e,t,r,i,s){return $(),ue("div",{class:Y([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:Xt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?($(),ue("div",{key:0,class:Y(n.ns.be("dropdown","header"))},[Ye(n.$slots,"header")],2)):Xe("v-if",!0),Ye(n.$slots,"default"),n.$slots.footer?($(),ue("div",{key:1,class:Y(n.ns.be("dropdown","footer"))},[Ye(n.$slots,"footer")],2)):Xe("v-if",!0)],6)}var fCe=Et(uCe,[["render",dCe],["__file","select-dropdown.vue"]]);const hCe=(n,e)=>{const{t}=sr(),r=Ws(),i=gt("select"),s=gt("input"),a=pr({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=ne(),l=ne(),c=ne(),u=ne(),d=ne(),h=ne(),f=ne(),p=ne(),m=ne(),v=ne(),g=ne(),_=ne(!1),b=ne(),{form:S,formItem:x}=oa(),{inputId:w}=Vl(n,{formItemContext:x}),{valueOnClear:M,isEmptyValue:C}=V_(n),{isComposing:A,handleCompositionStart:T,handleCompositionUpdate:I,handleCompositionEnd:D}=W_({afterComposition:nt=>pt(nt)}),B=U(()=>n.disabled||!!(S!=null&&S.disabled)),{wrapperRef:O,isFocused:H,handleBlur:L}=gh(d,{disabled:B,afterFocus(){n.automaticDropdown&&!_.value&&(_.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(nt){var _t,jt;return((_t=c.value)==null?void 0:_t.isFocusInsideContent(nt))||((jt=u.value)==null?void 0:jt.isFocusInsideContent(nt))},afterBlur(){var nt;_.value=!1,a.menuVisibleOnFocus=!1,n.validateEvent&&((nt=x==null?void 0:x.validate)==null||nt.call(x,"blur").catch(_t=>void 0))}}),z=U(()=>xt(n.modelValue)?n.modelValue.length>0:!C(n.modelValue)),k=U(()=>{var nt;return(nt=S==null?void 0:S.statusIcon)!=null?nt:!1}),F=U(()=>n.clearable&&!B.value&&a.inputHovering&&z.value),W=U(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),q=U(()=>i.is("reverse",!!(W.value&&_.value))),Z=U(()=>(x==null?void 0:x.validateState)||""),se=U(()=>Z.value&&nT[Z.value]),X=U(()=>n.remote?300:0),ie=U(()=>n.remote&&!a.inputValue&&a.options.size===0),ae=U(()=>n.loading?n.loadingText||t("el.select.loading"):n.filterable&&a.inputValue&&a.options.size>0&&ce.value===0?n.noMatchText||t("el.select.noMatch"):a.options.size===0?n.noDataText||t("el.select.noData"):null),ce=U(()=>we.value.filter(nt=>nt.visible).length),we=U(()=>{const nt=Array.from(a.options.values()),_t=[];return a.optionValues.forEach(jt=>{const Sn=nt.findIndex(Vn=>Vn.value===jt);Sn>-1&&_t.push(nt[Sn])}),_t.length>=nt.length?_t:nt}),He=U(()=>Array.from(a.cachedOptions.values())),Ge=U(()=>{const nt=we.value.filter(_t=>!_t.created).some(_t=>_t.currentLabel===a.inputValue);return n.filterable&&n.allowCreate&&a.inputValue!==""&&!nt}),me=()=>{n.filterable&&Yt(n.filterMethod)||n.filterable&&n.remote&&Yt(n.remoteMethod)||we.value.forEach(nt=>{var _t;(_t=nt.updateOption)==null||_t.call(nt,a.inputValue)})},be=Qi(),oe=U(()=>["small"].includes(be.value)?"small":"default"),j=U({get(){return _.value&&!ie.value},set(nt){_.value=nt}}),ke=U(()=>{if(n.multiple&&!nr(n.modelValue))return Is(n.modelValue).length===0&&!a.inputValue;const nt=xt(n.modelValue)?n.modelValue[0]:n.modelValue;return n.filterable||nr(nt)?!a.inputValue:!0}),ze=U(()=>{var nt;const _t=(nt=n.placeholder)!=null?nt:t("el.select.placeholder");return n.multiple||!z.value?_t:a.selectedLabel}),Ve=U(()=>iC?null:"mouseenter");ct(()=>n.modelValue,(nt,_t)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(a.inputValue="",Le("")),st(),!rs(nt,_t)&&n.validateEvent&&(x==null||x.validate("change").catch(jt=>void 0))},{flush:"post",deep:!0}),ct(()=>_.value,nt=>{nt?Le(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),e("visible-change",nt)}),ct(()=>a.options.entries(),()=>{ar&&(st(),n.defaultFirstOption&&(n.filterable||n.remote)&&ce.value&&Ze())},{flush:"post"}),ct([()=>a.hoveringIndex,we],([nt])=>{en(nt)&&nt>-1?b.value=we.value[nt]||{}:b.value={},we.value.forEach(_t=>{_t.hover=b.value===_t})}),Gs(()=>{a.isBeforeHide||me()});const Le=nt=>{a.previousQuery===nt||A.value||(a.previousQuery=nt,n.filterable&&Yt(n.filterMethod)?n.filterMethod(nt):n.filterable&&n.remote&&Yt(n.remoteMethod)&&n.remoteMethod(nt),n.defaultFirstOption&&(n.filterable||n.remote)&&ce.value?Ut(Ze):Ut(V))},Ze=()=>{const nt=we.value.filter(Vn=>Vn.visible&&!Vn.disabled&&!Vn.states.groupDisabled),_t=nt.find(Vn=>Vn.created),jt=nt[0],Sn=we.value.map(Vn=>Vn.value);a.hoveringIndex=pe(Sn,_t||jt)},st=()=>{if(n.multiple)a.selectedLabel="";else{const _t=xt(n.modelValue)?n.modelValue[0]:n.modelValue,jt=fe(_t);a.selectedLabel=jt.currentLabel,a.selected=[jt];return}const nt=[];nr(n.modelValue)||Is(n.modelValue).forEach(_t=>{nt.push(fe(_t))}),a.selected=nt},fe=nt=>{let _t;const jt=vb(nt);for(let Je=a.cachedOptions.size-1;Je>=0;Je--){const Qn=He.value[Je];if(jt?Vi(Qn.value,n.valueKey)===Vi(nt,n.valueKey):Qn.value===nt){_t={value:nt,currentLabel:Qn.currentLabel,get isDisabled(){return Qn.isDisabled}};break}}if(_t)return _t;const Sn=jt?nt.label:nt??"";return{value:nt,currentLabel:Sn}},V=()=>{a.hoveringIndex=we.value.findIndex(nt=>a.selected.some(_t=>on(_t)===on(nt)))},J=()=>{a.selectionWidth=Number.parseFloat(window.getComputedStyle(l.value).width)},he=()=>{a.collapseItemWidth=v.value.getBoundingClientRect().width},Oe=()=>{var nt,_t;(_t=(nt=c.value)==null?void 0:nt.updatePopper)==null||_t.call(nt)},je=()=>{var nt,_t;(_t=(nt=u.value)==null?void 0:nt.updatePopper)==null||_t.call(nt)},dt=()=>{a.inputValue.length>0&&!_.value&&(_.value=!0),Le(a.inputValue)},pt=nt=>{if(a.inputValue=nt.target.value,n.remote)Te();else return dt()},Te=Co(()=>{dt()},X.value),ft=nt=>{rs(n.modelValue,nt)||e(Hn,nt)},Ke=nt=>bq(nt,_t=>{const jt=a.cachedOptions.get(_t);return jt&&!jt.disabled&&!jt.states.groupDisabled}),Q=nt=>{if(n.multiple&&nt.code!==Rt.delete&&nt.target.value.length<=0){const _t=Is(n.modelValue).slice(),jt=Ke(_t);if(jt<0)return;const Sn=_t[jt];_t.splice(jt,1),e(mn,_t),ft(_t),e("remove-tag",Sn)}},_e=(nt,_t)=>{const jt=a.selected.indexOf(_t);if(jt>-1&&!B.value){const Sn=Is(n.modelValue).slice();Sn.splice(jt,1),e(mn,Sn),ft(Sn),e("remove-tag",_t.value)}nt.stopPropagation(),yt()},Ae=nt=>{nt.stopPropagation();const _t=n.multiple?[]:M.value;if(n.multiple)for(const jt of a.selected)jt.isDisabled&&_t.push(jt.value);e(mn,_t),ft(_t),a.hoveringIndex=-1,_.value=!1,e("clear"),yt()},ge=nt=>{var _t;if(n.multiple){const jt=Is((_t=n.modelValue)!=null?_t:[]).slice(),Sn=pe(jt,nt);Sn>-1?jt.splice(Sn,1):(n.multipleLimit<=0||jt.length<n.multipleLimit)&&jt.push(nt.value),e(mn,jt),ft(jt),nt.created&&Le(""),n.filterable&&!n.reserveKeyword&&(a.inputValue="")}else e(mn,nt.value),ft(nt.value),_.value=!1;yt(),!_.value&&Ut(()=>{de(nt)})},pe=(nt,_t)=>nr(_t)?-1:Mn(_t.value)?nt.findIndex(jt=>rs(Vi(jt,n.valueKey),on(_t))):nt.indexOf(_t.value),de=nt=>{var _t,jt,Sn,Vn,Je;const Qn=xt(nt)?nt[0]:nt;let ot=null;if(Qn!=null&&Qn.value){const Pe=we.value.filter(mt=>mt.value===Qn.value);Pe.length>0&&(ot=Pe[0].$el)}if(c.value&&ot){const Pe=(Vn=(Sn=(jt=(_t=c.value)==null?void 0:_t.popperRef)==null?void 0:jt.contentRef)==null?void 0:Sn.querySelector)==null?void 0:Vn.call(Sn,`.${i.be("dropdown","wrap")}`);Pe&&GD(Pe,ot)}(Je=g.value)==null||Je.handleScroll()},at=nt=>{a.options.set(nt.value,nt),a.cachedOptions.set(nt.value,nt)},Ee=(nt,_t)=>{a.options.get(nt)===_t&&a.options.delete(nt)},vt=U(()=>{var nt,_t;return(_t=(nt=c.value)==null?void 0:nt.popperRef)==null?void 0:_t.contentRef}),et=()=>{a.isBeforeHide=!1,Ut(()=>{var nt;(nt=g.value)==null||nt.update(),de(a.selected)})},yt=()=>{var nt;(nt=d.value)==null||nt.focus()},Ht=()=>{var nt;if(_.value){_.value=!1,Ut(()=>{var _t;return(_t=d.value)==null?void 0:_t.blur()});return}(nt=d.value)==null||nt.blur()},Ot=nt=>{Ae(nt)},ln=nt=>{if(_.value=!1,H.value){const _t=new FocusEvent("focus",nt);Ut(()=>L(_t))}},Vt=()=>{a.inputValue.length>0?a.inputValue="":_.value=!1},kt=()=>{B.value||(iC&&(a.inputHovering=!0),a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:_.value=!_.value)},Jt=()=>{if(!_.value)kt();else{const nt=we.value[a.hoveringIndex];nt&&!nt.isDisabled&&ge(nt)}},on=nt=>Mn(nt.value)?Vi(nt.value,n.valueKey):nt.value,qn=U(()=>we.value.filter(nt=>nt.visible).every(nt=>nt.isDisabled)),K=U(()=>n.multiple?n.collapseTags?a.selected.slice(0,n.maxCollapseTags):a.selected:[]),te=U(()=>n.multiple?n.collapseTags?a.selected.slice(n.maxCollapseTags):[]:[]),$t=nt=>{if(!_.value){_.value=!0;return}if(!(a.options.size===0||ce.value===0||A.value)&&!qn.value){nt==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):nt==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const _t=we.value[a.hoveringIndex];(_t.isDisabled||!_t.visible)&&$t(nt),Ut(()=>de(b.value))}},Me=()=>{if(!l.value)return 0;const nt=window.getComputedStyle(l.value);return Number.parseFloat(nt.gap||"6px")},le=U(()=>{const nt=Me();return{maxWidth:`${v.value&&n.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-nt:a.selectionWidth}px`}}),St=U(()=>({maxWidth:`${a.selectionWidth}px`})),ht=nt=>{e("popup-scroll",nt)};fi(l,J),fi(O,Oe),fi(m,je),fi(v,he);let At;return ct(()=>j.value,nt=>{nt?At=fi(p,Oe).stop:(At==null||At(),At=void 0)}),Rn(()=>{st()}),{inputId:w,contentId:r,nsSelect:i,nsInput:s,states:a,isFocused:H,expanded:_,optionsArray:we,hoverOption:b,selectSize:be,filteredOptionsCount:ce,updateTooltip:Oe,updateTagTooltip:je,debouncedOnInputChange:Te,onInput:pt,deletePrevTag:Q,deleteTag:_e,deleteSelected:Ae,handleOptionSelect:ge,scrollToOption:de,hasModelValue:z,shouldShowPlaceholder:ke,currentPlaceholder:ze,mouseEnterEventName:Ve,needStatusIcon:k,showClose:F,iconComponent:W,iconReverse:q,validateState:Z,validateIcon:se,showNewOption:Ge,updateOptions:me,collapseTagSize:oe,setSelected:st,selectDisabled:B,emptyText:ae,handleCompositionStart:T,handleCompositionUpdate:I,handleCompositionEnd:D,onOptionCreate:at,onOptionDestroy:Ee,handleMenuEnter:et,focus:yt,blur:Ht,handleClearClick:Ot,handleClickOutside:ln,handleEsc:Vt,toggleMenu:kt,selectOption:Jt,getValueKey:on,navigateOptions:$t,dropdownMenuVisible:j,showTagList:K,collapseTagList:te,popupScroll:ht,tagStyle:le,collapseTagStyle:St,popperRef:vt,inputRef:d,tooltipRef:c,tagTooltipRef:u,prefixRef:h,suffixRef:f,selectRef:o,wrapperRef:O,selectionRef:l,scrollbarRef:g,menuRef:p,tagMenuRef:m,collapseItemRef:v}};var pCe=Ie({name:"ElOptions",setup(n,{slots:e}){const t=Lt(Gg);let r=[];return()=>{var i,s;const a=(i=e.default)==null?void 0:i.call(e),o=[];function l(c){xt(c)&&c.forEach(u=>{var d,h,f,p;const m=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;m==="ElOptionGroup"?l(!Wt(u.children)&&!xt(u.children)&&Yt((h=u.children)==null?void 0:h.default)?(f=u.children)==null?void 0:f.default():u.children):m==="ElOption"?o.push((p=u.props)==null?void 0:p.value):xt(u.children)&&l(u.children)})}return a.length&&l((s=a[0])==null?void 0:s.children),rs(o,r)||(r=o,t&&(t.states.optionValues=o)),a}}});const mCe=Tt({name:String,id:String,modelValue:{type:Fe([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:as,effect:{type:Fe(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Fe(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:{type:Fe(Function)},filterMethod:{type:Fe(Function)},multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Ri.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Ar,default:kd},fitInputWidth:Boolean,suffixIcon:{type:Ar,default:mu},tagType:{...Sd.type,default:"info"},tagEffect:{...Sd.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Fe(String),values:Od,default:"bottom-start"},fallbackPlacements:{type:Fe(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:Ri.appendTo,options:{type:Fe(Array)},props:{type:Fe(Object)},...g0,...aa(["ariaLabel"])});mn+"",Hn+"",Qq.scroll;const m7="ElSelect",vCe=Ie({name:m7,componentName:m7,components:{ElSelectMenu:fCe,ElOption:P6,ElOptions:pCe,ElTag:eg,ElScrollbar:mc,ElTooltip:ia,ElIcon:zt},directives:{ClickOutside:xd},props:mCe,emits:[mn,Hn,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(n,{emit:e,slots:t}){const r=Dn();r.appContext.config.warnHandler=(...h)=>{!h[0]||h[0].includes('Slot "default" invoked outside of the render function')||console.warn(...h)};const i=U(()=>{const{modelValue:h,multiple:f}=n,p=f?[]:void 0;return xt(h)?f?h:p:f?p:h}),s=pr({...bs(n),modelValue:i}),a=hCe(s,e),{calculatorRef:o,inputStyle:l}=A6(),c=h=>h.reduce((f,p)=>(f.push(p),p.children&&p.children.length>0&&f.push(...c(p.children)),f),[]),u=h=>{Wc(h||[]).forEach(p=>{var m;if(Mn(p)&&(p.type.name==="ElOption"||p.type.name==="ElTree")){const v=p.type.name;if(v==="ElTree"){const g=((m=p.props)==null?void 0:m.data)||[];c(g).forEach(b=>{b.currentLabel=b.label||(Mn(b.value)?"":b.value),a.onOptionCreate(b)})}else if(v==="ElOption"){const g={...p.props};g.currentLabel=g.label||(Mn(g.value)?"":g.value),a.onOptionCreate(g)}}})};ct(()=>{var h;return(h=t.default)==null?void 0:h.call(t)},h=>{n.persistent||u(h)},{immediate:!0}),jn(Gg,pr({props:s,states:a.states,selectRef:a.selectRef,optionsArray:a.optionsArray,setSelected:a.setSelected,handleOptionSelect:a.handleOptionSelect,onOptionCreate:a.onOptionCreate,onOptionDestroy:a.onOptionDestroy}));const d=U(()=>n.multiple?a.states.selected.map(h=>h.currentLabel):a.states.selectedLabel);return br(()=>{r.appContext.config.warnHandler=void 0}),{...a,modelValue:i,selectedLabel:d,calculatorRef:o,inputStyle:l}}});function gCe(n,e){const t=dn("el-tag"),r=dn("el-tooltip"),i=dn("el-icon"),s=dn("el-option"),a=dn("el-options"),o=dn("el-scrollbar"),l=dn("el-select-menu"),c=VM("click-outside");return Cn(($(),ue("div",{ref:"selectRef",class:Y([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[E1(n.mouseEnterEventName)]:u=>n.states.inputHovering=!0,onMouseleave:u=>n.states.inputHovering=!1},[xe(r,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:u=>n.states.isBeforeHide=!1},{default:Re(()=>{var u;return[ye("div",{ref:"wrapperRef",class:Y([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:an(n.toggleMenu,["prevent"])},[n.$slots.prefix?($(),ue("div",{key:0,ref:"prefixRef",class:Y(n.nsSelect.e("prefix"))},[Ye(n.$slots,"prefix")],2)):Xe("v-if",!0),ye("div",{ref:"selectionRef",class:Y([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?Ye(n.$slots,"tag",{key:0,data:n.states.selected,deleteTag:n.deleteTag,selectDisabled:n.selectDisabled},()=>[($(!0),ue(Bt,null,Fn(n.showTagList,d=>($(),ue("div",{key:n.getValueKey(d),class:Y(n.nsSelect.e("selected-item"))},[xe(t,{closable:!n.selectDisabled&&!d.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Xt(n.tagStyle),onClose:h=>n.deleteTag(h,d)},{default:Re(()=>[ye("span",{class:Y(n.nsSelect.e("tags-text"))},[Ye(n.$slots,"label",{label:d.currentLabel,value:d.value},()=>[Bn(Ct(d.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?($(),rt(r,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom","popper-class":n.popperClass,teleported:n.teleported},{default:Re(()=>[ye("div",{ref:"collapseItemRef",class:Y(n.nsSelect.e("selected-item"))},[xe(t,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Xt(n.collapseTagStyle)},{default:Re(()=>[ye("span",{class:Y(n.nsSelect.e("tags-text"))}," + "+Ct(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Re(()=>[ye("div",{ref:"tagMenuRef",class:Y(n.nsSelect.e("selection"))},[($(!0),ue(Bt,null,Fn(n.collapseTagList,d=>($(),ue("div",{key:n.getValueKey(d),class:Y(n.nsSelect.e("selected-item"))},[xe(t,{class:"in-tooltip",closable:!n.selectDisabled&&!d.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:h=>n.deleteTag(h,d)},{default:Re(()=>[ye("span",{class:Y(n.nsSelect.e("tags-text"))},[Ye(n.$slots,"label",{label:d.currentLabel,value:d.value},()=>[Bn(Ct(d.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","popper-class","teleported"])):Xe("v-if",!0)]):Xe("v-if",!0),ye("div",{class:Y([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Cn(ye("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":d=>n.states.inputValue=d,type:"text",name:n.name,class:Y([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:Xt(n.inputStyle),tabindex:n.tabindex,role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((u=n.hoverOption)==null?void 0:u.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Dr(an(d=>n.navigateOptions("next"),["stop","prevent"]),["down"]),Dr(an(d=>n.navigateOptions("prev"),["stop","prevent"]),["up"]),Dr(an(n.handleEsc,["stop","prevent"]),["esc"]),Dr(an(n.selectOption,["stop","prevent"]),["enter"]),Dr(an(n.deletePrevTag,["stop"]),["delete"])],onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onInput:n.onInput,onClick:an(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[WM,n.states.inputValue]]),n.filterable?($(),ue("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:Y(n.nsSelect.e("input-calculator")),textContent:Ct(n.states.inputValue)},null,10,["textContent"])):Xe("v-if",!0)],2),n.shouldShowPlaceholder?($(),ue("div",{key:1,class:Y([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?Ye(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[ye("span",null,Ct(n.currentPlaceholder),1)]):($(),ue("span",{key:1},Ct(n.currentPlaceholder),1))],2)):Xe("v-if",!0)],2),ye("div",{ref:"suffixRef",class:Y(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?($(),rt(i,{key:0,class:Y([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:Re(()=>[($(),rt(Ln(n.iconComponent)))]),_:1},8,["class"])):Xe("v-if",!0),n.showClose&&n.clearIcon?($(),rt(i,{key:1,class:Y([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.nsSelect.e("clear")]),onClick:n.handleClearClick},{default:Re(()=>[($(),rt(Ln(n.clearIcon)))]),_:1},8,["class","onClick"])):Xe("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?($(),rt(i,{key:2,class:Y([n.nsInput.e("icon"),n.nsInput.e("validateIcon"),n.nsInput.is("loading",n.validateState==="validating")])},{default:Re(()=>[($(),rt(Ln(n.validateIcon)))]),_:1},8,["class"])):Xe("v-if",!0)],2)],10,["onClick"])]}),content:Re(()=>[xe(l,{ref:"menuRef"},{default:Re(()=>[n.$slots.header?($(),ue("div",{key:0,class:Y(n.nsSelect.be("dropdown","header")),onClick:an(()=>{},["stop"])},[Ye(n.$slots,"header")],10,["onClick"])):Xe("v-if",!0),Cn(xe(o,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:Y([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical",onScroll:n.popupScroll},{default:Re(()=>[n.showNewOption?($(),rt(s,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):Xe("v-if",!0),xe(a,null,{default:Re(()=>[Ye(n.$slots,"default",{},()=>[($(!0),ue(Bt,null,Fn(n.options,(u,d)=>{var h,f,p,m,v,g;return $(),rt(s,{key:d,label:u[(f=(h=n.props)==null?void 0:h.label)!=null?f:"label"],value:u[(m=(p=n.props)==null?void 0:p.value)!=null?m:"value"],disabled:u[(g=(v=n.props)==null?void 0:v.disabled)!=null?g:"disabled"]},null,8,["label","value","disabled"])}),128))])]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[cr,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?($(),ue("div",{key:1,class:Y(n.nsSelect.be("dropdown","loading"))},[Ye(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?($(),ue("div",{key:2,class:Y(n.nsSelect.be("dropdown","empty"))},[Ye(n.$slots,"empty",{},()=>[ye("span",null,Ct(n.emptyText),1)])],2)):Xe("v-if",!0),n.$slots.footer?($(),ue("div",{key:3,class:Y(n.nsSelect.be("dropdown","footer")),onClick:an(()=>{},["stop"])},[Ye(n.$slots,"footer")],10,["onClick"])):Xe("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[c,n.handleClickOutside,n.popperRef]])}var yCe=Et(vCe,[["render",gCe],["__file","select.vue"]]);const bCe=Ie({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=gt("select"),t=ne(),r=Dn(),i=ne([]);jn(JY,pr({...bs(n)}));const s=U(()=>i.value.some(c=>c.visible===!0)),a=c=>{var u;return c.type.name==="ElOption"&&!!((u=c.component)!=null&&u.proxy)},o=c=>{const u=Is(c),d=[];return u.forEach(h=>{var f;Kr(h)&&(a(h)?d.push(h.component.proxy):xt(h.children)&&h.children.length?d.push(...o(h.children)):(f=h.component)!=null&&f.subTree&&d.push(...o(h.component.subTree)))}),d},l=()=>{i.value=o(r.subTree)};return Rn(()=>{l()}),Tq(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:s,ns:e}}});function _Ce(n,e,t,r,i,s){return Cn(($(),ue("ul",{ref:"groupRef",class:Y(n.ns.be("group","wrap"))},[ye("li",{class:Y(n.ns.be("group","title"))},Ct(n.label),3),ye("li",null,[ye("ul",{class:Y(n.ns.b("group"))},[Ye(n.$slots,"default")],2)])],2)),[[cr,n.visible]])}var eX=Et(bCe,[["render",_Ce],["__file","option-group.vue"]]);const Qp=bn(yCe,{Option:P6,OptionGroup:eX}),pC=pi(P6),SCe=pi(eX),D6=()=>Lt(QY,{}),xCe=Tt({pageSize:{type:Number,required:!0},pageSizes:{type:Fe(Array),default:()=>hi([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:pu},appendSizeTo:String}),wCe=Ie({name:"ElPaginationSizes"}),CCe=Ie({...wCe,props:xCe,emits:["page-size-change"],setup(n,{emit:e}){const t=n,{t:r}=sr(),i=gt("pagination"),s=D6(),a=ne(t.pageSize);ct(()=>t.pageSizes,(c,u)=>{if(!rs(c,u)&&xt(c)){const d=c.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),ct(()=>t.pageSize,c=>{a.value=c});const o=U(()=>t.pageSizes);function l(c){var u;c!==a.value&&(a.value=c,(u=s.handleSizeChange)==null||u.call(s,Number(c)))}return(c,u)=>($(),ue("span",{class:Y(y(i).e("sizes"))},[xe(y(Qp),{"model-value":a.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,"append-to":c.appendSizeTo,onChange:l},{default:Re(()=>[($(!0),ue(Bt,null,Fn(y(o),d=>($(),rt(y(pC),{key:d,value:d,label:d+y(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var MCe=Et(CCe,[["__file","sizes.vue"]]);const TCe=Tt({size:{type:String,values:pu}}),ACe=Ie({name:"ElPaginationJumper"}),ECe=Ie({...ACe,props:TCe,setup(n){const{t:e}=sr(),t=gt("pagination"),{pageCount:r,disabled:i,currentPage:s,changeEvent:a}=D6(),o=ne(),l=U(()=>{var d;return(d=o.value)!=null?d:s==null?void 0:s.value});function c(d){o.value=d?+d:""}function u(d){d=Math.trunc(+d),a==null||a(d),o.value=void 0}return(d,h)=>($(),ue("span",{class:Y(y(t).e("jump")),disabled:y(i)},[ye("span",{class:Y([y(t).e("goto")])},Ct(y(e)("el.pagination.goto")),3),xe(y(wa),{size:d.size,class:Y([y(t).e("editor"),y(t).is("in-pagination")]),min:1,max:y(r),disabled:y(i),"model-value":y(l),"validate-event":!1,"aria-label":y(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","aria-label"]),ye("span",{class:Y([y(t).e("classifier")])},Ct(y(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var ICe=Et(ECe,[["__file","jumper.vue"]]);const RCe=Tt({total:{type:Number,default:1e3}}),PCe=Ie({name:"ElPaginationTotal"}),DCe=Ie({...PCe,props:RCe,setup(n){const{t:e}=sr(),t=gt("pagination"),{disabled:r}=D6();return(i,s)=>($(),ue("span",{class:Y(y(t).e("total")),disabled:y(r)},Ct(y(e)("el.pagination.total",{total:i.total})),11,["disabled"]))}});var LCe=Et(DCe,[["__file","total.vue"]]);const kCe=Tt({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),OCe=Ie({name:"ElPaginationPager"}),NCe=Ie({...OCe,props:kCe,emits:[Hn],setup(n,{emit:e}){const t=n,r=gt("pager"),i=gt("icon"),{t:s}=sr(),a=ne(!1),o=ne(!1),l=ne(!1),c=ne(!1),u=ne(!1),d=ne(!1),h=U(()=>{const S=t.pagerCount,x=(S-1)/2,w=Number(t.currentPage),M=Number(t.pageCount);let C=!1,A=!1;M>S&&(w>S-x&&(C=!0),w<M-x&&(A=!0));const T=[];if(C&&!A){const I=M-(S-2);for(let D=I;D<M;D++)T.push(D)}else if(!C&&A)for(let I=2;I<S;I++)T.push(I);else if(C&&A){const I=Math.floor(S/2)-1;for(let D=w-I;D<=w+I;D++)T.push(D)}else for(let I=2;I<M;I++)T.push(I);return T}),f=U(()=>["more","btn-quickprev",i.b(),r.is("disabled",t.disabled)]),p=U(()=>["more","btn-quicknext",i.b(),r.is("disabled",t.disabled)]),m=U(()=>t.disabled?-1:0);ct(()=>[t.pageCount,t.pagerCount,t.currentPage],([S,x,w])=>{const M=(x-1)/2;let C=!1,A=!1;S>x&&(C=w>x-M,A=w<S-M),l.value&&(l.value=C),c.value&&(c.value=A),a.value=C,o.value=A},{immediate:!0});function v(S=!1){t.disabled||(S?l.value=!0:c.value=!0)}function g(S=!1){S?u.value=!0:d.value=!0}function _(S){const x=S.target;if(x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("number")){const w=Number(x.textContent);w!==t.currentPage&&e(Hn,w)}else x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("more")&&b(S)}function b(S){const x=S.target;if(x.tagName.toLowerCase()==="ul"||t.disabled)return;let w=Number(x.textContent);const M=t.pageCount,C=t.currentPage,A=t.pagerCount-2;x.className.includes("more")&&(x.className.includes("quickprev")?w=C-A:x.className.includes("quicknext")&&(w=C+A)),Number.isNaN(+w)||(w<1&&(w=1),w>M&&(w=M)),w!==C&&e(Hn,w)}return(S,x)=>($(),ue("ul",{class:Y(y(r).b()),onClick:b,onKeyup:Dr(_,["enter"])},[S.pageCount>0?($(),ue("li",{key:0,class:Y([[y(r).is("active",S.currentPage===1),y(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===1,"aria-label":y(s)("el.pagination.currentPage",{pager:1}),tabindex:y(m)}," 1 ",10,["aria-current","aria-label","tabindex"])):Xe("v-if",!0),a.value?($(),ue("li",{key:1,class:Y(y(f)),tabindex:y(m),"aria-label":y(s)("el.pagination.prevPages",{pager:S.pagerCount-2}),onMouseenter:w=>v(!0),onMouseleave:w=>l.value=!1,onFocus:w=>g(!0),onBlur:w=>u.value=!1},[(l.value||u.value)&&!S.disabled?($(),rt(y(nh),{key:0})):($(),rt(y(gB),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Xe("v-if",!0),($(!0),ue(Bt,null,Fn(y(h),w=>($(),ue("li",{key:w,class:Y([[y(r).is("active",S.currentPage===w),y(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===w,"aria-label":y(s)("el.pagination.currentPage",{pager:w}),tabindex:y(m)},Ct(w),11,["aria-current","aria-label","tabindex"]))),128)),o.value?($(),ue("li",{key:2,class:Y(y(p)),tabindex:y(m),"aria-label":y(s)("el.pagination.nextPages",{pager:S.pagerCount-2}),onMouseenter:w=>v(),onMouseleave:w=>c.value=!1,onFocus:w=>g(),onBlur:w=>d.value=!1},[(c.value||d.value)&&!S.disabled?($(),rt(y(rh),{key:0})):($(),rt(y(gB),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Xe("v-if",!0),S.pageCount>1?($(),ue("li",{key:3,class:Y([[y(r).is("active",S.currentPage===S.pageCount),y(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===S.pageCount,"aria-label":y(s)("el.pagination.currentPage",{pager:S.pageCount}),tabindex:y(m)},Ct(S.pageCount),11,["aria-current","aria-label","tabindex"])):Xe("v-if",!0)],42,["onKeyup"]))}});var BCe=Et(NCe,[["__file","pager.vue"]]);const Ra=n=>typeof n!="number",FCe=Tt({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:n=>en(n)&&Math.trunc(n)===n&&n>4&&n<22&&n%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Fe(Array),default:()=>hi([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Ar,default:()=>bd},nextText:{type:String,default:""},nextIcon:{type:Ar,default:()=>Ta},teleported:{type:Boolean,default:!0},small:Boolean,size:as,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),zCe={"update:current-page":n=>en(n),"update:page-size":n=>en(n),"size-change":n=>en(n),change:(n,e)=>en(n)&&en(e),"current-change":n=>en(n),"prev-click":n=>en(n),"next-click":n=>en(n)},v7="ElPagination";var UCe=Ie({name:v7,props:FCe,emits:zCe,setup(n,{emit:e,slots:t}){const{t:r}=sr(),i=gt("pagination"),s=Dn().vnode.props||{},a=Lq(),o=U(()=>{var x;return n.small?"small":(x=n.size)!=null?x:a.value});ud({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},U(()=>!!n.small));const l="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,c="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,u=U(()=>{if(Ra(n.total)&&Ra(n.pageCount)||!Ra(n.currentPage)&&!l)return!1;if(n.layout.includes("sizes")){if(Ra(n.pageCount)){if(!Ra(n.total)&&!Ra(n.pageSize)&&!c)return!1}else if(!c)return!1}return!0}),d=ne(Ra(n.defaultPageSize)?10:n.defaultPageSize),h=ne(Ra(n.defaultCurrentPage)?1:n.defaultCurrentPage),f=U({get(){return Ra(n.pageSize)?d.value:n.pageSize},set(x){Ra(n.pageSize)&&(d.value=x),c&&(e("update:page-size",x),e("size-change",x))}}),p=U(()=>{let x=0;return Ra(n.pageCount)?Ra(n.total)||(x=Math.max(1,Math.ceil(n.total/f.value))):x=n.pageCount,x}),m=U({get(){return Ra(n.currentPage)?h.value:n.currentPage},set(x){let w=x;x<1?w=1:x>p.value&&(w=p.value),Ra(n.currentPage)&&(h.value=w),l&&(e("update:current-page",w),e("current-change",w))}});ct(p,x=>{m.value>x&&(m.value=x)}),ct([m,f],x=>{e(Hn,...x)},{flush:"post"});function v(x){m.value=x}function g(x){f.value=x;const w=p.value;m.value>w&&(m.value=w)}function _(){n.disabled||(m.value-=1,e("prev-click",m.value))}function b(){n.disabled||(m.value+=1,e("next-click",m.value))}function S(x,w){x&&(x.props||(x.props={}),x.props.class=[x.props.class,w].join(" "))}return jn(QY,{pageCount:p,disabled:U(()=>n.disabled),currentPage:m,changeEvent:v,handleSizeChange:g}),()=>{var x,w;if(!u.value)return r("el.pagination.deprecationWarning"),null;if(!n.layout||n.hideOnSinglePage&&p.value<=1)return null;const M=[],C=[],A=tn("div",{class:i.e("rightwrapper")},C),T={prev:tn(tCe,{disabled:n.disabled,currentPage:m.value,prevText:n.prevText,prevIcon:n.prevIcon,onClick:_}),jumper:tn(ICe,{size:o.value}),pager:tn(BCe,{currentPage:m.value,pageCount:p.value,pagerCount:n.pagerCount,onChange:v,disabled:n.disabled}),next:tn(sCe,{disabled:n.disabled,currentPage:m.value,pageCount:p.value,nextText:n.nextText,nextIcon:n.nextIcon,onClick:b}),sizes:tn(MCe,{pageSize:f.value,pageSizes:n.pageSizes,popperClass:n.popperClass,disabled:n.disabled,teleported:n.teleported,size:o.value,appendSizeTo:n.appendSizeTo}),slot:(w=(x=t==null?void 0:t.default)==null?void 0:x.call(t))!=null?w:null,total:tn(LCe,{total:Ra(n.total)?0:n.total})},I=n.layout.split(",").map(B=>B.trim());let D=!1;return I.forEach(B=>{if(B==="->"){D=!0;return}D?C.push(T[B]):M.push(T[B])}),S(M[0],i.is("first")),S(M[M.length-1],i.is("last")),D&&C.length>0&&(S(C[0],i.is("first")),S(C[C.length-1],i.is("last")),M.push(A)),tn("div",{class:[i.b(),i.is("background",n.background),i.m(o.value)]},M)}}});const HCe=bn(UCe),VCe=Tt({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:BI,default:"primary"},cancelButtonType:{type:String,values:BI,default:"text"},icon:{type:Ar,default:()=>zpe},iconColor:{type:String,default:"#f90"},hideIcon:Boolean,hideAfter:{type:Number,default:200},teleported:Ri.teleported,persistent:Ri.persistent,width:{type:[String,Number],default:150}}),$Ce={confirm:n=>n instanceof MouseEvent,cancel:n=>n instanceof MouseEvent},GCe=Ie({name:"ElPopconfirm"}),WCe=Ie({...GCe,props:VCe,emits:$Ce,setup(n,{emit:e}){const t=n,{t:r}=sr(),i=gt("popconfirm"),s=ne(),a=()=>{var h,f;(f=(h=s.value)==null?void 0:h.onClose)==null||f.call(h)},o=U(()=>({width:wi(t.width)})),l=h=>{e("confirm",h),a()},c=h=>{e("cancel",h),a()},u=U(()=>t.confirmButtonText||r("el.popconfirm.confirmButtonText")),d=U(()=>t.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(h,f)=>($(),rt(y(ia),Nn({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},h.$attrs,{"popper-class":`${y(i).namespace.value}-popover`,"popper-style":y(o),teleported:h.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":h.hideAfter,persistent:h.persistent}),{content:Re(()=>[ye("div",{class:Y(y(i).b())},[ye("div",{class:Y(y(i).e("main"))},[!h.hideIcon&&h.icon?($(),rt(y(zt),{key:0,class:Y(y(i).e("icon")),style:Xt({color:h.iconColor})},{default:Re(()=>[($(),rt(Ln(h.icon)))]),_:1},8,["class","style"])):Xe("v-if",!0),Bn(" "+Ct(h.title),1)],2),ye("div",{class:Y(y(i).e("action"))},[Ye(h.$slots,"actions",{confirm:l,cancel:c},()=>[xe(y(ks),{size:"small",type:h.cancelButtonType==="text"?"":h.cancelButtonType,text:h.cancelButtonType==="text",onClick:c},{default:Re(()=>[Bn(Ct(y(d)),1)]),_:1},8,["type","text"]),xe(y(ks),{size:"small",type:h.confirmButtonType==="text"?"":h.confirmButtonType,text:h.confirmButtonType==="text",onClick:l},{default:Re(()=>[Bn(Ct(y(u)),1)]),_:1},8,["type","text"])])],2)],2)]),default:Re(()=>[h.$slots.reference?Ye(h.$slots,"reference",{key:0}):Xe("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var qCe=Et(WCe,[["__file","popconfirm.vue"]]);const KCe=bn(qCe),YCe=Tt({trigger:Cv.trigger,triggerKeys:Cv.triggerKeys,placement:t2.placement,disabled:Cv.disabled,visible:Ri.visible,transition:Ri.transition,popperOptions:t2.popperOptions,tabindex:t2.tabindex,content:Ri.content,popperStyle:Ri.popperStyle,popperClass:Ri.popperClass,enterable:{...Ri.enterable,default:!0},effect:{...Ri.effect,default:"light"},teleported:Ri.teleported,appendTo:Ri.appendTo,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),XCe={"update:visible":n=>Cr(n),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},jCe="onUpdate:visible",ZCe=Ie({name:"ElPopover"}),QCe=Ie({...ZCe,props:YCe,emits:XCe,setup(n,{expose:e,emit:t}){const r=n,i=U(()=>r[jCe]),s=gt("popover"),a=ne(),o=U(()=>{var v;return(v=y(a))==null?void 0:v.popperRef}),l=U(()=>[{width:wi(r.width)},r.popperStyle]),c=U(()=>[s.b(),r.popperClass,{[s.m("plain")]:!!r.content}]),u=U(()=>r.transition===`${s.namespace.value}-fade-in-linear`),d=()=>{var v;(v=a.value)==null||v.hide()},h=()=>{t("before-enter")},f=()=>{t("before-leave")},p=()=>{t("after-enter")},m=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:o,hide:d}),(v,g)=>($(),rt(y(ia),Nn({ref_key:"tooltipRef",ref:a},v.$attrs,{trigger:v.trigger,"trigger-keys":v.triggerKeys,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":y(c),"popper-style":y(l),teleported:v.teleported,"append-to":v.appendTo,persistent:v.persistent,"gpu-acceleration":y(u),"onUpdate:visible":y(i),onBeforeShow:h,onBeforeHide:f,onShow:p,onHide:m}),{content:Re(()=>[v.title?($(),ue("div",{key:0,class:Y(y(s).e("title")),role:"title"},Ct(v.title),3)):Xe("v-if",!0),Ye(v.$slots,"default",{},()=>[Bn(Ct(v.content),1)])]),default:Re(()=>[v.$slots.reference?Ye(v.$slots,"reference",{key:0}):Xe("v-if",!0)]),_:3},16,["trigger","trigger-keys","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","append-to","persistent","gpu-acceleration","onUpdate:visible"]))}});var JCe=Et(QCe,[["__file","popover.vue"]]);const g7=(n,e)=>{const t=e.arg||e.value,r=t==null?void 0:t.popperRef;r&&(r.triggerRef=n)};var eMe={mounted(n,e){g7(n,e)},updated(n,e){g7(n,e)}};const tMe="popover",tX=Hhe(eMe,tMe),nMe=bn(JCe,{directive:tX}),rMe=Tt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Fe(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Fe([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Fe(Function),default:n=>`${n}%`}}),iMe=Ie({name:"ElProgress"}),sMe=Ie({...iMe,props:rMe,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=gt("progress"),i=U(()=>{const b={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},S=_(e.percentage);return S.includes("gradient")?b.background=S:b.backgroundColor=S,b}),s=U(()=>(e.strokeWidth/e.width*100).toFixed(1)),a=U(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),o=U(()=>{const b=a.value,S=e.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${b}
          a ${b} ${b} 0 1 1 0 ${S?"-":""}${b*2}
          a ${b} ${b} 0 1 1 0 ${S?"":"-"}${b*2}
          `}),l=U(()=>2*Math.PI*a.value),c=U(()=>e.type==="dashboard"?.75:1),u=U(()=>`${-1*l.value*(1-c.value)/2}px`),d=U(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=U(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=U(()=>{let b;return e.color?b=_(e.percentage):b=t[e.status]||t.default,b}),p=U(()=>e.status==="warning"?tT:e.type==="line"?e.status==="success"?WD:kd:e.status==="success"?$_:Bl),m=U(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),v=U(()=>e.format(e.percentage));function g(b){const S=100/b.length;return b.map((w,M)=>Wt(w)?{color:w,percentage:(M+1)*S}:w).sort((w,M)=>w.percentage-M.percentage)}const _=b=>{var S;const{color:x}=e;if(Yt(x))return x(b);if(Wt(x))return x;{const w=g(x);for(const M of w)if(M.percentage>b)return M.color;return(S=w[w.length-1])==null?void 0:S.color}};return(b,S)=>($(),ue("div",{class:Y([y(r).b(),y(r).m(b.type),y(r).is(b.status),{[y(r).m("without-text")]:!b.showText,[y(r).m("text-inside")]:b.textInside}]),role:"progressbar","aria-valuenow":b.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[b.type==="line"?($(),ue("div",{key:0,class:Y(y(r).b("bar"))},[ye("div",{class:Y(y(r).be("bar","outer")),style:Xt({height:`${b.strokeWidth}px`})},[ye("div",{class:Y([y(r).be("bar","inner"),{[y(r).bem("bar","inner","indeterminate")]:b.indeterminate},{[y(r).bem("bar","inner","striped")]:b.striped},{[y(r).bem("bar","inner","striped-flow")]:b.stripedFlow}]),style:Xt(y(i))},[(b.showText||b.$slots.default)&&b.textInside?($(),ue("div",{key:0,class:Y(y(r).be("bar","innerText"))},[Ye(b.$slots,"default",{percentage:b.percentage},()=>[ye("span",null,Ct(y(v)),1)])],2)):Xe("v-if",!0)],6)],6)],2)):($(),ue("div",{key:1,class:Y(y(r).b("circle")),style:Xt({height:`${b.width}px`,width:`${b.width}px`})},[($(),ue("svg",{viewBox:"0 0 100 100"},[ye("path",{class:Y(y(r).be("circle","track")),d:y(o),stroke:`var(${y(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":b.strokeLinecap,"stroke-width":y(s),fill:"none",style:Xt(y(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),ye("path",{class:Y(y(r).be("circle","path")),d:y(o),stroke:y(f),fill:"none",opacity:b.percentage?1:0,"stroke-linecap":b.strokeLinecap,"stroke-width":y(s),style:Xt(y(h))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(b.showText||b.$slots.default)&&!b.textInside?($(),ue("div",{key:2,class:Y(y(r).e("text")),style:Xt({fontSize:`${y(m)}px`})},[Ye(b.$slots,"default",{percentage:b.percentage},()=>[b.status?($(),rt(y(zt),{key:1},{default:Re(()=>[($(),rt(Ln(y(p))))]),_:1})):($(),ue("span",{key:0},Ct(y(v)),1))])],6)):Xe("v-if",!0)],10,["aria-valuenow"]))}});var aMe=Et(sMe,[["__file","progress.vue"]]);const nX=bn(aMe),oMe=Tt({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Fe([Array,Object]),default:()=>hi(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Fe([Array,Object]),default:()=>[DS,DS,DS]},voidIcon:{type:Ar,default:()=>e0e},disabledVoidIcon:{type:Ar,default:()=>DS},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Fe(Array),default:()=>hi(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:as,clearable:Boolean,...aa(["ariaLabel"])}),lMe={[Hn]:n=>en(n),[mn]:n=>en(n)},cMe=Ie({name:"ElRate"}),uMe=Ie({...cMe,props:oMe,emits:lMe,setup(n,{expose:e,emit:t}){const r=n;function i(L,z){const k=q=>Mn(q),F=Object.keys(z).map(q=>+q).filter(q=>{const Z=z[q];return(k(Z)?Z.excluded:!1)?L<q:L<=q}).sort((q,Z)=>q-Z),W=z[F[0]];return k(W)&&W.value||W}const s=Lt(y0,void 0),a=Lt(su,void 0),o=Qi(),l=gt("rate"),{inputId:c,isLabeledByFormItem:u}=Vl(r,{formItemContext:a}),d=ne(r.modelValue),h=ne(-1),f=ne(!0),p=U(()=>[l.b(),l.m(o.value)]),m=U(()=>r.disabled||(s==null?void 0:s.disabled)),v=U(()=>l.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":S.value})),g=U(()=>{let L="";return r.showScore?L=r.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${r.modelValue}`:`${d.value}`):r.showText&&(L=r.texts[Math.ceil(d.value)-1]),L}),_=U(()=>r.modelValue*100-Math.floor(r.modelValue)*100),b=U(()=>xt(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),S=U(()=>{const L=i(d.value,b.value);return Mn(L)?"":L}),x=U(()=>{let L="";return m.value?L=`${_.value}%`:r.allowHalf&&(L="50%"),{color:S.value,width:L}}),w=U(()=>{let L=xt(r.icons)?[...r.icons]:{...r.icons};return L=od(L),xt(L)?{[r.lowThreshold]:L[0],[r.highThreshold]:{value:L[1],excluded:!0},[r.max]:L[2]}:L}),M=U(()=>i(r.modelValue,w.value)),C=U(()=>m.value?Wt(r.disabledVoidIcon)?r.disabledVoidIcon:od(r.disabledVoidIcon):Wt(r.voidIcon)?r.voidIcon:od(r.voidIcon)),A=U(()=>i(d.value,w.value));function T(L){const z=m.value&&_.value>0&&L-1<r.modelValue&&L>r.modelValue,k=r.allowHalf&&f.value&&L-.5<=d.value&&L>d.value;return z||k}function I(L){r.clearable&&L===r.modelValue&&(L=0),t(mn,L),r.modelValue!==L&&t(Hn,L)}function D(L){m.value||(r.allowHalf&&f.value?I(d.value):I(L))}function B(L){if(m.value)return;let z=d.value;const k=L.code;return k===Rt.up||k===Rt.right?(r.allowHalf?z+=.5:z+=1,L.stopPropagation(),L.preventDefault()):(k===Rt.left||k===Rt.down)&&(r.allowHalf?z-=.5:z-=1,L.stopPropagation(),L.preventDefault()),z=z<0?0:z,z=z>r.max?r.max:z,t(mn,z),t(Hn,z),z}function O(L,z){if(!m.value){if(r.allowHalf&&z){let k=z.target;ho(k,l.e("item"))&&(k=k.querySelector(`.${l.e("icon")}`)),(k.clientWidth===0||ho(k,l.e("decimal")))&&(k=k.parentNode),f.value=z.offsetX*2<=k.clientWidth,d.value=f.value?L-.5:L}else d.value=L;h.value=L}}function H(){m.value||(r.allowHalf&&(f.value=r.modelValue!==Math.floor(r.modelValue)),d.value=r.modelValue,h.value=-1)}return ct(()=>r.modelValue,L=>{d.value=L,f.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||t(mn,0),e({setCurrentValue:O,resetCurrentValue:H}),(L,z)=>{var k;return $(),ue("div",{id:y(c),class:Y([y(p),y(l).is("disabled",y(m))]),role:"slider","aria-label":y(u)?void 0:L.ariaLabel||"rating","aria-labelledby":y(u)?(k=y(a))==null?void 0:k.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":y(g)||void 0,"aria-valuemin":"0","aria-valuemax":L.max,tabindex:"0",style:Xt(y(v)),onKeydown:B},[($(!0),ue(Bt,null,Fn(L.max,(F,W)=>($(),ue("span",{key:W,class:Y(y(l).e("item")),onMousemove:q=>O(F,q),onMouseleave:H,onClick:q=>D(F)},[xe(y(zt),{class:Y([y(l).e("icon"),{hover:h.value===F},y(l).is("active",F<=d.value)])},{default:Re(()=>[T(F)?Xe("v-if",!0):($(),ue(Bt,{key:0},[Cn(($(),rt(Ln(y(A)),null,null,512)),[[cr,F<=d.value]]),Cn(($(),rt(Ln(y(C)),null,null,512)),[[cr,!(F<=d.value)]])],64)),T(F)?($(),ue(Bt,{key:1},[($(),rt(Ln(y(C)),{class:Y([y(l).em("decimal","box")])},null,8,["class"])),xe(y(zt),{style:Xt(y(x)),class:Y([y(l).e("icon"),y(l).e("decimal")])},{default:Re(()=>[($(),rt(Ln(y(M))))]),_:1},8,["style","class"])],64)):Xe("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),L.showText||L.showScore?($(),ue("span",{key:0,class:Y(y(l).e("text")),style:Xt({color:L.textColor})},Ct(y(g)),7)):Xe("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var dMe=Et(uMe,[["__file","rate.vue"]]);const fMe=bn(dMe),fp={primary:"icon-primary",success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},y7={[fp.primary]:Rb,[fp.success]:ape,[fp.warning]:tT,[fp.error]:qD,[fp.info]:Rb},hMe=Tt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["primary","success","warning","info","error"],default:"info"}}),pMe=Ie({name:"ElResult"}),mMe=Ie({...pMe,props:hMe,setup(n){const e=n,t=gt("result"),r=U(()=>{const i=e.icon,s=i&&fp[i]?fp[i]:"icon-info",a=y7[s]||y7["icon-info"];return{class:s,component:a}});return(i,s)=>($(),ue("div",{class:Y(y(t).b())},[ye("div",{class:Y(y(t).e("icon"))},[Ye(i.$slots,"icon",{},()=>[y(r).component?($(),rt(Ln(y(r).component),{key:0,class:Y(y(r).class)},null,8,["class"])):Xe("v-if",!0)])],2),i.title||i.$slots.title?($(),ue("div",{key:0,class:Y(y(t).e("title"))},[Ye(i.$slots,"title",{},()=>[ye("p",null,Ct(i.title),1)])],2)):Xe("v-if",!0),i.subTitle||i.$slots["sub-title"]?($(),ue("div",{key:1,class:Y(y(t).e("subtitle"))},[Ye(i.$slots,"sub-title",{},()=>[ye("p",null,Ct(i.subTitle),1)])],2)):Xe("v-if",!0),i.$slots.extra?($(),ue("div",{key:2,class:Y(y(t).e("extra"))},[Ye(i.$slots,"extra")],2)):Xe("v-if",!0)],2))}});var vMe=Et(mMe,[["__file","result.vue"]]);const gMe=bn(vMe),yMe=["start","center","end","space-around","space-between","space-evenly"],bMe=["top","middle","bottom"],_Me=Tt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:yMe,default:"start"},align:{type:String,values:bMe}}),SMe=Ie({name:"ElRow"}),xMe=Ie({...SMe,props:_Me,setup(n){const e=n,t=gt("row"),r=U(()=>e.gutter);jn(tY,{gutter:r});const i=U(()=>{const a={};return e.gutter&&(a.marginRight=a.marginLeft=`-${e.gutter/2}px`),a}),s=U(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(a,o)=>($(),rt(Ln(a.tag),{class:Y(y(s)),style:Xt(y(i))},{default:Re(()=>[Ye(a.$slots,"default")]),_:3},8,["class","style"]))}});var wMe=Et(xMe,[["__file","row.vue"]]);const CMe=bn(wMe),MMe=Ie({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:gt("select")}}});function TMe(n,e,t,r,i,s){return $(),ue("div",{class:Y(n.ns.be("group","title")),style:Xt({...n.style,lineHeight:`${n.height}px`})},Ct(n.item.label),7)}var AMe=Et(MMe,[["render",TMe],["__file","group-item.vue"]]);function EMe(n,{emit:e}){return{hoverItem:()=>{n.disabled||e("hover",n.index)},selectOptionClick:()=>{n.disabled||e("select",n.item,n.index)}}}const rX={label:"label",value:"value",disabled:"disabled",options:"options"};function pT(n){const e=U(()=>({...rX,...n.props}));return{aliasProps:e,getLabel:a=>Vi(a,e.value.label),getValue:a=>Vi(a,e.value.value),getDisabled:a=>Vi(a,e.value.disabled),getOptions:a=>Vi(a,e.value.options)}}const IMe=Tt({allowCreate:Boolean,autocomplete:{type:Fe(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:Ar,default:kd},effect:{type:Fe(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:{type:Fe(Function)},height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Fe([Array,String,Number,Boolean,Object]),default:void 0},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:{type:Fe(Function)},reserveKeyword:{type:Boolean,default:!0},options:{type:Fe(Array),required:!0},placeholder:{type:String},teleported:Ri.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Fe(Object),default:()=>({})},remote:Boolean,size:as,props:{type:Fe(Object),default:()=>rX},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:Fe(String),values:Od,default:"bottom-start"},fallbackPlacements:{type:Fe(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Sd.type,default:"info"},tagEffect:{...Sd.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:Ri.appendTo,fitInputWidth:{type:[Boolean,Number],default:!0,validator(n){return Cr(n)||en(n)}},suffixIcon:{type:Ar,default:mu},...g0,...aa(["ariaLabel"])}),RMe=Tt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Fe(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),PMe={[mn]:n=>!0,[Hn]:n=>!0,"remove-tag":n=>!0,"visible-change":n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0},DMe={hover:n=>en(n),select:(n,e)=>!0},L6=Symbol("ElSelectV2Injection"),LMe=Ie({props:RMe,emits:DMe,setup(n,{emit:e}){const t=Lt(L6),r=gt("select"),{hoverItem:i,selectOptionClick:s}=EMe(n,{emit:e}),{getLabel:a}=pT(t.props);return{ns:r,hoverItem:i,selectOptionClick:s,getLabel:a}}});function kMe(n,e,t,r,i,s){return $(),ue("li",{"aria-selected":n.selected,style:Xt(n.style),class:Y([n.ns.be("dropdown","item"),n.ns.is("selected",n.selected),n.ns.is("disabled",n.disabled),n.ns.is("created",n.created),n.ns.is("hovering",n.hovering)]),onMousemove:n.hoverItem,onClick:an(n.selectOptionClick,["stop"])},[Ye(n.$slots,"default",{item:n.item,index:n.index,disabled:n.disabled},()=>[ye("span",null,Ct(n.getLabel(n.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var OMe=Et(LMe,[["render",kMe],["__file","option-item.vue"]]),b7=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function NMe(n,e){return!!(n===e||b7(n)&&b7(e))}function BMe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!NMe(n[t],e[t]))return!1;return!0}function FMe(n,e){e===void 0&&(e=BMe);var t=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var a=n.apply(this,i);return t={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){t=null},r}const iX=()=>{const e=Dn().proxy.$props;return U(()=>{const t=(r,i,s)=>({});return e.perfMode?jM(t):FMe(t)})},nR=50,mC="itemRendered",vC="scroll",nv="forward",gC="backward",Tl="auto",mT="smart",zb="start",qc="center",Ub="end",rg="horizontal",k6="vertical",zMe="ltr",Mv="rtl",Hb="negative",O6="positive-ascending",N6="positive-descending",UMe={[rg]:"left",[k6]:"top"},HMe=20,VMe={[rg]:"deltaX",[k6]:"deltaY"},$Me=({atEndEdge:n,atStartEdge:e,layout:t},r)=>{let i,s=0;const a=l=>l<0&&e.value||l>0&&n.value;return{hasReachedEdge:a,onWheel:l=>{Zp(i);const c=l[VMe[t.value]];a(s)&&a(s+c)||(s+=c,XD()||l.preventDefault(),i=th(()=>{r(s),s=0}))}}},rR=_c({type:Fe([Number,Function]),required:!0}),iR=_c({type:Number}),sR=_c({type:Number,default:2}),GMe=_c({type:String,values:["ltr","rtl"],default:"ltr"}),aR=_c({type:Number,default:0}),yC=_c({type:Number,required:!0}),sX=_c({type:String,values:["horizontal","vertical"],default:k6}),aX=Tt({className:{type:String,default:""},containerElement:{type:Fe([String,Object]),default:"div"},data:{type:Fe(Array),default:()=>hi([])},direction:GMe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Fe([Object,String,Array])},useIsScrolling:Boolean,width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),oX=Tt({cache:sR,estimatedItemSize:iR,layout:sX,initScrollOffset:aR,total:yC,itemSize:rR,...aX}),oR={type:Number,default:6},lX={type:Number,default:0},cX={type:Number,default:2},Fp=Tt({columnCache:sR,columnWidth:rR,estimatedColumnWidth:iR,estimatedRowHeight:iR,initScrollLeft:aR,initScrollTop:aR,itemKey:{type:Fe(Function),default:({columnIndex:n,rowIndex:e})=>`${e}:${n}`},rowCache:sR,rowHeight:rR,totalColumn:yC,totalRow:yC,hScrollbarSize:oR,vScrollbarSize:oR,scrollbarStartGap:lX,scrollbarEndGap:cX,role:String,...aX}),uX=Tt({alwaysOn:Boolean,class:String,layout:sX,total:yC,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:oR,startGap:lX,endGap:cX,visible:Boolean}),wp=(n,e)=>n<e?nv:gC,Vb=n=>n===zMe||n===Mv||n===rg,_7=n=>n===Mv;let F0=null;function bC(n=!1){if(F0===null||n){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?F0=N6:(e.scrollLeft=1,e.scrollLeft===0?F0=Hb:F0=O6),document.body.removeChild(e),F0}return F0}function WMe({move:n,size:e,bar:t},r){const i={},s=`translate${t.axis}(${n}px)`;return i[t.size]=e,i.transform=s,r==="horizontal"?i.height="100%":i.width="100%",i}const lR=Ie({name:"ElVirtualScrollBar",props:uX,emits:["scroll","start-move","stop-move"],setup(n,{emit:e}){const t=U(()=>n.startGap+n.endGap),r=gt("virtual-scrollbar"),i=gt("scrollbar"),s=ne(),a=ne();let o=null,l=null;const c=pr({isDragging:!1,traveled:0}),u=U(()=>Zq[n.layout]),d=U(()=>n.clientSize-y(t)),h=U(()=>({position:"absolute",width:`${rg===n.layout?d.value:n.scrollbarSize}px`,height:`${rg===n.layout?n.scrollbarSize:d.value}px`,[UMe[n.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),f=U(()=>{const w=n.ratio;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*d.value/100;const M=d.value/3;return Math.floor(Math.min(Math.max(w*d.value,HMe),M))}),p=U(()=>{if(!Number.isFinite(f.value))return{display:"none"};const w=`${f.value}px`;return WMe({bar:u.value,size:w,move:c.traveled},n.layout)}),m=U(()=>Math.ceil(n.clientSize-f.value-y(t))),v=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",b);const w=y(a);w&&(l=document.onselectstart,document.onselectstart=()=>!1,w.addEventListener("touchmove",S,{passive:!0}),w.addEventListener("touchend",b))},g=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b),document.onselectstart=l,l=null;const w=y(a);w&&(w.removeEventListener("touchmove",S),w.removeEventListener("touchend",b))},_=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(c.isDragging=!0,c[u.value.axis]=w.currentTarget[u.value.offset]-(w[u.value.client]-w.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),v())},b=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),g()},S=w=>{const{isDragging:M}=c;if(!M||!a.value||!s.value)return;const C=c[u.value.axis];if(!C)return;Zp(o);const A=(s.value.getBoundingClientRect()[u.value.direction]-w[u.value.client])*-1,T=a.value[u.value.offset]-C,I=A-T;o=th(()=>{c.traveled=Math.max(0,Math.min(I,m.value)),e("scroll",I,m.value)})},x=w=>{const M=Math.abs(w.target.getBoundingClientRect()[u.value.direction]-w[u.value.client]),C=a.value[u.value.offset]/2,A=M-C;c.traveled=Math.max(0,Math.min(A,m.value)),e("scroll",A,m.value)};return ct(()=>n.scrollFrom,w=>{c.isDragging||(c.traveled=Math.ceil(w*m.value))}),br(()=>{g()}),()=>tn("div",{role:"presentation",ref:s,class:[r.b(),n.class,(n.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:an(x,["stop","prevent"]),onTouchstartPrevent:_},tn("div",{ref:a,class:i.e("thumb"),style:p.value,onMousedown:_},[]))}}),dX=({name:n,getOffset:e,getItemSize:t,getItemOffset:r,getEstimatedTotalSize:i,getStartIndexForOffset:s,getStopIndexForStartIndex:a,initCache:o,clearCache:l,validateProps:c})=>Ie({name:n??"ElVirtualList",props:oX,emits:[mC,vC],setup(u,{emit:d,expose:h}){c(u);const f=Dn(),p=gt("vl"),m=ne(o(u,f)),v=iX(),g=ne(),_=ne(),b=ne(),S=ne({isScrolling:!1,scrollDir:"forward",scrollOffset:en(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),x=U(()=>{const{total:se,cache:X}=u,{isScrolling:ie,scrollDir:ae,scrollOffset:ce}=y(S);if(se===0)return[0,0,0,0];const we=s(u,ce,y(m)),He=a(u,we,ce,y(m)),Ge=!ie||ae===gC?Math.max(1,X):1,me=!ie||ae===nv?Math.max(1,X):1;return[Math.max(0,we-Ge),Math.max(0,Math.min(se-1,He+me)),we,He]}),w=U(()=>i(u,y(m))),M=U(()=>Vb(u.layout)),C=U(()=>[{position:"relative",[`overflow-${M.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:en(u.height)?`${u.height}px`:u.height,width:en(u.width)?`${u.width}px`:u.width},u.style]),A=U(()=>{const se=y(w),X=y(M);return{height:X?"100%":`${se}px`,pointerEvents:y(S).isScrolling?"none":void 0,width:X?`${se}px`:"100%"}}),T=U(()=>M.value?u.width:u.height),{onWheel:I}=$Me({atStartEdge:U(()=>S.value.scrollOffset<=0),atEndEdge:U(()=>S.value.scrollOffset>=w.value),layout:U(()=>u.layout)},se=>{var X,ie;(ie=(X=b.value).onMouseUp)==null||ie.call(X),z(Math.min(S.value.scrollOffset+se,w.value-T.value))});Lr(g,"wheel",I,{passive:!1});const D=()=>{const{total:se}=u;if(se>0){const[ce,we,He,Ge]=y(x);d(mC,ce,we,He,Ge)}const{scrollDir:X,scrollOffset:ie,updateRequested:ae}=y(S);d(vC,X,ie,ae)},B=se=>{const{clientHeight:X,scrollHeight:ie,scrollTop:ae}=se.currentTarget,ce=y(S);if(ce.scrollOffset===ae)return;const we=Math.max(0,Math.min(ae,ie-X));S.value={...ce,isScrolling:!0,scrollDir:wp(ce.scrollOffset,we),scrollOffset:we,updateRequested:!1},Ut(W)},O=se=>{const{clientWidth:X,scrollLeft:ie,scrollWidth:ae}=se.currentTarget,ce=y(S);if(ce.scrollOffset===ie)return;const{direction:we}=u;let He=ie;if(we===Mv)switch(bC()){case Hb:{He=-ie;break}case N6:{He=ae-X-ie;break}}He=Math.max(0,Math.min(He,ae-X)),S.value={...ce,isScrolling:!0,scrollDir:wp(ce.scrollOffset,He),scrollOffset:He,updateRequested:!1},Ut(W)},H=se=>{y(M)?O(se):B(se),D()},L=(se,X)=>{const ie=(w.value-T.value)/X*se;z(Math.min(w.value-T.value,ie))},z=se=>{se=Math.max(se,0),se!==y(S).scrollOffset&&(S.value={...y(S),scrollOffset:se,scrollDir:wp(y(S).scrollOffset,se),updateRequested:!0},Ut(W))},k=(se,X=Tl)=>{const{scrollOffset:ie}=y(S);se=Math.max(0,Math.min(se,u.total-1)),z(e(u,se,X,ie,y(m)))},F=se=>{const{direction:X,itemSize:ie,layout:ae}=u,ce=v.value(l&&ie,l&&ae,l&&X);let we;if(fr(ce,String(se)))we=ce[se];else{const He=r(u,se,y(m)),Ge=t(u,se,y(m)),me=y(M),be=X===Mv,oe=me?He:0;ce[se]=we={position:"absolute",left:be?void 0:`${oe}px`,right:be?`${oe}px`:void 0,top:me?0:`${He}px`,height:me?"100%":`${Ge}px`,width:me?`${Ge}px`:"100%"}}return we},W=()=>{S.value.isScrolling=!1,Ut(()=>{v.value(-1,null,null)})},q=()=>{const se=g.value;se&&(se.scrollTop=0)};Rn(()=>{if(!ar)return;const{initScrollOffset:se}=u,X=y(g);en(se)&&X&&(y(M)?X.scrollLeft=se:X.scrollTop=se),D()}),yc(()=>{const{direction:se,layout:X}=u,{scrollOffset:ie,updateRequested:ae}=y(S),ce=y(g);if(ae&&ce)if(X===rg)if(se===Mv)switch(bC()){case Hb:{ce.scrollLeft=-ie;break}case O6:{ce.scrollLeft=ie;break}default:{const{clientWidth:we,scrollWidth:He}=ce;ce.scrollLeft=He-we-ie;break}}else ce.scrollLeft=ie;else ce.scrollTop=ie}),zM(()=>{y(g).scrollTop=y(S).scrollOffset});const Z={ns:p,clientSize:T,estimatedTotalSize:w,windowStyle:C,windowRef:g,innerRef:_,innerStyle:A,itemsToRender:x,scrollbarRef:b,states:S,getItemStyle:F,onScroll:H,onScrollbarScroll:L,onWheel:I,scrollTo:z,scrollToItem:k,resetScrollTop:q};return h({windowRef:g,innerRef:_,getItemStyleCache:v,scrollTo:z,scrollToItem:k,resetScrollTop:q,states:S}),Z},render(u){var d;const{$slots:h,className:f,clientSize:p,containerElement:m,data:v,getItemStyle:g,innerElement:_,itemsToRender:b,innerStyle:S,layout:x,total:w,onScroll:M,onScrollbarScroll:C,states:A,useIsScrolling:T,windowStyle:I,ns:D}=u,[B,O]=b,H=Ln(m),L=Ln(_),z=[];if(w>0)for(let q=B;q<=O;q++)z.push(tn(Bt,{key:q},(d=h.default)==null?void 0:d.call(h,{data:v,index:q,isScrolling:T?A.isScrolling:void 0,style:g(q)})));const k=[tn(L,{style:S,ref:"innerRef"},Wt(L)?z:{default:()=>z})],F=tn(lR,{ref:"scrollbarRef",clientSize:p,layout:x,onScroll:C,ratio:p*100/this.estimatedTotalSize,scrollFrom:A.scrollOffset/(this.estimatedTotalSize-p),total:w,alwaysOn:A.scrollbarAlwaysOn}),W=tn(H,{class:[D.e("window"),f],style:I,onScroll:M,ref:"windowRef",key:0},Wt(H)?[k]:{default:()=>[k]});return tn("div",{key:0,class:[D.e("wrapper"),A.scrollbarAlwaysOn?"always-on":""]},[W,F])}}),fX=dX({name:"ElFixedSizeList",getItemOffset:({itemSize:n},e)=>e*n,getItemSize:({itemSize:n})=>n,getEstimatedTotalSize:({total:n,itemSize:e})=>e*n,getOffset:({height:n,total:e,itemSize:t,layout:r,width:i},s,a,o)=>{const l=Vb(r)?i:n,c=Math.max(0,e*t-l),u=Math.min(c,s*t),d=Math.max(0,(s+1)*t-l);switch(a===mT&&(o>=d-l&&o<=u+l?a=Tl:a=qc),a){case zb:return u;case Ub:return d;case qc:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case Tl:default:return o>=d&&o<=u?o:o<d?d:u}},getStartIndexForOffset:({total:n,itemSize:e},t)=>Math.max(0,Math.min(n-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:n,total:e,itemSize:t,layout:r,width:i},s,a)=>{const o=s*t,l=Vb(r)?i:n,c=Math.ceil((l+a-o)/t);return Math.max(0,Math.min(e-1,s+c-1))},initCache(){},clearCache:!0,validateProps(){}}),rv=(n,e,t)=>{const{itemSize:r}=n,{items:i,lastVisitedIndex:s}=t;if(e>s){let a=0;if(s>=0){const o=i[s];a=o.offset+o.size}for(let o=s+1;o<=e;o++){const l=r(o);i[o]={offset:a,size:l},a+=l}t.lastVisitedIndex=e}return i[e]},qMe=(n,e,t)=>{const{items:r,lastVisitedIndex:i}=e;return(i>0?r[i].offset:0)>=t?hX(n,e,0,i,t):KMe(n,e,Math.max(0,i),t)},hX=(n,e,t,r,i)=>{for(;t<=r;){const s=t+Math.floor((r-t)/2),a=rv(n,s,e).offset;if(a===i)return s;a<i?t=s+1:a>i&&(r=s-1)}return Math.max(0,t-1)},KMe=(n,e,t,r)=>{const{total:i}=n;let s=1;for(;t<i&&rv(n,t,e).offset<r;)t+=s,s*=2;return hX(n,e,Math.floor(t/2),Math.min(t,i-1),r)},S7=({total:n},{items:e,estimatedItemSize:t,lastVisitedIndex:r})=>{let i=0;if(r>=n&&(r=n-1),r>=0){const o=e[r];i=o.offset+o.size}const a=(n-r-1)*t;return i+a},YMe=dX({name:"ElDynamicSizeList",getItemOffset:(n,e,t)=>rv(n,e,t).offset,getItemSize:(n,e,{items:t})=>t[e].size,getEstimatedTotalSize:S7,getOffset:(n,e,t,r,i)=>{const{height:s,layout:a,width:o}=n,l=Vb(a)?o:s,c=rv(n,e,i),u=S7(n,i),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(t===mT&&(r>=h-l&&r<=d+l?t=Tl:t=qc),t){case zb:return d;case Ub:return h;case qc:return Math.round(h+(d-h)/2);case Tl:default:return r>=h&&r<=d?r:r<h?h:d}},getStartIndexForOffset:(n,e,t)=>qMe(n,t,e),getStopIndexForStartIndex:(n,e,t,r)=>{const{height:i,total:s,layout:a,width:o}=n,l=Vb(a)?o:i,c=rv(n,e,r),u=t+l;let d=c.offset+c.size,h=e;for(;h<s-1&&d<u;)h++,d+=rv(n,h,r).size;return h},initCache({estimatedItemSize:n=nR},e){const t={items:{},estimatedItemSize:n,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(r,i=!0)=>{var s,a;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,r-1),(s=e.exposed)==null||s.getItemStyleCache(-1),i&&((a=e.proxy)==null||a.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:n})=>{}}),XMe={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var jMe=Ie({name:"ElSelectDropdown",props:XMe,setup(n,{slots:e,expose:t}){const r=Lt(L6),i=gt("select"),{getLabel:s,getValue:a,getDisabled:o}=pT(r.props),l=ne([]),c=ne(),u=U(()=>n.data.length);ct(()=>u.value,()=>{var I,D;(D=(I=r.tooltipRef.value)==null?void 0:I.updatePopper)==null||D.call(I)});const d=U(()=>nr(r.props.estimatedOptionHeight)),h=U(()=>d.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:I=>l.value[I]}),f=(I=[],D)=>{const{props:{valueKey:B}}=r;return Mn(D)?I&&I.some(O=>zr(Vi(O,B))===Vi(D,B)):I.includes(D)},p=(I,D)=>{if(Mn(D)){const{valueKey:B}=r.props;return Vi(I,B)===Vi(D,B)}else return I===D},m=(I,D)=>r.props.multiple?f(I,a(D)):p(I,a(D)),v=(I,D)=>{const{disabled:B,multiple:O,multipleLimit:H}=r.props;return B||!D&&(O?H>0&&I.length>=H:!1)},g=I=>n.hoveringIndex===I;t({listRef:c,isSized:d,isItemDisabled:v,isItemHovering:g,isItemSelected:m,scrollToItem:I=>{const D=c.value;D&&D.scrollToItem(I)},resetScrollTop:()=>{const I=c.value;I&&I.resetScrollTop()}});const x=I=>{const{index:D,data:B,style:O}=I,H=y(d),{itemSize:L,estimatedSize:z}=y(h),{modelValue:k}=r.props,{onSelect:F,onHover:W}=r,q=B[D];if(q.type==="Group")return xe(AMe,{item:q,style:O,height:H?L:z},null);const Z=m(k,q),se=v(k,Z),X=g(D);return xe(OMe,Nn(I,{selected:Z,disabled:o(q)||se,created:!!q.created,hovering:X,item:q,onSelect:F,onHover:W}),{default:ie=>{var ae;return((ae=e.default)==null?void 0:ae.call(e,ie))||xe("span",null,[s(q)])}})},{onKeyboardNavigate:w,onKeyboardSelect:M}=r,C=()=>{w("forward")},A=()=>{w("backward")},T=I=>{const{code:D}=I,{tab:B,esc:O,down:H,up:L,enter:z,numpadEnter:k}=Rt;switch([O,H,L,z,k].includes(D)&&(I.preventDefault(),I.stopPropagation()),D){case B:case O:break;case H:C();break;case L:A();break;case z:case k:M();break}};return()=>{var I,D,B,O;const{data:H,width:L}=n,{height:z,multiple:k,scrollbarAlwaysOn:F}=r.props,W=U(()=>iC?!0:F),q=y(d)?fX:YMe;return xe("div",{class:[i.b("dropdown"),i.is("multiple",k)],style:{width:`${L}px`}},[(I=e.header)==null?void 0:I.call(e),((D=e.loading)==null?void 0:D.call(e))||((B=e.empty)==null?void 0:B.call(e))||xe(q,Nn({ref:c},y(h),{className:i.be("dropdown","list"),scrollbarAlwaysOn:W.value,data:H,height:z,width:L,total:H.length,onKeydown:T}),{default:Z=>xe(x,Z,null)}),(O=e.footer)==null?void 0:O.call(e)])}}});function ZMe(n,e){const{aliasProps:t,getLabel:r,getValue:i}=pT(n),s=ne(0),a=ne(),o=U(()=>n.allowCreate&&n.filterable);ct(()=>n.options,f=>{const p=new Set(f.map(m=>r(m)));e.createdOptions=e.createdOptions.filter(m=>!p.has(r(m)))});function l(f){const p=m=>r(m)===f;return n.options&&n.options.some(p)||e.createdOptions.some(p)}function c(f){o.value&&(n.multiple&&f.created?s.value++:a.value=f)}function u(f){if(o.value)if(f&&f.length>0){if(l(f)){e.createdOptions=e.createdOptions.filter(m=>r(m)!==e.previousQuery);return}const p={[t.value.value]:f,[t.value.label]:f,created:!0,[t.value.disabled]:!1};e.createdOptions.length>=s.value?e.createdOptions[s.value]=p:e.createdOptions.push(p)}else if(n.multiple)e.createdOptions.length=s.value;else{const p=a.value;e.createdOptions.length=0,p&&p.created&&e.createdOptions.push(p)}}function d(f){if(!o.value||!f||!f.created||f.created&&n.reserveKeyword&&e.inputValue===r(f))return;const p=e.createdOptions.findIndex(m=>i(m)===i(f));~p&&(e.createdOptions.splice(p,1),s.value--)}function h(){o.value&&(e.createdOptions.length=0,s.value=0)}return{createNewOption:u,removeNewOption:d,selectNewOption:c,clearAllNewOption:h}}const QMe=(n,e)=>{const{t}=sr(),r=gt("select"),i=gt("input"),{form:s,formItem:a}=oa(),{inputId:o}=Vl(n,{formItemContext:a}),{aliasProps:l,getLabel:c,getValue:u,getDisabled:d,getOptions:h}=pT(n),{valueOnClear:f,isEmptyValue:p}=V_(n),m=pr({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),v=ne(-1),g=ne(),_=ne(),b=ne(),S=ne(),x=ne(),w=ne(),M=ne(),C=ne(),A=ne(),T=ne(),{isComposing:I,handleCompositionStart:D,handleCompositionEnd:B,handleCompositionUpdate:O}=W_({afterComposition:We=>Je(We)}),H=U(()=>n.disabled||!!(s!=null&&s.disabled)),{wrapperRef:L,isFocused:z,handleBlur:k}=gh(x,{disabled:H,afterFocus(){n.automaticDropdown&&!Z.value&&(Z.value=!0,m.menuVisibleOnFocus=!0)},beforeBlur(We){var tt,bt;return((tt=b.value)==null?void 0:tt.isFocusInsideContent(We))||((bt=S.value)==null?void 0:bt.isFocusInsideContent(We))},afterBlur(){var We;Z.value=!1,m.menuVisibleOnFocus=!1,n.validateEvent&&((We=a==null?void 0:a.validate)==null||We.call(a,"blur").catch(tt=>void 0))}}),F=U(()=>ke("")),W=U(()=>n.loading?!1:n.options.length>0||m.createdOptions.length>0),q=ne([]),Z=ne(!1),se=U(()=>{var We;return(We=s==null?void 0:s.statusIcon)!=null?We:!1}),X=U(()=>{const We=q.value.length*n.itemHeight;return We>n.height?n.height:We}),ie=U(()=>n.multiple?xt(n.modelValue)&&n.modelValue.length>0:!p(n.modelValue)),ae=U(()=>n.clearable&&!H.value&&m.inputHovering&&ie.value),ce=U(()=>n.remote&&n.filterable?"":n.suffixIcon),we=U(()=>ce.value&&r.is("reverse",Z.value)),He=U(()=>(a==null?void 0:a.validateState)||""),Ge=U(()=>{if(He.value)return nT[He.value]}),me=U(()=>n.remote?300:0),be=U(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!m.inputValue&&!W.value?!1:n.filterable&&m.inputValue&&W.value&&q.value.length===0?n.noMatchText||t("el.select.noMatch"):W.value?null:n.noDataText||t("el.select.noData")),oe=U(()=>n.filterable&&Yt(n.filterMethod)),j=U(()=>n.filterable&&n.remote&&Yt(n.remoteMethod)),ke=We=>{const tt=new RegExp(R6(We),"i"),bt=Dt=>oe.value||j.value?!0:We?tt.test(c(Dt)||""):!0;return n.loading?[]:[...m.createdOptions,...n.options].reduce((Dt,Kt)=>{const fn=h(Kt);if(xt(fn)){const On=fn.filter(bt);On.length>0&&Dt.push({label:c(Kt),type:"Group"},...On)}else(n.remote||bt(Kt))&&Dt.push(Kt);return Dt},[])},ze=()=>{q.value=ke(m.inputValue)},Ve=U(()=>{const We=new Map;return F.value.forEach((tt,bt)=>{We.set(Vt(u(tt)),{option:tt,index:bt})}),We}),Le=U(()=>{const We=new Map;return q.value.forEach((tt,bt)=>{We.set(Vt(u(tt)),{option:tt,index:bt})}),We}),Ze=U(()=>q.value.every(We=>d(We))),st=Qi(),fe=U(()=>st.value==="small"?"small":"default"),V=()=>{var We;if(en(n.fitInputWidth)){v.value=n.fitInputWidth;return}const tt=((We=g.value)==null?void 0:We.offsetWidth)||200;!n.fitInputWidth&&W.value?Ut(()=>{v.value=Math.max(tt,J())}):v.value=tt},J=()=>{var We,tt;const Dt=document.createElement("canvas").getContext("2d"),Kt=r.be("dropdown","item"),On=(((tt=(We=C.value)==null?void 0:We.listRef)==null?void 0:tt.innerRef)||document).querySelector(`.${Kt}`);if(On===null||Dt===null)return 0;const nn=getComputedStyle(On),Tn=Number.parseFloat(nn.paddingLeft)+Number.parseFloat(nn.paddingRight);return Dt.font=`bold ${nn.font.replace(new RegExp(`\\b${nn.fontWeight}\\b`),"")}`,q.value.reduce((rr,Or)=>{const vr=Dt.measureText(c(Or));return Math.max(vr.width,rr)},0)+Tn},he=()=>{if(!_.value)return 0;const We=window.getComputedStyle(_.value);return Number.parseFloat(We.gap||"6px")},Oe=U(()=>{const We=he();return{maxWidth:`${T.value&&n.maxCollapseTags===1?m.selectionWidth-m.collapseItemWidth-We:m.selectionWidth}px`}}),je=U(()=>({maxWidth:`${m.selectionWidth}px`})),dt=U(()=>xt(n.modelValue)?n.modelValue.length===0&&!m.inputValue:n.filterable?!m.inputValue:!0),pt=U(()=>{var We;const tt=(We=n.placeholder)!=null?We:t("el.select.placeholder");return n.multiple||!ie.value?tt:m.selectedLabel}),Te=U(()=>{var We,tt;return(tt=(We=b.value)==null?void 0:We.popperRef)==null?void 0:tt.contentRef}),ft=U(()=>{if(n.multiple){const We=n.modelValue.length;if(n.modelValue.length>0&&Le.value.has(n.modelValue[We-1])){const{index:tt}=Le.value.get(n.modelValue[We-1]);return tt}}else if(!p(n.modelValue)&&Le.value.has(n.modelValue)){const{index:We}=Le.value.get(n.modelValue);return We}return-1}),Ke=U({get(){return Z.value&&be.value!==!1},set(We){Z.value=We}}),Q=U(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(0,n.maxCollapseTags):m.cachedOptions:[]),_e=U(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(n.maxCollapseTags):[]:[]),{createNewOption:Ae,removeNewOption:ge,selectNewOption:pe,clearAllNewOption:de}=ZMe(n,m),at=()=>{H.value||(m.menuVisibleOnFocus?m.menuVisibleOnFocus=!1:Z.value=!Z.value)},Ee=()=>{m.inputValue.length>0&&!Z.value&&(Z.value=!0),Ae(m.inputValue),Ut(()=>{et(m.inputValue)})},vt=Co(Ee,me.value),et=We=>{m.previousQuery===We||I.value||(m.previousQuery=We,n.filterable&&Yt(n.filterMethod)?n.filterMethod(We):n.filterable&&n.remote&&Yt(n.remoteMethod)&&n.remoteMethod(We),n.defaultFirstOption&&(n.filterable||n.remote)&&q.value.length?Ut(yt):Ut(Vn))},yt=()=>{const We=q.value.filter(Dt=>!Dt.disabled&&Dt.type!=="Group"),tt=We.find(Dt=>Dt.created),bt=We[0];m.hoveringIndex=ln(q.value,tt||bt)},Ht=We=>{rs(n.modelValue,We)||e(Hn,We)},Ot=We=>{e(mn,We),Ht(We),m.previousValue=n.multiple?String(We):We,Ut(()=>{if(n.multiple&&xt(n.modelValue)){const tt=m.cachedOptions.slice(),bt=n.modelValue.map(Dt=>mt(Dt,tt));rs(m.cachedOptions,bt)||(m.cachedOptions=bt)}else Mt(!0)})},ln=(We=[],tt)=>{if(!Mn(tt))return We.indexOf(tt);const bt=n.valueKey;let Dt=-1;return We.some((Kt,fn)=>Vi(Kt,bt)===Vi(tt,bt)?(Dt=fn,!0):!1),Dt},Vt=We=>Mn(We)?Vi(We,n.valueKey):We,kt=()=>{V()},Jt=()=>{m.selectionWidth=Number.parseFloat(window.getComputedStyle(_.value).width)},on=()=>{m.collapseItemWidth=T.value.getBoundingClientRect().width},qn=()=>{var We,tt;(tt=(We=b.value)==null?void 0:We.updatePopper)==null||tt.call(We)},K=()=>{var We,tt;(tt=(We=S.value)==null?void 0:We.updatePopper)==null||tt.call(We)},te=We=>{if(n.multiple){let tt=n.modelValue.slice();const bt=ln(tt,u(We));bt>-1?(tt=[...tt.slice(0,bt),...tt.slice(bt+1)],m.cachedOptions.splice(bt,1),ge(We)):(n.multipleLimit<=0||tt.length<n.multipleLimit)&&(tt=[...tt,u(We)],m.cachedOptions.push(We),pe(We)),Ot(tt),We.created&&et(""),n.filterable&&!n.reserveKeyword&&(m.inputValue="")}else m.selectedLabel=c(We),Ot(u(We)),Z.value=!1,pe(We),We.created||de();Me()},$t=(We,tt)=>{let bt=n.modelValue.slice();const Dt=ln(bt,u(tt));Dt>-1&&!H.value&&(bt=[...n.modelValue.slice(0,Dt),...n.modelValue.slice(Dt+1)],m.cachedOptions.splice(Dt,1),Ot(bt),e("remove-tag",u(tt)),ge(tt)),We.stopPropagation(),Me()},Me=()=>{var We;(We=x.value)==null||We.focus()},le=()=>{var We;if(Z.value){Z.value=!1,Ut(()=>{var tt;return(tt=x.value)==null?void 0:tt.blur()});return}(We=x.value)==null||We.blur()},St=()=>{m.inputValue.length>0?m.inputValue="":Z.value=!1},ht=We=>bq(We,tt=>!m.cachedOptions.some(bt=>u(bt)===tt&&d(bt))),At=We=>{if(n.multiple&&We.code!==Rt.delete&&m.inputValue.length===0){We.preventDefault();const tt=n.modelValue.slice(),bt=ht(tt);if(bt<0)return;const Dt=tt[bt];tt.splice(bt,1);const Kt=m.cachedOptions[bt];m.cachedOptions.splice(bt,1),ge(Kt),Ot(tt),e("remove-tag",Dt)}},nt=()=>{let We;xt(n.modelValue)?We=[]:We=f.value,m.selectedLabel="",Z.value=!1,Ot(We),e("clear"),de(),Me()},_t=(We,tt=void 0)=>{const bt=q.value;if(!["forward","backward"].includes(We)||H.value||bt.length<=0||Ze.value||I.value)return;if(!Z.value)return at();nr(tt)&&(tt=m.hoveringIndex);let Dt=-1;We==="forward"?(Dt=tt+1,Dt>=bt.length&&(Dt=0)):We==="backward"&&(Dt=tt-1,(Dt<0||Dt>=bt.length)&&(Dt=bt.length-1));const Kt=bt[Dt];if(d(Kt)||Kt.type==="Group")return _t(We,Dt);m.hoveringIndex=Dt,Pe(Dt)},jt=()=>{if(Z.value)~m.hoveringIndex&&q.value[m.hoveringIndex]&&te(q.value[m.hoveringIndex]);else return at()},Sn=We=>{m.hoveringIndex=We??-1},Vn=()=>{n.multiple?m.hoveringIndex=q.value.findIndex(We=>n.modelValue.some(tt=>Vt(tt)===Vt(u(We)))):m.hoveringIndex=q.value.findIndex(We=>Vt(u(We))===Vt(n.modelValue))},Je=We=>{if(m.inputValue=We.target.value,n.remote)vt();else return Ee()},Qn=We=>{if(Z.value=!1,z.value){const tt=new FocusEvent("focus",We);k(tt)}},ot=()=>(m.isBeforeHide=!1,Ut(()=>{~ft.value&&Pe(m.hoveringIndex)})),Pe=We=>{C.value.scrollToItem(We)},mt=(We,tt)=>{const bt=Vt(We);if(Ve.value.has(bt)){const{option:Dt}=Ve.value.get(bt);return Dt}if(tt&&tt.length){const Dt=tt.find(Kt=>Vt(u(Kt))===bt);if(Dt)return Dt}return{[l.value.value]:We,[l.value.label]:We}},Mt=(We=!1)=>{if(n.multiple)if(n.modelValue.length>0){const tt=m.cachedOptions.slice();m.cachedOptions.length=0,m.previousValue=n.modelValue.toString();for(const bt of n.modelValue){const Dt=mt(bt,tt);m.cachedOptions.push(Dt)}}else m.cachedOptions=[],m.previousValue=void 0;else if(ie.value){m.previousValue=n.modelValue;const tt=q.value,bt=tt.findIndex(Dt=>Vt(u(Dt))===Vt(n.modelValue));~bt?m.selectedLabel=c(tt[bt]):(!m.selectedLabel||We)&&(m.selectedLabel=Vt(n.modelValue))}else m.selectedLabel="",m.previousValue=void 0;de(),V()};return ct(()=>n.fitInputWidth,()=>{V()}),ct(Z,We=>{We?(n.persistent||V(),et("")):(m.inputValue="",m.previousQuery=null,m.isBeforeHide=!0,Ae("")),e("visible-change",We)}),ct(()=>n.modelValue,(We,tt)=>{var bt;(!We||xt(We)&&We.length===0||n.multiple&&!rs(We.toString(),m.previousValue)||!n.multiple&&Vt(We)!==Vt(m.previousValue))&&Mt(!0),!rs(We,tt)&&n.validateEvent&&((bt=a==null?void 0:a.validate)==null||bt.call(a,"change").catch(Kt=>void 0))},{deep:!0}),ct(()=>n.options,()=>{const We=x.value;(!We||We&&document.activeElement!==We)&&Mt()},{deep:!0,flush:"post"}),ct(()=>q.value,()=>(V(),C.value&&Ut(C.value.resetScrollTop))),Gs(()=>{m.isBeforeHide||ze()}),Gs(()=>{const{valueKey:We,options:tt}=n,bt=new Map;for(const Dt of tt){const Kt=u(Dt);let fn=Kt;if(Mn(fn)&&(fn=Vi(Kt,We)),bt.get(fn))break;bt.set(fn,!0)}}),Rn(()=>{Mt()}),fi(g,kt),fi(_,Jt),fi(C,qn),fi(L,qn),fi(A,K),fi(T,on),{inputId:o,collapseTagSize:fe,currentPlaceholder:pt,expanded:Z,emptyText:be,popupHeight:X,debounce:me,allOptions:F,filteredOptions:q,iconComponent:ce,iconReverse:we,tagStyle:Oe,collapseTagStyle:je,popperSize:v,dropdownMenuVisible:Ke,hasModelValue:ie,shouldShowPlaceholder:dt,selectDisabled:H,selectSize:st,needStatusIcon:se,showClearBtn:ae,states:m,isFocused:z,nsSelect:r,nsInput:i,inputRef:x,menuRef:C,tagMenuRef:A,tooltipRef:b,tagTooltipRef:S,selectRef:g,wrapperRef:L,selectionRef:_,prefixRef:w,suffixRef:M,collapseItemRef:T,popperRef:Te,validateState:He,validateIcon:Ge,showTagList:Q,collapseTagList:_e,debouncedOnInputChange:vt,deleteTag:$t,getLabel:c,getValue:u,getDisabled:d,getValueKey:Vt,handleClear:nt,handleClickOutside:Qn,handleDel:At,handleEsc:St,focus:Me,blur:le,handleMenuEnter:ot,handleResize:kt,resetSelectionWidth:Jt,updateTooltip:qn,updateTagTooltip:K,updateOptions:ze,toggleMenu:at,scrollTo:Pe,onInput:Je,onKeyboardNavigate:_t,onKeyboardSelect:jt,onSelect:te,onHover:Sn,handleCompositionStart:D,handleCompositionEnd:B,handleCompositionUpdate:O}},JMe=Ie({name:"ElSelectV2",components:{ElSelectMenu:jMe,ElTag:eg,ElTooltip:ia,ElIcon:zt},directives:{ClickOutside:xd},props:IMe,emits:PMe,setup(n,{emit:e}){const t=U(()=>{const{modelValue:o,multiple:l}=n,c=l?[]:void 0;return xt(o)?l?o:c:l?c:o}),r=QMe(pr({...bs(n),modelValue:t}),e),{calculatorRef:i,inputStyle:s}=A6();jn(L6,{props:pr({...bs(n),height:r.popupHeight,modelValue:t}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const a=U(()=>n.multiple?r.states.cachedOptions.map(o=>o.label):r.states.selectedLabel);return{...r,modelValue:t,selectedLabel:a,calculatorRef:i,inputStyle:s}}});function eTe(n,e,t,r,i,s){const a=dn("el-tag"),o=dn("el-tooltip"),l=dn("el-icon"),c=dn("el-select-menu"),u=VM("click-outside");return Cn(($(),ue("div",{ref:"selectRef",class:Y([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:d=>n.states.inputHovering=!0,onMouseleave:d=>n.states.inputHovering=!1},[xe(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,placement:n.placement,pure:"",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:d=>n.states.isBeforeHide=!1},{default:Re(()=>[ye("div",{ref:"wrapperRef",class:Y([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:an(n.toggleMenu,["prevent"])},[n.$slots.prefix?($(),ue("div",{key:0,ref:"prefixRef",class:Y(n.nsSelect.e("prefix"))},[Ye(n.$slots,"prefix")],2)):Xe("v-if",!0),ye("div",{ref:"selectionRef",class:Y([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.modelValue.length)])},[n.multiple?Ye(n.$slots,"tag",{key:0,data:n.states.cachedOptions,deleteTag:n.deleteTag,selectDisabled:n.selectDisabled},()=>[($(!0),ue(Bt,null,Fn(n.showTagList,d=>($(),ue("div",{key:n.getValueKey(n.getValue(d)),class:Y(n.nsSelect.e("selected-item"))},[xe(a,{closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Xt(n.tagStyle),onClose:h=>n.deleteTag(h,d)},{default:Re(()=>[ye("span",{class:Y(n.nsSelect.e("tags-text"))},[Ye(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Bn(Ct(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.modelValue.length>n.maxCollapseTags?($(),rt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom","popper-class":n.popperClass,teleported:n.teleported},{default:Re(()=>[ye("div",{ref:"collapseItemRef",class:Y(n.nsSelect.e("selected-item"))},[xe(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,style:Xt(n.collapseTagStyle),"disable-transitions":""},{default:Re(()=>[ye("span",{class:Y(n.nsSelect.e("tags-text"))}," + "+Ct(n.modelValue.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Re(()=>[ye("div",{ref:"tagMenuRef",class:Y(n.nsSelect.e("selection"))},[($(!0),ue(Bt,null,Fn(n.collapseTagList,d=>($(),ue("div",{key:n.getValueKey(n.getValue(d)),class:Y(n.nsSelect.e("selected-item"))},[xe(a,{class:"in-tooltip",closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:h=>n.deleteTag(h,d)},{default:Re(()=>[ye("span",{class:Y(n.nsSelect.e("tags-text"))},[Ye(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Bn(Ct(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","popper-class","teleported"])):Xe("v-if",!0)]):Xe("v-if",!0),ye("div",{class:Y([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Cn(ye("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":d=>n.states.inputValue=d,style:Xt(n.inputStyle),autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":n.expanded,"aria-label":n.ariaLabel,class:Y([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,role:"combobox",readonly:!n.filterable,spellcheck:"false",type:"text",name:n.name,onInput:n.onInput,onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onKeydown:[Dr(an(d=>n.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),Dr(an(d=>n.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),Dr(an(n.onKeyboardSelect,["stop","prevent"]),["enter"]),Dr(an(n.handleEsc,["stop","prevent"]),["esc"]),Dr(an(n.handleDel,["stop"]),["delete"])],onClick:an(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[WM,n.states.inputValue]]),n.filterable?($(),ue("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:Y(n.nsSelect.e("input-calculator")),textContent:Ct(n.states.inputValue)},null,10,["textContent"])):Xe("v-if",!0)],2),n.shouldShowPlaceholder?($(),ue("div",{key:1,class:Y([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?Ye(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[ye("span",null,Ct(n.currentPlaceholder),1)]):($(),ue("span",{key:1},Ct(n.currentPlaceholder),1))],2)):Xe("v-if",!0)],2),ye("div",{ref:"suffixRef",class:Y(n.nsSelect.e("suffix"))},[n.iconComponent?Cn(($(),rt(l,{key:0,class:Y([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.iconReverse])},{default:Re(()=>[($(),rt(Ln(n.iconComponent)))]),_:1},8,["class"])),[[cr,!n.showClearBtn]]):Xe("v-if",!0),n.showClearBtn&&n.clearIcon?($(),rt(l,{key:1,class:Y([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.nsSelect.e("clear")]),onClick:an(n.handleClear,["prevent","stop"])},{default:Re(()=>[($(),rt(Ln(n.clearIcon)))]),_:1},8,["class","onClick"])):Xe("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?($(),rt(l,{key:2,class:Y([n.nsInput.e("icon"),n.nsInput.e("validateIcon"),n.nsInput.is("loading",n.validateState==="validating")])},{default:Re(()=>[($(),rt(Ln(n.validateIcon)))]),_:1},8,["class"])):Xe("v-if",!0)],2)],10,["onClick"])]),content:Re(()=>[xe(c,{ref:"menuRef",data:n.filteredOptions,width:n.popperSize,"hovering-index":n.states.hoveringIndex,"scrollbar-always-on":n.scrollbarAlwaysOn},wo({default:Re(d=>[Ye(n.$slots,"default",Vo(nu(d)))]),_:2},[n.$slots.header?{name:"header",fn:Re(()=>[ye("div",{class:Y(n.nsSelect.be("dropdown","header")),onClick:an(()=>{},["stop"])},[Ye(n.$slots,"header")],10,["onClick"])])}:void 0,n.$slots.loading&&n.loading?{name:"loading",fn:Re(()=>[ye("div",{class:Y(n.nsSelect.be("dropdown","loading"))},[Ye(n.$slots,"loading")],2)])}:n.loading||n.filteredOptions.length===0?{name:"empty",fn:Re(()=>[ye("div",{class:Y(n.nsSelect.be("dropdown","empty"))},[Ye(n.$slots,"empty",{},()=>[ye("span",null,Ct(n.emptyText),1)])],2)])}:void 0,n.$slots.footer?{name:"footer",fn:Re(()=>[ye("div",{class:Y(n.nsSelect.be("dropdown","footer")),onClick:an(()=>{},["stop"])},[Ye(n.$slots,"footer")],10,["onClick"])])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[u,n.handleClickOutside,n.popperRef]])}var tTe=Et(JMe,[["render",eTe],["__file","select.vue"]]);const nTe=bn(tTe),rTe=Tt({animated:Boolean,count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Fe([Number,Object])}}),iTe=Tt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),sTe=Ie({name:"ElSkeletonItem"}),aTe=Ie({...sTe,props:iTe,setup(n){const e=gt("skeleton");return(t,r)=>($(),ue("div",{class:Y([y(e).e("item"),y(e).e(t.variant)])},[t.variant==="image"?($(),rt(y(kpe),{key:0})):Xe("v-if",!0)],2))}});var _C=Et(aTe,[["__file","skeleton-item.vue"]]);const oTe=(n,e=0)=>{if(e===0)return n;const t=Mn(e)&&!!e.initVal,r=ne(t);let i=null;const s=o=>{if(nr(o)){r.value=n.value;return}i&&clearTimeout(i),i=setTimeout(()=>{r.value=n.value},o)},a=o=>{o==="leading"?en(e)?s(e):s(e.leading):Mn(e)?s(e.trailing):r.value=!1};return Rn(()=>a("leading")),ct(()=>n.value,o=>{a(o?"leading":"trailing")}),r},lTe=Ie({name:"ElSkeleton"}),cTe=Ie({...lTe,props:rTe,setup(n,{expose:e}){const t=n,r=gt("skeleton"),i=oTe(yr(t,"loading"),t.throttle);return e({uiLoading:i}),(s,a)=>y(i)?($(),ue("div",Nn({key:0,class:[y(r).b(),y(r).is("animated",s.animated)]},s.$attrs),[($(!0),ue(Bt,null,Fn(s.count,o=>($(),ue(Bt,{key:o},[y(i)?Ye(s.$slots,"template",{key:o},()=>[xe(_C,{class:Y(y(r).is("first")),variant:"p"},null,8,["class"]),($(!0),ue(Bt,null,Fn(s.rows,l=>($(),rt(_C,{key:l,class:Y([y(r).e("paragraph"),y(r).is("last",l===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Xe("v-if",!0)],64))),128))],16)):Ye(s.$slots,"default",Vo(Nn({key:1},s.$attrs)))}});var uTe=Et(cTe,[["__file","skeleton.vue"]]);const dTe=bn(uTe,{SkeletonItem:_C}),fTe=pi(_C),pX=Symbol("sliderContextKey"),hTe=Tt({modelValue:{type:Fe([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:as,inputSize:as,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Fe(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Fe(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Od,default:"top"},marks:{type:Fe(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...aa(["ariaLabel"])}),c3=n=>en(n)||xt(n)&&n.every(en),pTe={[mn]:c3,[is]:c3,[Hn]:c3},mTe=Tt({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Od,default:"top"}}),vTe={[mn]:n=>en(n)},gTe=(n,e,t)=>{const r=ne(),i=ne(!1),s=U(()=>e.value instanceof Function),a=U(()=>s.value&&e.value(n.modelValue)||n.modelValue),o=Co(()=>{t.value&&(i.value=!0)},50),l=Co(()=>{t.value&&(i.value=!1)},50);return{tooltip:r,tooltipVisible:i,formatValue:a,displayTooltip:o,hideTooltip:l}},yTe=(n,e,t)=>{const{disabled:r,min:i,max:s,step:a,showTooltip:o,persistent:l,precision:c,sliderSize:u,formatTooltip:d,emitChange:h,resetSize:f,updateDragging:p}=Lt(pX),{tooltip:m,tooltipVisible:v,formatValue:g,displayTooltip:_,hideTooltip:b}=gTe(n,d,o),S=ne(),x=U(()=>`${(n.modelValue-i.value)/(s.value-i.value)*100}%`),w=U(()=>n.vertical?{bottom:x.value}:{left:x.value}),M=()=>{e.hovering=!0,_()},C=()=>{e.hovering=!1,e.dragging||b()},A=se=>{r.value||(se.preventDefault(),F(se),window.addEventListener("mousemove",W),window.addEventListener("touchmove",W),window.addEventListener("mouseup",q),window.addEventListener("touchend",q),window.addEventListener("contextmenu",q),S.value.focus())},T=se=>{r.value||(e.newPosition=Number.parseFloat(x.value)+se/(s.value-i.value)*100,Z(e.newPosition),h())},I=()=>{T(-a.value)},D=()=>{T(a.value)},B=()=>{T(-a.value*4)},O=()=>{T(a.value*4)},H=()=>{r.value||(Z(0),h())},L=()=>{r.value||(Z(100),h())},z=se=>{let X=!0;switch(se.code){case Rt.left:case Rt.down:I();break;case Rt.right:case Rt.up:D();break;case Rt.home:H();break;case Rt.end:L();break;case Rt.pageDown:B();break;case Rt.pageUp:O();break;default:X=!1;break}X&&se.preventDefault()},k=se=>{let X,ie;return se.type.startsWith("touch")?(ie=se.touches[0].clientY,X=se.touches[0].clientX):(ie=se.clientY,X=se.clientX),{clientX:X,clientY:ie}},F=se=>{e.dragging=!0,e.isClick=!0;const{clientX:X,clientY:ie}=k(se);n.vertical?e.startY=ie:e.startX=X,e.startPosition=Number.parseFloat(x.value),e.newPosition=e.startPosition},W=se=>{if(e.dragging){e.isClick=!1,_(),f();let X;const{clientX:ie,clientY:ae}=k(se);n.vertical?(e.currentY=ae,X=(e.startY-e.currentY)/u.value*100):(e.currentX=ie,X=(e.currentX-e.startX)/u.value*100),e.newPosition=e.startPosition+X,Z(e.newPosition)}},q=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||b(),e.isClick||Z(e.newPosition),h()},0),window.removeEventListener("mousemove",W),window.removeEventListener("touchmove",W),window.removeEventListener("mouseup",q),window.removeEventListener("touchend",q),window.removeEventListener("contextmenu",q))},Z=async se=>{if(se===null||Number.isNaN(+se))return;se<0?se=0:se>100&&(se=100);const X=100/((s.value-i.value)/a.value);let ae=Math.round(se/X)*X*(s.value-i.value)*.01+i.value;ae=Number.parseFloat(ae.toFixed(c.value)),ae!==n.modelValue&&t(mn,ae),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await Ut(),e.dragging&&_(),m.value.updatePopper()};return ct(()=>e.dragging,se=>{p(se)}),Lr(S,"touchstart",A,{passive:!1}),{disabled:r,button:S,tooltip:m,tooltipVisible:v,showTooltip:o,persistent:l,wrapperStyle:w,formatValue:g,handleMouseEnter:M,handleMouseLeave:C,onButtonDown:A,onKeyDown:z,setPosition:Z}},bTe=Ie({name:"ElSliderButton"}),_Te=Ie({...bTe,props:mTe,emits:vTe,setup(n,{expose:e,emit:t}){const r=n,i=gt("slider"),s=pr({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),a=U(()=>u.value?d.value:!1),{disabled:o,button:l,tooltip:c,showTooltip:u,persistent:d,tooltipVisible:h,wrapperStyle:f,formatValue:p,handleMouseEnter:m,handleMouseLeave:v,onButtonDown:g,onKeyDown:_,setPosition:b}=yTe(r,s,t),{hovering:S,dragging:x}=bs(s);return e({onButtonDown:g,onKeyDown:_,setPosition:b,hovering:S,dragging:x}),(w,M)=>($(),ue("div",{ref_key:"button",ref:l,class:Y([y(i).e("button-wrapper"),{hover:y(S),dragging:y(x)}]),style:Xt(y(f)),tabindex:y(o)?-1:0,onMouseenter:y(m),onMouseleave:y(v),onMousedown:y(g),onFocus:y(m),onBlur:y(v),onKeydown:y(_)},[xe(y(ia),{ref_key:"tooltip",ref:c,visible:y(h),placement:w.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":w.tooltipClass,disabled:!y(u),persistent:y(a)},{content:Re(()=>[ye("span",null,Ct(y(p)),1)]),default:Re(()=>[ye("div",{class:Y([y(i).e("button"),{hover:y(S),dragging:y(x)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var x7=Et(_Te,[["__file","button.vue"]]);const STe=Tt({mark:{type:Fe([String,Object]),default:void 0}});var xTe=Ie({name:"ElSliderMarker",props:STe,setup(n){const e=gt("slider"),t=U(()=>Wt(n.mark)?n.mark:n.mark.label),r=U(()=>Wt(n.mark)?void 0:n.mark.style);return()=>tn("div",{class:e.e("marks-text"),style:r.value},t.value)}});const wTe=(n,e,t)=>{const{form:r,formItem:i}=oa(),s=Pr(),a=ne(),o=ne(),l={firstButton:a,secondButton:o},c=U(()=>n.disabled||(r==null?void 0:r.disabled)||!1),u=U(()=>Math.min(e.firstValue,e.secondValue)),d=U(()=>Math.max(e.firstValue,e.secondValue)),h=U(()=>n.range?`${100*(d.value-u.value)/(n.max-n.min)}%`:`${100*(e.firstValue-n.min)/(n.max-n.min)}%`),f=U(()=>n.range?`${100*(u.value-n.min)/(n.max-n.min)}%`:"0%"),p=U(()=>n.vertical?{height:n.height}:{}),m=U(()=>n.vertical?{height:h.value,bottom:f.value}:{width:h.value,left:f.value}),v=()=>{s.value&&(e.sliderSize=s.value[`client${n.vertical?"Height":"Width"}`])},g=D=>{const B=n.min+D*(n.max-n.min)/100;if(!n.range)return a;let O;return Math.abs(u.value-B)<Math.abs(d.value-B)?O=e.firstValue<e.secondValue?"firstButton":"secondButton":O=e.firstValue>e.secondValue?"firstButton":"secondButton",l[O]},_=D=>{const B=g(D);return B.value.setPosition(D),B},b=D=>{e.firstValue=D??n.min,x(n.range?[u.value,d.value]:D??n.min)},S=D=>{e.secondValue=D,n.range&&x([u.value,d.value])},x=D=>{t(mn,D),t(is,D)},w=async()=>{await Ut(),t(Hn,n.range?[u.value,d.value]:n.modelValue)},M=D=>{var B,O,H,L,z,k;if(c.value||e.dragging)return;v();let F=0;if(n.vertical){const W=(H=(O=(B=D.touches)==null?void 0:B.item(0))==null?void 0:O.clientY)!=null?H:D.clientY;F=(s.value.getBoundingClientRect().bottom-W)/e.sliderSize*100}else{const W=(k=(z=(L=D.touches)==null?void 0:L.item(0))==null?void 0:z.clientX)!=null?k:D.clientX,q=s.value.getBoundingClientRect().left;F=(W-q)/e.sliderSize*100}if(!(F<0||F>100))return _(F)};return{elFormItem:i,slider:s,firstButton:a,secondButton:o,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:p,barStyle:m,resetSize:v,setPosition:_,emitChange:w,onSliderWrapperPrevent:D=>{var B,O;((B=l.firstButton.value)!=null&&B.dragging||(O=l.secondButton.value)!=null&&O.dragging)&&D.preventDefault()},onSliderClick:D=>{M(D)&&w()},onSliderDown:async D=>{const B=M(D);B&&(await Ut(),B.value.onButtonDown(D))},onSliderMarkerDown:D=>{if(c.value||e.dragging)return;_(D)&&w()},setFirstValue:b,setSecondValue:S}},CTe=(n,e,t,r)=>({stops:U(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const a=(n.max-n.min)/n.step,o=100*n.step/(n.max-n.min),l=Array.from({length:a-1}).map((c,u)=>(u+1)*o);return n.range?l.filter(c=>c<100*(t.value-n.min)/(n.max-n.min)||c>100*(r.value-n.min)/(n.max-n.min)):l.filter(c=>c>100*(e.firstValue-n.min)/(n.max-n.min))}),getStopStyle:a=>n.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),MTe=n=>U(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((t,r)=>t-r).filter(t=>t<=n.max&&t>=n.min).map(t=>({point:t,position:(t-n.min)*100/(n.max-n.min),mark:n.marks[t]})):[]),TTe=(n,e,t,r,i,s)=>{const a=c=>{i(mn,c),i(is,c)},o=()=>n.range?![t.value,r.value].every((c,u)=>c===e.oldValue[u]):n.modelValue!==e.oldValue,l=()=>{var c,u;n.min>n.max&&Gi("Slider","min should not be greater than max.");const d=n.modelValue;n.range&&xt(d)?d[1]<n.min?a([n.min,n.min]):d[0]>n.max?a([n.max,n.max]):d[0]<n.min?a([n.min,d[1]]):d[1]>n.max?a([d[0],n.max]):(e.firstValue=d[0],e.secondValue=d[1],o()&&(n.validateEvent&&((c=s==null?void 0:s.validate)==null||c.call(s,"change").catch(h=>void 0)),e.oldValue=d.slice())):!n.range&&en(d)&&!Number.isNaN(d)&&(d<n.min?a(n.min):d>n.max?a(n.max):(e.firstValue=d,o()&&(n.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(h=>void 0)),e.oldValue=d)))};l(),ct(()=>e.dragging,c=>{c||l()}),ct(()=>n.modelValue,(c,u)=>{e.dragging||xt(c)&&xt(u)&&c.every((d,h)=>d===u[h])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),ct(()=>[n.min,n.max],()=>{l()})},ATe=(n,e,t)=>{const r=ne();return Rn(async()=>{n.range?(xt(n.modelValue)?(e.firstValue=Math.max(n.min,n.modelValue[0]),e.secondValue=Math.min(n.max,n.modelValue[1])):(e.firstValue=n.min,e.secondValue=n.max),e.oldValue=[e.firstValue,e.secondValue]):(!en(n.modelValue)||Number.isNaN(n.modelValue)?e.firstValue=n.min:e.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),e.oldValue=e.firstValue),Lr(window,"resize",t),await Ut(),t()}),{sliderWrapper:r}},ETe=Ie({name:"ElSlider"}),ITe=Ie({...ETe,props:hTe,emits:pTe,setup(n,{expose:e,emit:t}){const r=n,i=gt("slider"),{t:s}=sr(),a=pr({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:f,runwayStyle:p,barStyle:m,resetSize:v,emitChange:g,onSliderWrapperPrevent:_,onSliderClick:b,onSliderDown:S,onSliderMarkerDown:x,setFirstValue:w,setSecondValue:M}=wTe(r,a,t),{stops:C,getStopStyle:A}=CTe(r,a,h,f),{inputId:T,isLabeledByFormItem:I}=Vl(r,{formItemContext:o}),D=Qi(),B=U(()=>r.inputSize||D.value),O=U(()=>r.ariaLabel||s("el.slider.defaultLabel",{min:r.min,max:r.max})),H=U(()=>r.range?r.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):O.value),L=U(()=>r.formatValueText?r.formatValueText(se.value):`${se.value}`),z=U(()=>r.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),k=U(()=>r.formatValueText?r.formatValueText(X.value):`${X.value}`),F=U(()=>[i.b(),i.m(D.value),i.is("vertical",r.vertical),{[i.m("with-input")]:r.showInput}]),W=MTe(r);TTe(r,a,h,f,t,o);const q=U(()=>{const ce=[r.min,r.max,r.step].map(we=>{const He=`${we}`.split(".")[1];return He?He.length:0});return Math.max.apply(null,ce)}),{sliderWrapper:Z}=ATe(r,a,v),{firstValue:se,secondValue:X,sliderSize:ie}=bs(a),ae=ce=>{a.dragging=ce};return Lr(Z,"touchstart",_,{passive:!1}),Lr(Z,"touchmove",_,{passive:!1}),jn(pX,{...bs(r),sliderSize:ie,disabled:d,precision:q,emitChange:g,resetSize:v,updateDragging:ae}),e({onSliderClick:b}),(ce,we)=>{var He,Ge;return $(),ue("div",{id:ce.range?y(T):void 0,ref_key:"sliderWrapper",ref:Z,class:Y(y(F)),role:ce.range?"group":void 0,"aria-label":ce.range&&!y(I)?y(O):void 0,"aria-labelledby":ce.range&&y(I)?(He=y(o))==null?void 0:He.labelId:void 0},[ye("div",{ref_key:"slider",ref:l,class:Y([y(i).e("runway"),{"show-input":ce.showInput&&!ce.range},y(i).is("disabled",y(d))]),style:Xt(y(p)),onMousedown:y(S),onTouchstartPassive:y(S)},[ye("div",{class:Y(y(i).e("bar")),style:Xt(y(m))},null,6),xe(x7,{id:ce.range?void 0:y(T),ref_key:"firstButton",ref:c,"model-value":y(se),vertical:ce.vertical,"tooltip-class":ce.tooltipClass,placement:ce.placement,role:"slider","aria-label":ce.range||!y(I)?y(H):void 0,"aria-labelledby":!ce.range&&y(I)?(Ge=y(o))==null?void 0:Ge.labelId:void 0,"aria-valuemin":ce.min,"aria-valuemax":ce.range?y(X):ce.max,"aria-valuenow":y(se),"aria-valuetext":y(L),"aria-orientation":ce.vertical?"vertical":"horizontal","aria-disabled":y(d),"onUpdate:modelValue":y(w)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),ce.range?($(),rt(x7,{key:0,ref_key:"secondButton",ref:u,"model-value":y(X),vertical:ce.vertical,"tooltip-class":ce.tooltipClass,placement:ce.placement,role:"slider","aria-label":y(z),"aria-valuemin":y(se),"aria-valuemax":ce.max,"aria-valuenow":y(X),"aria-valuetext":y(k),"aria-orientation":ce.vertical?"vertical":"horizontal","aria-disabled":y(d),"onUpdate:modelValue":y(M)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Xe("v-if",!0),ce.showStops?($(),ue("div",{key:1},[($(!0),ue(Bt,null,Fn(y(C),(me,be)=>($(),ue("div",{key:be,class:Y(y(i).e("stop")),style:Xt(y(A)(me))},null,6))),128))])):Xe("v-if",!0),y(W).length>0?($(),ue(Bt,{key:2},[ye("div",null,[($(!0),ue(Bt,null,Fn(y(W),(me,be)=>($(),ue("div",{key:be,style:Xt(y(A)(me.position)),class:Y([y(i).e("stop"),y(i).e("marks-stop")])},null,6))),128))]),ye("div",{class:Y(y(i).e("marks"))},[($(!0),ue(Bt,null,Fn(y(W),(me,be)=>($(),rt(y(xTe),{key:be,mark:me.mark,style:Xt(y(A)(me.position)),onMousedown:an(oe=>y(x)(me.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):Xe("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),ce.showInput&&!ce.range?($(),rt(y(KY),{key:0,ref:"input","model-value":y(se),class:Y(y(i).e("input")),step:ce.step,disabled:y(d),controls:ce.showInputControls,min:ce.min,max:ce.max,precision:y(q),debounce:ce.debounce,size:y(B),"onUpdate:modelValue":y(w),onChange:y(g)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):Xe("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var RTe=Et(ITe,[["__file","slider.vue"]]);const PTe=bn(RTe),DTe=Tt({prefixCls:{type:String}}),w7=Ie({name:"ElSpaceItem",props:DTe,setup(n,{slots:e}){const t=gt("space"),r=U(()=>`${n.prefixCls||t.b()}__item`);return()=>tn("div",{class:r.value},Ye(e,"default"))}}),C7={small:8,default:12,large:16};function LTe(n){const e=gt("space"),t=U(()=>[e.b(),e.m(n.direction),n.class]),r=ne(0),i=ne(0),s=U(()=>{const o=n.wrap||n.fill?{flexWrap:"wrap"}:{},l={alignItems:n.alignment},c={rowGap:`${i.value}px`,columnGap:`${r.value}px`};return[o,l,c,n.style]}),a=U(()=>n.fill?{flexGrow:1,minWidth:`${n.fillRatio}%`}:{});return Gs(()=>{const{size:o="small",wrap:l,direction:c,fill:u}=n;if(xt(o)){const[d=0,h=0]=o;r.value=d,i.value=h}else{let d;en(o)?d=o:d=C7[o||"small"]||C7.small,(l||u)&&c==="horizontal"?r.value=i.value=d:c==="horizontal"?(r.value=d,i.value=0):(i.value=d,r.value=0)}}),{classes:t,containerStyle:s,itemStyle:a}}const kTe=Tt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Fe([String,Object,Array]),default:""},style:{type:Fe([String,Array,Object]),default:""},alignment:{type:Fe(String),default:"center"},prefixCls:{type:String},spacer:{type:Fe([Object,String,Number,Array]),default:null,validator:n=>Kr(n)||en(n)||Wt(n)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:pu,validator:n=>en(n)||xt(n)&&n.length===2&&n.every(en)}}),OTe=Ie({name:"ElSpace",props:kTe,setup(n,{slots:e}){const{classes:t,containerStyle:r,itemStyle:i}=LTe(n);function s(a,o="",l=[]){const{prefixCls:c}=n;return a.forEach((u,d)=>{HI(u)?xt(u.children)&&u.children.forEach((h,f)=>{HI(h)&&xt(h.children)?s(h.children,`${o+f}-`,l):Kr(h)&&(h==null?void 0:h.type)===Yi?l.push(h):l.push(xe(w7,{style:i.value,prefixCls:c,key:`nested-${o+f}`},{default:()=>[h]},pl.PROPS|pl.STYLE,["style","prefixCls"]))}):Eye(u)&&l.push(xe(w7,{style:i.value,prefixCls:c,key:`LoopKey${o+d}`},{default:()=>[u]},pl.PROPS|pl.STYLE,["style","prefixCls"]))}),l}return()=>{var a;const{spacer:o,direction:l}=n,c=Ye(e,"default",{key:0},()=>[]);if(((a=c.children)!=null?a:[]).length===0)return null;if(xt(c.children)){let u=s(c.children);if(o){const d=u.length-1;u=u.reduce((h,f,p)=>{const m=[...h,f];return p!==d&&m.push(xe("span",{style:[i.value,l==="vertical"?"width: 100%":null],key:p},[Kr(o)?o:Bn(o,pl.TEXT)],pl.STYLE)),m},[])}return xe("div",{class:t.value,style:r.value},u,pl.STYLE|pl.CLASS)}return c.children}}}),NTe=bn(OTe),BTe=Tt({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Fe([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Fe([String,Object,Array])}}),FTe=Ie({name:"ElStatistic"}),zTe=Ie({...FTe,props:BTe,setup(n,{expose:e}){const t=n,r=gt("statistic"),i=U(()=>{const{value:s,formatter:a,precision:o,decimalSeparator:l,groupSeparator:c}=t;if(Yt(a))return a(s);if(!en(s)||Number.isNaN(s))return s;let[u,d=""]=String(s).split(".");return d=d.padEnd(o,"0").slice(0,o>0?o:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:i}),(s,a)=>($(),ue("div",{class:Y(y(r).b())},[s.$slots.title||s.title?($(),ue("div",{key:0,class:Y(y(r).e("head"))},[Ye(s.$slots,"title",{},()=>[Bn(Ct(s.title),1)])],2)):Xe("v-if",!0),ye("div",{class:Y(y(r).e("content"))},[s.$slots.prefix||s.prefix?($(),ue("div",{key:0,class:Y(y(r).e("prefix"))},[Ye(s.$slots,"prefix",{},()=>[ye("span",null,Ct(s.prefix),1)])],2)):Xe("v-if",!0),ye("span",{class:Y(y(r).e("number")),style:Xt(s.valueStyle)},Ct(y(i)),7),s.$slots.suffix||s.suffix?($(),ue("div",{key:1,class:Y(y(r).e("suffix"))},[Ye(s.$slots,"suffix",{},()=>[ye("span",null,Ct(s.suffix),1)])],2)):Xe("v-if",!0)],2)],2))}});var UTe=Et(zTe,[["__file","statistic.vue"]]);const mX=bn(UTe),HTe=Tt({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Fe([Number,Object]),default:0},valueStyle:{type:Fe([String,Object,Array])}}),VTe={finish:()=>!0,[Hn]:n=>en(n)},$Te=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],M7=n=>en(n)?new Date(n).getTime():n.valueOf(),T7=(n,e)=>{let t=n;const r=/\[([^\]]*)]/g;return $Te.reduce((s,[a,o])=>{const l=new RegExp(`${a}+(?![^\\[\\]]*\\])`,"g");if(l.test(s)){const c=Math.floor(t/o);return t-=c*o,s.replace(l,u=>String(c).padStart(u.length,"0"))}return s},e).replace(r,"$1")},GTe=Ie({name:"ElCountdown"}),WTe=Ie({...GTe,props:HTe,emits:VTe,setup(n,{expose:e,emit:t}){const r=n;let i;const s=ne(0),a=U(()=>T7(s.value,r.format)),o=u=>T7(u,r.format),l=()=>{i&&(Zp(i),i=void 0)},c=()=>{const u=M7(r.value),d=()=>{let h=u-Date.now();t(Hn,h),h<=0?(h=0,l(),t("finish")):i=th(d),s.value=h};i=th(d)};return Rn(()=>{s.value=M7(r.value)-Date.now(),ct(()=>[r.value,r.format],()=>{l(),c()},{immediate:!0})}),br(()=>{l()}),e({displayValue:a}),(u,d)=>($(),rt(y(mX),{value:s.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:o},wo({_:2},[Fn(u.$slots,(h,f)=>({name:f,fn:Re(()=>[Ye(u.$slots,f)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var qTe=Et(WTe,[["__file","countdown.vue"]]);const KTe=bn(qTe),YTe=Tt({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),XTe={[Hn]:(n,e)=>[n,e].every(en)},vX="ElSteps",jTe=Ie({name:"ElSteps"}),ZTe=Ie({...jTe,props:YTe,emits:XTe,setup(n,{emit:e}){const t=n,r=gt("steps"),{children:i,addChild:s,removeChild:a,ChildrenSorter:o}=lT(Dn(),"ElStep");return ct(i,()=>{i.value.forEach((l,c)=>{l.setIndex(c)})}),jn(vX,{props:t,steps:i,addStep:s,removeStep:a}),ct(()=>t.active,(l,c)=>{e(Hn,l,c)}),(l,c)=>($(),ue("div",{class:Y([y(r).b(),y(r).m(l.simple?"simple":l.direction)])},[Ye(l.$slots,"default"),xe(y(o))],2))}});var QTe=Et(ZTe,[["__file","steps.vue"]]);const JTe=Tt({title:{type:String,default:""},icon:{type:Ar},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),eAe=Ie({name:"ElStep"}),tAe=Ie({...eAe,props:JTe,setup(n){const e=n,t=gt("step"),r=ne(-1),i=ne({}),s=ne(""),a=Lt(vX),o=Dn();Rn(()=>{ct([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([w])=>{S(w)},{immediate:!0})});const l=U(()=>e.status||s.value),c=U(()=>{const w=a.steps.value[r.value-1];return w?w.currentStatus:"wait"}),u=U(()=>a.props.alignCenter),d=U(()=>a.props.direction==="vertical"),h=U(()=>a.props.simple),f=U(()=>a.steps.value.length),p=U(()=>{var w;return((w=a.steps.value[f.value-1])==null?void 0:w.uid)===o.uid}),m=U(()=>h.value?"":a.props.space),v=U(()=>[t.b(),t.is(h.value?"simple":a.props.direction),t.is("flex",p.value&&!m.value&&!u.value),t.is("center",u.value&&!d.value&&!h.value)]),g=U(()=>{const w={flexBasis:en(m.value)?`${m.value}px`:m.value?m.value:`${100/(f.value-(u.value?0:1))}%`};return d.value||p.value&&(w.maxWidth=`${100/f.value}%`),w}),_=w=>{r.value=w},b=w=>{const M=w==="wait",C={transitionDelay:`${M?"-":""}${150*r.value}ms`},A=w===a.props.processStatus||M?0:100;C.borderWidth=A&&!h.value?"1px":0,C[a.props.direction==="vertical"?"height":"width"]=`${A}%`,i.value=C},S=w=>{w>r.value?s.value=a.props.finishStatus:w===r.value&&c.value!=="error"?s.value=a.props.processStatus:s.value="wait";const M=a.steps.value[r.value-1];M&&M.calcProgress(s.value)},x=pr({uid:o.uid,getVnode:()=>o.vnode,currentStatus:l,setIndex:_,calcProgress:b});return a.addStep(x),br(()=>{a.removeStep(x)}),(w,M)=>($(),ue("div",{style:Xt(y(g)),class:Y(y(v))},[Xe(" icon & line "),ye("div",{class:Y([y(t).e("head"),y(t).is(y(l))])},[y(h)?Xe("v-if",!0):($(),ue("div",{key:0,class:Y(y(t).e("line"))},[ye("i",{class:Y(y(t).e("line-inner")),style:Xt(i.value)},null,6)],2)),ye("div",{class:Y([y(t).e("icon"),y(t).is(w.icon||w.$slots.icon?"icon":"text")])},[Ye(w.$slots,"icon",{},()=>[w.icon?($(),rt(y(zt),{key:0,class:Y(y(t).e("icon-inner"))},{default:Re(()=>[($(),rt(Ln(w.icon)))]),_:1},8,["class"])):y(l)==="success"?($(),rt(y(zt),{key:1,class:Y([y(t).e("icon-inner"),y(t).is("status")])},{default:Re(()=>[xe(y($_))]),_:1},8,["class"])):y(l)==="error"?($(),rt(y(zt),{key:2,class:Y([y(t).e("icon-inner"),y(t).is("status")])},{default:Re(()=>[xe(y(Bl))]),_:1},8,["class"])):y(h)?Xe("v-if",!0):($(),ue("div",{key:3,class:Y(y(t).e("icon-inner"))},Ct(r.value+1),3))])],2)],2),Xe(" title & description "),ye("div",{class:Y(y(t).e("main"))},[ye("div",{class:Y([y(t).e("title"),y(t).is(y(l))])},[Ye(w.$slots,"title",{},()=>[Bn(Ct(w.title),1)])],2),y(h)?($(),ue("div",{key:0,class:Y(y(t).e("arrow"))},null,2)):($(),ue("div",{key:1,class:Y([y(t).e("description"),y(t).is(y(l))])},[Ye(w.$slots,"description",{},()=>[Bn(Ct(w.description),1)])],2))],2)],6))}});var gX=Et(tAe,[["__file","item.vue"]]);const nAe=bn(QTe,{Step:gX}),rAe=pi(gX),yX=n=>["",...pu].includes(n),iAe=Tt({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:yX},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:Ar},activeActionIcon:{type:Ar},activeIcon:{type:Ar},inactiveIcon:{type:Ar},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Fe(Function)},id:String,tabindex:{type:[String,Number]},...aa(["ariaLabel"])}),sAe={[mn]:n=>Cr(n)||Wt(n)||en(n),[Hn]:n=>Cr(n)||Wt(n)||en(n),[is]:n=>Cr(n)||Wt(n)||en(n)},bX="ElSwitch",aAe=Ie({name:bX}),oAe=Ie({...aAe,props:iAe,emits:sAe,setup(n,{expose:e,emit:t}){const r=n,{formItem:i}=oa(),s=Qi(),a=gt("switch"),{inputId:o}=Vl(r,{formItemContext:i}),l=la(U(()=>r.loading)),c=ne(r.modelValue!==!1),u=ne(),d=ne(),h=U(()=>[a.b(),a.m(s.value),a.is("disabled",l.value),a.is("checked",g.value)]),f=U(()=>[a.e("label"),a.em("label","left"),a.is("active",!g.value)]),p=U(()=>[a.e("label"),a.em("label","right"),a.is("active",g.value)]),m=U(()=>({width:wi(r.width)}));ct(()=>r.modelValue,()=>{c.value=!0});const v=U(()=>c.value?r.modelValue:!1),g=U(()=>v.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(v.value)||(t(mn,r.inactiveValue),t(Hn,r.inactiveValue),t(is,r.inactiveValue)),ct(g,x=>{var w;u.value.checked=x,r.validateEvent&&((w=i==null?void 0:i.validate)==null||w.call(i,"change").catch(M=>void 0))});const _=()=>{const x=g.value?r.inactiveValue:r.activeValue;t(mn,x),t(Hn,x),t(is,x),Ut(()=>{u.value.checked=g.value})},b=()=>{if(l.value)return;const{beforeChange:x}=r;if(!x){_();return}const w=x();[Kp(w),Cr(w)].includes(!0)||Gi(bX,"beforeChange must return type `Promise<boolean>` or `boolean`"),Kp(w)?w.then(C=>{C&&_()}).catch(C=>{}):w&&_()},S=()=>{var x,w;(w=(x=u.value)==null?void 0:x.focus)==null||w.call(x)};return Rn(()=>{u.value.checked=g.value}),e({focus:S,checked:g}),(x,w)=>($(),ue("div",{class:Y(y(h)),onClick:an(b,["prevent"])},[ye("input",{id:y(o),ref_key:"input",ref:u,class:Y(y(a).e("input")),type:"checkbox",role:"switch","aria-checked":y(g),"aria-disabled":y(l),"aria-label":x.ariaLabel,name:x.name,"true-value":x.activeValue,"false-value":x.inactiveValue,disabled:y(l),tabindex:x.tabindex,onChange:_,onKeydown:Dr(b,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!x.inlinePrompt&&(x.inactiveIcon||x.inactiveText)?($(),ue("span",{key:0,class:Y(y(f))},[x.inactiveIcon?($(),rt(y(zt),{key:0},{default:Re(()=>[($(),rt(Ln(x.inactiveIcon)))]),_:1})):Xe("v-if",!0),!x.inactiveIcon&&x.inactiveText?($(),ue("span",{key:1,"aria-hidden":y(g)},Ct(x.inactiveText),9,["aria-hidden"])):Xe("v-if",!0)],2)):Xe("v-if",!0),ye("span",{ref_key:"core",ref:d,class:Y(y(a).e("core")),style:Xt(y(m))},[x.inlinePrompt?($(),ue("div",{key:0,class:Y(y(a).e("inner"))},[x.activeIcon||x.inactiveIcon?($(),rt(y(zt),{key:0,class:Y(y(a).is("icon"))},{default:Re(()=>[($(),rt(Ln(y(g)?x.activeIcon:x.inactiveIcon)))]),_:1},8,["class"])):x.activeText||x.inactiveText?($(),ue("span",{key:1,class:Y(y(a).is("text")),"aria-hidden":!y(g)},Ct(y(g)?x.activeText:x.inactiveText),11,["aria-hidden"])):Xe("v-if",!0)],2)):Xe("v-if",!0),ye("div",{class:Y(y(a).e("action"))},[x.loading?($(),rt(y(zt),{key:0,class:Y(y(a).is("loading"))},{default:Re(()=>[xe(y(iu))]),_:1},8,["class"])):y(g)?Ye(x.$slots,"active-action",{key:1},()=>[x.activeActionIcon?($(),rt(y(zt),{key:0},{default:Re(()=>[($(),rt(Ln(x.activeActionIcon)))]),_:1})):Xe("v-if",!0)]):y(g)?Xe("v-if",!0):Ye(x.$slots,"inactive-action",{key:2},()=>[x.inactiveActionIcon?($(),rt(y(zt),{key:0},{default:Re(()=>[($(),rt(Ln(x.inactiveActionIcon)))]),_:1})):Xe("v-if",!0)])],2)],6),!x.inlinePrompt&&(x.activeIcon||x.activeText)?($(),ue("span",{key:1,class:Y(y(p))},[x.activeIcon?($(),rt(y(zt),{key:0},{default:Re(()=>[($(),rt(Ln(x.activeIcon)))]),_:1})):Xe("v-if",!0),!x.activeIcon&&x.activeText?($(),ue("span",{key:1,"aria-hidden":!y(g)},Ct(x.activeText),9,["aria-hidden"])):Xe("v-if",!0)],2)):Xe("v-if",!0)],10,["onClick"]))}});var lAe=Et(oAe,[["__file","switch.vue"]]);const cAe=bn(lAe),u3=function(n){var e;return(e=n.target)==null?void 0:e.closest("td")},uAe=function(n,e,t,r,i){if(!e&&!r&&(!i||xt(i)&&!i.length))return n;Wt(t)?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const s=r?null:function(o,l){return i?_q(Is(i),c=>Wt(c)?Vi(o,c):c(o,l,n)):(e!=="$key"&&Mn(o)&&"$value"in o&&(o=o.$value),[Mn(o)?e?Vi(o,e):null:o])},a=function(o,l){var c,u,d,h,f,p;if(r)return r(o.value,l.value);for(let m=0,v=(u=(c=o.key)==null?void 0:c.length)!=null?u:0;m<v;m++){if(((d=o.key)==null?void 0:d[m])<((h=l.key)==null?void 0:h[m]))return-1;if(((f=o.key)==null?void 0:f[m])>((p=l.key)==null?void 0:p[m]))return 1}return 0};return n.map((o,l)=>({value:o,index:l,key:s?s(o,l):null})).sort((o,l)=>{let c=a(o,l);return c||(c=o.index-l.index),c*+t}).map(o=>o.value)},_X=function(n,e){let t=null;return n.columns.forEach(r=>{r.id===e&&(t=r)}),t},dAe=function(n,e){let t=null;for(let r=0;r<n.columns.length;r++){const i=n.columns[r];if(i.columnKey===e){t=i;break}}return t||Gi("ElTable",`No column matching with column-key: ${e}`),t},A7=function(n,e,t){const r=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return r?_X(n,r[0]):null},ea=(n,e)=>{if(!n)throw new Error("Row is required when get row identity");if(Wt(e)){if(!e.includes("."))return`${n[e]}`;const t=e.split(".");let r=n;for(const i of t)r=r[i];return`${r}`}else if(Yt(e))return e.call(null,n);return""},Tv=function(n,e,t=!1,r="children"){const i=n||[],s={};return i.forEach((a,o)=>{if(s[ea(a,e)]={row:a,index:o},t){const l=a[r];xt(l)&&Object.assign(s,Tv(l,e,!0,r))}}),s};function fAe(n,e){const t={};let r;for(r in n)t[r]=n[r];for(r in e)if(fr(e,r)){const i=e[r];nr(i)||(t[r]=i)}return t}function B6(n){return n===""||nr(n)||(n=Number.parseInt(n,10),Number.isNaN(n)&&(n="")),n}function SX(n){return n===""||nr(n)||(n=B6(n),Number.isNaN(n)&&(n=80)),n}function hAe(n){return en(n)?n:Wt(n)?/^\d+(?:px)?$/.test(n)?Number.parseInt(n,10):n:null}function pAe(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function SC(n,e,t,r,i,s,a){let o=s??0,l=!1;const u=(()=>{if(!a)return n.indexOf(e);const m=ea(e,a);return n.findIndex(v=>ea(v,a)===m)})(),d=u!==-1,h=i==null?void 0:i.call(null,e,o),f=m=>{m==="add"?n.push(e):n.splice(u,1),l=!0},p=m=>{let v=0;const g=(r==null?void 0:r.children)&&m[r.children];return g&&xt(g)&&(v+=g.length,g.forEach(_=>{v+=p(_)})),v};return(!i||h)&&(Cr(t)?t&&!d?f("add"):!t&&d&&f("remove"):f(d?"remove":"add")),!(r!=null&&r.checkStrictly)&&(r!=null&&r.children)&&xt(e[r.children])&&e[r.children].forEach(m=>{const v=SC(n,m,t??!d,r,i,o+1,a);o+=p(m)+1,v&&(l=v)}),l}function mAe(n,e,t="children",r="hasChildren",i=!1){const s=o=>!(xt(o)&&o.length);function a(o,l,c){e(o,l,c),l.forEach(u=>{if(u[r]&&i){e(u,null,c+1);return}const d=u[t];s(d)||a(u,d,c+1)})}n.forEach(o=>{if(o[r]&&i){e(o,null,0);return}const l=o[t];s(l)||a(o,l,0)})}const vAe=(n,e,t,r)=>{const i={strategy:"fixed",...n.popperOptions},s=Yt(r==null?void 0:r.tooltipFormatter)?r.tooltipFormatter({row:t,column:r,cellValue:B1(t,r.property).value}):void 0;return Kr(s)?{slotContent:s,content:null,...n,popperOptions:i}:{slotContent:null,content:s??e,...n,popperOptions:i}};let oo=null;function gAe(n,e,t,r,i,s){var a;const o=vAe(n,e,t,r),l={...o,slotContent:void 0};if((oo==null?void 0:oo.trigger)===i){const p=(a=oo.vm)==null?void 0:a.component;Sq(p==null?void 0:p.props,l),p&&o.slotContent&&(p.slots.content=()=>[o.slotContent]);return}oo==null||oo();const c=s==null?void 0:s.refs.tableWrapper,u=c==null?void 0:c.dataset.prefix,d=xe(ia,{virtualTriggering:!0,virtualRef:i,appendTo:c,placement:"top",transition:"none",offset:0,hideAfter:0,...l},o.slotContent?{content:()=>o.slotContent}:void 0);d.appContext={...s.appContext,...s};const h=document.createElement("div");Jf(d,h),d.component.exposed.onOpen();const f=c==null?void 0:c.querySelector(`.${u}-scrollbar__wrap`);oo=()=>{Jf(null,h),f==null||f.removeEventListener("scroll",oo),oo=null},oo.trigger=i??void 0,oo.vm=d,f==null||f.addEventListener("scroll",oo)}function xX(n){return n.children?_q(n.children,xX):[n]}function E7(n,e){return n+e.colSpan}const wX=(n,e,t,r)=>{let i=0,s=n;const a=t.states.columns.value;if(r){const l=xX(r[n]);i=a.slice(0,a.indexOf(l[0])).reduce(E7,0),s=i+l.reduce(E7,0)-1}else i=n;let o;switch(e){case"left":s<t.states.fixedLeafColumnsLength.value&&(o="left");break;case"right":i>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right");break;default:s<t.states.fixedLeafColumnsLength.value?o="left":i>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right")}return o?{direction:o,start:i,after:s}:{}},F6=(n,e,t,r,i,s=0)=>{const a=[],{direction:o,start:l,after:c}=wX(e,t,r,i);if(o){const u=o==="left";a.push(`${n}-fixed-column--${o}`),u&&c+s===r.states.fixedLeafColumnsLength.value-1?a.push("is-last-column"):!u&&l-s===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&a.push("is-first-column")}return a};function I7(n,e){return n+(U_(e.realWidth)||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const z6=(n,e,t,r)=>{const{direction:i,start:s=0,after:a=0}=wX(n,e,t,r);if(!i)return;const o={},l=i==="left",c=t.states.columns.value;return l?o.left=c.slice(0,s).reduce(I7,0):o.right=c.slice(a+1).reverse().reduce(I7,0),o},ig=(n,e)=>{n&&(Number.isNaN(n[e])||(n[e]=`${n[e]}px`))};function yAe(n){const e=Dn(),t=ne(!1),r=ne([]);return{updateExpandRows:()=>{const l=n.data.value||[],c=n.rowKey.value;if(t.value)r.value=l.slice();else if(c){const u=Tv(r.value,c);r.value=l.reduce((d,h)=>{const f=ea(h,c);return u[f]&&d.push(h),d},[])}else r.value=[]},toggleRowExpansion:(l,c)=>{SC(r.value,l,c,void 0,void 0,void 0,n.rowKey.value)&&e.emit("expand-change",l,r.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=n.data.value||[],u=n.rowKey.value,d=Tv(c,u);r.value=l.reduce((h,f)=>{const p=d[f];return p&&h.push(p.row),h},[])},isRowExpanded:l=>{const c=n.rowKey.value;return c?!!Tv(r.value,c)[ea(l,c)]:r.value.includes(l)},states:{expandRows:r,defaultExpandAll:t}}}function bAe(n){const e=Dn(),t=ne(null),r=ne(null),i=c=>{e.store.assertRowKey(),t.value=c,a(c)},s=()=>{t.value=null},a=c=>{var u;const{data:d,rowKey:h}=n;let f=null;h.value&&(f=(u=(y(d)||[]).find(p=>ea(p,h.value)===c))!=null?u:null),r.value=f??null,e.emit("current-change",r.value,null)};return{setCurrentRowKey:i,restoreCurrentRowKey:s,setCurrentRowByKey:a,updateCurrentRow:c=>{const u=r.value;if(c&&c!==u){r.value=c,e.emit("current-change",r.value,u);return}!c&&u&&(r.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=n.rowKey.value,u=n.data.value||[],d=r.value;if(d&&!u.includes(d)){if(c){const h=ea(d,c);a(h)}else r.value=null;U_(r.value)&&e.emit("current-change",null,d)}else t.value&&(a(t.value),s())},states:{_currentRowKey:t,currentRow:r}}}function _Ae(n){const e=ne([]),t=ne({}),r=ne(16),i=ne(!1),s=ne({}),a=ne("hasChildren"),o=ne("children"),l=ne(!1),c=Dn(),u=U(()=>{if(!n.rowKey.value)return{};const S=n.data.value||[];return h(S)}),d=U(()=>{const S=n.rowKey.value,x=Object.keys(s.value),w={};return x.length&&x.forEach(M=>{if(s.value[M].length){const C={children:[]};s.value[M].forEach(A=>{const T=ea(A,S);C.children.push(T),A[a.value]&&!w[T]&&(w[T]={children:[]})}),w[M]=C}}),w}),h=S=>{const x=n.rowKey.value,w={};return mAe(S,(M,C,A)=>{const T=ea(M,x);xt(C)?w[T]={children:C.map(I=>ea(I,x)),level:A}:i.value&&(w[T]={children:[],lazy:!0,level:A})},o.value,a.value,i.value),w},f=(S=!1,x)=>{var w,M;x||(x=(w=c.store)==null?void 0:w.states.defaultExpandAll.value);const C=u.value,A=d.value,T=Object.keys(C),I={};if(T.length){const D=y(t),B=[],O=(L,z)=>{if(S)return e.value?x||e.value.includes(z):!!(x||L!=null&&L.expanded);{const k=x||e.value&&e.value.includes(z);return!!(L!=null&&L.expanded||k)}};T.forEach(L=>{const z=D[L],k={...C[L]};if(k.expanded=O(z,L),k.lazy){const{loaded:F=!1,loading:W=!1}=z||{};k.loaded=!!F,k.loading=!!W,B.push(L)}I[L]=k});const H=Object.keys(A);i.value&&H.length&&B.length&&H.forEach(L=>{var z;const k=D[L],F=A[L].children;if(B.includes(L)){if(((z=I[L].children)==null?void 0:z.length)!==0)throw new Error("[ElTable]children must be an empty array.");I[L].children=F}else{const{loaded:W=!1,loading:q=!1}=k||{};I[L]={lazy:!0,loaded:!!W,loading:!!q,expanded:O(k,L),children:F,level:void 0}}})}t.value=I,(M=c.store)==null||M.updateTableScrollY()};ct(()=>e.value,()=>{f(!0)}),ct(()=>u.value,()=>{f()}),ct(()=>d.value,()=>{f()});const p=S=>{e.value=S,f()},m=S=>i.value&&S&&"loaded"in S&&!S.loaded,v=(S,x)=>{c.store.assertRowKey();const w=n.rowKey.value,M=ea(S,w),C=M&&t.value[M];if(M&&C&&"expanded"in C){const A=C.expanded;x=nr(x)?!C.expanded:x,t.value[M].expanded=x,A!==x&&c.emit("expand-change",S,x),m(C)&&_(S,M,C),c.store.updateTableScrollY()}},g=S=>{c.store.assertRowKey();const x=n.rowKey.value,w=ea(S,x),M=t.value[w];m(M)?_(S,w,M):v(S,void 0)},_=(S,x,w)=>{const{load:M}=c.props;M&&!t.value[x].loaded&&(t.value[x].loading=!0,M(S,w,C=>{if(!xt(C))throw new TypeError("[ElTable] data must be an array");t.value[x].loading=!1,t.value[x].loaded=!0,t.value[x].expanded=!0,C.length&&(s.value[x]=C),c.emit("expand-change",S,!0)}))};return{loadData:_,loadOrToggle:g,toggleTreeExpansion:v,updateTreeExpandKeys:p,updateTreeData:f,updateKeyChildren:(S,x)=>{const{lazy:w,rowKey:M}=c.props;if(w){if(!M)throw new Error("[Table] rowKey is required in updateKeyChild");s.value[S]&&(s.value[S]=x)}},normalize:h,states:{expandRowKeys:e,treeData:t,indent:r,lazy:i,lazyTreeNodeMap:s,lazyColumnIdentifier:a,childrenColumnName:o,checkStrictly:l}}}const SAe=(n,e)=>{const t=e.sortingColumn;return!t||Wt(t.sortable)?n:uAe(n,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},r2=n=>{const e=[];return n.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,r2(t.children)):e.push(t)}),e};function xAe(){var n;const e=Dn(),{size:t}=bs((n=e.proxy)==null?void 0:n.$props),r=ne(null),i=ne([]),s=ne([]),a=ne(!1),o=ne([]),l=ne([]),c=ne([]),u=ne([]),d=ne([]),h=ne([]),f=ne([]),p=ne([]),m=[],v=ne(0),g=ne(0),_=ne(0),b=ne(!1),S=ne([]),x=ne(!1),w=ne(!1),M=ne(null),C=ne({}),A=ne(null),T=ne(null),I=ne(null),D=ne(null),B=ne(null),O=U(()=>r.value?Tv(S.value,r.value):void 0);ct(i,()=>{var Ke;e.state&&(k(!1),e.props.tableLayout==="auto"&&((Ke=e.refs.tableHeaderRef)==null||Ke.updateFixedColumnStyle()))},{deep:!0});const H=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},L=Ke=>{var Q;(Q=Ke.children)==null||Q.forEach(_e=>{_e.fixed=Ke.fixed,L(_e)})},z=()=>{o.value.forEach(de=>{L(de)}),u.value=o.value.filter(de=>[!0,"left"].includes(de.fixed));const Ke=o.value.find(de=>de.type==="selection");let Q;Ke&&Ke.fixed!=="right"&&!u.value.includes(Ke)&&o.value.indexOf(Ke)===0&&u.value.length&&(u.value.unshift(Ke),Q=!0),d.value=o.value.filter(de=>de.fixed==="right");const _e=o.value.filter(de=>(Q?de.type!=="selection":!0)&&!de.fixed);l.value=Array.from(u.value).concat(_e).concat(d.value);const Ae=r2(_e),ge=r2(u.value),pe=r2(d.value);v.value=Ae.length,g.value=ge.length,_.value=pe.length,c.value=Array.from(ge).concat(Ae).concat(pe),a.value=u.value.length>0||d.value.length>0},k=(Ke,Q=!1)=>{Ke&&z(),Q?e.state.doLayout():e.state.debouncedUpdateLayout()},F=Ke=>O.value?!!O.value[ea(Ke,r.value)]:S.value.includes(Ke),W=()=>{b.value=!1;const Ke=S.value;S.value=[],Ke.length&&e.emit("selection-change",[])},q=()=>{var Ke,Q;let _e;if(r.value){_e=[];const Ae=(Q=(Ke=e==null?void 0:e.store)==null?void 0:Ke.states)==null?void 0:Q.childrenColumnName.value,ge=Tv(i.value,r.value,!0,Ae);for(const pe in O.value)fr(O.value,pe)&&!ge[pe]&&_e.push(O.value[pe].row)}else _e=S.value.filter(Ae=>!i.value.includes(Ae));if(_e.length){const Ae=S.value.filter(ge=>!_e.includes(ge));S.value=Ae,e.emit("selection-change",Ae.slice())}},Z=()=>(S.value||[]).slice(),se=(Ke,Q,_e=!0,Ae=!1)=>{var ge,pe,de,at;const Ee={children:(pe=(ge=e==null?void 0:e.store)==null?void 0:ge.states)==null?void 0:pe.childrenColumnName.value,checkStrictly:(at=(de=e==null?void 0:e.store)==null?void 0:de.states)==null?void 0:at.checkStrictly.value};if(SC(S.value,Ke,Q,Ee,Ae?void 0:M.value,i.value.indexOf(Ke),r.value)){const et=(S.value||[]).slice();_e&&e.emit("select",et,Ke),e.emit("selection-change",et)}},X=()=>{var Ke,Q;const _e=w.value?!b.value:!(b.value||S.value.length);b.value=_e;let Ae=!1,ge=0;const pe=(Q=(Ke=e==null?void 0:e.store)==null?void 0:Ke.states)==null?void 0:Q.rowKey.value,{childrenColumnName:de}=e.store.states,at={children:de.value,checkStrictly:!1};i.value.forEach((Ee,vt)=>{const et=vt+ge;SC(S.value,Ee,_e,at,M.value,et,pe)&&(Ae=!0),ge+=ae(ea(Ee,pe))}),Ae&&e.emit("selection-change",S.value?S.value.slice():[]),e.emit("select-all",(S.value||[]).slice())},ie=()=>{var Ke;if(((Ke=i.value)==null?void 0:Ke.length)===0){b.value=!1;return}const{childrenColumnName:Q}=e.store.states;let _e=0,Ae=0;const ge=de=>{var at;for(const Ee of de){const vt=M.value&&M.value.call(null,Ee,_e);if(F(Ee))Ae++;else if(!M.value||vt)return!1;if(_e++,(at=Ee[Q.value])!=null&&at.length&&!ge(Ee[Q.value]))return!1}return!0},pe=ge(i.value||[]);b.value=Ae===0?!1:pe},ae=Ke=>{var Q;if(!e||!e.store)return 0;const{treeData:_e}=e.store.states;let Ae=0;const ge=(Q=_e.value[Ke])==null?void 0:Q.children;return ge&&(Ae+=ge.length,ge.forEach(pe=>{Ae+=ae(pe)})),Ae},ce=(Ke,Q)=>{const _e={};return Is(Ke).forEach(Ae=>{C.value[Ae.id]=Q,_e[Ae.columnKey||Ae.id]=Q}),_e},we=(Ke,Q,_e)=>{T.value&&T.value!==Ke&&(T.value.order=null),T.value=Ke,I.value=Q,D.value=_e},He=()=>{let Ke=y(s);Object.keys(C.value).forEach(Q=>{const _e=C.value[Q];if(!_e||_e.length===0)return;const Ae=_X({columns:c.value},Q);Ae&&Ae.filterMethod&&(Ke=Ke.filter(ge=>_e.some(pe=>Ae.filterMethod.call(null,pe,ge,Ae))))}),A.value=Ke},Ge=()=>{var Ke;i.value=SAe((Ke=A.value)!=null?Ke:[],{sortingColumn:T.value,sortProp:I.value,sortOrder:D.value})},me=(Ke=void 0)=>{Ke!=null&&Ke.filter||He(),Ge()},be=Ke=>{const{tableHeaderRef:Q}=e.refs;if(!Q)return;const _e=Object.assign({},Q.filterPanels),Ae=Object.keys(_e);if(Ae.length)if(Wt(Ke)&&(Ke=[Ke]),xt(Ke)){const ge=Ke.map(pe=>dAe({columns:c.value},pe));Ae.forEach(pe=>{const de=ge.find(at=>at.id===pe);de&&(de.filteredValue=[])}),e.store.commit("filterChange",{column:ge,values:[],silent:!0,multi:!0})}else Ae.forEach(ge=>{const pe=c.value.find(de=>de.id===ge);pe&&(pe.filteredValue=[])}),C.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},oe=()=>{T.value&&(we(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:j,toggleRowExpansion:ke,updateExpandRows:ze,states:Ve,isRowExpanded:Le}=yAe({data:i,rowKey:r}),{updateTreeExpandKeys:Ze,toggleTreeExpansion:st,updateTreeData:fe,updateKeyChildren:V,loadOrToggle:J,states:he}=_Ae({data:i,rowKey:r}),{updateCurrentRowData:Oe,updateCurrentRow:je,setCurrentRowKey:dt,states:pt}=bAe({data:i,rowKey:r});return{assertRowKey:H,updateColumns:z,scheduleLayout:k,isSelected:F,clearSelection:W,cleanSelection:q,getSelectionRows:Z,toggleRowSelection:se,_toggleAllSelection:X,toggleAllSelection:null,updateAllSelected:ie,updateFilters:ce,updateCurrentRow:je,updateSort:we,execFilter:He,execSort:Ge,execQuery:me,clearFilter:be,clearSort:oe,toggleRowExpansion:ke,setExpandRowKeysAdapter:Ke=>{j(Ke),Ze(Ke)},setCurrentRowKey:dt,toggleRowExpansionAdapter:(Ke,Q)=>{c.value.some(({type:Ae})=>Ae==="expand")?ke(Ke,Q):st(Ke,Q)},isRowExpanded:Le,updateExpandRows:ze,updateCurrentRowData:Oe,loadOrToggle:J,updateTreeData:fe,updateKeyChildren:V,states:{tableSize:t,rowKey:r,data:i,_data:s,isComplex:a,_columns:o,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:f,rightFixedLeafColumns:p,updateOrderFns:m,leafColumnsLength:v,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:_,isAllSelected:b,selection:S,reserveSelection:x,selectOnIndeterminate:w,selectable:M,filters:C,filteredData:A,sortingColumn:T,sortProp:I,sortOrder:D,hoverRow:B,...Ve,...he,...pt}}}function cR(n,e){return n.map(t=>{var r;return t.id===e.id?e:((r=t.children)!=null&&r.length&&(t.children=cR(t.children,e)),t)})}function uR(n){n.forEach(e=>{var t,r;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(r=e.children)!=null&&r.length&&uR(e.children)}),n.sort((e,t)=>e.no-t.no)}function wAe(){const n=Dn(),e=xAe();return{ns:gt("table"),...e,mutations:{setData(a,o){const l=y(a._data)!==o;a.data.value=o,a._data.value=o,n.store.execQuery(),n.store.updateCurrentRowData(),n.store.updateExpandRows(),n.store.updateTreeData(n.store.states.defaultExpandAll.value),y(a.reserveSelection)?n.store.assertRowKey():l?n.store.clearSelection():n.store.cleanSelection(),n.store.updateAllSelected(),n.$ready&&n.store.scheduleLayout()},insertColumn(a,o,l,c){var u;const d=y(a._columns);let h=[];l?(l&&!l.children&&(l.children=[]),(u=l.children)==null||u.push(o),h=cR(d,l)):(d.push(o),h=d),uR(h),a._columns.value=h,a.updateOrderFns.push(c),o.type==="selection"&&(a.selectable.value=o.selectable,a.reserveSelection.value=o.reserveSelection),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},updateColumnOrder(a,o){var l;((l=o.getColumnIndex)==null?void 0:l.call(o))!==o.no&&(uR(a._columns.value),n.$ready&&n.store.updateColumns())},removeColumn(a,o,l,c){var u;const d=y(a._columns)||[];if(l)(u=l.children)==null||u.splice(l.children.findIndex(f=>f.id===o.id),1),Ut(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),a._columns.value=cR(d,l);else{const f=d.indexOf(o);f>-1&&(d.splice(f,1),a._columns.value=d)}const h=a.updateOrderFns.indexOf(c);h>-1&&a.updateOrderFns.splice(h,1),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},sort(a,o){const{prop:l,order:c,init:u}=o;if(l){const d=y(a.columns).find(h=>h.property===l);d&&(d.order=c,n.store.updateSort(d,l,c),n.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(a,o){const{sortingColumn:l,sortProp:c,sortOrder:u}=a,d=y(l),h=y(c),f=y(u);U_(f)&&(a.sortingColumn.value=null,a.sortProp.value=null);const p={filter:!0};n.store.execQuery(p),(!o||!(o.silent||o.init))&&n.emit("sort-change",{column:d,prop:h,order:f}),n.store.updateTableScrollY()},filterChange(a,o){const{column:l,values:c,silent:u}=o,d=n.store.updateFilters(l,c);n.store.execQuery(),u||n.emit("filter-change",d),n.store.updateTableScrollY()},toggleAllSelection(){var a,o;(o=(a=n.store).toggleAllSelection)==null||o.call(a)},rowSelectedChanged(a,o){n.store.toggleRowSelection(o),n.store.updateAllSelected()},setHoverRow(a,o){a.hoverRow.value=o},setCurrentRow(a,o){n.store.updateCurrentRow(o)}},commit:function(a,...o){const l=n.store.mutations;if(l[a])l[a].apply(n,[n.store.states,...o]);else throw new Error(`Action not found: ${a}`)},updateTableScrollY:function(){Ut(()=>n.layout.updateScrollY.apply(n.layout))}}}const U6={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function CAe(n,e){if(!n)throw new Error("Table is required.");const t=wAe();return t.toggleAllSelection=Co(t._toggleAllSelection,10),Object.keys(U6).forEach(r=>{CX(MX(e,r),r,t)}),MAe(t,e),t}function MAe(n,e){Object.keys(U6).forEach(t=>{ct(()=>MX(e,t),r=>{CX(r,t,n)})})}function CX(n,e,t){let r=n,i=U6[e];Mn(i)&&(r=r||i.default,i=i.key),t.states[i].value=r}function MX(n,e){if(e.includes(".")){const t=e.split(".");let r=n;return t.forEach(i=>{r=r[i]}),r}else return n[e]}class TAe{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ne(null),this.scrollX=ne(!1),this.scrollY=ne(!1),this.bodyWidth=ne(null),this.fixedWidth=ne(null),this.rightFixedWidth=ne(null),this.gutterWidth=0;for(const t in e)fr(e,t)&&(qr(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const e=this.height.value;if(U_(e))return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(t!=null&&t.wrapRef)){let r=!0;const i=this.scrollY.value;return r=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=r,i!==r}return!1}setHeight(e,t="height"){if(!ar)return;const r=this.table.vnode.el;if(e=hAe(e),this.height.value=Number(e),!r&&(e||e===0)){Ut(()=>this.setHeight(e,t));return}r&&en(e)?(r.style[t]=`${e}px`,this.updateElsHeight()):r&&Wt(e)&&(r.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?e.push.apply(e,r.columns):e.push(r)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){var e;if(!ar)return;const t=this.fit,r=(e=this.table.vnode.el)==null?void 0:e.clientWidth;let i=0;const s=this.getFlattenColumns(),a=s.filter(c=>!en(c.width));if(s.forEach(c=>{en(c.width)&&c.realWidth&&(c.realWidth=null)}),a.length>0&&t){if(s.forEach(c=>{i+=Number(c.width||c.minWidth||80)}),i<=r){this.scrollX.value=!1;const c=r-i;if(a.length===1)a[0].realWidth=Number(a[0].minWidth||80)+c;else{const u=a.reduce((f,p)=>f+Number(p.minWidth||80),0),d=c/u;let h=0;a.forEach((f,p)=>{if(p===0)return;const m=Math.floor(Number(f.minWidth||80)*d);h+=m,f.realWidth=Number(f.minWidth||80)+m}),a[0].realWidth=Number(a[0].minWidth||80)+c-h}}else this.scrollX.value=!0,a.forEach(c=>{c.realWidth=Number(c.minWidth)});this.bodyWidth.value=Math.max(i,r),this.table.state.resizeState.value.width=this.bodyWidth.value}else s.forEach(c=>{!c.width&&!c.minWidth?c.realWidth=80:c.realWidth=Number(c.width||c.minWidth),i+=c.realWidth}),this.scrollX.value=i>r,this.bodyWidth.value=i;const o=this.store.states.fixedColumns.value;if(o.length>0){let c=0;o.forEach(u=>{c+=Number(u.realWidth||u.width)}),this.fixedWidth.value=c}const l=this.store.states.rightFixedColumns.value;if(l.length>0){let c=0;l.forEach(u=>{c+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=c}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(r=>{var i,s;switch(e){case"columns":(i=r.state)==null||i.onColumnsChange(this);break;case"scrollable":(s=r.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:AAe}=Ul,EAe=Ie({name:"ElTableFilterPanel",components:{ElCheckbox:Ul,ElCheckboxGroup:AAe,ElScrollbar:mc,ElTooltip:ia,ElIcon:zt,ArrowDown:mu,ArrowUp:eT},directives:{ClickOutside:xd},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:Ri.appendTo},setup(n){const e=Dn(),{t}=sr(),r=gt("table-filter"),i=e==null?void 0:e.parent;n.column&&!i.filterPanels.value[n.column.id]&&(i.filterPanels.value[n.column.id]=e);const s=ne(!1),a=ne(null),o=U(()=>n.column&&n.column.filters),l=U(()=>n.column&&n.column.filterClassName?`${r.b()} ${n.column.filterClassName}`:r.b()),c=U({get:()=>{var x;return(((x=n.column)==null?void 0:x.filteredValue)||[])[0]},set:x=>{u.value&&(vo(x)?u.value.splice(0,1):u.value.splice(0,1,x))}}),u=U({get(){return n.column?n.column.filteredValue||[]:[]},set(x){var w;n.column&&((w=n.upDataColumn)==null||w.call(n,"filteredValue",x))}}),d=U(()=>n.column?n.column.filterMultiple:!0),h=x=>x.value===c.value,f=()=>{s.value=!1},p=x=>{x.stopPropagation(),s.value=!s.value},m=()=>{s.value=!1},v=()=>{b(u.value),f()},g=()=>{u.value=[],b(u.value),f()},_=x=>{c.value=x,vo(x)?b([]):b(u.value),f()},b=x=>{var w,M;(w=n.store)==null||w.commit("filterChange",{column:n.column,values:x}),(M=n.store)==null||M.updateAllSelected()};ct(s,x=>{var w;n.column&&((w=n.upDataColumn)==null||w.call(n,"filterOpened",x))},{immediate:!0});const S=U(()=>{var x,w;return(w=(x=a.value)==null?void 0:x.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:s,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:o,handleConfirm:v,handleReset:g,handleSelect:_,isPropAbsent:vo,isActive:h,t,ns:r,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:S,tooltip:a}}});function IAe(n,e,t,r,i,s){const a=dn("el-checkbox"),o=dn("el-checkbox-group"),l=dn("el-scrollbar"),c=dn("arrow-up"),u=dn("arrow-down"),d=dn("el-icon"),h=dn("el-tooltip"),f=VM("click-outside");return $(),rt(h,{ref:"tooltip",visible:n.tooltipVisible,offset:0,placement:n.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":n.filterClassName,persistent:"","append-to":n.appendTo},{content:Re(()=>[n.multiple?($(),ue("div",{key:0},[ye("div",{class:Y(n.ns.e("content"))},[xe(l,{"wrap-class":n.ns.e("wrap")},{default:Re(()=>[xe(o,{modelValue:n.filteredValue,"onUpdate:modelValue":p=>n.filteredValue=p,class:Y(n.ns.e("checkbox-group"))},{default:Re(()=>[($(!0),ue(Bt,null,Fn(n.filters,p=>($(),rt(a,{key:p.value,value:p.value},{default:Re(()=>[Bn(Ct(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),ye("div",{class:Y(n.ns.e("bottom"))},[ye("button",{class:Y({[n.ns.is("disabled")]:n.filteredValue.length===0}),disabled:n.filteredValue.length===0,type:"button",onClick:n.handleConfirm},Ct(n.t("el.table.confirmFilter")),11,["disabled","onClick"]),ye("button",{type:"button",onClick:n.handleReset},Ct(n.t("el.table.resetFilter")),9,["onClick"])],2)])):($(),ue("ul",{key:1,class:Y(n.ns.e("list"))},[ye("li",{class:Y([n.ns.e("list-item"),{[n.ns.is("active")]:n.isPropAbsent(n.filterValue)}]),onClick:p=>n.handleSelect(null)},Ct(n.t("el.table.clearFilter")),11,["onClick"]),($(!0),ue(Bt,null,Fn(n.filters,p=>($(),ue("li",{key:p.value,class:Y([n.ns.e("list-item"),n.ns.is("active",n.isActive(p))]),label:p.value,onClick:m=>n.handleSelect(p.value)},Ct(p.text),11,["label","onClick"]))),128))],2))]),default:Re(()=>[Cn(($(),ue("span",{class:Y([`${n.ns.namespace.value}-table__column-filter-trigger`,`${n.ns.namespace.value}-none-outline`]),onClick:n.showFilterPanel},[xe(d,null,{default:Re(()=>[Ye(n.$slots,"filter-icon",{},()=>{var p;return[(p=n.column)!=null&&p.filterOpened?($(),rt(c,{key:0})):($(),rt(u,{key:1}))]})]),_:3})],10,["onClick"])),[[f,n.hideFilterPanel,n.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var RAe=Et(EAe,[["render",IAe],["__file","filter-panel.vue"]]);function H6(n){const e=Dn();HM(()=>{t.value.addObserver(e)}),Rn(()=>{r(t.value),i(t.value)}),yc(()=>{r(t.value),i(t.value)}),Dg(()=>{t.value.removeObserver(e)});const t=U(()=>{const s=n.layout;if(!s)throw new Error("Can not find table layout.");return s}),r=s=>{var a;const o=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const l=s.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=o.length;u<d;u++){const h=o[u],f=h.getAttribute("name"),p=c[f];p&&h.setAttribute("width",p.realWidth||p.width)}},i=s=>{var a,o;const l=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const c=((o=n.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",h.style.display=s.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:r,onScrollableChange:i}}const xc=Symbol("ElTable");function PAe(n,e){const t=Dn(),r=Lt(xc),i=m=>{m.stopPropagation()},s=(m,v)=>{!v.filters&&v.sortable?p(m,v,!1):v.filterable&&!v.sortable&&i(m),r==null||r.emit("header-click",v,m)},a=(m,v)=>{r==null||r.emit("header-contextmenu",v,m)},o=ne(null),l=ne(!1),c=ne(),u=(m,v)=>{var g,_;if(ar&&!(v.children&&v.children.length>0)&&o.value&&n.border){l.value=!0;const b=r;e("set-drag-visible",!0);const S=b==null?void 0:b.vnode.el,x=S==null?void 0:S.getBoundingClientRect().left,w=(_=(g=t==null?void 0:t.vnode)==null?void 0:g.el)==null?void 0:_.querySelector(`th.${v.id}`),M=w.getBoundingClientRect(),C=M.left-x+30;Ml(w,"noclick"),c.value={startMouseLeft:m.clientX,startLeft:M.right-x,startColumnLeft:M.left-x,tableLeft:x};const A=b==null?void 0:b.refs.resizeProxy;A.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const T=D=>{const B=D.clientX-c.value.startMouseLeft,O=c.value.startLeft+B;A.style.left=`${Math.max(C,O)}px`},I=()=>{if(l.value){const{startColumnLeft:D,startLeft:B}=c.value,H=Number.parseInt(A.style.left,10)-D;v.width=v.realWidth=H,b==null||b.emit("header-dragend",v.width,B-D,v,m),requestAnimationFrame(()=>{n.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,o.value=null,c.value=void 0,e("set-drag-visible",!1)}document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",I),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Ma(w,"noclick")},0)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",I)}},d=(m,v)=>{var g;if(v.children&&v.children.length>0)return;const _=m.target;if(!Ga(_))return;const b=_==null?void 0:_.closest("th");if(!(!v||!v.resizable||!b)&&!l.value&&n.border){const S=b.getBoundingClientRect(),x=document.body.style,w=((g=b.parentNode)==null?void 0:g.lastElementChild)===b,M=n.allowDragLastColumn||!w;S.width>12&&S.right-m.clientX<8&&M?(x.cursor="col-resize",ho(b,"is-sortable")&&(b.style.cursor="col-resize"),o.value=v):l.value||(x.cursor="",ho(b,"is-sortable")&&(b.style.cursor="pointer"),o.value=null)}},h=()=>{ar&&(document.body.style.cursor="")},f=({order:m,sortOrders:v})=>{if(m==="")return v[0];const g=v.indexOf(m||null);return v[g>v.length-2?0:g+1]},p=(m,v,g)=>{var _;m.stopPropagation();const b=v.order===g?null:g||f(v),S=(_=m.target)==null?void 0:_.closest("th");if(S&&ho(S,"noclick")){Ma(S,"noclick");return}if(!v.sortable)return;const x=m.currentTarget;if(["ascending","descending"].some(T=>ho(x,T)&&!v.sortOrders.includes(T)))return;const w=n.store.states;let M=w.sortProp.value,C;const A=w.sortingColumn.value;(A!==v||A===v&&U_(A.order))&&(A&&(A.order=null),w.sortingColumn.value=v,M=v.property),b?C=v.order=b:C=v.order=null,w.sortProp.value=M,w.sortOrder.value=C,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:a,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:p,handleFilterClick:i}}function DAe(n){const e=Lt(xc),t=gt("table");return{getHeaderRowStyle:o=>{const l=e==null?void 0:e.props.headerRowStyle;return Yt(l)?l.call(null,{rowIndex:o}):l},getHeaderRowClass:o=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return Wt(c)?l.push(c):Yt(c)&&l.push(c.call(null,{rowIndex:o})),l.join(" ")},getHeaderCellStyle:(o,l,c,u)=>{var d;let h=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};Yt(h)&&(h=h.call(null,{rowIndex:o,columnIndex:l,row:c,column:u}));const f=z6(l,u.fixed,n.store,c);return ig(f,"left"),ig(f,"right"),Object.assign({},h,f)},getHeaderCellClass:(o,l,c,u)=>{const d=F6(t.b(),l,u.fixed,n.store,c),h=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||h.push("is-leaf"),u.sortable&&h.push("is-sortable");const f=e==null?void 0:e.props.headerCellClassName;return Wt(f)?h.push(f):Yt(f)&&h.push(f.call(null,{rowIndex:o,columnIndex:l,row:c,column:u})),h.push(t.e("cell")),h.filter(p=>!!p).join(" ")}}}const TX=n=>{const e=[];return n.forEach(t=>{t.children?(e.push(t),e.push.apply(e,TX(t.children))):e.push(t)}),e},AX=n=>{let e=1;const t=(s,a)=>{if(a&&(s.level=a.level+1,e<s.level&&(e=s.level)),s.children){let o=0;s.children.forEach(l=>{t(l,s),o+=l.colSpan}),s.colSpan=o}else s.colSpan=1};n.forEach(s=>{s.level=1,t(s,void 0)});const r=[];for(let s=0;s<e;s++)r.push([]);return TX(n).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(a=>a.isSubColumn=!0)):s.rowSpan=e-s.level+1,r[s.level-1].push(s)}),r};function LAe(n){const e=Lt(xc),t=U(()=>AX(n.store.states.originColumns.value));return{isGroup:U(()=>{const s=t.value.length>1;return s&&e&&(e.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var kAe=Ie({name:"ElTableHeader",components:{ElCheckbox:Ul},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(n,{emit:e}){const t=Dn(),r=Lt(xc),i=gt("table"),s=ne({}),{onColumnsChange:a,onScrollableChange:o}=H6(r),l=(r==null?void 0:r.props.tableLayout)==="auto",c=pr(new Map),u=ne();let d;const h=()=>{d=setTimeout(()=>{c.size>0&&(c.forEach((I,D)=>{const B=u.value.querySelector(`.${D.replace(/\s/g,".")}`);if(B){const O=B.getBoundingClientRect().width;I.width=O||I.width}}),c.clear())})};ct(c,h),br(()=>{d&&(clearTimeout(d),d=void 0)}),Rn(async()=>{await Ut(),await Ut();const{prop:I,order:D}=n.defaultSort;r==null||r.store.commit("sort",{prop:I,order:D,init:!0}),h()});const{handleHeaderClick:f,handleHeaderContextMenu:p,handleMouseDown:m,handleMouseMove:v,handleMouseOut:g,handleSortClick:_,handleFilterClick:b}=PAe(n,e),{getHeaderRowStyle:S,getHeaderRowClass:x,getHeaderCellStyle:w,getHeaderCellClass:M}=DAe(n),{isGroup:C,toggleAllSelection:A,columnRows:T}=LAe(n);return t.state={onColumnsChange:a,onScrollableChange:o},t.filterPanels=s,{ns:i,filterPanels:s,onColumnsChange:a,onScrollableChange:o,columnRows:T,getHeaderRowClass:x,getHeaderRowStyle:S,getHeaderCellClass:M,getHeaderCellStyle:w,handleHeaderClick:f,handleHeaderContextMenu:p,handleMouseDown:m,handleMouseMove:v,handleMouseOut:g,handleSortClick:_,handleFilterClick:b,isGroup:C,toggleAllSelection:A,saveIndexSelection:c,isTableLayoutAuto:l,theadRef:u,updateFixedColumnStyle:h}},render(){const{ns:n,isGroup:e,columnRows:t,getHeaderCellStyle:r,getHeaderCellClass:i,getHeaderRowClass:s,getHeaderRowStyle:a,handleHeaderClick:o,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:f,$parent:p,saveIndexSelection:m,isTableLayoutAuto:v}=this;let g=1;return tn("thead",{ref:"theadRef",class:{[n.is("group")]:e}},t.map((_,b)=>tn("tr",{class:s(b),key:b,style:a(b)},_.map((S,x)=>{S.rowSpan>g&&(g=S.rowSpan);const w=i(b,x,_,S);return v&&S.fixed&&m.set(w,S),tn("th",{class:w,colspan:S.colSpan,key:`${S.id}-thead`,rowspan:S.rowSpan,style:r(b,x,_,S),onClick:M=>{var C;(C=M.currentTarget)!=null&&C.classList.contains("noclick")||o(M,S)},onContextmenu:M=>l(M,S),onMousedown:M=>c(M,S),onMousemove:M=>u(M,S),onMouseout:h},[tn("div",{class:["cell",S.filteredValue&&S.filteredValue.length>0?"highlight":""]},[S.renderHeader?S.renderHeader({column:S,$index:x,store:f,_self:p}):S.label,S.sortable&&tn("span",{onClick:M=>d(M,S),class:"caret-wrapper"},[tn("i",{onClick:M=>d(M,S,"ascending"),class:"sort-caret ascending"}),tn("i",{onClick:M=>d(M,S,"descending"),class:"sort-caret descending"})]),S.filterable&&tn(RAe,{store:f,placement:S.filterPlacement||"bottom-start",appendTo:p==null?void 0:p.appendFilterPanelTo,column:S,upDataColumn:(M,C)=>{S[M]=C}},{"filter-icon":()=>S.renderFilterIcon?S.renderFilterIcon({filterOpened:S.filterOpened}):null})])])}))))}});function d3(n,e,t=.03){return n-e>t}function OAe(n){const e=Lt(xc),t=ne(""),r=ne(tn("div")),i=(p,m,v)=>{var g,_,b;const S=e,x=u3(p);let w=null;const M=(g=S==null?void 0:S.vnode.el)==null?void 0:g.dataset.prefix;x&&(w=A7({columns:(b=(_=n.store)==null?void 0:_.states.columns.value)!=null?b:[]},x,M),w&&(S==null||S.emit(`cell-${v}`,m,w,x,p))),S==null||S.emit(`row-${v}`,m,w,p)},s=(p,m)=>{i(p,m,"dblclick")},a=(p,m)=>{var v;(v=n.store)==null||v.commit("setCurrentRow",m),i(p,m,"click")},o=(p,m)=>{i(p,m,"contextmenu")},l=Co(p=>{var m;(m=n.store)==null||m.commit("setHoverRow",p)},30),c=Co(()=>{var p;(p=n.store)==null||p.commit("setHoverRow",null)},30),u=p=>{const m=window.getComputedStyle(p,null),v=Number.parseInt(m.paddingLeft,10)||0,g=Number.parseInt(m.paddingRight,10)||0,_=Number.parseInt(m.paddingTop,10)||0,b=Number.parseInt(m.paddingBottom,10)||0;return{left:v,right:g,top:_,bottom:b}},d=(p,m,v)=>{var g;let _=(g=m==null?void 0:m.target)==null?void 0:g.parentNode;for(;p>1&&(_=_==null?void 0:_.nextSibling,!(!_||_.nodeName!=="TR"));)v(_,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:s,handleClick:a,handleContextMenu:o,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(p,m,v)=>{var g,_,b,S,x,w;if(!e)return;const M=e,C=u3(p),A=(g=M==null?void 0:M.vnode.el)==null?void 0:g.dataset.prefix;let T=null;if(C){if(T=A7({columns:(b=(_=n.store)==null?void 0:_.states.columns.value)!=null?b:[]},C,A),!T)return;C.rowSpan>1&&d(C.rowSpan,p,Ml);const se=M.hoverState={cell:C,column:T,row:m};M==null||M.emit("cell-mouse-enter",se.row,se.column,se.cell,p)}if(!v)return;const I=p.target.querySelector(".cell");if(!(ho(I,`${A}-tooltip`)&&I.childNodes.length))return;const D=document.createRange();D.setStart(I,0),D.setEnd(I,I.childNodes.length);const{width:B,height:O}=D.getBoundingClientRect(),{width:H,height:L}=I.getBoundingClientRect(),{top:z,left:k,right:F,bottom:W}=u(I),q=k+F,Z=z+W;d3(B+q,H)||d3(O+Z,L)||d3(I.scrollWidth,H)?gAe(v,(S=(C==null?void 0:C.innerText)||(C==null?void 0:C.textContent))!=null?S:"",m,T,C,M):((x=oo)==null?void 0:x.trigger)===C&&((w=oo)==null||w())},handleCellMouseLeave:p=>{const m=u3(p);if(!m)return;m.rowSpan>1&&d(m.rowSpan,p,Ma);const v=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,p)},tooltipContent:t,tooltipTrigger:r}}function NAe(n){const e=Lt(xc),t=gt("table");return{getRowStyle:(c,u)=>{const d=e==null?void 0:e.props.rowStyle;return Yt(d)?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{var d;const h=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&c===((d=n.store)==null?void 0:d.states.currentRow.value)&&h.push("current-row"),n.stripe&&u%2===1&&h.push(t.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return Wt(f)?h.push(f):Yt(f)&&h.push(f.call(null,{row:c,rowIndex:u})),h},getCellStyle:(c,u,d,h)=>{const f=e==null?void 0:e.props.cellStyle;let p=f??{};Yt(f)&&(p=f.call(null,{rowIndex:c,columnIndex:u,row:d,column:h}));const m=z6(u,n==null?void 0:n.fixed,n.store);return ig(m,"left"),ig(m,"right"),Object.assign({},p,m)},getCellClass:(c,u,d,h,f)=>{const p=F6(t.b(),u,n==null?void 0:n.fixed,n.store,void 0,f),m=[h.id,h.align,h.className,...p],v=e==null?void 0:e.props.cellClassName;return Wt(v)?m.push(v):Yt(v)&&m.push(v.call(null,{rowIndex:c,columnIndex:u,row:d,column:h})),m.push(t.e("cell")),m.filter(g=>!!g).join(" ")},getSpan:(c,u,d,h)=>{let f=1,p=1;const m=e==null?void 0:e.props.spanMethod;if(Yt(m)){const v=m({row:c,column:u,rowIndex:d,columnIndex:h});xt(v)?(f=v[0],p=v[1]):Mn(v)&&(f=v.rowspan,p=v.colspan)}return{rowspan:f,colspan:p}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const h=c.map(({realWidth:f,width:p})=>f||p).slice(d,d+u);return Number(h.reduce((f,p)=>Number(f)+Number(p),-1))}}}const BAe=Ie({name:"TableTdWrapper"}),FAe=Ie({...BAe,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(n){return(e,t)=>($(),ue("td",{colspan:n.colspan,rowspan:n.rowspan},[Ye(e.$slots,"default")],8,["colspan","rowspan"]))}});var zAe=Et(FAe,[["__file","td-wrapper.vue"]]);function UAe(n){const e=Lt(xc),t=gt("table"),{handleDoubleClick:r,handleClick:i,handleContextMenu:s,handleMouseEnter:a,handleMouseLeave:o,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=OAe(n),{getRowStyle:h,getRowClass:f,getCellStyle:p,getCellClass:m,getSpan:v,getColspanRealWidth:g}=NAe(n),_=U(()=>{var M;return(M=n.store)==null?void 0:M.states.columns.value.findIndex(({type:C})=>C==="default")}),b=(M,C)=>{var A;const T=(A=e==null?void 0:e.props)==null?void 0:A.rowKey;return T?ea(M,T):C},S=(M,C,A,T=!1)=>{const{tooltipEffect:I,tooltipOptions:D,store:B}=n,{indent:O,columns:H}=B.states,L=f(M,C);let z=!0;return A&&(L.push(t.em("row",`level-${A.level}`)),z=!!A.display),tn("tr",{style:[z?null:{display:"none"},h(M,C)],class:L,key:b(M,C),onDblclick:F=>r(F,M),onClick:F=>i(F,M),onContextmenu:F=>s(F,M),onMouseenter:()=>a(C),onMouseleave:o},H.value.map((F,W)=>{const{rowspan:q,colspan:Z}=v(M,F,C,W);if(!q||!Z)return null;const se=Object.assign({},F);se.realWidth=g(H.value,Z,W);const X={store:B,_self:n.context||e,column:se,row:M,$index:C,cellIndex:W,expanded:T};W===_.value&&A&&(X.treeNode={indent:A.level&&A.level*O.value,level:A.level},Cr(A.expanded)&&(X.treeNode.expanded=A.expanded,"loading"in A&&(X.treeNode.loading=A.loading),"noLazyChildren"in A&&(X.treeNode.noLazyChildren=A.noLazyChildren)));const ie=`${b(M,C)},${W}`,ae=se.columnKey||se.rawColumnKey||"",ce=F.showOverflowTooltip&&Sq({effect:I},D,F.showOverflowTooltip);return tn(zAe,{style:p(C,W,M,F),class:m(C,W,M,F,Z-1),key:`${ae}${ie}`,rowspan:q,colspan:Z,onMouseenter:we=>l(we,M,ce),onMouseleave:c},{default:()=>x(W,F,X)})}))},x=(M,C,A)=>C.renderCell(A);return{wrappedRowRender:(M,C)=>{const A=n.store,{isRowExpanded:T,assertRowKey:I}=A,{treeData:D,lazyTreeNodeMap:B,childrenColumnName:O,rowKey:H}=A.states,L=A.states.columns.value;if(L.some(({type:k})=>k==="expand")){const k=T(M),F=S(M,C,void 0,k),W=e==null?void 0:e.renderExpanded;if(!W)return console.error("[Element Error]renderExpanded is required."),F;const q=[[F]];return(e.props.preserveExpandedContent||k)&&q[0].push(tn("tr",{key:`expanded-row__${F.key}`,style:{display:k?"":"none"}},[tn("td",{colspan:L.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[W({row:M,$index:C,store:A,expanded:k})])])),q}else if(Object.keys(D.value).length){I();const k=ea(M,H.value);let F=D.value[k],W=null;F&&(W={expanded:F.expanded,level:F.level,display:!0,noLazyChildren:void 0,loading:void 0},Cr(F.lazy)&&(W&&Cr(F.loaded)&&F.loaded&&(W.noLazyChildren=!(F.children&&F.children.length)),W.loading=F.loading));const q=[S(M,C,W??void 0)];if(F){let Z=0;const se=(ie,ae)=>{ie&&ie.length&&ae&&ie.forEach(ce=>{const we={display:ae.display&&ae.expanded,level:ae.level+1,expanded:!1,noLazyChildren:!1,loading:!1},He=ea(ce,H.value);if(vo(He))throw new Error("For nested data item, row-key is required.");if(F={...D.value[He]},F&&(we.expanded=F.expanded,F.level=F.level||we.level,F.display=!!(F.expanded&&we.display),Cr(F.lazy)&&(Cr(F.loaded)&&F.loaded&&(we.noLazyChildren=!(F.children&&F.children.length)),we.loading=F.loading)),Z++,q.push(S(ce,C+Z,we)),F){const Ge=B.value[He]||ce[O.value];se(Ge,F)}})};F.display=!0;const X=B.value[k]||M[O.value];se(X,F)}return q}else return S(M,C,void 0)},tooltipContent:u,tooltipTrigger:d}}const HAe={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var VAe=Ie({name:"ElTableBody",props:HAe,setup(n){var e;const t=Dn(),r=Lt(xc),i=gt("table"),{wrappedRowRender:s,tooltipContent:a,tooltipTrigger:o}=UAe(n),{onColumnsChange:l,onScrollableChange:c}=H6(r),u=[];return ct((e=n.store)==null?void 0:e.states.hoverRow,(d,h)=>{var f,p;const m=t==null?void 0:t.vnode.el,v=Array.from((m==null?void 0:m.children)||[]).filter(b=>b==null?void 0:b.classList.contains(`${i.e("row")}`));let g=d;const _=(f=v[g])==null?void 0:f.childNodes;if(_!=null&&_.length){let b=0;Array.from(_).reduce((x,w,M)=>{var C,A;return((C=_[M])==null?void 0:C.colSpan)>1&&(b=(A=_[M])==null?void 0:A.colSpan),w.nodeName!=="TD"&&b===0&&x.push(M),b>0&&b--,x},[]).forEach(x=>{var w;for(g=d;g>0;){const M=(w=v[g-1])==null?void 0:w.childNodes;if(M[x]&&M[x].nodeName==="TD"&&M[x].rowSpan>1){Ml(M[x],"hover-cell"),u.push(M[x]);break}g--}})}else u.forEach(b=>Ma(b,"hover-cell")),u.length=0;!((p=n.store)!=null&&p.states.isComplex.value)||!ar||th(()=>{const b=v[h],S=v[d];b&&!b.classList.contains("hover-fixed-row")&&Ma(b,"hover-row"),S&&Ml(S,"hover-row")})}),Dg(()=>{var d;(d=oo)==null||d()}),{ns:i,onColumnsChange:l,onScrollableChange:c,wrappedRowRender:s,tooltipContent:a,tooltipTrigger:o}},render(){const{wrappedRowRender:n,store:e}=this,t=(e==null?void 0:e.states.data.value)||[];return tn("tbody",{tabIndex:-1},[t.reduce((r,i)=>r.concat(n(i,r.length)),[])])}});function $Ae(){const n=Lt(xc),e=n==null?void 0:n.store,t=U(()=>{var o;return(o=e==null?void 0:e.states.fixedLeafColumnsLength.value)!=null?o:0}),r=U(()=>{var o;return(o=e==null?void 0:e.states.rightFixedColumns.value.length)!=null?o:0}),i=U(()=>{var o;return(o=e==null?void 0:e.states.columns.value.length)!=null?o:0}),s=U(()=>{var o;return(o=e==null?void 0:e.states.fixedColumns.value.length)!=null?o:0}),a=U(()=>{var o;return(o=e==null?void 0:e.states.rightFixedColumns.value.length)!=null?o:0});return{leftFixedLeafCount:t,rightFixedLeafCount:r,columnsCount:i,leftFixedCount:s,rightFixedCount:a,columns:U(()=>{var o;return(o=e==null?void 0:e.states.columns.value)!=null?o:[]})}}function GAe(n){const{columns:e}=$Ae(),t=gt("table");return{getCellClasses:(s,a)=>{const o=s[a],l=[t.e("cell"),o.id,o.align,o.labelClassName,...F6(t.b(),a,o.fixed,n.store)];return o.className&&l.push(o.className),o.children||l.push(t.is("leaf")),l},getCellStyles:(s,a)=>{const o=z6(a,s.fixed,n.store);return ig(o,"left"),ig(o,"right"),o},columns:e}}var WAe=Ie({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n){const e=Lt(xc),t=gt("table"),{getCellClasses:r,getCellStyles:i,columns:s}=GAe(n),{onScrollableChange:a,onColumnsChange:o}=H6(e);return{ns:t,onScrollableChange:a,onColumnsChange:o,getCellClasses:r,getCellStyles:i,columns:s}},render(){const{columns:n,getCellStyles:e,getCellClasses:t,summaryMethod:r,sumText:i}=this,s=this.store.states.data.value;let a=[];return r?a=r({columns:n,data:s}):n.forEach((o,l)=>{if(l===0){a[l]=i;return}const c=s.map(f=>Number(f[o.property])),u=[];let d=!0;c.forEach(f=>{if(!Number.isNaN(+f)){d=!1;const p=`${f}`.split(".")[1];u.push(p?p.length:0)}});const h=Math.max.apply(null,u);d?a[l]="":a[l]=c.reduce((f,p)=>{const m=Number(p);return Number.isNaN(+m)?f:Number.parseFloat((f+p).toFixed(Math.min(h,20)))},0)}),tn(tn("tfoot",[tn("tr",{},[...n.map((o,l)=>tn("td",{key:l,colspan:o.colSpan,rowspan:o.rowSpan,class:t(n,l),style:e(o,l)},[tn("div",{class:["cell",o.labelClassName]},[a[l]])]))])]))}});function qAe(n){return{setCurrentRow:d=>{n.commit("setCurrentRow",d)},getSelectionRows:()=>n.getSelectionRows(),toggleRowSelection:(d,h,f=!0)=>{n.toggleRowSelection(d,h,!1,f),n.updateAllSelected()},clearSelection:()=>{n.clearSelection()},clearFilter:d=>{n.clearFilter(d)},toggleAllSelection:()=>{n.commit("toggleAllSelection")},toggleRowExpansion:(d,h)=>{n.toggleRowExpansionAdapter(d,h)},clearSort:()=>{n.clearSort()},sort:(d,h)=>{n.commit("sort",{prop:d,order:h})},updateKeyChildren:(d,h)=>{n.updateKeyChildren(d,h)}}}function KAe(n,e,t,r){const i=ne(!1),s=ne(null),a=ne(!1),o=z=>{a.value=z},l=ne({width:null,height:null,headerHeight:null}),c=ne(!1),u={display:"inline-block",verticalAlign:"middle"},d=ne(),h=ne(0),f=ne(0),p=ne(0),m=ne(0),v=ne(0);Gs(()=>{var z;e.setHeight((z=n.height)!=null?z:null)}),Gs(()=>{var z;e.setMaxHeight((z=n.maxHeight)!=null?z:null)}),ct(()=>[n.currentRowKey,t.states.rowKey],([z,k])=>{!y(k)||!y(z)||t.setCurrentRowKey(`${z}`)},{immediate:!0}),ct(()=>n.data,z=>{r.store.commit("setData",z)},{immediate:!0,deep:!0}),Gs(()=>{n.expandRowKeys&&t.setExpandRowKeysAdapter(n.expandRowKeys)});const g=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},_=(z,k)=>{const{pixelX:F,pixelY:W}=k;Math.abs(F)>=Math.abs(W)&&(r.refs.bodyWrapper.scrollLeft+=k.pixelX/5)},b=U(()=>n.height||n.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),S=U(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),x=()=>{b.value&&e.updateElsHeight(),e.updateColumnsWidth(),!(typeof window>"u")&&requestAnimationFrame(A)};Rn(async()=>{await Ut(),t.updateColumns(),T(),requestAnimationFrame(x);const z=r.vnode.el,k=r.refs.headerWrapper;n.flexible&&z&&z.parentElement&&(z.parentElement.style.minWidth="0"),l.value={width:d.value=z.offsetWidth,height:z.offsetHeight,headerHeight:n.showHeader&&k?k.offsetHeight:null},t.states.columns.value.forEach(F=>{F.filteredValue&&F.filteredValue.length&&r.store.commit("filterChange",{column:F,values:F.filteredValue,silent:!0})}),r.$ready=!0});const w=(z,k)=>{if(!z)return;const F=Array.from(z.classList).filter(W=>!W.startsWith("is-scrolling-"));F.push(e.scrollX.value?k:"is-scrolling-none"),z.className=F.join(" ")},M=z=>{const{tableWrapper:k}=r.refs;w(k,z)},C=z=>{const{tableWrapper:k}=r.refs;return!!(k&&k.classList.contains(z))},A=function(){if(!r.refs.scrollBarRef)return;if(!e.scrollX.value){const X="is-scrolling-none";C(X)||M(X);return}const z=r.refs.scrollBarRef.wrapRef;if(!z)return;const{scrollLeft:k,offsetWidth:F,scrollWidth:W}=z,{headerWrapper:q,footerWrapper:Z}=r.refs;q&&(q.scrollLeft=k),Z&&(Z.scrollLeft=k);const se=W-F-1;k>=se?M("is-scrolling-right"):M(k===0?"is-scrolling-left":"is-scrolling-middle")},T=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&Lr(r.refs.scrollBarRef.wrapRef,"scroll",A,{passive:!0}),n.fit?fi(r.vnode.el,I):Lr(window,"resize",I),fi(r.refs.bodyWrapper,()=>{var z,k;I(),(k=(z=r.refs)==null?void 0:z.scrollBarRef)==null||k.update()}))},I=()=>{var z,k,F,W;const q=r.vnode.el;if(!r.$ready||!q)return;let Z=!1;const{width:se,height:X,headerHeight:ie}=l.value,ae=d.value=q.offsetWidth;se!==ae&&(Z=!0);const ce=q.offsetHeight;(n.height||b.value)&&X!==ce&&(Z=!0);const we=n.tableLayout==="fixed"?r.refs.headerWrapper:(z=r.refs.tableHeaderRef)==null?void 0:z.$el;n.showHeader&&(we==null?void 0:we.offsetHeight)!==ie&&(Z=!0),h.value=((k=r.refs.tableWrapper)==null?void 0:k.scrollHeight)||0,p.value=(we==null?void 0:we.scrollHeight)||0,m.value=((F=r.refs.footerWrapper)==null?void 0:F.offsetHeight)||0,v.value=((W=r.refs.appendWrapper)==null?void 0:W.offsetHeight)||0,f.value=h.value-p.value-m.value-v.value,Z&&(l.value={width:ae,height:ce,headerHeight:n.showHeader&&(we==null?void 0:we.offsetHeight)||0},x())},D=Qi(),B=U(()=>{const{bodyWidth:z,scrollY:k,gutterWidth:F}=e;return z.value?`${z.value-(k.value?F:0)}px`:""}),O=U(()=>n.maxHeight?"fixed":n.tableLayout),H=U(()=>{if(n.data&&n.data.length)return;let z="100%";n.height&&f.value&&(z=`${f.value}px`);const k=d.value;return{width:k?`${k}px`:"",height:z}}),L=U(()=>n.height?{height:"100%"}:n.maxHeight?Number.isNaN(Number(n.maxHeight))?{maxHeight:`calc(${n.maxHeight} - ${p.value+m.value}px)`}:{maxHeight:`${+n.maxHeight-p.value-m.value}px`}:{});return{isHidden:i,renderExpanded:s,setDragVisible:o,isGroup:c,handleMouseLeave:g,handleHeaderFooterMousewheel:_,tableSize:D,emptyBlockStyle:H,resizeProxyVisible:a,bodyWidth:B,resizeState:l,doLayout:x,tableBodyStyles:S,tableLayout:O,scrollbarViewStyle:u,scrollbarStyle:L}}function YAe(n){const e=ne(),t=()=>{const i=n.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},a=n.store.states.updateOrderFns;e.value=new MutationObserver(()=>{a.forEach(o=>o())}),e.value.observe(i,s)};Rn(()=>{t()}),Dg(()=>{var r;(r=e.value)==null||r.disconnect()})}var XAe={data:{type:Array,default:()=>[]},size:as,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],tooltipFormatter:Function,appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0},allowDragLastColumn:{type:Boolean,default:!0},preserveExpandedContent:Boolean,nativeScrollbar:Boolean};function EX(n){const e=n.tableLayout==="auto";let t=n.columns||[];e&&t.every(({width:i})=>nr(i))&&(t=[]);const r=i=>{const s={key:`${n.tableLayout}_${i.id}`,style:{},name:void 0};return e?s.style={width:`${i.width}px`}:s.name=i.id,s};return tn("colgroup",{},t.map(i=>tn("col",r(i))))}EX.props=["columns","tableLayout"];const jAe=()=>{const n=ne(),e=(s,a)=>{const o=n.value;o&&o.scrollTo(s,a)},t=(s,a)=>{const o=n.value;o&&en(a)&&["Top","Left"].includes(s)&&o[`setScroll${s}`](a)};return{scrollBarRef:n,scrollTo:e,setScrollTop:s=>t("Top",s),setScrollLeft:s=>t("Left",s)}};var R7=!1,hp,dR,fR,i2,s2,IX,a2,hR,pR,mR,RX,vR,gR,PX,DX;function to(){if(!R7){R7=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(vR=/\b(iPhone|iP[ao]d)/.exec(n),gR=/\b(iP[ao]d)/.exec(n),mR=/Android/i.exec(n),PX=/FBAN\/\w+;/i.exec(n),DX=/Mobile/i.exec(n),RX=!!/Win64/.exec(n),e){hp=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,hp&&document&&document.documentMode&&(hp=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(n);IX=r?parseFloat(r[1])+4:hp,dR=e[2]?parseFloat(e[2]):NaN,fR=e[3]?parseFloat(e[3]):NaN,i2=e[4]?parseFloat(e[4]):NaN,i2?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),s2=e&&e[1]?parseFloat(e[1]):NaN):s2=NaN}else hp=dR=fR=s2=i2=NaN;if(t){if(t[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);a2=i?parseFloat(i[1].replace("_",".")):!0}else a2=!1;hR=!!t[2],pR=!!t[3]}else a2=hR=pR=!1}}var yR={ie:function(){return to()||hp},ieCompatibilityMode:function(){return to()||IX>hp},ie64:function(){return yR.ie()&&RX},firefox:function(){return to()||dR},opera:function(){return to()||fR},webkit:function(){return to()||i2},safari:function(){return yR.webkit()},chrome:function(){return to()||s2},windows:function(){return to()||hR},osx:function(){return to()||a2},linux:function(){return to()||pR},iphone:function(){return to()||vR},mobile:function(){return to()||vR||gR||mR||DX},nativeApp:function(){return to()||PX},android:function(){return to()||mR},ipad:function(){return to()||gR}},ZAe=yR,GS=!!(typeof window<"u"&&window.document&&window.document.createElement),QAe={canUseDOM:GS,canUseWorkers:typeof Worker<"u",canUseEventListeners:GS&&!!(window.addEventListener||window.attachEvent),canUseViewport:GS&&!!window.screen,isInWorker:!GS},LX=QAe,kX;LX.canUseDOM&&(kX=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function JAe(n,e){if(!LX.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,r=t in document;if(!r){var i=document.createElement("div");i.setAttribute(t,"return;"),r=typeof i[t]=="function"}return!r&&kX&&n==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var e3e=JAe,P7=10,D7=40,L7=800;function OX(n){var e=0,t=0,r=0,i=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),r=e*P7,i=t*P7,"deltaY"in n&&(i=n.deltaY),"deltaX"in n&&(r=n.deltaX),(r||i)&&n.deltaMode&&(n.deltaMode==1?(r*=D7,i*=D7):(r*=L7,i*=L7)),r&&!e&&(e=r<1?-1:1),i&&!t&&(t=i<1?-1:1),{spinX:e,spinY:t,pixelX:r,pixelY:i}}OX.getEventType=function(){return ZAe.firefox()?"DOMMouseScroll":e3e("wheel")?"wheel":"mousewheel"};var t3e=OX;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const n3e=function(n,e){if(n&&n.addEventListener){const t=function(r){const i=t3e(r);e&&Reflect.apply(e,this,[r,i])};n.addEventListener("wheel",t,{passive:!0})}},r3e={beforeMount(n,e){n3e(n,e.value)}};let i3e=1;const s3e=Ie({name:"ElTable",directives:{Mousewheel:r3e},components:{TableHeader:kAe,TableBody:VAe,TableFooter:WAe,ElScrollbar:mc,hColgroup:EX},props:XAe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(n){const{t:e}=sr(),t=gt("table"),r=Dn();jn(xc,r);const i=CAe(r,n);r.store=i;const s=new TAe({store:r.store,table:r,fit:n.fit,showHeader:n.showHeader});r.layout=s;const a=U(()=>(i.states.data.value||[]).length===0),{setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:p,sort:m,updateKeyChildren:v}=qAe(i),{isHidden:g,renderExpanded:_,setDragVisible:b,isGroup:S,handleMouseLeave:x,handleHeaderFooterMousewheel:w,tableSize:M,emptyBlockStyle:C,resizeProxyVisible:A,bodyWidth:T,resizeState:I,doLayout:D,tableBodyStyles:B,tableLayout:O,scrollbarViewStyle:H,scrollbarStyle:L}=KAe(n,s,i,r),{scrollBarRef:z,scrollTo:k,setScrollLeft:F,setScrollTop:W}=jAe(),q=Co(D,50),Z=`${t.namespace.value}-table_${i3e++}`;r.tableId=Z,r.state={isGroup:S,resizeState:I,doLayout:D,debouncedUpdateLayout:q};const se=U(()=>{var ae;return(ae=n.sumText)!=null?ae:e("el.table.sumText")}),X=U(()=>{var ae;return(ae=n.emptyText)!=null?ae:e("el.table.emptyText")}),ie=U(()=>AX(i.states.originColumns.value)[0]);return YAe(r),br(()=>{q.cancel()}),{ns:t,layout:s,store:i,columns:ie,handleHeaderFooterMousewheel:w,handleMouseLeave:x,tableId:Z,tableSize:M,isHidden:g,isEmpty:a,renderExpanded:_,resizeProxyVisible:A,resizeState:I,isGroup:S,bodyWidth:T,tableBodyStyles:B,emptyBlockStyle:C,debouncedUpdateLayout:q,setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:p,doLayout:D,sort:m,updateKeyChildren:v,t:e,setDragVisible:b,context:r,computedSumText:se,computedEmptyText:X,tableLayout:O,scrollbarViewStyle:H,scrollbarStyle:L,scrollBarRef:z,scrollTo:k,setScrollLeft:F,setScrollTop:W,allowDragLastColumn:n.allowDragLastColumn}}});function a3e(n,e,t,r,i,s){const a=dn("hColgroup"),o=dn("table-header"),l=dn("table-body"),c=dn("table-footer"),u=dn("el-scrollbar"),d=VM("mousewheel");return $(),ue("div",{ref:"tableWrapper",class:Y([{[n.ns.m("fit")]:n.fit,[n.ns.m("striped")]:n.stripe,[n.ns.m("border")]:n.border||n.isGroup,[n.ns.m("hidden")]:n.isHidden,[n.ns.m("group")]:n.isGroup,[n.ns.m("fluid-height")]:n.maxHeight,[n.ns.m("scrollable-x")]:n.layout.scrollX.value,[n.ns.m("scrollable-y")]:n.layout.scrollY.value,[n.ns.m("enable-row-hover")]:!n.store.states.isComplex.value,[n.ns.m("enable-row-transition")]:(n.store.states.data.value||[]).length!==0&&(n.store.states.data.value||[]).length<100,"has-footer":n.showSummary},n.ns.m(n.tableSize),n.className,n.ns.b(),n.ns.m(`layout-${n.tableLayout}`)]),style:Xt(n.style),"data-prefix":n.ns.namespace.value,onMouseleave:n.handleMouseLeave},[ye("div",{class:Y(n.ns.e("inner-wrapper"))},[ye("div",{ref:"hiddenColumns",class:"hidden-columns"},[Ye(n.$slots,"default")],512),n.showHeader&&n.tableLayout==="fixed"?Cn(($(),ue("div",{key:0,ref:"headerWrapper",class:Y(n.ns.e("header-wrapper"))},[ye("table",{ref:"tableHeader",class:Y(n.ns.e("header")),style:Xt(n.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[xe(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),xe(o,{ref:"tableHeaderRef",border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,"allow-drag-last-column":n.allowDragLastColumn,onSetDragVisible:n.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[d,n.handleHeaderFooterMousewheel]]):Xe("v-if",!0),ye("div",{ref:"bodyWrapper",class:Y(n.ns.e("body-wrapper"))},[xe(u,{ref:"scrollBarRef","view-style":n.scrollbarViewStyle,"wrap-style":n.scrollbarStyle,always:n.scrollbarAlwaysOn,tabindex:n.scrollbarTabindex,native:n.nativeScrollbar,onScroll:h=>n.$emit("scroll",h)},{default:Re(()=>[ye("table",{ref:"tableBody",class:Y(n.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Xt({width:n.bodyWidth,tableLayout:n.tableLayout})},[xe(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),n.showHeader&&n.tableLayout==="auto"?($(),rt(o,{key:0,ref:"tableHeaderRef",class:Y(n.ns.e("body-header")),border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):Xe("v-if",!0),xe(l,{context:n.context,highlight:n.highlightCurrentRow,"row-class-name":n.rowClassName,"tooltip-effect":n.tooltipEffect,"tooltip-options":n.tooltipOptions,"row-style":n.rowStyle,store:n.store,stripe:n.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),n.showSummary&&n.tableLayout==="auto"?($(),rt(c,{key:1,class:Y(n.ns.e("body-footer")),border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Xe("v-if",!0)],6),n.isEmpty?($(),ue("div",{key:0,ref:"emptyBlock",style:Xt(n.emptyBlockStyle),class:Y(n.ns.e("empty-block"))},[ye("span",{class:Y(n.ns.e("empty-text"))},[Ye(n.$slots,"empty",{},()=>[Bn(Ct(n.computedEmptyText),1)])],2)],6)):Xe("v-if",!0),n.$slots.append?($(),ue("div",{key:1,ref:"appendWrapper",class:Y(n.ns.e("append-wrapper"))},[Ye(n.$slots,"append")],2)):Xe("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","native","onScroll"])],2),n.showSummary&&n.tableLayout==="fixed"?Cn(($(),ue("div",{key:1,ref:"footerWrapper",class:Y(n.ns.e("footer-wrapper"))},[ye("table",{class:Y(n.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Xt(n.tableBodyStyles)},[xe(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),xe(c,{border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[cr,!n.isEmpty],[d,n.handleHeaderFooterMousewheel]]):Xe("v-if",!0),n.border||n.isGroup?($(),ue("div",{key:2,class:Y(n.ns.e("border-left-patch"))},null,2)):Xe("v-if",!0)],2),Cn(ye("div",{ref:"resizeProxy",class:Y(n.ns.e("column-resize-proxy"))},null,2),[[cr,n.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var o3e=Et(s3e,[["render",a3e],["__file","table.vue"]]);const l3e={selection:"table-column--selection",expand:"table__expand-column"},c3e={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},u3e=n=>l3e[n]||"",d3e={selection:{renderHeader({store:n,column:e}){var t;function r(){return n.states.data.value&&n.states.data.value.length===0}return tn(Ul,{disabled:r(),size:n.states.tableSize.value,indeterminate:n.states.selection.value.length>0&&!n.states.isAllSelected.value,"onUpdate:modelValue":(t=n.toggleAllSelection)!=null?t:void 0,modelValue:n.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:n,column:e,store:t,$index:r}){return tn(Ul,{disabled:e.selectable?!e.selectable.call(null,n,r):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",n)},onClick:i=>i.stopPropagation(),modelValue:t.isSelected(n),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:n}){return n.label||"#"},renderCell({column:n,$index:e}){let t=e+1;const r=n.index;return en(r)?t=e+r:Yt(r)&&(t=r(e)),tn("div",{},[t])},sortable:!1},expand:{renderHeader({column:n}){return n.label||""},renderCell({column:n,row:e,store:t,expanded:r}){const{ns:i}=t,s=[i.e("expand-icon")];return!n.renderExpand&&r&&s.push(i.em("expand-icon","expanded")),tn("div",{class:s,onClick:function(o){o.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>n.renderExpand?[n.renderExpand({expanded:r})]:[tn(zt,null,{default:()=>[tn(Ta)]})]})},sortable:!1,resizable:!1}};function f3e({row:n,column:e,$index:t}){var r;const i=e.property,s=i&&B1(n,i).value;return e&&e.formatter?e.formatter(n,e,s,t):((r=s==null?void 0:s.toString)==null?void 0:r.call(s))||""}function h3e({row:n,treeNode:e,store:t},r=!1){const{ns:i}=t;if(!e)return r?[tn("span",{class:i.e("placeholder")})]:null;const s=[],a=function(o){o.stopPropagation(),!e.loading&&t.loadOrToggle(n)};if(e.indent&&s.push(tn("span",{class:i.e("indent"),style:{"padding-left":`${e.indent}px`}})),Cr(e.expanded)&&!e.noLazyChildren){const o=[i.e("expand-icon"),e.expanded?i.em("expand-icon","expanded"):""];let l=Ta;e.loading&&(l=iu),s.push(tn("div",{class:o,onClick:a},{default:()=>[tn(zt,{class:{[i.is("loading")]:e.loading}},{default:()=>[tn(l)]})]}))}else s.push(tn("span",{class:i.e("placeholder")}));return s}function k7(n,e){return n.reduce((t,r)=>(t[r]=r,t),e)}function p3e(n,e){const t=Dn();return{registerComplexWatchers:()=>{const s=["fixed"],a={realWidth:"width",realMinWidth:"minWidth"},o=k7(s,a);Object.keys(o).forEach(l=>{const c=a[l];fr(e,c)&&ct(()=>e[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=B6(u)),c==="minWidth"&&l==="realMinWidth"&&(d=SX(u)),t.columnConfig.value[c]=d,t.columnConfig.value[l]=d;const h=c==="fixed";n.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip","tooltipFormatter"],a={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=k7(s,a);Object.keys(o).forEach(l=>{const c=a[l];fr(e,c)&&ct(()=>e[c],u=>{t.columnConfig.value[l]=u})})}}}function m3e(n,e,t){const r=Dn(),i=ne(""),s=ne(!1),a=ne(),o=ne(),l=gt("table");Gs(()=>{a.value=n.align?`is-${n.align}`:null,a.value}),Gs(()=>{o.value=n.headerAlign?`is-${n.headerAlign}`:a.value,o.value});const c=U(()=>{let S=r.vnode.vParent||r.parent;for(;S&&!S.tableId&&!S.columnId;)S=S.vnode.vParent||S.parent;return S}),u=U(()=>{const{store:S}=r.parent;if(!S)return!1;const{treeData:x}=S.states,w=x.value;return w&&Object.keys(w).length>0}),d=ne(B6(n.width)),h=ne(SX(n.minWidth)),f=S=>(d.value&&(S.width=d.value),h.value&&(S.minWidth=h.value),!d.value&&h.value&&(S.width=void 0),S.minWidth||(S.minWidth=80),S.realWidth=Number(nr(S.width)?S.minWidth:S.width),S),p=S=>{const x=S.type,w=d3e[x]||{};Object.keys(w).forEach(C=>{const A=w[C];C!=="className"&&!nr(A)&&(S[C]=A)});const M=u3e(x);if(M){const C=`${y(l.namespace)}-${M}`;S.className=S.className?`${S.className} ${C}`:C}return S},m=S=>{xt(S)?S.forEach(w=>x(w)):x(S);function x(w){var M;((M=w==null?void 0:w.type)==null?void 0:M.name)==="ElTableColumn"&&(w.vParent=r)}};return{columnId:i,realAlign:a,isSubColumn:s,realHeaderAlign:o,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:p,setColumnRenders:S=>{n.renderHeader||S.type!=="selection"&&(S.renderHeader=w=>(r.columnConfig.value.label,Ye(e,"header",w,()=>[S.label]))),e["filter-icon"]&&(S.renderFilterIcon=w=>Ye(e,"filter-icon",w)),e.expand&&(S.renderExpand=w=>Ye(e,"expand",w));let x=S.renderCell;return S.type==="expand"?(S.renderCell=w=>tn("div",{class:"cell"},[x(w)]),t.value.renderExpanded=w=>e.default?e.default(w):e.default):(x=x||f3e,S.renderCell=w=>{let M=null;if(e.default){const B=e.default(w);M=FK(B)?B:x(w)}else M=x(w);const{columns:C}=t.value.store.states,A=C.value.findIndex(B=>B.type==="default"),T=u.value&&w.cellIndex===A,I=h3e(w,T),D={class:"cell",style:{}};return S.showOverflowTooltip&&(D.class=`${D.class} ${y(l.namespace)}-tooltip`,D.style={width:`${(w.column.realWidth||Number(w.column.width))-1}px`}),m(M),tn("div",D,[I,M])}),S},getPropsData:(...S)=>S.reduce((x,w)=>(xt(w)&&w.forEach(M=>{x[M]=n[M]}),x),{}),getColumnElIndex:(S,x)=>Array.prototype.indexOf.call(S,x),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var v3e={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},tooltipFormatter:Function,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:n=>n.every(e=>["ascending","descending",null].includes(e))}};let g3e=1;var NX=Ie({name:"ElTableColumn",components:{ElCheckbox:Ul},props:v3e,setup(n,{slots:e}){const t=Dn(),r=ne({}),i=U(()=>{let b=t.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:s,registerComplexWatchers:a}=p3e(i,n),{columnId:o,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:f,getPropsData:p,getColumnElIndex:m,realAlign:v,updateColumnOrder:g}=m3e(n,e,i),_=u.value;o.value=`${"tableId"in _&&_.tableId||"columnId"in _&&_.columnId}_column_${g3e++}`,HM(()=>{l.value=i.value!==_;const b=n.type||"default",S=n.sortable===""?!0:n.sortable,x=b==="selection"?!1:nr(n.showOverflowTooltip)?_.props.showOverflowTooltip:n.showOverflowTooltip,w=nr(n.tooltipFormatter)?_.props.tooltipFormatter:n.tooltipFormatter,M={...c3e[b],id:o.value,type:b,property:n.prop||n.property,align:v,headerAlign:c,showOverflowTooltip:x,tooltipFormatter:w,filterable:n.filters||n.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:S,index:n.index,rawColumnKey:t.vnode.key};let D=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);D=fAe(M,D),D=pAe(f,d,h)(D),r.value=D,s(),a()}),Rn(()=>{var b,S;const x=u.value,w=l.value?(b=x.vnode.el)==null?void 0:b.children:(S=x.refs.hiddenColumns)==null?void 0:S.children,M=()=>m(w||[],t.vnode.el);r.value.getColumnIndex=M,M()>-1&&i.value.store.commit("insertColumn",r.value,l.value?"columnConfig"in x&&x.columnConfig.value:null,g)}),br(()=>{const b=r.value.getColumnIndex;(b?b():-1)>-1&&i.value.store.commit("removeColumn",r.value,l.value?"columnConfig"in _&&_.columnConfig.value:null,g)}),t.columnId=o.value,t.columnConfig=r},render(){var n,e,t;try{const r=(e=(n=this.$slots).default)==null?void 0:e.call(n,{row:{},column:{},$index:-1}),i=[];if(xt(r))for(const a of r)((t=a.type)==null?void 0:t.name)==="ElTableColumn"||a.shapeFlag&2?i.push(a):a.type===Bt&&xt(a.children)&&a.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!Wt(o==null?void 0:o.children)&&i.push(o)});return tn("div",i)}catch{return tn("div",[])}}});const y3e=bn(o3e,{TableColumn:NX}),b3e=pi(NX);var $b=(n=>(n.ASC="asc",n.DESC="desc",n))($b||{}),Gb=(n=>(n.CENTER="center",n.RIGHT="right",n))(Gb||{}),BX=(n=>(n.LEFT="left",n.RIGHT="right",n))(BX||{});const bR={asc:"desc",desc:"asc"},Wb=Symbol("placeholder"),_3e=(n,e,t)=>{var r;const i={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:n.flexGrow||0,flexShrink:n.flexShrink||1}};t||(i.flexShrink=1);const s={...(r=n.style)!=null?r:{},...i,flexBasis:"auto",width:n.width};return e||(n.maxWidth&&(s.maxWidth=n.maxWidth),n.minWidth&&(s.minWidth=n.minWidth)),s};function S3e(n,e,t){const r=U(()=>y(e).map((v,g)=>{var _,b;return{...v,key:(b=(_=v.key)!=null?_:v.dataKey)!=null?b:g}})),i=U(()=>y(r).filter(v=>!v.hidden)),s=U(()=>y(i).filter(v=>v.fixed==="left"||v.fixed===!0)),a=U(()=>y(i).filter(v=>v.fixed==="right")),o=U(()=>y(i).filter(v=>!v.fixed)),l=U(()=>{const v=[];return y(s).forEach(g=>{v.push({...g,placeholderSign:Wb})}),y(o).forEach(g=>{v.push(g)}),y(a).forEach(g=>{v.push({...g,placeholderSign:Wb})}),v}),c=U(()=>y(s).length||y(a).length),u=U(()=>y(r).reduce((v,g)=>(v[g.key]=_3e(g,y(t),n.fixed),v),{})),d=U(()=>y(i).reduce((v,g)=>v+g.width,0)),h=v=>y(r).find(g=>g.key===v),f=v=>y(u)[v],p=(v,g)=>{v.width=g};function m(v){var g;const{key:_}=v.currentTarget.dataset;if(!_)return;const{sortState:b,sortBy:S}=n;let x=$b.ASC;Mn(b)?x=bR[b[_]]:x=bR[S.order],(g=n.onColumnSort)==null||g.call(n,{column:h(_),key:_,order:x})}return{columns:r,columnsStyles:u,columnsTotalWidth:d,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,hasFixedColumns:c,mainColumns:l,normalColumns:o,visibleColumns:i,getColumn:h,getColumnStyle:f,updateColumnWidth:p,onColumnSorted:m}}const x3e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,onMaybeEndReached:i})=>{const s=ne({scrollLeft:0,scrollTop:0});function a(f){var p,m,v;const{scrollTop:g}=f;(p=e.value)==null||p.scrollTo(f),(m=t.value)==null||m.scrollToTop(g),(v=r.value)==null||v.scrollToTop(g)}function o(f){s.value=f,a(f)}function l(f){s.value.scrollTop=f,a(y(s))}function c(f){var p,m;s.value.scrollLeft=f,(m=(p=e.value)==null?void 0:p.scrollTo)==null||m.call(p,y(s))}function u(f){var p;o(f),(p=n.onScroll)==null||p.call(n,f)}function d({scrollTop:f}){const{scrollTop:p}=y(s);f!==p&&l(f)}function h(f,p="auto"){var m;(m=e.value)==null||m.scrollToRow(f,p)}return ct(()=>y(s).scrollTop,(f,p)=>{f>p&&i()}),{scrollPos:s,scrollTo:o,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},w3e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,tableInstance:i,ns:s,isScrolling:a})=>{const o=Dn(),{emit:l}=o,c=Pr(!1),u=ne(n.defaultExpandedRowKeys||[]),d=ne(-1),h=Pr(null),f=ne({}),p=ne({}),m=Pr({}),v=Pr({}),g=Pr({}),_=U(()=>en(n.estimatedRowHeight));function b(T){var I;(I=n.onRowsRendered)==null||I.call(n,T),T.rowCacheEnd>y(d)&&(d.value=T.rowCacheEnd)}function S({hovered:T,rowKey:I}){if(a.value)return;i.vnode.el.querySelectorAll(`[rowkey="${String(I)}"]`).forEach(O=>{T?O.classList.add(s.is("hovered")):O.classList.remove(s.is("hovered"))})}function x({expanded:T,rowData:I,rowIndex:D,rowKey:B}){var O,H;const L=[...y(u)],z=L.indexOf(B);T?z===-1&&L.push(B):z>-1&&L.splice(z,1),u.value=L,l("update:expandedRowKeys",L),(O=n.onRowExpand)==null||O.call(n,{expanded:T,rowData:I,rowIndex:D,rowKey:B}),(H=n.onExpandedRowsChange)==null||H.call(n,L),i.vnode.el.querySelector(`.${s.is("hovered")}[rowkey="${String(B)}"]`)&&Ut(()=>S({hovered:!0,rowKey:B}))}const w=Co(()=>{var T,I,D,B;c.value=!0,f.value={...y(f),...y(p)},M(y(h),!1),p.value={},h.value=null,(T=e.value)==null||T.forceUpdate(),(I=t.value)==null||I.forceUpdate(),(D=r.value)==null||D.forceUpdate(),(B=o.proxy)==null||B.$forceUpdate(),c.value=!1},0);function M(T,I=!1){y(_)&&[e,t,r].forEach(D=>{const B=y(D);B&&B.resetAfterRowIndex(T,I)})}function C(T,I,D){const B=y(h);(B===null||B>D)&&(h.value=D),p.value[T]=I}function A({rowKey:T,height:I,rowIndex:D},B){B?B===BX.RIGHT?g.value[T]=I:m.value[T]=I:v.value[T]=I;const O=Math.max(...[m,g,v].map(H=>H.value[T]||0));y(f)[T]!==O&&(C(T,O,D),w())}return{expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:_,isResetting:c,rowHeights:f,resetAfterIndex:M,onRowExpanded:x,onRowHovered:S,onRowsRendered:b,onRowHeightChange:A}},C3e=(n,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:r})=>{const i=ne({}),s=U(()=>{const o={},{data:l,rowKey:c}=n,u=y(e);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(p=>h.add(p));let f=l.slice();for(f.forEach(p=>o[p[c]]=0);f.length>0;){const p=f.shift();d.push(p),h.has(p[c])&&xt(p.children)&&p.children.length>0&&(f=[...p.children,...f],p.children.forEach(m=>o[m[c]]=o[p[c]]+1))}return i.value=o,d}),a=U(()=>{const{data:o,expandColumnKey:l}=n;return l?y(s):o});return ct(a,(o,l)=>{o!==l&&(t.value=-1,r(0,!0))}),{data:a,depthMap:i}},M3e=(n,e)=>n+e,o2=n=>xt(n)?n.reduce(M3e,0):n,Jp=(n,e,t={})=>Yt(n)?n(e):n??t,Lf=n=>(["width","maxWidth","minWidth","height"].forEach(e=>{n[e]=wi(n[e])}),n),FX=n=>Kr(n)?e=>tn(n,e):n,T3e=(n,{columnsTotalWidth:e,rowsHeight:t,fixedColumnsOnLeft:r,fixedColumnsOnRight:i})=>{const s=U(()=>{const{fixed:g,width:_,vScrollbarSize:b}=n,S=_-b;return g?Math.max(Math.round(y(e)),S):S}),a=U(()=>{const{height:g=0,maxHeight:_=0,footerHeight:b,hScrollbarSize:S}=n;if(_>0){const x=y(h),w=y(t),C=y(d)+x+w+S;return Math.min(C,_-b)}return g-b}),o=U(()=>{const{maxHeight:g}=n,_=y(a);if(en(g)&&g>0)return _;const b=y(t)+y(d)+y(h);return Math.min(_,b)}),l=g=>g.width,c=U(()=>o2(y(r).map(l))),u=U(()=>o2(y(i).map(l))),d=U(()=>o2(n.headerHeight)),h=U(()=>{var g;return(((g=n.fixedData)==null?void 0:g.length)||0)*n.rowHeight}),f=U(()=>y(a)-y(d)-y(h)),p=U(()=>{const{style:g={},height:_,width:b}=n;return Lf({...g,height:_,width:b})}),m=U(()=>Lf({height:n.footerHeight})),v=U(()=>({top:wi(y(d)),bottom:wi(n.footerHeight),width:wi(n.width)}));return{bodyWidth:s,fixedTableHeight:o,mainTableHeight:a,leftTableWidth:c,rightTableWidth:u,windowHeight:f,footerHeight:m,emptyStyle:v,rootStyle:p,headerHeight:d}};function A3e(n){const e=ne(),t=ne(),r=ne(),{columns:i,columnsStyles:s,columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=S3e(n,yr(n,"columns"),yr(n,"fixed")),{scrollTo:h,scrollToLeft:f,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g,scrollPos:_}=x3e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,onMaybeEndReached:oe}),b=gt("table-v2"),S=Dn(),x=Pr(!1),{expandedRowKeys:w,lastRenderedRowIndex:M,isDynamic:C,isResetting:A,rowHeights:T,resetAfterIndex:I,onRowExpanded:D,onRowHeightChange:B,onRowHovered:O,onRowsRendered:H}=w3e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,tableInstance:S,ns:b,isScrolling:x}),{data:L,depthMap:z}=C3e(n,{expandedRowKeys:w,lastRenderedRowIndex:M,resetAfterIndex:I}),k=U(()=>{const{estimatedRowHeight:j,rowHeight:ke}=n,ze=y(L);return en(j)?Object.values(y(T)).reduce((Ve,Le)=>Ve+Le,0):ze.length*ke}),{bodyWidth:F,fixedTableHeight:W,mainTableHeight:q,leftTableWidth:Z,rightTableWidth:se,windowHeight:X,footerHeight:ie,emptyStyle:ae,rootStyle:ce,headerHeight:we}=T3e(n,{columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,rowsHeight:k}),He=ne(),Ge=U(()=>{const j=y(L).length===0;return xt(n.fixedData)?n.fixedData.length===0&&j:j});function me(j){const{estimatedRowHeight:ke,rowHeight:ze,rowKey:Ve}=n;return ke?y(T)[y(L)[j][Ve]]||ke:ze}const be=ne(!1);function oe(){const{onEndReached:j}=n;if(!j)return;const{scrollTop:ke}=y(_),ze=y(k),Ve=y(X),Le=ze-(ke+Ve)+n.hScrollbarSize;!be.value&&y(M)>=0&&ze<=ke+y(q)-y(we)?(be.value=!0,j(Le)):be.value=!1}return ct(()=>y(k),()=>be.value=!1),ct(()=>n.expandedRowKeys,j=>w.value=j,{deep:!0}),{columns:i,containerRef:He,mainTableRef:e,leftTableRef:t,rightTableRef:r,isDynamic:C,isResetting:A,isScrolling:x,hasFixedColumns:c,columnsStyles:s,columnsTotalWidth:a,data:L,expandedRowKeys:w,depthMap:z,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:F,emptyStyle:ae,rootStyle:ce,footerHeight:ie,mainTableHeight:q,fixedTableHeight:W,leftTableWidth:Z,rightTableWidth:se,showEmpty:Ge,getRowHeight:me,onColumnSorted:d,onRowHovered:O,onRowExpanded:D,onRowsRendered:H,onRowHeightChange:B,scrollTo:h,scrollToLeft:f,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g}}const V6=Symbol("tableV2"),zX="tableV2GridScrollLeft",UX=String,j_={type:Fe(Array),required:!0},$6={type:Fe(Array)},HX={...$6,required:!0},E3e=String,O7={type:Fe(Array),default:()=>hi([])},pp={type:Number,required:!0},VX={type:Fe([String,Number,Symbol]),default:"id"},N7={type:Fe(Object)},Cp=Tt({class:String,columns:j_,columnsStyles:{type:Fe(Object),required:!0},depth:Number,expandColumnKey:E3e,estimatedRowHeight:{...Fp.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Fe(Function)},onRowHover:{type:Fe(Function)},onRowHeightChange:{type:Fe(Function)},rowData:{type:Fe(Object),required:!0},rowEventHandlers:{type:Fe(Object)},rowIndex:{type:Number,required:!0},rowKey:VX,style:{type:Fe(Object)}}),f3={type:Number,required:!0},G6=Tt({class:String,columns:j_,fixedHeaderData:{type:Fe(Array)},headerData:{type:Fe(Array),required:!0},headerHeight:{type:Fe([Number,Array]),default:50},rowWidth:f3,rowHeight:{type:Number,default:50},height:f3,width:f3}),l2=Tt({columns:j_,data:HX,fixedData:$6,estimatedRowHeight:Cp.estimatedRowHeight,width:pp,height:pp,headerWidth:pp,headerHeight:G6.headerHeight,bodyWidth:pp,rowHeight:pp,cache:oX.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Fp.scrollbarAlwaysOn,scrollbarStartGap:Fp.scrollbarStartGap,scrollbarEndGap:Fp.scrollbarEndGap,class:UX,style:N7,containerStyle:N7,getRowHeight:{type:Fe(Function),required:!0},rowKey:Cp.rowKey,onRowsRendered:{type:Fe(Function)},onScroll:{type:Fe(Function)}}),I3e=Tt({cache:l2.cache,estimatedRowHeight:Cp.estimatedRowHeight,rowKey:VX,headerClass:{type:Fe([String,Function])},headerProps:{type:Fe([Object,Function])},headerCellProps:{type:Fe([Object,Function])},headerHeight:G6.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Fe([String,Function])},rowProps:{type:Fe([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Fe([Object,Function])},columns:j_,data:HX,dataGetter:{type:Fe(Function)},fixedData:$6,expandColumnKey:Cp.expandColumnKey,expandedRowKeys:O7,defaultExpandedRowKeys:O7,class:UX,fixed:Boolean,style:{type:Fe(Object)},width:pp,height:pp,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Fp.hScrollbarSize,vScrollbarSize:Fp.vScrollbarSize,scrollbarAlwaysOn:uX.alwaysOn,sortBy:{type:Fe(Object),default:()=>({})},sortState:{type:Fe(Object),default:void 0},onColumnSort:{type:Fe(Function)},onExpandedRowsChange:{type:Fe(Function)},onEndReached:{type:Fe(Function)},onRowExpand:Cp.onRowExpand,onScroll:l2.onScroll,onRowsRendered:l2.onRowsRendered,rowEventHandlers:Cp.rowEventHandlers}),R3e="ElTableV2Header",P3e=Ie({name:R3e,props:G6,setup(n,{slots:e,expose:t}){const r=gt("table-v2"),i=Lt(zX),s=ne(),a=U(()=>Lf({width:n.width,height:n.height})),o=U(()=>Lf({width:n.rowWidth,height:n.height})),l=U(()=>Is(y(n.headerHeight))),c=h=>{const f=y(s);Ut(()=>{f!=null&&f.scroll&&f.scroll({left:h})})},u=()=>{const h=r.e("fixed-header-row"),{columns:f,fixedHeaderData:p,rowHeight:m}=n;return p==null?void 0:p.map((v,g)=>{var _;const b=Lf({height:m,width:"100%"});return(_=e.fixed)==null?void 0:_.call(e,{class:h,columns:f,rowData:v,rowIndex:-(g+1),style:b})})},d=()=>{const h=r.e("dynamic-header-row"),{columns:f}=n;return y(l).map((p,m)=>{var v;const g=Lf({width:"100%",height:p});return(v=e.dynamic)==null?void 0:v.call(e,{class:h,columns:f,headerIndex:m,style:g})})};return yc(()=>{i!=null&&i.value&&c(i.value)}),t({scrollToLeft:c}),()=>{if(!(n.height<=0))return xe("div",{ref:s,class:n.class,style:y(a),role:"rowgroup"},[xe("div",{style:y(o),class:r.e("header")},[d(),u()])])}}});var D3e=P3e;const L3e=({atXEndEdge:n,atXStartEdge:e,atYEndEdge:t,atYStartEdge:r},i)=>{let s=null,a=0,o=0;const l=(u,d)=>{const h=u<=0&&e.value||u>=0&&n.value,f=d<=0&&r.value||d>=0&&t.value;return h&&f};return{hasReachedEdge:l,onWheel:u=>{Zp(s);let d=u.deltaX,h=u.deltaY;Math.abs(d)>Math.abs(h)?h=0:d=0,u.shiftKey&&h!==0&&(d=h,h=0),!(l(a,o)&&l(a+d,o+h))&&(a+=d,o+=h,u.preventDefault(),s=th(()=>{i(a,o),a=0,o=0}))}}},$X=({name:n,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:i,getEstimatedTotalHeight:s,getEstimatedTotalWidth:a,getColumnOffset:o,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:f,validateProps:p})=>Ie({name:n??"ElVirtualList",props:Fp,emits:[mC,vC],setup(m,{emit:v,expose:g,slots:_}){const b=gt("vl");p(m);const S=Dn(),x=ne(h(m,S));f==null||f(S,x);const w=ne(),M=ne(),C=ne(),A=ne(null),T=ne({isScrolling:!1,scrollLeft:en(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:en(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:nv,yAxisScrollDir:nv}),I=iX(),D=U(()=>Number.parseInt(`${m.height}`,10)),B=U(()=>Number.parseInt(`${m.width}`,10)),O=U(()=>{const{totalColumn:Ve,totalRow:Le,columnCache:Ze}=m,{isScrolling:st,xAxisScrollDir:fe,scrollLeft:V}=y(T);if(Ve===0||Le===0)return[0,0,0,0];const J=r(m,V,y(x)),he=i(m,J,V,y(x)),Oe=!st||fe===gC?Math.max(1,Ze):1,je=!st||fe===nv?Math.max(1,Ze):1;return[Math.max(0,J-Oe),Math.max(0,Math.min(Ve-1,he+je)),J,he]}),H=U(()=>{const{totalColumn:Ve,totalRow:Le,rowCache:Ze}=m,{isScrolling:st,yAxisScrollDir:fe,scrollTop:V}=y(T);if(Ve===0||Le===0)return[0,0,0,0];const J=u(m,V,y(x)),he=d(m,J,V,y(x)),Oe=!st||fe===gC?Math.max(1,Ze):1,je=!st||fe===nv?Math.max(1,Ze):1;return[Math.max(0,J-Oe),Math.max(0,Math.min(Le-1,he+je)),J,he]}),L=U(()=>s(m,y(x))),z=U(()=>a(m,y(x))),k=U(()=>{var Ve;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:en(m.height)?`${m.height}px`:m.height,width:en(m.width)?`${m.width}px`:m.width},(Ve=m.style)!=null?Ve:{}]}),F=U(()=>{const Ve=`${y(z)}px`;return{height:`${y(L)}px`,pointerEvents:y(T).isScrolling?"none":void 0,width:Ve}}),W=()=>{const{totalColumn:Ve,totalRow:Le}=m;if(Ve>0&&Le>0){const[he,Oe,je,dt]=y(O),[pt,Te,ft,Ke]=y(H);v(mC,{columnCacheStart:he,columnCacheEnd:Oe,rowCacheStart:pt,rowCacheEnd:Te,columnVisibleStart:je,columnVisibleEnd:dt,rowVisibleStart:ft,rowVisibleEnd:Ke})}const{scrollLeft:Ze,scrollTop:st,updateRequested:fe,xAxisScrollDir:V,yAxisScrollDir:J}=y(T);v(vC,{xAxisScrollDir:V,scrollLeft:Ze,yAxisScrollDir:J,scrollTop:st,updateRequested:fe})},q=Ve=>{const{clientHeight:Le,clientWidth:Ze,scrollHeight:st,scrollLeft:fe,scrollTop:V,scrollWidth:J}=Ve.currentTarget,he=y(T);if(he.scrollTop===V&&he.scrollLeft===fe)return;let Oe=fe;if(_7(m.direction))switch(bC()){case Hb:Oe=-fe;break;case N6:Oe=J-Ze-fe;break}T.value={...he,isScrolling:!0,scrollLeft:Oe,scrollTop:Math.max(0,Math.min(V,st-Le)),updateRequested:!0,xAxisScrollDir:wp(he.scrollLeft,Oe),yAxisScrollDir:wp(he.scrollTop,V)},Ut(()=>we()),He(),W()},Z=(Ve,Le)=>{const Ze=y(D),st=(L.value-Ze)/Le*Ve;ie({scrollTop:Math.min(L.value-Ze,st)})},se=(Ve,Le)=>{const Ze=y(B),st=(z.value-Ze)/Le*Ve;ie({scrollLeft:Math.min(z.value-Ze,st)})},{onWheel:X}=L3e({atXStartEdge:U(()=>T.value.scrollLeft<=0),atXEndEdge:U(()=>T.value.scrollLeft>=z.value-y(B)),atYStartEdge:U(()=>T.value.scrollTop<=0),atYEndEdge:U(()=>T.value.scrollTop>=L.value-y(D))},(Ve,Le)=>{var Ze,st,fe,V;(st=(Ze=M.value)==null?void 0:Ze.onMouseUp)==null||st.call(Ze),(V=(fe=C.value)==null?void 0:fe.onMouseUp)==null||V.call(fe);const J=y(B),he=y(D);ie({scrollLeft:Math.min(T.value.scrollLeft+Ve,z.value-J),scrollTop:Math.min(T.value.scrollTop+Le,L.value-he)})});Lr(w,"wheel",X,{passive:!1});const ie=({scrollLeft:Ve=T.value.scrollLeft,scrollTop:Le=T.value.scrollTop})=>{Ve=Math.max(Ve,0),Le=Math.max(Le,0);const Ze=y(T);Le===Ze.scrollTop&&Ve===Ze.scrollLeft||(T.value={...Ze,xAxisScrollDir:wp(Ze.scrollLeft,Ve),yAxisScrollDir:wp(Ze.scrollTop,Le),scrollLeft:Ve,scrollTop:Le,updateRequested:!0},Ut(()=>we()),He(),W())},ae=(Ve=0,Le=0,Ze=Tl)=>{const st=y(T);Le=Math.max(0,Math.min(Le,m.totalColumn-1)),Ve=Math.max(0,Math.min(Ve,m.totalRow-1));const fe=Fq(b.namespace.value),V=y(x),J=s(m,V),he=a(m,V);ie({scrollLeft:o(m,Le,Ze,st.scrollLeft,V,he>m.width?fe:0),scrollTop:l(m,Ve,Ze,st.scrollTop,V,J>m.height?fe:0)})},ce=(Ve,Le)=>{const{columnWidth:Ze,direction:st,rowHeight:fe}=m,V=I.value(e&&Ze,e&&fe,e&&st),J=`${Ve},${Le}`;if(fr(V,J))return V[J];{const[,he]=t(m,Le,y(x)),Oe=y(x),je=_7(st),[dt,pt]=c(m,Ve,Oe),[Te]=t(m,Le,Oe);return V[J]={position:"absolute",left:je?void 0:`${he}px`,right:je?`${he}px`:void 0,top:`${pt}px`,height:`${dt}px`,width:`${Te}px`},V[J]}},we=()=>{T.value.isScrolling=!1,Ut(()=>{I.value(-1,null,null)})};Rn(()=>{if(!ar)return;const{initScrollLeft:Ve,initScrollTop:Le}=m,Ze=y(w);Ze&&(en(Ve)&&(Ze.scrollLeft=Ve),en(Le)&&(Ze.scrollTop=Le)),W()});const He=()=>{const{direction:Ve}=m,{scrollLeft:Le,scrollTop:Ze,updateRequested:st}=y(T),fe=y(w);if(st&&fe){if(Ve===Mv)switch(bC()){case Hb:{fe.scrollLeft=-Le;break}case O6:{fe.scrollLeft=Le;break}default:{const{clientWidth:V,scrollWidth:J}=fe;fe.scrollLeft=J-V-Le;break}}else fe.scrollLeft=Math.max(0,Le);fe.scrollTop=Math.max(0,Ze)}},{resetAfterColumnIndex:Ge,resetAfterRowIndex:me,resetAfter:be}=S.proxy;g({windowRef:w,innerRef:A,getItemStyleCache:I,scrollTo:ie,scrollToItem:ae,states:T,resetAfterColumnIndex:Ge,resetAfterRowIndex:me,resetAfter:be});const oe=()=>{const{scrollbarAlwaysOn:Ve,scrollbarStartGap:Le,scrollbarEndGap:Ze,totalColumn:st,totalRow:fe}=m,V=y(B),J=y(D),he=y(z),Oe=y(L),{scrollLeft:je,scrollTop:dt}=y(T),pt=tn(lR,{ref:M,alwaysOn:Ve,startGap:Le,endGap:Ze,class:b.e("horizontal"),clientSize:V,layout:"horizontal",onScroll:se,ratio:V*100/he,scrollFrom:je/(he-V),total:fe,visible:!0}),Te=tn(lR,{ref:C,alwaysOn:Ve,startGap:Le,endGap:Ze,class:b.e("vertical"),clientSize:J,layout:"vertical",onScroll:Z,ratio:J*100/Oe,scrollFrom:dt/(Oe-J),total:st,visible:!0});return{horizontalScrollbar:pt,verticalScrollbar:Te}},j=()=>{var Ve;const[Le,Ze]=y(O),[st,fe]=y(H),{data:V,totalColumn:J,totalRow:he,useIsScrolling:Oe,itemKey:je}=m,dt=[];if(he>0&&J>0)for(let pt=st;pt<=fe;pt++)for(let Te=Le;Te<=Ze;Te++){const ft=je({columnIndex:Te,data:V,rowIndex:pt});dt.push(tn(Bt,{key:ft},(Ve=_.default)==null?void 0:Ve.call(_,{columnIndex:Te,data:V,isScrolling:Oe?y(T).isScrolling:void 0,style:ce(pt,Te),rowIndex:pt})))}return dt},ke=()=>{const Ve=Ln(m.innerElement),Le=j();return[tn(Ve,{style:y(F),ref:A},Wt(Ve)?Le:{default:()=>Le})]};return()=>{const Ve=Ln(m.containerElement),{horizontalScrollbar:Le,verticalScrollbar:Ze}=oe(),st=ke();return tn("div",{key:0,class:b.e("wrapper"),role:m.role},[tn(Ve,{class:m.className,style:y(k),onScroll:q,ref:w},Wt(Ve)?st:{default:()=>st}),Le,Ze])}}}),{max:xC,min:GX,floor:WX}=Math,k3e={column:"columnWidth",row:"rowHeight"},_R={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Yu=(n,e,t,r)=>{const[i,s,a]=[t[r],n[k3e[r]],t[_R[r]]];if(e>a){let o=0;if(a>=0){const l=i[a];o=l.offset+l.size}for(let l=a+1;l<=e;l++){const c=s(l);i[l]={offset:o,size:c},o+=c}t[_R[r]]=e}return i[e]},qX=(n,e,t,r,i,s)=>{for(;t<=r;){const a=t+WX((r-t)/2),o=Yu(n,a,e,s).offset;if(o===i)return a;o<i?t=a+1:r=a-1}return xC(0,t-1)},O3e=(n,e,t,r,i)=>{const s=i==="column"?n.totalColumn:n.totalRow;let a=1;for(;t<s&&Yu(n,t,e,i).offset<r;)t+=a,a*=2;return qX(n,e,WX(t/2),GX(t,s-1),r,i)},B7=(n,e,t,r)=>{const[i,s]=[e[r],e[_R[r]]];return(s>0?i[s].offset:0)>=t?qX(n,e,0,s,t,r):O3e(n,e,xC(0,s),t,r)},KX=({totalRow:n},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:r})=>{let i=0;if(t>=n&&(t=n-1),t>=0){const o=r[t];i=o.offset+o.size}const a=(n-t-1)*e;return i+a},YX=({totalColumn:n},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:r})=>{let i=0;if(r>n&&(r=n-1),r>=0){const o=e[r];i=o.offset+o.size}const a=(n-r-1)*t;return i+a},N3e={column:YX,row:KX},F7=(n,e,t,r,i,s,a)=>{const[o,l]=[s==="row"?n.height:n.width,N3e[s]],c=Yu(n,e,i,s),u=l(n,i),d=xC(0,GX(u-o,c.offset)),h=xC(0,c.offset-o+a+c.size);switch(t===mT&&(r>=h-o&&r<=d+o?t=Tl:t=qc),t){case zb:return d;case Ub:return h;case qc:return Math.round(h+(d-h)/2);case Tl:default:return r>=h&&r<=d?r:h>d||r<h?h:d}},B3e=$X({name:"ElDynamicSizeGrid",getColumnPosition:(n,e,t)=>{const r=Yu(n,e,t,"column");return[r.size,r.offset]},getRowPosition:(n,e,t)=>{const r=Yu(n,e,t,"row");return[r.size,r.offset]},getColumnOffset:(n,e,t,r,i,s)=>F7(n,e,t,r,i,"column",s),getRowOffset:(n,e,t,r,i,s)=>F7(n,e,t,r,i,"row",s),getColumnStartIndexForOffset:(n,e,t)=>B7(n,t,e,"column"),getColumnStopIndexForStartIndex:(n,e,t,r)=>{const i=Yu(n,e,r,"column"),s=t+n.width;let a=i.offset+i.size,o=e;for(;o<n.totalColumn-1&&a<s;)o++,a+=Yu(n,e,r,"column").size;return o},getEstimatedTotalHeight:KX,getEstimatedTotalWidth:YX,getRowStartIndexForOffset:(n,e,t)=>B7(n,t,e,"row"),getRowStopIndexForStartIndex:(n,e,t,r)=>{const{totalRow:i,height:s}=n,a=Yu(n,e,r,"row"),o=t+s;let l=a.size+a.offset,c=e;for(;c<i-1&&l<o;)c++,l+=Yu(n,c,r,"row").size;return c},injectToInstance:(n,e)=>{const t=({columnIndex:s,rowIndex:a},o)=>{var l,c;o=nr(o)?!0:o,en(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),en(a)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,a-1)),(l=n.exposed)==null||l.getItemStyleCache.value(-1,null,null),o&&((c=n.proxy)==null||c.$forceUpdate())},r=(s,a)=>{t({columnIndex:s},a)},i=(s,a)=>{t({rowIndex:s},a)};Object.assign(n.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:i,resetAfter:t})},initCache:({estimatedColumnWidth:n=nR,estimatedRowHeight:e=nR})=>({column:{},estimatedColumnWidth:n,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:n,rowHeight:e})=>{}}),F3e=$X({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:n},e)=>[n,e*n],getRowPosition:({rowHeight:n},e)=>[n,e*n],getEstimatedTotalHeight:({totalRow:n,rowHeight:e})=>e*n,getEstimatedTotalWidth:({totalColumn:n,columnWidth:e})=>e*n,getColumnOffset:({totalColumn:n,columnWidth:e,width:t},r,i,s,a,o)=>{t=Number(t);const l=Math.max(0,n*e-t),c=Math.min(l,r*e),u=Math.max(0,r*e-t+o+e);switch(i==="smart"&&(s>=u-t&&s<=c+t?i=Tl:i=qc),i){case zb:return c;case Ub:return u;case qc:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case Tl:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getRowOffset:({rowHeight:n,height:e,totalRow:t},r,i,s,a,o)=>{e=Number(e);const l=Math.max(0,t*n-e),c=Math.min(l,r*n),u=Math.max(0,r*n-e+o+n);switch(i===mT&&(s>=u-e&&s<=c+e?i=Tl:i=qc),i){case zb:return c;case Ub:return u;case qc:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case Tl:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getColumnStartIndexForOffset:({columnWidth:n,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getColumnStopIndexForStartIndex:({columnWidth:n,totalColumn:e,width:t},r,i)=>{const s=r*n,a=Math.ceil((t+i-s)/n);return Math.max(0,Math.min(e-1,r+a-1))},getRowStartIndexForOffset:({rowHeight:n,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getRowStopIndexForStartIndex:({rowHeight:n,totalRow:e,height:t},r,i)=>{const s=r*n,a=Math.ceil((t+i-s)/n);return Math.max(0,Math.min(e-1,r+a-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:n,rowHeight:e})=>{}}),z3e="ElTableV2Grid",U3e=n=>{const e=ne(),t=ne(),r=ne(0),i=U(()=>{const{data:v,rowHeight:g,estimatedRowHeight:_}=n;if(!_)return v.length*g}),s=U(()=>{const{fixedData:v,rowHeight:g}=n;return((v==null?void 0:v.length)||0)*g}),a=U(()=>o2(n.headerHeight)),o=U(()=>{const{height:v}=n;return Math.max(0,v-y(a)-y(s))}),l=U(()=>y(a)+y(s)>0),c=({data:v,rowIndex:g})=>v[g][n.rowKey];function u({rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:_,rowVisibleEnd:b}){var S;(S=n.onRowsRendered)==null||S.call(n,{rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:_,rowVisibleEnd:b})}function d(v,g){var _;(_=t.value)==null||_.resetAfterRowIndex(v,g)}function h(v,g){const _=y(e),b=y(t);Mn(v)?(_==null||_.scrollToLeft(v.scrollLeft),r.value=v.scrollLeft,b==null||b.scrollTo(v)):(_==null||_.scrollToLeft(v),r.value=v,b==null||b.scrollTo({scrollLeft:v,scrollTop:g}))}function f(v){var g;(g=y(t))==null||g.scrollTo({scrollTop:v})}function p(v,g){var _;(_=y(t))==null||_.scrollToItem(v,1,g)}function m(){var v,g;(v=y(t))==null||v.$forceUpdate(),(g=y(e))==null||g.$forceUpdate()}return ct(()=>n.bodyWidth,()=>{var v;en(n.estimatedRowHeight)&&((v=t.value)==null||v.resetAfter({columnIndex:0},!1))}),{bodyRef:t,forceUpdate:m,fixedRowHeight:s,gridHeight:o,hasHeader:l,headerHeight:a,headerRef:e,totalHeight:i,itemKey:c,onItemRendered:u,resetAfterRowIndex:d,scrollTo:h,scrollToTop:f,scrollToRow:p,scrollLeft:r}},H3e=Ie({name:z3e,props:l2,setup(n,{slots:e,expose:t}){const{ns:r}=Lt(V6),{bodyRef:i,fixedRowHeight:s,gridHeight:a,hasHeader:o,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:f,resetAfterRowIndex:p,scrollTo:m,scrollToTop:v,scrollToRow:g,scrollLeft:_}=U3e(n);jn(zX,_),zM(async()=>{var S;await Ut();const x=(S=i.value)==null?void 0:S.states.scrollTop;x&&v(Math.round(x)+1)}),t({forceUpdate:d,totalHeight:u,scrollTo:m,scrollToTop:v,scrollToRow:g,resetAfterRowIndex:p});const b=()=>n.bodyWidth;return()=>{const{cache:S,columns:x,data:w,fixedData:M,useIsScrolling:C,scrollbarAlwaysOn:A,scrollbarEndGap:T,scrollbarStartGap:I,style:D,rowHeight:B,bodyWidth:O,estimatedRowHeight:H,headerWidth:L,height:z,width:k,getRowHeight:F,onScroll:W}=n,q=en(H),Z=q?B3e:F3e,se=y(c);return xe("div",{role:"table",class:[r.e("table"),n.class],style:D},[xe(Z,{ref:i,data:w,useIsScrolling:C,itemKey:h,columnCache:0,columnWidth:q?b:O,totalColumn:1,totalRow:w.length,rowCache:S,rowHeight:q?F:B,width:k,height:y(a),class:r.e("body"),role:"rowgroup",scrollbarStartGap:I,scrollbarEndGap:T,scrollbarAlwaysOn:A,onScroll:W,onItemRendered:f,perfMode:!1},{default:X=>{var ie;const ae=w[X.rowIndex];return(ie=e.row)==null?void 0:ie.call(e,{...X,columns:x,rowData:ae})}}),y(o)&&xe(D3e,{ref:l,class:r.e("header-wrapper"),columns:x,headerData:w,headerHeight:n.headerHeight,fixedHeaderData:M,rowWidth:L,rowHeight:B,width:k,height:Math.min(se+y(s),z)},{dynamic:e.header,fixed:e.row})])}}});var W6=H3e;function V3e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Kr(n)}const $3e=(n,{slots:e})=>{const{mainTableRef:t,...r}=n;return xe(W6,Nn({ref:t},r),V3e(e)?e:{default:()=>[e]})};var G3e=$3e;function W3e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Kr(n)}const q3e=(n,{slots:e})=>{if(!n.columns.length)return;const{leftTableRef:t,...r}=n;return xe(W6,Nn({ref:t},r),W3e(e)?e:{default:()=>[e]})};var K3e=q3e;function Y3e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Kr(n)}const X3e=(n,{slots:e})=>{if(!n.columns.length)return;const{rightTableRef:t,...r}=n;return xe(W6,Nn({ref:t},r),Y3e(e)?e:{default:()=>[e]})};var j3e=X3e;const Z3e=n=>{const{isScrolling:e}=Lt(V6),t=ne(!1),r=ne(),i=U(()=>en(n.estimatedRowHeight)&&n.rowIndex>=0),s=(l=!1)=>{const c=y(r);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:f,style:p}=n,{height:m}=c.getBoundingClientRect();t.value=!0,Ut(()=>{if(l||m!==Number.parseInt(p.height)){const v=u[0],g=(v==null?void 0:v.placeholderSign)===Wb;d==null||d({rowKey:h,height:m,rowIndex:f},v&&!g&&v.fixed)}})},a=U(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=n,h=n.rowEventHandlers||{},f={};return Object.entries(h).forEach(([p,m])=>{Yt(m)&&(f[p]=v=>{m({event:v,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:m})=>{const v=f[p];f[p]=g=>{d({event:g,hovered:m,rowData:l,rowIndex:c,rowKey:u}),v==null||v(g)}}),f}),o=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=n;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return Rn(()=>{y(i)&&s(!0)}),{isScrolling:e,measurable:i,measured:t,rowRef:r,eventHandlers:a,onExpand:o}},Q3e="ElTableV2TableRow",J3e=Ie({name:Q3e,props:Cp,setup(n,{expose:e,slots:t,attrs:r}){const{eventHandlers:i,isScrolling:s,measurable:a,measured:o,rowRef:l,onExpand:c}=Z3e(n);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:f,rowData:p,rowIndex:m,style:v}=n;let g=u.map((_,b)=>{const S=xt(p.children)&&p.children.length>0&&_.key===h;return t.cell({column:_,columns:u,columnIndex:b,depth:f,style:d[_.key],rowData:p,rowIndex:m,isScrolling:y(s),expandIconProps:S?{rowData:p,rowIndex:m,onExpand:c}:void 0})});if(t.row&&(g=t.row({cells:g.map(_=>xt(_)&&_.length===1?_[0]:_),style:v,columns:u,depth:f,rowData:p,rowIndex:m,isScrolling:y(s)})),y(a)){const{height:_,...b}=v||{},S=y(o);return xe("div",Nn({ref:l,class:n.class,style:S?v:b,role:"row"},r,y(i)),[g])}return xe("div",Nn(r,{ref:l,class:n.class,style:v,role:"row"},y(i)),[g])}}});var eEe=J3e;function tEe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Kr(n)}const nEe=(n,{slots:e})=>{const{columns:t,columnsStyles:r,depthMap:i,expandColumnKey:s,expandedRowKeys:a,estimatedRowHeight:o,hasFixedColumns:l,rowData:c,rowIndex:u,style:d,isScrolling:h,rowProps:f,rowClass:p,rowKey:m,rowEventHandlers:v,ns:g,onRowHovered:_,onRowExpanded:b}=n,S=Jp(p,{columns:t,rowData:c,rowIndex:u},""),x=Jp(f,{columns:t,rowData:c,rowIndex:u}),w=c[m],M=i[w]||0,C=!!s,A=u<0,T=[g.e("row"),S,{[g.e(`row-depth-${M}`)]:C&&u>=0,[g.is("expanded")]:C&&a.includes(w),[g.is("fixed")]:!M&&A,[g.is("customized")]:!!e.row}],I=l?_:void 0,D={...x,columns:t,columnsStyles:r,class:T,depth:M,expandColumnKey:s,estimatedRowHeight:A?void 0:o,isScrolling:h,rowIndex:u,rowData:c,rowKey:w,rowEventHandlers:v,style:d};return xe(eEe,Nn(D,{onRowExpand:b,onMouseenter:H=>{I==null||I({hovered:!0,rowKey:w,event:H,rowData:c,rowIndex:u})},onMouseleave:H=>{I==null||I({hovered:!1,rowKey:w,event:H,rowData:c,rowIndex:u})},rowkey:w}),tEe(e)?e:{default:()=>[e]})};var rEe=nEe;const q6=(n,{slots:e})=>{var t;const{cellData:r,style:i}=n,s=((t=r==null?void 0:r.toString)==null?void 0:t.call(r))||"",a=Ye(e,"default",n,()=>[s]);return xe("div",{class:n.class,title:s,style:i},[a])};q6.displayName="ElTableV2Cell";q6.inheritAttrs=!1;var iEe=q6;const sEe=n=>{const{expanded:e,expandable:t,onExpand:r,style:i,size:s}=n,a={onClick:t?()=>r(!e):void 0,class:n.class};return xe(zt,Nn(a,{size:s,style:i}),{default:()=>[xe(Ta,null,null)]})};var aEe=sEe;const XX=({columns:n,column:e,columnIndex:t,depth:r,expandIconProps:i,isScrolling:s,rowData:a,rowIndex:o,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:f,iconSize:p,rowKey:m},{slots:v})=>{const g=Lf(l);if(e.placeholderSign===Wb)return xe("div",{class:u.em("row-cell","placeholder"),style:g},null);const{cellRenderer:_,dataKey:b,dataGetter:S}=e,x=Yt(S)?S({columns:n,column:e,columnIndex:t,rowData:a,rowIndex:o}):Vi(a,b??""),w=Jp(d,{cellData:x,columns:n,column:e,columnIndex:t,rowIndex:o,rowData:a}),M={class:u.e("cell-text"),columns:n,column:e,columnIndex:t,cellData:x,isScrolling:s,rowData:a,rowIndex:o},C=FX(_),A=C?C(M):Ye(v,"default",M,()=>[xe(iEe,M,null)]),T=[u.e("row-cell"),e.class,e.align===Gb.CENTER&&u.is("align-center"),e.align===Gb.RIGHT&&u.is("align-right")],I=o>=0&&h&&e.key===h,D=o>=0&&c.includes(a[m]);let B;const O=`margin-inline-start: ${r*f}px;`;return I&&(Mn(i)?B=xe(aEe,Nn(i,{class:[u.e("expand-icon"),u.is("expanded",D)],size:p,expanded:D,style:O,expandable:!0}),null):B=xe("div",{style:[O,`width: ${p}px; height: ${p}px;`].join(" ")},null)),xe("div",Nn({class:T,style:g},w,{role:"cell"}),[B,A])};XX.inheritAttrs=!1;var z7=XX;const oEe=Tt({class:String,columns:j_,columnsStyles:{type:Fe(Object),required:!0},headerIndex:Number,style:{type:Fe(Object)}}),lEe=Ie({name:"ElTableV2HeaderRow",props:oEe,setup(n,{slots:e}){return()=>{const{columns:t,columnsStyles:r,headerIndex:i,style:s}=n;let a=t.map((o,l)=>e.cell({columns:t,column:o,columnIndex:l,headerIndex:i,style:r[o.key]}));return e.header&&(a=e.header({cells:a.map(o=>xt(o)&&o.length===1?o[0]:o),columns:t,headerIndex:i})),xe("div",{class:n.class,style:s,role:"row"},[a])}}});var cEe=lEe;function uEe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Kr(n)}const dEe=({columns:n,columnsStyles:e,headerIndex:t,style:r,headerClass:i,headerProps:s,ns:a},{slots:o})=>{const l={columns:n,headerIndex:t},c=[a.e("header-row"),Jp(i,l,""),{[a.is("customized")]:!!o.header}],u={...Jp(s,l),columnsStyles:e,class:c,columns:n,headerIndex:t,style:r};return xe(cEe,u,uEe(o)?o:{default:()=>[o]})};var fEe=dEe;const K6=(n,{slots:e})=>Ye(e,"default",n,()=>{var t,r;return[xe("div",{class:n.class,title:(t=n.column)==null?void 0:t.title},[(r=n.column)==null?void 0:r.title])]});K6.displayName="ElTableV2HeaderCell";K6.inheritAttrs=!1;var hEe=K6;const pEe=n=>{const{sortOrder:e}=n;return xe(zt,{size:14,class:n.class},{default:()=>[e===$b.ASC?xe(Zpe,null,null):xe(Xpe,null,null)]})};var mEe=pEe;const vEe=(n,{slots:e})=>{const{column:t,ns:r,style:i,onColumnSorted:s}=n,a=Lf(i);if(t.placeholderSign===Wb)return xe("div",{class:r.em("header-row-cell","placeholder"),style:a},null);const{headerCellRenderer:o,headerClass:l,sortable:c}=t,u={...n,class:r.e("header-cell-text")},d=FX(o),h=d?d(u):Ye(e,"default",u,()=>[xe(hEe,u,null)]),{sortBy:f,sortState:p,headerCellProps:m}=n;let v,g;if(p){const S=p[t.key];v=!!bR[S],g=v?S:$b.ASC}else v=t.key===f.key,g=v?f.order:$b.ASC;const _=[r.e("header-cell"),Jp(l,n,""),t.align===Gb.CENTER&&r.is("align-center"),t.align===Gb.RIGHT&&r.is("align-right"),c&&r.is("sortable")],b={...Jp(m,n),onClick:t.sortable?s:void 0,class:_,style:a,"data-key":t.key};return xe("div",Nn(b,{role:"columnheader"}),[h,c&&xe(mEe,{class:[r.e("sort-icon"),v&&r.is("sorting")],sortOrder:g},null)])};var U7=vEe;const jX=(n,{slots:e})=>{var t;return xe("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};jX.displayName="ElTableV2Footer";var gEe=jX;const ZX=(n,{slots:e})=>{const t=Ye(e,"default",{},()=>[xe($Y,null,null)]);return xe("div",{class:n.class,style:n.style},[t])};ZX.displayName="ElTableV2Empty";var yEe=ZX;const QX=(n,{slots:e})=>{var t;return xe("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};QX.displayName="ElTableV2Overlay";var bEe=QX;function Ry(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Kr(n)}const _Ee="ElTableV2",SEe=Ie({name:_Ee,props:I3e,setup(n,{slots:e,expose:t}){const r=gt("table-v2"),{columnsStyles:i,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,mainColumns:o,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:f,expandedRowKeys:p,hasFixedColumns:m,mainTableRef:v,leftTableRef:g,rightTableRef:_,isDynamic:b,isResetting:S,isScrolling:x,bodyWidth:w,emptyStyle:M,rootStyle:C,footerHeight:A,showEmpty:T,scrollTo:I,scrollToLeft:D,scrollToTop:B,scrollToRow:O,getRowHeight:H,onColumnSorted:L,onRowHeightChange:z,onRowHovered:k,onRowExpanded:F,onRowsRendered:W,onScroll:q,onVerticalScroll:Z}=A3e(n);return t({scrollTo:I,scrollToLeft:D,scrollToTop:B,scrollToRow:O}),jn(V6,{ns:r,isResetting:S,isScrolling:x}),()=>{const{cache:se,cellProps:X,estimatedRowHeight:ie,expandColumnKey:ae,fixedData:ce,headerHeight:we,headerClass:He,headerProps:Ge,headerCellProps:me,sortBy:be,sortState:oe,rowHeight:j,rowClass:ke,rowEventHandlers:ze,rowKey:Ve,rowProps:Le,scrollbarAlwaysOn:Ze,indentSize:st,iconSize:fe,useIsScrolling:V,vScrollbarSize:J,width:he}=n,Oe=y(h),je={cache:se,class:r.e("main"),columns:y(o),data:Oe,fixedData:ce,estimatedRowHeight:ie,bodyWidth:y(w),headerHeight:we,headerWidth:y(w),height:y(l),mainTableRef:v,rowKey:Ve,rowHeight:j,scrollbarAlwaysOn:Ze,scrollbarStartGap:2,scrollbarEndGap:J,useIsScrolling:V,width:he,getRowHeight:H,onRowsRendered:W,onScroll:q},dt=y(u),pt=y(c),Te={cache:se,class:r.e("left"),columns:y(s),data:Oe,fixedData:ce,estimatedRowHeight:ie,leftTableRef:g,rowHeight:j,bodyWidth:dt,headerWidth:dt,headerHeight:we,height:pt,rowKey:Ve,scrollbarAlwaysOn:Ze,scrollbarStartGap:2,scrollbarEndGap:J,useIsScrolling:V,width:dt,getRowHeight:H,onScroll:Z},ft=y(d),Ke={cache:se,class:r.e("right"),columns:y(a),data:Oe,fixedData:ce,estimatedRowHeight:ie,rightTableRef:_,rowHeight:j,bodyWidth:ft,headerWidth:ft,headerHeight:we,height:pt,rowKey:Ve,scrollbarAlwaysOn:Ze,scrollbarStartGap:2,scrollbarEndGap:J,width:ft,style:`--${y(r.namespace)}-table-scrollbar-size: ${J}px`,useIsScrolling:V,getRowHeight:H,onScroll:Z},Q=y(i),_e={ns:r,depthMap:y(f),columnsStyles:Q,expandColumnKey:ae,expandedRowKeys:y(p),estimatedRowHeight:ie,hasFixedColumns:y(m),rowProps:Le,rowClass:ke,rowKey:Ve,rowEventHandlers:ze,onRowHovered:k,onRowExpanded:F,onRowHeightChange:z},Ae={cellProps:X,expandColumnKey:ae,indentSize:st,iconSize:fe,rowKey:Ve,expandedRowKeys:y(p),ns:r},ge={ns:r,headerClass:He,headerProps:Ge,columnsStyles:Q},pe={ns:r,sortBy:be,sortState:oe,headerCellProps:me,onColumnSorted:L},de={row:vt=>xe(rEe,Nn(vt,_e),{row:e.row,cell:et=>{let yt;return e.cell?xe(z7,Nn(et,Ae,{style:Q[et.column.key]}),Ry(yt=e.cell(et))?yt:{default:()=>[yt]}):xe(z7,Nn(et,Ae,{style:Q[et.column.key]}),null)}}),header:vt=>xe(fEe,Nn(vt,ge),{header:e.header,cell:et=>{let yt;return e["header-cell"]?xe(U7,Nn(et,pe,{style:Q[et.column.key]}),Ry(yt=e["header-cell"](et))?yt:{default:()=>[yt]}):xe(U7,Nn(et,pe,{style:Q[et.column.key]}),null)}})},at=[n.class,r.b(),r.e("root"),{[r.is("dynamic")]:y(b)}],Ee={class:r.e("footer"),style:y(A)};return xe("div",{class:at,style:y(C)},[xe(G3e,je,Ry(de)?de:{default:()=>[de]}),xe(K3e,Te,Ry(de)?de:{default:()=>[de]}),xe(j3e,Ke,Ry(de)?de:{default:()=>[de]}),e.footer&&xe(gEe,Ee,{default:e.footer}),y(T)&&xe(yEe,{class:r.e("empty"),style:y(M)},{default:e.empty}),e.overlay&&xe(bEe,{class:r.e("overlay")},{default:e.overlay})])}}});var xEe=SEe;const wEe=Tt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Fe(Function)}}),CEe=n=>{const e=ne(),t=ne(0),r=ne(0);let i;return Rn(()=>{i=fi(e,([s])=>{const{width:a,height:o}=s.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(s.target),h=Number.parseInt(l)||0,f=Number.parseInt(c)||0,p=Number.parseInt(u)||0,m=Number.parseInt(d)||0;t.value=a-h-f,r.value=o-p-m}).stop}),br(()=>{i==null||i()}),ct([t,r],([s,a])=>{var o;(o=n.onResize)==null||o.call(n,{width:s,height:a})}),{sizer:e,width:t,height:r}},MEe=Ie({name:"ElAutoResizer",props:wEe,setup(n,{slots:e}){const t=gt("auto-resizer"),{height:r,width:i,sizer:s}=CEe(n),a={width:"100%",height:"100%"};return()=>{var o;return xe("div",{ref:s,class:t.b(),style:a},[(o=e.default)==null?void 0:o.call(e,{height:r.value,width:i.value})])}}});var TEe=MEe;const AEe=bn(xEe),EEe=bn(TEe),vT=Symbol("tabsRootContextKey"),IEe=Tt({tabs:{type:Fe(Array),default:()=>hi([])},tabRefs:{type:Fe(Object),default:()=>hi({})}}),JX="ElTabBar",REe=Ie({name:JX}),PEe=Ie({...REe,props:IEe,setup(n,{expose:e}){const t=n,r=Lt(vT);r||Gi(JX,"<el-tabs><el-tab-bar /></el-tabs>");const i=gt("tabs"),s=ne(),a=ne(),o=()=>{let h=0,f=0;const p=["top","bottom"].includes(r.props.tabPosition)?"width":"height",m=p==="width"?"x":"y",v=m==="x"?"left":"top";return t.tabs.every(g=>{if(nr(g.paneName))return!1;const _=t.tabRefs[g.paneName];if(!_)return!1;if(!g.active)return!0;h=_[`offset${Rf(v)}`],f=_[`client${Rf(p)}`];const b=window.getComputedStyle(_);return p==="width"&&(f-=Number.parseFloat(b.paddingLeft)+Number.parseFloat(b.paddingRight),h+=Number.parseFloat(b.paddingLeft)),!1}),{[p]:`${f}px`,transform:`translate${Rf(m)}(${h}px)`}},l=()=>a.value=o(),c=[],u=()=>{c.forEach(h=>h.stop()),c.length=0,Object.values(t.tabRefs).forEach(h=>{c.push(fi(h,l))})};ct(()=>t.tabs,async()=>{await Ut(),l(),u()},{immediate:!0});const d=fi(s,()=>l());return br(()=>{c.forEach(h=>h.stop()),c.length=0,d.stop()}),e({ref:s,update:l}),(h,f)=>($(),ue("div",{ref_key:"barRef",ref:s,class:Y([y(i).e("active-bar"),y(i).is(y(r).props.tabPosition)]),style:Xt(a.value)},null,6))}});var DEe=Et(PEe,[["__file","tab-bar.vue"]]);const LEe=Tt({panes:{type:Fe(Array),default:()=>hi([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),kEe={tabClick:(n,e,t)=>t instanceof Event,tabRemove:(n,e)=>e instanceof Event},H7="ElTabNav",OEe=Ie({name:H7,props:LEe,emits:kEe,setup(n,{expose:e,emit:t}){const r=Lt(vT);r||Gi(H7,"<el-tabs><tab-nav /></el-tabs>");const i=gt("tabs"),s=ohe(),a=She(),o=ne(),l=ne(),c=ne(),u=ne({}),d=ne(),h=ne(!1),f=ne(0),p=ne(!1),m=ne(!0),v=Pr(),g=U(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),_=U(()=>({transform:`translate${g.value==="width"?"X":"Y"}(-${f.value}px)`})),b=()=>{if(!o.value)return;const D=o.value[`offset${Rf(g.value)}`],B=f.value;if(!B)return;const O=B>D?B-D:0;f.value=O},S=()=>{if(!o.value||!l.value)return;const D=l.value[`offset${Rf(g.value)}`],B=o.value[`offset${Rf(g.value)}`],O=f.value;if(D-O<=B)return;const H=D-O>B*2?O+B:D-B;f.value=H},x=async()=>{const D=l.value;if(!h.value||!c.value||!o.value||!D)return;await Ut();const B=u.value[n.currentName];if(!B)return;const O=o.value,H=["top","bottom"].includes(r.props.tabPosition),L=B.getBoundingClientRect(),z=O.getBoundingClientRect(),k=H?D.offsetWidth-z.width:D.offsetHeight-z.height,F=f.value;let W=F;H?(L.left<z.left&&(W=F-(z.left-L.left)),L.right>z.right&&(W=F+L.right-z.right)):(L.top<z.top&&(W=F-(z.top-L.top)),L.bottom>z.bottom&&(W=F+(L.bottom-z.bottom))),W=Math.max(W,0),f.value=Math.min(W,k)},w=()=>{var D;if(!l.value||!o.value)return;n.stretch&&((D=d.value)==null||D.update());const B=l.value[`offset${Rf(g.value)}`],O=o.value[`offset${Rf(g.value)}`],H=f.value;O<B?(h.value=h.value||{},h.value.prev=H,h.value.next=H+O<B,B-H<O&&(f.value=B-O)):(h.value=!1,H>0&&(f.value=0))},M=D=>{let B=0;switch(D.code){case Rt.left:case Rt.up:B=-1;break;case Rt.right:case Rt.down:B=1;break;default:return}const O=Array.from(D.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let L=O.indexOf(D.target)+B;L<0?L=O.length-1:L>=O.length&&(L=0),O[L].focus({preventScroll:!0}),O[L].click(),C()},C=()=>{m.value&&(p.value=!0)},A=()=>p.value=!1,T=(D,B)=>{u.value[B]=D},I=async()=>{await Ut();const D=u.value[n.currentName];D==null||D.focus({preventScroll:!0})};return ct(s,D=>{D==="hidden"?m.value=!1:D==="visible"&&setTimeout(()=>m.value=!0,50)}),ct(a,D=>{D?setTimeout(()=>m.value=!0,50):m.value=!1}),fi(c,w),Rn(()=>setTimeout(()=>x(),0)),yc(()=>w()),e({scrollToActiveTab:x,removeFocus:A,focusActiveTab:I,tabListRef:l,tabBarRef:d,scheduleRender:()=>Yw(v)}),()=>{const D=h.value?[xe("span",{class:[i.e("nav-prev"),i.is("disabled",!h.value.prev)],onClick:b},[xe(zt,null,{default:()=>[xe(bd,null,null)]})]),xe("span",{class:[i.e("nav-next"),i.is("disabled",!h.value.next)],onClick:S},[xe(zt,null,{default:()=>[xe(Ta,null,null)]})])]:null,B=n.panes.map((O,H)=>{var L,z,k,F;const W=O.uid,q=O.props.disabled,Z=(z=(L=O.props.name)!=null?L:O.index)!=null?z:`${H}`,se=!q&&(O.isClosable||n.editable);O.index=`${H}`;const X=se?xe(zt,{class:"is-icon-close",onClick:ce=>t("tabRemove",O,ce)},{default:()=>[xe(Bl,null,null)]}):null,ie=((F=(k=O.slots).label)==null?void 0:F.call(k))||O.props.label,ae=!q&&O.active?0:-1;return xe("div",{ref:ce=>T(ce,Z),class:[i.e("item"),i.is(r.props.tabPosition),i.is("active",O.active),i.is("disabled",q),i.is("closable",se),i.is("focus",p.value)],id:`tab-${Z}`,key:`tab-${W}`,"aria-controls":`pane-${Z}`,role:"tab","aria-selected":O.active,tabindex:ae,onFocus:()=>C(),onBlur:()=>A(),onClick:ce=>{A(),t("tabClick",O,Z,ce)},onKeydown:ce=>{se&&(ce.code===Rt.delete||ce.code===Rt.backspace)&&t("tabRemove",O,ce)}},[ie,X])});return v.value,xe("div",{ref:c,class:[i.e("nav-wrap"),i.is("scrollable",!!h.value),i.is(r.props.tabPosition)]},[D,xe("div",{class:i.e("nav-scroll"),ref:o},[n.panes.length>0?xe("div",{class:[i.e("nav"),i.is(r.props.tabPosition),i.is("stretch",n.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:l,style:_.value,role:"tablist",onKeydown:M},[n.type?null:xe(DEe,{ref:d,tabs:[...n.panes],tabRefs:u.value},null),B]):null])])}}}),NEe=Tt({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Fe(Function),default:()=>!0},stretch:Boolean}),h3=n=>Wt(n)||en(n),BEe={[mn]:n=>h3(n),tabClick:(n,e)=>e instanceof Event,tabChange:n=>h3(n),edit:(n,e)=>["remove","add"].includes(e),tabRemove:n=>h3(n),tabAdd:()=>!0},FEe=Ie({name:"ElTabs",props:NEe,emits:BEe,setup(n,{emit:e,slots:t,expose:r}){var i;const s=gt("tabs"),a=U(()=>["left","right"].includes(n.tabPosition)),{children:o,addChild:l,removeChild:c,ChildrenSorter:u}=lT(Dn(),"ElTabPane"),d=ne(),h=ne((i=n.modelValue)!=null?i:"0"),f=async(_,b=!1)=>{var S,x,w,M;if(!(h.value===_||nr(_)))try{let C;if(n.beforeLeave){const A=n.beforeLeave(_,h.value);C=A instanceof Promise?await A:A}else C=!0;if(C!==!1){const A=(S=o.value.find(T=>T.paneName===h.value))==null?void 0:S.isFocusInsidePane();h.value=_,b&&(e(mn,_),e("tabChange",_)),(w=(x=d.value)==null?void 0:x.removeFocus)==null||w.call(x),A&&((M=d.value)==null||M.focusActiveTab())}}catch{}},p=(_,b,S)=>{_.props.disabled||(e("tabClick",_,S),f(b,!0))},m=(_,b)=>{_.props.disabled||nr(_.props.name)||(b.stopPropagation(),e("edit",_.props.name,"remove"),e("tabRemove",_.props.name))},v=()=>{e("edit",void 0,"add"),e("tabAdd")},g=_=>{const b=_.el.firstChild,S=["bottom","right"].includes(n.tabPosition)?_.children[0].el:_.children[1].el;b!==S&&b.before(S)};return ct(()=>n.modelValue,_=>f(_)),ct(h,async()=>{var _;await Ut(),(_=d.value)==null||_.scrollToActiveTab()}),jn(vT,{props:n,currentName:h,registerPane:l,unregisterPane:c,nav$:d}),r({currentName:h,get tabNavRef(){return xq(d.value,["scheduleRender"])}}),()=>{const _=t["add-icon"],b=n.editable||n.addable?xe("div",{class:[s.e("new-tab"),a.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:v,onKeydown:M=>{[Rt.enter,Rt.numpadEnter].includes(M.code)&&v()}},[_?Ye(t,"add-icon"):xe(zt,{class:s.is("icon-plus")},{default:()=>[xe(Wq,null,null)]})]):null,S=()=>xe(OEe,{ref:d,currentName:h.value,editable:n.editable,type:n.type,panes:o.value,stretch:n.stretch,onTabClick:p,onTabRemove:m},null),x=xe("div",{class:[s.e("header"),a.value&&s.e("header-vertical"),s.is(n.tabPosition)]},[xe(u,null,{default:S,$stable:!0}),b]),w=xe("div",{class:s.e("content")},[Ye(t,"default")]);return xe("div",{class:[s.b(),s.m(n.tabPosition),{[s.m("card")]:n.type==="card",[s.m("border-card")]:n.type==="border-card"}],onVnodeMounted:g,onVnodeUpdated:g},[w,x])}}});var zEe=FEe;const UEe=Tt({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ej="ElTabPane",HEe=Ie({name:ej}),VEe=Ie({...HEe,props:UEe,setup(n){const e=n,t=Dn(),r=es(),i=Lt(vT);i||Gi(ej,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=gt("tab-pane"),a=ne(),o=ne(),l=U(()=>e.closable||i.props.closable),c=rC(()=>{var m;return i.currentName.value===((m=e.name)!=null?m:o.value)}),u=ne(c.value),d=U(()=>{var m;return(m=e.name)!=null?m:o.value}),h=rC(()=>!e.lazy||u.value||c.value),f=()=>{var m;return(m=a.value)==null?void 0:m.contains(document.activeElement)};ct(c,m=>{m&&(u.value=!0)});const p=pr({uid:t.uid,getVnode:()=>t.vnode,slots:r,props:e,paneName:d,active:c,index:o,isClosable:l,isFocusInsidePane:f});return i.registerPane(p),br(()=>{i.unregisterPane(p)}),pD(()=>{var m;r.label&&((m=i.nav$.value)==null||m.scheduleRender())}),(m,v)=>y(h)?Cn(($(),ue("div",{key:0,id:`pane-${y(d)}`,ref_key:"paneRef",ref:a,class:Y(y(s).b()),role:"tabpanel","aria-hidden":!y(c),"aria-labelledby":`tab-${y(d)}`},[Ye(m.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[cr,y(c)]]):Xe("v-if",!0)}});var tj=Et(VEe,[["__file","tab-pane.vue"]]);const $Ee=bn(zEe,{TabPane:tj}),GEe=pi(tj),WEe=Tt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:pu,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),qEe=Ie({name:"ElText"}),KEe=Ie({...qEe,props:WEe,setup(n){const e=n,t=ne(),r=Qi(),i=gt("text"),s=U(()=>[i.b(),i.m(e.type),i.m(r.value),i.is("truncated",e.truncated),i.is("line-clamp",!nr(e.lineClamp))]),a=()=>{var o,l,c,u,d,h,f;if(Pd().title)return;let m=!1;const v=((o=t.value)==null?void 0:o.textContent)||"";if(e.truncated){const g=(l=t.value)==null?void 0:l.offsetWidth,_=(c=t.value)==null?void 0:c.scrollWidth;g&&_&&_>g&&(m=!0)}else if(!nr(e.lineClamp)){const g=(u=t.value)==null?void 0:u.offsetHeight,_=(d=t.value)==null?void 0:d.scrollHeight;g&&_&&_>g&&(m=!0)}m?(h=t.value)==null||h.setAttribute("title",v):(f=t.value)==null||f.removeAttribute("title")};return Rn(a),yc(a),(o,l)=>($(),rt(Ln(o.tag),{ref_key:"textRef",ref:t,class:Y(y(s)),style:Xt({"-webkit-line-clamp":o.lineClamp})},{default:Re(()=>[Ye(o.$slots,"default")]),_:3},8,["class","style"]))}});var YEe=Et(KEe,[["__file","text.vue"]]);const Y6=bn(YEe),XEe=Tt({format:{type:String,default:"HH:mm"},modelValue:{type:Fe(String)},disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:Fe(String),default:"light"},clearable:{type:Boolean,default:!0},size:as,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:Fe(String)},maxTime:{type:Fe(String)},includeEndTime:Boolean,name:String,prefixIcon:{type:Fe([String,Object]),default:()=>Gq},clearIcon:{type:Fe([String,Object]),default:()=>kd},...g0}),Ju=n=>{const e=(n||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const r=Number.parseInt(e[1],10),i=n.toUpperCase();return i.includes("AM")&&t===12?t=0:i.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:r}}return null},p3=(n,e)=>{const t=Ju(n);if(!t)return-1;const r=Ju(e);if(!r)return-1;const i=t.minutes+t.hours*60,s=r.minutes+r.hours*60;return i===s?0:i>s?1:-1},V7=n=>`${n}`.padStart(2,"0"),Gm=n=>`${V7(n.hours)}:${V7(n.minutes)}`,jEe=(n,e)=>{const t=Ju(n);if(!t)return"";const r=Ju(e);if(!r)return"";const i={hours:t.hours,minutes:t.minutes};return i.minutes+=r.minutes,i.hours+=r.hours,i.hours+=Math.floor(i.minutes/60),i.minutes=i.minutes%60,Gm(i)},ZEe=Ie({name:"ElTimeSelect"}),QEe=Ie({...ZEe,props:XEe,emits:[Hn,"blur","focus","clear",mn],setup(n,{expose:e}){const t=n;xn.extend(d6);const{Option:r}=Qp,i=gt("input"),s=ne(),a=la(),{lang:o}=sr(),l=U(()=>t.modelValue),c=U(()=>{const g=Ju(t.start);return g?Gm(g):null}),u=U(()=>{const g=Ju(t.end);return g?Gm(g):null}),d=U(()=>{const g=Ju(t.step);return g?Gm(g):null}),h=U(()=>{const g=Ju(t.minTime||"");return g?Gm(g):null}),f=U(()=>{const g=Ju(t.maxTime||"");return g?Gm(g):null}),p=U(()=>{var g;const _=[],b=(S,x)=>{_.push({value:S,disabled:p3(x,h.value||"-1:-1")<=0||p3(x,f.value||"100:100")>=0})};if(t.start&&t.end&&t.step){let S=c.value,x;for(;S&&u.value&&p3(S,u.value)<=0;)x=xn(S,"HH:mm").locale(o.value).format(t.format),b(x,S),S=jEe(S,d.value);if(t.includeEndTime&&u.value&&((g=_[_.length-1])==null?void 0:g.value)!==u.value){const w=xn(u.value,"HH:mm").locale(o.value).format(t.format);b(w,u.value)}}return _});return e({blur:()=>{var g,_;(_=(g=s.value)==null?void 0:g.blur)==null||_.call(g)},focus:()=>{var g,_;(_=(g=s.value)==null?void 0:g.focus)==null||_.call(g)}}),(g,_)=>($(),rt(y(Qp),{ref_key:"select",ref:s,"model-value":y(l),disabled:y(a),clearable:g.clearable,"clear-icon":g.clearIcon,size:g.size,effect:g.effect,placeholder:g.placeholder,"default-first-option":"",filterable:g.editable,"empty-values":g.emptyValues,"value-on-clear":g.valueOnClear,"onUpdate:modelValue":b=>g.$emit(y(mn),b),onChange:b=>g.$emit(y(Hn),b),onBlur:b=>g.$emit("blur",b),onFocus:b=>g.$emit("focus",b),onClear:()=>g.$emit("clear")},{prefix:Re(()=>[g.prefixIcon?($(),rt(y(zt),{key:0,class:Y(y(i).e("prefix-icon"))},{default:Re(()=>[($(),rt(Ln(g.prefixIcon)))]),_:1},8,["class"])):Xe("v-if",!0)]),default:Re(()=>[($(!0),ue(Bt,null,Fn(y(p),b=>($(),rt(y(r),{key:b.value,label:b.value,value:b.value,disabled:b.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var JEe=Et(QEe,[["__file","time-select.vue"]]);const e4e=bn(JEe),t4e="timeline",n4e=Ie({name:"ElTimeline",setup(n,{slots:e}){const t=gt("timeline");return jn(t4e,e),()=>tn("ul",{class:[t.b()]},[Ye(e,"default")])}}),r4e=Tt({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Ar},hollow:Boolean}),i4e=Ie({name:"ElTimelineItem"}),s4e=Ie({...i4e,props:r4e,setup(n){const e=n,t=gt("timeline-item"),r=U(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(i,s)=>($(),ue("li",{class:Y([y(t).b(),{[y(t).e("center")]:i.center}])},[ye("div",{class:Y(y(t).e("tail"))},null,2),i.$slots.dot?Xe("v-if",!0):($(),ue("div",{key:0,class:Y(y(r)),style:Xt({backgroundColor:i.color})},[i.icon?($(),rt(y(zt),{key:0,class:Y(y(t).e("icon"))},{default:Re(()=>[($(),rt(Ln(i.icon)))]),_:1},8,["class"])):Xe("v-if",!0)],6)),i.$slots.dot?($(),ue("div",{key:1,class:Y(y(t).e("dot"))},[Ye(i.$slots,"dot")],2)):Xe("v-if",!0),ye("div",{class:Y(y(t).e("wrapper"))},[!i.hideTimestamp&&i.placement==="top"?($(),ue("div",{key:0,class:Y([y(t).e("timestamp"),y(t).is("top")])},Ct(i.timestamp),3)):Xe("v-if",!0),ye("div",{class:Y(y(t).e("content"))},[Ye(i.$slots,"default")],2),!i.hideTimestamp&&i.placement==="bottom"?($(),ue("div",{key:1,class:Y([y(t).e("timestamp"),y(t).is("bottom")])},Ct(i.timestamp),3)):Xe("v-if",!0)],2)],2))}});var nj=Et(s4e,[["__file","timeline-item.vue"]]);const a4e=bn(n4e,{TimelineItem:nj}),o4e=pi(nj),rj=Tt({nowrap:Boolean});var ij=(n=>(n.top="top",n.bottom="bottom",n.left="left",n.right="right",n))(ij||{});const l4e=Object.values(ij),X6=Tt({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Fe(Object),default:null}}),c4e=Tt({side:{type:Fe(String),values:l4e,required:!0}}),u4e=["absolute","fixed"],d4e=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],j6=Tt({arrowPadding:{type:Fe(Number),default:5},effect:{type:Fe(String),default:"light"},contentClass:String,placement:{type:Fe(String),values:d4e,default:"bottom"},reference:{type:Fe(Object),default:null},offset:{type:Number,default:8},strategy:{type:Fe(String),values:u4e,default:"absolute"},showArrow:Boolean,...aa(["ariaLabel"])}),Z6=Tt({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Fe(Function)},"onUpdate:open":{type:Fe(Function)}}),z0={type:Fe(Function)},Q6=Tt({onBlur:z0,onClick:z0,onFocus:z0,onMouseDown:z0,onMouseEnter:z0,onMouseLeave:z0}),f4e=Tt({...Z6,...X6,...Q6,...j6,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Fe(Object),default:null},teleported:Boolean,to:{type:Fe([String,Object]),default:"body"}}),gT=Symbol("tooltipV2"),sj=Symbol("tooltipV2Content"),m3="tooltip_v2.open",h4e=Ie({name:"ElTooltipV2Root"}),p4e=Ie({...h4e,props:Z6,setup(n,{expose:e}){const t=n,r=ne(t.defaultOpen),i=ne(null),s=U({get:()=>vo(t.open)?r.value:t.open,set:v=>{var g;r.value=v,(g=t["onUpdate:open"])==null||g.call(t,v)}}),a=U(()=>en(t.delayDuration)&&t.delayDuration>0),{start:o,stop:l}=jp(()=>{s.value=!0},U(()=>t.delayDuration),{immediate:!1}),c=gt("tooltip-v2"),u=Ws(),d=()=>{l(),s.value=!0},h=()=>{y(a)?o():d()},f=d,p=()=>{l(),s.value=!1};return ct(s,v=>{var g;v&&(document.dispatchEvent(new CustomEvent(m3)),f()),(g=t.onOpenChange)==null||g.call(t,v)}),Rn(()=>{document.addEventListener(m3,p)}),br(()=>{l(),document.removeEventListener(m3,p)}),jn(gT,{contentId:u,triggerRef:i,ns:c,onClose:p,onDelayOpen:h,onOpen:f}),e({onOpen:f,onClose:p}),(v,g)=>Ye(v.$slots,"default",{open:y(s)})}});var m4e=Et(p4e,[["__file","root.vue"]]);const v4e=Ie({name:"ElTooltipV2Arrow"}),g4e=Ie({...v4e,props:{...X6,...c4e},setup(n){const e=n,{ns:t}=Lt(gT),{arrowRef:r}=Lt(sj),i=U(()=>{const{style:s,width:a,height:o}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${a}px`,[`--${l}-tooltip-v2-arrow-height`]:`${o}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${a/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:a/2-1,...s||{}}});return(s,a)=>($(),ue("span",{ref_key:"arrowRef",ref:r,style:Xt(y(i)),class:Y(y(t).e("arrow"))},null,6))}});var $7=Et(g4e,[["__file","arrow.vue"]]);const sg=Math.min,zp=Math.max,wC=Math.round,WS=Math.floor,Jc=n=>({x:n,y:n}),y4e={left:"right",right:"left",bottom:"top",top:"bottom"},b4e={start:"end",end:"start"};function SR(n,e,t){return zp(n,sg(e,t))}function Z_(n,e){return typeof n=="function"?n(e):n}function e0(n){return n.split("-")[0]}function Q_(n){return n.split("-")[1]}function aj(n){return n==="x"?"y":"x"}function J6(n){return n==="y"?"height":"width"}const _4e=new Set(["top","bottom"]);function kf(n){return _4e.has(e0(n))?"y":"x"}function eL(n){return aj(kf(n))}function S4e(n,e,t){t===void 0&&(t=!1);const r=Q_(n),i=eL(n),s=J6(i);let a=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=CC(a)),[a,CC(a)]}function x4e(n){const e=CC(n);return[xR(n),e,xR(e)]}function xR(n){return n.replace(/start|end/g,e=>b4e[e])}const G7=["left","right"],W7=["right","left"],w4e=["top","bottom"],C4e=["bottom","top"];function M4e(n,e,t){switch(n){case"top":case"bottom":return t?e?W7:G7:e?G7:W7;case"left":case"right":return e?w4e:C4e;default:return[]}}function T4e(n,e,t,r){const i=Q_(n);let s=M4e(e0(n),t==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(xR)))),s}function CC(n){return n.replace(/left|right|bottom|top/g,e=>y4e[e])}function A4e(n){return{top:0,right:0,bottom:0,left:0,...n}}function oj(n){return typeof n!="number"?A4e(n):{top:n,right:n,bottom:n,left:n}}function MC(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function q7(n,e,t){let{reference:r,floating:i}=n;const s=kf(e),a=eL(e),o=J6(a),l=e0(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Q_(e)){case"start":f[a]-=h*(t&&c?-1:1);break;case"end":f[a]+=h*(t&&c?-1:1);break}return f}const E4e=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:d}=q7(c,r,l),h=r,f={},p=0;for(let m=0;m<o.length;m++){const{name:v,fn:g}=o[m],{x:_,y:b,data:S,reset:x}=await g({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:a,elements:{reference:n,floating:e}});u=_??u,d=b??d,f={...f,[v]:{...f[v],...S}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(c=x.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:i}):x.rects),{x:u,y:d}=q7(c,h,l)),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function tL(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Z_(e,n),p=oj(f),v=o[h?d==="floating"?"reference":"floating":d],g=MC(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=MC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:b,strategy:l}):_);return{top:(g.top-x.top+p.top)/S.y,bottom:(x.bottom-g.bottom+p.bottom)/S.y,left:(g.left-x.left+p.left)/S.x,right:(x.right-g.right+p.right)/S.x}}const I4e=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=Z_(n,e)||{};if(c==null)return{};const d=oj(u),h={x:t,y:r},f=eL(i),p=J6(f),m=await a.getDimensions(c),v=f==="y",g=v?"top":"left",_=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=s.reference[p]+s.reference[f]-h[f]-s.floating[p],x=h[f]-s.reference[f],w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let M=w?w[b]:0;(!M||!await(a.isElement==null?void 0:a.isElement(w)))&&(M=o.floating[b]||s.floating[p]);const C=S/2-x/2,A=M/2-m[p]/2-1,T=sg(d[g],A),I=sg(d[_],A),D=T,B=M-m[p]-I,O=M/2-m[p]/2+C,H=SR(D,O,B),L=!l.arrow&&Q_(i)!=null&&O!==H&&s.reference[p]/2-(O<D?T:I)-m[p]/2<0,z=L?O<D?O-D:O-B:0;return{[f]:h[f]+z,data:{[f]:H,centerOffset:O-H-z,...L&&{alignmentOffset:z}},reset:L}}}),R4e=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...v}=Z_(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=e0(i),_=kf(o),b=e0(o)===o,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=h||(b||!m?[CC(o)]:x4e(o)),w=p!=="none";!h&&w&&x.push(...T4e(o,m,p,S));const M=[o,...x],C=await tL(e,v),A=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(C[g]),d){const O=S4e(i,a,S);A.push(C[O[0]],C[O[1]])}if(T=[...T,{placement:i,overflows:A}],!A.every(O=>O<=0)){var I,D;const O=(((I=s.flip)==null?void 0:I.index)||0)+1,H=M[O];if(H&&(!(d==="alignment"?_!==kf(H):!1)||T.every(k=>kf(k.placement)===_?k.overflows[0]>0:!0)))return{data:{index:O,overflows:T},reset:{placement:H}};let L=(D=T.filter(z=>z.overflows[0]<=0).sort((z,k)=>z.overflows[1]-k.overflows[1])[0])==null?void 0:D.placement;if(!L)switch(f){case"bestFit":{var B;const z=(B=T.filter(k=>{if(w){const F=kf(k.placement);return F===_||F==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(F=>F>0).reduce((F,W)=>F+W,0)]).sort((k,F)=>k[1]-F[1])[0])==null?void 0:B[0];z&&(L=z);break}case"initialPlacement":L=o;break}if(i!==L)return{reset:{placement:L}}}return{}}}},P4e=new Set(["left","top"]);async function D4e(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=e0(t),o=Q_(t),l=kf(t)==="y",c=P4e.has(a)?-1:1,u=s&&l?-1:1,d=Z_(e,n);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof p=="number"&&(f=o==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const L4e=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await D4e(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},k4e=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:g,y:_}=v;return{x:g,y:_}}},...l}=Z_(n,e),c={x:t,y:r},u=await tL(e,l),d=kf(e0(i)),h=aj(d);let f=c[h],p=c[d];if(s){const v=h==="y"?"top":"left",g=h==="y"?"bottom":"right",_=f+u[v],b=f-u[g];f=SR(_,f,b)}if(a){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",_=p+u[v],b=p-u[g];p=SR(_,p,b)}const m=o.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[h]:s,[d]:a}}}}}};function yT(){return typeof window<"u"}function Wg(n){return lj(n)?(n.nodeName||"").toLowerCase():"#document"}function Yo(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function yu(n){var e;return(e=(lj(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function lj(n){return yT()?n instanceof Node||n instanceof Yo(n).Node:!1}function vc(n){return yT()?n instanceof Element||n instanceof Yo(n).Element:!1}function ou(n){return yT()?n instanceof HTMLElement||n instanceof Yo(n).HTMLElement:!1}function K7(n){return!yT()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Yo(n).ShadowRoot}const O4e=new Set(["inline","contents"]);function J_(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=gc(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!O4e.has(i)}const N4e=new Set(["table","td","th"]);function B4e(n){return N4e.has(Wg(n))}const F4e=[":popover-open",":modal"];function bT(n){return F4e.some(e=>{try{return n.matches(e)}catch{return!1}})}const z4e=["transform","translate","scale","rotate","perspective"],U4e=["transform","translate","scale","rotate","perspective","filter"],H4e=["paint","layout","strict","content"];function nL(n){const e=rL(),t=vc(n)?gc(n):n;return z4e.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||U4e.some(r=>(t.willChange||"").includes(r))||H4e.some(r=>(t.contain||"").includes(r))}function V4e(n){let e=sh(n);for(;ou(e)&&!ag(e);){if(nL(e))return e;if(bT(e))return null;e=sh(e)}return null}function rL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $4e=new Set(["html","body","#document"]);function ag(n){return $4e.has(Wg(n))}function gc(n){return Yo(n).getComputedStyle(n)}function _T(n){return vc(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function sh(n){if(Wg(n)==="html")return n;const e=n.assignedSlot||n.parentNode||K7(n)&&n.host||yu(n);return K7(e)?e.host:e}function cj(n){const e=sh(n);return ag(e)?n.ownerDocument?n.ownerDocument.body:n.body:ou(e)&&J_(e)?e:cj(e)}function qb(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=cj(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),a=Yo(i);if(s){const o=wR(a);return e.concat(a,a.visualViewport||[],J_(i)?i:[],o&&t?qb(o):[])}return e.concat(i,qb(i,[],t))}function wR(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function uj(n){const e=gc(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ou(n),s=i?n.offsetWidth:t,a=i?n.offsetHeight:r,o=wC(t)!==s||wC(r)!==a;return o&&(t=s,r=a),{width:t,height:r,$:o}}function iL(n){return vc(n)?n:n.contextElement}function Av(n){const e=iL(n);if(!ou(e))return Jc(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=uj(e);let a=(s?wC(t.width):t.width)/r,o=(s?wC(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const G4e=Jc(0);function dj(n){const e=Yo(n);return!rL()||!e.visualViewport?G4e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function W4e(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Yo(n)?!1:e}function t0(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=iL(n);let a=Jc(1);e&&(r?vc(r)&&(a=Av(r)):a=Av(n));const o=W4e(s,t,r)?dj(s):Jc(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const h=Yo(s),f=r&&vc(r)?Yo(r):r;let p=h,m=wR(p);for(;m&&r&&f!==p;){const v=Av(m),g=m.getBoundingClientRect(),_=gc(m),b=g.left+(m.clientLeft+parseFloat(_.paddingLeft))*v.x,S=g.top+(m.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=b,c+=S,p=Yo(m),m=wR(p)}}return MC({width:u,height:d,x:l,y:c})}function sL(n,e){const t=_T(n).scrollLeft;return e?e.left+t:t0(yu(n)).left+t}function fj(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:sL(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function q4e(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",a=yu(r),o=e?bT(e.floating):!1;if(r===a||o&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Jc(1);const u=Jc(0),d=ou(r);if((d||!d&&!s)&&((Wg(r)!=="body"||J_(a))&&(l=_T(r)),ou(r))){const f=t0(r);c=Av(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const h=a&&!d&&!s?fj(a,l,!0):Jc(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:t.y*c.y-l.scrollTop*c.y+u.y+h.y}}function K4e(n){return Array.from(n.getClientRects())}function Y4e(n){const e=yu(n),t=_T(n),r=n.ownerDocument.body,i=zp(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=zp(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+sL(n);const o=-t.scrollTop;return gc(r).direction==="rtl"&&(a+=zp(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function X4e(n,e){const t=Yo(n),r=yu(n),i=t.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=rL();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}const j4e=new Set(["absolute","fixed"]);function Z4e(n,e){const t=t0(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=ou(n)?Av(n):Jc(1),a=n.clientWidth*s.x,o=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function Y7(n,e,t){let r;if(e==="viewport")r=X4e(n,t);else if(e==="document")r=Y4e(yu(n));else if(vc(e))r=Z4e(e,t);else{const i=dj(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return MC(r)}function hj(n,e){const t=sh(n);return t===e||!vc(t)||ag(t)?!1:gc(t).position==="fixed"||hj(t,e)}function Q4e(n,e){const t=e.get(n);if(t)return t;let r=qb(n,[],!1).filter(o=>vc(o)&&Wg(o)!=="body"),i=null;const s=gc(n).position==="fixed";let a=s?sh(n):n;for(;vc(a)&&!ag(a);){const o=gc(a),l=nL(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&j4e.has(i.position)||J_(a)&&!l&&hj(n,a))?r=r.filter(u=>u!==a):i=o,a=sh(a)}return e.set(n,r),r}function J4e(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const a=[...t==="clippingAncestors"?bT(e)?[]:Q4e(e,this._c):[].concat(t),r],o=a[0],l=a.reduce((c,u)=>{const d=Y7(e,u,i);return c.top=zp(d.top,c.top),c.right=sg(d.right,c.right),c.bottom=sg(d.bottom,c.bottom),c.left=zp(d.left,c.left),c},Y7(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eIe(n){const{width:e,height:t}=uj(n);return{width:e,height:t}}function tIe(n,e,t){const r=ou(e),i=yu(e),s=t==="fixed",a=t0(n,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Jc(0);function c(){l.x=sL(i)}if(r||!r&&!s)if((Wg(e)!=="body"||J_(i))&&(o=_T(e)),r){const f=t0(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?fj(i,o):Jc(0),d=a.left+o.scrollLeft-l.x-u.x,h=a.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function v3(n){return gc(n).position==="static"}function X7(n,e){if(!ou(n)||gc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return yu(n)===t&&(t=t.ownerDocument.body),t}function pj(n,e){const t=Yo(n);if(bT(n))return t;if(!ou(n)){let i=sh(n);for(;i&&!ag(i);){if(vc(i)&&!v3(i))return i;i=sh(i)}return t}let r=X7(n,e);for(;r&&B4e(r)&&v3(r);)r=X7(r,e);return r&&ag(r)&&v3(r)&&!nL(r)?t:r||V4e(n)||t}const nIe=async function(n){const e=this.getOffsetParent||pj,t=this.getDimensions,r=await t(n.floating);return{reference:tIe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rIe(n){return gc(n).direction==="rtl"}const iIe={convertOffsetParentRelativeRectToViewportRelativeRect:q4e,getDocumentElement:yu,getClippingRect:J4e,getOffsetParent:pj,getElementRects:nIe,getClientRects:K4e,getDimensions:eIe,getScale:Av,isElement:vc,isRTL:rIe};function mj(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function sIe(n,e){let t=null,r;const i=yu(n);function s(){var o;clearTimeout(r),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(o||e(),!h||!f)return;const p=WS(d),m=WS(i.clientWidth-(u+h)),v=WS(i.clientHeight-(d+f)),g=WS(u),b={rootMargin:-p+"px "+-m+"px "+-v+"px "+-g+"px",threshold:zp(0,sg(1,l))||1};let S=!0;function x(w){const M=w[0].intersectionRatio;if(M!==l){if(!S)return a();M?a(!1,M):r=setTimeout(()=>{a(!1,1e-7)},1e3)}M===1&&!mj(c,n.getBoundingClientRect())&&a(),S=!1}try{t=new IntersectionObserver(x,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(x,b)}t.observe(n)}return a(!0),s}function aIe(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=iL(n),u=i||s?[...c?qb(c):[],...qb(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const d=c&&o?sIe(c,t):null;let h=-1,f=null;a&&(f=new ResizeObserver(g=>{let[_]=g;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,m=l?t0(n):null;l&&v();function v(){const g=t0(n);m&&!mj(m,g)&&t(),m=g,p=requestAnimationFrame(v)}return t(),()=>{var g;u.forEach(_=>{i&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),d==null||d(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const oIe=tL,vj=L4e,lIe=k4e,cIe=R4e,gj=I4e,yj=(n,e,t)=>{const r=new Map,i={platform:iIe,...t},s={...i.platform,_c:r};return E4e(n,e,{...i,platform:s})},uIe=Tt({style:{type:Fe([String,Object,Array]),default:()=>({})}}),dIe=Ie({name:"ElVisuallyHidden"}),fIe=Ie({...dIe,props:uIe,setup(n){const e=n,t=U(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,i)=>($(),ue("span",Nn(r.$attrs,{style:y(t)}),[Ye(r.$slots,"default")],16))}});var hIe=Et(fIe,[["__file","visual-hidden.vue"]]);Tt({});const pIe=n=>{if(!ar)return;if(!n)return n;const e=ms(n);return e||(qr(n)?e:n)},mIe=({middleware:n,placement:e,strategy:t})=>{const r=ne(),i=ne(),s=ne(),a=ne(),o=ne({}),l={x:s,y:a,placement:e,strategy:t,middlewareData:o},c=async()=>{if(!ar)return;const u=pIe(r),d=ms(i);if(!u||!d)return;const h=await yj(u,d,{placement:y(e),strategy:y(t),middleware:y(n)});Yv(l).forEach(f=>{l[f].value=h[f]})};return Rn(()=>{Gs(()=>{c()})}),{...l,update:c,referenceRef:r,contentRef:i}},vIe=({arrowRef:n,padding:e})=>({name:"arrow",options:{element:n,padding:e},fn(t){const r=y(n);return r?gj({element:r,padding:e}).fn(t):{}}}),gIe=Ie({name:"ElTooltipV2Content"}),yIe=Ie({...gIe,props:{...j6,...rj},setup(n){const e=n,{triggerRef:t,contentId:r}=Lt(gT),i=ne(e.placement),s=ne(e.strategy),a=ne(null),{referenceRef:o,contentRef:l,middlewareData:c,x:u,y:d,update:h}=mIe({placement:i,strategy:s,middleware:U(()=>{const b=[vj(e.offset)];return e.showArrow&&b.push(vIe({arrowRef:a})),b})}),f=zg().nextZIndex(),p=gt("tooltip-v2"),m=U(()=>i.value.split("-")[0]),v=U(()=>({position:y(s),top:`${y(d)||0}px`,left:`${y(u)||0}px`,zIndex:f})),g=U(()=>{if(!e.showArrow)return{};const{arrow:b}=y(c);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${b==null?void 0:b.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${b==null?void 0:b.y}px`||""}}),_=U(()=>[p.e("content"),p.is("dark",e.effect==="dark"),p.is(y(s)),e.contentClass]);return ct(a,()=>h()),ct(()=>e.placement,b=>i.value=b),Rn(()=>{ct(()=>e.reference||t.value,b=>{o.value=b||void 0},{immediate:!0})}),jn(sj,{arrowRef:a}),(b,S)=>($(),ue("div",{ref_key:"contentRef",ref:l,style:Xt(y(v)),"data-tooltip-v2-root":""},[b.nowrap?Xe("v-if",!0):($(),ue("div",{key:0,"data-side":y(m),class:Y(y(_))},[Ye(b.$slots,"default",{contentStyle:y(v),contentClass:y(_)}),xe(y(hIe),{id:y(r),role:"tooltip"},{default:Re(()=>[b.ariaLabel?($(),ue(Bt,{key:0},[Bn(Ct(b.ariaLabel),1)],64)):Ye(b.$slots,"default",{key:1})]),_:3},8,["id"]),Ye(b.$slots,"arrow",{style:Xt(y(g)),side:y(m)})],10,["data-side"]))],4))}});var j7=Et(yIe,[["__file","content.vue"]]);const bIe=Tt({setRef:{type:Fe(Function),required:!0},onlyChild:Boolean});var _Ie=Ie({props:bIe,setup(n,{slots:e}){const t=ne(),r=fT(t,i=>{i?n.setRef(i.nextElementSibling):n.setRef(null)});return()=>{var i;const[s]=((i=e.default)==null?void 0:i.call(e))||[],a=n.onlyChild?Rye(s.children):s.children;return xe(Bt,{ref:r},[a])}}});const SIe=Ie({name:"ElTooltipV2Trigger"}),xIe=Ie({...SIe,props:{...rj,...Q6},setup(n){const e=n,{onClose:t,onOpen:r,onDelayOpen:i,triggerRef:s,contentId:a}=Lt(gT);let o=!1;const l=_=>{s.value=_},c=()=>{o=!1},u=Ai(e.onMouseEnter,i),d=Ai(e.onMouseLeave,t),h=Ai(e.onMouseDown,()=>{t(),o=!0,document.addEventListener("mouseup",c,{once:!0})}),f=Ai(e.onFocus,()=>{o||r()}),p=Ai(e.onBlur,t),m=Ai(e.onClick,_=>{_.detail===0&&t()}),v={blur:p,click:m,focus:f,mousedown:h,mouseenter:u,mouseleave:d},g=(_,b,S)=>{_&&Object.entries(b).forEach(([x,w])=>{_[S](x,w)})};return ct(s,(_,b)=>{g(_,v,"addEventListener"),g(b,v,"removeEventListener"),_&&_.setAttribute("aria-describedby",a.value)}),br(()=>{g(s.value,v,"removeEventListener"),document.removeEventListener("mouseup",c)}),(_,b)=>_.nowrap?($(),rt(y(_Ie),{key:0,"set-ref":l,"only-child":""},{default:Re(()=>[Ye(_.$slots,"default")]),_:3})):($(),ue("button",Nn({key:1,ref_key:"triggerRef",ref:s},_.$attrs),[Ye(_.$slots,"default")],16))}});var wIe=Et(xIe,[["__file","trigger.vue"]]);const CIe=Ie({name:"ElTooltipV2"}),MIe=Ie({...CIe,props:f4e,setup(n){const t=bs(n),r=pr(Cl(t,Object.keys(X6))),i=pr(Cl(t,Object.keys(j6))),s=pr(Cl(t,Object.keys(Z6))),a=pr(Cl(t,Object.keys(Q6)));return(o,l)=>($(),rt(m4e,Vo(nu(s)),{default:Re(({open:c})=>[xe(wIe,Nn(a,{nowrap:""}),{default:Re(()=>[Ye(o.$slots,"trigger")]),_:3},16),xe(y(Vg),{to:o.to,disabled:!o.teleported},{default:Re(()=>[o.fullTransition?($(),rt(Os,Vo(Nn({key:0},o.transitionProps)),{default:Re(()=>[o.alwaysOn||c?($(),rt(j7,Vo(Nn({key:0},i)),{arrow:Re(({style:u,side:d})=>[o.showArrow?($(),rt($7,Nn({key:0},r,{style:u,side:d}),null,16,["style","side"])):Xe("v-if",!0)]),default:Re(()=>[Ye(o.$slots,"default")]),_:3},16)):Xe("v-if",!0)]),_:2},1040)):($(),ue(Bt,{key:1},[o.alwaysOn||c?($(),rt(j7,Vo(Nn({key:0},i)),{arrow:Re(({style:u,side:d})=>[o.showArrow?($(),rt($7,Nn({key:0},r,{style:u,side:d}),null,16,["style","side"])):Xe("v-if",!0)]),default:Re(()=>[Ye(o.$slots,"default")]),_:3},16)):Xe("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var TIe=Et(MIe,[["__file","tooltip.vue"]]);const AIe=bn(TIe),bj="left-check-change",_j="right-check-change",Wm=Tt({data:{type:Fe(Array),default:()=>[]},titles:{type:Fe(Array),default:()=>[]},buttonTexts:{type:Fe(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Fe(Function)},leftDefaultChecked:{type:Fe(Array),default:()=>[]},rightDefaultChecked:{type:Fe(Array),default:()=>[]},renderContent:{type:Fe(Function)},modelValue:{type:Fe(Array),default:()=>[]},format:{type:Fe(Object),default:()=>({})},filterable:Boolean,props:{type:Fe(Object),default:()=>hi({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),CR=(n,e)=>[n,e].every(xt)||xt(n)&&Zi(e),EIe={[Hn]:(n,e,t)=>[n,t].every(xt)&&["left","right"].includes(e),[mn]:n=>xt(n),[bj]:CR,[_j]:CR},MR="checked-change",IIe=Tt({data:Wm.data,optionRender:{type:Fe(Function)},placeholder:String,title:String,filterable:Boolean,format:Wm.format,filterMethod:Wm.filterMethod,defaultChecked:Wm.leftDefaultChecked,props:Wm.props}),RIe={[MR]:CR},eS=n=>{const e={label:"label",key:"key",disabled:"disabled"};return U(()=>({...e,...n.props}))},PIe=(n,e,t)=>{const r=eS(n),i=U(()=>n.data.filter(u=>Yt(n.filterMethod)?n.filterMethod(e.query,u):String(u[r.value.label]||u[r.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=U(()=>i.value.filter(u=>!u[r.value.disabled])),a=U(()=>{const u=e.checked.length,d=n.data.length,{noChecked:h,hasChecked:f}=n.format;return h&&f?u>0?f.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),o=U(()=>{const u=e.checked.length;return u>0&&u<s.value.length}),l=()=>{const u=s.value.map(d=>d[r.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?s.value.map(d=>d[r.value.key]):[]};return ct(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const h=u.concat(d).filter(f=>!u.includes(f)||!d.includes(f));t(MR,u,h)}else t(MR,u),e.checkChangeByUser=!0}),ct(s,()=>{l()}),ct(()=>n.data,()=>{const u=[],d=i.value.map(h=>h[r.value.key]);e.checked.forEach(h=>{d.includes(h)&&u.push(h)}),e.checkChangeByUser=!1,e.checked=u}),ct(()=>n.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(p=>d.includes(p)))return;const h=[],f=s.value.map(p=>p[r.value.key]);u.forEach(p=>{f.includes(p)&&h.push(p)}),e.checkChangeByUser=!1,e.checked=h},{immediate:!0}),{filteredData:i,checkableData:s,checkedSummary:a,isIndeterminate:o,updateAllChecked:l,handleAllCheckedChange:c}},DIe=Ie({name:"ElTransferPanel"}),LIe=Ie({...DIe,props:IIe,emits:RIe,setup(n,{expose:e,emit:t}){const r=n,i=es(),s=({option:b})=>b,{t:a}=sr(),o=gt("transfer"),l=pr({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=eS(r),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:f}=PIe(r,l,t),p=U(()=>!Uo(l.query)&&Uo(u.value)),m=U(()=>!Uo(i.default()[0].children)),{checked:v,allChecked:g,query:_}=bs(l);return e({query:_}),(b,S)=>($(),ue("div",{class:Y(y(o).b("panel"))},[ye("p",{class:Y(y(o).be("panel","header"))},[xe(y(Ul),{modelValue:y(g),"onUpdate:modelValue":x=>qr(g)?g.value=x:null,indeterminate:y(h),"validate-event":!1,onChange:y(f)},{default:Re(()=>[Bn(Ct(b.title)+" ",1),ye("span",null,Ct(y(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),ye("div",{class:Y([y(o).be("panel","body"),y(o).is("with-footer",y(m))])},[b.filterable?($(),rt(y(wa),{key:0,modelValue:y(_),"onUpdate:modelValue":x=>qr(_)?_.value=x:null,class:Y(y(o).be("panel","filter")),size:"default",placeholder:b.placeholder,"prefix-icon":y(Kpe),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):Xe("v-if",!0),Cn(xe(y(WK),{modelValue:y(v),"onUpdate:modelValue":x=>qr(v)?v.value=x:null,"validate-event":!1,class:Y([y(o).is("filterable",b.filterable),y(o).be("panel","list")])},{default:Re(()=>[($(!0),ue(Bt,null,Fn(y(u),x=>($(),rt(y(Ul),{key:x[y(c).key],class:Y(y(o).be("panel","item")),value:x[y(c).key],disabled:x[y(c).disabled],"validate-event":!1},{default:Re(()=>{var w;return[xe(s,{option:(w=b.optionRender)==null?void 0:w.call(b,x)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[cr,!y(p)&&!y(Uo)(b.data)]]),Cn(ye("div",{class:Y(y(o).be("panel","empty"))},[Ye(b.$slots,"empty",{},()=>[Bn(Ct(y(p)?y(a)("el.transfer.noMatch"):y(a)("el.transfer.noData")),1)])],2),[[cr,y(p)||y(Uo)(b.data)]])],2),y(m)?($(),ue("p",{key:0,class:Y(y(o).be("panel","footer"))},[Ye(b.$slots,"default")],2)):Xe("v-if",!0)],2))}});var Z7=Et(LIe,[["__file","transfer-panel.vue"]]);const kIe=n=>{const e=eS(n),t=U(()=>n.data.reduce((s,a)=>(s[a[e.value.key]]=a)&&s,{})),r=U(()=>n.data.filter(s=>!n.modelValue.includes(s[e.value.key]))),i=U(()=>n.targetOrder==="original"?n.data.filter(s=>n.modelValue.includes(s[e.value.key])):n.modelValue.reduce((s,a)=>{const o=t.value[a];return o&&s.push(o),s},[]));return{sourceData:r,targetData:i}},OIe=(n,e,t)=>{const r=eS(n),i=(o,l,c)=>{t(mn,o),t(Hn,o,l,c)};return{addToLeft:()=>{const o=n.modelValue.slice();e.rightChecked.forEach(l=>{const c=o.indexOf(l);c>-1&&o.splice(c,1)}),i(o,"left",e.rightChecked)},addToRight:()=>{let o=n.modelValue.slice();const l=n.data.filter(c=>{const u=c[r.value.key];return e.leftChecked.includes(u)&&!n.modelValue.includes(u)}).map(c=>c[r.value.key]);o=n.targetOrder==="unshift"?l.concat(o):o.concat(l),n.targetOrder==="original"&&(o=n.data.filter(c=>o.includes(c[r.value.key])).map(c=>c[r.value.key])),i(o,"right",e.leftChecked)}}},NIe=(n,e)=>({onSourceCheckedChange:(i,s)=>{n.leftChecked=i,s&&e(bj,i,s)},onTargetCheckedChange:(i,s)=>{n.rightChecked=i,s&&e(_j,i,s)}}),BIe=Ie({name:"ElTransfer"}),FIe=Ie({...BIe,props:Wm,emits:EIe,setup(n,{expose:e,emit:t}){const r=n,i=es(),{t:s}=sr(),a=gt("transfer"),{formItem:o}=oa(),l=pr({leftChecked:[],rightChecked:[]}),c=eS(r),{sourceData:u,targetData:d}=kIe(r),{onSourceCheckedChange:h,onTargetCheckedChange:f}=NIe(l,t),{addToLeft:p,addToRight:m}=OIe(r,l,t),v=ne(),g=ne(),_=C=>{switch(C){case"left":v.value.query="";break;case"right":g.value.query="";break}},b=U(()=>r.buttonTexts.length===2),S=U(()=>r.titles[0]||s("el.transfer.titles.0")),x=U(()=>r.titles[1]||s("el.transfer.titles.1")),w=U(()=>r.filterPlaceholder||s("el.transfer.filterPlaceholder"));ct(()=>r.modelValue,()=>{var C;r.validateEvent&&((C=o==null?void 0:o.validate)==null||C.call(o,"change").catch(A=>void 0))});const M=U(()=>C=>{var A;if(r.renderContent)return r.renderContent(tn,C);const T=(((A=i.default)==null?void 0:A.call(i,{option:C}))||[]).filter(I=>I.type!==Yi);return T.length?T:tn("span",C[c.value.label]||C[c.value.key])});return e({clearQuery:_,leftPanel:v,rightPanel:g}),(C,A)=>($(),ue("div",{class:Y(y(a).b())},[xe(Z7,{ref_key:"leftPanel",ref:v,data:y(u),"option-render":y(M),placeholder:y(w),title:y(S),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,"default-checked":C.leftDefaultChecked,props:r.props,onCheckedChange:y(h)},{empty:Re(()=>[Ye(C.$slots,"left-empty")]),default:Re(()=>[Ye(C.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ye("div",{class:Y(y(a).e("buttons"))},[xe(y(ks),{type:"primary",class:Y([y(a).e("button"),y(a).is("with-texts",y(b))]),disabled:y(Uo)(l.rightChecked),onClick:y(p)},{default:Re(()=>[xe(y(zt),null,{default:Re(()=>[xe(y(bd))]),_:1}),y(nr)(C.buttonTexts[0])?Xe("v-if",!0):($(),ue("span",{key:0},Ct(C.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),xe(y(ks),{type:"primary",class:Y([y(a).e("button"),y(a).is("with-texts",y(b))]),disabled:y(Uo)(l.leftChecked),onClick:y(m)},{default:Re(()=>[y(nr)(C.buttonTexts[1])?Xe("v-if",!0):($(),ue("span",{key:0},Ct(C.buttonTexts[1]),1)),xe(y(zt),null,{default:Re(()=>[xe(y(Ta))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),xe(Z7,{ref_key:"rightPanel",ref:g,data:y(d),"option-render":y(M),placeholder:y(w),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,title:y(x),"default-checked":C.rightDefaultChecked,props:r.props,onCheckedChange:y(f)},{empty:Re(()=>[Ye(C.$slots,"right-empty")]),default:Re(()=>[Ye(C.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var zIe=Et(FIe,[["__file","transfer.vue"]]);const UIe=bn(zIe),Ev="$treeNodeId",Q7=function(n,e){!e||e[Ev]||Object.defineProperty(e,Ev,{value:n.id,enumerable:!1,configurable:!1,writable:!1})},aL=(n,e)=>e==null?void 0:e[n||Ev],TR=(n,e,t)=>{const r=n.value.currentNode;t();const i=n.value.currentNode;r!==i&&e("current-change",i?i.data:null,i)},AR=n=>{let e=!0,t=!0,r=!0;for(let i=0,s=n.length;i<s;i++){const a=n[i];(a.checked!==!0||a.indeterminate)&&(e=!1,a.disabled||(r=!1)),(a.checked!==!1||a.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:r,half:!e&&!t}},m1=function(n){if(n.childNodes.length===0||n.loading)return;const{all:e,none:t,half:r}=AR(n.childNodes);e?(n.checked=!0,n.indeterminate=!1):r?(n.checked=!1,n.indeterminate=!0):t&&(n.checked=!1,n.indeterminate=!1);const i=n.parent;!i||i.level===0||n.store.checkStrictly||m1(i)},qS=function(n,e){const t=n.store.props,r=n.data||{},i=t[e];if(Yt(i))return i(r,n);if(Wt(i))return r[i];if(nr(i)){const s=r[e];return nr(s)?"":s}},ER=function(n,e){n.forEach(t=>{t.canFocus=e,ER(t.childNodes,e)})};let HIe=0,IR=class c2{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=HIe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)fr(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const r=t.props;if(r&&typeof r.isLeaf<"u"){const a=qS(this,"isLeaf");Cr(a)&&(this.isLeafByUser=a)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),xt(this.data)||Q7(this,this.data),!this.data)return;const i=t.defaultExpandedKeys,s=t.key;s&&!Zi(this.key)&&i&&i.includes(this.key)&&this.expand(null,t.autoExpandParent),s&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((e=this.parent)==null?void 0:e.expanded)===!0)&&(this.canFocus=!0)}setData(e){xt(e)||Q7(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&xt(this.data)?t=this.data:t=qS(this,"children")||[];for(let r=0,i=t.length;r<i;r++)this.insertChild({data:t[r]})}get label(){return qS(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return qS(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(r=>r===e||t&&r.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,r){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof c2)){if(!r){const i=this.getChildren(!0);i!=null&&i.includes(e.data)||(nr(t)||t<0?i==null||i.push(e.data):i==null||i.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=pr(new c2(e)),e instanceof c2&&e.initialize()}e.level=this.level+1,nr(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let r;t&&(r=this.childNodes.indexOf(t)),this.insertChild(e,r)}insertAfter(e,t){let r;t&&(r=this.childNodes.indexOf(t),r!==-1&&(r+=1)),this.insertChild(e,r)}removeChild(e){const t=this.getChildren()||[],r=t.indexOf(e.data);r>-1&&t.splice(r,1);const i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===e){t=this.childNodes[r];break}t&&this.removeChild(t)}expand(e,t){const r=()=>{if(t){let i=this.parent;for(;i&&i.level>0;)i.expanded=!0,i=i.parent}this.expanded=!0,e&&e(),ER(this.childNodes,!0)};this.shouldLoadData()?this.loadData(i=>{xt(i)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||m1(this),r())}):r()}doCreateChildren(e,t={}){e.forEach(r=>{this.insertChild(Object.assign({data:r},t),void 0,!0)})}collapse(){this.expanded=!1,ER(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,r,i){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:o}=AR(this.childNodes);!this.isLeaf&&!a&&o&&(this.checked=!1,e=!1);const l=()=>{if(t){const c=this.childNodes;for(let h=0,f=c.length;h<f;h++){const p=c[h];i=i||e!==!1;const m=p.disabled?p.checked:i;p.setChecked(m,t,!0,i)}const{half:u,all:d}=AR(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),m1(this)},{checked:e!==!1});return}else l()}const s=this.parent;!s||s.level===0||r||m1(s)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const r=this.store.props;let i="children";return r&&(i=r.children||"children"),nr(t[i])&&(t[i]=null),e&&!t[i]&&(t[i]=[]),t[i]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(s=>s.data),r={},i=[];e.forEach((s,a)=>{const o=s[Ev];!!o&&t.findIndex(c=>(c==null?void 0:c[Ev])===o)>=0?r[o]={index:a,data:s}:i.push({index:a,data:s})}),this.store.lazy||t.forEach(s=>{r[s==null?void 0:s[Ev]]||this.removeChildByData(s)}),i.forEach(({index:s,data:a})=>{this.insertChild({data:a},s)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const r=s=>{this.childNodes=[],this.doCreateChildren(s,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)},i=()=>{this.loading=!1};this.store.load(this,r,i)}else e&&e.call(this)}eachNode(e){const t=[this];for(;t.length;){const r=t.shift();t.unshift(...r.childNodes),e(r)}}reInitChecked(){this.store.checkStrictly||m1(this)}};class VIe{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const t in e)fr(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new IR({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()},xr)}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,r=this.lazy,i=async function(s){const a=s.root?s.root.childNodes:s.childNodes;for(const[o,l]of a.entries())l.visible=!!(t!=null&&t.call(l,e,l.data,l)),o%80===0&&o>0&&await Ut(),await i(l);if(!s.visible&&a.length){let o=!0;o=!a.some(l=>l.visible),s.root?s.root.visible=o===!1:s.visible=o===!1}e&&s.visible&&!s.isLeaf&&(!r||s.loaded)&&s.expand()};i(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof IR)return e;const t=Mn(e)?aL(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){var r;const i=this.getNode(t);(r=i.parent)==null||r.insertBefore({data:e},i)}insertAfter(e,t){var r;const i=this.getNode(t);(r=i.parent)==null||r.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const r=vo(t)?this.root:this.getNode(t);r&&r.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(r=>{const i=t[r];i&&i.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const t=this.defaultCheckedKeys||[];!Zi(e.key)&&t.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;if(!(!e||!e.data))if(!t)this.nodesMap[e.id]=e;else{const r=e.key;Zi(r)||(this.nodesMap[r]=e)}}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const r=[],i=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&r.push(o.data),i(o)})};return i(this),r}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(s=>{s.indeterminate&&e.push(s.data),t(s)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const r in t)fr(t,r)&&e.push(t[r]);return e}updateChildren(e,t){const r=this.nodesMap[e];if(!r)return;const i=r.childNodes;for(let s=i.length-1;s>=0;s--){const a=i[s];this.remove(a.data)}for(let s=0,a=t.length;s<a;s++){const o=t[s];this.append(o,r.data)}}_setCheckedKeys(e,t=!1,r){const i=this._getAllNodes().sort((l,c)=>l.level-c.level),s=Object.create(null),a=Object.keys(r);i.forEach(l=>l.setChecked(!1,!1));const o=l=>{l.childNodes.forEach(c=>{var u;s[c.data[e]]=!0,(u=c.childNodes)!=null&&u.length&&o(c)})};for(let l=0,c=i.length;l<c;l++){const u=i[l],d=u.data[e].toString();if(!a.includes(d)){u.checked&&!s[d]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&o(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),t){u.setChecked(!1,!1);const f=function(p){p.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),f(v)})};f(u)}}}setCheckedNodes(e,t=!1){const r=this.key,i={};e.forEach(s=>{i[(s||{})[r]]=!0}),this._setCheckedKeys(r,t,i)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const r=this.key,i={};e.forEach(s=>{i[s]=!0}),this._setCheckedKeys(r,t,i)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const r=this.getNode(t);r&&r.expand(null,this.autoExpandParent)})}setChecked(e,t,r){const i=this.getNode(e);i&&i.setChecked(!!t,r)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){var r;const i=e[this.key],s=this.nodesMap[i];this.setCurrentNode(s),t&&this.currentNode&&this.currentNode.level>1&&((r=this.currentNode.parent)==null||r.expand(null,!0))}setCurrentNodeKey(e,t=!0){var r;if(this.currentNodeKey=e,vo(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode&&this.currentNode.level>1&&((r=this.currentNode.parent)==null||r.expand(null,!0)))}}const oL="RootTree",Sj="NodeInstance",J7="TreeNodeMap",$Ie=Ie({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(n){const e=gt("tree"),t=Lt(Sj),r=Lt(oL);return()=>{const i=n.node,{data:s,store:a}=i;return n.renderContent?n.renderContent(tn,{_self:t,node:i,data:s,store:a}):Ye(r.ctx.slots,"default",{node:i,data:s},()=>[tn(Y6,{tag:"span",truncated:!0,class:e.be("node","label")},()=>[i.label])])}}});var GIe=Et($Ie,[["__file","tree-node-content.vue"]]);function xj(n){const e=Lt(J7,null),t={treeNodeExpand:r=>{var i;n.node!==r&&((i=n.node)==null||i.collapse())},children:[]};return e&&e.children.push(t),jn(J7,t),{broadcastExpanded:r=>{if(n.accordion)for(const i of t.children)i.treeNodeExpand(r)}}}const wj=Symbol("dragEvents");function WIe({props:n,ctx:e,el$:t,dropIndicator$:r,store:i}){const s=gt("tree"),a=ne({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return jn(wj,{treeNodeDragStart:({event:u,treeNode:d})=>{if(u.dataTransfer){if(Yt(n.allowDrag)&&!n.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}a.value.draggingNode=d,e.emit("node-drag-start",d.node,u)}},treeNodeDragOver:({event:u,treeNode:d})=>{if(!u.dataTransfer)return;const h=d,f=a.value.dropNode;f&&f.node.id!==h.node.id&&Ma(f.$el,s.is("drop-inner"));const p=a.value.draggingNode;if(!p||!h)return;let m=!0,v=!0,g=!0,_=!0;Yt(n.allowDrop)&&(m=n.allowDrop(p.node,h.node,"prev"),_=v=n.allowDrop(p.node,h.node,"inner"),g=n.allowDrop(p.node,h.node,"next")),u.dataTransfer.dropEffect=v||m||g?"move":"none",(m||v||g)&&(f==null?void 0:f.node.id)!==h.node.id&&(f&&e.emit("node-drag-leave",p.node,f.node,u),e.emit("node-drag-enter",p.node,h.node,u)),m||v||g?a.value.dropNode=h:a.value.dropNode=null,h.node.nextSibling===p.node&&(g=!1),h.node.previousSibling===p.node&&(m=!1),h.node.contains(p.node,!1)&&(v=!1),(p.node===h.node||p.node.contains(h.node))&&(m=!1,v=!1,g=!1);const b=h.$el,S=b.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),x=t.value.getBoundingClientRect();let w;const M=m?v?.25:g?.45:1:-1,C=g?v?.75:m?.55:0:1;let A=-9999;const T=u.clientY-S.top;T<S.height*M?w="before":T>S.height*C?w="after":v?w="inner":w="none";const I=b.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),D=r.value;w==="before"?A=I.top-x.top:w==="after"&&(A=I.bottom-x.top),D.style.top=`${A}px`,D.style.left=`${I.right-x.left}px`,w==="inner"?Ml(b,s.is("drop-inner")):Ma(b,s.is("drop-inner")),a.value.showDropIndicator=w==="before"||w==="after",a.value.allowDrop=a.value.showDropIndicator||_,a.value.dropType=w,e.emit("node-drag-over",p.node,h.node,u)},treeNodeDragEnd:u=>{var d,h;const{draggingNode:f,dropType:p,dropNode:m}=a.value;if(u.preventDefault(),u.dataTransfer&&(u.dataTransfer.dropEffect="move"),f!=null&&f.node.data&&m){const v={data:f.node.data};p!=="none"&&f.node.remove(),p==="before"?(d=m.node.parent)==null||d.insertBefore(v,m.node):p==="after"?(h=m.node.parent)==null||h.insertAfter(v,m.node):p==="inner"&&m.node.insertChild(v),p!=="none"&&(i.value.registerNode(v),i.value.key&&f.node.eachNode(g=>{var _;(_=i.value.nodesMap[g.data[i.value.key]])==null||_.setChecked(g.checked,!i.value.checkStrictly)})),Ma(m.$el,s.is("drop-inner")),e.emit("node-drag-end",f.node,m.node,p,u),p!=="none"&&e.emit("node-drop",f.node,m.node,p,u)}f&&!m&&e.emit("node-drag-end",f.node,null,p,u),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}const qIe=Ie({name:"ElTreeNode",components:{ElCollapseTransition:uT,ElCheckbox:Ul,NodeContent:GIe,ElIcon:zt,Loading:iu},props:{node:{type:IR,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(n,e){const t=gt("tree"),{broadcastExpanded:r}=xj(n),i=Lt(oL),s=ne(!1),a=ne(!1),o=ne(),l=ne(),c=ne(),u=Lt(wj),d=Dn();jn(Sj,d),n.node.expanded&&(s.value=!0,a.value=!0);const h=i.props.props.children||"children";ct(()=>{var A;const T=(A=n.node.data)==null?void 0:A[h];return T&&[...T]},()=>{n.node.updateChildren()}),ct(()=>n.node.indeterminate,A=>{m(n.node.checked,A)}),ct(()=>n.node.checked,A=>{m(A,n.node.indeterminate)}),ct(()=>n.node.childNodes.length,()=>n.node.reInitChecked()),ct(()=>n.node.expanded,A=>{Ut(()=>s.value=A),A&&(a.value=!0)});const f=A=>aL(i.props.nodeKey,A.data),p=A=>{const T=n.props.class;if(!T)return{};let I;if(Yt(T)){const{data:D}=A;I=T(D,A)}else I=T;return Wt(I)?{[I]:!0}:I},m=(A,T)=>{(o.value!==A||l.value!==T)&&i.ctx.emit("check-change",n.node.data,A,T),o.value=A,l.value=T},v=A=>{TR(i.store,i.ctx.emit,()=>{var T;if((T=i==null?void 0:i.props)==null?void 0:T.nodeKey){const D=f(n.node);i.store.value.setCurrentNodeKey(D)}else i.store.value.setCurrentNode(n.node)}),i.currentNode.value=n.node,i.props.expandOnClickNode&&_(),(i.props.checkOnClickNode||n.node.isLeaf&&i.props.checkOnClickLeaf&&n.showCheckbox)&&!n.node.disabled&&b(!n.node.checked),i.ctx.emit("node-click",n.node.data,n.node,d,A)},g=A=>{var T;(T=i.instance.vnode.props)!=null&&T.onNodeContextmenu&&(A.stopPropagation(),A.preventDefault()),i.ctx.emit("node-contextmenu",A,n.node.data,n.node,d)},_=()=>{n.node.isLeaf||(s.value?(i.ctx.emit("node-collapse",n.node.data,n.node,d),n.node.collapse()):n.node.expand(()=>{e.emit("node-expand",n.node.data,n.node,d)}))},b=A=>{n.node.setChecked(A,!(i!=null&&i.props.checkStrictly)),Ut(()=>{const T=i.store.value;i.ctx.emit("check",n.node.data,{checkedNodes:T.getCheckedNodes(),checkedKeys:T.getCheckedKeys(),halfCheckedNodes:T.getHalfCheckedNodes(),halfCheckedKeys:T.getHalfCheckedKeys()})})};return{ns:t,node$:c,tree:i,expanded:s,childNodeRendered:a,oldChecked:o,oldIndeterminate:l,getNodeKey:f,getNodeClass:p,handleSelectChange:m,handleClick:v,handleContextMenu:g,handleExpandIconClick:_,handleCheckChange:b,handleChildNodeExpand:(A,T,I)=>{r(T),i.ctx.emit("node-expand",A,T,I)},handleDragStart:A=>{i.props.draggable&&u.treeNodeDragStart({event:A,treeNode:n})},handleDragOver:A=>{A.preventDefault(),i.props.draggable&&u.treeNodeDragOver({event:A,treeNode:{$el:c.value,node:n.node}})},handleDrop:A=>{A.preventDefault()},handleDragEnd:A=>{i.props.draggable&&u.treeNodeDragEnd(A)},CaretRight:$q}}});function KIe(n,e,t,r,i,s){const a=dn("el-icon"),o=dn("el-checkbox"),l=dn("loading"),c=dn("node-content"),u=dn("el-tree-node"),d=dn("el-collapse-transition");return Cn(($(),ue("div",{ref:"node$",class:Y([n.ns.b("node"),n.ns.is("expanded",n.expanded),n.ns.is("current",n.node.isCurrent),n.ns.is("hidden",!n.node.visible),n.ns.is("focusable",!n.node.disabled),n.ns.is("checked",!n.node.disabled&&n.node.checked),n.getNodeClass(n.node)]),role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.props.draggable,"data-key":n.getNodeKey(n.node),onClick:an(n.handleClick,["stop"]),onContextmenu:n.handleContextMenu,onDragstart:an(n.handleDragStart,["stop"]),onDragover:an(n.handleDragOver,["stop"]),onDragend:an(n.handleDragEnd,["stop"]),onDrop:an(n.handleDrop,["stop"])},[ye("div",{class:Y(n.ns.be("node","content")),style:Xt({paddingLeft:(n.node.level-1)*n.tree.props.indent+"px"})},[n.tree.props.icon||n.CaretRight?($(),rt(a,{key:0,class:Y([n.ns.be("node","expand-icon"),n.ns.is("leaf",n.node.isLeaf),{expanded:!n.node.isLeaf&&n.expanded}]),onClick:an(n.handleExpandIconClick,["stop"])},{default:Re(()=>[($(),rt(Ln(n.tree.props.icon||n.CaretRight)))]),_:1},8,["class","onClick"])):Xe("v-if",!0),n.showCheckbox?($(),rt(o,{key:1,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:!!n.node.disabled,onClick:an(()=>{},["stop"]),onChange:n.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):Xe("v-if",!0),n.node.loading?($(),rt(a,{key:2,class:Y([n.ns.be("node","loading-icon"),n.ns.is("loading")])},{default:Re(()=>[xe(l)]),_:1},8,["class"])):Xe("v-if",!0),xe(c,{node:n.node,"render-content":n.renderContent},null,8,["node","render-content"])],6),xe(d,null,{default:Re(()=>[!n.renderAfterExpand||n.childNodeRendered?Cn(($(),ue("div",{key:0,class:Y(n.ns.be("node","children")),role:"group","aria-expanded":n.expanded,onClick:an(()=>{},["stop"])},[($(!0),ue(Bt,null,Fn(n.node.childNodes,h=>($(),rt(u,{key:n.getNodeKey(h),"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:h,accordion:n.accordion,props:n.props,onNodeExpand:n.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[cr,n.expanded]]):Xe("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[cr,n.node.visible]])}var YIe=Et(qIe,[["render",KIe],["__file","tree-node.vue"]]);function XIe({el$:n},e){const t=gt("tree");Rn(()=>{s()}),yc(()=>{Array.from(n.value.querySelectorAll("input[type=checkbox]")).forEach(o=>{o.setAttribute("tabindex","-1")})});function r(a,o){var l,c;const u=e.value.getNode(a[o].dataset.key);return u.canFocus&&u.visible&&(((l=u.parent)==null?void 0:l.expanded)||((c=u.parent)==null?void 0:c.level)===0)}Lr(n,"keydown",a=>{const o=a.target;if(!o.className.includes(t.b("node")))return;const l=a.code,c=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),u=c.indexOf(o);let d;if([Rt.up,Rt.down].includes(l)){if(a.preventDefault(),l===Rt.up){d=u===-1?0:u!==0?u-1:c.length-1;const f=d;for(;!r(c,d);){if(d--,d===f){d=-1;break}d<0&&(d=c.length-1)}}else{d=u===-1?0:u<c.length-1?u+1:0;const f=d;for(;!r(c,d);){if(d++,d===f){d=-1;break}d>=c.length&&(d=0)}}d!==-1&&c[d].focus()}[Rt.left,Rt.right].includes(l)&&(a.preventDefault(),o.click());const h=o.querySelector('[type="checkbox"]');[Rt.enter,Rt.numpadEnter,Rt.space].includes(l)&&h&&(a.preventDefault(),h.click())});const s=()=>{var a;if(!n.value)return;const o=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));Array.from(n.value.querySelectorAll("input[type=checkbox]")).forEach(u=>{u.setAttribute("tabindex","-1")});const c=n.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(a=o[0])==null||a.setAttribute("tabindex","0")}}const jIe=Ie({name:"ElTree",components:{ElTreeNode:YIe},props:{data:{type:Fe(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:Fe(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:Fe(Function)},allowDrop:{type:Fe(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Ar}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(n,e){const{t}=sr(),r=gt("tree"),i=Lt(Gg,null),s=ne(new VIe({key:n.nodeKey,data:n.data,lazy:n.lazy,props:n.props,load:n.load,currentNodeKey:n.currentNodeKey,checkStrictly:n.checkStrictly,checkDescendants:n.checkDescendants,defaultCheckedKeys:n.defaultCheckedKeys,defaultExpandedKeys:n.defaultExpandedKeys,autoExpandParent:n.autoExpandParent,defaultExpandAll:n.defaultExpandAll,filterNodeMethod:n.filterNodeMethod}));s.value.initialize();const a=ne(s.value.root),o=ne(null),l=ne(null),c=ne(null),{broadcastExpanded:u}=xj(n),{dragState:d}=WIe({props:n,ctx:e,el$:l,dropIndicator$:c,store:s});XIe({el$:l},s);const h=U(()=>{const{childNodes:k}=a.value,F=i?i.hasFilteredOptions!==0:!1;return(!k||k.length===0||k.every(({visible:W})=>!W))&&!F});ct(()=>n.currentNodeKey,k=>{s.value.setCurrentNodeKey(k??null)}),ct(()=>n.defaultCheckedKeys,(k,F)=>{rs(k,F)||s.value.setDefaultCheckedKey(k??[])}),ct(()=>n.defaultExpandedKeys,k=>{s.value.setDefaultExpandedKeys(k??[])}),ct(()=>n.data,k=>{s.value.setData(k)},{deep:!0}),ct(()=>n.checkStrictly,k=>{s.value.checkStrictly=k});const f=k=>{if(!n.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(k)},p=k=>aL(n.nodeKey,k.data),m=k=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const F=s.value.getNode(k);if(!F)return[];const W=[F.data];let q=F.parent;for(;q&&q!==a.value;)W.push(q.data),q=q.parent;return W.reverse()},v=(k,F)=>s.value.getCheckedNodes(k,F),g=k=>s.value.getCheckedKeys(k),_=()=>{const k=s.value.getCurrentNode();return k?k.data:null},b=()=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const k=_();return k?k[n.nodeKey]:null},S=(k,F)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(k,F)},x=(k,F)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(k,F)},w=(k,F,W)=>{s.value.setChecked(k,F,W)},M=()=>s.value.getHalfCheckedNodes(),C=()=>s.value.getHalfCheckedKeys(),A=(k,F=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");TR(s,e.emit,()=>{u(k),s.value.setUserCurrentNode(k,F)})},T=(k,F=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");TR(s,e.emit,()=>{u(),s.value.setCurrentNodeKey(k??null,F)})},I=k=>s.value.getNode(k),D=k=>{s.value.remove(k)},B=(k,F)=>{s.value.append(k,F)},O=(k,F)=>{s.value.insertBefore(k,F)},H=(k,F)=>{s.value.insertAfter(k,F)},L=(k,F,W)=>{u(F),e.emit("node-expand",k,F,W)},z=(k,F)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(k,F)};return jn(oL,{ctx:e,props:n,store:s,root:a,currentNode:o,instance:Dn()}),jn(su,void 0),{ns:r,store:s,root:a,currentNode:o,dragState:d,el$:l,dropIndicator$:c,isEmpty:h,filter:f,getNodeKey:p,getNodePath:m,getCheckedNodes:v,getCheckedKeys:g,getCurrentNode:_,getCurrentKey:b,setCheckedNodes:S,setCheckedKeys:x,setChecked:w,getHalfCheckedNodes:M,getHalfCheckedKeys:C,setCurrentNode:A,setCurrentKey:T,t,getNode:I,remove:D,append:B,insertBefore:O,insertAfter:H,handleNodeExpand:L,updateKeyChildren:z}}});function ZIe(n,e,t,r,i,s){const a=dn("el-tree-node");return $(),ue("div",{ref:"el$",class:Y([n.ns.b(),n.ns.is("dragging",!!n.dragState.draggingNode),n.ns.is("drop-not-allow",!n.dragState.allowDrop),n.ns.is("drop-inner",n.dragState.dropType==="inner"),{[n.ns.m("highlight-current")]:n.highlightCurrent}]),role:"tree"},[($(!0),ue(Bt,null,Fn(n.root.childNodes,o=>($(),rt(a,{key:n.getNodeKey(o),node:o,props:n.props,accordion:n.accordion,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,"render-content":n.renderContent,onNodeExpand:n.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),n.isEmpty?($(),ue("div",{key:0,class:Y(n.ns.e("empty-block"))},[Ye(n.$slots,"empty",{},()=>{var o;return[ye("span",{class:Y(n.ns.e("empty-text"))},Ct((o=n.emptyText)!=null?o:n.t("el.tree.emptyText")),3)]})],2)):Xe("v-if",!0),Cn(ye("div",{ref:"dropIndicator$",class:Y(n.ns.e("drop-indicator"))},null,2),[[cr,n.dragState.showDropIndicator]])],2)}var QIe=Et(jIe,[["render",ZIe],["__file","tree.vue"]]);const TC=bn(QIe),JIe=(n,{attrs:e,emit:t},{select:r,tree:i,key:s})=>{const a=gt("tree-select");return ct(()=>n.data,()=>{n.filterable&&Ut(()=>{var l,c;(c=i.value)==null||c.filter((l=r.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Cl(bs(n),Object.keys(Qp.props)),...e,class:U(()=>e.class),style:U(()=>e.style),"onUpdate:modelValue":l=>t(mn,l),valueKey:s,popperClass:U(()=>{const l=[a.e("popper")];return n.popperClass&&l.push(n.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;n.filterMethod?n.filterMethod(l):n.remoteMethod?n.remoteMethod(l):(c=i.value)==null||c.filter(l)}}},eRe=Ie({extends:pC,setup(n,e){const t=pC.setup(n,e);delete t.selectOptionClick;const r=Dn().proxy;return Ut(()=>{t.select.states.cachedOptions.get(r.value)||t.select.onOptionCreate(r)}),ct(()=>e.attrs.visible,i=>{Ut(()=>{t.states.visible=i})},{immediate:!0}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function RR(n){return n||n===0}function lL(n){return xt(n)&&n.length}function U0(n){return xt(n)?n:RR(n)?[n]:[]}function u2(n,e,t,r,i){for(let s=0;s<n.length;s++){const a=n[s];if(e(a,s,n,i))return r?r(a,s,n,i):a;{const o=t(a);if(lL(o)){const l=u2(o,e,t,r,a);if(l)return l}}}}function d2(n,e,t,r){for(let i=0;i<n.length;i++){const s=n[i];e(s,i,n,r);const a=t(s);lL(a)&&d2(a,e,t,s)}}const tRe=(n,{attrs:e,slots:t,emit:r},{select:i,tree:s,key:a})=>{ct([()=>n.modelValue,s],()=>{n.showCheckbox&&Ut(()=>{const h=s.value;h&&!rs(h.getCheckedKeys(),U0(n.modelValue))&&h.setCheckedKeys(U0(n.modelValue))})},{immediate:!0,deep:!0});const o=U(()=>({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...n.props})),l=(h,f)=>{var p;const m=o.value[h];return Yt(m)?m(f,(p=s.value)==null?void 0:p.getNode(l("value",f))):f[m]},c=U0(n.modelValue).map(h=>u2(n.data||[],f=>l("value",f)===h,f=>l("children",f),(f,p,m,v)=>v&&l("value",v))).filter(h=>RR(h)),u=U(()=>{if(!n.renderAfterExpand&&!n.lazy)return[];const h=[];return d2(n.data.concat(n.cacheData),f=>{const p=l("value",f);h.push({value:p,currentLabel:l("label",f),isDisabled:l("disabled",f)})},f=>l("children",f)),h}),d=()=>{var h;return(h=s.value)==null?void 0:h.getCheckedKeys().filter(f=>{var p;const m=(p=s.value)==null?void 0:p.getNode(f);return!Zi(m)&&Uo(m.childNodes)})};return{...Cl(bs(n),Object.keys(TC.props)),...e,nodeKey:a,expandOnClickNode:U(()=>!n.checkStrictly&&n.expandOnClickNode),defaultExpandedKeys:U(()=>n.defaultExpandedKeys?n.defaultExpandedKeys.concat(c):c),renderContent:(h,{node:f,data:p,store:m})=>h(eRe,{value:l("value",p),label:l("label",p),disabled:l("disabled",p),visible:f.visible},n.renderContent?()=>n.renderContent(h,{node:f,data:p,store:m}):t.default?()=>t.default({node:f,data:p,store:m}):void 0),filterNodeMethod:(h,f,p)=>n.filterNodeMethod?n.filterNodeMethod(h,f,p):h?new RegExp(R6(h),"i").test(l("label",f)||""):!0,onNodeClick:(h,f,p)=>{var m,v,g,_;if((m=e.onNodeClick)==null||m.call(e,h,f,p),!(n.showCheckbox&&n.checkOnClickNode)){if(!n.showCheckbox&&(n.checkStrictly||f.isLeaf)){if(!l("disabled",h)){const b=(v=i.value)==null?void 0:v.states.options.get(l("value",h));(g=i.value)==null||g.handleOptionSelect(b)}}else n.expandOnClickNode&&p.proxy.handleExpandIconClick();(_=i.value)==null||_.focus()}},onCheck:(h,f)=>{var p;if(!n.showCheckbox)return;const m=l("value",h),v={};d2([s.value.store.root],S=>v[S.key]=S,S=>S.childNodes);const g=f.checkedKeys,_=n.multiple?U0(n.modelValue).filter(S=>!(S in v)&&!g.includes(S)):[],b=_.concat(g);if(n.checkStrictly)r(mn,n.multiple?b:b.includes(m)?m:void 0);else if(n.multiple){const S=d();r(mn,_.concat(S))}else{const S=u2([h],M=>!lL(l("children",M))&&!l("disabled",M),M=>l("children",M)),x=S?l("value",S):void 0,w=RR(n.modelValue)&&!!u2([h],M=>l("value",M)===n.modelValue,M=>l("children",M));r(mn,x===n.modelValue||w?void 0:x)}Ut(()=>{var S;const x=U0(n.modelValue);s.value.setCheckedKeys(x),(S=e.onCheck)==null||S.call(e,h,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(p=i.value)==null||p.focus()},onNodeExpand:(h,f,p)=>{var m;(m=e.onNodeExpand)==null||m.call(e,h,f,p),Ut(()=>{if(!n.checkStrictly&&n.lazy&&n.multiple&&f.checked){const v={},g=s.value.getCheckedKeys();d2([s.value.store.root],S=>v[S.key]=S,S=>S.childNodes);const _=U0(n.modelValue).filter(S=>!(S in v)&&!g.includes(S)),b=d();r(mn,_.concat(b))}})},cacheOptions:u}};var nRe=Ie({props:{data:{type:Array,default:()=>[]}},setup(n){const e=Lt(Gg);return ct(()=>n.data,()=>{var t;n.data.forEach(i=>{e.states.cachedOptions.has(i.value)||e.states.cachedOptions.set(i.value,i)});const r=((t=e.selectRef)==null?void 0:t.querySelectorAll("input"))||[];ar&&!Array.from(r).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const rRe=Ie({name:"ElTreeSelect",inheritAttrs:!1,props:{...Qp.props,...TC.props,cacheData:{type:Array,default:()=>[]}},setup(n,e){const{slots:t,expose:r}=e,i=ne(),s=ne(),a=U(()=>n.nodeKey||n.valueKey||"value"),o=JIe(n,e,{select:i,tree:s,key:a}),{cacheOptions:l,...c}=tRe(n,e,{select:i,tree:s,key:a}),u=pr({});return r(u),Rn(()=>{Object.assign(u,{...Cl(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Cl(i.value,["focus","blur","selectedLabel"])})}),()=>tn(Qp,pr({...o,ref:d=>i.value=d}),{...t,default:()=>[tn(nRe,{data:l.value}),tn(TC,pr({...c,ref:d=>s.value=d}))]})}});var iRe=Et(rRe,[["__file","tree-select.vue"]]);const sRe=bn(iRe),cL=Symbol(),aRe={key:-1,level:-1,data:{}};var v1=(n=>(n.KEY="id",n.LABEL="label",n.CHILDREN="children",n.DISABLED="disabled",n.CLASS="",n))(v1||{}),PR=(n=>(n.ADD="add",n.DELETE="delete",n))(PR||{});const Cj={type:Number,default:26},oRe=Tt({data:{type:Fe(Array),default:()=>hi([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Fe(Object),default:()=>hi({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:Boolean,showCheckbox:Boolean,defaultCheckedKeys:{type:Fe(Array),default:()=>hi([])},checkStrictly:Boolean,defaultExpandedKeys:{type:Fe(Array),default:()=>hi([])},indent:{type:Number,default:16},itemSize:Cj,icon:{type:Ar},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},currentNodeKey:{type:Fe([String,Number])},accordion:Boolean,filterMethod:{type:Fe(Function)},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),lRe=Tt({node:{type:Fe(Object),default:()=>hi(aRe)},expanded:Boolean,checked:Boolean,indeterminate:Boolean,showCheckbox:Boolean,disabled:Boolean,current:Boolean,hiddenExpandIcon:Boolean,itemSize:Cj}),cRe=Tt({node:{type:Fe(Object),required:!0}}),Mj="node-click",Tj="node-drop",Aj="node-expand",Ej="node-collapse",Ij="current-change",Rj="check",Pj="check-change",Dj="node-contextmenu",uRe={[Mj]:(n,e,t)=>n&&e&&t,[Tj]:(n,e,t)=>n&&e&&t,[Aj]:(n,e)=>n&&e,[Ej]:(n,e)=>n&&e,[Ij]:(n,e)=>n&&e,[Rj]:(n,e)=>n&&e,[Pj]:(n,e)=>n&&Cr(e),[Dj]:(n,e,t)=>n&&e&&t},dRe={click:(n,e)=>!!(n&&e),drop:(n,e)=>!!(n&&e),toggle:n=>!!n,check:(n,e)=>n&&Cr(e)};function fRe(n,e){const t=ne(new Set),r=ne(new Set),{emit:i}=Dn();ct([()=>e.value,()=>n.defaultCheckedKeys],()=>Ut(()=>{_(n.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!n.showCheckbox||n.checkStrictly)return;const{levelTreeNodeMap:b,maxLevel:S}=e.value,x=t.value,w=new Set;for(let M=S-1;M>=1;--M){const C=b.get(M);C&&C.forEach(A=>{const T=A.children;if(T){let I=!0,D=!1;for(const B of T){const O=B.key;if(x.has(O))D=!0;else if(w.has(O)){I=!1,D=!0;break}else I=!1}I?x.add(A.key):D?(w.add(A.key),x.delete(A.key)):(x.delete(A.key),w.delete(A.key))}})}r.value=w},a=b=>t.value.has(b.key),o=b=>r.value.has(b.key),l=(b,S,x=!0,w=!0)=>{const M=t.value,C=(A,T)=>{M[T?PR.ADD:PR.DELETE](A.key);const I=A.children;!n.checkStrictly&&I&&I.forEach(D=>{D.disabled||C(D,T)})};C(b,S),w&&s(),x&&c(b,S)},c=(b,S)=>{const{checkedNodes:x,checkedKeys:w}=p(),{halfCheckedNodes:M,halfCheckedKeys:C}=m();i(Rj,b.data,{checkedKeys:w,checkedNodes:x,halfCheckedKeys:C,halfCheckedNodes:M}),i(Pj,b.data,S)};function u(b=!1){return p(b).checkedKeys}function d(b=!1){return p(b).checkedNodes}function h(){return m().halfCheckedKeys}function f(){return m().halfCheckedNodes}function p(b=!1){const S=[],x=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:w}=e.value;t.value.forEach(M=>{const C=w.get(M);C&&(!b||b&&C.isLeaf)&&(x.push(M),S.push(C.data))})}return{checkedKeys:x,checkedNodes:S}}function m(){const b=[],S=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:x}=e.value;r.value.forEach(w=>{const M=x.get(w);M&&(S.push(w),b.push(M.data))})}return{halfCheckedNodes:b,halfCheckedKeys:S}}function v(b){t.value.clear(),r.value.clear(),Ut(()=>{_(b)})}function g(b,S){if(e!=null&&e.value&&n.showCheckbox){const x=e.value.treeNodeMap.get(b);x&&l(x,S,!1)}}function _(b){if(e!=null&&e.value){const{treeNodeMap:S}=e.value;if(n.showCheckbox&&S&&(b==null?void 0:b.length)>0){for(const x of b){const w=S.get(x);w&&!a(w)&&l(w,!0,!1,!1)}s()}}}return{updateCheckedKeys:s,toggleCheckbox:l,isChecked:a,isIndeterminate:o,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:f,setChecked:g,setCheckedKeys:v}}function hRe(n,e){const t=ne(new Set([])),r=ne(new Set([])),i=U(()=>Yt(n.filterMethod));function s(o){var l;if(!i.value)return;const c=new Set,u=r.value,d=t.value,h=[],f=((l=e.value)==null?void 0:l.treeNodes)||[],p=n.filterMethod;d.clear();function m(v){v.forEach(g=>{h.push(g),p!=null&&p(o,g.data,g)?h.forEach(b=>{c.add(b.key)}):g.isLeaf&&d.add(g.key);const _=g.children;if(_&&m(_),!g.isLeaf){if(!c.has(g.key))d.add(g.key);else if(_){let b=!0;for(const S of _)if(!d.has(S.key)){b=!1;break}b?u.add(g.key):u.delete(g.key)}}h.pop()})}return m(f),c}function a(o){return r.value.has(o.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:t,doFilter:s,isForceHiddenExpandIcon:a}}function pRe(n,e){const t=ne(new Set),r=ne(),i=Pr(),s=ne(),{isIndeterminate:a,isChecked:o,toggleCheckbox:l,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:h,setChecked:f,setCheckedKeys:p}=fRe(n,i),{doFilter:m,hiddenNodeKeySet:v,isForceHiddenExpandIcon:g}=hRe(n,i),_=U(()=>{var me;return((me=n.props)==null?void 0:me.value)||v1.KEY}),b=U(()=>{var me;return((me=n.props)==null?void 0:me.children)||v1.CHILDREN}),S=U(()=>{var me;return((me=n.props)==null?void 0:me.disabled)||v1.DISABLED}),x=U(()=>{var me;return((me=n.props)==null?void 0:me.label)||v1.LABEL}),w=U(()=>{var me;const be=t.value,oe=v.value,j=[],ke=((me=i.value)==null?void 0:me.treeNodes)||[],ze=[];for(let Ve=ke.length-1;Ve>=0;--Ve)ze.push(ke[Ve]);for(;ze.length;){const Ve=ze.pop();if(!oe.has(Ve.key)&&(j.push(Ve),Ve.children&&be.has(Ve.key)))for(let Le=Ve.children.length-1;Le>=0;--Le)ze.push(Ve.children[Le])}return j}),M=U(()=>w.value.length>0);function C(me){const be=new Map,oe=new Map;let j=1;function ke(Ve,Le=1,Ze=void 0){var st;const fe=[];for(const V of Ve){const J=I(V),he={level:Le,key:J,data:V};he.label=B(V),he.parent=Ze;const Oe=T(V);he.disabled=D(V),he.isLeaf=!Oe||Oe.length===0,he.expanded=t.value.has(J),Oe&&Oe.length&&(he.children=ke(Oe,Le+1,he)),fe.push(he),be.set(J,he),oe.has(Le)||oe.set(Le,[]),(st=oe.get(Le))==null||st.push(he)}return Le>j&&(j=Le),fe}const ze=ke(me);return{treeNodeMap:be,levelTreeNodeMap:oe,maxLevel:j,treeNodes:ze}}function A(me){const be=m(me);be&&(t.value=be)}function T(me){return me[b.value]}function I(me){return me?me[_.value]:""}function D(me){return me[S.value]}function B(me){return me[x.value]}function O(me){t.value.has(me.key)?q(me):W(me)}function H(me){const be=new Set,oe=i.value.treeNodeMap;me.forEach(j=>{let ke=oe.get(j);for(;ke&&!be.has(ke.key);)be.add(ke.key),ke.expanded=!0,ke=ke.parent}),t.value=be}function L(me,be){e(Mj,me.data,me,be),k(me),n.expandOnClickNode&&O(me),n.showCheckbox&&(n.checkOnClickNode||me.isLeaf&&n.checkOnClickLeaf)&&!me.disabled&&l(me,!o(me),!0)}function z(me,be){e(Tj,me.data,me,be)}function k(me){se(me)||(r.value=me.key,e(Ij,me.data,me))}function F(me,be){l(me,be)}function W(me){const be=t.value;if(i.value&&n.accordion){const{treeNodeMap:oe}=i.value;be.forEach(j=>{const ke=oe.get(j);me&&me.level===(ke==null?void 0:ke.level)&&(be.delete(j),ke.expanded=!1)})}be.add(me.key),me.expanded=!0,e(Aj,me.data,me)}function q(me){t.value.delete(me.key),me.expanded=!1,e(Ej,me.data,me)}function Z(me){return!!me.disabled}function se(me){const be=r.value;return be!==void 0&&be===me.key}function X(){var me,be;if(r.value)return(be=(me=i.value)==null?void 0:me.treeNodeMap.get(r.value))==null?void 0:be.data}function ie(){return r.value}function ae(me){r.value=me}function ce(me){i.value=C(me)}function we(me){var be;const oe=Mn(me)?I(me):me;return(be=i.value)==null?void 0:be.treeNodeMap.get(oe)}function He(me,be="auto"){const oe=we(me);oe&&s.value&&s.value.scrollToItem(w.value.indexOf(oe),be)}function Ge(me){var be;(be=s.value)==null||be.scrollTo(me)}return ct(()=>n.currentNodeKey,me=>{r.value=me},{immediate:!0}),ct(()=>n.defaultExpandedKeys,me=>{t.value=new Set(me)},{immediate:!0}),ct(()=>n.data,me=>{ce(me)},{immediate:!0}),{tree:i,flattenTree:w,isNotEmpty:M,listRef:s,getKey:I,getChildren:T,toggleExpand:O,toggleCheckbox:l,isChecked:o,isIndeterminate:a,isDisabled:Z,isCurrent:se,isForceHiddenExpandIcon:g,handleNodeClick:L,handleNodeDrop:z,handleNodeCheck:F,getCurrentNode:X,getCurrentKey:ie,setCurrentKey:ae,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:h,setChecked:f,setCheckedKeys:p,filter:A,setData:ce,getNode:we,expandNode:W,collapseNode:q,setExpandedKeys:H,scrollToNode:He,scrollTo:Ge}}var mRe=Ie({name:"ElTreeNodeContent",props:cRe,setup(n){const e=Lt(cL),t=gt("tree");return()=>{const r=n.node,{data:i}=r;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:r,data:i}):tn(Y6,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[r==null?void 0:r.label])}}});const vRe=Ie({name:"ElTreeNode"}),gRe=Ie({...vRe,props:lRe,emits:dRe,setup(n,{emit:e}){const t=n,r=Lt(cL),i=gt("tree"),s=U(()=>{var f;return(f=r==null?void 0:r.props.indent)!=null?f:16}),a=U(()=>{var f;return(f=r==null?void 0:r.props.icon)!=null?f:$q}),o=f=>{const p=r==null?void 0:r.props.props.class;if(!p)return{};let m;if(Yt(p)){const{data:v}=f;m=p(v,f)}else m=p;return Wt(m)?{[m]:!0}:m},l=f=>{e("click",t.node,f)},c=f=>{e("drop",t.node,f)},u=()=>{e("toggle",t.node)},d=f=>{e("check",t.node,f)},h=f=>{var p,m,v,g;(v=(m=(p=r==null?void 0:r.instance)==null?void 0:p.vnode)==null?void 0:m.props)!=null&&v.onNodeContextmenu&&(f.stopPropagation(),f.preventDefault()),r==null||r.ctx.emit(Dj,f,(g=t.node)==null?void 0:g.data,t.node)};return(f,p)=>{var m,v,g;return $(),ue("div",{ref:"node$",class:Y([y(i).b("node"),y(i).is("expanded",f.expanded),y(i).is("current",f.current),y(i).is("focusable",!f.disabled),y(i).is("checked",!f.disabled&&f.checked),o(f.node)]),role:"treeitem",tabindex:"-1","aria-expanded":f.expanded,"aria-disabled":f.disabled,"aria-checked":f.checked,"data-key":(m=f.node)==null?void 0:m.key,onClick:an(l,["stop"]),onContextmenu:h,onDragover:an(()=>{},["prevent"]),onDragenter:an(()=>{},["prevent"]),onDrop:an(c,["stop"])},[ye("div",{class:Y(y(i).be("node","content")),style:Xt({paddingLeft:`${(f.node.level-1)*y(s)}px`,height:f.itemSize+"px"})},[y(a)?($(),rt(y(zt),{key:0,class:Y([y(i).is("leaf",!!((v=f.node)!=null&&v.isLeaf)),y(i).is("hidden",f.hiddenExpandIcon),{expanded:!((g=f.node)!=null&&g.isLeaf)&&f.expanded},y(i).be("node","expand-icon")]),onClick:an(u,["stop"])},{default:Re(()=>[($(),rt(Ln(y(a))))]),_:1},8,["class","onClick"])):Xe("v-if",!0),f.showCheckbox?($(),rt(y(Ul),{key:1,"model-value":f.checked,indeterminate:f.indeterminate,disabled:f.disabled,onChange:d,onClick:an(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):Xe("v-if",!0),xe(y(mRe),{node:{...f.node,expanded:f.expanded}},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var yRe=Et(gRe,[["__file","tree-node.vue"]]);const bRe=Ie({name:"ElTreeV2"}),_Re=Ie({...bRe,props:oRe,emits:uRe,setup(n,{expose:e,emit:t}){const r=n,i=es(),s=U(()=>r.itemSize);jn(cL,{ctx:{emit:t,slots:i},props:r,instance:Dn()}),jn(su,void 0);const{t:a}=sr(),o=gt("tree"),{flattenTree:l,isNotEmpty:c,listRef:u,toggleExpand:d,isIndeterminate:h,isChecked:f,isDisabled:p,isCurrent:m,isForceHiddenExpandIcon:v,handleNodeClick:g,handleNodeDrop:_,handleNodeCheck:b,toggleCheckbox:S,getCurrentNode:x,getCurrentKey:w,setCurrentKey:M,getCheckedKeys:C,getCheckedNodes:A,getHalfCheckedKeys:T,getHalfCheckedNodes:I,setChecked:D,setCheckedKeys:B,filter:O,setData:H,getNode:L,expandNode:z,collapseNode:k,setExpandedKeys:F,scrollToNode:W,scrollTo:q}=pRe(r,t);return e({toggleCheckbox:S,getCurrentNode:x,getCurrentKey:w,setCurrentKey:M,getCheckedKeys:C,getCheckedNodes:A,getHalfCheckedKeys:T,getHalfCheckedNodes:I,setChecked:D,setCheckedKeys:B,filter:O,setData:H,getNode:L,expandNode:z,collapseNode:k,setExpandedKeys:F,scrollToNode:W,scrollTo:q}),(Z,se)=>($(),ue("div",{class:Y([y(o).b(),{[y(o).m("highlight-current")]:Z.highlightCurrent}]),role:"tree"},[y(c)?($(),rt(y(fX),{key:0,ref_key:"listRef",ref:u,"class-name":y(o).b("virtual-list"),data:y(l),total:y(l).length,height:Z.height,"item-size":y(s),"perf-mode":Z.perfMode,"scrollbar-always-on":Z.scrollbarAlwaysOn},{default:Re(({data:X,index:ie,style:ae})=>[($(),rt(yRe,{key:X[ie].key,style:Xt(ae),node:X[ie],expanded:X[ie].expanded,"show-checkbox":Z.showCheckbox,checked:y(f)(X[ie]),indeterminate:y(h)(X[ie]),"item-size":y(s),disabled:y(p)(X[ie]),current:y(m)(X[ie]),"hidden-expand-icon":y(v)(X[ie]),onClick:y(g),onToggle:y(d),onCheck:y(b),onDrop:y(_)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode","scrollbar-always-on"])):($(),ue("div",{key:1,class:Y(y(o).e("empty-block"))},[Ye(Z.$slots,"empty",{},()=>{var X;return[ye("span",{class:Y(y(o).e("empty-text"))},Ct((X=Z.emptyText)!=null?X:y(a)("el.tree.emptyText")),3)]})],2))],2))}});var SRe=Et(_Re,[["__file","tree.vue"]]);const xRe=bn(SRe),Lj=Symbol("uploadContextKey"),wRe="ElUpload";class CRe extends Error{constructor(e,t,r,i){super(e),this.name="UploadAjaxError",this.status=t,this.method=r,this.url=i}}function eF(n,e,t){let r;return t.response?r=`${t.response.error||t.response}`:t.responseText?r=`${t.responseText}`:r=`fail to ${e.method} ${n} ${t.status}`,new CRe(r,t.status,e.method,n)}function MRe(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const TRe=n=>{typeof XMLHttpRequest>"u"&&Gi(wRe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=n.action;e.upload&&e.upload.addEventListener("progress",s=>{const a=s;a.percent=s.total>0?s.loaded/s.total*100:0,n.onProgress(a)});const r=new FormData;if(n.data)for(const[s,a]of Object.entries(n.data))xt(a)&&a.length?r.append(s,...a):r.append(s,a);r.append(n.filename,n.file,n.file.name),e.addEventListener("error",()=>{n.onError(eF(t,n,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return n.onError(eF(t,n,e));n.onSuccess(MRe(e))}),e.open(n.method,t,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const i=n.headers||{};if(i instanceof Headers)i.forEach((s,a)=>e.setRequestHeader(a,s));else for(const[s,a]of Object.entries(i))Zi(a)||e.setRequestHeader(s,String(a));return e.send(r),e},kj=["text","picture","picture-card"];let ARe=1;const DR=()=>Date.now()+ARe++,Oj=Tt({action:{type:String,default:"#"},headers:{type:Fe(Object)},method:{type:String,default:"post"},data:{type:Fe([Object,Function,Promise]),default:()=>hi({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Fe(Array),default:()=>hi([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:kj,default:"text"},httpRequest:{type:Fe(Function),default:TRe},disabled:Boolean,limit:Number}),ERe=Tt({...Oj,beforeUpload:{type:Fe(Function),default:xr},beforeRemove:{type:Fe(Function)},onRemove:{type:Fe(Function),default:xr},onChange:{type:Fe(Function),default:xr},onPreview:{type:Fe(Function),default:xr},onSuccess:{type:Fe(Function),default:xr},onProgress:{type:Fe(Function),default:xr},onError:{type:Fe(Function),default:xr},onExceed:{type:Fe(Function),default:xr},crossorigin:{type:Fe(String)}}),IRe=Tt({files:{type:Fe(Array),default:()=>hi([])},disabled:Boolean,handlePreview:{type:Fe(Function),default:xr},listType:{type:String,values:kj,default:"text"},crossorigin:{type:Fe(String)}}),RRe={remove:n=>!!n},PRe=Ie({name:"ElUploadList"}),DRe=Ie({...PRe,props:IRe,emits:RRe,setup(n,{emit:e}){const t=n,{t:r}=sr(),i=gt("upload"),s=gt("icon"),a=gt("list"),o=la(),l=ne(!1),c=U(()=>[i.b("list"),i.bm("list",t.listType),i.is("disabled",t.disabled)]),u=d=>{e("remove",d)};return(d,h)=>($(),rt(EW,{tag:"ul",class:Y(y(c)),name:y(a).b()},{default:Re(()=>[($(!0),ue(Bt,null,Fn(d.files,(f,p)=>($(),ue("li",{key:f.uid||f.name,class:Y([y(i).be("list","item"),y(i).is(f.status),{focusing:l.value}]),tabindex:"0",onKeydown:Dr(m=>!y(o)&&u(f),["delete"]),onFocus:m=>l.value=!0,onBlur:m=>l.value=!1,onClick:m=>l.value=!1},[Ye(d.$slots,"default",{file:f,index:p},()=>[d.listType==="picture"||f.status!=="uploading"&&d.listType==="picture-card"?($(),ue("img",{key:0,class:Y(y(i).be("list","item-thumbnail")),src:f.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):Xe("v-if",!0),f.status==="uploading"||d.listType!=="picture-card"?($(),ue("div",{key:1,class:Y(y(i).be("list","item-info"))},[ye("a",{class:Y(y(i).be("list","item-name")),onClick:an(m=>d.handlePreview(f),["prevent"])},[xe(y(zt),{class:Y(y(s).m("document"))},{default:Re(()=>[xe(y(gpe))]),_:1},8,["class"]),ye("span",{class:Y(y(i).be("list","item-file-name")),title:f.name},Ct(f.name),11,["title"])],10,["onClick"]),f.status==="uploading"?($(),rt(y(nX),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(f.percentage),style:Xt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Xe("v-if",!0)],2)):Xe("v-if",!0),ye("label",{class:Y(y(i).be("list","item-status-label"))},[d.listType==="text"?($(),rt(y(zt),{key:0,class:Y([y(s).m("upload-success"),y(s).m("circle-check")])},{default:Re(()=>[xe(y(WD))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?($(),rt(y(zt),{key:1,class:Y([y(s).m("upload-success"),y(s).m("check")])},{default:Re(()=>[xe(y($_))]),_:1},8,["class"])):Xe("v-if",!0)],2),y(o)?Xe("v-if",!0):($(),rt(y(zt),{key:2,class:Y(y(s).m("close")),onClick:m=>u(f)},{default:Re(()=>[xe(y(Bl))]),_:2},1032,["class","onClick"])),Xe(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Xe(" This is a bug which needs to be fixed "),Xe(" TODO: Fix the incorrect navigation interaction "),y(o)?Xe("v-if",!0):($(),ue("i",{key:3,class:Y(y(s).m("close-tip"))},Ct(y(r)("el.upload.deleteTip")),3)),d.listType==="picture-card"?($(),ue("span",{key:4,class:Y(y(i).be("list","item-actions"))},[ye("span",{class:Y(y(i).be("list","item-preview")),onClick:m=>d.handlePreview(f)},[xe(y(zt),{class:Y(y(s).m("zoom-in"))},{default:Re(()=>[xe(y(qq))]),_:1},8,["class"])],10,["onClick"]),y(o)?Xe("v-if",!0):($(),ue("span",{key:0,class:Y(y(i).be("list","item-delete")),onClick:m=>u(f)},[xe(y(zt),{class:Y(y(s).m("delete"))},{default:Re(()=>[xe(y(mpe))]),_:1},8,["class"])],10,["onClick"]))],2)):Xe("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Ye(d.$slots,"append")]),_:3},8,["class","name"]))}});var tF=Et(DRe,[["__file","upload-list.vue"]]);const LRe=Tt({disabled:Boolean}),kRe={file:n=>xt(n)},Nj="ElUploadDrag",ORe=Ie({name:Nj}),NRe=Ie({...ORe,props:LRe,emits:kRe,setup(n,{emit:e}){Lt(Lj)||Gi(Nj,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=gt("upload"),i=ne(!1),s=la(),a=c=>{if(s.value)return;i.value=!1,c.stopPropagation();const u=Array.from(c.dataTransfer.files),d=c.dataTransfer.items||[];u.forEach((h,f)=>{var p;const m=d[f],v=(p=m==null?void 0:m.webkitGetAsEntry)==null?void 0:p.call(m);v&&(h.isDirectory=v.isDirectory)}),e("file",u)},o=()=>{s.value||(i.value=!0)},l=c=>{c.currentTarget.contains(c.relatedTarget)||(i.value=!1)};return(c,u)=>($(),ue("div",{class:Y([y(r).b("dragger"),y(r).is("dragover",i.value)]),onDrop:an(a,["prevent"]),onDragover:an(o,["prevent"]),onDragleave:an(l,["prevent"])},[Ye(c.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var BRe=Et(NRe,[["__file","upload-dragger.vue"]]);const FRe=Tt({...Oj,beforeUpload:{type:Fe(Function),default:xr},onRemove:{type:Fe(Function),default:xr},onStart:{type:Fe(Function),default:xr},onSuccess:{type:Fe(Function),default:xr},onProgress:{type:Fe(Function),default:xr},onError:{type:Fe(Function),default:xr},onExceed:{type:Fe(Function),default:xr}}),zRe=Ie({name:"ElUploadContent",inheritAttrs:!1}),URe=Ie({...zRe,props:FRe,setup(n,{expose:e}){const t=n,r=gt("upload"),i=la(),s=Pr({}),a=Pr(),o=m=>{if(m.length===0)return;const{autoUpload:v,limit:g,fileList:_,multiple:b,onStart:S,onExceed:x}=t;if(g&&_.length+m.length>g){x(m,_);return}b||(m=m.slice(0,1));for(const w of m){const M=w;M.uid=DR(),S(M),v&&l(M)}},l=async m=>{if(a.value.value="",!t.beforeUpload)return u(m);let v,g={};try{const b=t.data,S=t.beforeUpload(m);g=vb(t.data)?nC(t.data):t.data,v=await S,vb(t.data)&&rs(b,g)&&(g=nC(t.data))}catch{v=!1}if(v===!1){t.onRemove(m);return}let _=m;v instanceof Blob&&(v instanceof File?_=v:_=new File([v],m.name,{type:m.type})),u(Object.assign(_,{uid:m.uid}),g)},c=async(m,v)=>Yt(m)?m(v):m,u=async(m,v)=>{const{headers:g,data:_,method:b,withCredentials:S,name:x,action:w,onProgress:M,onSuccess:C,onError:A,httpRequest:T}=t;try{v=await c(v??_,m)}catch{t.onRemove(m);return}const{uid:I}=m,D={headers:g||{},withCredentials:S,file:m,data:v,method:b,filename:x,action:w,onProgress:O=>{M(O,m)},onSuccess:O=>{C(O,m),delete s.value[I]},onError:O=>{A(O,m),delete s.value[I]}},B=T(D);s.value[I]=B,B instanceof Promise&&B.then(D.onSuccess,D.onError)},d=m=>{const v=m.target.files;v&&o(Array.from(v))},h=()=>{i.value||(a.value.value="",a.value.click())},f=()=>{h()};return e({abort:m=>{Oq(s.value).filter(m?([g])=>String(m.uid)===g:()=>!0).forEach(([g,_])=>{_ instanceof XMLHttpRequest&&_.abort(),delete s.value[g]})},upload:l}),(m,v)=>($(),ue("div",{class:Y([y(r).b(),y(r).m(m.listType),y(r).is("drag",m.drag),y(r).is("disabled",y(i))]),tabindex:y(i)?"-1":"0",onClick:h,onKeydown:Dr(an(f,["self"]),["enter","space"])},[m.drag?($(),rt(BRe,{key:0,disabled:y(i),onFile:o},{default:Re(()=>[Ye(m.$slots,"default")]),_:3},8,["disabled"])):Ye(m.$slots,"default",{key:1}),ye("input",{ref_key:"inputRef",ref:a,class:Y(y(r).e("input")),name:m.name,disabled:y(i),multiple:m.multiple,accept:m.accept,type:"file",onChange:d,onClick:an(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var nF=Et(URe,[["__file","upload-content.vue"]]);const rF="ElUpload",iF=n=>{var e;(e=n.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(n.url)},HRe=(n,e)=>{const t=Aq(n,"fileList",void 0,{passive:!0}),r=f=>t.value.find(p=>p.uid===f.uid);function i(f){var p;(p=e.value)==null||p.abort(f)}function s(f=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!f.includes(p.status))}function a(f){t.value=t.value.filter(p=>p.uid!==f.uid)}const o=(f,p)=>{const m=r(p);m&&(console.error(f),m.status="fail",a(m),n.onError(f,m,t.value),n.onChange(m,t.value))},l=(f,p)=>{const m=r(p);m&&(n.onProgress(f,m,t.value),m.status="uploading",m.percentage=Math.round(f.percent))},c=(f,p)=>{const m=r(p);m&&(m.status="success",m.response=f,n.onSuccess(f,m,t.value),n.onChange(m,t.value))},u=f=>{Zi(f.uid)&&(f.uid=DR());const p={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:f.uid};if(n.listType==="picture-card"||n.listType==="picture")try{p.url=URL.createObjectURL(f)}catch(m){m.message,n.onError(m,p,t.value)}t.value=[...t.value,p],n.onChange(p,t.value)},d=async f=>{const p=f instanceof File?r(f):f;p||Gi(rF,"file to be removed not found");const m=v=>{i(v),a(v),n.onRemove(v,t.value),iF(v)};n.beforeRemove?await n.beforeRemove(p,t.value)!==!1&&m(p):m(p)};function h(){t.value.filter(({status:f})=>f==="ready").forEach(({raw:f})=>{var p;return f&&((p=e.value)==null?void 0:p.upload(f))})}return ct(()=>n.listType,f=>{f!=="picture-card"&&f!=="picture"||(t.value=t.value.map(p=>{const{raw:m,url:v}=p;if(!v&&m)try{p.url=URL.createObjectURL(m)}catch(g){n.onError(g,p,t.value)}return p}))}),ct(t,f=>{for(const p of f)p.uid||(p.uid=DR()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:i,clearFiles:s,handleError:o,handleProgress:l,handleStart:u,handleSuccess:c,handleRemove:d,submit:h,revokeFileObjectURL:iF}},VRe=Ie({name:"ElUpload"}),$Re=Ie({...VRe,props:ERe,setup(n,{expose:e}){const t=n,r=la(),i=Pr(),{abort:s,submit:a,clearFiles:o,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:h,handleProgress:f,revokeFileObjectURL:p}=HRe(t,i),m=U(()=>t.listType==="picture-card"),v=U(()=>({...t,fileList:l.value,onStart:c,onProgress:f,onSuccess:h,onError:u,onRemove:d}));return br(()=>{l.value.forEach(p)}),jn(Lj,{accept:yr(t,"accept")}),e({abort:s,submit:a,clearFiles:o,handleStart:c,handleRemove:d}),(g,_)=>($(),ue("div",null,[y(m)&&g.showFileList?($(),rt(tF,{key:0,disabled:y(r),"list-type":g.listType,files:y(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:y(d)},wo({append:Re(()=>[xe(nF,Nn({ref_key:"uploadRef",ref:i},y(v)),{default:Re(()=>[g.$slots.trigger?Ye(g.$slots,"trigger",{key:0}):Xe("v-if",!0),!g.$slots.trigger&&g.$slots.default?Ye(g.$slots,"default",{key:1}):Xe("v-if",!0)]),_:3},16)]),_:2},[g.$slots.file?{name:"default",fn:Re(({file:b,index:S})=>[Ye(g.$slots,"file",{file:b,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Xe("v-if",!0),!y(m)||y(m)&&!g.showFileList?($(),rt(nF,Nn({key:1,ref_key:"uploadRef",ref:i},y(v)),{default:Re(()=>[g.$slots.trigger?Ye(g.$slots,"trigger",{key:0}):Xe("v-if",!0),!g.$slots.trigger&&g.$slots.default?Ye(g.$slots,"default",{key:1}):Xe("v-if",!0)]),_:3},16)):Xe("v-if",!0),g.$slots.trigger?Ye(g.$slots,"default",{key:2}):Xe("v-if",!0),Ye(g.$slots,"tip"),!y(m)&&g.showFileList?($(),rt(tF,{key:3,disabled:y(r),"list-type":g.listType,files:y(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:y(d)},wo({_:2},[g.$slots.file?{name:"default",fn:Re(({file:b,index:S})=>[Ye(g.$slots,"file",{file:b,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Xe("v-if",!0)]))}});var GRe=Et($Re,[["__file","upload.vue"]]);const WRe=bn(GRe),qRe=Tt({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Fe([String,Array]),default:"Element Plus"},font:{type:Fe(Object)},gap:{type:Fe(Array),default:()=>[100,100]},offset:{type:Fe(Array)}});function KRe(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}function YRe(n){return Object.keys(n).map(e=>`${KRe(e)}: ${n[e]};`).join(" ")}function XRe(){return window.devicePixelRatio||1}const jRe=(n,e)=>{let t=!1;return n.removedNodes.length&&e&&(t=Array.from(n.removedNodes).includes(e)),n.type==="attributes"&&n.target===e&&(t=!0),t},Bj=3,ZRe={left:[0,.5],start:[0,.5],center:[.5,0],right:[1,-.5],end:[1,-.5]};function g3(n,e,t=1){const r=document.createElement("canvas"),i=r.getContext("2d"),s=n*t,a=e*t;return r.setAttribute("width",`${s}px`),r.setAttribute("height",`${a}px`),i.save(),[i,r,s,a]}function QRe(){function n(e,t,r,i,s,a,o,l,c){const[u,d,h,f]=g3(i,s,r);if(e instanceof HTMLImageElement)u.drawImage(e,0,0,h,f);else{const{color:Z,fontSize:se,fontStyle:X,fontWeight:ie,fontFamily:ae,textAlign:ce,textBaseline:we}=a,He=Number(se)*r;u.font=`${X} normal ${ie} ${He}px/${s}px ${ae}`,u.fillStyle=Z,u.textAlign=ce,u.textBaseline=we;const Ge=xt(e)?e:[e];Ge==null||Ge.forEach((me,be)=>{const[oe,j]=ZRe[ce];u.fillText(me??"",h*oe+c*j,be*(He+Bj*r))})}const p=Math.PI/180*Number(t),m=Math.max(i,s),[v,g,_]=g3(m,m,r);v.translate(_/2,_/2),v.rotate(p),h>0&&f>0&&v.drawImage(d,-h/2,-f/2);function b(Z,se){const X=Z*Math.cos(p)-se*Math.sin(p),ie=Z*Math.sin(p)+se*Math.cos(p);return[X,ie]}let S=0,x=0,w=0,M=0;const C=h/2,A=f/2;[[0-C,0-A],[0+C,0-A],[0+C,0+A],[0-C,0+A]].forEach(([Z,se])=>{const[X,ie]=b(Z,se);S=Math.min(S,X),x=Math.max(x,X),w=Math.min(w,ie),M=Math.max(M,ie)});const I=S+_/2,D=w+_/2,B=x-S,O=M-w,H=o*r,L=l*r,z=(B+H)*2,k=O+L,[F,W]=g3(z,k);function q(Z=0,se=0){F.drawImage(g,I,D,B,O,Z,se,B,O)}return q(),q(B+H,-O/2-L/2),q(B+H,+O/2+L/2),[W.toDataURL(),z/r,k/r]}return n}const JRe=Ie({name:"ElWatermark"}),e5e=Ie({...JRe,props:qRe,setup(n){const e=n,t={position:"relative"},r=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.color)!=null?I:"rgba(0,0,0,.15)"}),i=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.fontSize)!=null?I:16}),s=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.fontWeight)!=null?I:"normal"}),a=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.fontStyle)!=null?I:"normal"}),o=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.fontFamily)!=null?I:"sans-serif"}),l=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.textAlign)!=null?I:"center"}),c=U(()=>{var T,I;return(I=(T=e.font)==null?void 0:T.textBaseline)!=null?I:"hanging"}),u=U(()=>e.gap[0]),d=U(()=>e.gap[1]),h=U(()=>u.value/2),f=U(()=>d.value/2),p=U(()=>{var T,I;return(I=(T=e.offset)==null?void 0:T[0])!=null?I:h.value}),m=U(()=>{var T,I;return(I=(T=e.offset)==null?void 0:T[1])!=null?I:f.value}),v=()=>{const T={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let I=p.value-h.value,D=m.value-f.value;return I>0&&(T.left=`${I}px`,T.width=`calc(100% - ${I}px)`,I=0),D>0&&(T.top=`${D}px`,T.height=`calc(100% - ${D}px)`,D=0),T.backgroundPosition=`${I}px ${D}px`,T},g=Pr(null),_=Pr(),b=ne(!1),S=()=>{_.value&&(_.value.remove(),_.value=void 0)},x=(T,I)=>{var D;g.value&&_.value&&(b.value=!0,_.value.setAttribute("style",YRe({...v(),backgroundImage:`url('${T}')`,backgroundSize:`${Math.floor(I)}px`})),(D=g.value)==null||D.append(_.value),setTimeout(()=>{b.value=!1}))},w=T=>{let I=120,D=64,B=0;const{image:O,content:H,width:L,height:z,rotate:k}=e;if(!O&&T.measureText){T.font=`${Number(i.value)}px ${o.value}`;const F=xt(H)?H:[H];let W=0,q=0;F.forEach(se=>{const{width:X,fontBoundingBoxAscent:ie,fontBoundingBoxDescent:ae,actualBoundingBoxAscent:ce,actualBoundingBoxDescent:we}=T.measureText(se),He=nr(ie)?ce+we:ie+ae;X>W&&(W=Math.ceil(X)),He>q&&(q=Math.ceil(He))}),I=W,D=q*F.length+(F.length-1)*Bj;const Z=Math.PI/180*Number(k);B=Math.ceil(Math.abs(Math.sin(Z)*D)/2),I+=B}return[L??I,z??D,B]},M=QRe(),C=()=>{const I=document.createElement("canvas").getContext("2d"),D=e.image,B=e.content,O=e.rotate;if(I){_.value||(_.value=document.createElement("div"));const H=XRe(),[L,z,k]=w(I),F=W=>{const[q,Z]=M(W||"",O,H,L,z,{color:r.value,fontSize:i.value,fontStyle:a.value,fontWeight:s.value,fontFamily:o.value,textAlign:l.value,textBaseline:c.value},u.value,d.value,k);x(q,Z)};if(D){const W=new Image;W.onload=()=>{F(W)},W.onerror=()=>{F(B)},W.crossOrigin="anonymous",W.referrerPolicy="no-referrer",W.src=D}else F(B)}};return Rn(()=>{C()}),ct(()=>e,()=>{C()},{deep:!0,flush:"post"}),br(()=>{S()}),Tq(g,T=>{b.value||T.forEach(I=>{jRe(I,_.value)&&(S(),C())})},{attributes:!0,subtree:!0,childList:!0}),(T,I)=>($(),ue("div",{ref_key:"containerRef",ref:g,style:Xt([t])},[Ye(T.$slots,"default")],4))}});var t5e=Et(e5e,[["__file","watermark.vue"]]);const n5e=bn(t5e),r5e=Tt({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Fe(Object)},targetAreaClickable:{type:Boolean,default:!0}}),i5e=(n,e,t,r,i)=>{const s=ne(null),a=()=>{let d;return Wt(n.value)?d=document.querySelector(n.value):Yt(n.value)?d=n.value():d=n.value,d},o=()=>{const d=a();if(!d||!e.value){s.value=null;return}s5e(d)||d.scrollIntoView(i.value);const{left:h,top:f,width:p,height:m}=d.getBoundingClientRect();s.value={left:h,top:f,width:p,height:m,radius:0}};Rn(()=>{ct([e,n],()=>{o()},{immediate:!0}),window.addEventListener("resize",o)}),br(()=>{window.removeEventListener("resize",o)});const l=d=>{var h;return(h=xt(t.value.offset)?t.value.offset[d]:t.value.offset)!=null?h:6},c=U(()=>{var d;if(!s.value)return s.value;const h=l(0),f=l(1),p=((d=t.value)==null?void 0:d.radius)||2;return{left:s.value.left-h,top:s.value.top-f,width:s.value.width+h*2,height:s.value.height+f*2,radius:p}}),u=U(()=>{const d=a();return!r.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var h,f,p,m;return window.DOMRect.fromRect({width:((h=c.value)==null?void 0:h.width)||0,height:((f=c.value)==null?void 0:f.height)||0,x:((p=c.value)==null?void 0:p.left)||0,y:((m=c.value)==null?void 0:m.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},ST=Symbol("ElTour");function s5e(n){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,{top:r,right:i,bottom:s,left:a}=n.getBoundingClientRect();return r>=0&&a>=0&&i<=e&&s<=t}const a5e=(n,e,t,r,i,s,a,o)=>{const l=ne(),c=ne(),u=ne({}),d={x:l,y:c,placement:r,strategy:i,middlewareData:u},h=U(()=>{const g=[vj(y(s)),cIe(),lIe(),o5e()];return y(o)&&y(t)&&g.push(gj({element:y(t)})),g}),f=async()=>{if(!ar)return;const g=y(n),_=y(e);if(!g||!_)return;const b=await yj(g,_,{placement:y(r),strategy:y(i),middleware:y(h)});Yv(d).forEach(S=>{d[S].value=b[S]})},p=U(()=>{if(!y(n))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:y(a)};const{overflow:g}=y(u);return{position:y(i),zIndex:y(a),top:y(c)!=null?`${y(c)}px`:"",left:y(l)!=null?`${y(l)}px`:"",maxWidth:g!=null&&g.maxWidth?`${g==null?void 0:g.maxWidth}px`:""}}),m=U(()=>{if(!y(o))return{};const{arrow:g}=y(u);return{left:(g==null?void 0:g.x)!=null?`${g==null?void 0:g.x}px`:"",top:(g==null?void 0:g.y)!=null?`${g==null?void 0:g.y}px`:""}});let v;return Rn(()=>{const g=y(n),_=y(e);g&&_&&(v=aIe(g,_,f)),Gs(()=>{f()})}),br(()=>{v&&v()}),{update:f,contentStyle:p,arrowStyle:m}},o5e=()=>({name:"overflow",async fn(n){const e=await oIe(n);let t=0;return e.left>0&&(t=e.left),e.right>0&&(t=e.right),{data:{maxWidth:n.rects.floating.width-t}}}}),l5e=Ie({name:"ElTourMask",inheritAttrs:!1}),c5e=Ie({...l5e,props:r5e,setup(n){const e=n,{ns:t}=Lt(ST),r=U(()=>{var l,c;return(c=(l=e.pos)==null?void 0:l.radius)!=null?c:2}),i=U(()=>{const l=r.value,c=`a${l},${l} 0 0 1`;return{topRight:`${c} ${l},${l}`,bottomRight:`${c} ${-l},${l}`,bottomLeft:`${c} ${-l},${-l}`,topLeft:`${c} ${l},${-l}`}}),s=U(()=>{const l=window.innerWidth,c=window.innerHeight,u=i.value,d=`M${l},0 L0,0 L0,${c} L${l},${c} L${l},0 Z`,h=r.value;return e.pos?`${d} M${e.pos.left+h},${e.pos.top} h${e.pos.width-h*2} ${u.topRight} v${e.pos.height-h*2} ${u.bottomRight} h${-e.pos.width+h*2} ${u.bottomLeft} v${-e.pos.height+h*2} ${u.topLeft} z`:d}),a=U(()=>({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:e.zIndex,pointerEvents:e.pos&&e.targetAreaClickable?"none":"auto"})),o=U(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return w6(yr(e,"visible"),{ns:t}),(l,c)=>l.visible?($(),ue("div",Nn({key:0,class:y(t).e("mask"),style:y(a)},l.$attrs),[($(),ue("svg",{style:{width:"100%",height:"100%"}},[ye("path",{class:Y(y(t).e("hollow")),style:Xt(y(o)),d:y(s)},null,14,["d"])]))],16)):Xe("v-if",!0)}});var u5e=Et(c5e,[["__file","mask.vue"]]);const d5e=["absolute","fixed"],f5e=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],uL=Tt({placement:{type:Fe(String),values:f5e,default:"bottom"},reference:{type:Fe(Object),default:null},strategy:{type:Fe(String),values:d5e,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),h5e={close:()=>!0},p5e=Ie({name:"ElTourContent"}),m5e=Ie({...p5e,props:uL,emits:h5e,setup(n,{emit:e}){const t=n,r=ne(t.placement),i=ne(t.strategy),s=ne(null),a=ne(null);ct(()=>t.placement,()=>{r.value=t.placement});const{contentStyle:o,arrowStyle:l}=a5e(yr(t,"reference"),s,a,r,i,yr(t,"offset"),yr(t,"zIndex"),yr(t,"showArrow")),c=U(()=>r.value.split("-")[0]),{ns:u}=Lt(ST),d=()=>{e("close")},h=f=>{f.detail.focusReason==="pointer"&&f.preventDefault()};return(f,p)=>($(),ue("div",{ref_key:"contentRef",ref:s,style:Xt(y(o)),class:Y(y(u).e("content")),"data-side":y(c),tabindex:"-1"},[xe(y(Hg),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":s.value||void 0,onReleaseRequested:d,onFocusoutPrevented:h},{default:Re(()=>[Ye(f.$slots,"default")]),_:3},8,["focus-trap-el"]),f.showArrow?($(),ue("span",{key:0,ref_key:"arrowRef",ref:a,style:Xt(y(l)),class:Y(y(u).e("arrow"))},null,6)):Xe("v-if",!0)],14,["data-side"]))}});var v5e=Et(m5e,[["__file","content.vue"]]),g5e=Ie({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(n,{slots:e,emit:t}){let r=0;return()=>{var i,s;const a=(i=e.default)==null?void 0:i.call(e),o=[];let l=0;function c(u){xt(u)&&u.forEach(d=>{var h;((h=(d==null?void 0:d.type)||{})==null?void 0:h.name)==="ElTourStep"&&(o.push(d),l+=1)})}return a.length&&c(Wc((s=a[0])==null?void 0:s.children)),r!==l&&(r=l,t("update-total",l)),o.length?o[n.current]:null}}});const y5e=Tt({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:Ar},placement:uL.placement,contentStyle:{type:Fe([Object])},mask:{type:Fe([Boolean,Object]),default:!0},gap:{type:Fe(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Fe([Boolean,Object]),default:()=>({block:"center"})},type:{type:Fe(String)},appendTo:{type:oT.to.type,default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),b5e={[mn]:n=>Cr(n),"update:current":n=>en(n),close:n=>en(n),finish:()=>!0,change:n=>en(n)},_5e=Ie({name:"ElTour"}),S5e=Ie({..._5e,props:y5e,emits:b5e,setup(n,{emit:e}){const t=n,r=gt("tour"),i=ne(0),s=ne(),a=Aq(t,"current",e,{passive:!0}),o=U(()=>{var A;return(A=s.value)==null?void 0:A.target}),l=U(()=>[r.b(),v.value==="primary"?r.m("primary"):""]),c=U(()=>{var A;return((A=s.value)==null?void 0:A.placement)||t.placement}),u=U(()=>{var A,T;return(T=(A=s.value)==null?void 0:A.contentStyle)!=null?T:t.contentStyle}),d=U(()=>{var A,T;return(T=(A=s.value)==null?void 0:A.mask)!=null?T:t.mask}),h=U(()=>!!d.value&&t.modelValue),f=U(()=>Cr(d.value)?void 0:d.value),p=U(()=>{var A,T;return!!o.value&&((T=(A=s.value)==null?void 0:A.showArrow)!=null?T:t.showArrow)}),m=U(()=>{var A,T;return(T=(A=s.value)==null?void 0:A.scrollIntoViewOptions)!=null?T:t.scrollIntoViewOptions}),v=U(()=>{var A,T;return(T=(A=s.value)==null?void 0:A.type)!=null?T:t.type}),{nextZIndex:g}=zg(),_=g(),b=U(()=>{var A;return(A=t.zIndex)!=null?A:_}),{mergedPosInfo:S,triggerTarget:x}=i5e(o,yr(t,"modelValue"),yr(t,"gap"),d,m);ct(()=>t.modelValue,A=>{A||(a.value=0)});const w=()=>{t.closeOnPressEscape&&(e(mn,!1),e("close",a.value))},M=A=>{i.value=A},C=es();return jn(ST,{currentStep:s,current:a,total:i,showClose:yr(t,"showClose"),closeIcon:yr(t,"closeIcon"),mergedType:v,ns:r,slots:C,updateModelValue(A){e(mn,A)},onClose(){e("close",a.value)},onFinish(){e("finish")},onChange(){e(Hn,a.value)}}),(A,T)=>($(),ue(Bt,null,[xe(y(Vg),{to:A.appendTo},{default:Re(()=>{var I,D;return[ye("div",Nn({class:y(l)},A.$attrs),[xe(u5e,{visible:y(h),fill:(I=y(f))==null?void 0:I.color,style:Xt((D=y(f))==null?void 0:D.style),pos:y(S),"z-index":y(b),"target-area-clickable":A.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),A.modelValue?($(),rt(v5e,{key:y(a),reference:y(x),placement:y(c),"show-arrow":y(p),"z-index":y(b),style:Xt(y(u)),onClose:w},{default:Re(()=>[xe(y(g5e),{current:y(a),onUpdateTotal:M},{default:Re(()=>[Ye(A.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):Xe("v-if",!0)],16)]}),_:3},8,["to"]),Xe(" just for IDE "),Xe("v-if",!0)],64))}});var x5e=Et(S5e,[["__file","tour.vue"]]);const w5e=Tt({target:{type:Fe([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:Ar},showArrow:{type:Boolean,default:void 0},placement:uL.placement,mask:{type:Fe([Boolean,Object]),default:void 0},contentStyle:{type:Fe([Object])},prevButtonProps:{type:Fe(Object)},nextButtonProps:{type:Fe(Object)},scrollIntoViewOptions:{type:Fe([Boolean,Object]),default:void 0},type:{type:Fe(String)}}),C5e={close:()=>!0},M5e=Ie({name:"ElTourStep"}),T5e=Ie({...M5e,props:w5e,emits:C5e,setup(n,{emit:e}){const t=n,{Close:r}=Kq,{t:i}=sr(),{currentStep:s,current:a,total:o,showClose:l,closeIcon:c,mergedType:u,ns:d,slots:h,updateModelValue:f,onClose:p,onFinish:m,onChange:v}=Lt(ST);ct(t,C=>{s.value=C},{immediate:!0});const g=U(()=>{var C;return(C=t.showClose)!=null?C:l.value}),_=U(()=>{var C,A;return(A=(C=t.closeIcon)!=null?C:c.value)!=null?A:r}),b=C=>{if(C)return xq(C,["children","onClick"])},S=()=>{var C,A;a.value-=1,(C=t.prevButtonProps)!=null&&C.onClick&&((A=t.prevButtonProps)==null||A.onClick()),v()},x=()=>{var C;a.value>=o.value-1?w():a.value+=1,(C=t.nextButtonProps)!=null&&C.onClick&&t.nextButtonProps.onClick(),v()},w=()=>{M(),m()},M=()=>{f(!1),p(),e("close")};return(C,A)=>($(),ue(Bt,null,[y(g)?($(),ue("button",{key:0,"aria-label":"Close",class:Y(y(d).e("closebtn")),type:"button",onClick:M},[xe(y(zt),{class:Y(y(d).e("close"))},{default:Re(()=>[($(),rt(Ln(y(_))))]),_:1},8,["class"])],2)):Xe("v-if",!0),ye("header",{class:Y([y(d).e("header"),{"show-close":y(l)}])},[Ye(C.$slots,"header",{},()=>[ye("span",{role:"heading",class:Y(y(d).e("title"))},Ct(C.title),3)])],2),ye("div",{class:Y(y(d).e("body"))},[Ye(C.$slots,"default",{},()=>[ye("span",null,Ct(C.description),1)])],2),ye("footer",{class:Y(y(d).e("footer"))},[ye("div",{class:Y(y(d).b("indicators"))},[y(h).indicators?($(),rt(Ln(y(h).indicators),{key:0,current:y(a),total:y(o)},null,8,["current","total"])):($(!0),ue(Bt,{key:1},Fn(y(o),(T,I)=>($(),ue("span",{key:T,class:Y([y(d).b("indicator"),I===y(a)?"is-active":""])},null,2))),128))],2),ye("div",{class:Y(y(d).b("buttons"))},[y(a)>0?($(),rt(y(ks),Nn({key:0,size:"small",type:y(u)},b(C.prevButtonProps),{onClick:S}),{default:Re(()=>{var T,I;return[Bn(Ct((I=(T=C.prevButtonProps)==null?void 0:T.children)!=null?I:y(i)("el.tour.previous")),1)]}),_:1},16,["type"])):Xe("v-if",!0),y(a)<=y(o)-1?($(),rt(y(ks),Nn({key:1,size:"small",type:y(u)==="primary"?"default":"primary"},b(C.nextButtonProps),{onClick:x}),{default:Re(()=>{var T,I;return[Bn(Ct((I=(T=C.nextButtonProps)==null?void 0:T.children)!=null?I:y(a)===y(o)-1?y(i)("el.tour.finish"):y(i)("el.tour.next")),1)]}),_:1},16,["type"])):Xe("v-if",!0)],2)],2)],64))}});var Fj=Et(T5e,[["__file","step.vue"]]);const A5e=bn(x5e,{TourStep:Fj}),E5e=pi(Fj),I5e=Tt({container:{type:Fe([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Fe(String),default:"default"},direction:{type:Fe(String),default:"vertical"},selectScrollTop:Boolean}),R5e={change:n=>Wt(n),click:(n,e)=>n instanceof MouseEvent&&(Wt(e)||nr(e))},zj=Symbol("anchor"),KS=n=>{if(!ar||n==="")return null;if(Wt(n))try{return document.querySelector(n)}catch{return null}return n};function P5e(n){let e=0;const t=(...r)=>{e&&Zp(e),e=th(()=>{n(...r),e=0})};return t.cancel=()=>{Zp(e),e=0},t}const D5e=Ie({name:"ElAnchor"}),L5e=Ie({...D5e,props:I5e,emits:R5e,setup(n,{expose:e,emit:t}){const r=n,i=es(),s=ne(""),a=ne({}),o=ne(null),l=ne(null),c=ne(),u={};let d=!1,h=0;const f=gt("anchor"),p=U(()=>[f.b(),r.type==="underline"?f.m("underline"):"",f.m(r.direction)]),m=T=>{u[T.href]=T.el},v=T=>{delete u[T]},g=T=>{s.value!==T&&(s.value=T,t(Hn,T))};let _=null;const b=T=>{if(!c.value)return;const I=KS(T);if(!I)return;_&&_(),d=!0;const D=pB(I,c.value),B=WI(I,D),O=D.scrollHeight-D.clientHeight,H=Math.min(B-r.offset,O);_=Nhe(c.value,h,H,r.duration,()=>{setTimeout(()=>{d=!1},20)})},S=T=>{T&&(g(T),b(T))},x=(T,I)=>{t("click",T,I),S(I)},w=P5e(()=>{c.value&&(h=mB(c.value));const T=M();d||nr(T)||g(T)}),M=()=>{if(!c.value)return;const T=mB(c.value),I=[];for(const D of Object.keys(u)){const B=KS(D);if(!B)continue;const O=pB(B,c.value),H=WI(B,O);I.push({top:H-r.offset-r.bound,href:D})}I.sort((D,B)=>D.top-B.top);for(let D=0;D<I.length;D++){const B=I[D],O=I[D+1];if(D===0&&T===0)return r.selectScrollTop?B.href:"";if(B.top<=T&&(!O||O.top>T))return B.href}},C=()=>{const T=KS(r.container);!T||H_(T)?c.value=window:c.value=T};Lr(c,"scroll",w);const A=()=>{Ut(()=>{if(!o.value||!l.value||!s.value){a.value={};return}const T=u[s.value];if(!T){a.value={};return}const I=o.value.getBoundingClientRect(),D=l.value.getBoundingClientRect(),B=T.getBoundingClientRect();if(r.direction==="horizontal"){const O=B.left-I.left;a.value={left:`${O}px`,width:`${B.width}px`,opacity:1}}else{const O=B.top-I.top+(B.height-D.height)/2;a.value={top:`${O}px`,opacity:1}}})};return ct(s,A),ct(()=>{var T;return(T=i.default)==null?void 0:T.call(i)},A),Rn(()=>{C();const T=decodeURIComponent(window.location.hash);KS(T)?S(T):w()}),ct(()=>r.container,()=>{C()}),jn(zj,{ns:f,direction:r.direction,currentAnchor:s,addLink:m,removeLink:v,handleClick:x}),e({scrollTo:S}),(T,I)=>($(),ue("div",{ref_key:"anchorRef",ref:o,class:Y(y(p))},[T.marker?($(),ue("div",{key:0,ref_key:"markerRef",ref:l,class:Y(y(f).e("marker")),style:Xt(a.value)},null,6)):Xe("v-if",!0),ye("div",{class:Y(y(f).e("list"))},[Ye(T.$slots,"default")],2)],2))}});var k5e=Et(L5e,[["__file","anchor.vue"]]);const O5e=Tt({title:String,href:String}),N5e=Ie({name:"ElAnchorLink"}),B5e=Ie({...N5e,props:O5e,setup(n){const e=n,t=ne(null),{ns:r,direction:i,currentAnchor:s,addLink:a,removeLink:o,handleClick:l}=Lt(zj),c=U(()=>[r.e("link"),r.is("active",s.value===e.href)]),u=d=>{l(d,e.href)};return ct(()=>e.href,(d,h)=>{Ut(()=>{h&&o(h),d&&a({href:d,el:t.value})})}),Rn(()=>{const{href:d}=e;d&&a({href:d,el:t.value})}),br(()=>{const{href:d}=e;d&&o(d)}),(d,h)=>($(),ue("div",{class:Y(y(r).e("item"))},[ye("a",{ref_key:"linkRef",ref:t,class:Y(y(c)),href:d.href,onClick:u},[Ye(d.$slots,"default",{},()=>[Bn(Ct(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&y(i)==="vertical"?($(),ue("div",{key:0,class:Y(y(r).e("list"))},[Ye(d.$slots,"sub-link")],2)):Xe("v-if",!0)],2))}});var Uj=Et(B5e,[["__file","anchor-link.vue"]]);const F5e=bn(k5e,{AnchorLink:Uj}),z5e=pi(Uj),Hj={label:"label",value:"value",disabled:"disabled"},U5e=Tt({direction:{type:Fe(String),default:"horizontal"},options:{type:Fe(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},props:{type:Fe(Object),default:()=>Hj},block:Boolean,size:as,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...aa(["ariaLabel"])}),H5e={[mn]:n=>Wt(n)||en(n)||Cr(n),[Hn]:n=>Wt(n)||en(n)||Cr(n)},V5e=Ie({name:"ElSegmented"}),$5e=Ie({...V5e,props:U5e,emits:H5e,setup(n,{emit:e}){const t=n,r=gt("segmented"),i=Ws(),s=Qi(),a=la(),{formItem:o}=oa(),{inputId:l,isLabeledByFormItem:c}=Vl(t,{formItemContext:o}),u=ne(null),d=ihe(),h=pr({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),f=T=>{const I=m(T);e(mn,I),e(Hn,I)},p=U(()=>({...Hj,...t.props})),m=T=>Mn(T)?T[p.value.value]:T,v=T=>Mn(T)?T[p.value.label]:T,g=T=>!!(a.value||Mn(T)&&T[p.value.disabled]),_=T=>t.modelValue===m(T),b=T=>t.options.find(I=>m(I)===T),S=T=>[r.e("item"),r.is("selected",_(T)),r.is("disabled",g(T))],x=()=>{if(!u.value)return;const T=u.value.querySelector(".is-selected"),I=u.value.querySelector(".is-selected input");if(!T||!I){h.width=0,h.height=0,h.translateX=0,h.translateY=0,h.focusVisible=!1;return}h.isInit=!0,t.direction==="vertical"?(h.height=T.offsetHeight,h.translateY=T.offsetTop):(h.width=T.offsetWidth,h.translateX=T.offsetLeft);try{h.focusVisible=I.matches(":focus-visible")}catch{}},w=U(()=>[r.b(),r.m(s.value),r.is("block",t.block)]),M=U(()=>({width:t.direction==="vertical"?"100%":`${h.width}px`,height:t.direction==="vertical"?`${h.height}px`:"100%",transform:t.direction==="vertical"?`translateY(${h.translateY}px)`:`translateX(${h.translateX}px)`,display:h.isInit?"block":"none"})),C=U(()=>[r.e("item-selected"),r.is("disabled",g(b(t.modelValue))),r.is("focus-visible",h.focusVisible)]),A=U(()=>t.name||i.value);return fi(u,x),ct(d,x),ct(()=>t.modelValue,()=>{var T;x(),t.validateEvent&&((T=o==null?void 0:o.validate)==null||T.call(o,"change").catch(I=>void 0))},{flush:"post"}),(T,I)=>T.options.length?($(),ue("div",{key:0,id:y(l),ref_key:"segmentedRef",ref:u,class:Y(y(w)),role:"radiogroup","aria-label":y(c)?void 0:T.ariaLabel||"segmented","aria-labelledby":y(c)?y(o).labelId:void 0},[ye("div",{class:Y([y(r).e("group"),y(r).m(t.direction)])},[ye("div",{style:Xt(y(M)),class:Y(y(C))},null,6),($(!0),ue(Bt,null,Fn(T.options,(D,B)=>($(),ue("label",{key:B,class:Y(S(D))},[ye("input",{class:Y(y(r).e("item-input")),type:"radio",name:y(A),disabled:g(D),checked:_(D),onChange:O=>f(D)},null,42,["name","disabled","checked","onChange"]),ye("div",{class:Y(y(r).e("item-label"))},[Ye(T.$slots,"default",{item:D},()=>[Bn(Ct(v(D)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):Xe("v-if",!0)}});var G5e=Et($5e,[["__file","segmented.vue"]]);const W5e=bn(G5e),q5e=(n,e)=>{const t=n.toLowerCase();return(e.label||e.value).toLowerCase().includes(t)},K5e=(n,e,t)=>{const{selectionEnd:r}=n;if(r===null)return;const i=n.value,s=Is(e);let a=-1,o;for(let l=r-1;l>=0;--l){const c=i[l];if(c===t||c===`
`||c==="\r"){a=l;continue}if(s.includes(c)){const u=a===-1?r:a;o={pattern:i.slice(l+1,u),start:l+1,end:u,prefix:c,prefixIndex:l,splitIndex:a,selectionEnd:r};break}}return o},Y5e=(n,e={debug:!1,useSelectionEnd:!1})=>{const t=n.selectionStart!==null?n.selectionStart:0,r=n.selectionEnd!==null?n.selectionEnd:0,i=e.useSelectionEnd?r:t,s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const h=document.querySelector("#input-textarea-caret-position-mirror-div");h!=null&&h.parentNode&&h.parentNode.removeChild(h)}const a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);const o=a.style,l=window.getComputedStyle(n),c=n.nodeName==="INPUT";o.whiteSpace=c?"nowrap":"pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",e.debug||(o.visibility="hidden"),s.forEach(h=>{if(c&&h==="lineHeight")if(l.boxSizing==="border-box"){const f=Number.parseInt(l.height),p=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),m=p+Number.parseInt(l.lineHeight);f>m?o.lineHeight=`${f-p}px`:f===m?o.lineHeight=l.lineHeight:o.lineHeight="0"}else o.lineHeight=l.height;else o[h]=l[h]}),XD()?n.scrollHeight>Number.parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",a.textContent=n.value.slice(0,Math.max(0,i)),c&&a.textContent&&(a.textContent=a.textContent.replace(/\s/g," "));const u=document.createElement("span");u.textContent=n.value.slice(Math.max(0,i))||".",u.style.position="relative",u.style.left=`${-n.scrollLeft}px`,u.style.top=`${-n.scrollTop}px`,a.appendChild(u);const d={top:u.offsetTop+Number.parseInt(l.borderTopWidth),left:u.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return e.debug?u.style.backgroundColor="#aaa":document.body.removeChild(a),d.left>=n.clientWidth&&(d.left=n.clientWidth),d},X5e=Tt({...G_,options:{type:Fe(Array),default:()=>[]},prefix:{type:Fe([String,Array]),default:"@",validator:n=>Wt(n)?n.length===1:n.every(e=>Wt(e)&&e.length===1)},split:{type:String,default:" ",validator:n=>n.length===1},filterOption:{type:Fe([Boolean,Function]),default:()=>q5e,validator:n=>n===!1?!0:Yt(n)},placement:{type:Fe(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:Fe(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Fe(Object),default:()=>({})}}),j5e={[mn]:n=>Wt(n),"whole-remove":(n,e)=>Wt(n)&&Wt(e),input:n=>Wt(n),search:(n,e)=>Wt(n)&&Wt(e),select:(n,e)=>Wt(n.value)&&Wt(e),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},Z5e=Tt({options:{type:Fe(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),Q5e={select:n=>Wt(n.value)},J5e=Ie({name:"ElMentionDropdown"}),ePe=Ie({...J5e,props:Z5e,emits:Q5e,setup(n,{expose:e,emit:t}){const r=n,i=gt("mention"),{t:s}=sr(),a=ne(-1),o=ne(),l=ne(),c=ne(),u=(b,S)=>[i.be("dropdown","item"),i.is("hovering",a.value===S),i.is("disabled",b.disabled||r.disabled)],d=b=>{b.disabled||r.disabled||t("select",b)},h=b=>{a.value=b},f=U(()=>r.disabled||r.options.every(b=>b.disabled)),p=U(()=>r.options[a.value]),m=()=>{p.value&&t("select",p.value)},v=b=>{const{options:S}=r;if(S.length===0||f.value)return;b==="next"?(a.value++,a.value===S.length&&(a.value=0)):b==="prev"&&(a.value--,a.value<0&&(a.value=S.length-1));const x=S[a.value];if(x.disabled){v(b);return}Ut(()=>g(x))},g=b=>{var S,x,w,M;const{options:C}=r,A=C.findIndex(I=>I.value===b.value),T=(S=l.value)==null?void 0:S[A];if(T){const I=(w=(x=c.value)==null?void 0:x.querySelector)==null?void 0:w.call(x,`.${i.be("dropdown","wrap")}`);I&&GD(I,T)}(M=o.value)==null||M.handleScroll()};return ct(()=>r.options,()=>{f.value||r.options.length===0?a.value=-1:a.value=0},{immediate:!0}),e({hoveringIndex:a,navigateOptions:v,selectHoverOption:m,hoverOption:p}),(b,S)=>($(),ue("div",{ref_key:"dropdownRef",ref:c,class:Y(y(i).b("dropdown"))},[b.$slots.header?($(),ue("div",{key:0,class:Y(y(i).be("dropdown","header"))},[Ye(b.$slots,"header")],2)):Xe("v-if",!0),Cn(xe(y(mc),{id:b.contentId,ref_key:"scrollbarRef",ref:o,tag:"ul","wrap-class":y(i).be("dropdown","wrap"),"view-class":y(i).be("dropdown","list"),role:"listbox","aria-label":b.ariaLabel,"aria-orientation":"vertical"},{default:Re(()=>[($(!0),ue(Bt,null,Fn(b.options,(x,w)=>($(),ue("li",{id:`${b.contentId}-${w}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:w,class:Y(u(x,w)),role:"option","aria-disabled":x.disabled||b.disabled||void 0,"aria-selected":a.value===w,onMousemove:M=>h(w),onClick:an(M=>d(x),["stop"])},[Ye(b.$slots,"label",{item:x,index:w},()=>{var M;return[ye("span",null,Ct((M=x.label)!=null?M:x.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[cr,b.options.length>0&&!b.loading]]),b.loading?($(),ue("div",{key:1,class:Y(y(i).be("dropdown","loading"))},[Ye(b.$slots,"loading",{},()=>[Bn(Ct(y(s)("el.mention.loading")),1)])],2)):Xe("v-if",!0),b.$slots.footer?($(),ue("div",{key:2,class:Y(y(i).be("dropdown","footer"))},[Ye(b.$slots,"footer")],2)):Xe("v-if",!0)],2))}});var tPe=Et(ePe,[["__file","mention-dropdown.vue"]]);const nPe=Ie({name:"ElMention",inheritAttrs:!1}),rPe=Ie({...nPe,props:X5e,emits:j5e,setup(n,{expose:e,emit:t}){const r=n,i=U(()=>Cl(r,Object.keys(G_))),s=gt("mention"),a=la(),o=Ws(),l=ne(),c=ne(),u=ne(),d=ne(!1),h=ne(),f=ne(),p=U(()=>r.showArrow?r.placement:`${r.placement}-start`),m=U(()=>r.showArrow?["bottom","top"]:["bottom-start","top-start"]),v=U(()=>{const{filterOption:D,options:B}=r;return!f.value||!D?B:B.filter(O=>D(f.value.pattern,O))}),g=U(()=>d.value&&(!!v.value.length||r.loading)),_=U(()=>{var D;return`${o.value}-${(D=u.value)==null?void 0:D.hoveringIndex}`}),b=D=>{t(mn,D),t(is,D),A()},S=D=>{var B,O,H,L;if(!(!("code"in D)||(B=l.value)!=null&&B.isComposing))switch(D.code){case Rt.left:case Rt.right:A();break;case Rt.up:case Rt.down:if(!d.value)return;D.preventDefault(),(O=u.value)==null||O.navigateOptions(D.code===Rt.up?"prev":"next");break;case Rt.enter:case Rt.numpadEnter:if(!d.value)return;D.preventDefault(),(H=u.value)!=null&&H.hoverOption?(L=u.value)==null||L.selectHoverOption():d.value=!1;break;case Rt.esc:if(!d.value)return;D.preventDefault(),d.value=!1;break;case Rt.backspace:if(r.whole&&f.value){const{splitIndex:z,selectionEnd:k,pattern:F,prefixIndex:W,prefix:q}=f.value,Z=C();if(!Z)return;const se=Z.value,X=r.options.find(ae=>ae.value===F);if((Yt(r.checkIsWhole)?r.checkIsWhole(F,q):X)&&z!==-1&&z+1===k){D.preventDefault();const ae=se.slice(0,W)+se.slice(z+1);t(mn,ae),t(is,ae),t("whole-remove",F,q);const ce=W;Ut(()=>{Z.selectionStart=ce,Z.selectionEnd=ce,I()})}}}},{wrapperRef:x}=gh(l,{disabled:a,afterFocus(){A()},beforeBlur(D){var B;return(B=c.value)==null?void 0:B.isFocusInsideContent(D)},afterBlur(){d.value=!1}}),w=()=>{A()},M=D=>{if(!f.value)return;const B=C();if(!B)return;const O=B.value,{split:H}=r,L=O.slice(f.value.end),z=L.startsWith(H),k=`${D.value}${z?"":H}`,F=O.slice(0,f.value.start)+k+L;t(mn,F),t(is,F),t("select",D,f.value.prefix);const W=f.value.start+k.length+(z?1:0);Ut(()=>{B.selectionStart=W,B.selectionEnd=W,B.focus(),I()})},C=()=>{var D,B;return r.type==="textarea"?(D=l.value)==null?void 0:D.textarea:(B=l.value)==null?void 0:B.input},A=()=>{setTimeout(()=>{T(),I(),Ut(()=>{var D;return(D=c.value)==null?void 0:D.updatePopper()})},0)},T=()=>{const D=C();if(!D)return;const B=Y5e(D),O=D.getBoundingClientRect(),H=l.value.$el.getBoundingClientRect();h.value={position:"absolute",width:0,height:`${B.height}px`,left:`${B.left+O.left-H.left}px`,top:`${B.top+O.top-H.top}px`}},I=()=>{const D=C();if(document.activeElement!==D){d.value=!1;return}const{prefix:B,split:O}=r;if(f.value=K5e(D,B,O),f.value&&f.value.splitIndex===-1){d.value=!0,t("search",f.value.pattern,f.value.prefix);return}d.value=!1};return e({input:l,tooltip:c,dropdownVisible:g}),(D,B)=>($(),ue("div",{ref_key:"wrapperRef",ref:x,class:Y(y(s).b())},[xe(y(wa),Nn(Nn(y(i),D.$attrs),{ref_key:"elInputRef",ref:l,"model-value":D.modelValue,disabled:y(a),role:y(g)?"combobox":void 0,"aria-activedescendant":y(g)?y(_)||"":void 0,"aria-controls":y(g)?y(o):void 0,"aria-expanded":y(g)||void 0,"aria-label":D.ariaLabel,"aria-autocomplete":y(g)?"none":void 0,"aria-haspopup":y(g)?"listbox":void 0,onInput:b,onKeydown:S,onMousedown:w}),wo({_:2},[Fn(D.$slots,(O,H)=>({name:H,fn:Re(L=>[Ye(D.$slots,H,Vo(nu(L)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),xe(y(ia),{ref_key:"tooltipRef",ref:c,visible:y(g),"popper-class":[y(s).e("popper"),D.popperClass],"popper-options":D.popperOptions,placement:y(p),"fallback-placements":y(m),effect:"light",pure:"",offset:D.offset,"show-arrow":D.showArrow},{default:Re(()=>[ye("div",{style:Xt(h.value)},null,4)]),content:Re(()=>{var O;return[xe(tPe,{ref_key:"dropdownRef",ref:u,options:y(v),disabled:y(a),loading:D.loading,"content-id":y(o),"aria-label":D.ariaLabel,onSelect:M,onClick:an((O=l.value)==null?void 0:O.focus,["stop"])},wo({_:2},[Fn(D.$slots,(H,L)=>({name:L,fn:Re(z=>[Ye(D.$slots,L,Vo(nu(z)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var iPe=Et(rPe,[["__file","mention.vue"]]);const sPe=bn(iPe),aPe=Tt({layout:{type:String,default:"horizontal",values:["horizontal","vertical"]}}),Vj=Symbol("splitterRootContextKey");function oPe(n){const e=ne(),{width:t,height:r}=dhe(e),i=U(()=>n.value==="horizontal"?t.value:r.value);return{containerEl:e,containerSize:i}}function dL(n){return Number(n.slice(0,-1))/100}function fL(n){return Number(n.slice(0,-2))}function hL(n){return Wt(n)&&n.endsWith("%")}function pL(n){return Wt(n)&&n.endsWith("px")}function lPe(n,e){const t=U(()=>n.value.map(o=>o.size)),r=U(()=>n.value.length),i=ne([]);ct([t,r,e],()=>{var o;let l=[],c=0;for(let d=0;d<r.value;d+=1){const h=(o=n.value[d])==null?void 0:o.size;if(hL(h))l[d]=dL(h);else if(pL(h))l[d]=fL(h)/e.value;else if(h||h===0){const f=Number(h);Number.isNaN(f)||(l[d]=f/e.value)}else c+=1,l[d]=void 0}const u=l.reduce((d,h)=>d+(h||0),0);if(u>1||!c){const d=1/u;l=l.map(h=>h===void 0?0:h*d)}else{const d=(1-u)/c;l=l.map(h=>h===void 0?d:h)}i.value=l});const s=o=>o*e.value,a=U(()=>i.value.map(s));return{percentSizes:i,pxSizes:a}}function cPe(n,e,t){const r=f=>f*e.value||0;function i(f,p){return hL(f)?r(dL(f)):pL(f)?fL(f):f??p}const s=ne(null);let a=[];const o=U(()=>n.value.map(f=>[f.min,f.max])),l=f=>{s.value={index:f,confirmed:!1},a=t.value},c=(f,p)=>{var m,v;let g=null;if((!s.value||!s.value.confirmed)&&p!==0){if(p>0)g=f,s.value={index:f,confirmed:!0};else for(let T=f;T>=0;T-=1)if(a[T]>0){g=T,s.value={index:T,confirmed:!0};break}}const _=(v=g??((m=s.value)==null?void 0:m.index))!=null?v:f,b=[...a],S=_+1,x=i(o.value[_][0],0),w=i(o.value[S][0],0),M=i(o.value[_][1],e.value||0),C=i(o.value[S][1],e.value||0);let A=p;b[_]+A<x&&(A=x-b[_]),b[S]-A<w&&(A=b[S]-w),b[_]+A>M&&(A=M-b[_]),b[S]-A>C&&(A=b[S]-C),b[_]+=A,b[S]-=A,n.value.forEach((T,I)=>{T.size=b[I]})},u=()=>{s.value=null,a=[]},d=[];return{onMoveStart:l,onMoving:c,onMoveEnd:u,movingIndex:s,onCollapse:(f,p)=>{d.length||d.push(...t.value);const m=t.value,v=p==="start"?f:f+1,g=p==="start"?f+1:f,_=m[v],b=m[g];if(_!==0&&b!==0)m[v]=0,m[g]+=_,d[f]=_;else{const S=_+b,x=d[f],w=S-x;m[g]=x,m[v]=w}n.value.forEach((S,x)=>{S.size=m[x]})}}}const uPe=Ie({name:"ElSplitter"}),dPe=Ie({...uPe,props:aPe,emits:["resizeStart","resize","resizeEnd","collapse"],setup(n,{emit:e}){const t=n,r=gt("splitter"),i=yr(t,"layout"),{containerEl:s,containerSize:a}=oPe(i),{removeChild:o,children:l,addChild:c,ChildrenSorter:u}=lT(Dn(),"ElSplitterPanel");ct(l,()=>{l.value.forEach((w,M)=>{w.setIndex(M)})});const{percentSizes:d,pxSizes:h}=lPe(l,a),{onMoveStart:f,onMoving:p,onMoveEnd:m,onCollapse:v,movingIndex:g}=cPe(l,a,h);return jn(Vj,pr({panels:l,percentSizes:d,pxSizes:h,layout:i,movingIndex:g,containerSize:a,onMoveStart:w=>{f(w),e("resizeStart",w,h.value)},onMoving:(w,M)=>{p(w,M),e("resize",w,h.value)},onMoveEnd:w=>{m(),e("resizeEnd",w,h.value)},onCollapse:(w,M)=>{v(w,M),e("collapse",w,M,h.value)},registerPanel:c,unregisterPanel:o})),(w,M)=>($(),ue("div",{ref_key:"containerEl",ref:s,class:Y([y(r).b(),y(r).e(y(i))])},[Ye(w.$slots,"default"),xe(y(u)),Xe(" Prevent iframe touch events from breaking "),y(g)?($(),ue("div",{key:0,class:Y([y(r).e("mask"),y(r).e(`mask-${y(i)}`)])},null,2)):Xe("v-if",!0)],2))}});var fPe=Et(dPe,[["__file","splitter.vue"]]);function hPe(n){return n&&Mn(n)?n:{start:!!n,end:!!n}}function sF(n,e,t,r){return!!(n!=null&&n.collapsible.end&&e>0||t!=null&&t.collapsible.start&&r===0&&e>0)}const pPe=Ie({name:"ElSplitterBar"}),mPe=Ie({...pPe,props:{index:{type:Number,required:!0},layout:{type:String,values:["horizontal","vertical"],default:"horizontal"},resizable:{type:Boolean,default:!0},startCollapsible:{type:Boolean},endCollapsible:{type:Boolean}},emits:["moveStart","moving","moveEnd","collapse"],setup(n,{emit:e}){const t=n,r=gt("splitter-bar"),i=U(()=>t.layout==="horizontal"),s=U(()=>i.value?{width:0}:{height:0}),a=U(()=>({width:i.value?"16px":"100%",height:i.value?"100%":"16px",cursor:i.value?"col-resize":"row-resize",touchAction:"none"})),o=U(()=>{const g=r.e("dragger");return{[`${g}-horizontal`]:i.value,[`${g}-vertical`]:!i.value,[`${g}-active`]:!!l.value}}),l=ne(null),c=g=>{t.resizable&&(l.value=[g.pageX,g.pageY],e("moveStart",t.index),window.addEventListener("mouseup",f),window.addEventListener("mousemove",d))},u=g=>{if(t.resizable&&g.touches.length===1){g.preventDefault();const _=g.touches[0];l.value=[_.pageX,_.pageY],e("moveStart",t.index),window.addEventListener("touchend",p),window.addEventListener("touchmove",h)}},d=g=>{const{pageX:_,pageY:b}=g,S=_-l.value[0],x=b-l.value[1],w=i.value?S:x;e("moving",t.index,w)},h=g=>{if(g.touches.length===1){g.preventDefault();const _=g.touches[0],b=_.pageX-l.value[0],S=_.pageY-l.value[1],x=i.value?b:S;e("moving",t.index,x)}},f=()=>{l.value=null,window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",d),e("moveEnd",t.index)},p=()=>{l.value=null,window.removeEventListener("touchend",p),window.removeEventListener("touchmove",h),e("moveEnd",t.index)},m=U(()=>i.value?bd:eT),v=U(()=>i.value?Ta:mu);return(g,_)=>($(),ue("div",{class:Y([y(r).b()]),style:Xt(y(s))},[n.startCollapsible?($(),ue("div",{key:0,class:Y([y(r).e("collapse-icon"),y(r).e(`${n.layout}-collapse-icon-start`)]),onClick:b=>e("collapse",n.index,"start")},[Ye(g.$slots,"start-collapsible",{},()=>[($(),rt(Ln(y(m)),{style:{width:"12px",height:"12px"}}))])],10,["onClick"])):Xe("v-if",!0),ye("div",{class:Y([y(r).e("dragger"),y(o),n.resizable?"":y(r).e("disable")]),style:Xt(y(a)),onMousedown:c,onTouchstart:u},null,38),n.endCollapsible?($(),ue("div",{key:1,class:Y([y(r).e("collapse-icon"),y(r).e(`${n.layout}-collapse-icon-end`)]),onClick:b=>e("collapse",n.index,"end")},[Ye(g.$slots,"end-collapsible",{},()=>[($(),rt(Ln(y(v)),{style:{width:"12px",height:"12px"}}))])],10,["onClick"])):Xe("v-if",!0)],6))}});var vPe=Et(mPe,[["__file","split-bar.vue"]]);const gPe=Tt({min:{type:[String,Number]},max:{type:[String,Number]},size:{type:[String,Number]},resizable:{type:Boolean,default:!0},collapsible:Boolean}),$j="ElSplitterPanel",yPe=Ie({name:$j}),bPe=Ie({...yPe,props:gPe,emits:["update:size"],setup(n,{emit:e}){const t=n,r=gt("splitter-panel"),i=Lt(Vj);i||Gi($j,"usage: <el-splitter><el-splitter-panel /></el-splitter/>");const{panels:s,layout:a,containerSize:o,pxSizes:l}=bs(i),{registerPanel:c,unregisterPanel:u,onCollapse:d,onMoveEnd:h,onMoveStart:f,onMoving:p}=i,m=ne(),v=Dn(),g=v.uid,_=ne(0),b=U(()=>s.value[_.value]),S=H=>{_.value=H},x=U(()=>{var H;return b.value&&(H=l.value[_.value])!=null?H:0}),w=U(()=>{var H;return b.value&&(H=l.value[_.value+1])!=null?H:0}),M=U(()=>b.value?s.value[_.value+1]:null),C=U(()=>{var H;return M.value?t.resizable&&((H=M.value)==null?void 0:H.resizable)&&(x.value!==0||!t.min)&&(w.value!==0||!M.value.min):!1}),A=U(()=>b.value?_.value!==s.value.length-1:!1),T=U(()=>sF(b.value,x.value,M.value,w.value)),I=U(()=>sF(M.value,w.value,b.value,x.value));function D(H){return hL(H)?dL(H)*o.value||0:pL(H)?fL(H):H??0}let B=!1;ct(()=>t.size,()=>{if(b.value){const H=D(t.size),L=D(t.max),z=D(t.min),k=Math.min(Math.max(H,z||0),L||H);k!==H&&(B=!0,e("update:size",k)),b.value.size=k,Ut(()=>B=!1)}}),ct(()=>{var H;return(H=b.value)==null?void 0:H.size},H=>{!B&&H!==t.size&&e("update:size",H)}),ct(()=>t.resizable,H=>{b.value&&(b.value.resizable=H)});const O=pr({el:m.value,uid:g,getVnode:()=>v.vnode,setIndex:S,...t,collapsible:hPe(t.collapsible)});return c(O),br(()=>u(O)),(H,L)=>($(),ue(Bt,null,[ye("div",Nn({ref_key:"panelEl",ref:m,class:[y(r).b()],style:{flexBasis:`${y(x)}px`}},H.$attrs),[Ye(H.$slots,"default")],16),y(A)?($(),rt(vPe,{key:0,index:_.value,layout:y(a),resizable:y(C),"start-collapsible":y(T),"end-collapsible":y(I),onMoveStart:y(f),onMoving:y(p),onMoveEnd:y(h),onCollapse:y(d)},{"start-collapsible":Re(()=>[Ye(H.$slots,"start-collapsible")]),"end-collapsible":Re(()=>[Ye(H.$slots,"end-collapsible")]),_:3},8,["index","layout","resizable","start-collapsible","end-collapsible","onMoveStart","onMoving","onMoveEnd","onCollapse"])):Xe("v-if",!0)],64))}});var Gj=Et(bPe,[["__file","split-panel.vue"]]);const _Pe=bn(fPe,{SplitPanel:Gj}),SPe=pi(Gj);var xPe=[Vhe,p0e,rge,EEe,cge,vge,MK,Ege,Ige,ks,PK,bye,Cye,Hye,Vye,W1e,eY,Z1e,Ul,n1e,WK,nbe,bbe,_be,uT,Vbe,Wbe,r_e,i_e,s_e,a_e,o_e,_Se,RSe,PSe,$Se,LY,JSe,Vxe,$xe,Gxe,$Y,$we,Gwe,zt,t2e,qY,wa,KY,v2e,x2e,H2e,V2e,$2e,G2e,j2e,HCe,KCe,nMe,_K,nX,QK,m1e,p1e,fMe,gMe,CMe,mc,Qp,pC,SCe,nTe,dTe,fTe,PTe,NTe,mX,KTe,nAe,rAe,cAe,y3e,b3e,AEe,$Ee,GEe,eg,Y6,F_e,e4e,a4e,o4e,ia,AIe,UIe,TC,sRe,xRe,WRe,n5e,A5e,E5e,F5e,z5e,W5e,sPe,_Pe,SPe];const vl="ElInfiniteScroll",wPe=50,CPe=200,MPe=0,TPe={delay:{type:Number,default:CPe},distance:{type:Number,default:MPe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},mL=(n,e)=>Object.entries(TPe).reduce((t,[r,i])=>{var s,a;const{type:o,default:l}=i,c=n.getAttribute(`infinite-scroll-${r}`);let u=(a=(s=e[c])!=null?s:c)!=null?a:l;return u=u==="false"?!1:u,u=o(u),t[r]=Number.isNaN(u)?l:u,t},{}),Wj=n=>{const{observer:e}=n[vl];e&&(e.disconnect(),delete n[vl].observer)},APe=(n,e)=>{const{container:t,containerEl:r,instance:i,observer:s,lastScrollTop:a}=n[vl],{disabled:o,distance:l}=mL(n,i),{clientHeight:c,scrollHeight:u,scrollTop:d}=r,h=d-a;if(n[vl].lastScrollTop=d,s||o||h<0)return;let f=!1;if(t===n)f=u-(c+d)<=l;else{const{clientTop:p,scrollHeight:m}=n,v=WI(n,r);f=d+c>=v+p+m-l}f&&e.call(i)};function y3(n,e){const{containerEl:t,instance:r}=n[vl],{disabled:i}=mL(n,r);i||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(r):Wj(n))}const EPe={async mounted(n,e){const{instance:t,value:r}=e;Yt(r)||Gi(vl,"'v-infinite-scroll' binding value must be a function"),await Ut();const{delay:i,immediate:s}=mL(n,t),a=$D(n,!0),o=a===window?document.documentElement:a,l=Np(APe.bind(null,n,r),i);if(a){if(n[vl]={instance:t,container:a,containerEl:o,delay:i,cb:r,onScroll:l,lastScrollTop:o.scrollTop},s){const c=new MutationObserver(Np(y3.bind(null,n,r),wPe));n[vl].observer=c,c.observe(n,{childList:!0,subtree:!0}),y3(n,r)}a.addEventListener("scroll",l)}},unmounted(n){if(!n[vl])return;const{container:e,onScroll:t}=n[vl];e==null||e.removeEventListener("scroll",t),Wj(n)},async updated(n){if(!n[vl])await Ut();else{const{containerEl:e,cb:t,observer:r}=n[vl];e.clientHeight&&r&&y3(n,t)}}},LR=EPe;LR.install=n=>{n.directive("InfiniteScroll",LR)};const IPe=LR;function RPe(n,e){let t;const r=ne(!1),i=pr({...n,originalPosition:"",originalOverflow:"",visible:!1});function s(f){i.text=f}function a(){const f=i.parent,p=h.ns;if(!f.vLoadingAddClassList){let m=f.getAttribute("loading-number");m=Number.parseInt(m)-1,m?f.setAttribute("loading-number",m.toString()):(Ma(f,p.bm("parent","relative")),f.removeAttribute("loading-number")),Ma(f,p.bm("parent","hidden"))}o(),d.unmount()}function o(){var f,p;(p=(f=h.$el)==null?void 0:f.parentNode)==null||p.removeChild(h.$el)}function l(){var f;n.beforeClose&&!n.beforeClose()||(r.value=!0,clearTimeout(t),t=setTimeout(c,400),i.visible=!1,(f=n.closed)==null||f.call(n))}function c(){if(!r.value)return;const f=i.parent;r.value=!1,f.vLoadingAddClassList=void 0,a()}const d=LW(Ie({name:"ElLoading",setup(f,{expose:p}){const{ns:m,zIndex:v}=JM("loading");return p({ns:m,zIndex:v}),()=>{const g=i.spinner||i.svg,_=tn("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...g?{innerHTML:g}:{}},[tn("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=i.text?tn("p",{class:m.b("text")},[i.text]):void 0;return tn(Os,{name:m.b("fade"),onAfterLeave:c},{default:Re(()=>[Cn(xe("div",{style:{backgroundColor:i.background||""},class:[m.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[tn("div",{class:m.b("spinner")},[_,b])]),[[cr,i.visible]])])})}}}));Object.assign(d._context,e??{});const h=d.mount(document.createElement("div"));return{...bs(i),setText:s,removeElLoadingChild:o,close:l,handleAfterLeave:c,vm:h,get $el(){return h.$el}}}let YS;const Iv=function(n={}){if(!ar)return;const e=PPe(n);if(e.fullscreen&&YS)return YS;const t=RPe({...e,closed:()=>{var i;(i=e.closed)==null||i.call(e),e.fullscreen&&(YS=void 0)}},Iv._context);DPe(e,e.parent,t),aF(e,e.parent,t),e.parent.vLoadingAddClassList=()=>aF(e,e.parent,t);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(t.$el),Ut(()=>t.visible.value=e.visible),e.fullscreen&&(YS=t),t},PPe=n=>{var e,t,r,i;let s;return Wt(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(r=n.lock)!=null?r:!1,customClass:n.customClass||"",visible:(i=n.visible)!=null?i:!0,beforeClose:n.beforeClose,closed:n.closed,target:s}},DPe=async(n,e,t)=>{const{nextZIndex:r}=t.vm.zIndex||t.vm._.exposed.zIndex,i={};if(n.fullscreen)t.originalPosition.value=Qu(document.body,"position"),t.originalOverflow.value=Qu(document.body,"overflow"),i.zIndex=r();else if(n.parent===document.body){t.originalPosition.value=Qu(document.body,"position"),await Ut();for(const s of["top","left"]){const a=s==="top"?"scrollTop":"scrollLeft";i[s]=`${n.target.getBoundingClientRect()[s]+document.body[a]+document.documentElement[a]-Number.parseInt(Qu(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])i[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=Qu(e,"position");for(const[s,a]of Object.entries(i))t.$el.style[s]=a},aF=(n,e,t)=>{const r=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Ma(e,r.bm("parent","relative")):Ml(e,r.bm("parent","relative")),n.fullscreen&&n.lock?Ml(e,r.bm("parent","hidden")):Ma(e,r.bm("parent","hidden"))};Iv._context=null;const g1=Symbol("ElLoading"),ap=n=>`element-loading-${Id(n)}`,oF=(n,e)=>{var t,r,i,s;const a=e.instance,o=f=>Mn(e.value)?e.value[f]:void 0,l=f=>{const p=Wt(f)&&(a==null?void 0:a[f])||f;return ne(p)},c=f=>l(o(f)||n.getAttribute(ap(f))),u=(t=o("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(r=o("target"))!=null?r:u?void 0:n,body:(i=o("body"))!=null?i:e.modifiers.body,lock:(s=o("lock"))!=null?s:e.modifiers.lock},h=Iv(d);h._context=H1._context,n[g1]={options:d,instance:h}},LPe=(n,e)=>{for(const t of Object.keys(n))qr(n[t])&&(n[t].value=e[t])},H1={mounted(n,e){e.value&&oF(n,e)},updated(n,e){const t=n[g1];if(!e.value){t==null||t.instance.close(),n[g1]=null;return}t?LPe(t.options,Mn(e.value)?e.value:{text:n.getAttribute(ap("text")),svg:n.getAttribute(ap("svg")),svgViewBox:n.getAttribute(ap("svgViewBox")),spinner:n.getAttribute(ap("spinner")),background:n.getAttribute(ap("background")),customClass:n.getAttribute(ap("customClass"))}):oF(n,e)},unmounted(n){var e;(e=n[g1])==null||e.instance.close(),n[g1]=null}};H1._context=null;const kPe={install(n){Iv._context=n._context,H1._context=n._context,n.directive("loading",H1),n.config.globalProperties.$loading=Iv},directive:H1,service:Iv},qj=["primary","success","info","warning","error"],La=hi({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:ar?document.body:void 0}),OPe=Tt({customClass:{type:String,default:La.customClass},dangerouslyUseHTMLString:{type:Boolean,default:La.dangerouslyUseHTMLString},duration:{type:Number,default:La.duration},icon:{type:Ar,default:La.icon},id:{type:String,default:La.id},message:{type:Fe([String,Object,Function]),default:La.message},onClose:{type:Fe(Function),default:La.onClose},showClose:{type:Boolean,default:La.showClose},type:{type:String,values:qj,default:La.type},plain:{type:Boolean,default:La.plain},offset:{type:Number,default:La.offset},zIndex:{type:Number,default:La.zIndex},grouping:{type:Boolean,default:La.grouping},repeatNum:{type:Number,default:La.repeatNum}}),NPe={destroy:()=>!0},ac=PG([]),BPe=n=>{const e=ac.findIndex(i=>i.id===n),t=ac[e];let r;return e>0&&(r=ac[e-1]),{current:t,prev:r}},FPe=n=>{const{prev:e}=BPe(n);return e?e.vm.exposed.bottom.value:0},zPe=(n,e)=>ac.findIndex(r=>r.id===n)>0?16:e,UPe=Ie({name:"ElMessage"}),HPe=Ie({...UPe,props:OPe,emits:NPe,setup(n,{expose:e,emit:t}){const r=n,{Close:i}=YD,s=ne(!1),{ns:a,zIndex:o}=JM("message"),{currentZIndex:l,nextZIndex:c}=o,u=ne(),d=ne(!1),h=ne(0);let f;const p=U(()=>r.type?r.type==="error"?"danger":r.type:"info"),m=U(()=>{const A=r.type;return{[a.bm("icon",A)]:A&&ih[A]}}),v=U(()=>r.icon||ih[r.type]||""),g=U(()=>FPe(r.id)),_=U(()=>zPe(r.id,r.offset)+g.value),b=U(()=>h.value+_.value),S=U(()=>({top:`${_.value}px`,zIndex:l.value}));function x(){r.duration!==0&&({stop:f}=jp(()=>{M()},r.duration))}function w(){f==null||f()}function M(){d.value=!1,Ut(()=>{var A;s.value||((A=r.onClose)==null||A.call(r),t("destroy"))})}function C({code:A}){A===Rt.esc&&M()}return Rn(()=>{x(),c(),d.value=!0}),ct(()=>r.repeatNum,()=>{w(),x()}),Lr(document,"keydown",C),fi(u,()=>{h.value=u.value.getBoundingClientRect().height}),e({visible:d,bottom:b,close:M}),(A,T)=>($(),rt(Os,{name:y(a).b("fade"),onBeforeEnter:I=>s.value=!0,onBeforeLeave:A.onClose,onAfterLeave:I=>A.$emit("destroy"),persisted:""},{default:Re(()=>[Cn(ye("div",{id:A.id,ref_key:"messageRef",ref:u,class:Y([y(a).b(),{[y(a).m(A.type)]:A.type},y(a).is("closable",A.showClose),y(a).is("plain",A.plain),A.customClass]),style:Xt(y(S)),role:"alert",onMouseenter:w,onMouseleave:x},[A.repeatNum>1?($(),rt(y(MK),{key:0,value:A.repeatNum,type:y(p),class:Y(y(a).e("badge"))},null,8,["value","type","class"])):Xe("v-if",!0),y(v)?($(),rt(y(zt),{key:1,class:Y([y(a).e("icon"),y(m)])},{default:Re(()=>[($(),rt(Ln(y(v))))]),_:1},8,["class"])):Xe("v-if",!0),Ye(A.$slots,"default",{},()=>[A.dangerouslyUseHTMLString?($(),ue(Bt,{key:1},[Xe(" Caution here, message could've been compromised, never use user's input as message "),ye("p",{class:Y(y(a).e("content")),innerHTML:A.message},null,10,["innerHTML"])],2112)):($(),ue("p",{key:0,class:Y(y(a).e("content"))},Ct(A.message),3))]),A.showClose?($(),rt(y(zt),{key:2,class:Y(y(a).e("closeBtn")),onClick:an(M,["stop"])},{default:Re(()=>[xe(y(i))]),_:1},8,["class","onClick"])):Xe("v-if",!0)],46,["id"]),[[cr,d.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var VPe=Et(HPe,[["__file","message.vue"]]);let $Pe=1;const Kj=n=>{const e=!n||Wt(n)||Kr(n)||Yt(n)?{message:n}:n,t={...La,...e};if(!t.appendTo)t.appendTo=document.body;else if(Wt(t.appendTo)){let r=document.querySelector(t.appendTo);Ga(r)||(r=document.body),t.appendTo=r}return Cr(Fo.grouping)&&!t.grouping&&(t.grouping=Fo.grouping),en(Fo.duration)&&t.duration===3e3&&(t.duration=Fo.duration),en(Fo.offset)&&t.offset===16&&(t.offset=Fo.offset),Cr(Fo.showClose)&&!t.showClose&&(t.showClose=Fo.showClose),Cr(Fo.plain)&&!t.plain&&(t.plain=Fo.plain),t},GPe=n=>{const e=ac.indexOf(n);if(e===-1)return;ac.splice(e,1);const{handler:t}=n;t.close()},WPe=({appendTo:n,...e},t)=>{const r=`message_${$Pe++}`,i=e.onClose,s=document.createElement("div"),a={...e,id:r,onClose:()=>{i==null||i(),GPe(u)},onDestroy:()=>{Jf(null,s)}},o=xe(VPe,a,Yt(a.message)||Kr(a.message)?{default:Yt(a.message)?a.message:()=>a.message}:null);o.appContext=t||og._context,Jf(o,s),n.appendChild(s.firstElementChild);const l=o.component,u={id:r,vnode:o,vm:l,handler:{close:()=>{l.exposed.close()}},props:o.component.props};return u},og=(n={},e)=>{if(!ar)return{close:()=>{}};const t=Kj(n);if(t.grouping&&ac.length){const i=ac.find(({vnode:s})=>{var a;return((a=s.props)==null?void 0:a.message)===t.message});if(i)return i.props.repeatNum+=1,i.props.type=t.type,i.handler}if(en(Fo.max)&&ac.length>=Fo.max)return{close:()=>{}};const r=WPe(t,e);return ac.push(r),r.handler};qj.forEach(n=>{og[n]=(e={},t)=>{const r=Kj(e);return og({...r,type:n},t)}});function qPe(n){const e=[...ac];for(const t of e)(!n||n===t.props.type)&&t.handler.close()}og.closeAll=qPe;og._context=null;const KPe=Uq(og,"$message"),kR="_trap-focus-children",Mp=[],lF=n=>{if(Mp.length===0)return;const e=Mp[Mp.length-1][kR];if(e.length>0&&n.code===Rt.tab){if(e.length===1){n.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=n.shiftKey,r=n.target===e[0],i=n.target===e[e.length-1];r&&t&&(n.preventDefault(),e[e.length-1].focus()),i&&!t&&(n.preventDefault(),e[0].focus())}},YPe={beforeMount(n){n[kR]=_B(n),Mp.push(n),Mp.length<=1&&document.addEventListener("keydown",lF)},updated(n){Ut(()=>{n[kR]=_B(n)})},unmounted(){Mp.shift(),Mp.length===0&&document.removeEventListener("keydown",lF)}},XPe=Ie({name:"ElMessageBox",directives:{TrapFocus:YPe},components:{ElButton:ks,ElFocusTrap:Hg,ElInput:wa,ElOverlay:x6,ElIcon:zt,...YD},inheritAttrs:!1,props:{buttonSize:{type:String,validator:yX},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(n,{emit:e}){const{locale:t,zIndex:r,ns:i,size:s}=JM("message-box",U(()=>n.buttonSize)),{t:a}=t,{nextZIndex:o}=r,l=ne(!1),c=pr({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:od(iu),cancelButtonLoadingIcon:od(iu),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),u=U(()=>{const L=c.type;return{[i.bm("icon",L)]:L&&ih[L]}}),d=Ws(),h=Ws(),f=U(()=>{const L=c.type;return c.icon||L&&ih[L]||""}),p=U(()=>!!c.message),m=ne(),v=ne(),g=ne(),_=ne(),b=ne(),S=U(()=>c.confirmButtonClass);ct(()=>c.inputValue,async L=>{await Ut(),n.boxType==="prompt"&&L&&D()},{immediate:!0}),ct(()=>l.value,L=>{var z,k;L&&(n.boxType!=="prompt"&&(c.autofocus?g.value=(k=(z=b.value)==null?void 0:z.$el)!=null?k:m.value:g.value=m.value),c.zIndex=o()),n.boxType==="prompt"&&(L?Ut().then(()=>{var F;_.value&&_.value.$el&&(c.autofocus?g.value=(F=B())!=null?F:m.value:g.value=m.value)}):(c.editorErrorMessage="",c.validateError=!1))});const x=U(()=>n.draggable),w=U(()=>n.overflow);IY(m,v,x,w),Rn(async()=>{await Ut(),n.closeOnHashChange&&window.addEventListener("hashchange",M)}),br(()=>{n.closeOnHashChange&&window.removeEventListener("hashchange",M)});function M(){l.value&&(l.value=!1,Ut(()=>{c.action&&e("action",c.action)}))}const C=()=>{n.closeOnClickModal&&I(c.distinguishCancelAndClose?"close":"cancel")},A=S6(C),T=L=>{if(c.inputType!=="textarea")return L.preventDefault(),I("confirm")},I=L=>{var z;n.boxType==="prompt"&&L==="confirm"&&!D()||(c.action=L,c.beforeClose?(z=c.beforeClose)==null||z.call(c,L,c,M):M())},D=()=>{if(n.boxType==="prompt"){const L=c.inputPattern;if(L&&!L.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||a("el.messagebox.error"),c.validateError=!0,!1;const z=c.inputValidator;if(Yt(z)){const k=z(c.inputValue);if(k===!1)return c.editorErrorMessage=c.inputErrorMessage||a("el.messagebox.error"),c.validateError=!0,!1;if(Wt(k))return c.editorErrorMessage=k,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},B=()=>{var L,z;const k=(L=_.value)==null?void 0:L.$refs;return(z=k==null?void 0:k.input)!=null?z:k==null?void 0:k.textarea},O=()=>{I("close")},H=()=>{n.closeOnPressEscape&&O()};return n.lockScroll&&w6(l),{...bs(c),ns:i,overlayEvent:A,visible:l,hasMessage:p,typeClass:u,contentId:d,inputId:h,btnSize:s,iconComponent:f,confirmButtonClasses:S,rootRef:m,focusStartRef:g,headerRef:v,inputRef:_,confirmRef:b,doClose:M,handleClose:O,onCloseRequested:H,handleWrapperClick:C,handleInputEnter:T,handleAction:I,t:a}}});function jPe(n,e,t,r,i,s){const a=dn("el-icon"),o=dn("el-input"),l=dn("el-button"),c=dn("el-focus-trap"),u=dn("el-overlay");return $(),rt(Os,{name:"fade-in-linear",onAfterLeave:d=>n.$emit("vanish"),persisted:""},{default:Re(()=>[Cn(xe(u,{"z-index":n.zIndex,"overlay-class":[n.ns.is("message-box"),n.modalClass],mask:n.modal},{default:Re(()=>[ye("div",{role:"dialog","aria-label":n.title,"aria-modal":"true","aria-describedby":n.showInput?void 0:n.contentId,class:Y(`${n.ns.namespace.value}-overlay-message-box`),onClick:n.overlayEvent.onClick,onMousedown:n.overlayEvent.onMousedown,onMouseup:n.overlayEvent.onMouseup},[xe(c,{loop:"",trapped:n.visible,"focus-trap-el":n.rootRef,"focus-start-el":n.focusStartRef,onReleaseRequested:n.onCloseRequested},{default:Re(()=>[ye("div",{ref:"rootRef",class:Y([n.ns.b(),n.customClass,n.ns.is("draggable",n.draggable),{[n.ns.m("center")]:n.center}]),style:Xt(n.customStyle),tabindex:"-1",onClick:an(()=>{},["stop"])},[n.title!==null&&n.title!==void 0?($(),ue("div",{key:0,ref:"headerRef",class:Y([n.ns.e("header"),{"show-close":n.showClose}])},[ye("div",{class:Y(n.ns.e("title"))},[n.iconComponent&&n.center?($(),rt(a,{key:0,class:Y([n.ns.e("status"),n.typeClass])},{default:Re(()=>[($(),rt(Ln(n.iconComponent)))]),_:1},8,["class"])):Xe("v-if",!0),ye("span",null,Ct(n.title),1)],2),n.showClose?($(),ue("button",{key:0,type:"button",class:Y(n.ns.e("headerbtn")),"aria-label":n.t("el.messagebox.close"),onClick:d=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),onKeydown:Dr(an(d=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[xe(a,{class:Y(n.ns.e("close"))},{default:Re(()=>[($(),rt(Ln(n.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):Xe("v-if",!0)],2)):Xe("v-if",!0),ye("div",{id:n.contentId,class:Y(n.ns.e("content"))},[ye("div",{class:Y(n.ns.e("container"))},[n.iconComponent&&!n.center&&n.hasMessage?($(),rt(a,{key:0,class:Y([n.ns.e("status"),n.typeClass])},{default:Re(()=>[($(),rt(Ln(n.iconComponent)))]),_:1},8,["class"])):Xe("v-if",!0),n.hasMessage?($(),ue("div",{key:1,class:Y(n.ns.e("message"))},[Ye(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?($(),rt(Ln(n.showInput?"label":"p"),{key:1,for:n.showInput?n.inputId:void 0,innerHTML:n.message},null,8,["for","innerHTML"])):($(),rt(Ln(n.showInput?"label":"p"),{key:0,for:n.showInput?n.inputId:void 0,textContent:Ct(n.message)},null,8,["for","textContent"]))])],2)):Xe("v-if",!0)],2),Cn(ye("div",{class:Y(n.ns.e("input"))},[xe(o,{id:n.inputId,ref:"inputRef",modelValue:n.inputValue,"onUpdate:modelValue":d=>n.inputValue=d,type:n.inputType,placeholder:n.inputPlaceholder,"aria-invalid":n.validateError,class:Y({invalid:n.validateError}),onKeydown:Dr(n.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),ye("div",{class:Y(n.ns.e("errormsg")),style:Xt({visibility:n.editorErrorMessage?"visible":"hidden"})},Ct(n.editorErrorMessage),7)],2),[[cr,n.showInput]])],10,["id"]),ye("div",{class:Y(n.ns.e("btns"))},[n.showCancelButton?($(),rt(l,{key:0,loading:n.cancelButtonLoading,"loading-icon":n.cancelButtonLoadingIcon,class:Y([n.cancelButtonClass]),round:n.roundButton,size:n.btnSize,onClick:d=>n.handleAction("cancel"),onKeydown:Dr(an(d=>n.handleAction("cancel"),["prevent"]),["enter"])},{default:Re(()=>[Bn(Ct(n.cancelButtonText||n.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):Xe("v-if",!0),Cn(xe(l,{ref:"confirmRef",type:"primary",loading:n.confirmButtonLoading,"loading-icon":n.confirmButtonLoadingIcon,class:Y([n.confirmButtonClasses]),round:n.roundButton,disabled:n.confirmButtonDisabled,size:n.btnSize,onClick:d=>n.handleAction("confirm"),onKeydown:Dr(an(d=>n.handleAction("confirm"),["prevent"]),["enter"])},{default:Re(()=>[Bn(Ct(n.confirmButtonText||n.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[cr,n.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[cr,n.visible]])]),_:3},8,["onAfterLeave"])}var ZPe=Et(XPe,[["render",jPe],["__file","index.vue"]]);const Kb=new Map,QPe=n=>{let e=document.body;return n.appendTo&&(Wt(n.appendTo)&&(e=document.querySelector(n.appendTo)),Ga(n.appendTo)&&(e=n.appendTo),Ga(e)||(e=document.body)),e},JPe=(n,e,t=null)=>{const r=xe(ZPe,n,Yt(n.message)||Kr(n.message)?{default:Yt(n.message)?n.message:()=>n.message}:null);return r.appContext=t,Jf(r,e),QPe(n).appendChild(e.firstElementChild),r.component},eDe=()=>document.createElement("div"),tDe=(n,e)=>{const t=eDe();n.onVanish=()=>{Jf(null,t),Kb.delete(i)},n.onAction=s=>{const a=Kb.get(i);let o;n.showInput?o={value:i.inputValue,action:s}:o=s,n.callback?n.callback(o,r.proxy):s==="cancel"||s==="close"?n.distinguishCancelAndClose&&s!=="cancel"?a.reject("close"):a.reject("cancel"):a.resolve(o)};const r=JPe(n,t,e),i=r.proxy;for(const s in n)fr(n,s)&&!fr(i.$props,s)&&(s==="closeIcon"&&Mn(n[s])?i[s]=od(n[s]):i[s]=n[s]);return i.visible=!0,i};function qg(n,e=null){if(!ar)return Promise.reject();let t;return Wt(n)||Kr(n)?n={message:n}:t=n.callback,new Promise((r,i)=>{const s=tDe(n,e??qg._context);Kb.set(s,{options:n,callback:t,resolve:r,reject:i})})}const nDe=["alert","confirm","prompt"],rDe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};nDe.forEach(n=>{qg[n]=iDe(n)});function iDe(n){return(e,t,r,i)=>{let s="";return Mn(t)?(r=t,s=""):nr(t)?s="":s=t,qg(Object.assign({title:s,message:e,type:"",...rDe[n]},r,{boxType:n}),i)}}qg.close=()=>{Kb.forEach((n,e)=>{e.doClose()}),Kb.clear()};qg._context=null;const _f=qg;_f.install=n=>{_f._context=n._context,n.config.globalProperties.$msgbox=_f,n.config.globalProperties.$messageBox=_f,n.config.globalProperties.$alert=_f.alert,n.config.globalProperties.$confirm=_f.confirm,n.config.globalProperties.$prompt=_f.prompt};const sDe=_f,Yj=["primary","success","info","warning","error"],aDe=Tt({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Ar},id:{type:String,default:""},message:{type:Fe([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:Fe(Function),default:()=>{}},onClose:{type:Fe(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Yj,""],default:""},zIndex:Number,closeIcon:{type:Ar,default:Bl}}),oDe={destroy:()=>!0},lDe=Ie({name:"ElNotification"}),cDe=Ie({...lDe,props:aDe,emits:oDe,setup(n,{expose:e}){const t=n,{ns:r,zIndex:i}=JM("notification"),{nextZIndex:s,currentZIndex:a}=i,o=ne(!1);let l;const c=U(()=>{const _=t.type;return _&&ih[t.type]?r.m(_):""}),u=U(()=>t.type&&ih[t.type]||t.icon),d=U(()=>t.position.endsWith("right")?"right":"left"),h=U(()=>t.position.startsWith("top")?"top":"bottom"),f=U(()=>{var _;return{[h.value]:`${t.offset}px`,zIndex:(_=t.zIndex)!=null?_:a.value}});function p(){t.duration>0&&({stop:l}=jp(()=>{o.value&&v()},t.duration))}function m(){l==null||l()}function v(){o.value=!1}function g({code:_}){_===Rt.delete||_===Rt.backspace?m():_===Rt.esc?o.value&&v():p()}return Rn(()=>{p(),s(),o.value=!0}),Lr(document,"keydown",g),e({visible:o,close:v}),(_,b)=>($(),rt(Os,{name:y(r).b("fade"),onBeforeLeave:_.onClose,onAfterLeave:S=>_.$emit("destroy"),persisted:""},{default:Re(()=>[Cn(ye("div",{id:_.id,class:Y([y(r).b(),_.customClass,y(d)]),style:Xt(y(f)),role:"alert",onMouseenter:m,onMouseleave:p,onClick:_.onClick},[y(u)?($(),rt(y(zt),{key:0,class:Y([y(r).e("icon"),y(c)])},{default:Re(()=>[($(),rt(Ln(y(u))))]),_:1},8,["class"])):Xe("v-if",!0),ye("div",{class:Y(y(r).e("group"))},[ye("h2",{class:Y(y(r).e("title")),textContent:Ct(_.title)},null,10,["textContent"]),Cn(ye("div",{class:Y(y(r).e("content")),style:Xt(_.title?void 0:{margin:0})},[Ye(_.$slots,"default",{},()=>[_.dangerouslyUseHTMLString?($(),ue(Bt,{key:1},[Xe(" Caution here, message could've been compromised, never use user's input as message "),ye("p",{innerHTML:_.message},null,8,["innerHTML"])],2112)):($(),ue("p",{key:0},Ct(_.message),1))])],6),[[cr,_.message]]),_.showClose?($(),rt(y(zt),{key:0,class:Y(y(r).e("closeBtn")),onClick:an(v,["stop"])},{default:Re(()=>[($(),rt(Ln(_.closeIcon)))]),_:1},8,["class","onClick"])):Xe("v-if",!0)],2)],46,["id","onClick"]),[[cr,o.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var uDe=Et(cDe,[["__file","notification.vue"]]);const lg={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},AC=16;let dDe=1;const n0=function(n={},e){if(!ar)return{close:()=>{}};(Wt(n)||Kr(n))&&(n={message:n});const t=n.position||"top-right";let r=n.offset||0;lg[t].forEach(({vm:u})=>{var d;r+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+AC}),r+=AC;const i=`notification_${dDe++}`,s=n.onClose,a={...n,offset:r,id:i,onClose:()=>{fDe(i,t,s)}};let o=document.body;Ga(n.appendTo)?o=n.appendTo:Wt(n.appendTo)&&(o=document.querySelector(n.appendTo)),Ga(o)||(o=document.body);const l=document.createElement("div"),c=xe(uDe,a,Yt(a.message)?a.message:Kr(a.message)?()=>a.message:null);return c.appContext=nr(e)?n0._context:e,c.props.onDestroy=()=>{Jf(null,l)},Jf(c,l),lg[t].push({vm:c}),o.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};Yj.forEach(n=>{n0[n]=(e={},t)=>((Wt(e)||Kr(e))&&(e={message:e}),n0({...e,type:n},t))});function fDe(n,e,t){const r=lg[e],i=r.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===n});if(i===-1)return;const{vm:s}=r[i];if(!s)return;t==null||t(s);const a=s.el.offsetHeight,o=e.split("-")[0];r.splice(i,1);const l=r.length;if(!(l<1))for(let c=i;c<l;c++){const{el:u,component:d}=r[c].vm,h=Number.parseInt(u.style[o],10)-a-AC;d.props.offset=h}}function hDe(){for(const n of Object.values(lg))n.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}function pDe(n="top-right"){var e,t,r;let i=((t=(e=lg[n][0])==null?void 0:e.vm.props)==null?void 0:t.offset)||0;for(const{vm:s}of lg[n])s.component.props.offset=i,i+=(((r=s.el)==null?void 0:r.offsetHeight)||0)+AC}n0.closeAll=hDe;n0.updateOffsets=pDe;n0._context=null;const mDe=Uq(n0,"$notify");var vDe=[IPe,kPe,KPe,sDe,mDe,tX],gDe=Phe([...xPe,...vDe]);const yDe=["href"],bDe=["href"],_De=Ie({__name:"Header",setup(n){const e={name:"Homepage",link:"https://github.com/mr-chiwang"},t={name:"SGAD",link:"#"};return(r,i)=>{const s=dn("el-menu-item"),a=dn("el-menu"),o=dn("el-affix");return $(),rt(o,{offset:0,style:{width:"100%"}},{default:Re(()=>[xe(a,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:Re(()=>[xe(s,{index:"0"},{default:Re(()=>[xe(y(zt),{size:20},{default:Re(()=>[xe(y(wpe))]),_:1}),ye("a",{href:e.link},Ct(e.name),9,yDe)]),_:1}),xe(s,{index:"1"},{default:Re(()=>[xe(y(zt),{size:20},{default:Re(()=>[xe(y(KD))]),_:1}),ye("a",{href:t.link},Ct(t.name),9,bDe)]),_:1})]),_:1})]),_:1})}}}),Jo=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},SDe=Jo(_De,[["__scopeId","data-v-20d2d89e"]]),xDe={},wDe={role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function CDe(n,e){return $(),ue("svg",wDe,e[0]||(e[0]=[ye("title",null,"GitHub",-1),ye("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"},null,-1)]))}const MDe=Jo(xDe,[["render",CDe]]),TDe={},ADe={id:"logomark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17.732 24.269"};function EDe(n,e){return $(),ue("svg",ADe,e[0]||(e[0]=[ye("g",{id:"tiny"},[ye("path",{d:"M573.549,280.916l2.266,2.738,6.674-7.84c.353-.47.52-.717.353-1.117a1.218,1.218,0,0,0-1.061-.748h0a.953.953,0,0,0-.712.262Z",transform:"translate(-566.984 -271.548)",fill:"#bdb9b4"}),ye("path",{d:"M579.525,282.225l-10.606-10.174a1.413,1.413,0,0,0-.834-.5,1.09,1.09,0,0,0-1.027.66c-.167.4-.047.681.319,1.206l8.44,10.242h0l-6.282,7.716a1.336,1.336,0,0,0-.323,1.3,1.114,1.114,0,0,0,1.04.69A.992.992,0,0,0,571,293l8.519-7.92A1.924,1.924,0,0,0,579.525,282.225Z",transform:"translate(-566.984 -271.548)",fill:"#b31b1b"}),ye("path",{d:"M584.32,293.912l-8.525-10.275,0,0L573.53,280.9l-1.389,1.254a2.063,2.063,0,0,0,0,2.965l10.812,10.419a.925.925,0,0,0,.742.282,1.039,1.039,0,0,0,.953-.667A1.261,1.261,0,0,0,584.32,293.912Z",transform:"translate(-566.984 -271.548)",fill:"#bdb9b4"})],-1)]))}const IDe=Jo(TDe,[["render",EDe]]),RDe={},PDe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",role:"img",fill:"currentColor"};function DDe(n,e){return $(),ue("svg",PDe,e[0]||(e[0]=[ye("path",{d:"M531.3 574.4l0.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-0.7-29.9 8.3-33.4 21.4-6.6 24-0.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5 0.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7z m87.6-235.5c5.2 8.9 4.5 35.8 0.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4 0.8 0.1 1.5 0.7 2.2 2z m-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4z m155.6 65.5c0.1 0.2 0.2 0.5-0.4 0.9h-0.2l-0.2 0.3c-0.8 0.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4z"},null,-1),ye("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"},null,-1)]))}const LDe=Jo(RDe,[["render",DDe]]),kDe={class:"paper-title"},ODe=["href"],NDe={class:"author"},BDe={key:0,class:"name_sup"},FDe={class:"author"},zDe={key:0,class:"name_sup"},UDe={class:"address"},HDe={key:0,class:"address_sup"},VDe=["href"],$De={key:0,class:"email-separator"},GDe=["href"],WDe={class:"btn-text"},cF="SGAD: Semantic and Geometric-aware Descriptor for Local Feature Matching",qDe="#000000",uF="",KDe="#42B883",YDe="#444444",XDe="*Equal Contribution.   †Corresponding Author.",jDe=Ie({__name:"Title",setup(n){const e=[{name:"Xiangzeng Liu",icon:"",homepage:"",address_flag:"1*"},{name:"Chi Wang",icon:"",homepage:"https://github.com/mr-chiwang",address_flag:"1*†"},{name:"Guanglu Shi",icon:"",homepage:"",address_flag:"1"},{name:"Xiaodong Zhang",icon:"",homepage:"",address_flag:"1"},{name:"Qiguang Miao",icon:"",homepage:"",address_flag:"1†"},{name:"Miao Fan",icon:"",homepage:"",address_flag:"2"}],t=[{address_flag:"1",name:"Xidian University"},{address_flag:"2",name:"Navinfo Europe B.V"}],r=["chiwang@stu.xidian.edu.cn","xzliu@xidian.edu.cn"],i=["ICCV 2025 Highlight"],s=[{disabled:!1,name:"Paper",link:"https://arxiv.org/pdf/2508.02278",component:LDe},{disabled:!1,name:"arXiv",link:"http://arxiv.org/abs/2508.02278",component:IDe},{disabled:!1,name:"Code",link:"https://github.com/mr-chiwang/SGAD",component:MDe},{disabled:!0,name:"Poster",component:Npe}];return(a,o)=>{dn("el-image");const l=dn("el-row"),c=dn("el-col"),u=dn("el-avatar"),d=dn("el-button");return $(),ue("div",null,[Xe("",!0),xe(l,{justify:"center"},{default:Re(()=>[xe(c,{span:20},{default:Re(()=>[ye("h1",kDe,[cF?($(),ue("span",{key:0,style:Xt({color:qDe})},Ct(cF),4)):Xe("",!0),uF?($(),ue("span",{key:1,style:Xt({color:KDe})},Ct(uF),4)):Xe("",!0)])]),_:1})]),_:1}),($(),ue(Bt,null,Fn(i,h=>xe(l,{justify:"center",class:"emphasis"},{default:Re(()=>[Bn(Ct(h),1)]),_:2},1024)),64)),xe(l,{justify:"center"},{default:Re(()=>[($(),ue(Bt,null,Fn(e,h=>($(),ue(Bt,{key:h.name},[h.homepage?($(),ue("a",{key:0,href:h.homepage},[xe(d,{class:"title-button",type:"primary",text:""},{default:Re(()=>[h.icon?($(),rt(u,{key:0,size:40,src:h.icon},null,8,["src"])):Xe("",!0),ye("span",NDe,[Bn(Ct(h.name),1),h.address_flag?($(),ue("sup",BDe,Ct(h.address_flag),1)):Xe("",!0)])]),_:2},1024)],8,ODe)):($(),rt(d,{key:1,class:"title-button",text:""},{default:Re(()=>[h.icon?($(),rt(u,{key:0,size:40,src:h.icon},null,8,["src"])):Xe("",!0),ye("span",FDe,[Bn(Ct(h.name),1),h.address_flag?($(),ue("sup",zDe,Ct(h.address_flag),1)):Xe("",!0)])]),_:2},1024))],64))),64))]),_:1}),xe(l,{justify:"center"},{default:Re(()=>[($(),ue(Bt,null,Fn(t,h=>xe(d,{class:"title-button",text:"",key:h.address_flag},{default:Re(()=>[h.icon?($(),rt(u,{key:0,size:40,src:h.icon},null,8,["src"])):Xe("",!0),ye("span",UDe,[h.address_flag?($(),ue("sup",HDe,Ct(h.address_flag),1)):Xe("",!0),Bn(Ct(h.name),1)])]),_:2},1024)),64))]),_:1}),xe(l,{justify:"center",class:"con-cor"},{default:Re(()=>[Bn(Ct(XDe))]),_:1}),xe(l,{justify:"center",class:"email-row"},{default:Re(()=>[xe(y(zt),{size:16,color:"#606266",style:{"margin-right":"8px"}},{default:Re(()=>[xe(y(Ape))]),_:1}),($(),ue(Bt,null,Fn(r,(h,f)=>($(),ue(Bt,{key:h},[ye("a",{href:"mailto:"+h,class:"email-link"},Ct(h),9,VDe),f<r.length-1?($(),ue("span",$De,",")):Xe("",!0)],64))),64))]),_:1}),xe(l,{justify:"center",style:{"margin-bottom":"20px"}},{default:Re(()=>[xe(c,{span:20},{default:Re(()=>[xe(l,{justify:"center"},{default:Re(()=>[($(),ue(Bt,null,Fn(s,h=>ye("a",{href:h.link},[xe(d,{class:"guidance-button",size:"default",color:YDe,disabled:h.disabled,round:""},{default:Re(()=>[xe(y(zt),{size:18},{default:Re(()=>[($(),rt(Ln(h.component)))]),_:2},1024),ye("span",WDe,Ct(h.name),1)]),_:2},1032,["disabled"])],8,GDe)),64))]),_:1})]),_:1})]),_:1})])}}}),ZDe=Jo(jDe,[["__scopeId","data-v-dee00ca7"]]);function un(n,e,t){const{children:r}=e;return delete e.children,arguments.length>2&&(e.key=t),tn(n,e,r)}function dF(n){const e={annotation:"annotation",h1:"h1",math:"math",mi:"mi",mo:"mo",mrow:"mrow",msup:"msup",mtext:"mtext",p:"p",semantics:"semantics",span:"span",...n.components};return un(Bt,{children:[un(e.h1,{children:"Abstract"}),`
`,un(e.p,{children:[`Local feature matching remains a fundamental challenge in computer vision.
Recent Area to Point Matching (A2PM) methods have improved matching accuracy.
However, existing research based on this framework relies on inefficient pixel-level comparisons and complex graph matching that limit scalability.
In this work, we introduce the Semantic and Geometric-aware Descriptor Network (SGAD), which fundamentally rethinks area-based matching by generating highly
discriminative area descriptors that enable direct matching without complex graph optimization.
This approach significantly improves both accuracy and efficiency of area matching.
We further improve the performance of area matching through a novel supervision strategy
that decomposes the area matching task into classification and ranking subtasks.
Finally, we introduce the Hierarchical Containment Redundancy Filter (HCRF) to eliminate overlapping areas by analyzing containment graphs.
SGAD demonstrates remarkable performance gains, reducing runtime by 60`,un(e.span,{className:"katex",children:[un(e.span,{className:"katex-mathml",children:un(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:un(e.semantics,{children:[un(e.mrow,{children:un(e.mo,{children:"×"})}),un(e.annotation,{encoding:"application/x-tex",children:"\\times"})]})})}),un(e.span,{className:"katex-html","aria-hidden":"true",children:un(e.span,{className:"base",children:[un(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),un(e.span,{className:"mord",children:"×"})]})})]})," (0.82s",un(e.span,{className:"katex",children:[un(e.span,{className:"katex-mathml",children:un(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:un(e.semantics,{children:[un(e.mrow,{children:[un(e.mtext,{children:" "}),un(e.mi,{children:"v"}),un(e.mi,{children:"s"}),un(e.mi,{mathvariant:"normal",children:"."}),un(e.mtext,{children:" "})]}),un(e.annotation,{encoding:"application/x-tex",children:"~vs.~"})]})})}),un(e.span,{className:"katex-html","aria-hidden":"true",children:un(e.span,{className:"base",children:[un(e.span,{className:"strut",style:{height:"0.4306em"}}),un(e.span,{className:"mspace nobreak",children:" "}),un(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),un(e.span,{className:"mord mathnormal",children:"s"}),un(e.span,{className:"mord",children:"."}),un(e.span,{className:"mspace nobreak",children:" "})]})})]}),`60.23s) compared to MESA.
Extensive evaluations show consistent improvements across multiple point matchers:
SGAD+LoFTR reduces runtime compared to DKM, while achieving higher accuracy (0.82s`,un(e.span,{className:"katex",children:[un(e.span,{className:"katex-mathml",children:un(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:un(e.semantics,{children:[un(e.mrow,{children:[un(e.mtext,{children:" "}),un(e.mi,{children:"v"}),un(e.mi,{children:"s"}),un(e.mi,{mathvariant:"normal",children:"."}),un(e.mtext,{children:" "})]}),un(e.annotation,{encoding:"application/x-tex",children:"~vs.~"})]})})}),un(e.span,{className:"katex-html","aria-hidden":"true",children:un(e.span,{className:"base",children:[un(e.span,{className:"strut",style:{height:"0.4306em"}}),un(e.span,{className:"mspace nobreak",children:" "}),un(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),un(e.span,{className:"mord mathnormal",children:"s"}),un(e.span,{className:"mord",children:"."}),un(e.span,{className:"mspace nobreak",children:" "})]})})]}),"1.51s, 65.98",un(e.span,{className:"katex",children:[un(e.span,{className:"katex-mathml",children:un(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:un(e.semantics,{children:[un(e.mrow,{children:[un(e.mtext,{children:" "}),un(e.mi,{children:"v"}),un(e.mi,{children:"s"}),un(e.mi,{mathvariant:"normal",children:"."}),un(e.mtext,{children:" "})]}),un(e.annotation,{encoding:"application/x-tex",children:"~vs.~"})]})})}),un(e.span,{className:"katex-html","aria-hidden":"true",children:un(e.span,{className:"base",children:[un(e.span,{className:"strut",style:{height:"0.4306em"}}),un(e.span,{className:"mspace nobreak",children:" "}),un(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),un(e.span,{className:"mord mathnormal",children:"s"}),un(e.span,{className:"mord",children:"."}),un(e.span,{className:"mspace nobreak",children:" "})]})})]}),`61.11) in outdoor pose estimation,
and SGAD+ROMA delivers +7.39% AUC@5`,un(e.span,{className:"katex",children:[un(e.span,{className:"katex-mathml",children:un(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:un(e.semantics,{children:[un(e.mrow,{children:un(e.msup,{children:[un(e.mrow,{}),un(e.mo,{children:"∘"})]})}),un(e.annotation,{encoding:"application/x-tex",children:"^\\circ"})]})})}),un(e.span,{className:"katex-html","aria-hidden":"true",children:un(e.span,{className:"base",children:[un(e.span,{className:"strut",style:{height:"0.6741em"}}),un(e.span,{className:"mord",children:[un(e.span,{}),un(e.span,{className:"msupsub",children:un(e.span,{className:"vlist-t",children:un(e.span,{className:"vlist-r",children:un(e.span,{className:"vlist",style:{height:"0.6741em"},children:un(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[un(e.span,{className:"pstrut",style:{height:"2.7em"}}),un(e.span,{className:"sizing reset-size6 size3 mtight",children:un(e.span,{className:"mbin mtight",children:"∘"})})]})})})})})]})]})})]})," in indoor pose estimation, establishing a new state-of-the-art."]})]})}function QDe(n={}){const{wrapper:e}=n.components||{};return e?un(e,{...n,children:un(dF,{...n})}):dF(n)}const JDe={__name:"Abstract",setup(n){return(e,t)=>{const r=dn("el-divider"),i=dn("el-col"),s=dn("el-row");return $(),ue("div",null,[xe(r),xe(s,{justify:"center"},{default:Re(()=>[xe(i,{xs:24,sm:20,md:16,lg:12,xl:12,class:"content-container"},{default:Re(()=>[xe(y(QDe))]),_:1})]),_:1})])}}},e6e=Jo(JDe,[["__scopeId","data-v-397efc8e"]]),t6e={data(){return{bibtex:["@article{liu2025sgad,","title={SGAD: Semantic and Geometric-aware Descriptor for Local Feature Matching},","author={Liu, Xiangzeng and Wang, Chi and Shi, Guanglu and Zhang, Xiaodong and Miao, Qiguang and Fan, Miao},","journal={arXiv preprint arXiv:2508.02278},","year={2025}","}"]}},methods:{copyVal(){let n=document.createElement("textarea"),e=document.getElementById("bibtex").innerText;n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),this.$message.success("Copy Successfully"),n.remove()}}},n6e={id:"bibtex"};function r6e(n,e,t,r,i,s){const a=dn("el-divider"),o=dn("el-row"),l=dn("el-scrollbar"),c=dn("el-col");return $(),ue("div",null,[xe(a),xe(o,{justify:"center"},{default:Re(()=>e[1]||(e[1]=[ye("h1",{class:"section-title"},"BibTeX",-1)])),_:1,__:[1]}),xe(o,{justify:"center"},{default:Re(()=>[xe(c,{class:"bibtex",xs:24,sm:20,md:14,lg:12,xl:12,onClick:e[0]||(e[0]=u=>s.copyVal())},{default:Re(()=>[e[3]||(e[3]=ye("div",{style:{"text-align":"center",color:"var(--el-text-color-secondary)","margin-top":"20px"}},"🖱️ Click here to copy BibTex.",-1)),xe(o,null,{default:Re(()=>[xe(l,{style:{margin:"0px 20px 5px 20px"}},{default:Re(()=>[ye("pre",n6e,[($(!0),ue(Bt,null,Fn(i.bibtex,u=>($(),ue("code",null,[Bn(Ct(u),1),e[2]||(e[2]=ye("br",null,null,-1))]))),256))])]),_:1})]),_:1})]),_:1,__:[3]})]),_:1})])}const i6e=Jo(t6e,[["render",r6e],["__scopeId","data-v-291639dc"]]);function fF(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function vL(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:fF(e[t])&&fF(n[t])&&Object.keys(e[t]).length>0&&vL(n[t],e[t])})}const Xj={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function b0(){const n=typeof document<"u"?document:{};return vL(n,Xj),n}const s6e={document:Xj,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function el(){const n=typeof window<"u"?window:{};return vL(n,s6e),n}function a6e(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function OR(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function EC(){return Date.now()}function o6e(n){const e=el();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function l6e(n,e){e===void 0&&(e="x");const t=el();let r,i,s;const a=o6e(n);return t.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(i==="none"?"":i)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function XS(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function c6e(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function zo(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!c6e(r)){const i=Object.keys(Object(r)).filter(s=>e.indexOf(s)<0);for(let s=0,a=i.length;s<a;s+=1){const o=i[s],l=Object.getOwnPropertyDescriptor(r,o);l!==void 0&&l.enumerable&&(XS(n[o])&&XS(r[o])?r[o].__swiper__?n[o]=r[o]:zo(n[o],r[o]):!XS(n[o])&&XS(r[o])?(n[o]={},r[o].__swiper__?n[o]=r[o]:zo(n[o],r[o])):n[o]=r[o])}}}return n}function jS(n,e,t){n.style.setProperty(e,t)}function jj(n){let{swiper:e,targetPosition:t,side:r}=n;const i=el(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(h,f)=>c==="next"&&h>=f||c==="prev"&&h<=f,d=()=>{o=new Date().getTime(),a===null&&(a=o);const h=Math.max(Math.min((o-a)/l,1),0),f=.5-Math.cos(h*Math.PI)/2;let p=s+f*(t-s);if(u(p,t)&&(p=t),e.wrapperEl.scrollTo({[r]:p}),u(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:p})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(d)};d()}function nd(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function u6e(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:[e]),t}function d6e(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function f6e(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function Of(n,e){return el().getComputedStyle(n,null).getPropertyValue(e)}function hF(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function h6e(n,e){const t=[];let r=n.parentElement;for(;r;)e?r.matches(e)&&t.push(r):t.push(r),r=r.parentElement;return t}function pF(n,e,t){const r=el();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let b3;function p6e(){const n=el(),e=b0();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function Zj(){return b3||(b3=p6e()),b3}let _3;function m6e(n){let{userAgent:e}=n===void 0?{}:n;const t=Zj(),r=el(),i=r.navigator.platform,s=e||r.navigator.userAgent,a={ios:!1,android:!1},o=r.screen.width,l=r.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const d=s.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=i==="Win32";let p=i==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),c&&!f&&(a.os="android",a.android=!0),(u||h||d)&&(a.os="ios",a.ios=!0),a}function v6e(n){return n===void 0&&(n={}),_3||(_3=m6e(n)),_3}let S3;function g6e(){const n=el();let e=!1;function t(){const r=n.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(t()){const r=String(n.navigator.userAgent);if(r.includes("Version/")){const[i,s]=r.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=i<16||i===16&&s<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function y6e(){return S3||(S3=g6e()),S3}function b6e(n){let{swiper:e,on:t,emit:r}=n;const i=el();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(d=>{a=i.requestAnimationFrame(()=>{const{width:h,height:f}=e;let p=h,m=f;d.forEach(v=>{let{contentBoxSize:g,contentRect:_,target:b}=v;b&&b!==e.el||(p=_?_.width:(g[0]||g).inlineSize,m=_?_.height:(g[0]||g).blockSize)}),(p!==h||m!==f)&&o()})}),s.observe(e.el))},c=()=>{a&&i.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",o),i.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",u)})}function _6e(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const s=[],a=el(),o=function(u,d){d===void 0&&(d={});const h=a.MutationObserver||a.WebkitMutationObserver,f=new h(p=>{if(e.__preventObserver__)return;if(p.length===1){i("observerUpdate",p[0]);return}const m=function(){i("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});f.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),s.push(f)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=h6e(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",c)}var S6e={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return n.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(r,a)}return i.__emitterProxy=e,r.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[r].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),r=n):(e=s[0].events,t=s[0].data,r=s[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(r,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(r,t)})}),n}};function x6e(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Of(r,"padding-left")||0,10)-parseInt(Of(r,"padding-right")||0,10),t=t-parseInt(Of(r,"padding-top")||0,10)-parseInt(Of(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function w6e(){const n=this;function e(I){return n.isHorizontal()?I:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[I]}function t(I,D){return parseFloat(I.getPropertyValue(e(D))||0)}const r=n.params,{wrapperEl:i,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=n,c=n.virtual&&r.virtual.enabled,u=c?n.virtual.slides.length:n.slides.length,d=nd(s,`.${n.params.slideClass}, swiper-slide`),h=c?n.virtual.slides.length:d.length;let f=[];const p=[],m=[];let v=r.slidesOffsetBefore;typeof v=="function"&&(v=r.slidesOffsetBefore.call(n));let g=r.slidesOffsetAfter;typeof g=="function"&&(g=r.slidesOffsetAfter.call(n));const _=n.snapGrid.length,b=n.slidesGrid.length;let S=r.spaceBetween,x=-v,w=0,M=0;if(typeof a>"u")return;typeof S=="string"&&S.indexOf("%")>=0?S=parseFloat(S.replace("%",""))/100*a:typeof S=="string"&&(S=parseFloat(S)),n.virtualSize=-S,d.forEach(I=>{o?I.style.marginLeft="":I.style.marginRight="",I.style.marginBottom="",I.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(jS(i,"--swiper-centered-offset-before",""),jS(i,"--swiper-centered-offset-after",""));const C=r.grid&&r.grid.rows>1&&n.grid;C&&n.grid.initSlides(h);let A;const T=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(I=>typeof r.breakpoints[I].slidesPerView<"u").length>0;for(let I=0;I<h;I+=1){A=0;let D;if(d[I]&&(D=d[I]),C&&n.grid.updateSlide(I,D,h,e),!(d[I]&&Of(D,"display")==="none")){if(r.slidesPerView==="auto"){T&&(d[I].style[e("width")]="");const B=getComputedStyle(D),O=D.style.transform,H=D.style.webkitTransform;if(O&&(D.style.transform="none"),H&&(D.style.webkitTransform="none"),r.roundLengths)A=n.isHorizontal()?pF(D,"width",!0):pF(D,"height",!0);else{const L=t(B,"width"),z=t(B,"padding-left"),k=t(B,"padding-right"),F=t(B,"margin-left"),W=t(B,"margin-right"),q=B.getPropertyValue("box-sizing");if(q&&q==="border-box")A=L+F+W;else{const{clientWidth:Z,offsetWidth:se}=D;A=L+z+k+F+W+(se-Z)}}O&&(D.style.transform=O),H&&(D.style.webkitTransform=H),r.roundLengths&&(A=Math.floor(A))}else A=(a-(r.slidesPerView-1)*S)/r.slidesPerView,r.roundLengths&&(A=Math.floor(A)),d[I]&&(d[I].style[e("width")]=`${A}px`);d[I]&&(d[I].swiperSlideSize=A),m.push(A),r.centeredSlides?(x=x+A/2+w/2+S,w===0&&I!==0&&(x=x-a/2-S),I===0&&(x=x-a/2-S),Math.abs(x)<1/1e3&&(x=0),r.roundLengths&&(x=Math.floor(x)),M%r.slidesPerGroup===0&&f.push(x),p.push(x)):(r.roundLengths&&(x=Math.floor(x)),(M-Math.min(n.params.slidesPerGroupSkip,M))%n.params.slidesPerGroup===0&&f.push(x),p.push(x),x=x+A+S),n.virtualSize+=A+S,w=A,M+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+g,o&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(i.style.width=`${n.virtualSize+S}px`),r.setWrapperSize&&(i.style[e("width")]=`${n.virtualSize+S}px`),C&&n.grid.updateWrapperSize(A,f,e),!r.centeredSlides){const I=[];for(let D=0;D<f.length;D+=1){let B=f[D];r.roundLengths&&(B=Math.floor(B)),f[D]<=n.virtualSize-a&&I.push(B)}f=I,Math.floor(n.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-a)}if(c&&r.loop){const I=m[0]+S;if(r.slidesPerGroup>1){const D=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/r.slidesPerGroup),B=I*r.slidesPerGroup;for(let O=0;O<D;O+=1)f.push(f[f.length-1]+B)}for(let D=0;D<n.virtual.slidesBefore+n.virtual.slidesAfter;D+=1)r.slidesPerGroup===1&&f.push(f[f.length-1]+I),p.push(p[p.length-1]+I),n.virtualSize+=I}if(f.length===0&&(f=[0]),S!==0){const I=n.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((D,B)=>!r.cssMode||r.loop?!0:B!==d.length-1).forEach(D=>{D.style[I]=`${S}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let I=0;m.forEach(B=>{I+=B+(S||0)}),I-=S;const D=I-a;f=f.map(B=>B<=0?-v:B>D?D+g:B)}if(r.centerInsufficientSlides){let I=0;if(m.forEach(D=>{I+=D+(S||0)}),I-=S,I<a){const D=(a-I)/2;f.forEach((B,O)=>{f[O]=B-D}),p.forEach((B,O)=>{p[O]=B+D})}}if(Object.assign(n,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:m}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){jS(i,"--swiper-centered-offset-before",`${-f[0]}px`),jS(i,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const I=-n.snapGrid[0],D=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(B=>B+I),n.slidesGrid=n.slidesGrid.map(B=>B+D)}if(h!==u&&n.emit("slidesLengthChange"),f.length!==_&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==b&&n.emit("slidesGridLengthChange"),r.watchSlidesProgress&&n.updateSlidesOffset(),!c&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const I=`${r.containerModifierClass}backface-hidden`,D=n.el.classList.contains(I);h<=r.maxBackfaceHiddenSlides?D||n.el.classList.add(I):D&&n.el.classList.remove(I)}}function C6e(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>r?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!r)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;i=o>i?o:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function M6e(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}function T6e(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;i&&(a=n),r.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<r.length;l+=1){const c=r[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=r[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),h=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),f=-(a-u),p=f+e.slidesSizesGrid[l];(f>=0&&f<e.size-1||p>1&&p<=e.size||f<=0&&p>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),r[l].classList.add(t.slideVisibleClass)),c.progress=i?-d:d,c.originalProgress=i?-h:h}}function A6e(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(r===0)i=0,s=!0,a=!0;else{i=(n-e.minTranslate())/r;const u=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;s=u||i<=0,a=d||i>=1,u&&(i=0),d&&(i=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[u],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=h?o=(m-h)/p:o=(m+p-f)/p,o>1&&(o-=1)}Object.assign(e,{progress:i,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",i)}function E6e(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:i}=n,s=n.virtual&&t.virtual.enabled,a=l=>nd(r,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(s)if(t.loop){let l=i-n.virtual.slidesBefore;l<0&&(l=n.virtual.slides.length+l),l>=n.virtual.slides.length&&(l-=n.virtual.slides.length),o=a(`[data-swiper-slide-index="${l}"]`)}else o=a(`[data-swiper-slide-index="${i}"]`);else o=e[i];if(o){o.classList.add(t.slideActiveClass);let l=f6e(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let c=d6e(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass)}n.emitSlidesClasses()}const f2=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let i=r.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},x3=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},NR=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=i,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+r+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&x3(n,c)});return}const s=i+r-1;if(n.params.rewind||n.params.loop)for(let a=i-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<i||o>s)&&x3(n,o)}else for(let a=Math.max(i-e,0);a<=Math.min(s+e,t-1);a+=1)a!==i&&(a>s||a<i)&&x3(n,a)};function I6e(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function R6e(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const u=h=>{let f=h-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=I6e(e)),r.indexOf(t)>=0)c=r.indexOf(t);else{const h=Math.min(i.slidesPerGroupSkip,l);c=h+Math.floor((l-h)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&i.virtual.enabled&&i.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:d,previousIndex:s,activeIndex:l}),e.initialized&&NR(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function P6e(n,e){const t=this,r=t.params;let i=n.closest(`.${r.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!i&&o.matches&&o.matches(`.${r.slideClass}, swiper-slide`)&&(i=o)});let s=!1,a;if(i){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===i){s=!0,a=o;break}}if(i&&s)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var D6e={updateSize:x6e,updateSlides:w6e,updateAutoHeight:C6e,updateSlidesOffset:M6e,updateSlidesProgress:T6e,updateProgress:A6e,updateSlidesClasses:E6e,updateActiveIndex:R6e,updateClickedSlide:P6e};function L6e(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(t.virtualTranslate)return r?-i:i;if(t.cssMode)return i;let a=l6e(s,n);return a+=e.cssOverflowAdjustment(),r&&(a=-a),a||0}function k6e(n,e){const t=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=r?-n:n:l=n,i.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,i.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:i.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function O6e(){return-this.snapGrid[0]}function N6e(){return-this.snapGrid[this.snapGrid.length-1]}function B6e(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(r&&n>l?u=l:r&&n<c?u=c:u=n,s.updateProgress(u),a.cssMode){const d=s.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return jj({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var F6e={getTranslate:L6e,setTranslate:k6e,minTranslate:O6e,maxTranslate:N6e,translateTo:B6e};function z6e(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function Qj(n){let{swiper:e,runCallbacks:t,direction:r,step:i}=n;const{activeIndex:s,previousIndex:a}=e;let o=r;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${i}`),t&&s!==a){if(o==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),o==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function U6e(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),Qj({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function H6e(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),Qj({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var V6e={setTransition:z6e,transitionStart:U6e,transitionEnd:H6e};function $6e(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=s;if(s.animating&&o.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let v=m+Math.floor((a-m)/s.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(o.normalizeSlideIndex)for(let b=0;b<c.length;b+=1){const S=-Math.floor(g*100),x=Math.floor(c[b]*100),w=Math.floor(c[b+1]*100);typeof c[b+1]<"u"?S>=x&&S<w-(w-x)/2?a=b:S>=x&&S<w&&(a=b+1):S>=x&&(a=b)}if(s.initialized&&a!==d&&(!s.allowSlideNext&&(h?g>s.translate&&g>s.minTranslate():g<s.translate&&g<s.minTranslate())||!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(g);let _;if(a>d?_="next":a<d?_="prev":_="reset",h&&-g===s.translate||!h&&g===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(g),_!=="reset"&&(s.transitionStart(t,_),s.transitionEnd(t,_)),!1;if(o.cssMode){const b=s.isHorizontal(),S=h?g:-g;if(e===0){const x=s.virtual&&s.params.virtual.enabled;x&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),x&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[b?"scrollLeft":"scrollTop"]=S})):f[b?"scrollLeft":"scrollTop"]=S,x&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return jj({swiper:s,targetPosition:S,side:b?"left":"top"}),!0;f.scrollTo({[b?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(g),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(t,_),e===0?s.transitionEnd(t,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,_))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function G6e(n,e,t,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;let s=n;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?s=s+i.virtual.slidesBefore:s=i.getSlideIndexByData(s)),i.slideTo(s,e,t,r)}function W6e(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const r=this,{enabled:i,params:s,animating:a}=r;if(!i)return r;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:o,c=r.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,n,e,t)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+l,n,e,t)}function q6e(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const r=this,{params:i,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=r;if(!l)return r;const u=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!u&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=o?r.translate:-r.translate;function h(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const f=h(d),p=s.map(g=>h(g));let m=s[p.indexOf(f)-1];if(typeof m>"u"&&i.cssMode){let g;s.forEach((_,b)=>{f>=_&&(g=b)}),typeof g<"u"&&(m=s[g>0?g-1:g])}let v=0;if(typeof m<"u"&&(v=a.indexOf(m),v<0&&(v=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(v=v-r.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),i.rewind&&r.isBeginning){const g=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(g,n,e,t)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(v,n,e,t)}),!0;return r.slideTo(v,n,e,t)}function K6e(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const r=this;return r.slideTo(r.activeIndex,n,e,t)}function Y6e(n,e,t,r){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;let s=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const c=i.snapGrid[o],u=i.snapGrid[o+1];l-c>(u-c)*r&&(s+=i.params.slidesPerGroup)}else{const c=i.snapGrid[o-1],u=i.snapGrid[o];l-c<=(u-c)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,n,e,t)}function X6e(){const n=this,{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.clickedIndex,s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<n.loopedSlides-r/2||i>n.slides.length-n.loopedSlides+r/2?(n.loopFix(),i=n.getSlideIndex(nd(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),OR(()=>{n.slideTo(i)})):n.slideTo(i):i>n.slides.length-r?(n.loopFix(),i=n.getSlideIndex(nd(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),OR(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var j6e={slideTo:$6e,slideToLoop:G6e,slideNext:W6e,slidePrev:q6e,slideReset:K6e,slideToClosest:Y6e,slideToClickedSlide:X6e};function Z6e(n){const e=this,{params:t,slidesEl:r}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;nd(r,`.${t.slideClass}, swiper-slide`).forEach((s,a)=>{s.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function Q6e(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:i,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:h,params:f}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=d,l.emit("loopFix");return}const p=f.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(f.slidesPerView,10));let m=f.loopedSlides||p;m%f.slidesPerGroup!==0&&(m+=f.slidesPerGroup-m%f.slidesPerGroup),l.loopedSlides=m;const v=[],g=[];let _=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(M=>M.classList.contains(f.slideActiveClass))[0]):_=s;const b=r==="next"||!r,S=r==="prev"||!r;let x=0,w=0;if(s<m){x=Math.max(m-s,f.slidesPerGroup);for(let M=0;M<m-s;M+=1){const C=M-Math.floor(M/c.length)*c.length;v.push(c.length-C-1)}}else if(s>l.slides.length-m*2){w=Math.max(s-(l.slides.length-m*2),f.slidesPerGroup);for(let M=0;M<w;M+=1){const C=M-Math.floor(M/c.length)*c.length;g.push(C)}}if(S&&v.forEach(M=>{l.slides[M].swiperLoopMoveDOM=!0,h.prepend(l.slides[M]),l.slides[M].swiperLoopMoveDOM=!1}),b&&g.forEach(M=>{l.slides[M].swiperLoopMoveDOM=!0,h.append(l.slides[M]),l.slides[M].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"&&l.updateSlides(),f.watchSlidesProgress&&l.updateSlidesOffset(),t){if(v.length>0&&S)if(typeof e>"u"){const M=l.slidesGrid[_],A=l.slidesGrid[_+x]-M;o?l.setTranslate(l.translate-A):(l.slideTo(_+x,0,!1,!0),i&&(l.touches[l.isHorizontal()?"startX":"startY"]+=A,l.touchEventsData.currentTranslate=l.translate))}else i&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(g.length>0&&b)if(typeof e>"u"){const M=l.slidesGrid[_],A=l.slidesGrid[_-w]-M;o?l.setTranslate(l.translate-A):(l.slideTo(_-w,0,!1,!0),i&&(l.touches[l.isHorizontal()?"startX":"startY"]+=A,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=u,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const M={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(C=>{!C.destroyed&&C.params.loop&&C.loopFix({...M,slideTo:C.params.slidesPerView===f.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...M,slideTo:l.controller.control.params.slidesPerView===f.slidesPerView?t:!1})}l.emit("loopFix")}function J6e(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(i=>{const s=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[s]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var eLe={loopCreate:Z6e,loopFix:Q6e,loopDestroy:J6e};function tLe(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function nLe(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var rLe={setGrabCursor:tLe,unsetGrabCursor:nLe};function iLe(n,e){e===void 0&&(e=this);function t(r){if(!r||r===b0()||r===el())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(n);return!i&&!r.getRootNode?null:i||t(r.getRootNode().host)}return t(e)}function sLe(n){const e=this,t=b0(),r=el(),i=e.touchEventsData;i.evCache.push(n);const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=n;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=n.composedPath?n.composedPath():n.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?iLe(h,c):c.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,m=a.currentY,v=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,g=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(v&&(p<=g||p>=r.innerWidth-g))if(v==="prevent")n.preventDefault();else return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,i.touchStartTime=EC(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let _=!0;c.matches(i.focusableElements)&&(_=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==c&&t.activeElement.blur();const b=_&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||b)&&!c.isContentEditable&&l.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function aLe(n){const e=b0(),t=this,r=t.touchEventsData,{params:i,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!i.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=r.evCache.findIndex(M=>M.pointerId===l.pointerId);c>=0&&(r.evCache[c]=l);const u=r.evCache.length>1?r.evCache[0]:l,d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:h}),r.touchStartTime=EC());return}if(i.touchReleaseOnEdges&&!i.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}if(r.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,p=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let M;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+p*p>=25&&(M=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,r.isScrolling=t.isHorizontal()?M>i.touchAngle:90-M>i.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let m=t.isHorizontal()?f:p,v=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),v=Math.abs(v)*(a?1:-1)),s.diff=m,m*=i.touchRatio,a&&(m=-m,v=-v);const g=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";const _=t.params.loop&&!i.cssMode,b=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(_&&b&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const M=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(M)}r.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let S;r.isMoved&&g!==t.touchesDirection&&_&&b&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),S=!0),t.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=m+r.startTranslate;let x=!0,w=i.resistanceRatio;if(i.touchReleaseOnEdges&&(w=0),m>0?(_&&b&&!S&&r.currentTranslate>(i.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+m)**w))):m<0&&(_&&b&&!S&&r.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-m)**w))),x&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(m)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function oLe(n){const e=this,t=e.touchEventsData,r=t.evCache.findIndex(b=>b.pointerId===n.pointerId);if(r>=0&&t.evCache.splice(r,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:i,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!i.simulateTouch&&n.pointerType==="mouse")return;let c=n;if(c.originalEvent&&(c=c.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",c),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&i.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}i.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=EC(),d=u-t.touchStartTime;if(e.allowClick){const b=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(b&&b[0]||c.target,b),e.emit("tap click",c),d<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(t.lastClickTime=EC(),OR(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||s.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let h;if(i.followFinger?h=a?e.translate:-e.translate:h=-t.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}let f=0,p=e.slidesSizesGrid[0];for(let b=0;b<o.length;b+=b<i.slidesPerGroupSkip?1:i.slidesPerGroup){const S=b<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof o[b+S]<"u"?h>=o[b]&&h<o[b+S]&&(f=b,p=o[b+S]-o[b]):h>=o[b]&&(f=b,p=o[o.length-1]-o[o.length-2])}let m=null,v=null;i.rewind&&(e.isBeginning?v=i.virtual&&i.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const g=(h-o[f])/p,_=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(g>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?m:f+_):e.slideTo(f)),e.swipeDirection==="prev"&&(g>1-i.longSwipesRatio?e.slideTo(f+_):v!==null&&g<0&&Math.abs(g)>i.longSwipesRatio?e.slideTo(v):e.slideTo(f))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+_):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:f+_),e.swipeDirection==="prev"&&e.slideTo(v!==null?v:f))}}function mF(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=r,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function lLe(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function cLe(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const s=n.maxTranslate()-n.minTranslate();s===0?i=0:i=(n.translate-n.minTranslate())/s,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function uLe(n){const e=this;f2(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let vF=!1;function dLe(){}const Jj=(n,e)=>{const t=b0(),{params:r,el:i,wrapperEl:s,device:a}=n,o=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;i[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",n.onClick,!0),r.cssMode&&s[l]("scroll",n.onScroll),r.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",mF,!0):n[c]("observerUpdate",mF,!0),i[l]("load",n.onLoad,{capture:!0})};function fLe(){const n=this,e=b0(),{params:t}=n;n.onTouchStart=sLe.bind(n),n.onTouchMove=aLe.bind(n),n.onTouchEnd=oLe.bind(n),t.cssMode&&(n.onScroll=cLe.bind(n)),n.onClick=lLe.bind(n),n.onLoad=uLe.bind(n),vF||(e.addEventListener("touchstart",dLe),vF=!0),Jj(n,"on")}function hLe(){Jj(this,"off")}var pLe={attachEvents:fLe,detachEvents:hLe};const gF=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function mLe(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,c=gF(n,r),u=gF(n,l),d=r.enabled;c&&!u?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const _=r[g]&&r[g].enabled,b=l[g]&&l[g].enabled;_&&!b&&n[g].disable(),!_&&b&&n[g].enable()});const h=l.direction&&l.direction!==r.direction,f=r.loop&&(l.slidesPerView!==r.slidesPerView||h),p=r.loop;h&&t&&n.changeDirection(),zo(n.params,l);const m=n.params.enabled,v=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(f?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!p&&v?(n.loopCreate(e),n.updateSlides()):p&&!v&&n.loopDestroy()),n.emit("breakpoint",l)}function vLe(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const i=el(),s=e==="window"?i.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=t.clientWidth&&(r=l)}return r||"max"}var gLe={setBreakpoint:mLe,getBreakpoint:vLe};function yLe(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&t.push(e+i)}):typeof r=="string"&&t.push(e+r)}),t}function bLe(){const n=this,{classNames:e,params:t,rtl:r,el:i,device:s}=n,a=yLe(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),i.classList.add(...e),n.emitContainerClasses()}function _Le(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var SLe={addClasses:bLe,removeClasses:_Le};function xLe(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const i=n.slides.length-1,s=n.slidesGrid[i]+n.slidesSizesGrid[i]+r*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var wLe={checkOverflow:xLe},yF={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function CLe(n,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){zo(e,r);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in s)){zo(e,r);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),zo(e,r)}}const w3={eventsEmitter:S6e,update:D6e,translate:F6e,transition:V6e,slide:j6e,loop:eLe,grabCursor:rLe,events:pLe,breakpoints:gLe,checkOverflow:wLe,classes:SLe},C3={};class ic{constructor(){let e,t;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=zo({},t),e&&!t.el&&(t.el=e);const a=b0();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const u=[];return a.querySelectorAll(t.el).forEach(d=>{const h=zo({},t,{el:d});u.push(new ic(h))}),u}const o=this;o.__swiper__=!0,o.support=Zj(),o.device=v6e({userAgent:t.userAgent}),o.browser=y6e(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(u=>{u({params:t,swiper:o,extendParams:CLe(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=zo({},yF,l);return o.params=zo({},c,C3,t),o.originalParams=zo({},o.params),o.passedParams=zo({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:r}=this,i=nd(t,`.${r.slideClass}, swiper-slide`),s=hF(i[0]);return hF(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=nd(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),a=(r.maxTranslate()-i)*e+i;r.translateTo(a,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);t.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:i,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=r;let u=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let d=s[c]?s[c].swiperSlideSize:0,h;for(let f=c+1;f<s.length;f+=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(t?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&f2(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const a=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||i()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):nd(r,i())[0])();return!a&&t.params.createElements&&(a=u6e("div",t.params.wrapperClass),r.append(a),nd(r,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:r,wrapperEl:a,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:a,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Of(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Of(r,"direction")==="rtl"),wrongRTL:Of(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(s=>{s.complete?f2(t,s):s.addEventListener("load",a=>{f2(t,a.target)})}),NR(t),t.initialized=!0,NR(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:i,el:s,wrapperEl:a,slides:o}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,a6e(r)),r.destroyed=!0),null}static extendDefaults(e){zo(C3,e)}static get extendedDefaults(){return C3}static get defaults(){return yF}static installModule(e){ic.prototype.__modules__||(ic.prototype.__modules__=[]);const t=ic.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>ic.installModule(t)),ic):(ic.installModule(e),ic)}}Object.keys(w3).forEach(n=>{Object.keys(w3[n]).forEach(e=>{ic.prototype[e]=w3[n][e]})});ic.use([b6e,_6e]);const MLe=["src"],TLe={__name:"ImageSelector",setup(n){const e=["./image_selector/input/megadepth1_ori.png","./image_selector/input/megadepth2_ori.png","./image_selector/input/scannet1_ori.png","./image_selector/input/scannet2_ori.png"],t=["./image_selector/output/megadepth1.png","./image_selector/output/megadepth2.png","./image_selector/output/scannet1.png","./image_selector/output/scannet2.png"],r=[];let i=ne(""),s=ne(0),a=ne(!0);const o=()=>{const c=[];for(let u=0;u<t.length;u++){const d=new Image;r[u]=d;const h=new Promise(f=>{d.onload=f});d.src=t[u],c.push(h)}return Promise.all(c).then(()=>{a.value=!1,console.log("preloadImageSelector finished")})};Rn(()=>{o(),l(0)});const l=c=>{s.value=c,i.value=r[c].src};return(c,u)=>{const d=dn("el-divider"),h=dn("el-row"),f=dn("el-image"),p=dn("el-col"),m=dn("el-skeleton-item"),v=dn("el-skeleton");return $(),ue("div",null,[xe(d),xe(h,{justify:"center"},{default:Re(()=>u[0]||(u[0]=[ye("h1",{class:"section-title"},"Qualitative Comparison",-1)])),_:1,__:[0]}),xe(h,{justify:"center"},{default:Re(()=>[xe(p,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Re(()=>[xe(h,{justify:"space-evenly",style:{"margin-top":"20px"}},{default:Re(()=>[($(),ue(Bt,null,Fn(e,(g,_)=>xe(p,{span:6,key:_},{default:Re(()=>[xe(f,{class:Y(["image",{"selected-image":y(s)===_,"unselected-image":y(s)!==_}]),src:g,style:{"aspect-ratio":"16 / 9"},fit:"scale-down",onClick:b=>l(_)},null,8,["src","onClick","class"])]),_:2},1024)),64)),xe(h,{justify:"center",style:{"margin-top":"10px"}},{default:Re(()=>[xe(p,{span:24},{default:Re(()=>[xe(v,{style:{width:"100%"},loading:y(a),animated:"",throttle:1e3},{template:Re(()=>[xe(m,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Re(()=>[ye("img",{src:y(i),style:{width:"100%","object-fit":"contain"}},null,8,MLe)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},ALe=Jo(TLe,[["__scopeId","data-v-3e56912c"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var BR=function(n,e){return BR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},BR(n,e)};function lr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");BR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ELe=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),ILe=function(){function n(){this.browser=new ELe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Sf=new ILe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Sf.wxa=!0,Sf.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Sf.worker=!0:!Sf.hasGlobalWindow||"Deno"in window?(Sf.node=!0,Sf.svgSupported=!0):RLe(navigator.userAgent,Sf);function RLe(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),s=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),s&&(t.edge=!0,t.version=s[1],t.newEdge=+s[1].split(".")[0]>18),a&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var o=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in o||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}const kr=Sf;var gL=12,PLe="sans-serif",r0=gL+"px "+PLe,DLe=20,LLe=100,kLe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function OLe(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-DLe)/LLe;e[r]=i}return e}var NLe=OLe(kLe),Kg={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=Kg.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||r0),n.measureText(t);t=t||"",r=r||r0;var s=/((?:\d+)?\.?\d*)px/.exec(r),a=s&&+s[1]||gL,o=0;if(r.indexOf("mono")>=0)o=a*t.length;else for(var l=0;l<t.length;l++){var c=NLe[t[l]];o+=c==null?a:c*a}return{width:o}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},eZ=ah(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),tZ=ah(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),tS=Object.prototype.toString,xT=Array.prototype,BLe=xT.forEach,FLe=xT.filter,yL=xT.slice,zLe=xT.map,bF=(function(){}).constructor,ZS=bF?bF.prototype:null,bL="__proto__",ULe=2311;function nZ(){return ULe++}function _L(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Xr(n){if(n==null||typeof n!="object")return n;var e=n,t=tS.call(n);if(t==="[object Array]"){if(!$1(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Xr(n[r])}}else if(tZ[t]){if(!$1(n)){var s=n.constructor;if(s.from)e=s.from(n);else{e=new s(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!eZ[t]&&!$1(n)&&!Yb(n)){e={};for(var a in n)n.hasOwnProperty(a)&&a!==bL&&(e[a]=Xr(n[a]))}return e}function ji(n,e,t){if(!mr(e)||!mr(n))return t?Xr(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==bL){var i=n[r],s=e[r];mr(s)&&mr(i)&&!Jn(s)&&!Jn(i)&&!Yb(s)&&!Yb(i)&&!_F(s)&&!_F(i)&&!$1(s)&&!$1(i)?ji(i,s,t):(t||!(r in n))&&(n[r]=Xr(e[r]))}return n}function vn(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==bL&&(n[t]=e[t]);return n}function Ji(n,e,t){for(var r=vs(e),i=0,s=r.length;i<s;i++){var a=r[i];(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}return n}function Di(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function HLe(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function Bd(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var s=r[i];s!=="constructor"&&(t?e[s]!=null:n[s]==null)&&(n[s]=e[s])}else Ji(n,e,t)}function Mo(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function wt(n,e,t){if(n&&e)if(n.forEach&&n.forEach===BLe)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var s in n)n.hasOwnProperty(s)&&e.call(t,n[s],s,n)}function Zr(n,e,t){if(!n)return[];if(!e)return SL(n);if(n.map&&n.map===zLe)return n.map(e,t);for(var r=[],i=0,s=n.length;i<s;i++)r.push(e.call(t,n[i],i,n));return r}function ah(n,e,t,r){if(n&&e){for(var i=0,s=n.length;i<s;i++)t=e.call(r,t,n[i],i,n);return t}}function yl(n,e,t){if(!n)return[];if(!e)return SL(n);if(n.filter&&n.filter===FLe)return n.filter(e,t);for(var r=[],i=0,s=n.length;i<s;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function vs(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function VLe(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(yL.call(arguments)))}}var Li=ZS&&li(ZS.bind)?ZS.call.bind(ZS.bind):VLe;function Rs(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(yL.call(arguments)))}}function Jn(n){return Array.isArray?Array.isArray(n):tS.call(n)==="[object Array]"}function li(n){return typeof n=="function"}function ur(n){return typeof n=="string"}function FR(n){return tS.call(n)==="[object String]"}function gs(n){return typeof n=="number"}function mr(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function _F(n){return!!eZ[tS.call(n)]}function To(n){return!!tZ[tS.call(n)]}function Yb(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function wT(n){return n.colorStops!=null}function $Le(n){return n.image!=null}function GLe(n){return n!==n}function Xb(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function Ir(n,e){return n??e}function V1(n,e,t){return n??e??t}function SL(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return yL.apply(n,e)}function rZ(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function wd(n,e){if(!n)throw new Error(e)}function Kc(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var iZ="__ec_primitive__";function zR(n){n[iZ]=!0}function $1(n){return n[iZ]}var WLe=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return vs(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),sZ=typeof Map=="function";function qLe(){return sZ?new Map:new WLe}var KLe=function(){function n(e){var t=Jn(e);this.data=qLe();var r=this;e instanceof n?e.each(i):e&&wt(e,i);function i(s,a){t?r.set(s,a):r.set(a,s)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return sZ?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function jr(n){return new KLe(n)}function YLe(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function CT(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&vn(t,e),t}function aZ(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function i0(n,e){return n.hasOwnProperty(e)}function bo(){}var XLe=180/Math.PI;function Yg(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function jLe(n){return[n[0],n[1]]}function SF(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function ZLe(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function QLe(n){return Math.sqrt(JLe(n))}function JLe(n){return n[0]*n[0]+n[1]*n[1]}function M3(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function eke(n,e){var t=QLe(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function UR(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var HR=UR;function tke(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var Rv=tke;function T3(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function eu(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function iv(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function sv(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var H0=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),nke=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new H0(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,s=r-this._x,a=i-this._y;this._x=r,this._y=i,t.drift(s,a,e),this.handler.dispatchToElement(new H0(t,e),"drag",e.event);var o=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new H0(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new H0(o,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new H0(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new H0(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}();const rke=nke;var ike=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var a=this._$eventProcessor;t!=null&&a&&a.normalizeQuery&&(t=a.normalizeQuery(t)),s[e]||(s[e]=[]);for(var o=0;o<s[e].length;o++)if(s[e][o].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},c=s[e].length-1,u=s[e][c];return u&&u.callAtLast?s[e].splice(c,0,l):s[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],s=0,a=r[e].length;s<a;s++)r[e][s].h!==t&&i.push(r[e][s]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],s=this._$eventProcessor;if(i)for(var a=t.length,o=i.length,l=0;l<o;l++){var c=i[l];if(!(s&&s.filter&&c.query!=null&&!s.filter(e,c.query)))switch(a){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],s=this._$eventProcessor;if(i)for(var a=t.length,o=t[a-1],l=i.length,c=0;c<l;c++){var u=i[c];if(!(s&&s.filter&&u.query!=null&&!s.filter(e,u.query)))switch(a){case 0:u.h.call(o);break;case 1:u.h.call(o,t[0]);break;case 2:u.h.call(o,t[0],t[1]);break;default:u.h.apply(o,t.slice(1,a-1));break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n}();const bu=ike;var ske=Math.log(2);function VR(n,e,t,r,i,s){var a=r+"-"+i,o=n.length;if(s.hasOwnProperty(a))return s[a];if(e===1){var l=Math.round(Math.log((1<<o)-1&~i)/ske);return n[t][l]}for(var c=r|1<<t,u=t+1;r&1<<u;)u++;for(var d=0,h=0,f=0;h<o;h++){var p=1<<h;p&i||(d+=(f%2?-1:1)*n[t][h]*VR(n,e-1,u,c,i|p,s),f++)}return s[a]=d,d}function xF(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=VR(t,8,0,0,0,r);if(i!==0){for(var s=[],a=0;a<8;a++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((a+o)%2?-1:1)*VR(t,7,a===0?1:0,1<<a,1<<o,r)/i*e[a];return function(l,c,u){var d=c*s[6]+u*s[7]+1;l[0]=(c*s[0]+u*s[1]+s[2])/d,l[1]=(c*s[3]+u*s[4]+s[5])/d}}}var wF="___zrEVENTSAVED",A3=[];function ake(n,e,t,r,i){return $R(A3,e,r,i,!0)&&$R(n,t,A3[0],A3[1])}function $R(n,e,t,r,i){if(e.getBoundingClientRect&&kr.domSupported&&!oZ(e)){var s=e[wF]||(e[wF]={}),a=oke(e,s),o=lke(a,s,i);if(o)return o(n,t,r),!0}return!1}function oke(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],s=0;s<4;s++){var a=document.createElement("div"),o=a.style,l=s%2,c=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[c]+":0",r[1-l]+":auto",i[1-c]+":auto",""].join("!important;"),n.appendChild(a),t.push(a)}return t}function lke(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],s=e.srcCoords,a=[],o=[],l=!0,c=0;c<4;c++){var u=n[c].getBoundingClientRect(),d=2*c,h=u.left,f=u.top;a.push(h,f),l=l&&s&&h===s[d]&&f===s[d+1],o.push(n[c].offsetLeft,n[c].offsetTop)}return l&&i?i:(e.srcCoords=a,e[r]=t?xF(o,a):xF(a,o))}function oZ(n){return n.nodeName.toUpperCase()==="CANVAS"}var cke=/([&<>"'])/g,uke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function co(n){return n==null?"":(n+"").replace(cke,function(e,t){return uke[t]})}var dke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,E3=[],fke=kr.browser.firefox&&+kr.browser.version.split(".")[0]<39;function GR(n,e,t,r){return t=t||{},r?CF(n,e,t):fke&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):CF(n,e,t),t}function CF(n,e,t){if(kr.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(oZ(n)){var s=n.getBoundingClientRect();t.zrX=r-s.left,t.zrY=i-s.top;return}else if($R(E3,n,r,i)){t.zrX=E3[0],t.zrY=E3[1];return}}t.zrX=t.zrY=0}function xL(n){return n||window.event}function fl(n,e,t){if(e=xL(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var a=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&GR(n,a,e,t)}else{GR(n,e,e,t);var s=hke(e);e.zrDelta=s?s/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&dke.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function hke(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),s=r>0?-1:r<0?1:t>0?-1:1;return 3*i*s}function pke(n,e,t,r){n.addEventListener(e,t,r)}function mke(n,e,t,r){n.removeEventListener(e,t,r)}var lZ=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},vke=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var s={points:[],touches:[],target:t,event:e},a=0,o=i.length;a<o;a++){var l=i[a],c=GR(r,l,{});s.points.push([c.zrX,c.zrY]),s.touches.push(l)}this._track.push(s)}},n.prototype._recognize=function(e){for(var t in I3)if(I3.hasOwnProperty(t)){var r=I3[t](this._track,e);if(r)return r}},n}();function MF(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function gke(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var I3={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var s=MF(r)/MF(i);!isFinite(s)&&(s=1),e.pinchScale=s;var a=gke(r);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:n[0].target,event:e}}}}};function Pv(){return[1,0,0,1,0,0]}function wL(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function yke(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Dv(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],s=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n[4]=o,n[5]=l,n}function WR(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function CL(n,e,t,r){r===void 0&&(r=[0,0]);var i=e[0],s=e[2],a=e[4],o=e[1],l=e[3],c=e[5],u=Math.sin(t),d=Math.cos(t);return n[0]=i*d+o*u,n[1]=-i*u+o*d,n[2]=s*d+l*u,n[3]=-s*u+d*l,n[4]=d*(a-r[0])+u*(c-r[1])+r[0],n[5]=d*(c-r[1])-u*(a-r[0])+r[1],n}function bke(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function cZ(n,e){var t=e[0],r=e[2],i=e[4],s=e[1],a=e[3],o=e[5],l=t*a-s*r;return l?(l=1/l,n[0]=a*l,n[1]=-s*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*o-a*i)*l,n[5]=(s*i-t*o)*l,n):null}var _ke=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var s=1-i;e.x=s*t.x+i*r.x,e.y=s*t.y+i*r.y},n}();const _r=_ke;var QS=Math.min,JS=Math.max,Eh=new _r,Ih=new _r,Rh=new _r,Ph=new _r,Py=new _r,Dy=new _r,Ske=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=QS(e.x,this.x),r=QS(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=JS(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=JS(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,s=Pv();return WR(s,s,[-t.x,-t.y]),bke(s,s,[r,i]),WR(s,s,[e.x,e.y]),s},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,s=r.x+r.width,a=r.y,o=r.y+r.height,l=e.x,c=e.x+e.width,u=e.y,d=e.y+e.height,h=!(s<l||c<i||o<u||d<a);if(t){var f=1/0,p=0,m=Math.abs(s-l),v=Math.abs(c-i),g=Math.abs(o-u),_=Math.abs(d-a),b=Math.min(m,v),S=Math.min(g,_);s<l||c<i?b>p&&(p=b,m<v?_r.set(Dy,-m,0):_r.set(Dy,v,0)):b<f&&(f=b,m<v?_r.set(Py,m,0):_r.set(Py,-v,0)),o<u||d<a?S>p&&(p=S,g<_?_r.set(Dy,0,-g):_r.set(Dy,0,_)):b<f&&(f=b,g<_?_r.set(Py,0,g):_r.set(Py,0,-_))}return t&&_r.copy(t,h?Py:Dy),h},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],s=r[3],a=r[4],o=r[5];e.x=t.x*i+a,e.y=t.y*s+o,e.width=t.width*i,e.height=t.height*s,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Eh.x=Rh.x=t.x,Eh.y=Ph.y=t.y,Ih.x=Ph.x=t.x+t.width,Ih.y=Rh.y=t.y+t.height,Eh.transform(r),Ph.transform(r),Ih.transform(r),Rh.transform(r),e.x=QS(Eh.x,Ih.x,Rh.x,Ph.x),e.y=QS(Eh.y,Ih.y,Rh.y,Ph.y);var l=JS(Eh.x,Ih.x,Rh.x,Ph.x),c=JS(Eh.y,Ih.y,Rh.y,Ph.y);e.width=l-e.x,e.height=c-e.y},n}();const xi=Ske;var uZ="silent";function xke(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:wke}}function wke(){lZ(this.event)}var Cke=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(bu),Ly=function(){function n(e,t){this.x=e,this.y=t}return n}(),Mke=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],R3=new xi(0,0,0,0),dZ=function(n){lr(e,n);function e(t,r,i,s,a){var o=n.call(this)||this;return o._hovered=new Ly(0,0),o.storage=t,o.painter=r,o.painterRoot=s,o._pointerSize=a,i=i||new Cke,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new rke(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(wt(Mke,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,s=fZ(this,r,i),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=s?new Ly(r,i):this.findHover(r,i),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),o&&c!==o&&this.dispatchToElement(a,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Ly(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var s=t.target;if(!(s&&s.silent)){for(var a="on"+r,o=xke(r,t,i);s&&(s[a]&&(o.cancelBubble=!!s[a].call(s,o)),s.trigger(r,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(r,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(r,o)}))}},e.prototype.findHover=function(t,r,i){var s=this.storage.getDisplayList(),a=new Ly(t,r);if(TF(s,a,t,r,i),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,c=l/2,u=new xi(t-c,r-c,l,l),d=s.length-1;d>=0;d--){var h=s[d];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(R3.copy(h.getBoundingRect()),h.transform&&R3.applyTransform(h.transform),R3.intersect(u)&&o.push(h))}if(o.length)for(var f=4,p=Math.PI/12,m=Math.PI*2,v=0;v<c;v+=f)for(var g=0;g<m;g+=p){var _=t+v*Math.cos(g),b=r+v*Math.sin(g);if(TF(o,a,_,b,i),a.target)return a}}return a},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new vke);var i=this._gestureMgr;r==="start"&&i.clear();var s=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),s){var a=s.type;t.gestureEvent=a;var o=new Ly;o.target=s.target,this.dispatchToElement(o,a,s.event)}},e}(bu);wt(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){dZ.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=fZ(this,t,r),s,a;if((n!=="mouseup"||!i)&&(s=this.findHover(t,r),a=s.target),n==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(n==="mouseup")this._upEl=a;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||HR(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,n,e)}});function Tke(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,s=!1;r;){if(r.ignoreClip&&(s=!0),!s){var a=r.getClipPath();if(a&&!a.contain(e,t))return!1}r.silent&&(i=!0);var o=r.__hostTarget;r=o||r.parent}return i?uZ:!0}return!1}function TF(n,e,t,r,i){for(var s=n.length-1;s>=0;s--){var a=n[s],o=void 0;if(a!==i&&!a.ignore&&(o=Tke(a,t,r))&&(!e.topTarget&&(e.topTarget=a),o!==uZ)){e.target=a;break}}}function fZ(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}const Ake=dZ;var hZ=32,ky=7;function Eke(n){for(var e=0;n>=hZ;)e|=n&1,n>>=1;return n+e}function AF(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;Ike(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function Ike(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function EF(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var s=n[r],a=e,o=r,l;a<o;)l=a+o>>>1,i(s,n[l])<0?o=l:a=l+1;var c=r-a;switch(c){case 3:n[a+3]=n[a+2];case 2:n[a+2]=n[a+1];case 1:n[a+1]=n[a];break;default:for(;c>0;)n[a+c]=n[a+c-1],c--}n[a]=s}}function P3(n,e,t,r,i,s){var a=0,o=0,l=1;if(s(n,e[t+i])>0){for(o=r-i;l<o&&s(n,e[t+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=i,l+=i}else{for(o=i+1;l<o&&s(n,e[t+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=a;a=i-l,l=i-c}for(a++;a<l;){var u=a+(l-a>>>1);s(n,e[t+u])>0?a=u+1:l=u}return l}function D3(n,e,t,r,i,s){var a=0,o=0,l=1;if(s(n,e[t+i])<0){for(o=i+1;l<o&&s(n,e[t+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=a;a=i-l,l=i-c}else{for(o=r-i;l<o&&s(n,e[t+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=i,l+=i}for(a++;a<l;){var u=a+(l-a>>>1);s(n,e[t+u])<0?l=u:a=u+1}return l}function Rke(n,e){var t=ky,r,i,s=0,a=[];r=[],i=[];function o(f,p){r[s]=f,i[s]=p,s+=1}function l(){for(;s>1;){var f=s-2;if(f>=1&&i[f-1]<=i[f]+i[f+1]||f>=2&&i[f-2]<=i[f]+i[f-1])i[f-1]<i[f+1]&&f--;else if(i[f]>i[f+1])break;u(f)}}function c(){for(;s>1;){var f=s-2;f>0&&i[f-1]<i[f+1]&&f--,u(f)}}function u(f){var p=r[f],m=i[f],v=r[f+1],g=i[f+1];i[f]=m+g,f===s-3&&(r[f+1]=r[f+2],i[f+1]=i[f+2]),s--;var _=D3(n[v],n,p,m,0,e);p+=_,m-=_,m!==0&&(g=P3(n[p+m-1],n,v,g,g-1,e),g!==0&&(m<=g?d(p,m,v,g):h(p,m,v,g)))}function d(f,p,m,v){var g=0;for(g=0;g<p;g++)a[g]=n[f+g];var _=0,b=m,S=f;if(n[S++]=n[b++],--v===0){for(g=0;g<p;g++)n[S+g]=a[_+g];return}if(p===1){for(g=0;g<v;g++)n[S+g]=n[b+g];n[S+v]=a[_];return}for(var x=t,w,M,C;;){w=0,M=0,C=!1;do if(e(n[b],a[_])<0){if(n[S++]=n[b++],M++,w=0,--v===0){C=!0;break}}else if(n[S++]=a[_++],w++,M=0,--p===1){C=!0;break}while((w|M)<x);if(C)break;do{if(w=D3(n[b],a,_,p,0,e),w!==0){for(g=0;g<w;g++)n[S+g]=a[_+g];if(S+=w,_+=w,p-=w,p<=1){C=!0;break}}if(n[S++]=n[b++],--v===0){C=!0;break}if(M=P3(a[_],n,b,v,0,e),M!==0){for(g=0;g<M;g++)n[S+g]=n[b+g];if(S+=M,b+=M,v-=M,v===0){C=!0;break}}if(n[S++]=a[_++],--p===1){C=!0;break}x--}while(w>=ky||M>=ky);if(C)break;x<0&&(x=0),x+=2}if(t=x,t<1&&(t=1),p===1){for(g=0;g<v;g++)n[S+g]=n[b+g];n[S+v]=a[_]}else{if(p===0)throw new Error;for(g=0;g<p;g++)n[S+g]=a[_+g]}}function h(f,p,m,v){var g=0;for(g=0;g<v;g++)a[g]=n[m+g];var _=f+p-1,b=v-1,S=m+v-1,x=0,w=0;if(n[S--]=n[_--],--p===0){for(x=S-(v-1),g=0;g<v;g++)n[x+g]=a[g];return}if(v===1){for(S-=p,_-=p,w=S+1,x=_+1,g=p-1;g>=0;g--)n[w+g]=n[x+g];n[S]=a[b];return}for(var M=t;;){var C=0,A=0,T=!1;do if(e(a[b],n[_])<0){if(n[S--]=n[_--],C++,A=0,--p===0){T=!0;break}}else if(n[S--]=a[b--],A++,C=0,--v===1){T=!0;break}while((C|A)<M);if(T)break;do{if(C=p-D3(a[b],n,f,p,p-1,e),C!==0){for(S-=C,_-=C,p-=C,w=S+1,x=_+1,g=C-1;g>=0;g--)n[w+g]=n[x+g];if(p===0){T=!0;break}}if(n[S--]=a[b--],--v===1){T=!0;break}if(A=v-P3(n[_],a,0,v,v-1,e),A!==0){for(S-=A,b-=A,v-=A,w=S+1,x=b+1,g=0;g<A;g++)n[w+g]=a[x+g];if(v<=1){T=!0;break}}if(n[S--]=n[_--],--p===0){T=!0;break}M--}while(C>=ky||A>=ky);if(T)break;M<0&&(M=0),M+=2}if(t=M,t<1&&(t=1),v===1){for(S-=p,_-=p,w=S+1,x=_+1,g=p-1;g>=0;g--)n[w+g]=n[x+g];n[S]=a[b]}else{if(v===0)throw new Error;for(x=S-(v-1),g=0;g<v;g++)n[x+g]=a[g]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:o}}function h2(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var s=0;if(i<hZ){s=AF(n,t,r,e),EF(n,t,r,t+s,e);return}var a=Rke(n,e),o=Eke(i);do{if(s=AF(n,t,r,e),s<o){var l=i;l>o&&(l=o),EF(n,t,t+l,t+s,e),s=l}a.pushRun(t,s),a.mergeRuns(),i-=s,t+=s}while(i!==0);a.forceMergeRuns()}}var Ho=1,y1=2,qm=4,IF=!1;function L3(){IF||(IF=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function RF(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var Pke=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=RF}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,s=t.length;i<s;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,h2(r,RF)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var s=i,a=e;s;)s.parent=a,s.updateTransform(),t.push(s),a=s,s=s.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var c=o[l];e.__dirty&&(c.__dirty|=Ho),this._updateAndAddDisplayable(c,t,r)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(L3(),u.z=0),isNaN(u.z2)&&(L3(),u.z2=0),isNaN(u.zlevel)&&(L3(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,t,r);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=Di(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const Dke=Pke;var pZ;pZ=kr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const qR=pZ;var p2={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-p2.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?p2.bounceIn(n*2)*.5:p2.bounceOut(n*2-1)*.5+.5}};const mZ=p2;var ex=Math.pow,$f=Math.sqrt,IC=1e-8,vZ=1e-4,PF=$f(3),tx=1/3,$c=Yg(),bl=Yg(),Lv=Yg();function Nf(n){return n>-IC&&n<IC}function gZ(n){return n>IC||n<-IC}function Qs(n,e,t,r,i){var s=1-i;return s*s*(s*n+3*i*e)+i*i*(i*r+3*s*t)}function DF(n,e,t,r,i){var s=1-i;return 3*(((e-n)*s+2*(t-e)*i)*s+(r-t)*i*i)}function yZ(n,e,t,r,i,s){var a=r+3*(e-t)-n,o=3*(t-e*2+n),l=3*(e-n),c=n-i,u=o*o-3*a*l,d=o*l-9*a*c,h=l*l-3*o*c,f=0;if(Nf(u)&&Nf(d))if(Nf(o))s[0]=0;else{var p=-l/o;p>=0&&p<=1&&(s[f++]=p)}else{var m=d*d-4*u*h;if(Nf(m)){var v=d/u,p=-o/a+v,g=-v/2;p>=0&&p<=1&&(s[f++]=p),g>=0&&g<=1&&(s[f++]=g)}else if(m>0){var _=$f(m),b=u*o+1.5*a*(-d+_),S=u*o+1.5*a*(-d-_);b<0?b=-ex(-b,tx):b=ex(b,tx),S<0?S=-ex(-S,tx):S=ex(S,tx);var p=(-o-(b+S))/(3*a);p>=0&&p<=1&&(s[f++]=p)}else{var x=(2*u*o-3*a*d)/(2*$f(u*u*u)),w=Math.acos(x)/3,M=$f(u),C=Math.cos(w),p=(-o-2*M*C)/(3*a),g=(-o+M*(C+PF*Math.sin(w)))/(3*a),A=(-o+M*(C-PF*Math.sin(w)))/(3*a);p>=0&&p<=1&&(s[f++]=p),g>=0&&g<=1&&(s[f++]=g),A>=0&&A<=1&&(s[f++]=A)}}return f}function bZ(n,e,t,r,i){var s=6*t-12*e+6*n,a=9*e+3*r-3*n-9*t,o=3*e-3*n,l=0;if(Nf(a)){if(gZ(s)){var c=-o/s;c>=0&&c<=1&&(i[l++]=c)}}else{var u=s*s-4*a*o;if(Nf(u))i[0]=-s/(2*a);else if(u>0){var d=$f(u),c=(-s+d)/(2*a),h=(-s-d)/(2*a);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function RC(n,e,t,r,i,s){var a=(e-n)*i+n,o=(t-e)*i+e,l=(r-t)*i+t,c=(o-a)*i+a,u=(l-o)*i+o,d=(u-c)*i+c;s[0]=n,s[1]=a,s[2]=c,s[3]=d,s[4]=d,s[5]=u,s[6]=l,s[7]=r}function Lke(n,e,t,r,i,s,a,o,l,c,u){var d,h=.005,f=1/0,p,m,v,g;$c[0]=l,$c[1]=c;for(var _=0;_<1;_+=.05)bl[0]=Qs(n,t,i,a,_),bl[1]=Qs(e,r,s,o,_),v=Rv($c,bl),v<f&&(d=_,f=v);f=1/0;for(var b=0;b<32&&!(h<vZ);b++)p=d-h,m=d+h,bl[0]=Qs(n,t,i,a,p),bl[1]=Qs(e,r,s,o,p),v=Rv(bl,$c),p>=0&&v<f?(d=p,f=v):(Lv[0]=Qs(n,t,i,a,m),Lv[1]=Qs(e,r,s,o,m),g=Rv(Lv,$c),m<=1&&g<f?(d=m,f=g):h*=.5);return u&&(u[0]=Qs(n,t,i,a,d),u[1]=Qs(e,r,s,o,d)),$f(f)}function kke(n,e,t,r,i,s,a,o,l){for(var c=n,u=e,d=0,h=1/l,f=1;f<=l;f++){var p=f*h,m=Qs(n,t,i,a,p),v=Qs(e,r,s,o,p),g=m-c,_=v-u;d+=Math.sqrt(g*g+_*_),c=m,u=v}return d}function ya(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function LF(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function Oke(n,e,t,r,i){var s=n-2*e+t,a=2*(e-n),o=n-r,l=0;if(Nf(s)){if(gZ(a)){var c=-o/a;c>=0&&c<=1&&(i[l++]=c)}}else{var u=a*a-4*s*o;if(Nf(u)){var c=-a/(2*s);c>=0&&c<=1&&(i[l++]=c)}else if(u>0){var d=$f(u),c=(-a+d)/(2*s),h=(-a-d)/(2*s);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function _Z(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function PC(n,e,t,r,i){var s=(e-n)*r+n,a=(t-e)*r+e,o=(a-s)*r+s;i[0]=n,i[1]=s,i[2]=o,i[3]=o,i[4]=a,i[5]=t}function Nke(n,e,t,r,i,s,a,o,l){var c,u=.005,d=1/0;$c[0]=a,$c[1]=o;for(var h=0;h<1;h+=.05){bl[0]=ya(n,t,i,h),bl[1]=ya(e,r,s,h);var f=Rv($c,bl);f<d&&(c=h,d=f)}d=1/0;for(var p=0;p<32&&!(u<vZ);p++){var m=c-u,v=c+u;bl[0]=ya(n,t,i,m),bl[1]=ya(e,r,s,m);var f=Rv(bl,$c);if(m>=0&&f<d)c=m,d=f;else{Lv[0]=ya(n,t,i,v),Lv[1]=ya(e,r,s,v);var g=Rv(Lv,$c);v<=1&&g<d?(c=v,d=g):u*=.5}}return l&&(l[0]=ya(n,t,i,c),l[1]=ya(e,r,s,c)),$f(d)}function Bke(n,e,t,r,i,s,a){for(var o=n,l=e,c=0,u=1/a,d=1;d<=a;d++){var h=d*u,f=ya(n,t,i,h),p=ya(e,r,s,h),m=f-o,v=p-l;c+=Math.sqrt(m*m+v*v),o=f,l=p}return c}var Fke=/cubic-bezier\(([0-9,\.e ]+)\)/;function SZ(n){var e=n&&Fke.exec(n);if(e){var t=e[1].split(","),r=+Kc(t[0]),i=+Kc(t[1]),s=+Kc(t[2]),a=+Kc(t[3]);if(isNaN(r+i+s+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:yZ(0,r,s,1,l,o)&&Qs(0,i,a,1,o[0])}}}var zke=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||bo,this.ondestroy=e.ondestroy||bo,this.onrestart=e.onrestart||bo,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,s=i/r;s<0&&(s=0),s=Math.min(s,1);var a=this.easingFunc,o=a?a(s):s;if(this.onframe(o),s===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=li(e)?e:mZ[e]||SZ(e)},n}();const Uke=zke;var xZ=function(){function n(e){this.value=e}return n}(),Hke=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new xZ(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),Vke=function(){function n(e){this._list=new Hke,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,s=null;if(i[e]==null){var a=r.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=r.head;r.remove(l),delete i[l.key],s=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new xZ(t),o.key=e,r.insertEntry(o),i[e]=o}return s},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const nS=Vke;var kF={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function G1(n){return n=Math.round(n),n<0?0:n>255?255:n}function OF(n){return n<0?0:n>1?1:n}function k3(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?G1(parseFloat(e)/100*255):G1(parseInt(e,10))}function W1(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?OF(parseFloat(e)/100):OF(parseFloat(e))}function O3(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function cl(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function KR(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var wZ=new nS(20),nx=null;function V0(n,e){nx&&KR(nx,e),nx=wZ.put(n,nx||e.slice())}function Up(n,e){if(n){e=e||[];var t=wZ.get(n);if(t)return KR(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in kF)return KR(e,kF[r]),V0(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var s=parseInt(r.slice(1,4),16);if(!(s>=0&&s<=4095)){cl(e,0,0,0,1);return}return cl(e,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),V0(n,e),e}else if(i===7||i===9){var s=parseInt(r.slice(1,7),16);if(!(s>=0&&s<=16777215)){cl(e,0,0,0,1);return}return cl(e,(s&16711680)>>16,(s&65280)>>8,s&255,i===9?parseInt(r.slice(7),16)/255:1),V0(n,e),e}return}var a=r.indexOf("("),o=r.indexOf(")");if(a!==-1&&o+1===i){var l=r.substr(0,a),c=r.substr(a+1,o-(a+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?cl(e,+c[0],+c[1],+c[2],1):cl(e,0,0,0,1);u=W1(c.pop());case"rgb":if(c.length>=3)return cl(e,k3(c[0]),k3(c[1]),k3(c[2]),c.length===3?u:W1(c[3])),V0(n,e),e;cl(e,0,0,0,1);return;case"hsla":if(c.length!==4){cl(e,0,0,0,1);return}return c[3]=W1(c[3]),NF(c,e),V0(n,e),e;case"hsl":if(c.length!==3){cl(e,0,0,0,1);return}return NF(c,e),V0(n,e),e;default:return}}cl(e,0,0,0,1)}}function NF(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=W1(n[1]),i=W1(n[2]),s=i<=.5?i*(r+1):i+r-i*r,a=i*2-s;return e=e||[],cl(e,G1(O3(a,s,t+1/3)*255),G1(O3(a,s,t)*255),G1(O3(a,s,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function BF(n,e){var t=Up(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return ML(t,t.length===4?"rgba":"rgb")}}function ML(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function DC(n,e){var t=Up(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var FF=new nS(100);function zF(n){if(ur(n)){var e=FF.get(n);return e||(e=BF(n,-.1),FF.put(n,e)),e}else if(wT(n)){var t=vn({},n);return t.colorStops=Zr(n.colorStops,function(r){return{offset:r.offset,color:BF(r.color,-.1)}}),t}return n}function $ke(n){return n.type==="linear"}function Gke(n){return n.type==="radial"}(function(){return kr.hasGlobalWindow&&li(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var YR=Array.prototype.slice;function qu(n,e,t){return(e-n)*t+n}function N3(n,e,t,r){for(var i=e.length,s=0;s<i;s++)n[s]=qu(e[s],t[s],r);return n}function Wke(n,e,t,r){for(var i=e.length,s=i&&e[0].length,a=0;a<i;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=qu(e[a][o],t[a][o],r)}return n}function rx(n,e,t,r){for(var i=e.length,s=0;s<i;s++)n[s]=e[s]+t[s]*r;return n}function UF(n,e,t,r){for(var i=e.length,s=i&&e[0].length,a=0;a<i;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=e[a][o]+t[a][o]*r}return n}function qke(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,s=Math.min(t,r),a=i[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(t,r);o++)i.push({offset:a.offset,color:a.color.slice()})}function Kke(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var s=r.length,a=i.length;if(s!==a){var o=s>a;if(o)r.length=a;else for(var l=s;l<a;l++)r.push(t===1?i[l]:YR.call(i[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var u=0;u<c;u++)isNaN(r[l][u])&&(r[l][u]=i[l][u])}}function m2(n){if(Mo(n)){var e=n.length;if(Mo(n[0])){for(var t=[],r=0;r<e;r++)t.push(YR.call(n[r]));return t}return YR.call(n)}return n}function v2(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function Yke(n){return Mo(n&&n[0])?2:1}var ix=0,g2=1,CZ=2,b1=3,XR=4,jR=5,HF=6;function VF(n){return n===XR||n===jR}function sx(n){return n===g2||n===CZ}var Oy=[0,0,0,0],Xke=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,s=i.length,a=!1,o=HF,l=t;if(Mo(t)){var c=Yke(t);o=c,(c===1&&!gs(t[0])||c===2&&!gs(t[0][0]))&&(a=!0)}else if(gs(t)&&!GLe(t))o=ix;else if(ur(t))if(!isNaN(+t))o=ix;else{var u=Up(t);u&&(l=u,o=b1)}else if(wT(t)){var d=vn({},l);d.colorStops=Zr(t.colorStops,function(f){return{offset:f.offset,color:Up(f.color)}}),$ke(t)?o=XR:Gke(t)&&(o=jR),l=d}s===0?this.valType=o:(o!==this.valType||o===HF)&&(a=!0),this.discrete=this.discrete||a;var h={time:e,value:l,rawValue:t,percent:0};return r&&(h.easing=r,h.easingFunc=li(r)?r:mZ[r]||SZ(r)),i.push(h),h},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(m,v){return m.time-v.time});for(var i=this.valType,s=r.length,a=r[s-1],o=this.discrete,l=sx(i),c=VF(i),u=0;u<s;u++){var d=r[u],h=d.value,f=a.value;d.percent=d.time/e,o||(l&&u!==s-1?Kke(h,f,i):c&&qke(h.colorStops,f.colorStops))}if(!o&&i!==jR&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var p=r[0].value,u=0;u<s;u++)i===ix?r[u].additiveValue=r[u].value-p:i===b1?r[u].additiveValue=rx([],r[u].value,p,-1):sx(i)&&(r[u].additiveValue=i===g2?rx([],r[u].value,p,-1):UF([],r[u].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",s=this.valType,a=this.keyframes,o=a.length,l=this.propName,c=s===b1,u,d=this._lastFr,h=Math.min,f,p;if(o===1)f=p=a[0];else{if(t<0)u=0;else if(t<this._lastFrP){var m=h(d+1,o-1);for(u=m;u>=0&&!(a[u].percent<=t);u--);u=h(u,o-2)}else{for(u=d;u<o&&!(a[u].percent>t);u++);u=h(u-1,o-2)}p=a[u+1],f=a[u]}if(f&&p){this._lastFr=u,this._lastFrP=t;var v=p.percent-f.percent,g=v===0?1:h((t-f.percent)/v,1);p.easingFunc&&(g=p.easingFunc(g));var _=r?this._additiveValue:c?Oy:e[l];if((sx(s)||c)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=g<1?f.rawValue:p.rawValue;else if(sx(s))s===g2?N3(_,f[i],p[i],g):Wke(_,f[i],p[i],g);else if(VF(s)){var b=f[i],S=p[i],x=s===XR;e[l]={type:x?"linear":"radial",x:qu(b.x,S.x,g),y:qu(b.y,S.y,g),colorStops:Zr(b.colorStops,function(M,C){var A=S.colorStops[C];return{offset:qu(M.offset,A.offset,g),color:v2(N3([],M.color,A.color,g))}}),global:S.global},x?(e[l].x2=qu(b.x2,S.x2,g),e[l].y2=qu(b.y2,S.y2,g)):e[l].r=qu(b.r,S.r,g)}else if(c)N3(_,f[i],p[i],g),r||(e[l]=v2(_));else{var w=qu(f[i],p[i],g);r?this._additiveValue=w:e[l]=w}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===ix?e[r]=e[r]+i:t===b1?(Up(e[r],Oy),rx(Oy,Oy,i,1),e[r]=v2(Oy)):t===g2?rx(e[r],e[r],i,1):t===CZ&&UF(e[r],e[r],i,1)},n}(),jke=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){_L("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,vs(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var s=this._tracks,a=0;a<r.length;a++){var o=r[a],l=s[o];if(!l){l=s[o]=new Xke(o);var c=void 0,u=this._getAdditiveTrack(o);if(u){var d=u.keyframes,h=d[d.length-1];c=h&&h.value,u.valType===b1&&c&&(c=v2(c))}else c=this._target[o];if(c==null)continue;e>0&&l.addKeyframe(0,m2(c),i),this._trackKeys.push(o)}l.addKeyframe(e,m2(t[o]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var s=r[i].getTrack(e);s&&(t=s)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var a=this._trackKeys[s],o=this._tracks[a],l=this._getAdditiveTrack(a),c=o.keyframes,u=c.length;if(o.prepare(i,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var d=c[u-1];d&&(t._target[o.propName]=d.rawValue),o.setFinished()}else r.push(o)}if(r.length||this._force){var h=new Uke({life:i,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var p=t._additiveAnimators;if(p){for(var m=!1,v=0;v<p.length;v++)if(p[v]._clip){m=!0;break}m||(t._additiveAnimators=null)}for(var v=0;v<r.length;v++)r[v].step(t._target,f);var g=t._onframeCbs;if(g)for(var v=0;v<g.length;v++)g[v](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return Zr(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,s=0;s<e.length;s++){var a=r[e[s]];a&&!a.isFinished()&&(t?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,s=0;s<i.length;s++)if(!r[i[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var s=t[i],a=this._tracks[s];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[r?0:o.length-1];l&&(e[s]=m2(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||vs(e);for(var r=0;r<t.length;r++){var i=t[r],s=this._tracks[i];if(s){var a=s.keyframes;if(a.length>1){var o=a.pop();s.addKeyframe(o.time,e[i]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},n}();const TL=jke;function av(){return new Date().getTime()}var Zke=function(n){lr(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=av()-this._pausedTime,i=r-this._time,s=this._head;s;){var a=s.next,o=s.step(r,i);o&&(s.ondestroy(),this.removeClip(s)),s=a}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(qR(r),!t._paused&&t.update())}qR(r)},e.prototype.start=function(){this._running||(this._time=av(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=av(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=av()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new TL(t,r.loop);return this.addAnimator(i),i},e}(bu);const Qke=Zke;var Jke=300,B3=kr.domSupported,F3=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Zr(n,function(i){var s=i.replace("mouse","pointer");return t.hasOwnProperty(s)?s:i});return{mouse:n,touch:e,pointer:r}}(),$F={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},GF=!1;function ZR(n){var e=n.pointerType;return e==="pen"||e==="touch"}function e8e(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function z3(n){n&&(n.zrByTouch=!0)}function t8e(n,e){return fl(n.dom,new n8e(n,e),!0)}function MZ(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var n8e=function(){function n(e,t){this.stopPropagation=bo,this.stopImmediatePropagation=bo,this.preventDefault=bo,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),nc={mousedown:function(n){n=fl(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=fl(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=fl(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=fl(this.dom,n);var e=n.toElement||n.relatedTarget;MZ(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){GF=!0,n=fl(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){GF||(n=fl(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=fl(this.dom,n),z3(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),nc.mousemove.call(this,n),nc.mousedown.call(this,n)},touchmove:function(n){n=fl(this.dom,n),z3(n),this.handler.processGesture(n,"change"),nc.mousemove.call(this,n)},touchend:function(n){n=fl(this.dom,n),z3(n),this.handler.processGesture(n,"end"),nc.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<Jke&&nc.click.call(this,n)},pointerdown:function(n){nc.mousedown.call(this,n)},pointermove:function(n){ZR(n)||nc.mousemove.call(this,n)},pointerup:function(n){nc.mouseup.call(this,n)},pointerout:function(n){ZR(n)||nc.mouseout.call(this,n)}};wt(["click","dblclick","contextmenu"],function(n){nc[n]=function(e){e=fl(this.dom,e),this.trigger(n,e)}});var QR={pointermove:function(n){ZR(n)||QR.mousemove.call(this,n)},pointerup:function(n){QR.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function r8e(n,e){var t=e.domHandlers;kr.pointerEventsSupported?wt(F3.pointer,function(r){y2(e,r,function(i){t[r].call(n,i)})}):(kr.touchEventsSupported&&wt(F3.touch,function(r){y2(e,r,function(i){t[r].call(n,i),e8e(e)})}),wt(F3.mouse,function(r){y2(e,r,function(i){i=xL(i),e.touching||t[r].call(n,i)})}))}function i8e(n,e){kr.pointerEventsSupported?wt($F.pointer,t):kr.touchEventsSupported||wt($F.mouse,t);function t(r){function i(s){s=xL(s),MZ(n,s.target)||(s=t8e(n,s),e.domHandlers[r].call(n,s))}y2(e,r,i,{capture:!0})}}function y2(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,pke(n.domTarget,e,t,r)}function U3(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&mke(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var WF=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),s8e=function(n){lr(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new WF(t,nc),B3&&(i._globalHandlerScope=new WF(document,QR)),r8e(i,i._localHandlerScope),i}return e.prototype.dispose=function(){U3(this._localHandlerScope),B3&&U3(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,B3&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?i8e(this,r):U3(r)}},e}(bu);const a8e=s8e;var TZ=1;kr.hasGlobalWindow&&(TZ=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var LC=TZ,JR=.4,e5="#333",t5="#ccc",o8e="#eee",qF=wL,KF=5e-5;function Dh(n){return n>KF||n<-KF}var Lh=[],$0=[],H3=Pv(),V3=Math.abs,l8e=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return Dh(this.rotation)||Dh(this.x)||Dh(this.y)||Dh(this.scaleX-1)||Dh(this.scaleY-1)||Dh(this.skewX)||Dh(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(qF(r),this.invTransform=null);return}r=r||Pv(),t?this.getLocalTransform(r):qF(r),e&&(t?Dv(r,e,r):yke(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Lh);var r=Lh[0]<0?-1:1,i=Lh[1]<0?-1:1,s=((Lh[0]-r)*t+r)/Lh[0]||0,a=((Lh[1]-i)*t+i)/Lh[1]||0;e[0]*=s,e[1]*=s,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||Pv(),cZ(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),s=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(s),t=Math.sqrt(t),this.skewX=s,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Pv(),Dv($0,e.invTransform,t),t=$0);var r=this.originX,i=this.originY;(r||i)&&(H3[4]=r,H3[5]=i,Dv($0,t,H3),$0[4]-=r,$0[5]-=i,t=$0),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&eu(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&eu(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&V3(e[0]-1)>1e-10&&V3(e[3]-1)>1e-10?Math.sqrt(V3(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){c8e(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,s=e.scaleX,a=e.scaleY,o=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,d=e.y,h=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||i||o||l){var p=r+o,m=i+l;t[4]=-p*s-h*m*a,t[5]=-m*a-f*p*s}else t[4]=t[5]=0;return t[0]=s,t[3]=a,t[1]=f*s,t[2]=h*a,c&&CL(t,t,c),t[4]+=r+u,t[5]+=i+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),jb=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function c8e(n,e){for(var t=0;t<jb.length;t++){var r=jb[t];n[r]=e[r]}}const AL=l8e;var YF={};function Xo(n,e){e=e||r0;var t=YF[e];t||(t=YF[e]=new nS(500));var r=t.get(n);return r==null&&(r=Kg.measureText(n,e).width,t.put(n,r)),r}function XF(n,e,t,r){var i=Xo(n,e),s=EL(e),a=_1(0,i,t),o=Km(0,s,r),l=new xi(a,o,i,s);return l}function AZ(n,e,t,r){var i=((n||"")+"").split(`
`),s=i.length;if(s===1)return XF(i[0],e,t,r);for(var a=new xi(0,0,0,0),o=0;o<i.length;o++){var l=XF(i[o],e,t,r);o===0?a.copy(l):a.union(l)}return a}function _1(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Km(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function EL(n){return Xo("国",n)}function cg(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function EZ(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,s=t.height,a=t.width,o=s/2,l=t.x,c=t.y,u="left",d="top";if(r instanceof Array)l+=cg(r[0],t.width),c+=cg(r[1],t.height),u=null,d=null;else switch(r){case"left":l-=i,c+=o,u="right",d="middle";break;case"right":l+=i+a,c+=o,d="middle";break;case"top":l+=a/2,c-=i,u="center",d="bottom";break;case"bottom":l+=a/2,c+=s+i,u="center";break;case"inside":l+=a/2,c+=o,u="center",d="middle";break;case"insideLeft":l+=i,c+=o,d="middle";break;case"insideRight":l+=a-i,c+=o,u="right",d="middle";break;case"insideTop":l+=a/2,c+=i,u="center";break;case"insideBottom":l+=a/2,c+=s-i,u="center",d="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=a-i,c+=i,u="right";break;case"insideBottomLeft":l+=i,c+=s-i,d="bottom";break;case"insideBottomRight":l+=a-i,c+=s-i,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=c,n.align=u,n.verticalAlign=d,n}var $3="__zr_normal__",G3=jb.concat(["ignore"]),u8e=ah(jb,function(n,e){return n[e]=!0,n},{ignore:!1}),G0={},d8e=new xi(0,0,0,0),IL=function(){function n(e){this.id=nZ(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,s=t.innerTransformable,a=void 0,o=void 0,l=!1;s.parent=i?this:null;var c=!1;if(s.copyTransform(t),r.position!=null){var u=d8e;r.layoutRect?u.copy(r.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(G0,r,u):EZ(G0,r,u),s.x=G0.x,s.y=G0.y,a=G0.align,o=G0.verticalAlign;var d=r.origin;if(d&&r.rotation!=null){var h=void 0,f=void 0;d==="center"?(h=u.width*.5,f=u.height*.5):(h=cg(d[0],u.width),f=cg(d[1],u.height)),c=!0,s.originX=-s.x+h+(i?0:u.x),s.originY=-s.y+f+(i?0:u.y)}}r.rotation!=null&&(s.rotation=r.rotation);var p=r.offset;p&&(s.x+=p[0],s.y+=p[1],c||(s.originX=-p[0],s.originY=-p[1]));var m=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,_=void 0,b=void 0;m&&this.canBeInsideText()?(g=r.insideFill,_=r.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(g),b=!0)):(g=r.outsideFill,_=r.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(g),b=!0)),g=g||"#000",(g!==v.fill||_!==v.stroke||b!==v.autoStroke||a!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=g,v.stroke=_,v.autoStroke=b,v.align=a,v.verticalAlign=o,t.setDefaultTextStyle(v)),t.__dirty|=Ho,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?t5:e5},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Up(t);r||(r=[255,255,255,1]);for(var i=r[3],s=this.__zr.isDarkMode(),a=0;a<3;a++)r[a]=r[a]*i+(s?0:255)*(1-i);return r[3]=1,ML(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},vn(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(mr(e))for(var r=e,i=vs(r),s=0;s<i.length;s++){var a=i[s];this.attrKV(a,e[a])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],s=i.__fromStateTransition;if(!(i.getLoop()||s&&s!==$3)){var a=i.targetName,o=a?t[a]:t;i.saveTo(o)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,G3)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var s=r[i];e[s]!=null&&!(s in t)&&(t[s]=this[s])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState($3,!1,e)},n.prototype.useState=function(e,t,r,i){var s=e===$3,a=this.hasState();if(!(!a&&s)){var o=this.currentStates,l=this.stateTransition;if(!(Di(o,e)>=0&&(t||o.length===1))){var c;if(this.stateProxy&&!s&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!s){_L("State "+e+" not exists.");return}s||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||i);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,h=this._textGuide;return d&&d.useState(e,t,r,u),h&&h.useState(e,t,r,u),s?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ho),c}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],s=this.currentStates,a=e.length,o=a===s.length;if(o){for(var l=0;l<a;l++)if(e[l]!==s[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&i.push(u)}var d=i[a-1],h=!!(d&&d.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,v=this._textGuide;m&&m.useStates(e,t,h),v&&v.useStates(e,t,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ho)}},n.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=Di(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),s=Di(i,e),a=Di(i,t)>=0;s>=0?a?i.splice(s,1):i[s]=t:r&&!a&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var s=e[i];vn(t,s),s.textConfig&&(r=r||{},vn(r,s.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,s,a){var o=!(t&&i);t&&t.textConfig?(this.textConfig=vn({},i?this.textConfig:r.textConfig),vn(this.textConfig,t.textConfig)):o&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,u=0;u<G3.length;u++){var d=G3[u],h=s&&u8e[d];t&&t[d]!=null?h?(c=!0,l[d]=t[d]):this[d]=t[d]:o&&r[d]!=null&&(h?(c=!0,l[d]=r[d]):this[d]=r[d])}if(!s)for(var u=0;u<this.animators.length;u++){var f=this.animators[u],p=f.targetName;f.getLoop()||f.__changeFinalValue(p?(t||r)[p]:t||r)}c&&this._transitionState(e,l,a)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new AL,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),vn(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Ho;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,s=new TL(i,t,r);return e&&(s.targetName=e),this.addAnimator(s,e),s},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var s=i.animators,a=Di(s,e);a>=0&&s.splice(a,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,s=[],a=0;a<i;a++){var o=r[a];!e||e===o.scope?o.stop(t):s.push(o)}return this.animators=s,this},n.prototype.animateTo=function(e,t,r){W3(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){W3(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var s=W3(this,t,r,i),a=0;a<s.length;a++)s[a].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Ho;function t(r,i,s,a){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];o(this,l)}return this[i]},set:function(l){this[s]=l[0],this[a]=l[1],this[i]=l,o(this,l)}});function o(l,c){Object.defineProperty(c,0,{get:function(){return l[s]},set:function(u){l[s]=u}}),Object.defineProperty(c,1,{get:function(){return l[a]},set:function(u){l[a]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();Bd(IL,bu);Bd(IL,AL);function W3(n,e,t,r,i){t=t||{};var s=[];IZ(n,"",n,e,t,r,s,i);var a=s.length,o=!1,l=t.done,c=t.aborted,u=function(){o=!0,a--,a<=0&&(o?l&&l():c&&c())},d=function(){a--,a<=0&&(o?l&&l():c&&c())};a||l&&l(),s.length>0&&t.during&&s[0].during(function(p,m){t.during(m)});for(var h=0;h<s.length;h++){var f=s[h];u&&f.done(u),d&&f.aborted(d),t.force&&f.duration(t.duration),f.start(t.easing)}return s}function q3(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function f8e(n){return Mo(n[0])}function h8e(n,e,t){if(Mo(e[t]))if(Mo(n[t])||(n[t]=[]),To(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),q3(n[t],e[t],r))}else{var i=e[t],s=n[t],a=i.length;if(f8e(i))for(var o=i[0].length,l=0;l<a;l++)s[l]?q3(s[l],i[l],o):s[l]=Array.prototype.slice.call(i[l]);else q3(s,i,a);s.length=i.length}else n[t]=e[t]}function p8e(n,e){return n===e||Mo(n)&&Mo(e)&&m8e(n,e)}function m8e(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function IZ(n,e,t,r,i,s,a,o){for(var l=vs(r),c=i.duration,u=i.delay,d=i.additive,h=i.setToFinal,f=!mr(s),p=n.animators,m=[],v=0;v<l.length;v++){var g=l[v],_=r[g];if(_!=null&&t[g]!=null&&(f||s[g]))if(mr(_)&&!Mo(_)&&!wT(_)){if(e){o||(t[g]=_,n.updateDuringAnimation(e));continue}IZ(n,g,t[g],_,i,s&&s[g],a,o)}else m.push(g);else o||(t[g]=_,n.updateDuringAnimation(e),m.push(g))}var b=m.length;if(!d&&b)for(var S=0;S<p.length;S++){var x=p[S];if(x.targetName===e){var w=x.stopTracks(m);if(w){var M=Di(p,x);p.splice(M,1)}}}if(i.force||(m=yl(m,function(I){return!p8e(r[I],t[I])}),b=m.length),b>0||i.force&&!a.length){var C=void 0,A=void 0,T=void 0;if(o){A={},h&&(C={});for(var S=0;S<b;S++){var g=m[S];A[g]=t[g],h?C[g]=r[g]:t[g]=r[g]}}else if(h){T={};for(var S=0;S<b;S++){var g=m[S];T[g]=m2(t[g]),h8e(t,r,g)}}var x=new TL(t,!1,!1,d?yl(p,function(D){return D.targetName===e}):null);x.targetName=e,i.scope&&(x.scope=i.scope),h&&C&&x.whenWithKeys(0,C,m),T&&x.whenWithKeys(0,T,m),x.whenWithKeys(c??500,o?A:r,m).delay(u||0),n.addAnimator(x,e),a.push(x)}}const RZ=IL;var PZ=function(n){lr(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,s=i.indexOf(r);s>=0&&(i.splice(s,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=Di(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,s=i[r];if(t&&t!==this&&t.parent!==this&&t!==s){i[r]=t,s.parent=null;var a=this.__zr;a&&s.removeSelfFromZr(a),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,s=Di(i,t);return s<0?this:(i.splice(s,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var s=t[i];r&&s.removeSelfFromZr(r),s.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,s=0;s<i.length;s++){var a=i[s];t.call(r,a,s)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var s=this._children[i],a=t.call(r,s);s.isGroup&&!a&&s.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new xi(0,0,0,0),i=t||this._children,s=[],a=null,o=0;o<i.length;o++){var l=i[o];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(s);u?(xi.applyTransform(r,c,u),a=a||r.clone(),a.union(r)):(a=a||c.clone(),a.union(c))}}return a||r},e}(RZ);PZ.prototype.type="group";const lu=PZ;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var b2={},DZ={};function v8e(n){delete DZ[n]}function g8e(n){if(!n)return!1;if(typeof n=="string")return DC(n,1)<JR;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=DC(e[i].color,1);return t/=r,t<JR}return!1}var y8e=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var s=new Dke,a=r.renderer||"canvas";b2[a]||(a=vs(b2)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var o=new b2[a](t,s,r,e),l=r.ssr||o.ssrOnly;this.storage=s,this.painter=o;var c=!kr.node&&!kr.worker&&!l?new a8e(o.getViewportRoot(),o.root):null,u=r.useCoarsePointer,d=u==null||u==="auto"?kr.touchEventsSupported:!!u,h=44,f;d&&(f=Ir(r.pointerSize,h)),this.handler=new Ake(s,o,c,o.root,f),this.animation=new Qke({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=g8e(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,r=av();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=av();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof lu&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,v8e(this.id))},n}();function jF(n,e){var t=new y8e(nZ(),n,e);return DZ[t.id]=t,t}function b8e(n,e){b2[n]=e}var ZF=1e-4,LZ=20;function _8e(n){return n.replace(/^\s+|\s+$/g,"")}function S8e(n,e,t,r){var i=e[0],s=e[1],a=t[0],o=t[1],l=s-i,c=o-a;if(l===0)return c===0?a:(a+o)/2;if(r)if(l>0){if(n<=i)return a;if(n>=s)return o}else{if(n>=i)return a;if(n<=s)return o}else{if(n===i)return a;if(n===s)return o}return(n-i)/l*c+a}function Ts(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return ur(n)?_8e(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function x8e(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),LZ),n=(+n).toFixed(e),t?n:+n}function QF(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return w8e(n)}function w8e(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,s=e.indexOf("."),a=s<0?0:i-1-s;return Math.max(0,a-r)}function C8e(n,e){var t=ah(n,function(f,p){return f+(isNaN(p)?0:p)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=Zr(n,function(f){return(isNaN(f)?0:f)/t*r*100}),s=r*100,a=Zr(i,function(f){return Math.floor(f)}),o=ah(a,function(f,p){return f+p},0),l=Zr(i,function(f,p){return f-a[p]});o<s;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,h=l.length;d<h;++d)l[d]>c&&(c=l[d],u=d);++a[u],l[u]=0,++o}return Zr(a,function(f){return f/r})}function M8e(n,e){var t=Math.max(QF(n),QF(e)),r=n+e;return t>LZ?r:x8e(r,t)}function kZ(n){var e=Math.PI*2;return(n%e+e)%e}function kC(n){return n>-ZF&&n<ZF}var T8e=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function MT(n){if(n instanceof Date)return n;if(ur(n)){var e=T8e.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function OC(n){var e=parseFloat(n);return e==n&&(e!==0||!ur(n)||n.indexOf("x")<=0)?e:NaN}function A8e(n){return!isNaN(OC(n))}function OZ(){return Math.round(Math.random()*9)}function NZ(n,e){return e===0?n:NZ(e,n%e)}function JF(n,e){return n==null?e:e==null?n:n*e/NZ(n,e)}function uo(n){throw new Error(n)}var BZ="series\0",E8e="\0_ec_\0";function Wa(n){return n instanceof Array?n:n==null?[]:[n]}function n5(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var s=t[r];!n.emphasis[e].hasOwnProperty(s)&&n[e].hasOwnProperty(s)&&(n.emphasis[e][s]=n[e][s])}}}var e9=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function TT(n){return mr(n)&&!Jn(n)&&!(n instanceof Date)?n.value:n}function I8e(n){return mr(n)&&!(n instanceof Array)}function R8e(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",s=t==="replaceAll";n=n||[],e=(e||[]).slice();var a=jr();wt(e,function(l,c){if(!mr(l)){e[c]=null;return}});var o=P8e(n,a,t);return(r||i)&&D8e(o,n,a,e),r&&L8e(o,e),r||i?k8e(o,e,i):s&&O8e(o,e),N8e(o),o}function P8e(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var s=n[i];s&&s.id!=null&&e.set(s.id,i),r.push({existing:t==="replaceMerge"||Zb(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return r}function D8e(n,e,t,r){wt(r,function(i,s){if(!(!i||i.id==null)){var a=q1(i.id),o=t.get(a);if(o!=null){var l=n[o];wd(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=e[o],r[s]=null}}})}function L8e(n,e){wt(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var s=n[i].existing;if(!n[i].newOption&&s&&(s.id==null||t.id==null)&&!Zb(t)&&!Zb(s)&&FZ("name",s,t)){n[i].newOption=t,e[r]=null;return}}})}function k8e(n,e,t){wt(e,function(r){if(r){for(var i,s=0;(i=n[s])&&(i.newOption||Zb(i.existing)||i.existing&&r.id!=null&&!FZ("id",r,i.existing));)s++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),s++}})}function O8e(n,e){wt(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function N8e(n){var e=jr();wt(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),wt(n,function(t){var r=t.newOption;wd(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),wt(n,function(t,r){var i=t.existing,s=t.newOption,a=t.keyInfo;if(mr(s)){if(a.name=s.name!=null?q1(s.name):i?i.name:BZ+r,i)a.id=q1(i.id);else if(s.id!=null)a.id=q1(s.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(e.get(a.id))}e.set(a.id,t)}})}function FZ(n,e,t){var r=tu(e[n],null),i=tu(t[n],null);return r!=null&&i!=null&&r===i}function q1(n){return tu(n,"")}function tu(n,e){return n==null?e:ur(n)?n:gs(n)||FR(n)?n+"":e}function RL(n){var e=n.name;return!!(e&&e.indexOf(BZ))}function Zb(n){return n&&n.id!=null&&q1(n.id).indexOf(E8e)===0}function B8e(n,e,t){wt(n,function(r){var i=r.newOption;mr(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=F8e(e,i,r.existing,t))})}function F8e(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function rS(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Jn(e.dataIndex)?Zr(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Jn(e.name)?Zr(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function zs(){var n="__ec_inner_"+z8e++;return function(e){return e[n]||(e[n]={})}}var z8e=OZ();function K3(n,e,t){var r=PL(e,t),i=r.mainTypeSpecified,s=r.queryOptionMap,a=r.others,o=a,l=t?t.defaultMainType:null;return!i&&l&&s.set(l,{}),s.each(function(c,u){var d=iS(n,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[u+"Models"]=d.models,o[u+"Model"]=d.models[0]}),o}function PL(n,e){var t;if(ur(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=jr(),s={},a=!1;return wt(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){s[l]=o;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||e&&e.includeMainTypes&&Di(e.includeMainTypes,u)<0)){a=a||!!u;var h=i.get(u)||i.set(u,{});h[d]=o}}),{mainTypeSpecified:a,queryOptionMap:i,others:s}}var DL={useDefault:!0,enableAll:!1,enableNone:!1};function iS(n,e,t,r){r=r||DL;var i=t.index,s=t.id,a=t.name,o={models:null,specified:i!=null||s!=null||a!=null};if(!o.specified){var l=void 0;return o.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],o}return i==="none"||i===!1?(wd(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(i==="all"&&(wd(r.enableAll,'`"all"` is not a valid value on index option.'),i=s=a=null),o.models=n.queryComponents({mainType:e,index:i,id:s,name:a}),o)}function zZ(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function U8e(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function H8e(n){return n==="auto"?kr.domSupported?"html":"richText":n||"html"}var V8e=".",kh="___EC__COMPONENT__CONTAINER___",UZ="___EC__EXTENDED_CLASS___";function Yc(n){var e={main:"",sub:""};if(n){var t=n.split(V8e);e.main=t[0]||"",e.sub=t[1]||""}return e}function $8e(n){wd(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function G8e(n){return!!(n&&n[UZ])}function LL(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return W8e(r)?i=function(s){lr(a,s);function a(){return s.apply(this,arguments)||this}return a}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},HLe(i,this)),vn(i.prototype,t),i[UZ]=!0,i.extend=this.extend,i.superCall=Y8e,i.superApply=X8e,i.superClass=r,i}}function W8e(n){return li(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function HZ(n,e){n.extend=e.extend}var q8e=Math.round(Math.random()*10);function K8e(n){var e=["__\0is_clz",q8e++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function Y8e(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function X8e(n,e,t){return this.superClass.prototype[e].apply(n,t)}function kL(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){$8e(i),r.prototype.type=i;var s=Yc(i);if(!s.sub)e[s.main]=r;else if(s.sub!==kh){var a=t(s);a[s.sub]=r}}return r},n.getClass=function(r,i,s){var a=e[r];if(a&&a[kh]&&(a=i?a[i]:null),s&&!a)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return a},n.getClassesByMainType=function(r){var i=Yc(r),s=[],a=e[i.main];return a&&a[kh]?wt(a,function(o,l){l!==kh&&s.push(o)}):s.push(a),s},n.hasClass=function(r){var i=Yc(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return wt(e,function(i,s){r.push(s)}),r},n.hasSubTypes=function(r){var i=Yc(r),s=e[i.main];return s&&s[kh]};function t(r){var i=e[r.main];return(!i||!i[kh])&&(i=e[r.main]={},i[kh]=!0),i}}function Qb(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,s){for(var a={},o=0;o<n.length;o++){var l=n[o][1];if(!(i&&Di(i,l)>=0||s&&Di(s,l)<0)){var c=r.getShallow(l,e);c!=null&&(a[n[o][0]]=c)}}return a}}var j8e=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Z8e=Qb(j8e),Q8e=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return Z8e(this,e,t)},n}(),r5=new nS(50);function J8e(n){if(typeof n=="string"){var e=r5.get(n);return e&&e.image}else return n}function VZ(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var s=r5.get(n),a={hostEl:t,cb:r,cbPayload:i};return s?(e=s.image,!AT(e)&&s.pending.push(a)):(e=Kg.loadImage(n,t9,t9),e.__zrImageSrc=n,r5.put(n,e.__cachedImgObj={image:e,pending:[a]})),e}else return n;else return e}function t9(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function AT(n){return n&&n.width&&n.height}var Y3=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function eOe(n,e,t,r,i,s){if(!t){n.text="",n.isTruncated=!1;return}var a=(e+"").split(`
`);s=$Z(t,r,i,s);for(var o=!1,l={},c=0,u=a.length;c<u;c++)GZ(l,a[c],s),a[c]=l.textLine,o=o||l.isTruncated;n.text=a.join(`
`),n.isTruncated=o}function $Z(n,e,t,r){r=r||{};var i=vn({},r);i.font=e,t=Ir(t,"..."),i.maxIterations=Ir(r.maxIterations,2);var s=i.minChar=Ir(r.minChar,0);i.cnCharWidth=Xo("国",e);var a=i.ascCharWidth=Xo("a",e);i.placeholder=Ir(r.placeholder,"");for(var o=n=Math.max(0,n-1),l=0;l<s&&o>=a;l++)o-=a;var c=Xo(t,e);return c>o&&(t="",c=0),o=n-c,i.ellipsis=t,i.ellipsisWidth=c,i.contentWidth=o,i.containerWidth=n,i}function GZ(n,e,t){var r=t.containerWidth,i=t.font,s=t.contentWidth;if(!r){n.textLine="",n.isTruncated=!1;return}var a=Xo(e,i);if(a<=r){n.textLine=e,n.isTruncated=!1;return}for(var o=0;;o++){if(a<=s||o>=t.maxIterations){e+=t.ellipsis;break}var l=o===0?tOe(e,s,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*s/a):0;e=e.substr(0,l),a=Xo(e,i)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function tOe(n,e,t,r){for(var i=0,s=0,a=n.length;s<a&&i<e;s++){var o=n.charCodeAt(s);i+=0<=o&&o<=127?t:r}return s}function nOe(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,s=t==="truncate",a=EL(i),o=Ir(e.lineHeight,a),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=!1,d=e.width,h;d!=null&&(t==="break"||t==="breakAll")?h=n?WZ(n,e.font,d,t==="breakAll",0).lines:[]:h=n?n.split(`
`):[];var f=h.length*o,p=Ir(e.height,f);if(f>p&&c){var m=Math.floor(p/o);u=u||h.length>m,h=h.slice(0,m)}if(n&&s&&d!=null)for(var v=$Z(d,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),g={},_=0;_<h.length;_++)GZ(g,h[_],v),h[_]=g.textLine,u=u||g.isTruncated;for(var b=p,S=0,_=0;_<h.length;_++)S=Math.max(Xo(h[_],i),S);d==null&&(d=S);var x=S;return r&&(b+=r[0]+r[2],x+=r[1]+r[3],d+=r[1]+r[3]),l&&(x=d),{lines:h,height:p,outerWidth:x,outerHeight:b,lineHeight:o,calculatedLineHeight:a,contentWidth:S,contentHeight:f,width:d,isTruncated:u}}var rOe=function(){function n(){}return n}(),n9=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),iOe=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function sOe(n,e){var t=new iOe;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,s=e.overflow,a=(s==="break"||s==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:s==="breakAll"}:null,o=Y3.lastIndex=0,l;(l=Y3.exec(n))!=null;){var c=l.index;c>o&&X3(t,n.substring(o,c),e,a),X3(t,l[2],e,a,l[1]),o=Y3.lastIndex}o<n.length&&X3(t,n.substring(o,n.length),e,a);var u=[],d=0,h=0,f=e.padding,p=s==="truncate",m=e.lineOverflow==="truncate",v={};function g(W,q,Z){W.width=q,W.lineHeight=Z,d+=Z,h=Math.max(h,q)}e:for(var _=0;_<t.lines.length;_++){for(var b=t.lines[_],S=0,x=0,w=0;w<b.tokens.length;w++){var M=b.tokens[w],C=M.styleName&&e.rich[M.styleName]||{},A=M.textPadding=C.padding,T=A?A[1]+A[3]:0,I=M.font=C.font||e.font;M.contentHeight=EL(I);var D=Ir(C.height,M.contentHeight);if(M.innerHeight=D,A&&(D+=A[0]+A[2]),M.height=D,M.lineHeight=V1(C.lineHeight,e.lineHeight,D),M.align=C&&C.align||e.align,M.verticalAlign=C&&C.verticalAlign||"middle",m&&i!=null&&d+M.lineHeight>i){var B=t.lines.length;w>0?(b.tokens=b.tokens.slice(0,w),g(b,x,S),t.lines=t.lines.slice(0,_+1)):t.lines=t.lines.slice(0,_),t.isTruncated=t.isTruncated||t.lines.length<B;break e}var O=C.width,H=O==null||O==="auto";if(typeof O=="string"&&O.charAt(O.length-1)==="%")M.percentWidth=O,u.push(M),M.contentWidth=Xo(M.text,I);else{if(H){var L=C.backgroundColor,z=L&&L.image;z&&(z=J8e(z),AT(z)&&(M.width=Math.max(M.width,z.width*D/z.height)))}var k=p&&r!=null?r-x:null;k!=null&&k<M.width?!H||k<T?(M.text="",M.width=M.contentWidth=0):(eOe(v,M.text,k-T,I,e.ellipsis,{minChar:e.truncateMinChar}),M.text=v.text,t.isTruncated=t.isTruncated||v.isTruncated,M.width=M.contentWidth=Xo(M.text,I)):M.contentWidth=Xo(M.text,I)}M.width+=T,x+=M.width,C&&(S=Math.max(S,M.lineHeight))}g(b,x,S)}t.outerWidth=t.width=Ir(r,h),t.outerHeight=t.height=Ir(i,d),t.contentHeight=d,t.contentWidth=h,f&&(t.outerWidth+=f[1]+f[3],t.outerHeight+=f[0]+f[2]);for(var _=0;_<u.length;_++){var M=u[_],F=M.percentWidth;M.width=parseInt(F,10)/100*t.width}return t}function X3(n,e,t,r,i){var s=e==="",a=i&&t.rich[i]||{},o=n.lines,l=a.font||t.font,c=!1,u,d;if(r){var h=a.padding,f=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=cg(a.width,r.width)+f;o.length>0&&p+r.accumWidth>r.width&&(u=e.split(`
`),c=!0),r.accumWidth=p}else{var m=WZ(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=m.accumWidth+f,d=m.linesWidths,u=m.lines}}else u=e.split(`
`);for(var v=0;v<u.length;v++){var g=u[v],_=new rOe;if(_.styleName=i,_.text=g,_.isLineHolder=!g&&!s,typeof a.width=="number"?_.width=a.width:_.width=d?d[v]:Xo(g,l),!v&&!c){var b=(o[o.length-1]||(o[0]=new n9)).tokens,S=b.length;S===1&&b[0].isLineHolder?b[0]=_:(g||!S||s)&&b.push(_)}else o.push(new n9([_]))}}function aOe(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var oOe=ah(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function lOe(n){return aOe(n)?!!oOe[n]:!0}function WZ(n,e,t,r,i){for(var s=[],a=[],o="",l="",c=0,u=0,d=0;d<n.length;d++){var h=n.charAt(d);if(h===`
`){l&&(o+=l,u+=c),s.push(o),a.push(u),o="",l="",c=0,u=0;continue}var f=Xo(h,e),p=r?!1:!lOe(h);if(s.length?u+f>t:i+u+f>t){u?(o||l)&&(p?(o||(o=l,l="",c=0,u=c),s.push(o),a.push(u-c),l+=h,c+=f,o="",u=c):(l&&(o+=l,l="",c=0),s.push(o),a.push(u),o=h,u=f)):p?(s.push(l),a.push(c),l=h,c=f):(s.push(h),a.push(f));continue}u+=f,p?(l+=h,c+=f):(l&&(o+=l,l="",c=0),o+=h)}return!s.length&&!o&&(o=n,l="",c=0),l&&(o+=l),o&&(s.push(o),a.push(u)),s.length===1&&(u+=i),{accumWidth:u,lines:s,linesWidths:a}}var i5="__zr_style_"+Math.round(Math.random()*10),Hp={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},ET={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Hp[i5]=!0;var r9=["z","z2","invisible"],cOe=["invisible"],uOe=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=vs(t),i=0;i<r.length;i++){var s=r[i];s==="style"?this.useStyle(t[s]):n.prototype.attrKV.call(this,s,t[s])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,s){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&dOe(this,t,r)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),s=this.getBoundingRect();return s.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),s=this.style,a=s.shadowBlur||0,o=s.shadowOffsetX||0,l=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new xi(0,0,0,0)),r?xi.applyTransform(t,i,r):t.copy(i),(a||o||l)&&(t.width+=a*2+Math.abs(o),t.height+=a*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-a),t.y=Math.min(t.y,t.y+l-a));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new xi(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:vn(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=y1,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&y1)},e.prototype.styleUpdated=function(){this.__dirty&=~y1},e.prototype.createStyle=function(t){return CT(Hp,t)},e.prototype.useStyle=function(t){t[i5]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[i5]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,r9)},e.prototype._applyStateObj=function(t,r,i,s,a,o){n.prototype._applyStateObj.call(this,t,r,i,s,a,o);var l=!(r&&s),c;if(r&&r.style?a?s?c=r.style:(c=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),s?this.style:i.style),this._mergeStyle(c,r.style)):l&&(c=i.style),c)if(a){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=vs(u),h=0;h<d.length;h++){var f=d[h];f in c&&(c[f]=c[f],this.style[f]=u[f])}for(var p=vs(c),h=0;h<p.length;h++){var f=p[h];this.style[f]=this.style[f]}this._transitionState(t,{style:c},o,this.getAnimationStyleProps())}else this.useStyle(c);for(var m=this.__inHover?cOe:r9,h=0;h<m.length;h++){var f=m[h];r&&r[f]!=null?this[f]=r[f]:l&&i[f]!=null&&(this[f]=i[f])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,s=0;s<t.length;s++){var a=t[s];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return vn(t,r),t},e.prototype.getAnimationStyleProps=function(){return ET},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Ho|y1}(),e}(RZ),j3=new xi(0,0,0,0),Z3=new xi(0,0,0,0);function dOe(n,e,t){return j3.copy(n.getBoundingRect()),n.transform&&j3.applyTransform(n.transform),Z3.width=e,Z3.height=t,!j3.intersect(Z3)}const sS=uOe;var _l=Math.min,Sl=Math.max,Q3=Math.sin,J3=Math.cos,Oh=Math.PI*2,ax=Yg(),ox=Yg(),lx=Yg();function i9(n,e,t,r,i,s){i[0]=_l(n,t),i[1]=_l(e,r),s[0]=Sl(n,t),s[1]=Sl(e,r)}var s9=[],a9=[];function fOe(n,e,t,r,i,s,a,o,l,c){var u=bZ,d=Qs,h=u(n,t,i,a,s9);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var f=0;f<h;f++){var p=d(n,t,i,a,s9[f]);l[0]=_l(p,l[0]),c[0]=Sl(p,c[0])}h=u(e,r,s,o,a9);for(var f=0;f<h;f++){var m=d(e,r,s,o,a9[f]);l[1]=_l(m,l[1]),c[1]=Sl(m,c[1])}l[0]=_l(n,l[0]),c[0]=Sl(n,c[0]),l[0]=_l(a,l[0]),c[0]=Sl(a,c[0]),l[1]=_l(e,l[1]),c[1]=Sl(e,c[1]),l[1]=_l(o,l[1]),c[1]=Sl(o,c[1])}function hOe(n,e,t,r,i,s,a,o){var l=_Z,c=ya,u=Sl(_l(l(n,t,i),1),0),d=Sl(_l(l(e,r,s),1),0),h=c(n,t,i,u),f=c(e,r,s,d);a[0]=_l(n,i,h),a[1]=_l(e,s,f),o[0]=Sl(n,i,h),o[1]=Sl(e,s,f)}function pOe(n,e,t,r,i,s,a,o,l){var c=iv,u=sv,d=Math.abs(i-s);if(d%Oh<1e-4&&d>1e-4){o[0]=n-t,o[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(ax[0]=J3(i)*t+n,ax[1]=Q3(i)*r+e,ox[0]=J3(s)*t+n,ox[1]=Q3(s)*r+e,c(o,ax,ox),u(l,ax,ox),i=i%Oh,i<0&&(i=i+Oh),s=s%Oh,s<0&&(s=s+Oh),i>s&&!a?s+=Oh:i<s&&a&&(i+=Oh),a){var h=s;s=i,i=h}for(var f=0;f<s;f+=Math.PI/2)f>i&&(lx[0]=J3(f)*t+n,lx[1]=Q3(f)*r+e,c(o,lx,o),u(l,lx,l))}var si={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Nh=[],Bh=[],Pc=[],Kd=[],Dc=[],Lc=[],eE=Math.min,tE=Math.max,Fh=Math.cos,zh=Math.sin,Eu=Math.abs,s5=Math.PI,xf=s5*2,nE=typeof Float32Array<"u",Ny=[];function rE(n){var e=Math.round(n/s5*1e8)/1e8;return e%2*s5}function qZ(n,e){var t=rE(n[0]);t<0&&(t+=xf);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=xf?i=t+xf:e&&t-i>=xf?i=t-xf:!e&&t>i?i=t+(xf-rE(t-i)):e&&t<i&&(i=t-(xf-rE(i-t))),n[0]=t,n[1]=i}var ug=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Eu(r/LC/e)||0,this._uy=Eu(r/LC/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(si.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Eu(e-this._xi),i=Eu(t-this._yi),s=r>this._ux||i>this._uy;if(this.addData(si.L,e,t),this._ctx&&s&&this._ctx.lineTo(e,t),s)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var a=r*r+i*i;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,s,a){return this._drawPendingPt(),this.addData(si.C,e,t,r,i,s,a),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,s,a),this._xi=s,this._yi=a,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(si.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,s,a){this._drawPendingPt(),Ny[0]=i,Ny[1]=s,qZ(Ny,a),i=Ny[0],s=Ny[1];var o=s-i;return this.addData(si.A,e,t,r,r,i,o,0,a?0:1),this._ctx&&this._ctx.arc(e,t,r,i,s,a),this._xi=Fh(s)*r+e,this._yi=zh(s)*r+t,this},n.prototype.arcTo=function(e,t,r,i,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,s),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(si.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(si.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&nE&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,s=0;s<t;s++)r+=e[s].len();nE&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var s=0;s<t;s++)for(var a=e[s].data,o=0;o<a.length;o++)this.data[i++]=a[o];this._len=i},n.prototype.addData=function(e,t,r,i,s,a,o,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,nE&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){Pc[0]=Pc[1]=Dc[0]=Dc[1]=Number.MAX_VALUE,Kd[0]=Kd[1]=Lc[0]=Lc[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,s=0,a;for(a=0;a<this._len;){var o=e[a++],l=a===1;switch(l&&(t=e[a],r=e[a+1],i=t,s=r),o){case si.M:t=i=e[a++],r=s=e[a++],Dc[0]=i,Dc[1]=s,Lc[0]=i,Lc[1]=s;break;case si.L:i9(t,r,e[a],e[a+1],Dc,Lc),t=e[a++],r=e[a++];break;case si.C:fOe(t,r,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],Dc,Lc),t=e[a++],r=e[a++];break;case si.Q:hOe(t,r,e[a++],e[a++],e[a],e[a+1],Dc,Lc),t=e[a++],r=e[a++];break;case si.A:var c=e[a++],u=e[a++],d=e[a++],h=e[a++],f=e[a++],p=e[a++]+f;a+=1;var m=!e[a++];l&&(i=Fh(f)*d+c,s=zh(f)*h+u),pOe(c,u,d,h,f,p,m,Dc,Lc),t=Fh(p)*d+c,r=zh(p)*h+u;break;case si.R:i=t=e[a++],s=r=e[a++];var v=e[a++],g=e[a++];i9(i,s,i+v,s+g,Dc,Lc);break;case si.Z:t=i,r=s;break}iv(Pc,Pc,Dc),sv(Kd,Kd,Lc)}return a===0&&(Pc[0]=Pc[1]=Kd[0]=Kd[1]=0),new xi(Pc[0],Pc[1],Kd[0]-Pc[0],Kd[1]-Pc[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,s=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,h=0;h<t;){var f=e[h++],p=h===1;p&&(s=e[h],a=e[h+1],o=s,l=a);var m=-1;switch(f){case si.M:s=o=e[h++],a=l=e[h++];break;case si.L:{var v=e[h++],g=e[h++],_=v-s,b=g-a;(Eu(_)>r||Eu(b)>i||h===t-1)&&(m=Math.sqrt(_*_+b*b),s=v,a=g);break}case si.C:{var S=e[h++],x=e[h++],v=e[h++],g=e[h++],w=e[h++],M=e[h++];m=kke(s,a,S,x,v,g,w,M,10),s=w,a=M;break}case si.Q:{var S=e[h++],x=e[h++],v=e[h++],g=e[h++];m=Bke(s,a,S,x,v,g,10),s=v,a=g;break}case si.A:var C=e[h++],A=e[h++],T=e[h++],I=e[h++],D=e[h++],B=e[h++],O=B+D;h+=1,p&&(o=Fh(D)*T+C,l=zh(D)*I+A),m=tE(T,I)*eE(xf,Math.abs(B)),s=Fh(O)*T+C,a=zh(O)*I+A;break;case si.R:{o=s=e[h++],l=a=e[h++];var H=e[h++],L=e[h++];m=H*2+L*2;break}case si.Z:{var _=o-s,b=l-a;m=Math.sqrt(_*_+b*b),s=o,a=l;break}}m>=0&&(c[d++]=m,u+=m)}return this._pathLen=u,u},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,s=this._uy,a=this._len,o,l,c,u,d,h,f=t<1,p,m,v=0,g=0,_,b=0,S,x;if(!(f&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,m=this._pathLen,_=t*m,!_)))e:for(var w=0;w<a;){var M=r[w++],C=w===1;switch(C&&(c=r[w],u=r[w+1],o=c,l=u),M!==si.L&&b>0&&(e.lineTo(S,x),b=0),M){case si.M:o=c=r[w++],l=u=r[w++],e.moveTo(c,u);break;case si.L:{d=r[w++],h=r[w++];var A=Eu(d-c),T=Eu(h-u);if(A>i||T>s){if(f){var I=p[g++];if(v+I>_){var D=(_-v)/I;e.lineTo(c*(1-D)+d*D,u*(1-D)+h*D);break e}v+=I}e.lineTo(d,h),c=d,u=h,b=0}else{var B=A*A+T*T;B>b&&(S=d,x=h,b=B)}break}case si.C:{var O=r[w++],H=r[w++],L=r[w++],z=r[w++],k=r[w++],F=r[w++];if(f){var I=p[g++];if(v+I>_){var D=(_-v)/I;RC(c,O,L,k,D,Nh),RC(u,H,z,F,D,Bh),e.bezierCurveTo(Nh[1],Bh[1],Nh[2],Bh[2],Nh[3],Bh[3]);break e}v+=I}e.bezierCurveTo(O,H,L,z,k,F),c=k,u=F;break}case si.Q:{var O=r[w++],H=r[w++],L=r[w++],z=r[w++];if(f){var I=p[g++];if(v+I>_){var D=(_-v)/I;PC(c,O,L,D,Nh),PC(u,H,z,D,Bh),e.quadraticCurveTo(Nh[1],Bh[1],Nh[2],Bh[2]);break e}v+=I}e.quadraticCurveTo(O,H,L,z),c=L,u=z;break}case si.A:var W=r[w++],q=r[w++],Z=r[w++],se=r[w++],X=r[w++],ie=r[w++],ae=r[w++],ce=!r[w++],we=Z>se?Z:se,He=Eu(Z-se)>.001,Ge=X+ie,me=!1;if(f){var I=p[g++];v+I>_&&(Ge=X+ie*(_-v)/I,me=!0),v+=I}if(He&&e.ellipse?e.ellipse(W,q,Z,se,ae,X,Ge,ce):e.arc(W,q,we,X,Ge,ce),me)break e;C&&(o=Fh(X)*Z+W,l=zh(X)*se+q),c=Fh(Ge)*Z+W,u=zh(Ge)*se+q;break;case si.R:o=c=r[w],l=u=r[w+1],d=r[w++],h=r[w++];var be=r[w++],oe=r[w++];if(f){var I=p[g++];if(v+I>_){var j=_-v;e.moveTo(d,h),e.lineTo(d+eE(j,be),h),j-=be,j>0&&e.lineTo(d+be,h+eE(j,oe)),j-=oe,j>0&&e.lineTo(d+tE(be-j,0),h+oe),j-=be,j>0&&e.lineTo(d,h+tE(oe-j,0));break e}v+=I}e.rect(d,h,be,oe);break;case si.Z:if(f){var I=p[g++];if(v+I>_){var D=(_-v)/I;e.lineTo(c*(1-D)+o*D,u*(1-D)+l*D);break e}v+=I}e.closePath(),c=o,u=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=si,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();function W0(n,e,t,r,i,s,a){if(i===0)return!1;var o=i,l=0,c=n;if(a>e+o&&a>r+o||a<e-o&&a<r-o||s>n+o&&s>t+o||s<n-o&&s<t-o)return!1;if(n!==t)l=(e-r)/(n-t),c=(n*r-t*e)/(n-t);else return Math.abs(s-n)<=o/2;var u=l*s-a+c,d=u*u/(l*l+1);return d<=o/2*o/2}function mOe(n,e,t,r,i,s,a,o,l,c,u){if(l===0)return!1;var d=l;if(u>e+d&&u>r+d&&u>s+d&&u>o+d||u<e-d&&u<r-d&&u<s-d&&u<o-d||c>n+d&&c>t+d&&c>i+d&&c>a+d||c<n-d&&c<t-d&&c<i-d&&c<a-d)return!1;var h=Lke(n,e,t,r,i,s,a,o,c,u,null);return h<=d/2}function vOe(n,e,t,r,i,s,a,o,l){if(a===0)return!1;var c=a;if(l>e+c&&l>r+c&&l>s+c||l<e-c&&l<r-c&&l<s-c||o>n+c&&o>t+c&&o>i+c||o<n-c&&o<t-c&&o<i-c)return!1;var u=Nke(n,e,t,r,i,s,o,l,null);return u<=c/2}var o9=Math.PI*2;function cx(n){return n%=o9,n<0&&(n+=o9),n}var By=Math.PI*2;function gOe(n,e,t,r,i,s,a,o,l){if(a===0)return!1;var c=a;o-=n,l-=e;var u=Math.sqrt(o*o+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(r-i)%By<1e-4)return!0;if(s){var d=r;r=cx(i),i=cx(d)}else r=cx(r),i=cx(i);r>i&&(i+=By);var h=Math.atan2(l,o);return h<0&&(h+=By),h>=r&&h<=i||h+By>=r&&h+By<=i}function Uh(n,e,t,r,i,s){if(s>e&&s>r||s<e&&s<r||r===e)return 0;var a=(s-e)/(r-e),o=r<e?1:-1;(a===1||a===0)&&(o=r<e?.5:-.5);var l=a*(t-n)+n;return l===i?1/0:l>i?o:0}var Yd=ug.CMD,Hh=Math.PI*2,yOe=1e-4;function bOe(n,e){return Math.abs(n-e)<yOe}var Ba=[-1,-1,-1],ml=[-1,-1];function _Oe(){var n=ml[0];ml[0]=ml[1],ml[1]=n}function SOe(n,e,t,r,i,s,a,o,l,c){if(c>e&&c>r&&c>s&&c>o||c<e&&c<r&&c<s&&c<o)return 0;var u=yZ(e,r,s,o,c,Ba);if(u===0)return 0;for(var d=0,h=-1,f=void 0,p=void 0,m=0;m<u;m++){var v=Ba[m],g=v===0||v===1?.5:1,_=Qs(n,t,i,a,v);_<l||(h<0&&(h=bZ(e,r,s,o,ml),ml[1]<ml[0]&&h>1&&_Oe(),f=Qs(e,r,s,o,ml[0]),h>1&&(p=Qs(e,r,s,o,ml[1]))),h===2?v<ml[0]?d+=f<e?g:-g:v<ml[1]?d+=p<f?g:-g:d+=o<p?g:-g:v<ml[0]?d+=f<e?g:-g:d+=o<f?g:-g)}return d}function xOe(n,e,t,r,i,s,a,o){if(o>e&&o>r&&o>s||o<e&&o<r&&o<s)return 0;var l=Oke(e,r,s,o,Ba);if(l===0)return 0;var c=_Z(e,r,s);if(c>=0&&c<=1){for(var u=0,d=ya(e,r,s,c),h=0;h<l;h++){var f=Ba[h]===0||Ba[h]===1?.5:1,p=ya(n,t,i,Ba[h]);p<a||(Ba[h]<c?u+=d<e?f:-f:u+=s<d?f:-f)}return u}else{var f=Ba[0]===0||Ba[0]===1?.5:1,p=ya(n,t,i,Ba[0]);return p<a?0:s<e?f:-f}}function wOe(n,e,t,r,i,s,a,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);Ba[0]=-l,Ba[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=Hh-1e-4){r=0,i=Hh;var u=s?1:-1;return a>=Ba[0]+n&&a<=Ba[1]+n?u:0}if(r>i){var d=r;r=i,i=d}r<0&&(r+=Hh,i+=Hh);for(var h=0,f=0;f<2;f++){var p=Ba[f];if(p+n>a){var m=Math.atan2(o,p),u=s?1:-1;m<0&&(m=Hh+m),(m>=r&&m<=i||m+Hh>=r&&m+Hh<=i)&&(m>Math.PI/2&&m<Math.PI*1.5&&(u=-u),h+=u)}}return h}function KZ(n,e,t,r,i){for(var s=n.data,a=n.len(),o=0,l=0,c=0,u=0,d=0,h,f,p=0;p<a;){var m=s[p++],v=p===1;switch(m===Yd.M&&p>1&&(t||(o+=Uh(l,c,u,d,r,i))),v&&(l=s[p],c=s[p+1],u=l,d=c),m){case Yd.M:u=s[p++],d=s[p++],l=u,c=d;break;case Yd.L:if(t){if(W0(l,c,s[p],s[p+1],e,r,i))return!0}else o+=Uh(l,c,s[p],s[p+1],r,i)||0;l=s[p++],c=s[p++];break;case Yd.C:if(t){if(mOe(l,c,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],e,r,i))return!0}else o+=SOe(l,c,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],r,i)||0;l=s[p++],c=s[p++];break;case Yd.Q:if(t){if(vOe(l,c,s[p++],s[p++],s[p],s[p+1],e,r,i))return!0}else o+=xOe(l,c,s[p++],s[p++],s[p],s[p+1],r,i)||0;l=s[p++],c=s[p++];break;case Yd.A:var g=s[p++],_=s[p++],b=s[p++],S=s[p++],x=s[p++],w=s[p++];p+=1;var M=!!(1-s[p++]);h=Math.cos(x)*b+g,f=Math.sin(x)*S+_,v?(u=h,d=f):o+=Uh(l,c,h,f,r,i);var C=(r-g)*S/b+g;if(t){if(gOe(g,_,S,x,x+w,M,e,C,i))return!0}else o+=wOe(g,_,S,x,x+w,M,C,i);l=Math.cos(x+w)*b+g,c=Math.sin(x+w)*S+_;break;case Yd.R:u=l=s[p++],d=c=s[p++];var A=s[p++],T=s[p++];if(h=u+A,f=d+T,t){if(W0(u,d,h,d,e,r,i)||W0(h,d,h,f,e,r,i)||W0(h,f,u,f,e,r,i)||W0(u,f,u,d,e,r,i))return!0}else o+=Uh(h,d,h,f,r,i),o+=Uh(u,f,u,d,r,i);break;case Yd.Z:if(t){if(W0(l,c,u,d,e,r,i))return!0}else o+=Uh(l,c,u,d,r,i);l=u,c=d;break}}return!t&&!bOe(c,d)&&(o+=Uh(l,c,u,d,r,i)||0),o!==0}function COe(n,e,t){return KZ(n,0,!1,e,t)}function MOe(n,e,t,r){return KZ(n,e,!0,t,r)}var YZ=Ji({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Hp),TOe={style:Ji({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},ET.style)},iE=jb.concat(["invisible","culling","z","z2","zlevel","parent"]),AOe=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var s=i.style;for(var a in r)s[a]!==r[a]&&(s[a]=r[a]);s.fill=r.fill?r.decal:null,s.decal=null,s.shadowColor=null,r.strokeFirst&&(s.stroke=null);for(var o=0;o<iE.length;++o)i[iE[o]]=this[iE[o]];i.__dirty|=Ho}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=vs(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var s=0;s<r.length;s++){var a=r[s],o=t[a];a==="style"?this.style?vn(this.style,o):this.useStyle(o):a==="shape"?vn(this.shape,o):n.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(ur(t)){var r=DC(t,0);return r>.5?e5:r>.2?o8e:t5}else if(t)return t5}return e5},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(ur(r)){var i=this.__zr,s=!!(i&&i.isDarkMode()),a=DC(t,0)<JR;if(s===a)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~qm},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new ug(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var s=!1;this.path||(s=!0,this.createPathProxy());var a=this.path;(s||this.__dirty&qm)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),t=a.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){o.copy(t);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(o.width+=c/l,o.height+=c/l,o.x-=c/l/2,o.y-=c/l/2)}return o}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),s=this.getBoundingRect(),a=this.style;if(t=i[0],r=i[1],s.contain(t,r)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,c=a.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),MOe(o,l/c,t,r)))return!0}if(this.hasFill())return COe(o,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=qm,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:vn(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&qm)},e.prototype.createStyle=function(t){return CT(YZ,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=vn({},this.shape))},e.prototype._applyStateObj=function(t,r,i,s,a,o){n.prototype._applyStateObj.call(this,t,r,i,s,a,o);var l=!(r&&s),c;if(r&&r.shape?a?s?c=r.shape:(c=vn({},i.shape),vn(c,r.shape)):(c=vn({},s?this.shape:i.shape),vn(c,r.shape)):l&&(c=i.shape),c)if(a){this.shape=vn({},this.shape);for(var u={},d=vs(c),h=0;h<d.length;h++){var f=d[h];typeof c[f]=="object"?this.shape[f]=c[f]:u[f]=c[f]}this._transitionState(t,{shape:u},o)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,s=0;s<t.length;s++){var a=t[s];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return TOe},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(s){lr(a,s);function a(o){var l=s.call(this,o)||this;return t.init&&t.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return Xr(t.style)},a.prototype.getDefaultShape=function(){return Xr(t.shape)},a}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Ho|y1|qm}(),e}(sS);const Oi=AOe;var EOe=Ji({strokeFirst:!0,font:r0,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},YZ),XZ=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return CT(EOe,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=AZ(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var s=t.lineWidth;i.x-=s/2,i.y-=s/2,i.width+=s,i.height+=s}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(sS);XZ.prototype.type="tspan";const a5=XZ;var IOe=Ji({x:0,y:0},Hp),ROe={style:Ji({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},ET.style)};function POe(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var jZ=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return CT(IOe,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var s=POe(r.image)?r.image:this.__image;if(!s)return 0;var a=t==="width"?"height":"width",o=r[a];return o==null?s[t]:s[t]/s[a]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return ROe},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new xi(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(sS);jZ.prototype.type="image";const Xg=jZ;function DOe(n,e){var t=e.x,r=e.y,i=e.width,s=e.height,a=e.r,o,l,c,u;i<0&&(t=t+i,i=-i),s<0&&(r=r+s,s=-s),typeof a=="number"?o=l=c=u=a:a instanceof Array?a.length===1?o=l=c=u=a[0]:a.length===2?(o=c=a[0],l=u=a[1]):a.length===3?(o=a[0],l=u=a[1],c=a[2]):(o=a[0],l=a[1],c=a[2],u=a[3]):o=l=c=u=0;var d;o+l>i&&(d=o+l,o*=i/d,l*=i/d),c+u>i&&(d=c+u,c*=i/d,u*=i/d),l+c>s&&(d=l+c,l*=s/d,c*=s/d),o+u>s&&(d=o+u,o*=s/d,u*=s/d),n.moveTo(t+o,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+s-c),c!==0&&n.arc(t+i-c,r+s-c,c,0,Math.PI/2),n.lineTo(t+u,r+s),u!==0&&n.arc(t+u,r+s-u,u,Math.PI/2,Math.PI),n.lineTo(t,r+o),o!==0&&n.arc(t+o,r+o,o,Math.PI,Math.PI*1.5)}var ov=Math.round;function ZZ(n,e,t){if(e){var r=e.x1,i=e.x2,s=e.y1,a=e.y2;n.x1=r,n.x2=i,n.y1=s,n.y2=a;var o=t&&t.lineWidth;return o&&(ov(r*2)===ov(i*2)&&(n.x1=n.x2=Tp(r,o,!0)),ov(s*2)===ov(a*2)&&(n.y1=n.y2=Tp(s,o,!0))),n}}function QZ(n,e,t){if(e){var r=e.x,i=e.y,s=e.width,a=e.height;n.x=r,n.y=i,n.width=s,n.height=a;var o=t&&t.lineWidth;return o&&(n.x=Tp(r,o,!0),n.y=Tp(i,o,!0),n.width=Math.max(Tp(r+s,o,!1)-n.x,s===0?0:1),n.height=Math.max(Tp(i+a,o,!1)-n.y,a===0?0:1)),n}}function Tp(n,e,t){if(!e)return n;var r=ov(n*2);return(r+ov(e))%2===0?r/2:(r+(t?1:-1))/2}var LOe=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),kOe={},JZ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new LOe},e.prototype.buildPath=function(t,r){var i,s,a,o;if(this.subPixelOptimize){var l=QZ(kOe,r,this.style);i=l.x,s=l.y,a=l.width,o=l.height,l.r=r.r,r=l}else i=r.x,s=r.y,a=r.width,o=r.height;r.r?DOe(t,r):t.rect(i,s,a,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Oi);JZ.prototype.type="rect";const _o=JZ;var l9={fill:"#000"},c9=2,OOe={style:Ji({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},ET.style)},eQ=function(n){lr(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=l9,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,UOe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new xi(0,0,0,0),r=this._children,i=[],s=null,a=0;a<r.length;a++){var o=r[a],l=o.getBoundingRect(),c=o.getLocalTransform(i);c?(t.copy(l),t.applyTransform(c),s=s||t.clone(),s.union(t)):(s=s||l.clone(),s.union(l))}this._rect=s||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||l9},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,s=t.rich||i&&{};return vn(t,r),i&&s?(this._mergeRich(s,i),t.rich=s):s&&(t.rich=s),t},e.prototype._mergeRich=function(t,r){for(var i=vs(r),s=0;s<i.length;s++){var a=i[s];t[a]=t[a]||{},vn(t[a],r[a])}},e.prototype.getAnimationStyleProps=function(){return OOe},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||r0,i=t.padding,s=v9(t),a=nOe(s,t),o=sE(t),l=!!t.backgroundColor,c=a.outerHeight,u=a.outerWidth,d=a.contentWidth,h=a.lines,f=a.lineHeight,p=this._defaultStyle;this.isTruncated=!!a.isTruncated;var m=t.x||0,v=t.y||0,g=t.align||p.align||"left",_=t.verticalAlign||p.verticalAlign||"top",b=m,S=Km(v,a.contentHeight,_);if(o||i){var x=_1(m,u,g),w=Km(v,c,_);o&&this._renderBackground(t,t,x,w,u,c)}S+=f/2,i&&(b=m9(m,g,i),_==="top"?S+=i[0]:_==="bottom"&&(S-=i[2]));for(var M=0,C=!1,A=p9("fill"in t?t.fill:(C=!0,p.fill)),T=h9("stroke"in t?t.stroke:!l&&(!p.autoStroke||C)?(M=c9,p.stroke):null),I=t.textShadowBlur>0,D=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),B=a.calculatedLineHeight,O=0;O<h.length;O++){var H=this._getOrCreateChild(a5),L=H.createStyle();H.useStyle(L),L.text=h[O],L.x=b,L.y=S,g&&(L.textAlign=g),L.textBaseline="middle",L.opacity=t.opacity,L.strokeFirst=!0,I&&(L.shadowBlur=t.textShadowBlur||0,L.shadowColor=t.textShadowColor||"transparent",L.shadowOffsetX=t.textShadowOffsetX||0,L.shadowOffsetY=t.textShadowOffsetY||0),L.stroke=T,L.fill=A,T&&(L.lineWidth=t.lineWidth||M,L.lineDash=t.lineDash,L.lineDashOffset=t.lineDashOffset||0),L.font=r,d9(L,t),S+=f,D&&H.setBoundingRect(new xi(_1(L.x,d,L.textAlign),Km(L.y,B,L.textBaseline),d,B))}},e.prototype._updateRichTexts=function(){var t=this.style,r=v9(t),i=sOe(r,t),s=i.width,a=i.outerWidth,o=i.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,d=this._defaultStyle,h=t.align||d.align,f=t.verticalAlign||d.verticalAlign;this.isTruncated=!!i.isTruncated;var p=_1(c,a,h),m=Km(u,o,f),v=p,g=m;l&&(v+=l[3],g+=l[0]);var _=v+s;sE(t)&&this._renderBackground(t,t,p,m,a,o);for(var b=!!t.backgroundColor,S=0;S<i.lines.length;S++){for(var x=i.lines[S],w=x.tokens,M=w.length,C=x.lineHeight,A=x.width,T=0,I=v,D=_,B=M-1,O=void 0;T<M&&(O=w[T],!O.align||O.align==="left");)this._placeToken(O,t,C,g,I,"left",b),A-=O.width,I+=O.width,T++;for(;B>=0&&(O=w[B],O.align==="right");)this._placeToken(O,t,C,g,D,"right",b),A-=O.width,D-=O.width,B--;for(I+=(s-(I-v)-(_-D)-A)/2;T<=B;)O=w[T],this._placeToken(O,t,C,g,I+O.width/2,"center",b),I+=O.width,T++;g+=C}},e.prototype._placeToken=function(t,r,i,s,a,o,l){var c=r.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,d=s+i/2;u==="top"?d=s+t.height/2:u==="bottom"&&(d=s+i-t.height/2);var h=!t.isLineHolder&&sE(c);h&&this._renderBackground(c,r,o==="right"?a-t.width:o==="center"?a-t.width/2:a,d-t.height/2,t.width,t.height);var f=!!c.backgroundColor,p=t.textPadding;p&&(a=m9(a,o,p),d-=t.height/2-p[0]-t.innerHeight/2);var m=this._getOrCreateChild(a5),v=m.createStyle();m.useStyle(v);var g=this._defaultStyle,_=!1,b=0,S=p9("fill"in c?c.fill:"fill"in r?r.fill:(_=!0,g.fill)),x=h9("stroke"in c?c.stroke:"stroke"in r?r.stroke:!f&&!l&&(!g.autoStroke||_)?(b=c9,g.stroke):null),w=c.textShadowBlur>0||r.textShadowBlur>0;v.text=t.text,v.x=a,v.y=d,w&&(v.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,v.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",v.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,v.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=t.font||r0,v.opacity=V1(c.opacity,r.opacity,1),d9(v,c),x&&(v.lineWidth=V1(c.lineWidth,r.lineWidth,b),v.lineDash=Ir(c.lineDash,r.lineDash),v.lineDashOffset=r.lineDashOffset||0,v.stroke=x),S&&(v.fill=S);var M=t.contentWidth,C=t.contentHeight;m.setBoundingRect(new xi(_1(v.x,M,v.textAlign),Km(v.y,C,v.textBaseline),M,C))},e.prototype._renderBackground=function(t,r,i,s,a,o){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,d=l&&l.image,h=l&&!d,f=t.borderRadius,p=this,m,v;if(h||t.lineHeight||c&&u){m=this._getOrCreateChild(_o),m.useStyle(m.createStyle()),m.style.fill=null;var g=m.shape;g.x=i,g.y=s,g.width=a,g.height=o,g.r=f,m.dirtyShape()}if(h){var _=m.style;_.fill=l||null,_.fillOpacity=Ir(t.fillOpacity,1)}else if(d){v=this._getOrCreateChild(Xg),v.onload=function(){p.dirtyStyle()};var b=v.style;b.image=l.image,b.x=i,b.y=s,b.width=a,b.height=o}if(c&&u){var _=m.style;_.lineWidth=c,_.stroke=u,_.strokeOpacity=Ir(t.strokeOpacity,1),_.lineDash=t.borderDash,_.lineDashOffset=t.borderDashOffset||0,m.strokeContainThreshold=0,m.hasFill()&&m.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var S=(m||v).style;S.shadowBlur=t.shadowBlur||0,S.shadowColor=t.shadowColor||"transparent",S.shadowOffsetX=t.shadowOffsetX||0,S.shadowOffsetY=t.shadowOffsetY||0,S.opacity=V1(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return zOe(t)&&(r=[t.fontStyle,t.fontWeight,FOe(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&Kc(r)||t.textFont||t.font},e}(sS),NOe={left:!0,right:1,center:1},BOe={top:1,bottom:1,middle:1},u9=["fontStyle","fontWeight","fontSize","fontFamily"];function FOe(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?gL+"px":n+"px"}function d9(n,e){for(var t=0;t<u9.length;t++){var r=u9[t],i=e[r];i!=null&&(n[r]=i)}}function zOe(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function UOe(n){return f9(n),wt(n.rich,f9),n}function f9(n){if(n){n.font=eQ.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||NOe[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||BOe[t]?t:"top";var r=n.padding;r&&(n.padding=rZ(n.padding))}}function h9(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function p9(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function m9(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function v9(n){var e=n.text;return e!=null&&(e+=""),e}function sE(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const ja=eQ;var Pi=zs(),HOe=function(n,e,t,r){if(r){var i=Pi(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,i.ssrType="chart",r.type==="group"&&r.traverse(function(s){var a=Pi(s);a.seriesIndex=n,a.dataIndex=t,a.dataType=e,a.ssrType="chart"})}},g9=1,y9={},tQ=zs(),OL=zs(),nQ=0,NL=1,BL=2,cu=["emphasis","blur","select"],NC=["normal","emphasis","blur","select"],VOe=10,$Oe=9,Vp="highlight",_2="downplay",K1="select",S2="unselect",Y1="toggleSelect";function q0(n){return n!=null&&n!=="none"}function IT(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function rQ(n){IT(n,"emphasis",BL)}function iQ(n){n.hoverState===BL&&IT(n,"normal",nQ)}function FL(n){IT(n,"blur",NL)}function sQ(n){n.hoverState===NL&&IT(n,"normal",nQ)}function GOe(n){n.selected=!0}function WOe(n){n.selected=!1}function b9(n,e,t){e(n,t)}function Fd(n,e,t){b9(n,e,t),n.isGroup&&n.traverse(function(r){b9(r,e,t)})}function qOe(n,e,t,r){for(var i=n.style,s={},a=0;a<e.length;a++){var o=e[a],l=i[o];s[o]=l??(r&&r[o])}for(var a=0;a<n.animators.length;a++){var c=n.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(s,e)}return s}function KOe(n,e,t,r){var i=t&&Di(t,"select")>=0,s=!1;if(n instanceof Oi){var a=tQ(n),o=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(q0(o)||q0(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(s=!0,r=vn({},r),c=vn({},c),c.fill=o):!q0(c.fill)&&q0(o)?(s=!0,r=vn({},r),c=vn({},c),c.fill=zF(o)):!q0(c.stroke)&&q0(l)&&(s||(r=vn({},r),c=vn({},c)),c.stroke=zF(l)),r.style=c}}if(r&&r.z2==null){s||(r=vn({},r));var u=n.z2EmphasisLift;r.z2=n.z2+(u??VOe)}return r}function YOe(n,e,t){if(t&&t.z2==null){t=vn({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??$Oe)}return t}function XOe(n,e,t){var r=Di(n.currentStates,e)>=0,i=n.style.opacity,s=r?null:qOe(n,["opacity"],e,{opacity:1});t=t||{};var a=t.style||{};return a.opacity==null&&(t=vn({},t),a=vn({opacity:r?i:s.opacity*.1},a),t.style=a),t}function aE(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return KOe(this,n,e,t);if(n==="blur")return XOe(this,n,t);if(n==="select")return YOe(this,n,t)}return t}function jOe(n){n.stateProxy=aE;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=aE),t&&(t.stateProxy=aE)}function _9(n,e){!cQ(n,e)&&!n.__highByOuter&&Fd(n,rQ)}function S9(n,e){!cQ(n,e)&&!n.__highByOuter&&Fd(n,iQ)}function o5(n,e){n.__highByOuter|=1<<(e||0),Fd(n,rQ)}function l5(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&Fd(n,iQ)}function ZOe(n){Fd(n,FL)}function aQ(n){Fd(n,sQ)}function oQ(n){Fd(n,GOe)}function lQ(n){Fd(n,WOe)}function cQ(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function uQ(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,s){var a=OL(s),o=i==="series",l=o?n.getViewOfSeriesModel(s):n.getViewOfComponentModel(s);!o&&r.push(l),a.isBlured&&(l.group.traverse(function(c){sQ(c)}),o&&t.push(s)),a.isBlured=!1}),wt(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function c5(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function s(c,u){for(var d=0;d<u.length;d++){var h=c.getItemGraphicEl(u[d]);h&&aQ(h)}}if(n!=null&&!(!e||e==="none")){var a=i.getSeriesByIndex(n),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];i.eachSeries(function(c){var u=a===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var h=d&&o?d===o:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!h||e==="series"&&u)){var f=r.getViewOfSeriesModel(c);if(f.group.traverse(function(v){v.__highByOuter&&u&&e==="self"||FL(v)}),Mo(e))s(c.getData(),e);else if(mr(e))for(var p=vs(e),m=0;m<p.length;m++)s(c.getData(p[m]),e[p[m]]);l.push(c),OL(c).isBlured=!0}}),i.eachComponent(function(c,u){if(c!=="series"){var d=r.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,i)}})}}function u5(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){OL(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(s){FL(s)})}}}function QOe(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var s=rS(i,e);s=(Jn(s)?s[0]:s)||0;var a=i.getItemGraphicEl(s);if(!a)for(var o=i.count(),l=0;!a&&l<o;)a=i.getItemGraphicEl(l++);if(a){var c=Pi(a);c5(r,c.focus,c.blurScope,t)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&c5(r,u,d,t)}}}function zL(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var s=r.getModel().getComponent(n,e);if(!s)return i;var a=r.getViewOfComponentModel(s);if(!a||!a.findHighDownDispatchers)return i;for(var o=a.findHighDownDispatchers(t),l,c=0;c<o.length;c++)if(Pi(o[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function JOe(n,e,t){var r=Pi(n),i=zL(r.componentMainType,r.componentIndex,r.componentHighDownName,t),s=i.dispatchers,a=i.focusSelf;s?(a&&u5(r.componentMainType,r.componentIndex,t),wt(s,function(o){return _9(o,e)})):(c5(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&u5(r.componentMainType,r.componentIndex,t),_9(n,e))}function eNe(n,e,t){uQ(t);var r=Pi(n),i=zL(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?wt(i,function(s){return S9(s,e)}):S9(n,e)}function tNe(n,e,t){if(h5(e)){var r=e.dataType,i=n.getData(r),s=rS(i,e);Jn(s)||(s=[s]),n[e.type===Y1?"toggleSelect":e.type===K1?"select":"unselect"](s,r)}}function x9(n){var e=n.getAllData();wt(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(s,a){n.isSelected(a,i)?oQ(s):lQ(s)})})}function nNe(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();wt(r,function(i){i.data;var s=i.type,a=t.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:t.seriesIndex};s!=null&&(o.dataType=s),e.push(o)}})}),e}function d5(n,e,t){dQ(n,!0),Fd(n,jOe),sNe(n,e,t)}function rNe(n){dQ(n,!1)}function iNe(n,e,t,r){r?rNe(n):d5(n,e,t)}function sNe(n,e,t){var r=Pi(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var w9=["emphasis","blur","select"],aNe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function oNe(n,e,t,r){t=t||"itemStyle";for(var i=0;i<w9.length;i++){var s=w9[i],a=e.getModel([s,t]),o=n.ensureState(s);o.style=r?r(a):a[aNe[t]]()}}function dQ(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function f5(n){return!!(n&&n.__highDownDispatcher)}function lNe(n){var e=y9[n];return e==null&&g9<=32&&(e=y9[n]=g9++),e}function h5(n){var e=n.type;return e===K1||e===S2||e===Y1}function C9(n){var e=n.type;return e===Vp||e===_2}function cNe(n){var e=tQ(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var K0=ug.CMD,uNe=[[],[],[]],M9=Math.sqrt,dNe=Math.atan2;function fNe(n,e){if(e){var t=n.data,r=n.len(),i,s,a,o,l,c,u=K0.M,d=K0.C,h=K0.L,f=K0.R,p=K0.A,m=K0.Q;for(a=0,o=0;a<r;){switch(i=t[a++],o=a,s=0,i){case u:s=1;break;case h:s=1;break;case d:s=3;break;case m:s=2;break;case p:var v=e[4],g=e[5],_=M9(e[0]*e[0]+e[1]*e[1]),b=M9(e[2]*e[2]+e[3]*e[3]),S=dNe(-e[1]/b,e[0]/_);t[a]*=_,t[a++]+=v,t[a]*=b,t[a++]+=g,t[a++]*=_,t[a++]*=b,t[a++]+=S,t[a++]+=S,a+=2,o=a;break;case f:c[0]=t[a++],c[1]=t[a++],eu(c,c,e),t[o++]=c[0],t[o++]=c[1],c[0]+=t[a++],c[1]+=t[a++],eu(c,c,e),t[o++]=c[0],t[o++]=c[1]}for(l=0;l<s;l++){var x=uNe[l];x[0]=t[a++],x[1]=t[a++],eu(x,x,e),t[o++]=x[0],t[o++]=x[1]}}n.increaseVersion()}}var oE=Math.sqrt,ux=Math.sin,dx=Math.cos,Fy=Math.PI;function T9(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function p5(n,e){return(n[0]*e[0]+n[1]*e[1])/(T9(n)*T9(e))}function A9(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(p5(n,e))}function E9(n,e,t,r,i,s,a,o,l,c,u){var d=l*(Fy/180),h=dx(d)*(n-t)/2+ux(d)*(e-r)/2,f=-1*ux(d)*(n-t)/2+dx(d)*(e-r)/2,p=h*h/(a*a)+f*f/(o*o);p>1&&(a*=oE(p),o*=oE(p));var m=(i===s?-1:1)*oE((a*a*(o*o)-a*a*(f*f)-o*o*(h*h))/(a*a*(f*f)+o*o*(h*h)))||0,v=m*a*f/o,g=m*-o*h/a,_=(n+t)/2+dx(d)*v-ux(d)*g,b=(e+r)/2+ux(d)*v+dx(d)*g,S=A9([1,0],[(h-v)/a,(f-g)/o]),x=[(h-v)/a,(f-g)/o],w=[(-1*h-v)/a,(-1*f-g)/o],M=A9(x,w);if(p5(x,w)<=-1&&(M=Fy),p5(x,w)>=1&&(M=0),M<0){var C=Math.round(M/Fy*1e6)/1e6;M=Fy*2+C%2*Fy}u.addData(c,_,b,a,o,S,M,d,s)}var hNe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,pNe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function mNe(n){var e=new ug;if(!n)return e;var t=0,r=0,i=t,s=r,a,o=ug.CMD,l=n.match(hNe);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),h=void 0,f=u.match(pNe)||[],p=f.length,m=0;m<p;m++)f[m]=parseFloat(f[m]);for(var v=0;v<p;){var g=void 0,_=void 0,b=void 0,S=void 0,x=void 0,w=void 0,M=void 0,C=t,A=r,T=void 0,I=void 0;switch(d){case"l":t+=f[v++],r+=f[v++],h=o.L,e.addData(h,t,r);break;case"L":t=f[v++],r=f[v++],h=o.L,e.addData(h,t,r);break;case"m":t+=f[v++],r+=f[v++],h=o.M,e.addData(h,t,r),i=t,s=r,d="l";break;case"M":t=f[v++],r=f[v++],h=o.M,e.addData(h,t,r),i=t,s=r,d="L";break;case"h":t+=f[v++],h=o.L,e.addData(h,t,r);break;case"H":t=f[v++],h=o.L,e.addData(h,t,r);break;case"v":r+=f[v++],h=o.L,e.addData(h,t,r);break;case"V":r=f[v++],h=o.L,e.addData(h,t,r);break;case"C":h=o.C,e.addData(h,f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]),t=f[v-2],r=f[v-1];break;case"c":h=o.C,e.addData(h,f[v++]+t,f[v++]+r,f[v++]+t,f[v++]+r,f[v++]+t,f[v++]+r),t+=f[v-2],r+=f[v-1];break;case"S":g=t,_=r,T=e.len(),I=e.data,a===o.C&&(g+=t-I[T-4],_+=r-I[T-3]),h=o.C,C=f[v++],A=f[v++],t=f[v++],r=f[v++],e.addData(h,g,_,C,A,t,r);break;case"s":g=t,_=r,T=e.len(),I=e.data,a===o.C&&(g+=t-I[T-4],_+=r-I[T-3]),h=o.C,C=t+f[v++],A=r+f[v++],t+=f[v++],r+=f[v++],e.addData(h,g,_,C,A,t,r);break;case"Q":C=f[v++],A=f[v++],t=f[v++],r=f[v++],h=o.Q,e.addData(h,C,A,t,r);break;case"q":C=f[v++]+t,A=f[v++]+r,t+=f[v++],r+=f[v++],h=o.Q,e.addData(h,C,A,t,r);break;case"T":g=t,_=r,T=e.len(),I=e.data,a===o.Q&&(g+=t-I[T-4],_+=r-I[T-3]),t=f[v++],r=f[v++],h=o.Q,e.addData(h,g,_,t,r);break;case"t":g=t,_=r,T=e.len(),I=e.data,a===o.Q&&(g+=t-I[T-4],_+=r-I[T-3]),t+=f[v++],r+=f[v++],h=o.Q,e.addData(h,g,_,t,r);break;case"A":b=f[v++],S=f[v++],x=f[v++],w=f[v++],M=f[v++],C=t,A=r,t=f[v++],r=f[v++],h=o.A,E9(C,A,t,r,w,M,b,S,x,h,e);break;case"a":b=f[v++],S=f[v++],x=f[v++],w=f[v++],M=f[v++],C=t,A=r,t+=f[v++],r+=f[v++],h=o.A,E9(C,A,t,r,w,M,b,S,x,h,e);break}}(d==="z"||d==="Z")&&(h=o.Z,e.addData(h),t=i,r=s),a=h}return e.toStatic(),e}var fQ=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(Oi);function hQ(n){return n.setData!=null}function pQ(n,e){var t=mNe(n),r=vn({},e);return r.buildPath=function(i){if(hQ(i)){i.setData(t.data);var s=i.getContext();s&&i.rebuildPath(s,1)}else{var s=i;t.rebuildPath(s,1)}},r.applyTransform=function(i){fNe(t,i),this.dirtyShape()},r}function vNe(n,e){return new fQ(pQ(n,e))}function gNe(n,e){var t=pQ(n,e),r=function(i){lr(s,i);function s(a){var o=i.call(this,a)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return s}(fQ);return r}function yNe(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var s=n[i];t.push(s.getUpdatedPathProxy(!0))}var a=new Oi(e);return a.createPathProxy(),a.buildPath=function(o){if(hQ(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}var bNe=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),mQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new bNe},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Oi);mQ.prototype.type="circle";const UL=mQ;var _Ne=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),vQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new _Ne},e.prototype.buildPath=function(t,r){var i=.5522848,s=r.cx,a=r.cy,o=r.rx,l=r.ry,c=o*i,u=l*i;t.moveTo(s-o,a),t.bezierCurveTo(s-o,a-u,s-c,a-l,s,a-l),t.bezierCurveTo(s+c,a-l,s+o,a-u,s+o,a),t.bezierCurveTo(s+o,a+u,s+c,a+l,s,a+l),t.bezierCurveTo(s-c,a+l,s-o,a+u,s-o,a),t.closePath()},e}(Oi);vQ.prototype.type="ellipse";const gQ=vQ;var yQ=Math.PI,lE=yQ*2,Vh=Math.sin,Y0=Math.cos,SNe=Math.acos,ua=Math.atan2,I9=Math.abs,X1=Math.sqrt,S1=Math.max,kc=Math.min,tc=1e-4;function xNe(n,e,t,r,i,s,a,o){var l=t-n,c=r-e,u=a-i,d=o-s,h=d*l-u*c;if(!(h*h<tc))return h=(u*(e-s)-d*(n-i))/h,[n+h*l,e+h*c]}function fx(n,e,t,r,i,s,a){var o=n-t,l=e-r,c=(a?s:-s)/X1(o*o+l*l),u=c*l,d=-c*o,h=n+u,f=e+d,p=t+u,m=r+d,v=(h+p)/2,g=(f+m)/2,_=p-h,b=m-f,S=_*_+b*b,x=i-s,w=h*m-p*f,M=(b<0?-1:1)*X1(S1(0,x*x*S-w*w)),C=(w*b-_*M)/S,A=(-w*_-b*M)/S,T=(w*b+_*M)/S,I=(-w*_+b*M)/S,D=C-v,B=A-g,O=T-v,H=I-g;return D*D+B*B>O*O+H*H&&(C=T,A=I),{cx:C,cy:A,x0:-u,y0:-d,x1:C*(i/x-1),y1:A*(i/x-1)}}function wNe(n){var e;if(Jn(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function CNe(n,e){var t,r=S1(e.r,0),i=S1(e.r0||0,0),s=r>0,a=i>0;if(!(!s&&!a)){if(s||(r=i,i=0),i>r){var o=r;r=i,i=o}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,d=e.cy,h=!!e.clockwise,f=I9(c-l),p=f>lE&&f%lE;if(p>tc&&(f=p),!(r>tc))n.moveTo(u,d);else if(f>lE-tc)n.moveTo(u+r*Y0(l),d+r*Vh(l)),n.arc(u,d,r,l,c,!h),i>tc&&(n.moveTo(u+i*Y0(c),d+i*Vh(c)),n.arc(u,d,i,c,l,h));else{var m=void 0,v=void 0,g=void 0,_=void 0,b=void 0,S=void 0,x=void 0,w=void 0,M=void 0,C=void 0,A=void 0,T=void 0,I=void 0,D=void 0,B=void 0,O=void 0,H=r*Y0(l),L=r*Vh(l),z=i*Y0(c),k=i*Vh(c),F=f>tc;if(F){var W=e.cornerRadius;W&&(t=wNe(W),m=t[0],v=t[1],g=t[2],_=t[3]);var q=I9(r-i)/2;if(b=kc(q,g),S=kc(q,_),x=kc(q,m),w=kc(q,v),A=M=S1(b,S),T=C=S1(x,w),(M>tc||C>tc)&&(I=r*Y0(c),D=r*Vh(c),B=i*Y0(l),O=i*Vh(l),f<yQ)){var Z=xNe(H,L,B,O,I,D,z,k);if(Z){var se=H-Z[0],X=L-Z[1],ie=I-Z[0],ae=D-Z[1],ce=1/Vh(SNe((se*ie+X*ae)/(X1(se*se+X*X)*X1(ie*ie+ae*ae)))/2),we=X1(Z[0]*Z[0]+Z[1]*Z[1]);A=kc(M,(r-we)/(ce+1)),T=kc(C,(i-we)/(ce-1))}}}if(!F)n.moveTo(u+H,d+L);else if(A>tc){var He=kc(g,A),Ge=kc(_,A),me=fx(B,O,H,L,r,He,h),be=fx(I,D,z,k,r,Ge,h);n.moveTo(u+me.cx+me.x0,d+me.cy+me.y0),A<M&&He===Ge?n.arc(u+me.cx,d+me.cy,A,ua(me.y0,me.x0),ua(be.y0,be.x0),!h):(He>0&&n.arc(u+me.cx,d+me.cy,He,ua(me.y0,me.x0),ua(me.y1,me.x1),!h),n.arc(u,d,r,ua(me.cy+me.y1,me.cx+me.x1),ua(be.cy+be.y1,be.cx+be.x1),!h),Ge>0&&n.arc(u+be.cx,d+be.cy,Ge,ua(be.y1,be.x1),ua(be.y0,be.x0),!h))}else n.moveTo(u+H,d+L),n.arc(u,d,r,l,c,!h);if(!(i>tc)||!F)n.lineTo(u+z,d+k);else if(T>tc){var He=kc(m,T),Ge=kc(v,T),me=fx(z,k,I,D,i,-Ge,h),be=fx(H,L,B,O,i,-He,h);n.lineTo(u+me.cx+me.x0,d+me.cy+me.y0),T<C&&He===Ge?n.arc(u+me.cx,d+me.cy,T,ua(me.y0,me.x0),ua(be.y0,be.x0),!h):(Ge>0&&n.arc(u+me.cx,d+me.cy,Ge,ua(me.y0,me.x0),ua(me.y1,me.x1),!h),n.arc(u,d,i,ua(me.cy+me.y1,me.cx+me.x1),ua(be.cy+be.y1,be.cx+be.x1),h),He>0&&n.arc(u+be.cx,d+be.cy,He,ua(be.y1,be.x1),ua(be.y0,be.x0),!h))}else n.lineTo(u+z,d+k),n.arc(u,d,i,c,l,h)}n.closePath()}}}var MNe=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),bQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new MNe},e.prototype.buildPath=function(t,r){CNe(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Oi);bQ.prototype.type="sector";const RT=bQ;var TNe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),_Q=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new TNe},e.prototype.buildPath=function(t,r){var i=r.cx,s=r.cy,a=Math.PI*2;t.moveTo(i+r.r,s),t.arc(i,s,r.r,0,a,!1),t.moveTo(i+r.r0,s),t.arc(i,s,r.r0,0,a,!0)},e}(Oi);_Q.prototype.type="ring";const SQ=_Q;function ANe(n,e,t,r){var i=[],s=[],a=[],o=[],l,c,u,d;if(r){u=[1/0,1/0],d=[-1/0,-1/0];for(var h=0,f=n.length;h<f;h++)iv(u,u,n[h]),sv(d,d,n[h]);iv(u,u,r[0]),sv(d,d,r[1])}for(var h=0,f=n.length;h<f;h++){var p=n[h];if(t)l=n[h?h-1:f-1],c=n[(h+1)%f];else if(h===0||h===f-1){i.push(jLe(n[h]));continue}else l=n[h-1],c=n[h+1];ZLe(s,c,l),M3(s,s,e);var m=UR(p,l),v=UR(p,c),g=m+v;g!==0&&(m/=g,v/=g),M3(a,s,-m),M3(o,s,v);var _=SF([],p,a),b=SF([],p,o);r&&(sv(_,_,u),iv(_,_,d),sv(b,b,u),iv(b,b,d)),i.push(_),i.push(b)}return t&&i.push(i.shift()),i}function xQ(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var s=ANe(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var a=i.length,o=0;o<(t?a:a-1);o++){var l=s[o*2],c=s[o*2+1],u=i[(o+1)%a];n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var o=1,d=i.length;o<d;o++)n.lineTo(i[o][0],i[o][1])}t&&n.closePath()}}var ENe=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),wQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new ENe},e.prototype.buildPath=function(t,r){xQ(t,r,!0)},e}(Oi);wQ.prototype.type="polygon";const CQ=wQ;var INe=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),MQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new INe},e.prototype.buildPath=function(t,r){xQ(t,r,!1)},e}(Oi);MQ.prototype.type="polyline";const PT=MQ;var RNe={},PNe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),TQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new PNe},e.prototype.buildPath=function(t,r){var i,s,a,o;if(this.subPixelOptimize){var l=ZZ(RNe,r,this.style);i=l.x1,s=l.y1,a=l.x2,o=l.y2}else i=r.x1,s=r.y1,a=r.x2,o=r.y2;var c=r.percent;c!==0&&(t.moveTo(i,s),c<1&&(a=i*(1-c)+a*c,o=s*(1-c)+o*c),t.lineTo(a,o))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(Oi);TQ.prototype.type="line";const aS=TQ;var no=[],DNe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function R9(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?DF:Qs)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?DF:Qs)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?LF:ya)(n.x1,n.cpx1,n.x2,e),(t?LF:ya)(n.y1,n.cpy1,n.y2,e)]}var AQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new DNe},e.prototype.buildPath=function(t,r){var i=r.x1,s=r.y1,a=r.x2,o=r.y2,l=r.cpx1,c=r.cpy1,u=r.cpx2,d=r.cpy2,h=r.percent;h!==0&&(t.moveTo(i,s),u==null||d==null?(h<1&&(PC(i,l,a,h,no),l=no[1],a=no[2],PC(s,c,o,h,no),c=no[1],o=no[2]),t.quadraticCurveTo(l,c,a,o)):(h<1&&(RC(i,l,u,a,h,no),l=no[1],u=no[2],a=no[3],RC(s,c,d,o,h,no),c=no[1],d=no[2],o=no[3]),t.bezierCurveTo(l,c,u,d,a,o)))},e.prototype.pointAt=function(t){return R9(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=R9(this.shape,t,!0);return eke(r,r)},e}(Oi);AQ.prototype.type="bezier-curve";const EQ=AQ;var LNe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),IQ=function(n){lr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new LNe},e.prototype.buildPath=function(t,r){var i=r.cx,s=r.cy,a=Math.max(r.r,0),o=r.startAngle,l=r.endAngle,c=r.clockwise,u=Math.cos(o),d=Math.sin(o);t.moveTo(u*a+i,d*a+s),t.arc(i,s,a,o,l,!c)},e}(Oi);IQ.prototype.type="arc";const HL=IQ;var kNe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],s=0;s<i.length;s++)i[s].buildPath(t,i[s].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Oi.prototype.getBoundingRect.call(this)},e}(Oi);const ONe=kNe;var NNe=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}();const RQ=NNe;var BNe=function(n){lr(e,n);function e(t,r,i,s,a,o){var l=n.call(this,a)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=s??0,l.type="linear",l.global=o||!1,l}return e}(RQ);const FNe=BNe;var zNe=function(n){lr(e,n);function e(t,r,i,s,a){var o=n.call(this,s)||this;return o.x=t??.5,o.y=r??.5,o.r=i??.5,o.type="radial",o.global=a||!1,o}return e}(RQ);const UNe=zNe;var $h=[0,0],Gh=[0,0],hx=new _r,px=new _r,HNe=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new _r;for(var r=0;r<2;r++)this._axes[r]=new _r;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,s=e.x,a=e.y,o=s+e.width,l=a+e.height;if(r[0].set(s,a),r[1].set(o,a),r[2].set(o,l),r[3].set(s,l),t)for(var c=0;c<4;c++)r[c].transform(t);_r.sub(i[0],r[1],r[0]),_r.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var c=0;c<2;c++)this._origin[c]=i[c].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return hx.set(1/0,1/0),px.set(0,0),!this._intersectCheckOneSide(this,e,hx,px,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,hx,px,i,-1)&&(r=!1,i)||i||_r.copy(t,r?hx:px),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,s,a){for(var o=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,$h),this._getProjMinMaxOnAxis(l,t._corners,Gh),$h[1]<Gh[0]||$h[0]>Gh[1]){if(o=!1,s)return o;var u=Math.abs(Gh[0]-$h[1]),d=Math.abs($h[0]-Gh[1]);Math.min(u,d)>i.len()&&(u<d?_r.scale(i,c,-u*a):_r.scale(i,c,d*a))}else if(r){var u=Math.abs(Gh[0]-$h[1]),d=Math.abs($h[0]-Gh[1]);Math.min(u,d)<r.len()&&(u<d?_r.scale(r,c,u*a):_r.scale(r,c,-d*a))}}return o},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],s=this._origin,a=t[0].dot(i)+s[e],o=a,l=a,c=1;c<t.length;c++){var u=t[c].dot(i)+s[e];o=Math.min(u,o),l=Math.max(u,l)}r[0]=o,r[1]=l},n}();const BC=HNe;var VNe=[],$Ne=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new xi(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],s=i.getBoundingRect().clone();i.needLocalTransform()&&s.applyTransform(i.getLocalTransform(VNe)),t.union(s)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),s=this.getBoundingRect();if(s.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(t,r))return!0}return!1},e}(sS);const GNe=$Ne;var WNe=zs();function qNe(n,e,t,r,i){var s;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();s=a&&a.animation}var o=e&&e.isAnimationEnabled(),l=n==="update";if(o){var c=void 0,u=void 0,d=void 0;r?(c=Ir(r.duration,200),u=Ir(r.easing,"cubicOut"),d=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(c=s.duration),s.easing!=null&&(u=s.easing),s.delay!=null&&(d=s.delay)),li(d)&&(d=d(t,i)),li(c)&&(c=c(t));var h={duration:c||0,delay:d,easing:u};return h}else return null}function VL(n,e,t,r,i,s,a){var o=!1,l;li(i)?(a=s,s=i,i=null):mr(i)&&(s=i.cb,a=i.during,o=i.isFrom,l=i.removeOpt,i=i.dataIndex);var c=n==="leave";c||e.stopAnimation("leave");var u=qNe(n,r,i,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(u&&u.duration>0){var d=u.duration,h=u.delay,f=u.easing,p={duration:d,delay:h||0,easing:f,done:s,force:!!s||!!a,setToFinal:!c,scope:n,during:a};o?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!o&&e.attr(t),a&&a(1),s&&s()}function dg(n,e,t,r,i,s){VL("update",n,e,t,r,i,s)}function x2(n,e,t,r,i,s){VL("enter",n,e,t,r,i,s)}function j1(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function PQ(n,e,t,r,i,s){j1(n)||VL("leave",n,e,t,r,i,s)}function P9(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),PQ(n,{style:{opacity:0}},e,t,r)}function DQ(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||P9(i,e,t,r)}):P9(n,e,t,r)}function KNe(n){WNe(n).oldStyle=n.style}var FC=Math.max,zC=Math.min,m5={};function YNe(n){return Oi.extend(n)}var XNe=gNe;function jNe(n,e){return XNe(n,e)}function wc(n,e){m5[n]=e}function ZNe(n){if(m5.hasOwnProperty(n))return m5[n]}function $L(n,e,t,r){var i=vNe(n,e);return t&&(r==="center"&&(t=kQ(t,i.getBoundingRect())),OQ(i,t)),i}function LQ(n,e,t){var r=new Xg({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var s={width:i.width,height:i.height};r.setStyle(kQ(e,s))}}});return r}function kQ(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var s=n.x+n.width/2,a=n.y+n.height/2;return{x:s-r/2,y:a-i/2,width:r,height:i}}var QNe=yNe;function OQ(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function GL(n,e){return ZZ(n,n,{lineWidth:e}),n}function JNe(n){return QZ(n.shape,n.shape,n.style),n}var eBe=Tp;function tBe(n,e){for(var t=wL([]);n&&n!==e;)Dv(t,n.getLocalTransform(),t),n=n.parent;return t}function WL(n,e,t){return e&&!Mo(e)&&(e=AL.getLocalTransform(e)),t&&(e=cZ([],e)),eu([],n,e)}function nBe(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),s=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return s=WL(s,e,t),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function D9(n){return!n.isGroup}function rBe(n){return n.shape!=null}function iBe(n,e,t){if(!n||!e)return;function r(a){var o={};return a.traverse(function(l){D9(l)&&l.anid&&(o[l.anid]=l)}),o}function i(a){var o={x:a.x,y:a.y,rotation:a.rotation};return rBe(a)&&(o.shape=vn({},a.shape)),o}var s=r(n);e.traverse(function(a){if(D9(a)&&a.anid){var o=s[a.anid];if(o){var l=i(a);a.attr(i(o)),dg(a,l,t,Pi(a).dataIndex)}}})}function sBe(n,e){return Zr(n,function(t){var r=t[0];r=FC(r,e.x),r=zC(r,e.x+e.width);var i=t[1];return i=FC(i,e.y),i=zC(i,e.y+e.height),[r,i]})}function aBe(n,e){var t=FC(n.x,e.x),r=zC(n.x+n.width,e.x+e.width),i=FC(n.y,e.y),s=zC(n.y+n.height,e.y+e.height);if(r>=t&&s>=i)return{x:t,y:i,width:r-t,height:s-i}}function qL(n,e,t){var r=vn({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),Ji(i,t),new Xg(r)):$L(n.replace("path://",""),r,t,"center")}function oBe(n,e,t,r,i){for(var s=0,a=i[i.length-1];s<i.length;s++){var o=i[s];if(NQ(n,e,t,r,o[0],o[1],a[0],a[1]))return!0;a=o}}function NQ(n,e,t,r,i,s,a,o){var l=t-n,c=r-e,u=a-i,d=o-s,h=cE(u,d,l,c);if(lBe(h))return!1;var f=n-i,p=e-s,m=cE(f,p,l,c)/h;if(m<0||m>1)return!1;var v=cE(f,p,u,d)/h;return!(v<0||v>1)}function cE(n,e,t,r){return n*r-t*e}function lBe(n){return n<=1e-6&&n>=-1e-6}function DT(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=ur(e)?{formatter:e}:e,s=t.mainType,a=t.componentIndex,o={componentType:s,name:r,$vars:["name"]};o[s+"Index"]=a;var l=n.formatterParamsExtra;l&&wt(vs(l),function(u){i0(o,u)||(o[u]=l[u],o.$vars.push(u))});var c=Pi(n.el);c.componentMainType=s,c.componentIndex=a,c.tooltipConfig={name:r,option:Ji({content:r,encodeHTMLContent:!0,formatterParams:o},i)}}function L9(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function BQ(n,e){if(n)if(Jn(n))for(var t=0;t<n.length;t++)L9(n[t],e);else L9(n,e)}wc("circle",UL);wc("ellipse",gQ);wc("sector",RT);wc("ring",SQ);wc("polygon",CQ);wc("polyline",PT);wc("rect",_o);wc("line",aS);wc("bezierCurve",EQ);wc("arc",HL);const cBe=Object.freeze(Object.defineProperty({__proto__:null,Arc:HL,BezierCurve:EQ,BoundingRect:xi,Circle:UL,CompoundPath:ONe,Ellipse:gQ,Group:lu,Image:Xg,IncrementalDisplayable:GNe,Line:aS,LinearGradient:FNe,OrientedBoundingRect:BC,Path:Oi,Point:_r,Polygon:CQ,Polyline:PT,RadialGradient:UNe,Rect:_o,Ring:SQ,Sector:RT,Text:ja,applyTransform:WL,clipPointsByRect:sBe,clipRectByRect:aBe,createIcon:qL,extendPath:jNe,extendShape:YNe,getShapeClass:ZNe,getTransform:tBe,groupTransition:iBe,initProps:x2,isElementRemoved:j1,lineLineIntersect:NQ,linePolygonIntersect:oBe,makeImage:LQ,makePath:$L,mergePath:QNe,registerShape:wc,removeElement:PQ,removeElementWithFadeOut:DQ,resizePath:OQ,setTooltipConfig:DT,subPixelOptimize:eBe,subPixelOptimizeLine:GL,subPixelOptimizeRect:JNe,transformDirection:nBe,traverseElements:BQ,updateProps:dg},Symbol.toStringTag,{value:"Module"}));var LT={};function uBe(n,e){for(var t=0;t<cu.length;t++){var r=cu[t],i=e[r],s=n.ensureState(r);s.style=s.style||{},s.style.text=i}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(a,!0)}function k9(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,s=n.labelDimIndex,a=e.normal,o;r&&(o=r.getFormattedLabel(i,"normal",null,s,a&&a.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=li(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:o},c=0;c<cu.length;c++){var u=cu[c],d=e[u];l[u]=Ir(r?r.getFormattedLabel(i,u,null,s,d&&d.get("formatter")):null,o)}return l}function FQ(n,e,t,r){t=t||LT;for(var i=n instanceof ja,s=!1,a=0;a<NC.length;a++){var o=e[NC[a]];if(o&&o.getShallow("show")){s=!0;break}}var l=i?n:n.getTextContent();if(s){i||(l||(l=new ja,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=k9(t,e),u=e.normal,d=!!u.getShallow("show"),h=oh(u,r&&r.normal,t,!1,!i);h.text=c.normal,i||n.setTextConfig(O9(u,t,!1));for(var a=0;a<cu.length;a++){var f=cu[a],o=e[f];if(o){var p=l.ensureState(f),m=!!Ir(o.getShallow("show"),d);if(m!==d&&(p.ignore=!m),p.style=oh(o,r&&r[f],t,!0,!i),p.style.text=c[f],!i){var v=n.ensureState(f);v.textConfig=O9(o,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!d,l.useStyle(h),l.dirty(),t.enableTextSetter&&(mBe(l).setLabelText=function(g){var _=k9(t,e,g);uBe(l,_)})}else l&&(l.ignore=!0);n.dirty()}function dBe(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<cu.length;r++){var i=cu[r];t[i]=n.getModel([i,e])}return t}function oh(n,e,t,r,i){var s={};return fBe(s,n,t,r,i),e&&vn(s,e),s}function O9(n,e,t){e=e||{};var r={},i,s=n.getShallow("rotate"),a=Ir(n.getShallow("distance"),t?null:5),o=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),o!=null&&(r.offset=o),s!=null&&(s*=Math.PI/180,r.rotation=s),a!=null&&(r.distance=a),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function fBe(n,e,t,r,i){t=t||LT;var s=e.ecModel,a=s&&s.option.textStyle,o=hBe(e),l;if(o){l={};for(var c in o)if(o.hasOwnProperty(c)){var u=e.getModel(["rich",c]);z9(l[c]={},u,a,t,r,i,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var h=e.get("minMargin");h!=null&&(n.margin=h),z9(n,e,a,t,r,i,!0,!1)}function hBe(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||LT).rich;if(t){e=e||{};for(var r=vs(t),i=0;i<r.length;i++){var s=r[i];e[s]=1}}n=n.parentModel}return e}var N9=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],B9=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],F9=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function z9(n,e,t,r,i,s,a,o){t=!i&&t||LT;var l=r&&r.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),d=Ir(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),s||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(n.fill=c),u!=null&&(n.stroke=u);var h=Ir(e.getShallow("textBorderWidth"),t.textBorderWidth);h!=null&&(n.lineWidth=h);var f=Ir(e.getShallow("textBorderType"),t.textBorderType);f!=null&&(n.lineDash=f);var p=Ir(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!i&&d==null&&!o&&(d=r&&r.defaultOpacity),d!=null&&(n.opacity=d),!i&&!s&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var m=0;m<N9.length;m++){var v=N9[m],g=Ir(e.getShallow(v),t[v]);g!=null&&(n[v]=g)}for(var m=0;m<B9.length;m++){var v=B9[m],g=e.getShallow(v);g!=null&&(n[v]=g)}if(n.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(n.verticalAlign=_)}if(!a||!r.disableBox){for(var m=0;m<F9.length;m++){var v=F9[m],g=e.getShallow(v);g!=null&&(n[v]=g)}var b=e.getShallow("borderType");b!=null&&(n.borderDash=b),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function pBe(n,e){var t=e&&e.getModel("textStyle");return Kc([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var mBe=zs(),vBe=["textStyle","color"],uE=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],dE=new ja,gBe=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(vBe):null)},n.prototype.getFont=function(){return pBe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<uE.length;r++)t[uE[r]]=this.getShallow(uE[r]);return dE.useStyle(t),dE.update(),dE.getBoundingRect()},n}();const yBe=gBe;var zQ=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],bBe=Qb(zQ),_Be=function(){function n(){}return n.prototype.getLineStyle=function(e){return bBe(this,e)},n}(),UQ=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],SBe=Qb(UQ),xBe=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return SBe(this,e,t)},n}(),_0=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){ji(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var s=this.parentModel;s&&(i=s.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,s=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(s,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Xr(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!kr.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();LL(_0);K8e(_0);Bd(_0,_Be);Bd(_0,xBe);Bd(_0,Q8e);Bd(_0,yBe);const Ca=_0;var wBe=Math.round(Math.random()*10);function kT(n){return[n||"",wBe++].join("_")}function CBe(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=Yc(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var s=Yc(t).main;n.hasSubTypes(t)&&e[s]&&(i=e[s](r))}return i}}function MBe(n,e){n.topologicalTravel=function(s,a,o,l){if(!s.length)return;var c=t(a),u=c.graph,d=c.noEntryList,h={};for(wt(s,function(_){h[_]=!0});d.length;){var f=d.pop(),p=u[f],m=!!h[f];m&&(o.call(l,f,p.originalDeps.slice()),delete h[f]),wt(p.successor,m?g:v)}wt(h,function(){var _="";throw new Error(_)});function v(_){u[_].entryCount--,u[_].entryCount===0&&d.push(_)}function g(_){h[_]=!0,v(_)}};function t(s){var a={},o=[];return wt(s,function(l){var c=r(a,l),u=c.originalDeps=e(l),d=i(u,s);c.entryCount=d.length,c.entryCount===0&&o.push(l),wt(d,function(h){Di(c.predecessor,h)<0&&c.predecessor.push(h);var f=r(a,h);Di(f.successor,h)<0&&f.successor.push(l)})}),{graph:a,noEntryList:o}}function r(s,a){return s[a]||(s[a]={predecessor:[],successor:[]}),s[a]}function i(s,a){var o=[];return wt(s,function(l){Di(a,l)>=0&&o.push(l)}),o}}function TBe(n,e){return ji(ji({},n,!0),e,!0)}const ABe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},EBe={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var UC="ZH",KL="EN",kv=KL,w2={},YL={},HQ=kr.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||kv).toUpperCase();return n.indexOf(UC)>-1?UC:kv}():kv;function VQ(n,e){n=n.toUpperCase(),YL[n]=new Ca(e),w2[n]=e}function IBe(n){if(ur(n)){var e=w2[n.toUpperCase()]||{};return n===UC||n===KL?Xr(e):ji(Xr(e),Xr(w2[kv]),!1)}else return ji(Xr(n),Xr(w2[kv]),!1)}function RBe(n){return YL[n]}function PBe(){return YL[kv]}VQ(KL,ABe);VQ(UC,EBe);function Xd(n,e){return n+="","0000".substr(0,e-n.length)+n}function $Q(n,e,t,r){var i=MT(n),s=i[DBe(t)](),a=i[LBe(t)]()+1,o=Math.floor((a-1)/3)+1,l=i[kBe(t)](),c=i["get"+(t?"UTC":"")+"Day"](),u=i[OBe(t)](),d=(u-1)%12+1,h=i[NBe(t)](),f=i[BBe(t)](),p=i[FBe(t)](),m=u>=12?"pm":"am",v=m.toUpperCase(),g=r instanceof Ca?r:RBe(r||HQ)||PBe(),_=g.getModel("time"),b=_.get("month"),S=_.get("monthAbbr"),x=_.get("dayOfWeek"),w=_.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,m+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,Xd(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,b[a-1]).replace(/{MMM}/g,S[a-1]).replace(/{MM}/g,Xd(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Xd(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,x[c]).replace(/{ee}/g,w[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Xd(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Xd(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Xd(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Xd(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,Xd(p,3)).replace(/{S}/g,p+"")}function DBe(n){return n?"getUTCFullYear":"getFullYear"}function LBe(n){return n?"getUTCMonth":"getMonth"}function kBe(n){return n?"getUTCDate":"getDate"}function OBe(n){return n?"getUTCHours":"getHours"}function NBe(n){return n?"getUTCMinutes":"getMinutes"}function BBe(n){return n?"getUTCSeconds":"getSeconds"}function FBe(n){return n?"getUTCMilliseconds":"getMilliseconds"}function zBe(n){if(!A8e(n))return ur(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function GQ(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var OT=rZ;function v5(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(u){return u&&Kc(u)?u:"-"}function s(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var a=e==="time",o=n instanceof Date;if(a||o){var l=a?MT(n):n;if(isNaN(+l)){if(o)return"-"}else return $Q(l,r,t)}if(e==="ordinal")return FR(n)?i(n):gs(n)&&s(n)?n+"":"-";var c=OC(n);return s(c)?zBe(c):FR(n)?i(n):typeof n=="boolean"?n+"":"-"}var U9=["a","b","c","d","e","f","g"],fE=function(n,e){return"{"+n+(e??"")+"}"};function WQ(n,e,t){Jn(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],s=0;s<i.length;s++){var a=U9[s];n=n.replace(fE(a),fE(a,0))}for(var o=0;o<r;o++)for(var l=0;l<i.length;l++){var c=e[o][i[l]];n=n.replace(fE(U9[l],o),t?co(c):c)}return n}function UBe(n,e){var t=ur(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var s=t.renderMode||"html";if(!r)return"";if(s==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+co(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+co(r)+";"+(e||"")+'"></span>';var a=t.markerId||"markerX";return{renderMode:s,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Jb(n,e){return e=e||"transparent",ur(n)?n:mr(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function H9(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var C2=wt,HBe=["left","right","top","bottom","width","height"],mx=[["width","left","right"],["height","top","bottom"]];function XL(n,e,t,r,i){var s=0,a=0;r==null&&(r=1/0),i==null&&(i=1/0);var o=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),d=e.childAt(c+1),h=d&&d.getBoundingRect(),f,p;if(n==="horizontal"){var m=u.width+(h?-h.x+u.x:0);f=s+m,f>r||l.newline?(s=0,f=m,a+=o+t,o=u.height):o=Math.max(o,u.height)}else{var v=u.height+(h?-h.y+u.y:0);p=a+v,p>i||l.newline?(s+=o+t,a=0,p=v,o=u.width):o=Math.max(o,u.width)}l.newline||(l.x=s,l.y=a,l.markRedraw(),n==="horizontal"?s=f+t:a=p+t)})}var Z1=XL;Rs(XL,"vertical");Rs(XL,"horizontal");function e_(n,e,t){t=OT(t||0);var r=e.width,i=e.height,s=Ts(n.left,r),a=Ts(n.top,i),o=Ts(n.right,r),l=Ts(n.bottom,i),c=Ts(n.width,r),u=Ts(n.height,i),d=t[2]+t[0],h=t[1]+t[3],f=n.aspect;switch(isNaN(c)&&(c=r-o-h-s),isNaN(u)&&(u=i-l-d-a),f!=null&&(isNaN(c)&&isNaN(u)&&(f>r/i?c=r*.8:u=i*.8),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(s)&&(s=r-o-c-h),isNaN(a)&&(a=i-l-u-d),n.left||n.right){case"center":s=r/2-c/2-t[3];break;case"right":s=r-c-h;break}switch(n.top||n.bottom){case"middle":case"center":a=i/2-u/2-t[0];break;case"bottom":a=i-u-d;break}s=s||0,a=a||0,isNaN(c)&&(c=r-h-s-(o||0)),isNaN(u)&&(u=i-d-a-(l||0));var p=new xi(s+t[3],a+t[0],c,u);return p.margin=t,p}function HC(n){var e=n.layoutMode||n.constructor.layoutMode;return mr(e)?e:e?{type:e}:null}function t_(n,e,t){var r=t&&t.ignoreSize;!Jn(r)&&(r=[r,r]);var i=a(mx[0],0),s=a(mx[1],1);c(mx[0],n,i),c(mx[1],n,s);function a(u,d){var h={},f=0,p={},m=0,v=2;if(C2(u,function(b){p[b]=n[b]}),C2(u,function(b){o(e,b)&&(h[b]=p[b]=e[b]),l(h,b)&&f++,l(p,b)&&m++}),r[d])return l(e,u[1])?p[u[2]]=null:l(e,u[2])&&(p[u[1]]=null),p;if(m===v||!f)return p;if(f>=v)return h;for(var g=0;g<u.length;g++){var _=u[g];if(!o(h,_)&&o(n,_)){h[_]=n[_];break}}return h}function o(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,h){C2(u,function(f){d[f]=h[f]})}}function jL(n){return VBe({},n)}function VBe(n,e){return e&&n&&C2(HBe,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var $Be=zs(),jg=function(n){lr(e,n);function e(t,r,i){var s=n.call(this,t,r,i)||this;return s.uid=kT("ec_cpt_model"),s}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=HC(this),s=i?jL(t):{},a=r.getTheme();ji(t,a.get(this.mainType)),ji(t,this.getDefaultOption()),i&&t_(t,s,i)},e.prototype.mergeOption=function(t,r){ji(this.option,t,!0);var i=HC(this);i&&t_(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!G8e(t))return t.defaultOption;var r=$Be(this);if(!r.defaultOption){for(var i=[],s=t;s;){var a=s.prototype.defaultOption;a&&i.push(a),s=s.superClass}for(var o={},l=i.length-1;l>=0;l--)o=ji(o,i[l],!0);r.defaultOption=o}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",s=t+"Id";return iS(this.ecModel,t,{index:this.get(i,!0),id:this.get(s,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Ca);HZ(jg,Ca);kL(jg);CBe(jg);MBe(jg,GBe);function GBe(n){var e=[];return wt(jg.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Zr(e,function(t){return Yc(t).main}),n!=="dataset"&&Di(e,"dataset")<=0&&e.unshift("dataset"),e}const ns=jg;var qQ="";typeof navigator<"u"&&(qQ=navigator.platform||"");var X0="rgba(0, 0, 0, 0.2)";const WBe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:X0,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:X0,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:X0,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:X0,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:X0,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:X0,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:qQ.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var KQ=jr(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),_u="original",Ao="arrayRows",Cc="objectRows",Su="keyedColumns",Gf="typedArray",YQ="unknown",dd="column",Zg="row",js={Must:1,Might:2,Not:3},qBe=zs();function KBe(n){qBe(n).datasetMap=jr()}function YBe(n,e,t){var r={},i=XQ(n);if(!i)return r;var s=e.sourceFormat,a=e.dimensionsDefine,o;(s===Cc||s===Su)&&wt(a,function(u,d){(mr(u)?u.name:u)==="name"&&(o=d)});var l=function(){for(var u={},d={},h=[],f=0,p=Math.min(5,t);f<p;f++){var m=ZQ(e.data,s,e.seriesLayoutBy,a,e.startIndex,f);h.push(m);var v=m===js.Not;if(v&&u.v==null&&f!==o&&(u.v=f),(u.n==null||u.n===u.v||!v&&h[u.n]===js.Not)&&(u.n=f),g(u)&&h[u.n]!==js.Not)return u;v||(m===js.Might&&d.v==null&&f!==o&&(d.v=f),(d.n==null||d.n===d.v)&&(d.n=f))}function g(_){return _.v!=null&&_.n!=null}return g(u)?u:g(d)?d:null}();if(l){r.value=[l.v];var c=o??l.n;r.itemName=[c],r.seriesName=[c]}return r}function XQ(n){var e=n.get("data",!0);if(!e)return iS(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},DL).models[0]}function XBe(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:iS(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},DL).models}function jQ(n,e){return ZQ(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function ZQ(n,e,t,r,i,s){var a,o=5;if(To(n))return js.Not;var l,c;if(r){var u=r[s];mr(u)?(l=u.name,c=u.type):ur(u)&&(l=u)}if(c!=null)return c==="ordinal"?js.Must:js.Not;if(e===Ao){var d=n;if(t===Zg){for(var h=d[s],f=0;f<(h||[]).length&&f<o;f++)if((a=S(h[i+f]))!=null)return a}else for(var f=0;f<d.length&&f<o;f++){var p=d[i+f];if(p&&(a=S(p[s]))!=null)return a}}else if(e===Cc){var m=n;if(!l)return js.Not;for(var f=0;f<m.length&&f<o;f++){var v=m[f];if(v&&(a=S(v[l]))!=null)return a}}else if(e===Su){var g=n;if(!l)return js.Not;var h=g[l];if(!h||To(h))return js.Not;for(var f=0;f<h.length&&f<o;f++)if((a=S(h[f]))!=null)return a}else if(e===_u)for(var _=n,f=0;f<_.length&&f<o;f++){var v=_[f],b=TT(v);if(!Jn(b))return js.Not;if((a=S(b[s]))!=null)return a}function S(x){var w=ur(x);if(x!=null&&Number.isFinite(Number(x))&&x!=="")return w?js.Might:js.Not;if(w&&x!=="-")return js.Must}return js.Not}var jBe=jr();function ZBe(n,e,t){var r=jBe.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var V9=zs();zs();var ZL=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=Wa(this.get("color",!0)),s=this.get("colorLayer",!0);return JBe(this,V9,i,s,e,t,r)},n.prototype.clearColorPalette=function(){e7e(this,V9)},n}();function QBe(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function JBe(n,e,t,r,i,s,a){s=s||n;var o=e(s),l=o.paletteIdx||0,c=o.paletteNameMap=o.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var u=a==null||!r?t:QBe(r,a);if(u=u||t,!(!u||!u.length)){var d=u[l];return i&&(c[i]=d),o.paletteIdx=(l+1)%u.length,d}}function e7e(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var vx,zy,$9,G9="\0_ec_inner",t7e=1,QQ=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,s,a,o){s=s||{},this.option=null,this._theme=new Ca(s),this._locale=new Ca(a),this._optionManager=o},e.prototype.setOption=function(t,r,i){var s=K9(r);this._optionManager.setOption(t,i,s),this._resetOption(null,s)},e.prototype.resetOption=function(t,r){return this._resetOption(t,K9(r))},e.prototype._resetOption=function(t,r){var i=!1,s=this._optionManager;if(!t||t==="recreate"){var a=s.mountOption(t==="recreate");!this.option||t==="recreate"?$9(this,a):(this.restoreData(),this._mergeOption(a,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=s.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,r))}if(!t||t==="recreate"||t==="media"){var l=s.getMediaOption(this);l.length&&wt(l,function(c){i=!0,this._mergeOption(c,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,s=this._componentsMap,a=this._componentsCount,o=[],l=jr(),c=r&&r.replaceMergeMainTypeMap;KBe(this),wt(t,function(d,h){d!=null&&(ns.hasClass(h)?h&&(o.push(h),l.set(h,!0)):i[h]=i[h]==null?Xr(d):ji(i[h],d,!0))}),c&&c.each(function(d,h){ns.hasClass(h)&&!l.get(h)&&(o.push(h),l.set(h,!0))}),ns.topologicalTravel(o,ns.getAllClassMainTypes(),u,this);function u(d){var h=ZBe(this,d,Wa(t[d])),f=s.get(d),p=f?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",m=R8e(f,h,p);B8e(m,d,ns),i[d]=null,s.set(d,null),a.set(d,0);var v=[],g=[],_=0,b;wt(m,function(S,x){var w=S.existing,M=S.newOption;if(!M)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var C=d==="series",A=ns.getClass(d,S.keyInfo.subType,!C);if(!A)return;if(d==="tooltip"){if(b)return;b=!0}if(w&&w.constructor===A)w.name=S.keyInfo.name,w.mergeOption(M,this),w.optionUpdated(M,!1);else{var T=vn({componentIndex:x},S.keyInfo);w=new A(M,this,this,T),vn(w,T),S.brandNew&&(w.__requireNewView=!0),w.init(M,this,this),w.optionUpdated(null,!0)}}w?(v.push(w.option),g.push(w),_++):(v.push(void 0),g.push(void 0))},this),i[d]=v,s.set(d,g),a.set(d,_),d==="series"&&vx(this)}this._seriesIndices||vx(this)},e.prototype.getOption=function(){var t=Xr(this.option);return wt(t,function(r,i){if(ns.hasClass(i)){for(var s=Wa(r),a=s.length,o=!1,l=a-1;l>=0;l--)s[l]&&!Zb(s[l])?o=!0:(s[l]=null,!o&&a--);s.length=a,t[i]=s}}),delete t[G9],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var s=i[r||0];if(s)return s;if(r==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,s=t.id,a=t.name,o=this._componentsMap.get(r);if(!o||!o.length)return[];var l;return i!=null?(l=[],wt(Wa(i),function(c){o[c]&&l.push(o[c])})):s!=null?l=W9("id",s,o):a!=null?l=W9("name",a,o):l=yl(o,function(c){return!!c}),q9(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,s=o(r),a=s?this.queryComponents(s):yl(this._componentsMap.get(i),function(c){return!!c});return l(q9(a,t));function o(c){var u=i+"Index",d=i+"Id",h=i+"Name";return c&&(c[u]!=null||c[d]!=null||c[h]!=null)?{mainType:i,index:c[u],id:c[d],name:c[h]}:null}function l(c){return t.filter?yl(c,t.filter):c}},e.prototype.eachComponent=function(t,r,i){var s=this._componentsMap;if(li(t)){var a=r,o=t;s.each(function(d,h){for(var f=0;d&&f<d.length;f++){var p=d[f];p&&o.call(a,h,p,p.componentIndex)}})}else for(var l=ur(t)?s.get(t):mr(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&r.call(i,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=tu(t,null);return yl(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return yl(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return yl(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){zy(this),wt(this._seriesIndices,function(i){var s=this._componentsMap.get("series")[i];t.call(r,s,i)},this)},e.prototype.eachRawSeries=function(t,r){wt(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){zy(this),wt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];a.subType===t&&r.call(i,a,s)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return wt(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return zy(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){zy(this);var i=[];wt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];t.call(r,a,s)&&i.push(s)},this),this._seriesIndices=i,this._seriesIndicesMap=jr(i)},e.prototype.restoreData=function(t){vx(this);var r=this._componentsMap,i=[];r.each(function(s,a){ns.hasClass(a)&&i.push(a)}),ns.topologicalTravel(i,ns.getAllClassMainTypes(),function(s){wt(r.get(s),function(a){a&&(s!=="series"||!n7e(a,t))&&a.restoreData()})})},e.internalField=function(){vx=function(t){var r=t._seriesIndices=[];wt(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=jr(r)},zy=function(t){},$9=function(t,r){t.option={},t.option[G9]=t7e,t._componentsMap=jr({series:[]}),t._componentsCount=jr();var i=r.aria;mr(i)&&i.enabled==null&&(i.enabled=!0),r7e(r,t._theme.option),ji(r,WBe,!1),t._mergeOption(r,null)}}(),e}(Ca);function n7e(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function r7e(n,e){var t=n.color&&!n.colorLayer;wt(e,function(r,i){i==="colorLayer"&&t||ns.hasClass(i)||(typeof r=="object"?n[i]=n[i]?ji(n[i],r,!1):Xr(r):n[i]==null&&(n[i]=r))})}function W9(n,e,t){if(Jn(e)){var r=jr();return wt(e,function(s){if(s!=null){var a=tu(s,null);a!=null&&r.set(s,!0)}}),yl(t,function(s){return s&&r.get(s[n])})}else{var i=tu(e,null);return yl(t,function(s){return s&&i!=null&&s[n]===i})}}function q9(n,e){return e.hasOwnProperty("subType")?yl(n,function(t){return t&&t.subType===e.subType}):n}function K9(n){var e=jr();return n&&wt(Wa(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Bd(QQ,ZL);const JQ=QQ;var i7e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],s7e=function(){function n(e){wt(i7e,function(t){this[t]=Li(e[t],e)},this)}return n}();const eJ=s7e;var hE={},a7e=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];wt(hE,function(i,s){var a=i.create(e,t);r=r.concat(a||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){wt(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){hE[e]=t},n.get=function(e){return hE[e]},n}();const tJ=a7e;var o7e=/^(min|max)?(.+)$/,l7e=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(wt(Wa(e.series),function(a){a&&a.data&&To(a.data)&&zR(a.data)}),wt(Wa(e.dataset),function(a){a&&a.source&&To(a.source)&&zR(a.source)})),e=Xr(e);var i=this._optionBackup,s=c7e(e,t,!i);this._newBaseOption=s.baseOption,i?(s.timelineOptions.length&&(i.timelineOptions=s.timelineOptions),s.mediaList.length&&(i.mediaList=s.mediaList),s.mediaDefault&&(i.mediaDefault=s.mediaDefault)):this._optionBackup=s},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Xr(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Xr(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,s=this._mediaDefault,a=[],o=[];if(!i.length&&!s)return o;for(var l=0,c=i.length;l<c;l++)u7e(i[l].query,t,r)&&a.push(l);return!a.length&&s&&(a=[-1]),a.length&&!f7e(a,this._currentMediaIndices)&&(o=Zr(a,function(u){return Xr(u===-1?s.option:i[u].option)})),this._currentMediaIndices=a,o},n}();function c7e(n,e,t){var r=[],i,s,a=n.baseOption,o=n.timeline,l=n.options,c=n.media,u=!!n.media,d=!!(l||o||a&&a.timeline);a?(s=a,s.timeline||(s.timeline=o)):((d||u)&&(n.options=n.media=null),s=n),u&&Jn(c)&&wt(c,function(f){f&&f.option&&(f.query?r.push(f):i||(i=f))}),h(s),wt(l,function(f){return h(f)}),wt(r,function(f){return h(f.option)});function h(f){wt(e,function(p){p(f,t)})}return{baseOption:s,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function u7e(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return wt(n,function(s,a){var o=a.match(o7e);if(!(!o||!o[1]||!o[2])){var l=o[1],c=o[2].toLowerCase();d7e(r[c],s,l)||(i=!1)}}),i}function d7e(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function f7e(n,e){return n.join(",")===e.join(",")}const h7e=l7e;var ql=wt,n_=mr,Y9=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function pE(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=Y9.length;t<r;t++){var i=Y9[t],s=e.normal,a=e.emphasis;s&&s[i]&&(n[i]=n[i]||{},n[i].normal?ji(n[i].normal,s[i]):n[i].normal=s[i],s[i]=null),a&&a[i]&&(n[i]=n[i]||{},n[i].emphasis?ji(n[i].emphasis,a[i]):n[i].emphasis=a[i],a[i]=null)}}function ba(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,Ji(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function x1(n){ba(n,"itemStyle"),ba(n,"lineStyle"),ba(n,"areaStyle"),ba(n,"label"),ba(n,"labelLine"),ba(n,"upperLabel"),ba(n,"edgeLabel")}function us(n,e){var t=n_(n)&&n[e],r=n_(t)&&t.textStyle;if(r)for(var i=0,s=e9.length;i<s;i++){var a=e9[i];r.hasOwnProperty(a)&&(t[a]=r[a])}}function hl(n){n&&(x1(n),us(n,"label"),n.emphasis&&us(n.emphasis,"label"))}function p7e(n){if(n_(n)){pE(n),x1(n),us(n,"label"),us(n,"upperLabel"),us(n,"edgeLabel"),n.emphasis&&(us(n.emphasis,"label"),us(n.emphasis,"upperLabel"),us(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(pE(e),hl(e));var t=n.markLine;t&&(pE(t),hl(t));var r=n.markArea;r&&hl(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var s=n.links||n.edges;if(s&&!To(s))for(var a=0;a<s.length;a++)hl(s[a]);wt(n.categories,function(c){x1(c)})}if(i&&!To(i))for(var a=0;a<i.length;a++)hl(i[a]);if(e=n.markPoint,e&&e.data)for(var o=e.data,a=0;a<o.length;a++)hl(o[a]);if(t=n.markLine,t&&t.data)for(var l=t.data,a=0;a<l.length;a++)Jn(l[a])?(hl(l[a][0]),hl(l[a][1])):hl(l[a]);n.type==="gauge"?(us(n,"axisLabel"),us(n,"title"),us(n,"detail")):n.type==="treemap"?(ba(n.breadcrumb,"itemStyle"),wt(n.levels,function(c){x1(c)})):n.type==="tree"&&x1(n.leaves)}}function Iu(n){return Jn(n)?n:n?[n]:[]}function X9(n){return(Jn(n)?n[0]:n)||{}}function m7e(n,e){ql(Iu(n.series),function(r){n_(r)&&p7e(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),ql(t,function(r){ql(Iu(n[r]),function(i){i&&(us(i,"axisLabel"),us(i.axisPointer,"label"))})}),ql(Iu(n.parallel),function(r){var i=r&&r.parallelAxisDefault;us(i,"axisLabel"),us(i&&i.axisPointer,"label")}),ql(Iu(n.calendar),function(r){ba(r,"itemStyle"),us(r,"dayLabel"),us(r,"monthLabel"),us(r,"yearLabel")}),ql(Iu(n.radar),function(r){us(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),ql(Iu(n.geo),function(r){n_(r)&&(hl(r),ql(Iu(r.regions),function(i){hl(i)}))}),ql(Iu(n.timeline),function(r){hl(r),ba(r,"label"),ba(r,"itemStyle"),ba(r,"controlStyle",!0);var i=r.data;Jn(i)&&wt(i,function(s){mr(s)&&(ba(s,"label"),ba(s,"itemStyle"))})}),ql(Iu(n.toolbox),function(r){ba(r,"iconStyle"),ql(r.feature,function(i){ba(i,"iconStyle")})}),us(X9(n.axisPointer),"label"),us(X9(n.tooltip).axisPointer,"label")}function v7e(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function g7e(n,e,t,r){for(var i=e.split(","),s=n,a,o=0;o<i.length-1;o++)a=i[o],s[a]==null&&(s[a]={}),s=s[a];(r||s[i[o]]==null)&&(s[i[o]]=t)}function j9(n){n&&wt(y7e,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var y7e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],b7e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],mE=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Uy(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<mE.length;t++){var r=mE[t][1],i=mE[t][0];e[r]!=null&&(e[i]=e[r])}}function Z9(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function Q9(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function _7e(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function nJ(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&nJ(n[t].children,e)}function rJ(n,e){m7e(n,e),n.series=Wa(n.series),wt(n.series,function(t){if(mr(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),Z9(t.label);var i=t.data;if(i&&!To(i))for(var s=0;s<i.length;s++)Z9(i[s]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var a=v7e(t,"pointer.color");a!=null&&g7e(t,"itemStyle.color",a)}else if(r==="bar"){Uy(t),Uy(t.backgroundStyle),Uy(t.emphasis);var i=t.data;if(i&&!To(i))for(var s=0;s<i.length;s++)typeof i[s]=="object"&&(Uy(i[s]),Uy(i[s]&&i[s].emphasis))}else if(r==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),Q9(t),nJ(t.data,Q9)}else r==="graph"||r==="sankey"?_7e(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Ji(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),j9(t)}}),n.dataRange&&(n.visualMap=n.dataRange),wt(b7e,function(t){var r=n[t];r&&(Jn(r)||(r=[r]),wt(r,function(i){j9(i)}))})}function S7e(n){var e=jr();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),s=t.getData(),a={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:t};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&s.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),e.each(x7e)}function x7e(n){wt(n,function(e,t){var r=[],i=[NaN,NaN],s=[e.stackResultDimension,e.stackedOverDimension],a=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(s,function(c,u,d){var h=a.get(e.stackedDimension,d);if(isNaN(h))return i;var f,p;o?p=a.getRawIndex(d):f=a.get(e.stackedByDimension,d);for(var m=NaN,v=t-1;v>=0;v--){var g=n[v];if(o||(p=g.data.rawIndexOf(g.stackedByDimension,f)),p>=0){var _=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=M8e(h,_),m=_;break}}}return r[0]=h,r[1]=m,r})})}var NT=function(){function n(e){this.data=e.data||(e.sourceFormat===Su?{}:[]),this.sourceFormat=e.sourceFormat||YQ,this.seriesLayoutBy=e.seriesLayoutBy||dd,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&jQ(this,r)===js.Must&&(i.type="ordinal")}}return n}();function QL(n){return n instanceof NT}function g5(n,e,t){t=t||sJ(n);var r=e.seriesLayoutBy,i=C7e(n,t,r,e.sourceHeader,e.dimensions),s=new NT({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Xr(e)});return s}function iJ(n){return new NT({data:n,sourceFormat:To(n)?Gf:_u})}function w7e(n){return new NT({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Xr(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function sJ(n){var e=YQ;if(To(n))e=Gf;else if(Jn(n)){n.length===0&&(e=Ao);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(Jn(i)||To(i)){e=Ao;break}else if(mr(i)){e=Cc;break}}}}else if(mr(n)){for(var s in n)if(i0(n,s)&&Mo(n[s])){e=Su;break}}return e}function C7e(n,e,t,r,i){var s,a;if(!n)return{dimensionsDefine:J9(i),startIndex:a,dimensionsDetectedCount:s};if(e===Ao){var o=n;r==="auto"||r==null?ez(function(c){c!=null&&c!=="-"&&(ur(c)?a==null&&(a=1):a=0)},t,o,10):a=gs(r)?r:r?1:0,!i&&a===1&&(i=[],ez(function(c,u){i[u]=c!=null?c+"":""},t,o,1/0)),s=i?i.length:t===Zg?o.length:o[0]?o[0].length:null}else if(e===Cc)i||(i=M7e(n));else if(e===Su)i||(i=[],wt(n,function(c,u){i.push(u)}));else if(e===_u){var l=TT(n[0]);s=Jn(l)&&l.length||1}return{startIndex:a,dimensionsDefine:J9(i),dimensionsDetectedCount:s}}function M7e(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return vs(t)}function J9(n){if(n){var e=jr();return Zr(n,function(t,r){t=mr(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var s=e.get(i.name);return s?i.name+="-"+s.count++:e.set(i.name,{count:1}),i})}}function ez(n,e,t,r){if(e===Zg)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var s=t[0]||[],i=0;i<s.length&&i<r;i++)n(s[i],i)}function aJ(n){var e=n.sourceFormat;return e===Cc||e===Su}var Wh,qh,Kh,tz,nz,oJ=function(){function n(e,t){var r=QL(e)?e:iJ(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Gf&&(this._offset=0,this._dimSize=t,this._data=i),nz(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;nz=function(a,o,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,h=l.dimensionsDefine,f=tz[JL(c,u)];if(vn(a,f),c===Gf)a.getItem=t,a.count=i,a.fillStorage=r;else{var p=lJ(c,u);a.getItem=Li(p,null,o,d,h);var m=cJ(c,u);a.count=Li(m,null,o,d,h)}};var t=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,c=this._dimSize,u=c*a,d=0;d<c;d++)o[d]=l[u+d];return o},r=function(a,o,l,c){for(var u=this._data,d=this._dimSize,h=0;h<d;h++){for(var f=c[h],p=f[0]==null?1/0:f[0],m=f[1]==null?-1/0:f[1],v=o-a,g=l[h],_=0;_<v;_++){var b=u[_*d+h];g[a+_]=b,b<p&&(p=b),b>m&&(m=b)}f[0]=p,f[1]=m}},i=function(){return this._data?this._data.length/this._dimSize:0};tz=(e={},e[Ao+"_"+dd]={pure:!0,appendData:s},e[Ao+"_"+Zg]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Cc]={pure:!0,appendData:s},e[Su]={pure:!0,appendData:function(a){var o=this._data;wt(a,function(l,c){for(var u=o[c]||(o[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},e[_u]={appendData:s},e[Gf]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function s(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),n}(),rz=function(n,e,t,r){return n[r]},T7e=(Wh={},Wh[Ao+"_"+dd]=function(n,e,t,r){return n[r+e]},Wh[Ao+"_"+Zg]=function(n,e,t,r,i){r+=e;for(var s=i||[],a=n,o=0;o<a.length;o++){var l=a[o];s[o]=l?l[r]:null}return s},Wh[Cc]=rz,Wh[Su]=function(n,e,t,r,i){for(var s=i||[],a=0;a<t.length;a++){var o=t[a].name,l=n[o];s[a]=l?l[r]:null}return s},Wh[_u]=rz,Wh);function lJ(n,e){var t=T7e[JL(n,e)];return t}var iz=function(n,e,t){return n.length},A7e=(qh={},qh[Ao+"_"+dd]=function(n,e,t){return Math.max(0,n.length-e)},qh[Ao+"_"+Zg]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},qh[Cc]=iz,qh[Su]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},qh[_u]=iz,qh);function cJ(n,e){var t=A7e[JL(n,e)];return t}var vE=function(n,e,t){return n[e]},E7e=(Kh={},Kh[Ao]=vE,Kh[Cc]=function(n,e,t){return n[t]},Kh[Su]=vE,Kh[_u]=function(n,e,t){var r=TT(n);return r instanceof Array?r[e]:r},Kh[Gf]=vE,Kh);function uJ(n){var e=E7e[n];return e}function JL(n,e){return n===Ao?n+"_"+e:n}function VC(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),s=i.getSource().sourceFormat;if(t!=null){var a=n.getDimensionIndex(t),o=i.getDimensionProperty(a);return uJ(s)(r,a,o)}else{var l=r;return s===_u&&(l=TT(r)),l}}}}var I7e=/\{@(.+?)\}/g,R7e=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),s=r.getRawIndex(e),a=r.getName(e),o=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),c=l&&l[r.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,h=d==="series",f=r.userOutput&&r.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:s,data:o,dataType:t,value:i,color:c,borderColor:u,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,s,a){t=t||"normal";var o=this.getData(r),l=this.getDataParams(e,r);if(a&&(l.value=a.interpolatedValue),i!=null&&Jn(l.value)&&(l.value=l.value[i]),!s){var c=o.getItemModel(e);s=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(li(s))return l.status=t,l.dimensionIndex=i,s(l);if(ur(s)){var u=WQ(s,l);return u.replace(I7e,function(d,h){var f=h.length,p=h;p.charAt(0)==="["&&p.charAt(f-1)==="]"&&(p=+p.slice(1,f-1));var m=VC(o,e,p);if(a&&Jn(a.interpolatedValue)){var v=o.getDimensionIndex(p);v>=0&&(m=a.interpolatedValue[v])}return m!=null?m+"":""})}},n.prototype.getRawValue=function(e,t){return VC(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function sz(n){var e,t;return mr(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function Q1(n){return new P7e(n)}var P7e=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!r&&(s=this._plan(this.context));var a=u(this._modBy),o=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(a!==l||o!==c)&&(s="reset");function u(_){return!(_>=1)&&(_=1),_}var d;(this._dirty||s==="reset")&&(this._dirty=!1,d=this._doReset(r)),this._modBy=l,this._modDataCount=c;var h=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(d||f<p)){var m=this._progress;if(Jn(m))for(var v=0;v<m.length;v++)this._doProgress(m[v],f,p,l,c);else this._doProgress(m,f,p,l,c)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,s){az.reset(t,r,i,s),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:az.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),Jn(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),az=function(){var n,e,t,r,i,s={reset:function(l,c,u,d){e=l,n=c,t=u,r=d,i=Math.ceil(r/t),s.next=t>1&&r>0?o:a}};return s;function a(){return e<n?e++:null}function o(){var l=e%i*t+Math.ceil(e/i),c=e>=n?null:l<r?l:e;return e++,c}}();function M2(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!gs(n)&&n!=null&&n!=="-"&&(n=+MT(n)),n==null||n===""?NaN:Number(n))}jr({number:function(n){return parseFloat(n)},time:function(n){return+MT(n)},trim:function(n){return ur(n)?Kc(n):n}});var D7e=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=gs(e)?e:OC(e),i=gs(t)?t:OC(t),s=isNaN(r),a=isNaN(i);if(s&&(r=this._incomparable),a&&(i=this._incomparable),s&&a){var o=ur(e),l=ur(t);o&&(r=l?e:0),l&&(i=o?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),L7e=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return M2(e,t)},n}();function k7e(n,e){var t=new L7e,r=n.data,i=t.sourceFormat=n.sourceFormat,s=n.startIndex,a="";n.seriesLayoutBy!==dd&&uo(a);var o=[],l={},c=n.dimensionsDefine;if(c)wt(c,function(m,v){var g=m.name,_={index:v,name:g,displayName:m.displayName};if(o.push(_),g!=null){var b="";i0(l,g)&&uo(b),l[g]=_}});else for(var u=0;u<n.dimensionsDetectedCount;u++)o.push({index:u});var d=lJ(i,dd);e.__isBuiltIn&&(t.getRawDataItem=function(m){return d(r,s,o,m)},t.getRawData=Li(O7e,null,n)),t.cloneRawData=Li(N7e,null,n);var h=cJ(i,dd);t.count=Li(h,null,r,s,o);var f=uJ(i);t.retrieveValue=function(m,v){var g=d(r,s,o,m);return p(g,v)};var p=t.retrieveValueFromItem=function(m,v){if(m!=null){var g=o[v];if(g)return f(m,v,g.name)}};return t.getDimensionInfo=Li(B7e,null,o,l),t.cloneAllDimensionInfo=Li(F7e,null,o),t}function O7e(n){var e=n.sourceFormat;if(!ek(e)){var t="";uo(t)}return n.data}function N7e(n){var e=n.sourceFormat,t=n.data;if(!ek(e)){var r="";uo(r)}if(e===Ao){for(var i=[],s=0,a=t.length;s<a;s++)i.push(t[s].slice());return i}else if(e===Cc){for(var i=[],s=0,a=t.length;s<a;s++)i.push(vn({},t[s]));return i}}function B7e(n,e,t){if(t!=null){if(gs(t)||!isNaN(t)&&!i0(e,t))return n[t];if(i0(e,t))return e[t]}}function F7e(n){return Xr(n)}var dJ=jr();function z7e(n){n=Xr(n);var e=n.type,t="";e||uo(t);var r=e.split(":");r.length!==2&&uo(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,dJ.set(e,n)}function U7e(n,e,t){var r=Wa(n),i=r.length,s="";i||uo(s);for(var a=0,o=i;a<o;a++){var l=r[a];e=H7e(l,e),a!==o-1&&(e.length=Math.max(e.length,1))}return e}function H7e(n,e,t,r){var i="";e.length||uo(i),mr(n)||uo(i);var s=n.type,a=dJ.get(s);a||uo(i);var o=Zr(e,function(c){return k7e(c,a)}),l=Wa(a.transform({upstream:o[0],upstreamList:o,config:Xr(n.config)}));return Zr(l,function(c,u){var d="";mr(c)||uo(d),c.data||uo(d);var h=sJ(c.data);ek(h)||uo(d);var f,p=e[0];if(p&&u===0&&!c.dimensions){var m=p.startIndex;m&&(c.data=p.data.slice(0,m).concat(c.data)),f={seriesLayoutBy:dd,sourceHeader:m,dimensions:p.metaRawOption.dimensions}}else f={seriesLayoutBy:dd,sourceHeader:0,dimensions:c.dimensions};return g5(c.data,f,null)})}function ek(n){return n===Ao||n===Cc}var BT="undefined",V7e=typeof Uint32Array===BT?Array:Uint32Array,$7e=typeof Uint16Array===BT?Array:Uint16Array,fJ=typeof Int32Array===BT?Array:Int32Array,oz=typeof Float64Array===BT?Array:Float64Array,hJ={float:oz,int:fJ,ordinal:Array,number:Array,time:oz},gE;function j0(n){return n>65535?V7e:$7e}function Z0(){return[1/0,-1/0]}function G7e(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function lz(n,e,t,r,i){var s=hJ[t||"float"];if(i){var a=n[e],o=a&&a.length;if(o!==r){for(var l=new s(r),c=0;c<o;c++)l[c]=a[c];n[e]=l}}else n[e]=new s(r)}var y5=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jr()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),s=this.defaultDimValueGetter=gE[i.sourceFormat];this._dimValueGetter=r||s,this._rawExtent=[],aJ(i),this._dimensions=Zr(t,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,s=r.get(e);if(s!=null){if(i[s].type===t)return s}else s=i.length;return i[s]={type:t},r.set(e,s),this._chunks[s]=new hJ[t||"float"](this._rawCount),this._rawExtent[s]=Z0(),s},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],s=this._rawExtent,a=i.ordinalOffset||0,o=r.length;a===0&&(s[e]=Z0());for(var l=s[e],c=a;c<o;c++){var u=r[c]=t.parseAndCollect(r[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}i.ordinalMeta=t,i.ordinalOffset=o,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,s=i.length,a=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),c=0;c<s;c++){var u=i[c];lz(r,c,u.type,l,!0)}for(var d=[],h=o;h<l;h++)for(var f=h-o,p=0;p<s;p++){var u=i[p],m=gE.arrayRows.call(this,e[f]||d,u.property,f,p);r[p][h]=m;var v=a[p];m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,s=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,c=Zr(a,function(_){return _.property}),u=0;u<o;u++){var d=a[u];l[u]||(l[u]=Z0()),lz(s,u,d.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,s,l);else for(var h=[],f=e;f<t;f++){h=i.getItem(f,h);for(var p=0;p<o;p++){var m=s[p],v=this._dimValueGetter(h,c[p],f,p);m[f]=v;var g=l[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var s=0;s<this._dimensions.length;s++)i.push(s)}else i=e;for(var s=0,a=i.length;s<a;s++)r.push(this.get(i[s],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,s=this.count();i<s;i++){var a=this.get(e,i);isNaN(a)||(r+=a)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(s){isNaN(s)||t.push(s)});var r=t.sort(function(s,a){return s-a}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,s=this._count-1;i<=s;){var a=(i+s)/2|0;if(t[a]<e)i=a+1;else if(t[a]>e)s=a-1;else return a}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,s=i[e],a=[];if(!s)return a;r==null&&(r=1/0);for(var o=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var h=this.getRawIndex(u),f=t-s[h],p=Math.abs(f);p<=r&&((p<o||p===o&&f>=0&&l<0)&&(o=p,l=f,c=0),f===l&&(a[c++]=u))}return a.length=c,a},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var s=0;s<i;s++)e[s]=t[s]}else e=new r(t.buffer,0,i)}else{var r=j0(this._rawCount);e=new r(this.count());for(var s=0;s<e.length;s++)e[s]=s}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),s=j0(r._rawCount),a=new s(i),o=[],l=e.length,c=0,u=e[0],d=r._chunks,h=0;h<i;h++){var f=void 0,p=r.getRawIndex(h);if(l===0)f=t(h);else if(l===1){var m=d[u][p];f=t(m,h)}else{for(var v=0;v<l;v++)o[v]=d[e[v]][p];o[v]=h,f=t.apply(null,o)}f&&(a[c++]=p)}return c<i&&(r._indices=a),r._count=c,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=vs(e),s=i.length;if(!s)return this;var a=t.count(),o=j0(t._rawCount),l=new o(a),c=0,u=i[0],d=e[u][0],h=e[u][1],f=t._chunks,p=!1;if(!t._indices){var m=0;if(s===1){for(var v=f[i[0]],g=0;g<r;g++){var _=v[g];(_>=d&&_<=h||isNaN(_))&&(l[c++]=m),m++}p=!0}else if(s===2){for(var v=f[i[0]],b=f[i[1]],S=e[i[1]][0],x=e[i[1]][1],g=0;g<r;g++){var _=v[g],w=b[g];(_>=d&&_<=h||isNaN(_))&&(w>=S&&w<=x||isNaN(w))&&(l[c++]=m),m++}p=!0}}if(!p)if(s===1)for(var g=0;g<a;g++){var M=t.getRawIndex(g),_=f[i[0]][M];(_>=d&&_<=h||isNaN(_))&&(l[c++]=M)}else for(var g=0;g<a;g++){for(var C=!0,M=t.getRawIndex(g),A=0;A<s;A++){var T=i[A],_=f[T][M];(_<e[T][0]||_>e[T][1])&&(C=!1)}C&&(l[c++]=t.getRawIndex(g))}return c<a&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,s=[],a=t.length,o=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=Z0();for(var d=0;d<o;d++){for(var h=e.getRawIndex(d),f=0;f<a;f++)l[f]=i[t[f]][h];l[a]=d;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(s[0]=p,p=s);for(var u=0;u<p.length;u++){var m=t[u],v=p[u],g=c[m],_=i[m];_&&(_[h]=v),v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,s=i[e],a=this.count(),o=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,d,h,f=new(j0(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));f[o++]=c;for(var p=1;p<a-1;p+=l){for(var m=Math.min(p+l,a-1),v=Math.min(p+l*2,a),g=(v+m)/2,_=0,b=m;b<v;b++){var S=this.getRawIndex(b),x=s[S];isNaN(x)||(_+=x)}_/=v-m;var w=p,M=Math.min(p+l,a),C=p-1,A=s[c];u=-1,h=w;for(var T=-1,I=0,b=w;b<M;b++){var S=this.getRawIndex(b),x=s[S];if(isNaN(x)){I++,T<0&&(T=S);continue}d=Math.abs((C-g)*(x-A)-(C-b)*(_-A)),d>u&&(u=d,h=S)}I>0&&I<M-w&&(f[o++]=Math.min(T,h),h=Math.max(T,h)),f[o++]=h,c=h}return f[o++]=this.getRawIndex(a-1),r._count=o,r._indices=f,r.getRawIndex=this._getRawIdx,r},n.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),i=r._chunks,s=Math.floor(1/t),a=i[e],o=this.count(),l=new(j0(this._rawCount))(Math.ceil(o/s)*2),c=0,u=0;u<o;u+=s){var d=u,h=a[this.getRawIndex(d)],f=u,p=a[this.getRawIndex(f)],m=s;u+s>o&&(m=o-u);for(var v=0;v<m;v++){var g=this.getRawIndex(u+v),_=a[g];_<h&&(h=_,d=u+v),_>p&&(p=_,f=u+v)}var b=this.getRawIndex(d),S=this.getRawIndex(f);d<f?(l[c++]=b,l[c++]=S):(l[c++]=S,l[c++]=b)}return r._count=c,r._indices=l,r._updateGetRawIdx(),r},n.prototype.downSample=function(e,t,r,i){for(var s=this.clone([e],!0),a=s._chunks,o=[],l=Math.floor(1/t),c=a[e],u=this.count(),d=s._rawExtent[e]=Z0(),h=new(j0(this._rawCount))(Math.ceil(u/l)),f=0,p=0;p<u;p+=l){l>u-p&&(l=u-p,o.length=l);for(var m=0;m<l;m++){var v=this.getRawIndex(p+m);o[m]=c[v]}var g=r(o),_=this.getRawIndex(Math.min(p+i(o,g)||0,u-1));c[_]=g,g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g),h[f++]=_}return s._count=f,s._indices=h,s._updateGetRawIdx(),s},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,s=0,a=this.count();s<a;s++){var o=this.getRawIndex(s);switch(r){case 0:t(s);break;case 1:t(i[e[0]][o],s);break;case 2:t(i[e[0]][o],i[e[1]][o],s);break;default:for(var l=0,c=[];l<r;l++)c[l]=i[e[l]][o];c[l]=s,t.apply(null,c)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=Z0();if(!t)return r;var i=this.count(),s=!this._indices,a;if(s)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=r;for(var o=a[0],l=a[1],c=0;c<i;c++){var u=this.getRawIndex(c),d=t[u];d<o&&(o=d),d>l&&(l=d)}return a=[o,l],this._extent[e]=a,a},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,s=0;s<i.length;s++)r.push(i[s][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,s=e&&ah(e,function(o,l){return o[l]=!0,o},{});if(s)for(var a=0;a<i.length;a++)r._chunks[a]=s[a]?G7e(i[a]):i[a];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Xr(this._extent),e._rawExtent=Xr(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,s){return M2(t[s],this._dimensions[s])}gE={arrayRows:e,objectRows:function(t,r,i,s){return M2(t[r],this._dimensions[s])},keyedColumns:e,original:function(t,r,i,s){var a=t&&(t.value==null?t:t.value);return M2(a instanceof Array?a[s]:a,this._dimensions[s])},typedArray:function(t,r,i,s){return t[s]}}}(),n}(),W7e=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,s;if(gx(e)){var a=e,o=void 0,l=void 0,c=void 0;if(r){var u=t[0];u.prepareSource(),c=u.getSource(),o=c.data,l=c.sourceFormat,s=[u._getVersionSign()]}else o=a.get("data",!0),l=To(o)?Gf:_u,s=[];var d=this._getSourceMetaRawOption()||{},h=c&&c.metaRawOption||{},f=Ir(d.seriesLayoutBy,h.seriesLayoutBy)||null,p=Ir(d.sourceHeader,h.sourceHeader),m=Ir(d.dimensions,h.dimensions),v=f!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||m;i=v?[g5(o,{seriesLayoutBy:f,sourceHeader:p,dimensions:m},l)]:[]}else{var g=e;if(r){var _=this._applyTransform(t);i=_.sourceList,s=_.upstreamSignList}else{var b=g.get("source",!0);i=[g5(b,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(i,s)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var s="";e.length!==1&&cz(s)}var a,o=[],l=[];return wt(e,function(c){c.prepareSource();var u=c.getSource(i||0),d="";i!=null&&!u&&cz(d),o.push(u),l.push(c._getVersionSign())}),r?a=U7e(r,o,{datasetIndex:t.componentIndex}):i!=null&&(a=[w7e(o[0])]),{sourceList:a,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,s=this._storeList,a=s[i];a||(a=s[i]={});var o=a[r];if(!o){var l=this._getUpstreamSourceManagers()[0];gx(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,r):(o=new y5,o.initData(new oJ(t,e.length),e)),a[r]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(gx(e)){var t=XQ(e);return t?[t.getSourceManager()]:[]}else return Zr(XBe(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(gx(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=e;t=s.get("seriesLayoutBy",!0),r=s.get("sourceHeader",!0),i=s.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function gx(n){return n.mainType==="series"}function cz(n){throw new Error(n)}var q7e="line-height:1";function pJ(n){var e=n.lineHeight;return e==null?q7e:"line-height:"+co(e+"")+"px"}function mJ(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",s=n.color||"#464646",a=n.fontSize||14,o=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+co(r+"")+"px;color:"+co(t)+";font-weight:"+co(i+""),valueStyle:"font-size:"+co(a+"")+"px;color:"+co(s)+";font-weight:"+co(o+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:a,fill:s,fontWeight:o}}}var K7e=[0,10,20,30],Y7e=["",`
`,`

`,`


`];function r_(n,e){return e.type=n,e}function b5(n){return n.type==="section"}function vJ(n){return b5(n)?X7e:j7e}function gJ(n){if(b5(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return wt(n.blocks,function(i){var s=gJ(i);s>=e&&(e=s+ +(r&&(!s||b5(i)&&!i.noHeader)))}),e}return 0}function X7e(n,e,t,r){var i=e.noHeader,s=Z7e(gJ(e)),a=[],o=e.blocks||[];wd(!o||Jn(o)),o=o||[];var l=n.orderMode;if(e.sortBlocks&&l){o=o.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(i0(c,l)){var u=new D7e(c[l],null);o.sort(function(m,v){return u.evaluate(m.sortParam,v.sortParam)})}else l==="seriesDesc"&&o.reverse()}wt(o,function(m,v){var g=e.valueFormatter,_=vJ(m)(g?vn(vn({},n),{valueFormatter:g}):n,m,v>0?s.html:0,r);_!=null&&a.push(_)});var d=n.renderMode==="richText"?a.join(s.richText):_5(r,a.join(""),i?t:s.html);if(i)return d;var h=v5(e.header,"ordinal",n.useUTC),f=mJ(r,n.renderMode).nameStyle,p=pJ(r);return n.renderMode==="richText"?yJ(n,h,f)+s.richText+d:_5(r,'<div style="'+f+";"+p+';">'+co(h)+"</div>"+d,t)}function j7e(n,e,t,r){var i=n.renderMode,s=e.noName,a=e.noValue,o=!e.markerType,l=e.name,c=n.useUTC,u=e.valueFormatter||n.valueFormatter||function(S){return S=Jn(S)?S:[S],Zr(S,function(x,w){return v5(x,Jn(f)?f[w]:f,c)})};if(!(s&&a)){var d=o?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=s?"":v5(l,"ordinal",c),f=e.valueType,p=a?[]:u(e.value,e.dataIndex),m=!o||!s,v=!o&&s,g=mJ(r,i),_=g.nameStyle,b=g.valueStyle;return i==="richText"?(o?"":d)+(s?"":yJ(n,h,_))+(a?"":eFe(n,p,m,v,b)):_5(r,(o?"":d)+(s?"":Q7e(h,!o,_))+(a?"":J7e(p,m,v,b)),t)}}function uz(n,e,t,r,i,s){if(n){var a=vJ(n),o={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return a(o,n,0,s)}}function Z7e(n){return{html:K7e[n],richText:Y7e[n]}}function _5(n,e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0",s=pJ(n);return'<div style="'+i+";"+s+';">'+e+r+"</div>"}function Q7e(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+co(n)+"</span>"}function J7e(n,e,t,r){var i=t?"10px":"20px",s=e?"float:right;margin-left:"+i:"";return n=Jn(n)?n:[n],'<span style="'+s+";"+r+'">'+Zr(n,function(a){return co(a)}).join("&nbsp;&nbsp;")+"</span>"}function yJ(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function eFe(n,e,t,r,i){var s=[i],a=r?10:20;return t&&s.push({padding:[0,0,0,a],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(Jn(e)?e.join("  "):e,s)}function tFe(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return Jb(r)}function bJ(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var yE=function(){function n(){this.richTextStyles={},this._nextStyleNameId=OZ()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,s=UBe({color:t,type:e,renderMode:r,markerId:i});return ur(s)?s:(this.richTextStyles[i]=s.style,s.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};Jn(t)?wt(t,function(s){return vn(r,s)}):vn(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function nFe(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),s=i.mapDimensionsAll("defaultedTooltip"),a=s.length,o=e.getRawValue(t),l=Jn(o),c=tFe(e,t),u,d,h,f;if(a>1||l&&!a){var p=rFe(o,e,t,s,c);u=p.inlineValues,d=p.inlineValueTypes,h=p.blocks,f=p.inlineValues[0]}else if(a){var m=i.getDimensionInfo(s[0]);f=u=VC(i,t,s[0]),d=m.type}else f=u=l?o[0]:o;var v=RL(e),g=v&&e.name||"",_=i.getName(t),b=r?g:_;return r_("section",{header:g,noHeader:r||!v,sortParam:f,blocks:[r_("nameValue",{markerType:"item",markerColor:c,name:b,noName:!Kc(b),value:u,valueType:d,dataIndex:t})].concat(h||[])})}function rFe(n,e,t,r,i){var s=e.getData(),a=ah(n,function(d,h,f){var p=s.getDimensionInfo(f);return d=d||p&&p.tooltip!==!1&&p.displayName!=null},!1),o=[],l=[],c=[];r.length?wt(r,function(d){u(VC(s,t,d),d)}):wt(n,u);function u(d,h){var f=s.getDimensionInfo(h);!f||f.otherDims.tooltip===!1||(a?c.push(r_("nameValue",{markerType:"subItem",markerColor:i,name:f.displayName,value:d,valueType:f.type})):(o.push(d),l.push(f.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:c}}var jd=zs();function yx(n,e){return n.getName(e)||n.getId(e)}var iFe="__universalTransitionEnabled",FT=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=Q1({count:aFe,reset:oFe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var s=jd(this).sourceManager=new W7e(this);s.prepareSource();var a=this.getInitialData(t,i);fz(a,this),this.dataTask.context.data=a,jd(this).dataBeforeProcessed=a,dz(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=HC(this),s=i?jL(t):{},a=this.subType;ns.hasClass(a)&&(a+="Series"),ji(t,r.getTheme().get(this.subType)),ji(t,this.getDefaultOption()),n5(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&t_(t,s,i)},e.prototype.mergeOption=function(t,r){t=ji(this.option,t,!0),this.fillDataTextStyle(t.data);var i=HC(this);i&&t_(this.option,t,i);var s=jd(this).sourceManager;s.dirty(),s.prepareSource();var a=this.getInitialData(t,r);fz(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,jd(this).dataBeforeProcessed=a,dz(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(t){if(t&&!To(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&n5(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=S5(this);if(r){var i=r.context.data;return t==null||!i.getLinkedData?i:i.getLinkedData(t)}else return jd(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=S5(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}jd(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return jr(t)},e.prototype.getSourceManager=function(){return jd(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return jd(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return nFe({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(kr.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var s=this.ecModel,a=ZL.prototype.getColorFromPalette.call(this,t,r,i);return a||(a=s.getColorFromPalette(t,r,i)),a},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var s=this.option.selectedMode,a=this.getData(r);if(s==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],c=yx(a,l);i[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],s=0;s<t.length;s++)i[0]=t[s],this.isSelected(t[s],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=vs(t),i=[],s=0;s<r.length;s++){var a=t[r[s]];a>=0&&i.push(a)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var s=this.getData(r);return(i==="all"||i[yx(s,t)])&&!s.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[iFe])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,s,a=this.option,o=a.selectedMode,l=r.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){mr(a.selectedMap)||(a.selectedMap={});for(var c=a.selectedMap,u=0;u<l;u++){var d=r[u],h=yx(t,d);c[h]=!0,this._selectedDataIndicesMap[h]=t.getRawIndex(d)}}else if(o==="single"||o===!0){var f=r[l-1],h=yx(t,f);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(s={},s[h]=t.getRawIndex(f),s)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var s=t.getRawDataItem(i);s&&s.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return ns.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(ns);Bd(FT,R7e);Bd(FT,ZL);HZ(FT,ns);function dz(n){var e=n.name;RL(n)||(n.name=sFe(n)||e)}function sFe(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return wt(t,function(i){var s=e.getDimensionInfo(i);s.displayName&&r.push(s.displayName)}),r.join(" ")}function aFe(n){return n.model.getRawData().count()}function oFe(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),lFe}function lFe(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function fz(n,e){wt(YLe(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,Rs(cFe,e))})}function cFe(n,e){var t=S5(n);return t&&t.setOutputEnd((e||this).count()),e}function S5(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}const i_=FT;var tk=function(){function n(){this.group=new lu,this.uid=kT("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();LL(tk);kL(tk);const lh=tk;function uFe(){var n=zs();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,s=!!t.progressiveRender,a=t.large=!!(r&&r.large),o=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==a||s!==o)&&"reset"}}var _J=zs(),dFe=uFe(),nk=function(){function n(){this.group=new lu,this.uid=kT("viewChart"),this.renderTask=Q1({plan:fFe,reset:hFe}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var s=e.getData(i&&i.dataType);s&&pz(s,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var s=e.getData(i&&i.dataType);s&&pz(s,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){BQ(this.group,e)},n.markUpdateMethod=function(e,t){_J(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function hz(n,e,t){n&&f5(n)&&(e==="emphasis"?o5:l5)(n,t)}function pz(n,e,t){var r=rS(n,e),i=e&&e.highlightKey!=null?lNe(e.highlightKey):null;r!=null?wt(Wa(r),function(s){hz(n.getItemGraphicEl(s),t,i)}):n.eachItemGraphicEl(function(s){hz(s,t,i)})}LL(nk);kL(nk);function fFe(n){return dFe(n.model)}function hFe(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,s=e.pipelineContext.progressiveRender,a=n.view,o=i&&_J(i).updateMethod,l=s?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](e,t,r,i),pFe[l]}var pFe={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const Ov=nk;var $C="\0__throttleOriginMethod",mz="\0__throttleRate",vz="\0__throttleType";function rk(n,e,t){var r,i=0,s=0,a=null,o,l,c,u;e=e||0;function d(){s=new Date().getTime(),a=null,n.apply(l,c||[])}var h=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];r=new Date().getTime(),l=this,c=f;var m=u||e,v=u||t;u=null,o=r-(v?i:s)-m,clearTimeout(a),v?a=setTimeout(d,m):o>=0?d():a=setTimeout(d,-o),i=r};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(f){u=f},h}function SJ(n,e,t,r){var i=n[e];if(i){var s=i[$C]||i,a=i[vz],o=i[mz];if(o!==t||a!==r){if(t==null||!r)return n[e]=s;i=n[e]=rk(s,t,r==="debounce"),i[$C]=s,i[vz]=r,i[mz]=t}return i}}function x5(n,e){var t=n[e];t&&t[$C]&&(t.clear&&t.clear(),n[e]=t[$C])}var gz=zs(),yz={itemStyle:Qb(UQ,!0),lineStyle:Qb(zQ,!0)},mFe={lineStyle:"stroke",itemStyle:"fill"};function xJ(n,e){var t=n.visualStyleMapper||yz[e];return t||(console.warn("Unknown style type '"+e+"'."),yz.itemStyle)}function wJ(n,e){var t=n.visualDrawType||mFe[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var vFe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),s=xJ(n,r),a=s(i),o=i.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=wJ(n,r),c=a[l],u=li(c)?c:null,d=a.fill==="auto"||a.stroke==="auto";if(!a[l]||u||d){var h=n.getColorFromPalette(n.name,null,e.getSeriesCount());a[l]||(a[l]=h,t.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||li(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||li(a.stroke)?h:a.stroke}if(t.setVisual("style",a),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,p){var m=n.getDataParams(p),v=vn({},a);v[l]=u(m),f.setItemVisual(p,"style",v)}}}},Hy=new Ca,gFe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=xJ(n,r),s=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[r]){Hy.option=l[r];var c=i(Hy),u=a.ensureUniqueItemVisual(o,"style");vn(u,c),Hy.option.decal&&(a.setItemVisual(o,"decal",Hy.option.decal),Hy.option.decal.dirty=!0),s in c&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},yFe={performRawSeries:!0,overallReset:function(n){var e=jr();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,s=e.get(i);s||(s={},e.set(i,s)),gz(t).scope=s}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},s=t.getData(),a=gz(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=wJ(t,o);s.each(function(c){var u=s.getRawIndex(c);i[u]=c}),r.each(function(c){var u=i[c],d=s.getItemVisual(u,"colorFromPalette");if(d){var h=s.ensureUniqueItemVisual(u,"style"),f=r.getName(c)||c+"",p=r.count();h[l]=t.getColorFromPalette(f,a,p)}})}})}},bx=Math.PI;function bFe(n,e){e=e||{},Ji(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new lu,r=new _o({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new ja({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new _o({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(s);var a;return e.showSpinner&&(a=new HL({shape:{startAngle:-bx/2,endAngle:-bx/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:bx*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:bx*3/2}).delay(300).start("circularInOut"),t.add(a)),t.resize=function(){var o=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(n.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),u=n.getHeight()/2;e.showSpinner&&a.setShape({cx:c,cy:u}),s.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var _Fe=function(){function n(e,t,r,i){this._stageTaskMap=jr(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,s=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,a=s?r.step:null,o=i&&i.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),s=i.count(),a=r.progressiveEnabled&&t.incrementalPrepareRender&&s>=r.threshold,o=e.get("large")&&s>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?s:null;e.pipelineContext=r.context={progressiveRender:a,modDataCount:l,large:o}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=jr();e.eachSeries(function(i){var s=i.getProgressive(),a=i.uid;r.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:s&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;wt(this._allHandlers,function(i){var s=e.get(i.uid)||e.set(i.uid,{}),a="";wd(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,s,t,r),i.overallReset&&this._createOverallStageTask(i,s,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var s=e.renderTask,a=s.context;a.model=t,a.ecModel=r,a.api=i,s.__block=!e.incrementalPrepareRender,this._pipe(t,s)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var s=!1,a=this;wt(e,function(l,c){if(!(i.visualType&&i.visualType!==l.visualType)){var u=a._stageTaskMap.get(l.uid),d=u.seriesTaskMap,h=u.overallTask;if(h){var f,p=h.agentStubMap;p.each(function(v){o(i,v)&&(v.dirty(),f=!0)}),f&&h.dirty(),a.updatePayload(h,r);var m=a.getPerformArgs(h,i.block);p.each(function(v){v.perform(m)}),h.perform(m)&&(s=!0)}else d&&d.each(function(v,g){o(i,v)&&v.dirty();var _=a.getPerformArgs(v,i.block);_.skip=!l.performRawSeries&&t.isSeriesFiltered(v.context.model),a.updatePayload(v,r),v.perform(_)&&(s=!0)})}});function o(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=s||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var s=this,a=t.seriesTaskMap,o=t.seriesTaskMap=jr(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):l?r.eachRawSeriesByType(l,u):c&&c(r,i).each(u);function u(d){var h=d.uid,f=o.set(h,a&&a.get(h)||Q1({plan:MFe,reset:TFe,count:EFe}));f.context={model:d,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:s},s._pipe(d,f)}},n.prototype._createOverallStageTask=function(e,t,r,i){var s=this,a=t.overallTask=t.overallTask||Q1({reset:SFe});a.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:s};var o=a.agentStubMap,l=a.agentStubMap=jr(),c=e.seriesType,u=e.getTargetSeries,d=!0,h=!1,f="";wd(!e.createOnAllSeries,f),c?r.eachRawSeriesByType(c,p):u?u(r,i).each(p):(d=!1,wt(r.getSeries(),p));function p(m){var v=m.uid,g=l.set(v,o&&o.get(v)||(h=!0,Q1({reset:xFe,onDirty:CFe})));g.context={model:m,overallProgress:d},g.agent=a,g.__block=d,s._pipe(m,g)}h&&a.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return li(e)&&(e={overallReset:e,seriesType:IFe(e)}),e.uid=kT("stageHandler"),t&&(e.visualType=t),e},n}();function SFe(n){n.overallReset(n.ecModel,n.api,n.payload)}function xFe(n){return n.overallProgress&&wFe}function wFe(){this.agent.dirty(),this.getDownstream().dirty()}function CFe(){this.agent&&this.agent.dirty()}function MFe(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function TFe(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Wa(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?Zr(e,function(t,r){return CJ(r)}):AFe}var AFe=CJ(0);function CJ(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var s=e.start;s<e.end;s++)i.dataEach(r,s);else i&&i.progress&&i.progress(e,r)}}function EFe(n){return n.data.count()}function IFe(n){GC=null;try{n(s_,MJ)}catch{}return GC}var s_={},MJ={},GC;TJ(s_,JQ);TJ(MJ,eJ);s_.eachSeriesByType=s_.eachRawSeriesByType=function(n){GC=n};s_.eachComponent=function(n){n.mainType==="series"&&n.subType&&(GC=n.subType)};function TJ(n,e){for(var t in e.prototype)n[t]=bo}const AJ=_Fe;var bz=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const RFe={color:bz,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],bz]};var ma="#B9B8CE",_z="#100C2A",_x=function(){return{axisLine:{lineStyle:{color:ma}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Sz=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],EJ={darkMode:!0,color:Sz,backgroundColor:_z,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ma},pageTextStyle:{color:ma}},textStyle:{color:ma},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ma}},dataZoom:{borderColor:"#71708A",textStyle:{color:ma},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ma}},timeline:{lineStyle:{color:ma},label:{color:ma},controlStyle:{color:ma,borderColor:ma}},calendar:{itemStyle:{color:_z},dayLabel:{color:ma},monthLabel:{color:ma},yearLabel:{color:ma}},timeAxis:_x(),logAxis:_x(),valueAxis:_x(),categoryAxis:_x(),line:{symbol:"circle"},graph:{color:Sz},gauge:{title:{color:ma},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ma},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};EJ.categoryAxis.splitLine.show=!1;const PFe=EJ;var DFe=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(ur(e)){var s=Yc(e);t.mainType=s.main||null,t.subType=s.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};wt(e,function(l,c){for(var u=!1,d=0;d<a.length;d++){var h=a[d],f=c.lastIndexOf(h);if(f>0&&f===c.length-h.length){var p=c.slice(0,f);p!=="data"&&(t.mainType=p,t[h.toLowerCase()]=l,u=!0)}}o.hasOwnProperty(c)&&(r[c]=l,u=!0),u||(i[c]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,s=r.packedEvent,a=r.model,o=r.view;if(!a||!o)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(c,s,"name")&&u(c,s,"dataIndex")&&u(c,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,i,s));function u(d,h,f,p){return d[f]==null||h[p||f]===d[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),w5=["symbol","symbolSize","symbolRotate","symbolOffset"],xz=w5.concat(["symbolKeepAspect"]),LFe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},s=!1,a=0;a<w5.length;a++){var o=w5[a],l=n.get(o);li(l)?(s=!0,i[o]=l):r[o]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(vn({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var c=vs(i);function u(d,h){for(var f=n.getRawValue(h),p=n.getDataParams(h),m=0;m<c.length;m++){var v=c[m];d.setItemVisual(h,v,i[v](f,p))}}return{dataEach:s?u:null}}},kFe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,s){for(var a=i.getItemModel(s),o=0;o<xz.length;o++){var l=xz[o],c=a.getShallow(l,!0);c!=null&&i.setItemVisual(s,l,c)}}return{dataEach:t.hasItemOption?r:null}}};function OFe(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function NFe(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function BFe(n,e){function t(r,i){var s=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(a){s.push(a.seriesIndex)}),s}wt([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,s,a){i=vn({},i),a.dispatchAction(vn(i,{type:r[1],seriesIndex:t(s,i)}))})})}function Q0(n,e,t,r,i){var s=n+e;t.isSilent(s)||r.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,c=i.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===o){var d=a.getData(),h=rS(d,i.fromActionPayload);t.trigger(s,{type:s,seriesId:a.id,name:Jn(h)?d.getName(h[0]):d.getName(h),selected:ur(l)?l:vn({},l)})}})}function FFe(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(Q0("map","selectchanged",e,i,r),Q0("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Q0("map","selected",e,i,r),Q0("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Q0("map","unselected",e,i,r),Q0("pie","unselected",e,i,r))})}function w1(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var zFe=Math.round(Math.random()*9),UFe=typeof Object.defineProperty=="function",HFe=function(){function n(){this._id="__ec_inner_"+zFe++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return UFe?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}();const VFe=HFe;var $Fe=Oi.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,s=e.height/2;n.moveTo(t,r-s),n.lineTo(t+i,r+s),n.lineTo(t-i,r+s),n.closePath()}}),GFe=Oi.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,s=e.height/2;n.moveTo(t,r-s),n.lineTo(t+i,r),n.lineTo(t,r+s),n.lineTo(t-i,r),n.closePath()}}),WFe=Oi.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,s=Math.max(i,e.height),a=i/2,o=a*a/(s-a),l=r-s+a+o,c=Math.asin(o/a),u=Math.cos(c)*a,d=Math.sin(c),h=Math.cos(c),f=a*.6,p=a*.7;n.moveTo(t-u,l+o),n.arc(t,l,a,Math.PI-c,Math.PI*2+c),n.bezierCurveTo(t+u-d*f,l+o+h*f,t,r-p,t,r),n.bezierCurveTo(t,r-p,t-u+d*f,l+o+h*f,t-u,l+o),n.closePath()}}),qFe=Oi.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,s=e.y,a=r/3*2;n.moveTo(i,s),n.lineTo(i+a,s+t),n.lineTo(i,s+t/4*3),n.lineTo(i-a,s+t),n.lineTo(i,s),n.closePath()}}),KFe={line:aS,rect:_o,roundRect:_o,square:_o,circle:UL,diamond:GFe,pin:WFe,arrow:qFe,triangle:$Fe},YFe={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var s=Math.min(t,r);i.x=n,i.y=e,i.width=s,i.height=s},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},C5={};wt(KFe,function(n,e){C5[e]=new n});var XFe=Oi.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=EZ(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=C5[r];i||(r="rect",i=C5[r]),YFe[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function jFe(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function ik(n,e,t,r,i,s,a){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=LQ(n.slice(8),new xi(e,t,r,i),a?"center":"cover"):n.indexOf("path://")===0?l=$L(n.slice(7),{},new xi(e,t,r,i),a?"center":"cover"):l=new XFe({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=o,l.setColor=jFe,s&&l.setColor(s),l}function ZFe(n,e){if(n!=null)return Jn(n)||(n=[n,n]),[Ts(n[0],e[0])||0,Ts(Ir(n[1],n[0]),e[1])||0]}function Ap(n){return isFinite(n)}function QFe(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,s=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,s=s*t.height+t.y,a=a*t.height+t.y),r=Ap(r)?r:0,i=Ap(i)?i:1,s=Ap(s)?s:0,a=Ap(a)?a:0;var o=n.createLinearGradient(r,s,i,a);return o}function JFe(n,e,t){var r=t.width,i=t.height,s=Math.min(r,i),a=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*r+t.x,o=o*i+t.y,l=l*s),a=Ap(a)?a:.5,o=Ap(o)?o:.5,l=l>=0&&Ap(l)?l:.5;var c=n.createRadialGradient(a,o,0,a,o,l);return c}function M5(n,e,t){for(var r=e.type==="radial"?JFe(n,e,t):QFe(n,e,t),i=e.colorStops,s=0;s<i.length;s++)r.addColorStop(i[s].offset,i[s].color);return r}function e9e(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function Sx(n){return parseInt(n,10)}function xx(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],s=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var o=document.defaultView.getComputedStyle(n);return(n[i]||Sx(o[r])||Sx(n.style[r]))-(Sx(o[s])||0)-(Sx(o[a])||0)|0}function t9e(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:gs(n)?[n]:Jn(n)?n:null}function IJ(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&t9e(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=Zr(t,function(s){return s/i}),r/=i)}return[t,r]}var n9e=new ug(!0);function WC(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function wz(n){return typeof n=="string"&&n!=="none"}function qC(n){var e=n.fill;return e!=null&&e!=="none"}function Cz(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function Mz(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function T5(n,e,t){var r=VZ(e.image,e.__image,t);if(AT(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var s=new DOMMatrix;s.translateSelf(e.x||0,e.y||0),s.rotateSelf(0,0,(e.rotation||0)*XLe),s.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(s)}return i}}function r9e(n,e,t,r){var i,s=WC(t),a=qC(t),o=t.strokePercent,l=o<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||n9e,d=e.__dirty;if(!r){var h=t.fill,f=t.stroke,p=a&&!!h.colorStops,m=s&&!!f.colorStops,v=a&&!!h.image,g=s&&!!f.image,_=void 0,b=void 0,S=void 0,x=void 0,w=void 0;(p||m)&&(w=e.getBoundingRect()),p&&(_=d?M5(n,h,w):e.__canvasFillGradient,e.__canvasFillGradient=_),m&&(b=d?M5(n,f,w):e.__canvasStrokeGradient,e.__canvasStrokeGradient=b),v&&(S=d||!e.__canvasFillPattern?T5(n,h,e):e.__canvasFillPattern,e.__canvasFillPattern=S),g&&(x=d||!e.__canvasStrokePattern?T5(n,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=S),p?n.fillStyle=_:v&&(S?n.fillStyle=S:a=!1),m?n.strokeStyle=b:g&&(x?n.strokeStyle=x:s=!1)}var M=e.getGlobalScale();u.setScale(M[0],M[1],e.segmentIgnoreThreshold);var C,A;n.setLineDash&&t.lineDash&&(i=IJ(e),C=i[0],A=i[1]);var T=!0;(c||d&qm)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),T=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),T&&u.rebuildPath(n,l?o:1),C&&(n.setLineDash(C),n.lineDashOffset=A),r||(t.strokeFirst?(s&&Mz(n,t),a&&Cz(n,t)):(a&&Cz(n,t),s&&Mz(n,t))),C&&n.setLineDash([])}function i9e(n,e,t){var r=e.__image=VZ(t.image,e.__image,e,e.onload);if(!(!r||!AT(r))){var i=t.x||0,s=t.y||0,a=e.getWidth(),o=e.getHeight(),l=r.width/r.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=r.width,o=r.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;n.drawImage(r,c,u,t.sWidth,t.sHeight,i,s,a,o)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,d=a-c,h=o-u;n.drawImage(r,c,u,d,h,i,s,a,o)}else n.drawImage(r,i,s,a,o)}}function s9e(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||r0,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var s=void 0,a=void 0;n.setLineDash&&t.lineDash&&(r=IJ(e),s=r[0],a=r[1]),s&&(n.setLineDash(s),n.lineDashOffset=a),t.strokeFirst?(WC(t)&&n.strokeText(i,t.x,t.y),qC(t)&&n.fillText(i,t.x,t.y)):(qC(t)&&n.fillText(i,t.x,t.y),WC(t)&&n.strokeText(i,t.x,t.y)),s&&n.setLineDash([])}}var Tz=["shadowBlur","shadowOffsetX","shadowOffsetY"],Az=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function RJ(n,e,t,r,i){var s=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){fo(n,i),s=!0;var a=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(a)?Hp.opacity:a}(r||e.blend!==t.blend)&&(s||(fo(n,i),s=!0),n.globalCompositeOperation=e.blend||Hp.blend);for(var o=0;o<Tz.length;o++){var l=Tz[o];(r||e[l]!==t[l])&&(s||(fo(n,i),s=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(s||(fo(n,i),s=!0),n.shadowColor=e.shadowColor||Hp.shadowColor),s}function Ez(n,e,t,r,i){var s=a_(e,i.inHover),a=r?null:t&&a_(t,i.inHover)||{};if(s===a)return!1;var o=RJ(n,s,a,r,i);if((r||s.fill!==a.fill)&&(o||(fo(n,i),o=!0),wz(s.fill)&&(n.fillStyle=s.fill)),(r||s.stroke!==a.stroke)&&(o||(fo(n,i),o=!0),wz(s.stroke)&&(n.strokeStyle=s.stroke)),(r||s.opacity!==a.opacity)&&(o||(fo(n,i),o=!0),n.globalAlpha=s.opacity==null?1:s.opacity),e.hasStroke()){var l=s.lineWidth,c=l/(s.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==c&&(o||(fo(n,i),o=!0),n.lineWidth=c)}for(var u=0;u<Az.length;u++){var d=Az[u],h=d[0];(r||s[h]!==a[h])&&(o||(fo(n,i),o=!0),n[h]=s[h]||d[1])}return o}function a9e(n,e,t,r,i){return RJ(n,a_(e,i.inHover),t&&a_(t,i.inHover),r,i)}function PJ(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function o9e(n,e,t){for(var r=!1,i=0;i<n.length;i++){var s=n[i];r=r||s.isZeroArea(),PJ(e,s),e.beginPath(),s.buildPath(e,s.shape),e.clip()}t.allClipped=r}function l9e(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var Iz=1,Rz=2,Pz=3,Dz=4;function c9e(n){var e=qC(n),t=WC(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function fo(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function a_(n,e){return e&&n.__hoverStyle||n.style}function DJ(n,e){Ep(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ep(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Ho,e.__isRendered=!1;return}var s=e.__clipPaths,a=t.prevElClipPaths,o=!1,l=!1;if((!a||e9e(s,a))&&(a&&a.length&&(fo(n,t),n.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),s&&s.length&&(fo(n,t),n.save(),o9e(s,n,t),o=!0),t.prevElClipPaths=s),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=o=!0);var u=e instanceof Oi&&e.autoBatch&&c9e(e.style);o||l9e(i,c.transform)?(fo(n,t),PJ(n,e)):u||fo(n,t);var d=a_(e,t.inHover);e instanceof Oi?(t.lastDrawType!==Iz&&(l=!0,t.lastDrawType=Iz),Ez(n,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&n.beginPath(),r9e(n,e,d,u),u&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof a5?(t.lastDrawType!==Pz&&(l=!0,t.lastDrawType=Pz),Ez(n,e,c,l,t),s9e(n,e,d)):e instanceof Xg?(t.lastDrawType!==Rz&&(l=!0,t.lastDrawType=Rz),a9e(n,e,c,l,t),i9e(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==Dz&&(l=!0,t.lastDrawType=Dz),u9e(n,e,t)),u&&r&&fo(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function u9e(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},a,o;for(a=e.getCursor(),o=r.length;a<o;a++){var l=r[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ep(n,l,s,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var c=0,u=i.length;c<u;c++){var l=i[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ep(n,l,s,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var bE=new VFe,Lz=new nS(100),kz=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function A5(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&bE.delete(n);var s=bE.get(n);if(s)return s;var a=Ji(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=i?1:1/t,bE.set(n,o),n.dirty=!1,o;function l(c){for(var u=[t],d=!0,h=0;h<kz.length;++h){var f=a[kz[h]];if(f!=null&&!Jn(f)&&!ur(f)&&!gs(f)&&typeof f!="boolean"){d=!1;break}u.push(f)}var p;if(d){p=u.join(",")+(i?"-svg":"");var m=Lz.get(p);m&&(i?c.svgElement=m:c.image=m)}var v=kJ(a.dashArrayX),g=d9e(a.dashArrayY),_=LJ(a.symbol),b=f9e(v),S=OJ(g),x=!i&&Kg.createCanvas(),w=i&&{tag:"g",attrs:{},key:"dcl",children:[]},M=A(),C;x&&(x.width=M.width*t,x.height=M.height*t,C=x.getContext("2d")),T(),d&&Lz.put(p,x||w),c.image=x,c.svgElement=w,c.svgWidth=M.width,c.svgHeight=M.height;function A(){for(var I=1,D=0,B=b.length;D<B;++D)I=JF(I,b[D]);for(var O=1,D=0,B=_.length;D<B;++D)O=JF(O,_[D].length);I*=O;var H=S*b.length*_.length;return{width:Math.max(1,Math.min(I,a.maxTileWidth)),height:Math.max(1,Math.min(H,a.maxTileHeight))}}function T(){C&&(C.clearRect(0,0,x.width,x.height),a.backgroundColor&&(C.fillStyle=a.backgroundColor,C.fillRect(0,0,x.width,x.height)));for(var I=0,D=0;D<g.length;++D)I+=g[D];if(I<=0)return;for(var B=-S,O=0,H=0,L=0;B<M.height;){if(O%2===0){for(var z=H/2%_.length,k=0,F=0,W=0;k<M.width*2;){for(var q=0,D=0;D<v[L].length;++D)q+=v[L][D];if(q<=0)break;if(F%2===0){var Z=(1-a.symbolSize)*.5,se=k+v[L][F]*Z,X=B+g[O]*Z,ie=v[L][F]*a.symbolSize,ae=g[O]*a.symbolSize,ce=W/2%_[z].length;we(se,X,ie,ae,_[z][ce])}k+=v[L][F],++W,++F,F===v[L].length&&(F=0)}++L,L===v.length&&(L=0)}B+=g[O],++H,++O,O===g.length&&(O=0)}function we(He,Ge,me,be,oe){var j=i?1:t,ke=ik(oe,He*j,Ge*j,me*j,be*j,a.color,a.symbolKeepAspect);if(i){var ze=r.painter.renderOneToVNode(ke);ze&&w.children.push(ze)}else DJ(C,ke)}}}}function LJ(n){if(!n||n.length===0)return[["rect"]];if(ur(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!ur(n[t])){e=!1;break}if(e)return LJ([n]);for(var r=[],t=0;t<n.length;++t)ur(n[t])?r.push([n[t]]):r.push(n[t]);return r}function kJ(n){if(!n||n.length===0)return[[0,0]];if(gs(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!gs(n[r])){t=!1;break}if(t)return kJ([n]);for(var i=[],r=0;r<n.length;++r)if(gs(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=Zr(n[r],function(o){return Math.ceil(o)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function d9e(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(gs(n)){var e=Math.ceil(n);return[e,e]}var t=Zr(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function f9e(n){return Zr(n,function(e){return OJ(e)})}function OJ(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function h9e(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(a){var o=r.getItemVisual(a,"decal");if(o){var l=r.ensureUniqueItemVisual(a,"style");l.decal=A5(o,e)}});var i=r.getVisual("decal");if(i){var s=r.getVisual("style");s.decal=A5(i,e)}}})}var p9e=new bu;const rc=p9e;var NJ={};function m9e(n,e){NJ[n]=e}function v9e(n){return NJ[n]}var g9e=1,y9e=800,b9e=900,_9e=1e3,S9e=2e3,x9e=5e3,BJ=1e3,w9e=1100,sk=2e3,FJ=3e3,C9e=4e3,zT=4500,M9e=4600,T9e=5e3,A9e=6e3,zJ=7e3,E9e={PROCESSOR:{FILTER:_9e,SERIES_FILTER:y9e,STATISTIC:x9e},VISUAL:{LAYOUT:BJ,PROGRESSIVE_LAYOUT:w9e,GLOBAL:sk,CHART:FJ,POST_CHART_LAYOUT:M9e,COMPONENT:C9e,BRUSH:T9e,CHART_ITEM:zT,ARIA:A9e,DECAL:zJ}},da="__flagInMainProcess",ro="__pendingUpdate",_E="__needsUpdateStatus",Oz=/^[a-zA-Z0-9_]+$/,SE="__connectUpdateStatus",Nz=0,I9e=1,R9e=2;function UJ(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return VJ(this,n,e)}}function HJ(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return VJ(this,n,e)}}function VJ(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),bu.prototype[e].apply(n,t)}var $J=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(bu),GJ=$J.prototype;GJ.on=HJ("on");GJ.off=HJ("off");var J0,xE,Cx,Zd,wE,CE,ME,Vy,$y,Bz,Fz,TE,zz,Mx,Uz,WJ,il,Hz,qJ=function(n){lr(e,n);function e(t,r,i){var s=n.call(this,new DFe)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],i=i||{},ur(r)&&(r=KJ[r]),s._dom=t;var a="canvas",o="auto",l=!1;i.ssr;var c=s._zr=jF(t,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Ir(i.useDirtyRect,l),useCoarsePointer:Ir(i.useCoarsePointer,o),pointerSize:i.pointerSize});s._ssr=i.ssr,s._throttledZrFlush=rk(Li(c.flush,c),17),r=Xr(r),r&&rJ(r,!0),s._theme=r,s._locale=IBe(i.locale||HQ),s._coordSysMgr=new tJ;var u=s._api=Uz(s);function d(h,f){return h.__prio-f.__prio}return h2(YC,d),h2(E5,d),s._scheduler=new AJ(s,u,E5,YC),s._messageCenter=new $J,s._initEvents(),s.resize=Li(s.resize,s),c.animation.on("frame",s._onframe,s),Bz(c,s),Fz(c,s),zR(s),s}return e.prototype._onframe=function(){if(!this._disposed){Hz(this);var t=this._scheduler;if(this[ro]){var r=this[ro].silent;this[da]=!0;try{J0(this),Zd.update.call(this,null,this[ro].updateParams)}catch(l){throw this[da]=!1,this[ro]=null,l}this._zr.flush(),this[da]=!1,this[ro]=null,Vy.call(this,r),$y.call(this,r)}else if(t.unfinished){var i=g9e,s=this._model,a=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(s),t.performDataProcessorTasks(s),CE(this,s),t.performVisualTasks(s),Mx(this,this._model,a,"remain",{}),i-=+new Date-o}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[da]){if(this._disposed){this.id;return}var s,a,o;if(mr(r)&&(i=r.lazyUpdate,s=r.silent,a=r.replaceMerge,o=r.transition,r=r.notMerge),this[da]=!0,!this._model||r){var l=new h7e(this._api),c=this._theme,u=this._model=new JQ;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:a},I5);var d={seriesTransition:o,optionChanged:!0};if(i)this[ro]={silent:s,updateParams:d},this[da]=!1,this.getZr().wakeUp();else{try{J0(this),Zd.update.call(this,null,d)}catch(h){throw this[ro]=null,this[da]=!1,h}this._ssr||this._zr.flush(),this[ro]=null,this[da]=!1,Vy.call(this,s),$y.call(this,s)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||kr.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(kr.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return wt(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,s=[],a=this;wt(r,function(l){i.eachComponent({mainType:l},function(c){var u=a._componentsMap[c.__viewId];u.group.ignore||(s.push(u),u.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return wt(s,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,s=Math.min,a=Math.max,o=1/0;if(Vz[i]){var l=o,c=o,u=-o,d=-o,h=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();wt(eb,function(b,S){if(b.group===i){var x=r?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(Xr(t)),w=b.getDom().getBoundingClientRect();l=s(w.left,l),c=s(w.top,c),u=a(w.right,u),d=a(w.bottom,d),h.push({dom:x,left:w.left,top:w.top})}}),l*=f,c*=f,u*=f,d*=f;var p=u-l,m=d-c,v=Kg.createCanvas(),g=jF(v,{renderer:r?"svg":"canvas"});if(g.resize({width:p,height:m}),r){var _="";return wt(h,function(b){var S=b.left-l,x=b.top-c;_+='<g transform="translate('+S+","+x+')">'+b.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=_,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return t.connectedBackgroundColor&&g.add(new _o({shape:{x:0,y:0,width:p,height:m},style:{fill:t.connectedBackgroundColor}})),wt(h,function(b){var S=new Xg({style:{x:b.left*f-l,y:b.top*f-c,image:b.dom}});g.add(S)}),g.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return wE(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return wE(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,s,a=K3(i,t);return wt(a,function(o,l){l.indexOf("Models")>=0&&wt(o,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)s=s||!!u.containPoint(r);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(s=s||d.containPoint(r,c))}},this)},this),!!s},e.prototype.getVisual=function(t,r){var i=this._model,s=K3(i,t,{defaultMainType:"series"}),a=s.seriesModel,o=a.getData(),l=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return l!=null?OFe(o,l,r):NFe(o,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;wt(P9e,function(r){var i=function(s){var a=t.getModel(),o=s.target,l,c=r==="globalout";if(c?l={}:o&&w1(o,function(p){var m=Pi(p);if(m&&m.dataIndex!=null){var v=m.dataModel||a.getSeriesByIndex(m.seriesIndex);return l=v&&v.getDataParams(m.dataIndex,m.dataType,o)||{},!0}else if(m.eventData)return l=vn({},m.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var h=u&&d!=null&&a.getComponent(u,d),f=h&&t[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=s,l.type=r,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:h,view:f},t.trigger(r,l)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),wt(J1,function(r,i){t._messageCenter.on(i,function(s){this.trigger(i,s)},t)}),wt(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),FFe(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&zZ(this.getDom(),ok,"");var r=this,i=r._api,s=r._model;wt(r._componentsViews,function(a){a.dispose(s,i)}),wt(r._chartsViews,function(a){a.dispose(s,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete eb[r.id]},e.prototype.resize=function(t){if(!this[da]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),s=t&&t.silent;this[ro]&&(s==null&&(s=this[ro].silent),i=!0,this[ro]=null),this[da]=!0;try{i&&J0(this),Zd.update.call(this,{type:"resize",animation:vn({duration:0},t&&t.animation)})}catch(a){throw this[da]=!1,a}this[da]=!1,Vy.call(this,s),$y.call(this,s)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(mr(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!R5[t]){var i=R5[t](this._api,r),s=this._zr;this._loadingFX=i,s.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=vn({},t);return r.type=J1[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(mr(r)||(r={silent:!!r}),!!KC[t.type]&&this._model){if(this[da]){this._pendingActions.push(t);return}var i=r.silent;ME.call(this,t,i);var s=r.flush;s?this._zr.flush():s!==!1&&kr.browser.weChat&&this._throttledZrFlush(),Vy.call(this,i),$y.call(this,i)}},e.prototype.updateLabelLayout=function(){rc.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),s=i.getSeriesByIndex(r);s.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){J0=function(d){var h=d._scheduler;h.restorePipelines(d._model),h.prepareStageTasks(),xE(d,!0),xE(d,!1),h.plan()},xE=function(d,h){for(var f=d._model,p=d._scheduler,m=h?d._componentsViews:d._chartsViews,v=h?d._componentsMap:d._chartsMap,g=d._zr,_=d._api,b=0;b<m.length;b++)m[b].__alive=!1;h?f.eachComponent(function(w,M){w!=="series"&&S(M)}):f.eachSeries(S);function S(w){var M=w.__requireNewView;w.__requireNewView=!1;var C="_ec_"+w.id+"_"+w.type,A=!M&&v[C];if(!A){var T=Yc(w.type),I=h?lh.getClass(T.main,T.sub):Ov.getClass(T.sub);A=new I,A.init(f,_),v[C]=A,m.push(A),g.add(A.group)}w.__viewId=A.__id=C,A.__alive=!0,A.__model=w,A.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!h&&p.prepareView(A,w,f,_)}for(var b=0;b<m.length;){var x=m[b];x.__alive?b++:(!h&&x.renderTask.dispose(),g.remove(x.group),x.dispose(f,_),m.splice(b,1),v[x.__id]===x&&delete v[x.__id],x.__id=x.group.__ecComponentInfo=null)}},Cx=function(d,h,f,p,m){var v=d._model;if(v.setUpdatePayload(f),!p){wt([].concat(d._componentsViews).concat(d._chartsViews),x);return}var g={};g[p+"Id"]=f[p+"Id"],g[p+"Index"]=f[p+"Index"],g[p+"Name"]=f[p+"Name"];var _={mainType:p,query:g};m&&(_.subType=m);var b=f.excludeSeriesId,S;b!=null&&(S=jr(),wt(Wa(b),function(w){var M=tu(w,null);M!=null&&S.set(M,!0)})),v&&v.eachComponent(_,function(w){var M=S&&S.get(w.id)!=null;if(!M)if(C9(f))if(w instanceof i_)f.type===Vp&&!f.notBlur&&!w.get(["emphasis","disabled"])&&QOe(w,f,d._api);else{var C=zL(w.mainType,w.componentIndex,f.name,d._api),A=C.focusSelf,T=C.dispatchers;f.type===Vp&&A&&!f.notBlur&&u5(w.mainType,w.componentIndex,d._api),T&&wt(T,function(I){f.type===Vp?o5(I):l5(I)})}else h5(f)&&w instanceof i_&&(tNe(w,f,d._api),x9(w),il(d))},d),v&&v.eachComponent(_,function(w){var M=S&&S.get(w.id)!=null;M||x(d[p==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},d);function x(w){w&&w.__alive&&w[h]&&w[h](w.__model,v,d._api,f)}},Zd={prepareAndUpdate:function(d){J0(this),Zd.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,h){var f=this._model,p=this._api,m=this._zr,v=this._coordSysMgr,g=this._scheduler;if(f){f.setUpdatePayload(d),g.restoreData(f,d),g.performSeriesTasks(f),v.create(f,p),g.performDataProcessorTasks(f,d),CE(this,f),v.update(f,p),t(f),g.performVisualTasks(f,d),TE(this,f,p,d,h);var _=f.get("backgroundColor")||"transparent",b=f.get("darkMode");m.setBackgroundColor(_),b!=null&&b!=="auto"&&m.setDarkMode(b),rc.trigger("afterupdate",f,p)}},updateTransform:function(d){var h=this,f=this._model,p=this._api;if(f){f.setUpdatePayload(d);var m=[];f.eachComponent(function(g,_){if(g!=="series"){var b=h.getViewOfComponentModel(_);if(b&&b.__alive)if(b.updateTransform){var S=b.updateTransform(_,f,p,d);S&&S.update&&m.push(b)}else m.push(b)}});var v=jr();f.eachSeries(function(g){var _=h._chartsMap[g.__viewId];if(_.updateTransform){var b=_.updateTransform(g,f,p,d);b&&b.update&&v.set(g.uid,1)}else v.set(g.uid,1)}),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0,dirtyMap:v}),Mx(this,f,p,d,{},v),rc.trigger("afterupdate",f,p)}},updateView:function(d){var h=this._model;h&&(h.setUpdatePayload(d),Ov.markUpdateMethod(d,"updateView"),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0}),TE(this,h,this._api,d,{}),rc.trigger("afterupdate",h,this._api))},updateVisual:function(d){var h=this,f=this._model;f&&(f.setUpdatePayload(d),f.eachSeries(function(p){p.getData().clearAllVisual()}),Ov.markUpdateMethod(d,"updateVisual"),t(f),this._scheduler.performVisualTasks(f,d,{visualType:"visual",setDirty:!0}),f.eachComponent(function(p,m){if(p!=="series"){var v=h.getViewOfComponentModel(m);v&&v.__alive&&v.updateVisual(m,f,h._api,d)}}),f.eachSeries(function(p){var m=h._chartsMap[p.__viewId];m.updateVisual(p,f,h._api,d)}),rc.trigger("afterupdate",f,this._api))},updateLayout:function(d){Zd.update.call(this,d)}},wE=function(d,h,f,p){if(d._disposed){d.id;return}for(var m=d._model,v=d._coordSysMgr.getCoordinateSystems(),g,_=K3(m,f),b=0;b<v.length;b++){var S=v[b];if(S[h]&&(g=S[h](m,_,p))!=null)return g}},CE=function(d,h){var f=d._chartsMap,p=d._scheduler;h.eachSeries(function(m){p.updateStreamModes(m,f[m.__viewId])})},ME=function(d,h){var f=this,p=this.getModel(),m=d.type,v=d.escapeConnect,g=KC[m],_=g.actionInfo,b=(_.update||"update").split(":"),S=b.pop(),x=b[0]!=null&&Yc(b[0]);this[da]=!0;var w=[d],M=!1;d.batch&&(M=!0,w=Zr(d.batch,function(O){return O=Ji(vn({},O),d),O.batch=null,O}));var C=[],A,T=h5(d),I=C9(d);if(I&&uQ(this._api),wt(w,function(O){if(A=g.action(O,f._model,f._api),A=A||vn({},O),A.type=_.event||A.type,C.push(A),I){var H=PL(d),L=H.queryOptionMap,z=H.mainTypeSpecified,k=z?L.keys()[0]:"series";Cx(f,S,O,k),il(f)}else T?(Cx(f,S,O,"series"),il(f)):x&&Cx(f,S,O,x.main,x.sub)}),S!=="none"&&!I&&!T&&!x)try{this[ro]?(J0(this),Zd.update.call(this,d),this[ro]=null):Zd[S].call(this,d)}catch(O){throw this[da]=!1,O}if(M?A={type:_.event||m,escapeConnect:v,batch:C}:A=C[0],this[da]=!1,!h){var D=this._messageCenter;if(D.trigger(A.type,A),T){var B={type:"selectchanged",escapeConnect:v,selected:nNe(p),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};D.trigger(B.type,B)}}},Vy=function(d){for(var h=this._pendingActions;h.length;){var f=h.shift();ME.call(this,f,d)}},$y=function(d){!d&&this.trigger("updated")},Bz=function(d,h){d.on("rendered",function(f){h.trigger("rendered",f),d.animation.isFinished()&&!h[ro]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},Fz=function(d,h){d.on("mouseover",function(f){var p=f.target,m=w1(p,f5);m&&(JOe(m,f,h._api),il(h))}).on("mouseout",function(f){var p=f.target,m=w1(p,f5);m&&(eNe(m,f,h._api),il(h))}).on("click",function(f){var p=f.target,m=w1(p,function(_){return Pi(_).dataIndex!=null},!0);if(m){var v=m.selected?"unselect":"select",g=Pi(m);h._api.dispatchAction({type:v,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(h){h.clearColorPalette()})}function r(d){var h=[],f=[],p=!1;if(d.eachComponent(function(_,b){var S=b.get("zlevel")||0,x=b.get("z")||0,w=b.getZLevelKey();p=p||!!w,(_==="series"?f:h).push({zlevel:S,z:x,idx:b.componentIndex,type:_,key:w})}),p){var m=h.concat(f),v,g;h2(m,function(_,b){return _.zlevel===b.zlevel?_.z-b.z:_.zlevel-b.zlevel}),wt(m,function(_){var b=d.getComponent(_.type,_.idx),S=_.zlevel,x=_.key;v!=null&&(S=Math.max(v,S)),x?(S===v&&x!==g&&S++,g=x):g&&(S===v&&S++,g=""),v=S,b.setZLevel(S)})}}TE=function(d,h,f,p,m){r(h),zz(d,h,f,p,m),wt(d._chartsViews,function(v){v.__alive=!1}),Mx(d,h,f,p,m),wt(d._chartsViews,function(v){v.__alive||v.remove(h,f)})},zz=function(d,h,f,p,m,v){wt(v||d._componentsViews,function(g){var _=g.__model;c(_,g),g.render(_,h,f,p),o(_,g),u(_,g)})},Mx=function(d,h,f,p,m,v){var g=d._scheduler;m=vn(m||{},{updatedSeries:h.getSeries()}),rc.trigger("series:beforeupdate",h,f,m);var _=!1;h.eachSeries(function(b){var S=d._chartsMap[b.__viewId];S.__alive=!0;var x=S.renderTask;g.updatePayload(x,p),c(b,S),v&&v.get(b.uid)&&x.dirty(),x.perform(g.getPerformArgs(x))&&(_=!0),S.group.silent=!!b.get("silent"),a(b,S),x9(b)}),g.unfinished=_||g.unfinished,rc.trigger("series:layoutlabels",h,f,m),rc.trigger("series:transition",h,f,m),h.eachSeries(function(b){var S=d._chartsMap[b.__viewId];o(b,S),u(b,S)}),s(d,h),rc.trigger("series:afterupdate",h,f,m)},il=function(d){d[_E]=!0,d.getZr().wakeUp()},Hz=function(d){d[_E]&&(d.getZr().storage.traverse(function(h){j1(h)||i(h)}),d[_E]=!1)};function i(d){for(var h=[],f=d.currentStates,p=0;p<f.length;p++){var m=f[p];m==="emphasis"||m==="blur"||m==="select"||h.push(m)}d.selected&&d.states.select&&h.push("select"),d.hoverState===BL&&d.states.emphasis?h.push("emphasis"):d.hoverState===NL&&d.states.blur&&h.push("blur"),d.useStates(h)}function s(d,h){var f=d._zr,p=f.storage,m=0;p.traverse(function(v){v.isGroup||m++}),m>h.get("hoverLayerThreshold")&&!kr.node&&!kr.worker&&h.eachSeries(function(v){if(!v.preventUsingHoverLayer){var g=d._chartsMap[v.__viewId];g.__alive&&g.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(d,h){var f=d.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=f)})}function o(d,h){if(!d.preventAutoZ){var f=d.get("z")||0,p=d.get("zlevel")||0;h.eachRendered(function(m){return l(m,f,p,-1/0),!0})}}function l(d,h,f,p){var m=d.getTextContent(),v=d.getTextGuideLine(),g=d.isGroup;if(g)for(var _=d.childrenRef(),b=0;b<_.length;b++)p=Math.max(l(_[b],h,f,p),p);else d.z=h,d.zlevel=f,p=Math.max(d.z2,p);if(m&&(m.z=h,m.zlevel=f,isFinite(p)&&(m.z2=p+2)),v){var S=d.textGuideLineConfig;v.z=h,v.zlevel=f,isFinite(p)&&(v.z2=p+(S&&S.showAbove?1:-1))}return p}function c(d,h){h.eachRendered(function(f){if(!j1(f)){var p=f.getTextContent(),m=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function u(d,h){var f=d.getModel("stateAnimation"),p=d.isAnimationEnabled(),m=f.get("duration"),v=m>0?{duration:m,delay:f.get("delay"),easing:f.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(j1(g))return;if(g instanceof Oi&&cNe(g),g.__dirty){var _=g.prevStates;_&&g.useStates(_)}if(p){g.stateTransition=v;var b=g.getTextContent(),S=g.getTextGuideLine();b&&(b.stateTransition=v),S&&(S.stateTransition=v)}g.__dirty&&i(g)}})}Uz=function(d){return new(function(h){lr(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(p){for(;p;){var m=p.__ecComponentInfo;if(m!=null)return d._model.getComponent(m.mainType,m.index);p=p.parent}},f.prototype.enterEmphasis=function(p,m){o5(p,m),il(d)},f.prototype.leaveEmphasis=function(p,m){l5(p,m),il(d)},f.prototype.enterBlur=function(p){ZOe(p),il(d)},f.prototype.leaveBlur=function(p){aQ(p),il(d)},f.prototype.enterSelect=function(p){oQ(p),il(d)},f.prototype.leaveSelect=function(p){lQ(p),il(d)},f.prototype.getModel=function(){return d.getModel()},f.prototype.getViewOfComponentModel=function(p){return d.getViewOfComponentModel(p)},f.prototype.getViewOfSeriesModel=function(p){return d.getViewOfSeriesModel(p)},f}(eJ))(d)},WJ=function(d){function h(f,p){for(var m=0;m<f.length;m++){var v=f[m];v[SE]=p}}wt(J1,function(f,p){d._messageCenter.on(p,function(m){if(Vz[d.group]&&d[SE]!==Nz){if(m&&m.escapeConnect)return;var v=d.makeActionFromEvent(m),g=[];wt(eb,function(_){_!==d&&_.group===d.group&&g.push(_)}),h(g,Nz),wt(g,function(_){_[SE]!==I9e&&_.dispatchAction(v)}),h(g,R9e)}})})}}(),e}(bu),ak=qJ.prototype;ak.on=UJ("on");ak.off=UJ("off");ak.one=function(n,e,t){var r=this;function i(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];e&&e.apply&&e.apply(this,s),r.off(n,i)}this.on.call(this,n,i,t)};var P9e=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],KC={},J1={},E5=[],I5=[],YC=[],KJ={},R5={},eb={},Vz={},D9e=+new Date-0,ok="_echarts_instance_";function L9e(n,e,t){var r=!(t&&t.ssr);if(r){var i=k9e(n);if(i)return i}var s=new qJ(n,e,t);return s.id="ec_"+D9e++,eb[s.id]=s,r&&zZ(n,ok,s.id),WJ(s),rc.trigger("afterinit",s),s}function k9e(n){return eb[U8e(n,ok)]}function YJ(n,e){KJ[n]=e}function XJ(n){Di(I5,n)<0&&I5.push(n)}function jJ(n,e){ck(E5,n,e,S9e)}function O9e(n){lk("afterinit",n)}function N9e(n){lk("afterupdate",n)}function lk(n,e){rc.on(n,e)}function Qg(n,e,t){li(e)&&(t=e,e="");var r=mr(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!J1[e]&&(wd(Oz.test(r)&&Oz.test(e)),KC[r]||(KC[r]={action:t,actionInfo:n}),J1[e]=r)}function B9e(n,e){tJ.register(n,e)}function F9e(n,e){ck(YC,n,e,BJ,"layout")}function S0(n,e){ck(YC,n,e,FJ,"visual")}var $z=[];function ck(n,e,t,r,i){if((li(e)||mr(e))&&(t=e,e=r),!(Di($z,t)>=0)){$z.push(t);var s=AJ.wrapStageHandler(t,i);s.__prio=e,s.__raw=t,n.push(s)}}function ZJ(n,e){R5[n]=e}function z9e(n,e,t){var r=v9e("registerMap");r&&r(n,e,t)}var U9e=z7e;S0(sk,vFe);S0(zT,gFe);S0(zT,yFe);S0(sk,LFe);S0(zT,kFe);S0(zJ,h9e);XJ(rJ);jJ(b9e,S7e);ZJ("default",bFe);Qg({type:Vp,event:Vp,update:Vp},bo);Qg({type:_2,event:_2,update:_2},bo);Qg({type:K1,event:K1,update:K1},bo);Qg({type:S2,event:S2,update:S2},bo);Qg({type:Y1,event:Y1,update:Y1},bo);YJ("light",RFe);YJ("dark",PFe);function Gy(n){return n==null?0:n.length||1}function Gz(n){return n}var H9e=function(){function n(e,t,r,i,s,a){this._old=e,this._new=t,this._oldKeyGetter=r||Gz,this._newKeyGetter=i||Gz,this.context=s,this._diffModeMultiple=a==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),s=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,s,"_newKeyGetter");for(var a=0;a<e.length;a++){var o=i[a],l=r[o],c=Gy(l);if(c>1){var u=l.shift();l.length===1&&(r[o]=l[0]),this._update&&this._update(u,a)}else c===1?(r[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(s,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},s=[],a=[];this._initIndexMap(e,r,s,"_oldKeyGetter"),this._initIndexMap(t,i,a,"_newKeyGetter");for(var o=0;o<s.length;o++){var l=s[o],c=r[l],u=i[l],d=Gy(c),h=Gy(u);if(d>1&&h===1)this._updateManyToOne&&this._updateManyToOne(u,c),i[l]=null;else if(d===1&&h>1)this._updateOneToMany&&this._updateOneToMany(u,c),i[l]=null;else if(d===1&&h===1)this._update&&this._update(u,c),i[l]=null;else if(d>1&&h>1)this._updateManyToMany&&this._updateManyToMany(u,c),i[l]=null;else if(d>1)for(var f=0;f<d;f++)this._remove&&this._remove(c[f]);else this._remove&&this._remove(c)}this._performRestAdd(a,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],s=t[i],a=Gy(s);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(s[o]);else a===1&&this._add&&this._add(s);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var s=this._diffModeMultiple,a=0;a<e.length;a++){var o="_ec_"+this[i](e[a],a);if(s||(r[a]=o),!!t){var l=t[o],c=Gy(l);c===0?(t[o]=a,s&&r.push(o)):c===1?t[o]=[l,a]:l.push(a)}}},n}();const V9e=H9e;var $9e=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function G9e(n,e){var t={},r=t.encode={},i=jr(),s=[],a=[],o={};wt(n.dimensions,function(h){var f=n.getDimensionInfo(h),p=f.coordDim;if(p){var m=f.coordDimIndex;AE(r,p)[m]=h,f.isExtraCoord||(i.set(p,1),W9e(f.type)&&(s[0]=h),AE(o,p)[m]=n.getDimensionIndex(f.name)),f.defaultTooltip&&a.push(h)}KQ.each(function(v,g){var _=AE(r,g),b=f.otherDims[g];b!=null&&b!==!1&&(_[b]=f.name)})});var l=[],c={};i.each(function(h,f){var p=r[f];c[f]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Zr(l,function(h){return n.getDimensionInfo(h).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=r.label;u&&u.length&&(s=u.slice());var d=r.tooltip;return d&&d.length?a=d.slice():a.length||(a=s.slice()),r.defaultedLabel=s,r.defaultedTooltip=a,t.userOutput=new $9e(o,e),t}function AE(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function W9e(n){return!(n==="ordinal"||n==="time")}var q9e=function(){function n(e){this.otherDims={},e!=null&&vn(this,e)}return n}();const T2=q9e;var K9e=zs(),Y9e={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},QJ=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=eee(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return Ir(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=aJ(this.source),r=!tee(e),i="",s=[],a=0,o=0;a<e;a++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[o];if(d&&d.storeDimIndex===a)l=t?d.name:null,c=d.type,u=d.ordinalMeta,o++;else{var h=this.getSourceDimension(a);h&&(l=t?h.name:null,c=h.type)}s.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Y9e[c]||"f",u&&(i+=u.uid),i+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:s,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,s=this.dimensions[r];if(s&&s.storeDimIndex===t)s.isCalculationCoord||(i=s.name),r++;else{var a=this.getSourceDimension(t);a&&(i=a.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function X9e(n){return n instanceof QJ}function JJ(n){for(var e=jr(),t=0;t<(n||[]).length;t++){var r=n[t],i=mr(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function eee(n){var e=K9e(n);return e.dimNameMap||(e.dimNameMap=JJ(n.dimensionsDefine))}function tee(n){return n>30}var Wy=mr,Qd=Zr,j9e=typeof Int32Array>"u"?Array:Int32Array,Z9e="e\0\0",Wz=-1,Q9e=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],J9e=["_approximateExtent"],qz,Tx,qy,Ky,EE,Yy,IE,eze=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;X9e(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var s={},a=[],o={},l=!1,c={},u=0;u<r.length;u++){var d=r[u],h=ur(d)?new T2({name:d}):d instanceof T2?d:new T2(d),f=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=f,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(f),s[f]=h,c[f]!=null&&(l=!0),h.createInvertedIndices&&(o[f]=[]),p.itemName===0&&(this._nameDimIdx=u),p.itemId===0&&(this._idDimIdx=u),i&&(h.storeDimIndex=u)}if(this.dimensions=a,this._dimInfos=s,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var m=this._dimIdxToName=jr();wt(a,function(v){m.set(s[v].storeDimIndex,v)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(gs(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,s;if(e instanceof y5&&(s=e),!s){var a=this.dimensions,o=QL(e)||Mo(e)?new oJ(e,a.length):e;s=new y5;var l=Qd(a,function(c){return{type:i._dimInfos[c].type,property:c}});s.initData(o,l,r)}this._store=s,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=G9e(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,s=r.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=i;o<s;o++){var l=o-i;this._nameList[o]=t[l],a&&IE(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Gf&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var s=this._nameList,a=this._idList,o=i.getSource().sourceFormat,l=o===_u;if(l&&!i.pure)for(var c=[],u=e;u<t;u++){var d=i.getItem(u,c);if(!this.hasItemOption&&I8e(d)&&(this.hasItemOption=!0),d){var h=d.name;s[u]==null&&h!=null&&(s[u]=tu(h,null));var f=d.id;a[u]==null&&f!=null&&(a[u]=tu(f,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)IE(this,u);qz(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){Wy(e)?vn(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=qy(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return Tx(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return Jn(e)?i.getValues(Qd(e,function(s){return r._getStoreDimIndex(s)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?Wz:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){li(e)&&(r=t,t=e,e=[]);var i=r||this,s=Qd(Ky(e),this._getStoreDimIndex,this);this._store.each(s,i?Li(t,i):t)},n.prototype.filterSelf=function(e,t,r){li(e)&&(r=t,t=e,e=[]);var i=r||this,s=Qd(Ky(e),this._getStoreDimIndex,this);return this._store=this._store.filter(s,i?Li(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=vs(e);return wt(i,function(s){var a=t._getStoreDimIndex(s);r[a]=e[s]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){li(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var s=r||i||this,a=Qd(Ky(e),this._getStoreDimIndex,this),o=Yy(this);return o._store=this._store.map(a,s?Li(t,s):t),o},n.prototype.modify=function(e,t,r,i){var s=r||i||this,a=Qd(Ky(e),this._getStoreDimIndex,this);this._store.modify(a,s?Li(t,s):t)},n.prototype.downSample=function(e,t,r,i){var s=Yy(this);return s._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),s},n.prototype.minmaxDownSample=function(e,t){var r=Yy(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},n.prototype.lttbDownSample=function(e,t){var r=Yy(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Ca(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new V9e(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return Tx(e,r)},function(r){return Tx(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},Wy(e)?vn(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var s=i[t];return s==null&&(s=this.getVisual(t),Jn(s)?s=s.slice():Wy(s)&&(s=vn({},s)),i[t]=s),s},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Wy(t)?vn(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){Wy(e)?vn(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?vn(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;HOe(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){wt(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Qd(this.dimensions,this._getDimInfo,this),this.hostModel)),EE(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];li(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(SL(arguments)))})},n.internalField=function(){qz=function(e){var t=e._invertedIndicesMap;wt(t,function(r,i){var s=e._dimInfos[i],a=s.ordinalMeta,o=e._store;if(a){r=t[i]=new j9e(a.categories.length);for(var l=0;l<r.length;l++)r[l]=Wz;for(var l=0;l<o.count();l++)r[o.get(s.storeDimIndex,l)]=l}})},qy=function(e,t,r){return tu(e._getCategory(t,r),null)},Tx=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=qy(e,e._idDimIdx,t)),r==null&&(r=Z9e+t),r},Ky=function(e){return Jn(e)||(e=e!=null?[e]:[]),e},Yy=function(e){var t=new n(e._schema?e._schema:Qd(e.dimensions,e._getDimInfo,e),e.hostModel);return EE(t,e),t},EE=function(e,t){wt(Q9e.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,wt(J9e,function(r){e[r]=Xr(t[r])}),e._calculationInfo=vn({},t._calculationInfo)},IE=function(e,t){var r=e._nameList,i=e._idList,s=e._nameDimIdx,a=e._idDimIdx,o=r[t],l=i[t];if(o==null&&s!=null&&(r[t]=o=qy(e,s,t)),l==null&&a!=null&&(i[t]=l=qy(e,a,t)),l==null&&o!=null){var c=e._nameRepeatCount,u=c[o]=(c[o]||0)+1;l=o,u>1&&(l+="__ec__"+u),i[t]=l}}}(),n}();const tze=eze;function nze(n,e){QL(n)||(n=iJ(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=jr(),s=[],a=ize(n,t,r,e.dimensionsCount),o=e.canOmitUnusedDimensions&&tee(a),l=r===n.dimensionsDefine,c=l?eee(n):JJ(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(n,a));for(var d=jr(u),h=new fJ(a),f=0;f<h.length;f++)h[f]=-1;function p(A){var T=h[A];if(T<0){var I=r[A],D=mr(I)?I:{name:I},B=new T2,O=D.name;O!=null&&c.get(O)!=null&&(B.name=B.displayName=O),D.type!=null&&(B.type=D.type),D.displayName!=null&&(B.displayName=D.displayName);var H=s.length;return h[A]=H,B.storeDimIndex=A,s.push(B),B}return s[T]}if(!o)for(var f=0;f<a;f++)p(f);d.each(function(A,T){var I=Wa(A).slice();if(I.length===1&&!ur(I[0])&&I[0]<0){d.set(T,!1);return}var D=d.set(T,[]);wt(I,function(B,O){var H=ur(B)?c.get(B):B;H!=null&&H<a&&(D[O]=H,v(p(H),T,O))})});var m=0;wt(t,function(A){var T,I,D,B;if(ur(A))T=A,B={};else{B=A,T=B.name;var O=B.ordinalMeta;B.ordinalMeta=null,B=vn({},B),B.ordinalMeta=O,I=B.dimsDef,D=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var H=d.get(T);if(H!==!1){if(H=Wa(H),!H.length)for(var L=0;L<(I&&I.length||1);L++){for(;m<a&&p(m).coordDim!=null;)m++;m<a&&H.push(m++)}wt(H,function(z,k){var F=p(z);if(l&&B.type!=null&&(F.type=B.type),v(Ji(F,B),T,k),F.name==null&&I){var W=I[k];!mr(W)&&(W={name:W}),F.name=F.displayName=W.name,F.defaultTooltip=W.defaultTooltip}D&&Ji(F.otherDims,D)})}});function v(A,T,I){KQ.get(T)!=null?A.otherDims[T]=I:(A.coordDim=T,A.coordDimIndex=I,i.set(T,!0))}var g=e.generateCoord,_=e.generateCoordCount,b=_!=null;_=g?_||1:0;var S=g||"value";function x(A){A.name==null&&(A.name=A.coordDim)}if(o)wt(s,function(A){x(A)}),s.sort(function(A,T){return A.storeDimIndex-T.storeDimIndex});else for(var w=0;w<a;w++){var M=p(w),C=M.coordDim;C==null&&(M.coordDim=sze(S,i,b),M.coordDimIndex=0,(!g||_<=0)&&(M.isExtraCoord=!0),_--),x(M),M.type==null&&(jQ(n,w)===js.Must||M.isExtraCoord&&(M.otherDims.itemName!=null||M.otherDims.seriesName!=null))&&(M.type="ordinal")}return rze(s),new QJ({source:n,dimensions:s,fullDimensionCount:a,dimensionOmitted:o})}function rze(n){for(var e=jr(),t=0;t<n.length;t++){var r=n[t],i=r.name,s=e.get(i)||0;s>0&&(r.name=i+(s-1)),s++,e.set(i,s)}}function ize(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return wt(e,function(s){var a;mr(s)&&(a=s.dimsDef)&&(i=Math.max(i,a.length))}),i}function sze(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}function nee(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function aze(n){var e=n.get("interval");return e??"auto"}function oze(n){return n.type==="category"&&aze(n.getLabelModel())===0}var Kz=[],lze={registerPreprocessor:XJ,registerProcessor:jJ,registerPostInit:O9e,registerPostUpdate:N9e,registerUpdateLifecycle:lk,registerAction:Qg,registerCoordinateSystem:B9e,registerLayout:F9e,registerVisual:S0,registerTransform:U9e,registerLoading:ZJ,registerMap:z9e,registerImpl:m9e,PRIORITY:E9e,ComponentModel:ns,ComponentView:lh,SeriesModel:i_,ChartView:Ov,registerComponentModel:function(n){ns.registerClass(n)},registerComponentView:function(n){lh.registerClass(n)},registerSeriesModel:function(n){i_.registerClass(n)},registerChartView:function(n){Ov.registerClass(n)},registerSubTypeDefaulter:function(n,e){ns.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){b8e(n,e)}};function fg(n){if(Jn(n)){wt(n,function(e){fg(e)});return}Di(Kz,n)>=0||(Kz.push(n),li(n)&&(n={install:n}),n.install(lze))}function ree(n,e,t,r,i,s,a,o){var l=i-n,c=s-e,u=t-n,d=r-e,h=Math.sqrt(u*u+d*d);u/=h,d/=h;var f=l*u+c*d,p=f/h;o&&(p=Math.min(Math.max(p,0),1)),p*=h;var m=a[0]=n+p*u,v=a[1]=e+p*d;return Math.sqrt((m-i)*(m-i)+(v-s)*(v-s))}var Bf=new _r,ts=new _r,Zs=new _r,Ff=new _r,Gc=new _r,XC=[],Fa=new _r;function cze(n,e){if(e<=180&&e>0){e=e/180*Math.PI,Bf.fromArray(n[0]),ts.fromArray(n[1]),Zs.fromArray(n[2]),_r.sub(Ff,Bf,ts),_r.sub(Gc,Zs,ts);var t=Ff.len(),r=Gc.len();if(!(t<.001||r<.001)){Ff.scale(1/t),Gc.scale(1/r);var i=Ff.dot(Gc),s=Math.cos(e);if(s<i){var a=ree(ts.x,ts.y,Zs.x,Zs.y,Bf.x,Bf.y,XC,!1);Fa.fromArray(XC),Fa.scaleAndAdd(Gc,a/Math.tan(Math.PI-e));var o=Zs.x!==ts.x?(Fa.x-ts.x)/(Zs.x-ts.x):(Fa.y-ts.y)/(Zs.y-ts.y);if(isNaN(o))return;o<0?_r.copy(Fa,ts):o>1&&_r.copy(Fa,Zs),Fa.toArray(n[1])}}}}function uze(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Bf.fromArray(n[0]),ts.fromArray(n[1]),Zs.fromArray(n[2]),_r.sub(Ff,ts,Bf),_r.sub(Gc,Zs,ts);var r=Ff.len(),i=Gc.len();if(!(r<.001||i<.001)){Ff.scale(1/r),Gc.scale(1/i);var s=Ff.dot(e),a=Math.cos(t);if(s<a){var o=ree(ts.x,ts.y,Zs.x,Zs.y,Bf.x,Bf.y,XC,!1);Fa.fromArray(XC);var l=Math.PI/2,c=Math.acos(Gc.dot(e)),u=l+c-t;if(u>=l)_r.copy(Fa,Zs);else{Fa.scaleAndAdd(Gc,o/Math.tan(Math.PI/2-u));var d=Zs.x!==ts.x?(Fa.x-ts.x)/(Zs.x-ts.x):(Fa.y-ts.y)/(Zs.y-ts.y);if(isNaN(d))return;d<0?_r.copy(Fa,ts):d>1&&_r.copy(Fa,Zs)}Fa.toArray(n[1])}}}}function RE(n,e,t,r){var i=t==="normal",s=i?n:n.ensureState(t);s.ignore=e;var a=r.get("smooth");a&&a===!0&&(a=.3),s.shape=s.shape||{},a>0&&(s.shape.smooth=a);var o=r.getModel("lineStyle").getLineStyle();i?n.useStyle(o):s.style=o}function dze(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=HR(r[0],r[1]),s=HR(r[1],r[2]);if(!i||!s){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var a=Math.min(i,s)*t,o=T3([],r[1],r[0],a/i),l=T3([],r[1],r[2],a/s),c=T3([],o,l,.5);n.bezierCurveTo(o[0],o[1],o[0],o[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)n.lineTo(r[u][0],r[u][1])}function fze(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var s=e.normal,a=s.get("show"),o=i.ignore,l=0;l<NC.length;l++){var c=NC[l],u=e[c],d=c==="normal";if(u){var h=u.get("show"),f=d?o:Ir(i.states[c]&&i.states[c].ignore,o);if(f||!Ir(h,a)){var p=d?r:r&&r.states[c];p&&(p.ignore=!0),r&&RE(r,!0,c,u);continue}r||(r=new PT,n.setTextGuideLine(r),!d&&(o||!a)&&RE(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),RE(r,!1,c,u)}}if(r){Ji(r.style,t),r.style.fill=null;var m=s.get("showAbove"),v=n.textGuideLineConfig=n.textGuideLineConfig||{};v.showAbove=m||!1,r.buildPath=dze}}function hze(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<cu.length;r++){var i=cu[r];t[i]=n.getModel([i,e])}return t}function pze(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,s=i.getComputedTransform(),a=i.getBoundingRect(),o=!s||s[1]<1e-5&&s[2]<1e-5,l=i.style.margin||0,c=a.clone();c.applyTransform(s),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=o?new BC(a,s):null;e.push({label:i,labelLine:r.labelLine,rect:c,localRect:a,obb:u,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:o,transform:s})}}return e}function mze(n,e,t,r,i,s){var a=n.length;if(a<2)return;n.sort(function(C,A){return C.rect[e]-A.rect[e]});for(var o=0,l,c=!1,u=0,d=0;d<a;d++){var h=n[d],f=h.rect;l=f[e]-o,l<0&&(f[e]-=l,h.label[e]-=l,c=!0);var p=Math.max(-l,0);u+=p,o=f[e]+f[t]}u>0&&s&&x(-u/a,0,a);var m=n[0],v=n[a-1],g,_;b(),g<0&&w(-g,.8),_<0&&w(_,.8),b(),S(g,_,1),S(_,g,-1),b(),g<0&&M(-g),_<0&&M(_);function b(){g=m.rect[e]-r,_=i-v.rect[e]-v.rect[t]}function S(C,A,T){if(C<0){var I=Math.min(A,-C);if(I>0){x(I*T,0,a);var D=I+C;D<0&&w(-D*T,1)}else w(-C*T,1)}}function x(C,A,T){C!==0&&(c=!0);for(var I=A;I<T;I++){var D=n[I],B=D.rect;B[e]+=C,D.label[e]+=C}}function w(C,A){for(var T=[],I=0,D=1;D<a;D++){var B=n[D-1].rect,O=Math.max(n[D].rect[e]-B[e]-B[t],0);T.push(O),I+=O}if(I){var H=Math.min(Math.abs(C)/I,A);if(C>0)for(var D=0;D<a-1;D++){var L=T[D]*H;x(L,0,D+1)}else for(var D=a-1;D>0;D--){var L=T[D-1]*H;x(-L,D,a)}}}function M(C){var A=C<0?-1:1;C=Math.abs(C);for(var T=Math.ceil(C/(a-1)),I=0;I<a-1;I++)if(A>0?x(T,0,I+1):x(-T,a-I-1,a),C-=T,C<=0)return}return c}function vze(n,e,t,r){return mze(n,"y","height",e,t,r)}function gze(n){var e=[];n.sort(function(m,v){return v.priority-m.priority});var t=new xi(0,0,0,0);function r(m){if(!m.ignore){var v=m.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}m.ignore=!0}for(var i=0;i<n.length;i++){var s=n[i],a=s.axisAligned,o=s.localRect,l=s.transform,c=s.label,u=s.labelLine;t.copy(s.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=s.obb,h=!1,f=0;f<e.length;f++){var p=e[f];if(t.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new BC(p.localRect,p.transform)),d||(d=new BC(o,l)),d.intersect(p.obb)){h=!0;break}}}h?(r(c),u&&r(u)):(c.attr("ignore",s.defaultAttr.ignore),u&&u.attr("ignore",s.defaultAttr.labelGuideIgnore),e.push(s))}}function Yz(n,e,t){var r=Kg.createCanvas(),i=e.getWidth(),s=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=s+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=s*t,r}var yze=function(n){lr(e,n);function e(t,r,i){var s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var a;i=i||LC,typeof t=="string"?a=Yz(t,r,i):mr(t)&&(a=t,t=a.id),s.id=t,s.dom=a;var o=a.style;return o&&(aZ(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=r,s.dpr=i,s}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=Yz("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,c=new xi(0,0,0,0);function u(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var b=new xi(0,0,0,0);b.copy(_),a.push(b)}else{for(var S=!1,x=1/0,w=0,M=0;M<a.length;++M){var C=a[M];if(C.intersect(_)){var A=new xi(0,0,0,0);A.copy(C),A.union(_),a[M]=A,S=!0;break}else if(l){c.copy(_),c.union(C);var T=_.width*_.height,I=C.width*C.height,D=c.width*c.height,B=D-T-I;B<x&&(x=B,w=M)}}if(l&&(a[w].union(_),S=!0),!S){var b=new xi(0,0,0,0);b.copy(_),a.push(b)}l||(l=a.length>=o)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var h=t[d];if(h){var f=h.shouldBePainted(i,s,!0,!0),p=h.__isRendered&&(h.__dirty&Ho||!f)?h.getPrevPaintRect():null;p&&u(p);var m=f&&(h.__dirty&Ho||!h.__isRendered)?h.getPaintRect():null;m&&u(m)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var h=r[d],f=h&&h.shouldBePainted(i,s,!0,!0);if(h&&(!f||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&u(p)}}var v;do{v=!1;for(var d=0;d<a.length;){if(a[d].isZero()){a.splice(d,1);continue}for(var g=d+1;g<a.length;)a[d].intersect(a[g])?(v=!0,a[d].union(a[g]),a.splice(g,1)):g++;d++}}while(v);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,s=this.dom,a=s.style,o=this.domBack;a&&(a.width=t+"px",a.height=r+"px"),s.width=t*i,s.height=r*i,o&&(o.width=t*i,o.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var s=this.dom,a=this.ctx,o=s.width,l=s.height;r=r||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,d=this.dpr,h=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/d,l/d));var f=this.domBack;function p(m,v,g,_){if(a.clearRect(m,v,g,_),r&&r!=="transparent"){var b=void 0;if(wT(r)){var S=r.global||r.__width===g&&r.__height===_;b=S&&r.__canvasGradient||M5(a,r,{x:0,y:0,width:g,height:_}),r.__canvasGradient=b,r.__width=g,r.__height=_}else $Le(r)&&(r.scaleX=r.scaleX||d,r.scaleY=r.scaleY||d,b=T5(a,r,{dirty:function(){h.setUnpainted(),h.painter.refresh()}}));a.save(),a.fillStyle=b||r,a.fillRect(m,v,g,_),a.restore()}c&&(a.save(),a.globalAlpha=u,a.drawImage(f,m,v,g,_),a.restore())}!i||c?p(0,0,o,l):i.length&&wt(i,function(m){p(m.x*d,m.y*d,m.width*d,m.height*d)})},e}(bu);const PE=yze;var Xz=1e5,Yh=314159,Ax=.01,bze=.001;function _ze(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function Sze(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var xze=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=vn({},r||{}),this.dpr=r.devicePixelRatio||LC,this._singleCanvas=s,this.root=e;var a=e.style;a&&(aZ(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(s){var u=e,d=u.width,h=u.height;r.width!=null&&(d=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,u.width=d*this.dpr,u.height=h*this.dpr,this._width=d,this._height=h;var f=new PE(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Yh]=f,f.zlevel=Yh,o.push(Yh),this._domRoot=e}else{this._width=xx(e,0,r),this._height=xx(e,1,r);var c=this._domRoot=Sze(this._width,this._height);e.appendChild(c)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var s=0;s<i.length;s++){var a=i[s],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=s===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,a=0;a<t;a++){var o=e[a];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Xz)),s||(s=r.ctx,s.save()),Ep(s,o,i,a===t-1))}s&&s.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(Xz)},n.prototype.paintOne=function(e,t){DJ(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var s=this._doPaintList(e,t,r),a=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),a)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;qR(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(Yh).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,s=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&s.push(c)}for(var u=!0,d=!1,h=function(m){var v=s[m],g=v.ctx,_=a&&v.createRepaintRects(e,t,f._width,f._height),b=r?v.__startIndex:v.__drawIndex,S=!r&&v.incremental&&Date.now,x=S&&Date.now(),w=v.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,w,_);else if(b===v.__startIndex){var M=e[b];(!M.incremental||!M.notClear||r)&&v.clear(!1,w,_)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=v.__startIndex);var C,A=function(B){var O={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(C=b;C<v.__endIndex;C++){var H=e[C];if(H.__inHover&&(d=!0),i._doPaintEl(H,v,a,B,O,C===v.__endIndex-1),S){var L=Date.now()-x;if(L>15)break}}O.prevElClipPaths&&g.restore()};if(_)if(_.length===0)C=v.__endIndex;else for(var T=f.dpr,I=0;I<_.length;++I){var D=_[I];g.save(),g.beginPath(),g.rect(D.x*T,D.y*T,D.width*T,D.height*T),g.clip(),A(D),g.restore()}else g.save(),A(),g.restore();v.__drawIndex=C,v.__drawIndex<v.__endIndex&&(u=!1)},f=this,p=0;p<s.length;p++)h(p);return kr.wxa&&wt(this._layers,function(m){m&&m.ctx&&m.ctx.draw&&m.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,r,i,s,a){var o=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(Ep(o,e,s,a),e.setPrevPaintRect(l))}else Ep(o,e,s,a)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Yh);var r=this._layers[e];return r||(r=new PE("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?ji(r,this._layerConfig[e],!0):this._layerConfig[e-Ax]&&ji(r,this._layerConfig[e-Ax],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,s=i.length,a=this._domRoot,o=null,l=-1;if(!r[e]&&_ze(t)){if(s>0&&e>i[0]){for(l=0;l<s-1&&!(i[l]<e&&i[l+1]>e);l++);o=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(o){var c=o.dom;c.nextSibling?a.insertBefore(t.dom,c.nextSibling):a.appendChild(t.dom)}else a.firstChild?a.insertBefore(t.dom,a.firstChild):a.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var s=r[i];e.call(t,this._layers[s],s)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var s=r[i],a=this._layers[s];a.__builtin__&&e.call(t,a,s)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var s=r[i],a=this._layers[s];a.__builtin__||e.call(t,a,s)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,h){d.__dirty=d.__used=!1});function t(d){s&&(s.__endIndex!==d&&(s.__dirty=!0),s.__endIndex=d)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var s=null,a=0,o,l;for(l=0;l<e.length;l++){var i=e[l],c=i.zlevel,u=void 0;o!==c&&(o=c,a=0),i.incremental?(u=this.getLayer(c+bze,this._needsManuallyCompositing),u.incremental=!0,a=1):u=this.getLayer(c+(a>0?Ax:0),this._needsManuallyCompositing),u.__builtin__||_L("ZLevel "+c+" has been used by unkown layer "+u.id),u!==s&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),s=u),i.__dirty&Ho&&!i.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,h){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,wt(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?ji(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var s=this._zlevelList[i];if(s===e||s===e+Ax){var a=this._layers[s];ji(a,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(Di(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,s=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=xx(s,0,i),t=xx(s,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Yh).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Yh].dom;var t=new PE("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,s=t.dom.height;this.eachLayer(function(d){d.__builtin__?r.drawImage(d.dom,0,0,i,s):d.renderToCanvas&&(r.save(),d.renderToCanvas(r),r.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,c=o.length;l<c;l++){var u=o[l];Ep(r,u,a,l===c-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const wze=xze;function Cze(n){n.registerPainter("canvas",wze)}function Ex(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;Jn(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Zr(r,function(s){return cg(s,i)})}}var jz=Math.PI*2,Ix=Math.PI/180;function iee(n,e){return e_(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function see(n,e){var t=iee(n,e),r=n.get("center"),i=n.get("radius");Jn(i)||(i=[0,i]);var s=Ts(t.width,e.getWidth()),a=Ts(t.height,e.getHeight()),o=Math.min(s,a),l=Ts(i[0],o/2),c=Ts(i[1],o/2),u,d,h=n.coordinateSystem;if(h){var f=h.dataToPoint(r);u=f[0]||0,d=f[1]||0}else Jn(r)||(r=[r,r]),u=Ts(r[0],s)+t.x,d=Ts(r[1],a)+t.y;return{cx:u,cy:d,r0:l,r:c}}function Mze(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),s=i.mapDimension("value"),a=iee(r,t),o=see(r,t),l=o.cx,c=o.cy,u=o.r,d=o.r0,h=-r.get("startAngle")*Ix,f=r.get("endAngle"),p=r.get("padAngle")*Ix;f=f==="auto"?h-jz:-f*Ix;var m=r.get("minAngle")*Ix,v=m+p,g=0;i.each(s,function(z){!isNaN(z)&&g++});var _=i.getSum(s),b=Math.PI/(_||g)*2,S=r.get("clockwise"),x=r.get("roseType"),w=r.get("stillShowZeroSum"),M=i.getDataExtent(s);M[0]=0;var C=S?1:-1,A=[h,f],T=C*p/2;qZ(A,!S),h=A[0],f=A[1];var I=aee(r);I.startAngle=h,I.endAngle=f,I.clockwise=S;var D=Math.abs(f-h),B=D,O=0,H=h;if(i.setLayout({viewRect:a,r:u}),i.each(s,function(z,k){var F;if(isNaN(z)){i.setItemLayout(k,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:S,cx:l,cy:c,r0:d,r:x?NaN:u});return}x!=="area"?F=_===0&&w?b:z*b:F=D/g,F<v?(F=v,B-=v):O+=z;var W=H+C*F,q=0,Z=0;p>F?(q=H+C*F/2,Z=q):(q=H+T,Z=W-T),i.setItemLayout(k,{angle:F,startAngle:q,endAngle:Z,clockwise:S,cx:l,cy:c,r0:d,r:x?S8e(z,M,[d,u]):u}),H=W}),B<jz&&g)if(B<=.001){var L=D/g;i.each(s,function(z,k){if(!isNaN(z)){var F=i.getItemLayout(k);F.angle=L;var W=0,q=0;L<p?(W=h+C*(k+1/2)*L,q=W):(W=h+C*k*L+T,q=h+C*(k+1)*L-T),F.startAngle=W,F.endAngle=q}})}else b=B/O,H=h,i.each(s,function(z,k){if(!isNaN(z)){var F=i.getItemLayout(k),W=F.angle===v?v:z*b,q=0,Z=0;W<p?(q=H+C*W/2,Z=q):(q=H+T,Z=H+C*W-T),F.startAngle=q,F.endAngle=Z,H+=C*W}})})}var aee=zs();function Tze(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(s){for(var a=i.getName(s),o=0;o<r.length;o++)if(!r[o].isSelected(a))return!1;return!0})}}}}var Aze=Math.PI/180;function Zz(n,e,t,r,i,s,a,o,l,c){if(n.length<2)return;function u(m){for(var v=m.rB,g=v*v,_=0;_<m.list.length;_++){var b=m.list[_],S=Math.abs(b.label.y-t),x=r+b.len,w=x*x,M=Math.sqrt(Math.abs((1-S*S/g)*w)),C=e+(M+b.len2)*i,A=C-b.label.x,T=b.targetTextWidth-A*i;oee(b,T,!0),b.label.x=C}}function d(m){for(var v={list:[],maxY:0},g={list:[],maxY:0},_=0;_<m.length;_++)if(m[_].labelAlignTo==="none"){var b=m[_],S=b.label.y>t?g:v,x=Math.abs(b.label.y-t);if(x>=S.maxY){var w=b.label.x-e-b.len2*i,M=r+b.len,C=Math.abs(w)<M?Math.sqrt(x*x/(1-w*w/M/M)):M;S.rB=C,S.maxY=x}S.list.push(b)}u(v),u(g)}for(var h=n.length,f=0;f<h;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var p=n[f].label.x-c;n[f].linePoints[1][0]+=p,n[f].label.x=c}vze(n,l,l+a)&&d(n)}function Eze(n,e,t,r,i,s,a,o){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<n.length;h++){var f=n[h].label;DE(n[h])||(f.x<e?(u=Math.min(u,f.x),l.push(n[h])):(d=Math.max(d,f.x),c.push(n[h])))}for(var h=0;h<n.length;h++){var p=n[h];if(!DE(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,m=p.linePoints,v=void 0;p.labelAlignTo==="edge"?f.x<e?v=m[2][0]-p.labelDistance-a-p.edgeDistance:v=a+i-p.edgeDistance-m[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<e?v=u-a-p.bleedMargin:v=a+i-d-p.bleedMargin:f.x<e?v=f.x-a-p.bleedMargin:v=a+i-f.x-p.bleedMargin,p.targetTextWidth=v,oee(p,v)}}Zz(c,e,t,r,1,i,s,a,o,d),Zz(l,e,t,r,-1,i,s,a,o,u);for(var h=0;h<n.length;h++){var p=n[h];if(!DE(p)&&p.linePoints){var f=p.label,m=p.linePoints,g=p.labelAlignTo==="edge",_=f.style.padding,b=_?_[1]+_[3]:0,S=f.style.backgroundColor?0:b,x=p.rect.width+S,w=m[1][0]-m[2][0];g?f.x<e?m[2][0]=a+p.edgeDistance+x+p.labelDistance:m[2][0]=a+i-p.edgeDistance-x-p.labelDistance:(f.x<e?m[2][0]=f.x+p.labelDistance:m[2][0]=f.x-p.labelDistance,m[1][0]=m[2][0]+w),m[1][1]=m[2][1]=f.y}}}function oee(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,s=n.rect,a=i.backgroundColor,o=i.padding,l=o?o[1]+o[3]:0,c=i.overflow,u=s.width+(a?0:l);if(e<u||t){var d=s.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",a)}else{var f=e-l,p=e<u?f:t?f>n.unconstrainedWidth?null:f:null;r.setStyle("width",p)}var m=r.getBoundingRect();s.width=m.width;var v=(r.style.margin||0)+2.1;s.height=m.height+v,s.y-=(s.height-d)/2}}}function DE(n){return n.position==="center"}function Ize(n){var e=n.getData(),t=[],r,i,s=!1,a=(n.get("minShowLabelAngle")||0)*Aze,o=e.getLayout("viewRect"),l=e.getLayout("r"),c=o.width,u=o.x,d=o.y,h=o.height;function f(w){w.ignore=!0}function p(w){if(!w.ignore)return!0;for(var M in w.states)if(w.states[M].ignore===!1)return!0;return!1}e.each(function(w){var M=e.getItemGraphicEl(w),C=M.shape,A=M.getTextContent(),T=M.getTextGuideLine(),I=e.getItemModel(w),D=I.getModel("label"),B=D.get("position")||I.get(["emphasis","label","position"]),O=D.get("distanceToLabelLine"),H=D.get("alignTo"),L=Ts(D.get("edgeDistance"),c),z=D.get("bleedMargin"),k=I.getModel("labelLine"),F=k.get("length");F=Ts(F,c);var W=k.get("length2");if(W=Ts(W,c),Math.abs(C.endAngle-C.startAngle)<a){wt(A.states,f),A.ignore=!0,T&&(wt(T.states,f),T.ignore=!0);return}if(p(A)){var q=(C.startAngle+C.endAngle)/2,Z=Math.cos(q),se=Math.sin(q),X,ie,ae,ce;r=C.cx,i=C.cy;var we=B==="inside"||B==="inner";if(B==="center")X=C.cx,ie=C.cy,ce="center";else{var He=(we?(C.r+C.r0)/2*Z:C.r*Z)+r,Ge=(we?(C.r+C.r0)/2*se:C.r*se)+i;if(X=He+Z*3,ie=Ge+se*3,!we){var me=He+Z*(F+l-C.r),be=Ge+se*(F+l-C.r),oe=me+(Z<0?-1:1)*W,j=be;H==="edge"?X=Z<0?u+L:u+c-L:X=oe+(Z<0?-O:O),ie=j,ae=[[He,Ge],[me,be],[oe,j]]}ce=we?"center":H==="edge"?Z>0?"right":"left":Z>0?"left":"right"}var ke=Math.PI,ze=0,Ve=D.get("rotate");if(gs(Ve))ze=Ve*(ke/180);else if(B==="center")ze=0;else if(Ve==="radial"||Ve===!0){var Le=Z<0?-q+ke:-q;ze=Le}else if(Ve==="tangential"&&B!=="outside"&&B!=="outer"){var Ze=Math.atan2(Z,se);Ze<0&&(Ze=ke*2+Ze);var st=se>0;st&&(Ze=ke+Ze),ze=Ze-ke}if(s=!!ze,A.x=X,A.y=ie,A.rotation=ze,A.setStyle({verticalAlign:"middle"}),we){A.setStyle({align:ce});var J=A.states.select;J&&(J.x+=A.x,J.y+=A.y)}else{var fe=A.getBoundingRect().clone();fe.applyTransform(A.getComputedTransform());var V=(A.style.margin||0)+2.1;fe.y-=V/2,fe.height+=V,t.push({label:A,labelLine:T,position:B,len:F,len2:W,minTurnAngle:k.get("minTurnAngle"),maxSurfaceAngle:k.get("maxSurfaceAngle"),surfaceNormal:new _r(Z,se),linePoints:ae,textAlign:ce,labelDistance:O,labelAlignTo:H,edgeDistance:L,bleedMargin:z,rect:fe,unconstrainedWidth:fe.width,labelStyleWidth:A.style.width})}M.setTextConfig({inside:we})}}),!s&&n.get("avoidLabelOverlap")&&Eze(t,r,i,l,c,h,u,d);for(var m=0;m<t.length;m++){var v=t[m],g=v.label,_=v.labelLine,b=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:v.textAlign}),b&&(wt(g.states,f),g.ignore=!0);var S=g.states.select;S&&(S.x+=g.x,S.y+=g.y)}if(_){var x=v.linePoints;b||!x?(wt(_.states,f),_.ignore=!0):(cze(x,v.minTurnAngle),uze(x,v.surfaceNormal,v.maxSurfaceAngle),_.setShape({points:x}),g.__hostTarget.textGuideLineConfig={anchor:new _r(x[0][0],x[0][1])})}}}var Rze=function(n){lr(e,n);function e(t,r,i){var s=n.call(this)||this;s.z2=2;var a=new ja;return s.setTextContent(a),s.updateData(t,r,i,!0),s}return e.prototype.updateData=function(t,r,i,s){var a=this,o=t.hostModel,l=t.getItemModel(r),c=l.getModel("emphasis"),u=t.getItemLayout(r),d=vn(Ex(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){a.setShape(d);return}if(s){a.setShape(d);var h=o.getShallow("animationType");o.ecModel.ssr?(x2(a,{scaleX:0,scaleY:0},o,{dataIndex:r,isFrom:!0}),a.originX=d.cx,a.originY=d.cy):h==="scale"?(a.shape.r=u.r0,x2(a,{shape:{r:u.r}},o,r)):i!=null?(a.setShape({startAngle:i,endAngle:i}),x2(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},o,r)):(a.shape.endAngle=u.startAngle,dg(a,{shape:{endAngle:u.endAngle}},o,r))}else KNe(a),dg(a,{shape:d},o,r);a.useStyle(t.getItemVisual(r,"style")),oNe(a,l);var f=(u.startAngle+u.endAngle)/2,p=o.get("selectedOffset"),m=Math.cos(f)*p,v=Math.sin(f)*p,g=l.getShallow("cursor");g&&a.attr("cursor",g),this._updateLabel(o,t,r),a.ensureState("emphasis").shape=vn({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},Ex(c.getModel("itemStyle"),u)),vn(a.ensureState("select"),{x:m,y:v,shape:Ex(l.getModel(["select","itemStyle"]),u)}),vn(a.ensureState("blur"),{shape:Ex(l.getModel(["blur","itemStyle"]),u)});var _=a.getTextGuideLine(),b=a.getTextContent();_&&vn(_.ensureState("select"),{x:m,y:v}),vn(b.ensureState("select"),{x:m,y:v}),iNe(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var s=this,a=r.getItemModel(i),o=a.getModel("labelLine"),l=r.getItemVisual(i,"style"),c=l&&l.fill,u=l&&l.opacity;FQ(s,dBe(a),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var d=s.getTextContent();s.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=t.get(["label","position"]);if(h!=="outside"&&h!=="outer")s.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new PT,this.setTextGuideLine(f)),fze(this,hze(a),{stroke:c,opacity:V1(o.get(["lineStyle","opacity"]),u,1)})}},e}(RT),Pze=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,s){var a=t.getData(),o=this._data,l=this.group,c;if(!o&&a.count()>0){for(var u=a.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<a.count();++d)u=a.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&t.get("showEmptyCircle")){var h=aee(t),f=new RT({shape:vn(see(t,i),h)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}a.diff(o).add(function(p){var m=new Rze(a,p,c);a.setItemGraphicEl(p,m),l.add(m)}).update(function(p,m){var v=o.getItemGraphicEl(m);v.updateData(a,p,c),v.off("click"),l.add(v),a.setItemGraphicEl(p,v)}).remove(function(p){var m=o.getItemGraphicEl(p);DQ(m,t,p)}).execute(),Ize(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),s=i.getItemLayout(0);if(s){var a=t[0]-s.cx,o=t[1]-s.cy,l=Math.sqrt(a*a+o*o);return l<=s.r&&l>=s.r0}},e.type="pie",e}(Ov);const Dze=Pze;function Lze(n,e,t){e=Jn(e)&&{coordDimensions:e}||vn({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=nze(r,e).dimensions,s=new tze(i,n);return s.initData(r,t),s}var kze=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}();const Oze=kze;var Nze=zs(),Bze=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Oze(Li(this.getData,this),Li(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Lze(this,{coordDimensions:["value"],encodeDefaulter:Rs(YBe,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=Nze(r),s=i.seats;if(!s){var a=[];r.each(r.mapDimension("value"),function(l){a.push(l)}),s=i.seats=C8e(a,r.hostModel.get("percentPrecision"))}var o=n.prototype.getDataParams.call(this,t);return o.percent=s[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){n5(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(i_);const Fze=Bze;function zze(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var s=r.mapDimension("value"),a=r.get(s,i);return!(gs(a)&&!isNaN(a)&&a<0)})}}}function Uze(n){n.registerChartView(Dze),n.registerSeriesModel(Fze),BFe("pie",n.registerAction),n.registerLayout(Rs(Mze,"pie")),n.registerProcessor(Tze("pie")),n.registerProcessor(zze("pie"))}function Qz(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,s={},a=i.getAxesOnZeroOf()[0],o=i.position,l=a?"onZero":o,c=i.dim,u=r.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,p=c==="x"?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(a){var m=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(m,p[1]),p[0])}s.position=[c==="y"?p[h[l]]:d[0],c==="x"?p[h[l]]:d[3]],s.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=v[o],s.labelOffset=a?p[h[o]]-p[h.onZero]:0,e.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),Xb(t.labelInside,e.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var g=e.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-g:g,s.z2=1,s}var zf=Math.PI,$p=function(){function n(e,t){this.group=new lu,this.opt=t,this.axisModel=e,Ji(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new lu({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!Jz[e]},n.prototype.add=function(e){Jz[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=kZ(t-e),s,a;return kC(i)?(a=r>0?"top":"bottom",s="center"):kC(i-zf)?(a=r>0?"bottom":"top",s="center"):(a="middle",i>0&&i<zf?s=r>0?"right":"left":s=r>0?"left":"right"),{rotation:i,textAlign:s,textVerticalAlign:a}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),Jz={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var s=e.axis.getExtent(),a=r.transform,o=[s[0],0],l=[s[1],0],c=o[0]>l[0];a&&(eu(o,o,a),eu(l,l,a));var u=vn({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new aS({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});GL(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var h=e.get(["axisLine","symbol"]);if(h!=null){var f=e.get(["axisLine","symbolSize"]);ur(h)&&(h=[h,h]),(ur(f)||gs(f))&&(f=[f,f]);var p=ZFe(e.get(["axisLine","symbolOffset"])||0,f),m=f[0],v=f[1];wt([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(g,_){if(h[_]!=="none"&&h[_]!=null){var b=ik(h[_],-m/2,-v/2,m,v,u.stroke,!0),S=g.r+g.offset,x=c?l:o;b.attr({rotation:g.rotate,x:x[0]+S*Math.cos(n.rotation),y:x[1]-S*Math.sin(n.rotation),silent:!0,z2:11}),t.add(b)}})}}},axisTickLabel:function(n,e,t,r){var i=$ze(t,r,e,n),s=Wze(t,r,e,n);if(Vze(e,s,i),Gze(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=pze(Zr(s,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));gze(a)}},axisName:function(n,e,t,r){var i=Xb(n.axisName,e.get("name"));if(i){var s=e.get("nameLocation"),a=n.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[s==="start"?c[0]-u*l:s==="end"?c[1]+u*l:(c[0]+c[1])/2,tU(s)?n.labelOffset+a*l:0],h,f=e.get("nameRotate");f!=null&&(f=f*zf/180);var p;tU(s)?h=$p.innerTextLayout(n.rotation,f??n.rotation,a):(h=Hze(n.rotation,s,f||0,c),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var m=o.getFont(),v=e.get("nameTruncate",!0)||{},g=v.ellipsis,_=Xb(n.nameTruncateMaxWidth,v.maxWidth,p),b=new ja({x:d[0],y:d[1],rotation:h.rotation,silent:$p.isLabelSilent(e),style:oh(o,{text:i,font:m,overflow:"truncate",width:_,ellipsis:g,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||h.textAlign,verticalAlign:o.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(DT({el:b,componentModel:e,itemName:i}),b.__fullText=i,b.anid="name",e.get("triggerEvent")){var S=$p.makeAxisEventDataBase(e);S.targetType="axisName",S.name=i,Pi(b).eventData=S}r.add(b),b.updateTransform(),t.add(b),b.decomposeTransform()}}};function Hze(n,e,t,r){var i=kZ(t-n),s,a,o=r[0]>r[1],l=e==="start"&&!o||e!=="start"&&o;return kC(i-zf/2)?(a=l?"bottom":"top",s="center"):kC(i-zf*1.5)?(a=l?"top":"bottom",s="center"):(a="middle",i<zf*1.5&&i>zf/2?s=l?"left":"right":s=l?"right":"left"),{rotation:i,textAlign:s,textVerticalAlign:a}}function Vze(n,e,t){if(!oze(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var s=e[0],a=e[1],o=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],d=t[t.length-1],h=t[t.length-2];r===!1?(sl(s),sl(c)):eU(s,a)&&(r?(sl(a),sl(u)):(sl(s),sl(c))),i===!1?(sl(o),sl(d)):eU(l,o)&&(i?(sl(l),sl(h)):(sl(o),sl(d)))}}function sl(n){n&&(n.ignore=!0)}function eU(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=wL([]);return CL(i,i,-n.rotation),t.applyTransform(Dv([],i,n.getLocalTransform())),r.applyTransform(Dv([],i,e.getLocalTransform())),t.intersect(r)}}function tU(n){return n==="middle"||n==="center"}function lee(n,e,t,r,i){for(var s=[],a=[],o=[],l=0;l<n.length;l++){var c=n[l].coord;a[0]=c,a[1]=0,o[0]=c,o[1]=t,e&&(eu(a,a,e),eu(o,o,e));var u=new aS({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});GL(u.shape,u.style.lineWidth),u.anid=i+"_"+n[l].tickValue,s.push(u)}return s}function $ze(n,e,t,r){var i=t.axis,s=t.getModel("axisTick"),a=s.get("show");if(a==="auto"&&r.handleAutoShown&&(a=r.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var o=s.getModel("lineStyle"),l=r.tickDirection*s.get("length"),c=i.getTicksCoords(),u=lee(c,e.transform,l,Ji(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function Gze(n,e,t,r){var i=t.axis,s=t.getModel("minorTick");if(!(!s.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(a.length)for(var o=s.getModel("lineStyle"),l=r*s.get("length"),c=Ji(o.getLineStyle(),Ji(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var d=lee(a[u],e.transform,l,c,"minorticks_"+u),h=0;h<d.length;h++)n.add(d[h])}}function Wze(n,e,t,r){var i=t.axis,s=Xb(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!s||i.scale.isBlank())){var a=t.getModel("axisLabel"),o=a.get("margin"),l=i.getViewLabels(),c=(Xb(r.labelRotate,a.get("rotate"))||0)*zf/180,u=$p.innerTextLayout(r.rotation,c,r.labelDirection),d=t.getCategories&&t.getCategories(!0),h=[],f=$p.isLabelSilent(t),p=t.get("triggerEvent");return wt(l,function(m,v){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(m.tickValue):m.tickValue,_=m.formattedLabel,b=m.rawLabel,S=a;if(d&&d[g]){var x=d[g];mr(x)&&x.textStyle&&(S=new Ca(x.textStyle,a,t.ecModel))}var w=S.getTextColor()||t.get(["axisLine","lineStyle","color"]),M=i.dataToCoord(g),C=S.getShallow("align",!0)||u.textAlign,A=Ir(S.getShallow("alignMinLabel",!0),C),T=Ir(S.getShallow("alignMaxLabel",!0),C),I=S.getShallow("verticalAlign",!0)||S.getShallow("baseline",!0)||u.textVerticalAlign,D=Ir(S.getShallow("verticalAlignMinLabel",!0),I),B=Ir(S.getShallow("verticalAlignMaxLabel",!0),I),O=new ja({x:M,y:r.labelOffset+r.labelDirection*o,rotation:u.rotation,silent:f,z2:10+(m.level||0),style:oh(S,{text:_,align:v===0?A:v===l.length-1?T:C,verticalAlign:v===0?D:v===l.length-1?B:I,fill:li(w)?w(i.type==="category"?b:i.type==="value"?g+"":g,v):w})});if(O.anid="label_"+g,DT({el:O,componentModel:t,itemName:_,formatterParamsExtra:{isTruncated:function(){return O.isTruncated},value:b,tickIndex:v}}),p){var H=$p.makeAxisEventDataBase(t);H.targetType="axisLabel",H.value=b,H.tickIndex=v,i.type==="category"&&(H.dataIndex=g),Pi(O).eventData=H}e.add(O),O.updateTransform(),h.push(O),n.add(O),O.decomposeTransform()}),h}}const qze=$p;function Kze(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Yze(t,n,e),t.seriesInvolved&&jze(t,n),t}function Yze(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),s=i.get("link",!0)||[],a=[];wt(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=o_(o.model),c=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var u=o.model,d=u.getModel("tooltip",r);if(wt(o.getAxes(),Rs(m,!1,null)),o.getTooltipAxes&&r&&d.get("show")){var h=d.get("trigger")==="axis",f=d.get(["axisPointer","type"])==="cross",p=o.getTooltipAxes(d.get(["axisPointer","axis"]));(h||f)&&wt(p.baseAxes,Rs(m,f?"cross":!0,h)),f&&wt(p.otherAxes,Rs(m,"cross",!1))}function m(v,g,_){var b=_.model.getModel("axisPointer",i),S=b.get("show");if(!(!S||S==="auto"&&!v&&!P5(b))){g==null&&(g=b.get("triggerTooltip")),b=v?Xze(_,d,i,e,v,g):b;var x=b.get("snap"),w=b.get("triggerEmphasis"),M=o_(_.model),C=g||x||_.type==="category",A=n.axesInfo[M]={key:M,axis:_,coordSys:o,axisPointerModel:b,triggerTooltip:g,triggerEmphasis:w,involveSeries:C,snap:x,useHandle:P5(b),seriesModels:[],linkGroup:null};c[M]=A,n.seriesInvolved=n.seriesInvolved||C;var T=Zze(s,_);if(T!=null){var I=a[T]||(a[T]={axesInfo:{}});I.axesInfo[M]=A,I.mapper=s[T].mapper,A.linkGroup=I}}}})}function Xze(n,e,t,r,i,s){var a=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};wt(o,function(h){l[h]=Xr(a.get(h))}),l.snap=n.type!=="category"&&!!s,a.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),i==="cross"){var u=a.get(["label","show"]);if(c.show=u??!0,!s){var d=l.lineStyle=a.get("crossStyle");d&&Ji(c,d.textStyle)}}return n.model.getModel("axisPointer",new Ca(l,t,r))}function jze(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),s=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||s===!1||t.get(["axisPointer","show"],!0)===!1||wt(n.coordSysAxesInfo[o_(r.model)],function(a){var o=a.axis;r.getAxis(o.dim)===o&&(a.seriesModels.push(t),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=t.getData().count())})})}function Zze(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var s=n[i]||{};if(LE(s[r+"AxisId"],t.id)||LE(s[r+"AxisIndex"],t.componentIndex)||LE(s[r+"AxisName"],t.name))return i}}function LE(n,e){return n==="all"||Jn(n)&&Di(n,e)>=0||n===e}function Qze(n){var e=uk(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,s=t.get("status"),a=t.get("value");a!=null&&(a=r.parse(a));var o=P5(t);s==null&&(i.status=o?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,o&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function uk(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[o_(n)]}function Jze(n){var e=uk(n);return e&&e.axisPointerModel}function P5(n){return!!n.get(["handle","show"])}function o_(n){return n.type+"||"+n.id}var nU={},eUe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,s){this.axisPointerClass&&Qze(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,s){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var s=e.getAxisPointerClass(this.axisPointerClass);if(s){var a=Jze(t);a?(this._axisPointer||(this._axisPointer=new s)).render(t,a,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){nU[t]=r},e.getAxisPointerClass=function(t){return t&&nU[t]},e.type="axis",e}(lh);const tUe=eUe;var mp=zs(),rU=Xr,kE=Li,nUe=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var s=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===s&&this._lastStatus===a)){this._lastValue=s,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var c={};this.makeElOption(c,s,e,t,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new lu,this.createPointerEl(o,c,e,t),this.createLabelEl(o,c,e,t),r.getZr().add(o);else{var h=Rs(iU,t,d);this.updatePointerEl(o,c,h),this.updateLabelEl(o,c,h,t)}aU(o,t,!0),this._renderHandle(s)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,s=i.type==="category",a=t.get("snap");if(!a&&!s)return!1;if(r==="auto"||r==null){var o=this.animationThreshold;if(s&&i.getBandWidth()>o)return!0;if(a){var l=uk(e).seriesDataCount,c=i.getExtent();return Math.abs(c[0]-c[1])/l>o}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,s){},n.prototype.createPointerEl=function(e,t,r,i){var s=t.pointer;if(s){var a=mp(e).pointerEl=new cBe[s.type](rU(t.pointer));e.add(a)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var s=mp(e).labelEl=new ja(rU(t.label));e.add(s),sU(s,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=mp(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var s=mp(e).labelEl;s&&(s.setStyle(t.label.style),r(s,{x:t.label.x,y:t.label.y}),sU(s,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,s=t.getModel("handle"),a=t.get("status");if(!s.get("show")||!a||a==="hide"){i&&r.remove(i),this._handle=null;return}var o;this._handle||(o=!0,i=this._handle=qL(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){lZ(c.event)},onmousedown:kE(this._onHandleDragMove,this,0,0),drift:kE(this._onHandleDragMove,this),ondragend:kE(this._onHandleDragEnd,this)}),r.add(i)),aU(i,t,!1),i.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=s.get("size");Jn(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,SJ(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},n.prototype._moveHandleToValue=function(e,t){iU(this._axisPointerModel,!t&&this._moveAnimation,this._handle,OE(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(OE(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(OE(i)),mp(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),x5(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function iU(n,e,t,r){cee(mp(t).lastProp,r)||(mp(t).lastProp=r,e?dg(t,r,n):(t.stopAnimation(),t.attr(r)))}function cee(n,e){if(mr(n)&&mr(e)){var t=!0;return wt(e,function(r,i){t=t&&cee(n[i],r)}),!!t}else return n===e}function sU(n,e){n[e.get(["label","show"])?"show":"hide"]()}function OE(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function aU(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(s){s.type!=="group"&&(r!=null&&(s.z=r),i!=null&&(s.zlevel=i),s.silent=t)})}const rUe=nUe;function iUe(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function sUe(n,e,t,r,i){var s=t.get("value"),a=uee(s,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=OT(o.get("padding")||0),c=o.getFont(),u=AZ(a,c),d=i.position,h=u.width+l[1]+l[3],f=u.height+l[0]+l[2],p=i.align;p==="right"&&(d[0]-=h),p==="center"&&(d[0]-=h/2);var m=i.verticalAlign;m==="bottom"&&(d[1]-=f),m==="middle"&&(d[1]-=f/2),aUe(d,h,f,r);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:oh(o,{text:a,font:c,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function aUe(n,e,t,r){var i=r.getWidth(),s=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,s)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function uee(n,e,t,r,i){n=e.scale.parse(n);var s=e.scale.getLabel({value:n},{precision:i.precision}),a=i.formatter;if(a){var o={value:nee(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};wt(r,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&o.seriesData.push(d)}),ur(a)?s=a.replace("{value}",s):li(a)&&(s=a(o))}return s}function dee(n,e,t){var r=Pv();return CL(r,r,t.rotation),WR(r,r,t.position),WL([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function oUe(n,e,t,r,i,s){var a=qze.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),sUe(e,r,i,s,{position:dee(r.axis,n,t),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function lUe(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function cUe(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}var uUe=function(n){lr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,s,a){var o=i.axis,l=o.grid,c=s.get("type"),u=oU(l,o).getOtherAxis(o).getGlobalExtent(),d=o.toGlobalCoord(o.dataToCoord(r,!0));if(c&&c!=="none"){var h=iUe(s),f=dUe[c](o,d,u);f.style=h,t.graphicKey=f.type,t.pointer=f}var p=Qz(l.model,i);oUe(r,t,p,i,s,a)},e.prototype.getHandleTransform=function(t,r,i){var s=Qz(r.axis.grid.model,r,{labelInside:!1});s.labelMargin=i.get(["handle","margin"]);var a=dee(r.axis,t,s);return{x:a[0],y:a[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,s){var a=i.axis,o=a.grid,l=a.getGlobalExtent(!0),c=oU(o,a).getOtherAxis(a).getGlobalExtent(),u=a.dim==="x"?0:1,d=[t.x,t.y];d[u]+=r[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var h=(c[1]+c[0])/2,f=[h,h];f[u]=d[u];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:f,tooltipOption:p[u]}},e}(rUe);function oU(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var dUe={line:function(n,e,t){var r=lUe([e,t[0]],[e,t[1]],lU(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:cUe([e-r/2,t[0]],[r,i],lU(n))}}};function lU(n){return n.dim==="x"?0:1}const fUe=uUe;var hUe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(ns);const pUe=hUe;var rd=zs(),mUe=wt;function fee(n,e,t){if(!kr.node){var r=e.getZr();rd(r).records||(rd(r).records={}),vUe(r,e);var i=rd(r).records[n]||(rd(r).records[n]={});i.handler=t}}function vUe(n,e){if(rd(n).initialized)return;rd(n).initialized=!0,t("click",Rs(cU,"click")),t("mousemove",Rs(cU,"mousemove")),t("globalout",yUe);function t(r,i){n.on(r,function(s){var a=bUe(e);mUe(rd(n).records,function(o){o&&i(o,s,a.dispatchAction)}),gUe(a.pendings,e)})}}function gUe(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function yUe(n,e,t){n.handler("leave",null,t)}function cU(n,e,t,r){e.handler(n,t,r)}function bUe(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function D5(n,e){if(!kr.node){var t=e.getZr(),r=(rd(t).records||{})[n];r&&(rd(t).records[n]=null)}}var _Ue=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var s=r.getComponent("tooltip"),a=t.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";fee("axisPointer",i,function(o,l,c){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&c({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){D5("axisPointer",r)},e.prototype.dispose=function(t,r){D5("axisPointer",r)},e.type="axisPointer",e}(lh);const SUe=_Ue;function hee(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var s=i.getData(),a=rS(s,n);if(a==null||a<0||Jn(a))return{point:[]};var o=s.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(n.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,h=c.dim,f=d==="x"||d==="radius"?1:0,p=s.mapDimension(h),m=[];m[f]=s.get(p,a),m[1-f]=s.get(s.getCalculationInfo("stackResultDimension"),a),t=l.dataToPoint(m)||[]}else t=l.dataToPoint(s.getValues(Zr(l.dimensions,function(g){return s.mapDimension(g)}),a))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),t=[v.x+v.width/2,v.y+v.height/2]}return{point:t,el:o}}var uU=zs();function xUe(n,e,t){var r=n.currTrigger,i=[n.x,n.y],s=n,a=n.dispatchAction||Li(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){A2(i)&&(i=hee({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},e).point);var l=A2(i),c=s.axesInfo,u=o.axesInfo,d=r==="leave"||A2(i),h={},f={},p={list:[],map:{}},m={showPointer:Rs(CUe,f),showTooltip:Rs(MUe,p)};wt(o.coordSysMap,function(g,_){var b=l||g.containPoint(i);wt(o.coordSysAxesInfo[_],function(S,x){var w=S.axis,M=IUe(c,S);if(!d&&b&&(!c||M)){var C=M&&M.value;C==null&&!l&&(C=w.pointToData(i)),C!=null&&dU(S,C,m,!1,h)}})});var v={};return wt(u,function(g,_){var b=g.linkGroup;b&&!f[_]&&wt(b.axesInfo,function(S,x){var w=f[x];if(S!==g&&w){var M=w.value;b.mapper&&(M=g.axis.scale.parse(b.mapper(M,fU(S),fU(g)))),v[g.key]=M}})}),wt(v,function(g,_){dU(u[_],g,m,!0,h)}),TUe(f,u,h),AUe(p,i,n,a),EUe(u,a,t),h}}function dU(n,e,t,r,i){var s=n.axis;if(!(s.scale.isBlank()||!s.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var a=wUe(e,n),o=a.payloadBatch,l=a.snapToValue;o[0]&&i.seriesIndex==null&&vn(i,o[0]),!r&&n.snap&&s.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,o),t.showTooltip(n,a,l)}}function wUe(n,e){var t=e.axis,r=t.dim,i=n,s=[],a=Number.MAX_VALUE,o=-1;return wt(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),d,h;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,n,t);h=f.dataIndices,d=f.nestestValue}else{if(h=l.getData().indicesOfNearest(u[0],n,t.type==="category"?.5:null),!h.length)return;d=l.getData().get(u[0],h[0])}if(!(d==null||!isFinite(d))){var p=n-d,m=Math.abs(p);m<=a&&((m<a||p>=0&&o<0)&&(a=m,o=p,i=d,s.length=0),wt(h,function(v){s.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:s,snapToValue:i}}function CUe(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function MUe(n,e,t,r){var i=t.payloadBatch,s=e.axis,a=s.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,c=o_(l),u=n.map[c];u||(u=n.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:s.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function TUe(n,e,t){var r=t.axesInfo=[];wt(e,function(i,s){var a=i.axisPointerModel.option,o=n[s];o?(!i.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function AUe(n,e,t,r){if(A2(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function EUe(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",s=uU(r)[i]||{},a=uU(r)[i]={};wt(n,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&wt(d.seriesDataIndices,function(h){var f=h.seriesIndex+" | "+h.dataIndex;a[f]=h})});var o=[],l=[];wt(s,function(c,u){!a[u]&&l.push(c)}),wt(a,function(c,u){!s[u]&&o.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function IUe(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function fU(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function A2(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function RUe(n){tUe.registerAxisPointerClass("CartesianAxisPointer",fUe),n.registerComponentModel(pUe),n.registerComponentView(SUe),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Jn(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Kze(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},xUe)}function PUe(n,e){var t=OT(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new _o({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var DUe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(ns);const LUe=DUe;function pee(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function mee(n){if(kr.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var vee=mee(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kUe=mee(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function gee(n,e){if(!n)return e;e=GQ(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function OUe(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?e?t[e]:t:null}var NUe=gee(kUe,"transition"),dk=gee(vee,"transform"),BUe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(kr.transform3dSupported?"will-change:transform;":"");function FUe(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function zUe(n,e,t){if(!ur(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=Jb(e);var s=FUe(t),a=Math.max(Math.round(i)*1.5,6),o="",l=dk+":",c;Di(["left","right"],s)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(c=s==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(c=s==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=a+i,h=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),f=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-d)/2)*100)/100;o+=";"+s+":-"+f+"px";var p=e+" solid "+i+"px;",m=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+m.join("")+'"></div>'}function UUe(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=kr.transformSupported?","+dk+r:",left"+r+",top"+r),NUe+":"+i}function hU(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!kr.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var s=kr.transform3dSupported,a="translate"+(s?"3d":"")+"("+r+","+i+(s?",0":"")+")";return t?"top:0;left:0;"+dk+":"+a+";":[["top",0],["left",0],[vee,a]]}function HUe(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont());var i=Ir(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var s=n.get("textShadowColor"),a=n.get("textShadowBlur")||0,o=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return s&&a&&e.push("text-shadow:"+o+"px "+l+"px "+a+"px "+s),wt(["decoration","align"],function(c){var u=n.get(c);u&&e.push("text-"+c+":"+u)}),e.join(";")}function VUe(n,e,t){var r=[],i=n.get("transitionDuration"),s=n.get("backgroundColor"),a=n.get("shadowBlur"),o=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=bJ(n,"html"),h=l+"px "+c+"px "+a+"px "+o;return r.push("box-shadow:"+h),e&&i&&r.push(UUe(i,t)),s&&r.push("background-color:"+s),wt(["width","color","radius"],function(f){var p="border-"+f,m=GQ(p),v=n.get(m);v!=null&&r.push(p+":"+v+(f==="color"?"":"px"))}),r.push(HUe(u)),d!=null&&r.push("padding:"+OT(d).join("px ")+"px"),r.join(";")+";"}function pU(n,e,t,r,i){var s=e&&e.painter;if(t){var a=s&&s.getViewportRoot();a&&ake(n,a,t,r,i)}else{n[0]=r,n[1]=i;var o=s&&s.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var $Ue=function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,kr.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),s=t.appendTo,a=s&&(ur(s)?document.querySelector(s):Yb(s)?s:li(s)&&s(e.getDom()));pU(this._styleCoord,i,a,e.getWidth()/2,e.getHeight()/2),(a||e.getDom()).appendChild(r),this._api=e,this._container=a;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!o._enterable){var c=i.handler,u=i.painter.getViewportRoot();fl(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=OUe(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,s=this._styleCoord;r.innerHTML?i.cssText=BUe+VUe(e,!this._firstShow,this._longHide)+hU(s[0],s[1],!0)+("border-color:"+Jb(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,s){var a=this.el;if(e==null){a.innerHTML="";return}var o="";if(ur(s)&&r.get("trigger")==="item"&&!pee(r)&&(o=zUe(r,i,s)),ur(e))a.innerHTML=e+o;else if(e){a.innerHTML="",Jn(e)||(e=[e]);for(var l=0;l<e.length;l++)Yb(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(o&&a.childNodes.length){var c=document.createElement("div");c.innerHTML=o,a.appendChild(c)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(pU(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,s=hU(r[0],r[1]);wt(s,function(a){i[a[0]]=a[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",kr.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Li(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},n}();const GUe=$Ue;var WUe=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),vU(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,s){var a=this;mr(e)&&uo(""),this.el&&this._zr.remove(this.el);var o=r.getModel("textStyle");this.el=new ja({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:o.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:bJ(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),wt(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){a.el.style[c]=r.get(c)}),wt(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){a.el.style[c]=o.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=mU(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;vU(i,this._zr,e,t),e=i[0],t=i[1];var s=r.style,a=wf(s.borderWidth||0),o=mU(s);r.x=e+a+o.left,r.y=t+a+o.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Li(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function wf(n){return Math.max(0,n)}function mU(n){var e=wf(n.shadowBlur||0),t=wf(n.shadowOffsetX||0),r=wf(n.shadowOffsetY||0);return{left:wf(e-t),right:wf(e+t),top:wf(e-r),bottom:wf(e+r)}}function vU(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}const qUe=WUe;var KUe=new _o({shape:{x:-1,y:-1,width:2,height:2}}),YUe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(kr.node||!r.getDom())){var i=t.getComponent("tooltip"),s=this._renderMode=H8e(i.get("renderMode"));this._tooltipContent=s==="richText"?new qUe(r):new GUe(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(kr.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var s=this._tooltipContent;s.update(t),s.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?SJ(this,"_updatePosition",50,"fixRate"):x5(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");fee("itemTooltip",this._api,Li(function(i,s,a){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(s,a):i==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,s=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(t,r,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,s){if(!(s.from===this.uid||kr.node||!i.getDom())){var a=gU(s,i);this._ticket="";var o=s.dataByCoordSys,l=QUe(s,r,i);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:s.position,positionDefault:"bottom"},a)}else if(s.tooltip&&s.x!=null&&s.y!=null){var u=KUe;u.x=s.x,u.y=s.y,u.update(),Pi(u).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:u},a)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},a);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,s))return;var d=hee(s,r),h=d.point[0],f=d.point[1];h!=null&&f!=null&&this._tryShow({offsetX:h,offsetY:f,target:d.el,position:s.position,positionDefault:"bottom"},a)}else s.x!=null&&s.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:i.getZr().findHover(s.x,s.y).target},a))}},e.prototype.manuallyHideTip=function(t,r,i,s){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(gU(s,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,s){var a=s.seriesIndex,o=s.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var c=r.getSeriesByIndex(a);if(c){var u=c.getData(),d=Xy([u.getItemModel(o),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:s.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,s=this._tooltipModel;if(s){this._lastX=t.offsetX,this._lastY=t.offsetY;var a=t.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,t);else if(i){var o=Pi(i);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;w1(i,function(u){if(Pi(u).dataIndex!=null)return l=u,!0;if(Pi(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,r):c?this._showComponentItemTooltip(t,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=Li(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,s=this._tooltipModel,a=[r.offsetX,r.offsetY],o=Xy([r.tooltipOption],s),l=this._renderMode,c=[],u=r_("section",{blocks:[],noHeader:!0}),d=[],h=new yE;wt(t,function(_){wt(_.dataByAxis,function(b){var S=i.getComponent(b.axisDim+"Axis",b.axisIndex),x=b.value;if(!(!S||x==null)){var w=uee(x,S.axis,i,b.seriesDataIndices,b.valueLabelOpt),M=r_("section",{header:w,noHeader:!Kc(w),sortBlocks:!0,blocks:[]});u.blocks.push(M),wt(b.seriesDataIndices,function(C){var A=i.getSeriesByIndex(C.seriesIndex),T=C.dataIndexInside,I=A.getDataParams(T);if(!(I.dataIndex<0)){I.axisDim=b.axisDim,I.axisIndex=b.axisIndex,I.axisType=b.axisType,I.axisId=b.axisId,I.axisValue=nee(S.axis,{value:x}),I.axisValueLabel=w,I.marker=h.makeTooltipMarker("item",Jb(I.color),l);var D=sz(A.formatTooltip(T,!0,null)),B=D.frag;if(B){var O=Xy([A],s).get("valueFormatter");M.blocks.push(O?vn({valueFormatter:O},B):B)}D.text&&d.push(D.text),c.push(I)}})}})}),u.blocks.reverse(),d.reverse();var f=r.position,p=o.get("order"),m=uz(u,h,l,p,i.get("useUTC"),o.get("textStyle"));m&&d.unshift(m);var v=l==="richText"?`

`:"<br/>",g=d.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(o,f,a[0],a[1],this._tooltipContent,c):this._showTooltipContent(o,g,c,Math.random()+"",a[0],a[1],f,null,h)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var s=this._ecModel,a=Pi(r),o=a.seriesIndex,l=s.getSeriesByIndex(o),c=a.dataModel||l,u=a.dataIndex,d=a.dataType,h=c.getData(d),f=this._renderMode,p=t.positionDefault,m=Xy([h.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=m.get("trigger");if(!(v!=null&&v!=="item")){var g=c.getDataParams(u,d),_=new yE;g.marker=_.makeTooltipMarker("item",Jb(g.color),f);var b=sz(c.formatTooltip(u,!1,d)),S=m.get("order"),x=m.get("valueFormatter"),w=b.frag,M=w?uz(x?vn({valueFormatter:x},w):w,_,f,S,s.get("useUTC"),m.get("textStyle")):b.text,C="item_"+c.name+"_"+u;this._showOrMove(m,function(){this._showTooltipContent(m,M,g,C,t.offsetX,t.offsetY,t.position,t.target,_)}),i({type:"showTip",dataIndexInside:u,dataIndex:h.getRawIndex(u),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var s=this._renderMode==="html",a=Pi(r),o=a.tooltipConfig,l=o.option||{},c=l.encodeHTMLContent;if(ur(l)){var u=l;l={content:u,formatter:u},c=!0}c&&s&&l.content&&(l=Xr(l),l.content=co(l.content));var d=[l],h=this._ecModel.getComponent(a.componentMainType,a.componentIndex);h&&d.push(h),d.push({formatter:l.content});var f=t.positionDefault,p=Xy(d,this._tooltipModel,f?{position:f}:null),m=p.get("content"),v=Math.random()+"",g=new yE;this._showOrMove(p,function(){var _=Xr(p.get("formatterParams")||{});this._showTooltipContent(p,m,_,v,t.offsetX,t.offsetY,t.position,r,g)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,s,a,o,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var h=t.get("formatter");l=l||t.get("position");var f=r,p=this._getNearestPoint([a,o],i,t.get("trigger"),t.get("borderColor")),m=p.color;if(h)if(ur(h)){var v=t.ecModel.get("useUTC"),g=Jn(i)?i[0]:i,_=g&&g.axisType&&g.axisType.indexOf("time")>=0;f=h,_&&(f=$Q(g.axisValue,f,v)),f=WQ(f,i,!0)}else if(li(h)){var b=Li(function(S,x){S===this._ticket&&(d.setContent(x,u,t,m,l),this._updatePosition(t,l,a,o,d,i,c))},this);this._ticket=s,f=h(i,s,b)}else f=h;d.setContent(f,u,t,m,l),d.show(t,m),this._updatePosition(t,l,a,o,d,i,c)}},e.prototype._getNearestPoint=function(t,r,i,s){if(i==="axis"||Jn(r))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!Jn(r))return{color:s||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,s,a,o,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var d=a.getSize(),h=t.get("align"),f=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),li(r)&&(r=r([i,s],o,a.el,p,{viewSize:[c,u],contentSize:d.slice()})),Jn(r))i=Ts(r[0],c),s=Ts(r[1],u);else if(mr(r)){var m=r;m.width=d[0],m.height=d[1];var v=e_(m,{width:c,height:u});i=v.x,s=v.y,h=null,f=null}else if(ur(r)&&l){var g=ZUe(r,p,d,t.get("borderWidth"));i=g[0],s=g[1]}else{var g=XUe(i,s,a,c,u,h?null:20,f?null:20);i=g[0],s=g[1]}if(h&&(i-=yU(h)?d[0]/2:h==="right"?d[0]:0),f&&(s-=yU(f)?d[1]/2:f==="bottom"?d[1]:0),pee(t)){var g=jUe(i,s,a,c,u);i=g[0],s=g[1]}a.moveTo(i,s)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,s=this._cbParamsList,a=!!i&&i.length===t.length;return a&&wt(i,function(o,l){var c=o.dataByAxis||[],u=t[l]||{},d=u.dataByAxis||[];a=a&&c.length===d.length,a&&wt(c,function(h,f){var p=d[f]||{},m=h.seriesDataIndices||[],v=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&m.length===v.length,a&&wt(m,function(g,_){var b=v[_];a=a&&g.seriesIndex===b.seriesIndex&&g.dataIndex===b.dataIndex}),s&&wt(h.seriesDataIndices,function(g){var _=g.seriesIndex,b=r[_],S=s[_];b&&S&&S.data!==b.data&&(a=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!a},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){kr.node||!r.getDom()||(x5(this,"_updatePosition"),this._tooltipContent.dispose(),D5("itemTooltip",r))},e.type="tooltip",e}(lh);function Xy(n,e,t){var r=e.ecModel,i;t?(i=new Ca(t,r,r),i=new Ca(e.option,i,r)):i=e;for(var s=n.length-1;s>=0;s--){var a=n[s];a&&(a instanceof Ca&&(a=a.get("tooltip",!0)),ur(a)&&(a={formatter:a}),a&&(i=new Ca(a,i,r)))}return i}function gU(n,e){return n.dispatchAction||Li(e.dispatchAction,e)}function XUe(n,e,t,r,i,s,a){var o=t.getSize(),l=o[0],c=o[1];return s!=null&&(n+l+s+2>r?n-=l+s:n+=s),a!=null&&(e+c+a>i?e-=c+a:e+=a),[n,e]}function jUe(n,e,t,r,i){var s=t.getSize(),a=s[0],o=s[1];return n=Math.min(n+a,r)-a,e=Math.min(e+o,i)-o,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function ZUe(n,e,t,r){var i=t[0],s=t[1],a=Math.ceil(Math.SQRT2*r)+8,o=0,l=0,c=e.width,u=e.height;switch(n){case"inside":o=e.x+c/2-i/2,l=e.y+u/2-s/2;break;case"top":o=e.x+c/2-i/2,l=e.y-s-a;break;case"bottom":o=e.x+c/2-i/2,l=e.y+u+a;break;case"left":o=e.x-i-a,l=e.y+u/2-s/2;break;case"right":o=e.x+c+a,l=e.y+u/2-s/2}return[o,l]}function yU(n){return n==="center"||n==="middle"}function QUe(n,e,t){var r=PL(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var s=iS(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=s.models[0];if(a){var o=t.getViewOfComponentModel(a),l;if(o.group.traverse(function(c){var u=Pi(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const JUe=YUe;function eHe(n){fg(RUe),n.registerComponentModel(LUe),n.registerComponentView(JUe),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},bo),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},bo)}var tHe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(ns),nHe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var s=this.group,a=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),c=Ir(t.get("textBaseline"),t.get("textVerticalAlign")),u=new ja({style:oh(a,{text:t.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=t.get("subtext"),f=new ja({style:oh(o,{text:h,fill:o.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),m=t.get("sublink"),v=t.get("triggerEvent",!0);u.silent=!p&&!v,f.silent=!m&&!v,p&&u.on("click",function(){H9(p,"_"+t.get("target"))}),m&&f.on("click",function(){H9(m,"_"+t.get("subtarget"))}),Pi(u).eventData=Pi(f).eventData=v?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(u),h&&s.add(f);var g=s.getBoundingRect(),_=t.getBoxLayoutParams();_.width=g.width,_.height=g.height;var b=e_(_,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?b.y+=b.height:c==="middle"&&(b.y+=b.height/2),c=c||"top"),s.x=b.x,s.y=b.y,s.markRedraw();var S={align:l,verticalAlign:c};u.setStyle(S),f.setStyle(S),g=s.getBoundingRect();var x=b.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var M=new _o({shape:{x:g.x-x[3],y:g.y-x[0],width:g.width+x[1]+x[3],height:g.height+x[0]+x[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});s.add(M)}},e.type="title",e}(lh);function rHe(n){n.registerComponentModel(tHe),n.registerComponentView(nHe)}var iHe=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},sHe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),Jn(r)&&wt(r,function(s,a){ur(s)&&(s={type:s}),r[a]=ji(s,iHe(i,s.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var s=t[i].get("name");if(this.isSelected(s)){this.select(s),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var c=l.name;i.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,h=d.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(h)),h.length?r=r.concat(h):u=!0}else u=!0;u&&RL(l)&&r.push(l.name)}),this._availableNames=i;var s=this.get("data")||r,a=jr(),o=Zr(s,function(l){return(ur(l)||gs(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new Ca(l,this,this.ecModel))},this);this._data=yl(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var s=this._data;wt(s,function(a){r[a.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;wt(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;wt(t,function(i){var s=i.get("name",!0);r.hasOwnProperty(s)||(r[s]=!0),r[s]=!r[s]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&Di(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(ns);const L5=sHe;var em=Rs,k5=wt,Rx=lu,aHe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new Rx),this.group.add(this._selectorGroup=new Rx),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var a=t.get("align"),o=t.get("orient");(!a||a==="auto")&&(a=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=o==="horizontal"?"end":"start"),this.renderInner(a,t,r,i,l,o,c);var u=t.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),f=e_(u,d,h),p=this.layoutInner(t,a,f,s,l,c),m=e_(Ji({width:p.width,height:p.height},u),d,h);this.group.x=m.x-p.x,this.group.y=m.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=PUe(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,s,a,o,l){var c=this.getContentGroup(),u=jr(),d=r.get("selectedMode"),h=[];i.eachRawSeries(function(f){!f.get("legendHoverLink")&&h.push(f.id)}),k5(r.getData(),function(f,p){var m=f.get("name");if(!this.newlineDisabled&&(m===""||m===`
`)){var v=new Rx;v.newline=!0,c.add(v);return}var g=i.getSeriesByName(m)[0];if(!u.get(m))if(g){var _=g.getData(),b=_.getVisual("legendLineStyle")||{},S=_.getVisual("legendIcon"),x=_.getVisual("style"),w=this._createItem(g,m,p,f,r,t,b,x,S,d,s);w.on("click",em(bU,m,null,s,h)).on("mouseover",em(O5,g.name,null,s,h)).on("mouseout",em(N5,g.name,null,s,h)),i.ssr&&w.eachChild(function(M){var C=Pi(M);C.seriesIndex=g.seriesIndex,C.dataIndex=p,C.ssrType="legend"}),u.set(m,!0)}else i.eachRawSeries(function(M){if(!u.get(m)&&M.legendVisualProvider){var C=M.legendVisualProvider;if(!C.containName(m))return;var A=C.indexOfName(m),T=C.getItemVisual(A,"style"),I=C.getItemVisual(A,"legendIcon"),D=Up(T.fill);D&&D[3]===0&&(D[3]=.2,T=vn(vn({},T),{fill:ML(D,"rgba")}));var B=this._createItem(M,m,p,f,r,t,{},T,I,d,s);B.on("click",em(bU,null,m,s,h)).on("mouseover",em(O5,null,m,s,h)).on("mouseout",em(N5,null,m,s,h)),i.ssr&&B.eachChild(function(O){var H=Pi(O);H.seriesIndex=M.seriesIndex,H.dataIndex=p,H.ssrType="legend"}),u.set(m,!0)}},this)},this),a&&this._createSelector(a,r,s,o,l)},e.prototype._createSelector=function(t,r,i,s,a){var o=this.getSelectorGroup();k5(t,function(c){var u=c.type,d=new ja({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});o.add(d);var h=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);FQ(d,{normal:h,emphasis:f},{defaultText:c.title}),d5(d)})},e.prototype._createItem=function(t,r,i,s,a,o,l,c,u,d,h){var f=t.visualDrawType,p=a.get("itemWidth"),m=a.get("itemHeight"),v=a.isSelected(r),g=s.get("symbolRotate"),_=s.get("symbolKeepAspect"),b=s.get("icon");u=b||u||"roundRect";var S=oHe(u,s,l,c,f,v,h),x=new Rx,w=s.getModel("textStyle");if(li(t.getLegendIcon)&&(!b||b==="inherit"))x.add(t.getLegendIcon({itemWidth:p,itemHeight:m,icon:u,iconRotate:g,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:_}));else{var M=b==="inherit"&&t.getData().getVisual("symbol")?g==="inherit"?t.getData().getVisual("symbolRotate"):g:0;x.add(lHe({itemWidth:p,itemHeight:m,icon:u,iconRotate:M,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:_}))}var C=o==="left"?p+5:-5,A=o,T=a.get("formatter"),I=r;ur(T)&&T?I=T.replace("{name}",r??""):li(T)&&(I=T(r));var D=v?w.getTextColor():s.get("inactiveColor");x.add(new ja({style:oh(w,{text:I,x:C,y:m/2,fill:D,align:A,verticalAlign:"middle"},{inheritColor:D})}));var B=new _o({shape:x.getBoundingRect(),style:{fill:"transparent"}}),O=s.getModel("tooltip");return O.get("show")&&DT({el:B,componentModel:a,itemName:r,itemTooltipOption:O.option}),x.add(B),x.eachChild(function(H){H.silent=!0}),B.silent=!d,this.getContentGroup().add(x),d5(x),x.__legendDataIndex=i,x},e.prototype.layoutInner=function(t,r,i,s,a,o){var l=this.getContentGroup(),c=this.getSelectorGroup();Z1(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),a){Z1("horizontal",c,t.get("selectorItemGap",!0));var h=c.getBoundingRect(),f=[-h.x,-h.y],p=t.get("selectorButtonGap",!0),m=t.getOrient().index,v=m===0?"width":"height",g=m===0?"height":"width",_=m===0?"y":"x";o==="end"?f[m]+=u[v]+p:d[m]+=h[v]+p,f[1-m]+=u[g]/2-h[g]/2,c.x=f[0],c.y=f[1],l.x=d[0],l.y=d[1];var b={x:0,y:0};return b[v]=u[v]+p+h[v],b[g]=Math.max(u[g],h[g]),b[_]=Math.min(0,h[_]+f[1-m]),b}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(lh);function oHe(n,e,t,r,i,s,a){function o(v,g){v.lineWidth==="auto"&&(v.lineWidth=g.lineWidth>0?2:0),k5(v,function(_,b){v[b]==="inherit"&&(v[b]=g[b])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?r.decal:A5(d,a),c.fill==="inherit"&&(c.fill=r[i]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(i==="fill"?r:t).opacity),o(c,r);var h=e.getModel("lineStyle"),f=h.getLineStyle();if(o(f,t),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!s){var p=e.get("inactiveBorderWidth"),m=c[u];c.lineWidth=p==="auto"?r.lineWidth>0&&m?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),f.stroke=h.get("inactiveColor"),f.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}function lHe(n){var e=n.icon||"roundRect",t=ik(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function bU(n,e,t,r){N5(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),O5(n,e,t,r)}function yee(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function O5(n,e,t,r){yee(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function N5(n,e,t,r){yee(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}const bee=aHe;function cHe(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function jy(n,e,t){var r=n==="allSelect"||n==="inverseSelect",i={},s=[];t.eachComponent({mainType:"legend",query:e},function(o){r?o[n]():o[n](e.name),_U(o,i),s.push(o.componentIndex)});var a={};return t.eachComponent("legend",function(o){wt(i,function(l,c){o[l?"select":"unSelect"](c)}),_U(o,a)}),r?{selected:a,legendIndex:s}:{name:e.name,selected:a}}function _U(n,e){var t=e||{};return wt(n.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var s=n.isSelected(i);i0(t,i)?t[i]=t[i]&&s:t[i]=s}}),t}function uHe(n){n.registerAction("legendToggleSelect","legendselectchanged",Rs(jy,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Rs(jy,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Rs(jy,"inverseSelect")),n.registerAction("legendSelect","legendselected",Rs(jy,"select")),n.registerAction("legendUnSelect","legendunselected",Rs(jy,"unSelect"))}function _ee(n){n.registerComponentModel(L5),n.registerComponentView(bee),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,cHe),n.registerSubTypeDefaulter("legend",function(){return"plain"}),uHe(n)}var dHe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var s=jL(t);n.prototype.init.call(this,t,r,i),SU(this,t,s)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),SU(this,this.option,t)},e.type="legend.scroll",e.defaultOption=TBe(L5.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(L5);function SU(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,t_(e,t,{type:"box",ignoreSize:!!i})}const fHe=dHe;var xU=lu,NE=["width","height"],BE=["x","y"],hHe=function(n){lr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new xU),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new xU)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,s,a,o,l){var c=this;n.prototype.renderInner.call(this,t,r,i,s,a,o,l);var u=this._controllerGroup,d=r.get("pageIconSize",!0),h=Jn(d)?d:[d,d];p("pagePrev",0);var f=r.getModel("pageTextStyle");u.add(new ja({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(m,v){var g=m+"DataIndex",_=qL(r.get("pageIcons",!0)[r.getOrient().name][v],{onclick:Li(c._pageGo,c,g,r,s)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=m,u.add(_)}},e.prototype.layoutInner=function(t,r,i,s,a,o){var l=this.getSelectorGroup(),c=t.getOrient().index,u=NE[c],d=BE[c],h=NE[1-c],f=BE[1-c];a&&Z1("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),m=l.getBoundingRect(),v=[-m.x,-m.y],g=Xr(i);a&&(g[u]=i[u]-m[u]-p);var _=this._layoutContentAndController(t,s,g,c,u,h,f,d);if(a){if(o==="end")v[c]+=_[u]+p;else{var b=m[u]+p;v[c]-=b,_[d]-=b}_[u]+=m[u]+p,v[1-c]+=_[f]+_[h]/2-m[h]/2,_[h]=Math.max(_[h],m[h]),_[f]=Math.min(_[f],m[f]+v[1-c]),l.x=v[0],l.y=v[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(t,r,i,s,a,o,l,c){var u=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;Z1(t.get("orient"),u,t.get("itemGap"),s?i.width:null,s?null:i.height),Z1("horizontal",h,t.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),p=h.getBoundingRect(),m=this._showController=f[a]>i[a],v=[-f.x,-f.y];r||(v[s]=u[c]);var g=[0,0],_=[-p.x,-p.y],b=Ir(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(m){var S=t.get("pageButtonPosition",!0);S==="end"?_[s]+=i[a]-p[a]:g[s]+=p[a]+b}_[1-s]+=f[o]/2-p[o]/2,u.setPosition(v),d.setPosition(g),h.setPosition(_);var x={x:0,y:0};if(x[a]=m?i[a]:f[a],x[o]=Math.max(f[o],p[o]),x[l]=Math.min(0,p[l]+_[1-s]),d.__rectSize=i[a],m){var w={x:0,y:0};w[a]=Math.max(i[a]-p[a]-b,0),w[o]=x[o],d.setClipPath(new _o({shape:w})),d.__rectSize=w[a]}else h.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var M=this._getPageInfo(t);return M.pageIndex!=null&&dg(u,{x:M.contentPosition[0],y:M.contentPosition[1]},m?t:null),this._updatePageInfoView(t,M),x},e.prototype._pageGo=function(t,r,i){var s=this._getPageInfo(r)[t];s!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;wt(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",h=r[d]!=null,f=i.childOfName(u);f&&(f.setStyle("fill",h?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=h?"pointer":"default")});var s=i.childOfName("pageText"),a=t.get("pageFormatter"),o=r.pageIndex,l=o!=null?o+1:0,c=r.pageCount;s&&a&&s.setStyle("text",ur(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):a({current:l,total:c}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),s=this._containerGroup.__rectSize,a=t.getOrient().index,o=NE[a],l=BE[a],c=this._findTargetItemIndex(r),u=i.children(),d=u[c],h=u.length,f=h?1:0,p={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var m=S(d);p.contentPosition[a]=-m.s;for(var v=c+1,g=m,_=m,b=null;v<=h;++v)b=S(u[v]),(!b&&_.e>g.s+s||b&&!x(b,g.s))&&(_.i>g.i?g=_:g=b,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),_=b;for(var v=c-1,g=m,_=m,b=null;v>=-1;--v)b=S(u[v]),(!b||!x(_,b.s))&&g.i<_.i&&(_=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=b;return p;function S(w){if(w){var M=w.getBoundingRect(),C=M[l]+w[l];return{s:C,e:C+M[o],i:w.__legendDataIndex}}}function x(w,M){return w.e>=M&&w.s<=M+s}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),s;return i.eachChild(function(a,o){var l=a.__legendDataIndex;s==null&&l!=null&&(s=o),l===t&&(r=o)}),r??s},e.type="legend.scroll",e}(bee);const pHe=hHe;function mHe(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function vHe(n){fg(_ee),n.registerComponentModel(fHe),n.registerComponentView(pHe),mHe(n)}function gHe(n){fg(_ee),fg(vHe)}var FE=null;function yHe(n){return FE||(FE=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),FE(n)}var zE=null;function bHe(n){zE||(zE=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),zE(n)}function _He(n){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(e),e}function Px(n,e){e===void 0&&(e={});var t=document.createElement(n);return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function See(n,e,t){var r=window.getComputedStyle(n,t||null)||{display:"none"};return r[e]}function B5(n){if(!document.documentElement.contains(n))return{detached:!0,rendered:!1};for(var e=n;e!==document;){if(See(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var SHe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',F5=0,E2=null;function xHe(n,e){n.__resize_mutation_handler__||(n.__resize_mutation_handler__=MHe.bind(n));var t=n.__resize_listeners__;if(!t){if(n.__resize_listeners__=[],window.ResizeObserver){var r=n.offsetWidth,i=n.offsetHeight,s=new ResizeObserver(function(){!n.__resize_observer_triggered__&&(n.__resize_observer_triggered__=!0,n.offsetWidth===r&&n.offsetHeight===i)||jC(n)}),a=B5(n),o=a.detached,l=a.rendered;n.__resize_observer_triggered__=o===!1&&l===!1,n.__resize_observer__=s,s.observe(n)}else if(n.attachEvent&&n.addEventListener)n.__resize_legacy_resize_handler__=function(){jC(n)},n.attachEvent("onresize",n.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);else if(F5||(E2=_He(SHe)),THe(n),n.__resize_rendered__=B5(n).rendered,window.MutationObserver){var c=new MutationObserver(n.__resize_mutation_handler__);c.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),n.__resize_mutation_observer__=c}}n.__resize_listeners__.push(e),F5++}function wHe(n,e){var t=n.__resize_listeners__;if(t){if(e&&t.splice(t.indexOf(e),1),!t.length||!e){if(n.detachEvent&&n.removeEventListener){n.detachEvent("onresize",n.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);return}n.__resize_observer__?(n.__resize_observer__.unobserve(n),n.__resize_observer__.disconnect(),n.__resize_observer__=null):(n.__resize_mutation_observer__&&(n.__resize_mutation_observer__.disconnect(),n.__resize_mutation_observer__=null),n.removeEventListener("scroll",fk),n.removeChild(n.__resize_triggers__.triggers),n.__resize_triggers__=null),n.__resize_listeners__=null}!--F5&&E2&&E2.parentNode.removeChild(E2)}}function CHe(n){var e=n.__resize_last__,t=e.width,r=e.height,i=n.offsetWidth,s=n.offsetHeight;return i!==t||s!==r?{width:i,height:s}:null}function MHe(){var n=B5(this),e=n.rendered,t=n.detached;e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(hk(this),this.addEventListener("scroll",fk,!0)),this.__resize_rendered__=e,jC(this))}function fk(){var n=this;hk(this),this.__resize_raf__&&bHe(this.__resize_raf__),this.__resize_raf__=yHe(function(){var e=CHe(n);e&&(n.__resize_last__=e,jC(n))})}function jC(n){!n||!n.__resize_listeners__||n.__resize_listeners__.forEach(function(e){e.call(n,n)})}function THe(n){var e=See(n,"position");(!e||e==="static")&&(n.style.position="relative"),n.__resize_old_position__=e,n.__resize_last__={};var t=Px("div",{className:"resize-triggers"}),r=Px("div",{className:"resize-expand-trigger"}),i=Px("div"),s=Px("div",{className:"resize-contract-trigger"});r.appendChild(i),t.appendChild(r),t.appendChild(s),n.appendChild(t),n.__resize_triggers__={triggers:t,expand:r,expandChild:i,contract:s},hk(n),n.addEventListener("scroll",fk,!0),n.__resize_last__={width:n.offsetWidth,height:n.offsetHeight}}function hk(n){var e=n.__resize_triggers__,t=e.expand,r=e.expandChild,i=e.contract,s=i.scrollWidth,a=i.scrollHeight,o=t.offsetWidth,l=t.offsetHeight,c=t.scrollWidth,u=t.scrollHeight;i.scrollLeft=s,i.scrollTop=a,r.style.width=o+1+"px",r.style.height=l+1+"px",t.scrollLeft=c,t.scrollTop=u}var Fc=function(){return Fc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Fc.apply(this,arguments)},AHe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function EHe(n){return e=Object.create(null),AHe.forEach(function(t){e[t]=function(r){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[r].apply(n.value,i)}}(t)}),e;var e}var IHe={autoresize:[Boolean,Object]},RHe=/^on[^a-z]/,wU=function(n){return RHe.test(n)};function Dx(n,e){var t=qr(n)?y(n):n;return t&&typeof t=="object"&&"value"in t?t.value||e:t||e}var PHe="ecLoadingOptions",DHe={loading:Boolean,loadingOptions:Object},Zy=null,xee="x-vue-echarts",CU=[],Qy=[];(function(n,e){if(n&&typeof document<"u"){var t,r=e.prepend===!0?"prepend":"append",i=e.singleTag===!0,s=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(i){var a=CU.indexOf(s);a===-1&&(a=CU.push(s)-1,Qy[a]={}),t=Qy[a]&&Qy[a][r]?Qy[a][r]:Qy[a][r]=o()}else t=o();n.charCodeAt(0)===65279&&(n=n.substring(1)),t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(document.createTextNode(n))}function o(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var c=Object.keys(e.attributes),u=0;u<c.length;u++)l.setAttribute(c[u],e.attributes[c[u]]);var d=r==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(d,l),l}})(`x-vue-echarts{display:flex;flex-direction:column;width:100%;height:100%;min-width:0}
.vue-echarts-inner{flex-grow:1;min-width:0;width:auto!important;height:auto!important}
`,{});var LHe=function(){if(Zy!=null)return Zy;if(typeof HTMLElement>"u"||typeof customElements>"u")return Zy=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(xee)}catch{return Zy=!1}return Zy=!0}(),kHe="ecTheme",OHe="ecInitOptions",NHe="ecUpdateOptions",MU=/(^&?~?!?)native:/;Fc(Fc({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},IHe),DHe);fg([Cze,Uze,rHe,eHe,gHe]);var wee={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:vu,function(){return function(){var t={};(function(){t.d=function(re,E){for(var R in E)t.o(E,R)&&!t.o(re,R)&&Object.defineProperty(re,R,{enumerable:!0,get:E[R]})}})(),function(){t.o=function(re,E){return Object.prototype.hasOwnProperty.call(re,E)}}();var r={};t.d(r,{default:function(){return Zre}});var i=function re(E,R){this.position=void 0;var P="KaTeX parse error: "+E,N,G=R&&R.loc;if(G&&G.start<=G.end){var ee=G.lexer.input;N=G.start;var ve=G.end;N===ee.length?P+=" at end of input: ":P+=" at position "+(N+1)+": ";var Ne=ee.slice(N,ve).replace(/[^]/g,"$&̲"),qe;N>15?qe="…"+ee.slice(N-15,N):qe=ee.slice(0,N);var ut;ve+15<ee.length?ut=ee.slice(ve,ve+15)+"…":ut=ee.slice(ve),P+=qe+Ne+ut}var It=new Error(P);return It.name="ParseError",It.__proto__=re.prototype,It.position=N,It};i.prototype.__proto__=Error.prototype;var s=i,a=function(E,R){return E.indexOf(R)!==-1},o=function(E,R){return E===void 0?R:E},l=/([A-Z])/g,c=function(E){return E.replace(l,"-$1").toLowerCase()},u={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g;function h(re){return String(re).replace(d,function(E){return u[E]})}var f=function re(E){return E.type==="ordgroup"||E.type==="color"?E.body.length===1?re(E.body[0]):E:E.type==="font"?re(E.body):E},p=function(E){var R=f(E);return R.type==="mathord"||R.type==="textord"||R.type==="atom"},m=function(E){if(!E)throw new Error("Expected non-null, but got "+String(E));return E},v=function(E){var R=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(E);return R!=null?R[1]:"_relative"},g={contains:a,deflt:o,escape:h,hyphenate:c,getBaseElem:f,isCharacterBox:p,protocolFromUrl:v},_=function(){function re(R){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,R=R||{},this.displayMode=g.deflt(R.displayMode,!1),this.output=g.deflt(R.output,"htmlAndMathml"),this.leqno=g.deflt(R.leqno,!1),this.fleqn=g.deflt(R.fleqn,!1),this.throwOnError=g.deflt(R.throwOnError,!0),this.errorColor=g.deflt(R.errorColor,"#cc0000"),this.macros=R.macros||{},this.minRuleThickness=Math.max(0,g.deflt(R.minRuleThickness,0)),this.colorIsTextColor=g.deflt(R.colorIsTextColor,!1),this.strict=g.deflt(R.strict,"warn"),this.trust=g.deflt(R.trust,!1),this.maxSize=Math.max(0,g.deflt(R.maxSize,1/0)),this.maxExpand=Math.max(0,g.deflt(R.maxExpand,1e3)),this.globalGroup=g.deflt(R.globalGroup,!1)}var E=re.prototype;return E.reportNonstrict=function(P,N,G){var ee=this.strict;if(typeof ee=="function"&&(ee=ee(P,N,G)),!(!ee||ee==="ignore")){if(ee===!0||ee==="error")throw new s("LaTeX-incompatible input and strict mode is set to 'error': "+(N+" ["+P+"]"),G);ee==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(N+" ["+P+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+ee+"': "+N+" ["+P+"]"))}},E.useStrictBehavior=function(P,N,G){var ee=this.strict;if(typeof ee=="function")try{ee=ee(P,N,G)}catch{ee="error"}return!ee||ee==="ignore"?!1:ee===!0||ee==="error"?!0:ee==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(N+" ["+P+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+ee+"': "+N+" ["+P+"]")),!1)},E.isTrusted=function(P){P.url&&!P.protocol&&(P.protocol=g.protocolFromUrl(P.url));var N=typeof this.trust=="function"?this.trust(P):this.trust;return!!N},re}(),b=function(){function re(R,P,N){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=R,this.size=P,this.cramped=N}var E=re.prototype;return E.sup=function(){return D[B[this.id]]},E.sub=function(){return D[O[this.id]]},E.fracNum=function(){return D[H[this.id]]},E.fracDen=function(){return D[L[this.id]]},E.cramp=function(){return D[z[this.id]]},E.text=function(){return D[k[this.id]]},E.isTight=function(){return this.size>=2},re}(),S=0,x=1,w=2,M=3,C=4,A=5,T=6,I=7,D=[new b(S,0,!1),new b(x,0,!0),new b(w,1,!1),new b(M,1,!0),new b(C,2,!1),new b(A,2,!0),new b(T,3,!1),new b(I,3,!0)],B=[C,A,C,A,T,I,T,I],O=[A,A,A,A,I,I,I,I],H=[w,M,C,A,T,I,T,I],L=[M,M,A,A,I,I,I,I],z=[x,x,M,M,A,A,I,I],k=[S,x,w,M,w,M,w,M],F={DISPLAY:D[S],TEXT:D[w],SCRIPT:D[C],SCRIPTSCRIPT:D[T]},W=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function q(re){for(var E=0;E<W.length;E++)for(var R=W[E],P=0;P<R.blocks.length;P++){var N=R.blocks[P];if(re>=N[0]&&re<=N[1])return R.name}return null}var Z=[];W.forEach(function(re){return re.blocks.forEach(function(E){return Z.push.apply(Z,E)})});function se(re){for(var E=0;E<Z.length;E+=2)if(re>=Z[E]&&re<=Z[E+1])return!0;return!1}var X=80,ie=function(E,R){return"M95,"+(622+E+R)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+E/2.075+" -"+E+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+E)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+E)+" "+R+"h400000v"+(40+E)+"h-400000z"},ae=function(E,R){return"M263,"+(601+E+R)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+E/2.084+" -"+E+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+E)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+E)+" "+R+"h400000v"+(40+E)+"h-400000z"},ce=function(E,R){return"M983 "+(10+E+R)+`
l`+E/3.13+" -"+E+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+E)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+E)+" "+R+"h400000v"+(40+E)+"h-400000z"},we=function(E,R){return"M424,"+(2398+E+R)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+E/4.223+" -"+E+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+E)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+E)+" "+R+`
h400000v`+(40+E)+"h-400000z"},He=function(E,R){return"M473,"+(2713+E+R)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+E/5.298+" -"+E+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+E)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+E)+" "+R+"h400000v"+(40+E)+"H1017.7z"},Ge=function(E){var R=E/2;return"M400000 "+E+" H0 L"+R+" 0 l65 45 L145 "+(E-80)+" H400000z"},me=function(E,R,P){var N=P-54-R-E;return"M702 "+(E+R)+"H400000"+(40+E)+`
H742v`+N+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+R+"H400000v"+(40+E)+"H742z"},be=function(E,R,P){R=1e3*R;var N="";switch(E){case"sqrtMain":N=ie(R,X);break;case"sqrtSize1":N=ae(R,X);break;case"sqrtSize2":N=ce(R,X);break;case"sqrtSize3":N=we(R,X);break;case"sqrtSize4":N=He(R,X);break;case"sqrtTall":N=me(R,X,P)}return N},oe=function(E,R){switch(E){case"⎜":return"M291 0 H417 V"+R+" H291z M291 0 H417 V"+R+" H291z";case"∣":return"M145 0 H188 V"+R+" H145z M145 0 H188 V"+R+" H145z";case"∥":return"M145 0 H188 V"+R+" H145z M145 0 H188 V"+R+" H145z"+("M367 0 H410 V"+R+" H367z M367 0 H410 V"+R+" H367z");case"⎟":return"M457 0 H583 V"+R+" H457z M457 0 H583 V"+R+" H457z";case"⎢":return"M319 0 H403 V"+R+" H319z M319 0 H403 V"+R+" H319z";case"⎥":return"M263 0 H347 V"+R+" H263z M263 0 H347 V"+R+" H263z";case"⎪":return"M384 0 H504 V"+R+" H384z M384 0 H504 V"+R+" H384z";case"⏐":return"M312 0 H355 V"+R+" H312z M312 0 H355 V"+R+" H312z";case"‖":return"M257 0 H300 V"+R+" H257z M257 0 H300 V"+R+" H257z"+("M478 0 H521 V"+R+" H478z M478 0 H521 V"+R+" H478z");default:return""}},j={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},ke=function(){function re(R){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=R,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var E=re.prototype;return E.hasClass=function(P){return g.contains(this.classes,P)},E.toNode=function(){for(var P=document.createDocumentFragment(),N=0;N<this.children.length;N++)P.appendChild(this.children[N].toNode());return P},E.toMarkup=function(){for(var P="",N=0;N<this.children.length;N++)P+=this.children[N].toMarkup();return P},E.toText=function(){var P=function(G){return G.toText()};return this.children.map(P).join("")},re}(),ze={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Ve={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Le={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Ze(re,E){ze[re]=E}function st(re,E,R){if(!ze[E])throw new Error("Font metrics not found for font: "+E+".");var P=re.charCodeAt(0),N=ze[E][P];if(!N&&re[0]in Le&&(P=Le[re[0]].charCodeAt(0),N=ze[E][P]),!N&&R==="text"&&se(P)&&(N=ze[E][77]),N)return{depth:N[0],height:N[1],italic:N[2],skew:N[3],width:N[4]}}var fe={};function V(re){var E;if(re>=5?E=0:re>=3?E=1:E=2,!fe[E]){var R=fe[E]={cssEmPerMu:Ve.quad[E]/18};for(var P in Ve)Ve.hasOwnProperty(P)&&(R[P]=Ve[P][E])}return fe[E]}var J=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],he=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Oe=function(E,R){return R.size<2?E:J[E-1][R.size-1]},je=function(){function re(R){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=R.style,this.color=R.color,this.size=R.size||re.BASESIZE,this.textSize=R.textSize||this.size,this.phantom=!!R.phantom,this.font=R.font||"",this.fontFamily=R.fontFamily||"",this.fontWeight=R.fontWeight||"",this.fontShape=R.fontShape||"",this.sizeMultiplier=he[this.size-1],this.maxSize=R.maxSize,this.minRuleThickness=R.minRuleThickness,this._fontMetrics=void 0}var E=re.prototype;return E.extend=function(P){var N={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var G in P)P.hasOwnProperty(G)&&(N[G]=P[G]);return new re(N)},E.havingStyle=function(P){return this.style===P?this:this.extend({style:P,size:Oe(this.textSize,P)})},E.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},E.havingSize=function(P){return this.size===P&&this.textSize===P?this:this.extend({style:this.style.text(),size:P,textSize:P,sizeMultiplier:he[P-1]})},E.havingBaseStyle=function(P){P=P||this.style.text();var N=Oe(re.BASESIZE,P);return this.size===N&&this.textSize===re.BASESIZE&&this.style===P?this:this.extend({style:P,size:N})},E.havingBaseSizing=function(){var P;switch(this.style.id){case 4:case 5:P=3;break;case 6:case 7:P=1;break;default:P=6}return this.extend({style:this.style.text(),size:P})},E.withColor=function(P){return this.extend({color:P})},E.withPhantom=function(){return this.extend({phantom:!0})},E.withFont=function(P){return this.extend({font:P})},E.withTextFontFamily=function(P){return this.extend({fontFamily:P,font:""})},E.withTextFontWeight=function(P){return this.extend({fontWeight:P,font:""})},E.withTextFontShape=function(P){return this.extend({fontShape:P,font:""})},E.sizingClasses=function(P){return P.size!==this.size?["sizing","reset-size"+P.size,"size"+this.size]:[]},E.baseSizingClasses=function(){return this.size!==re.BASESIZE?["sizing","reset-size"+this.size,"size"+re.BASESIZE]:[]},E.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=V(this.size)),this._fontMetrics},E.getColor=function(){return this.phantom?"transparent":this.color},re}();je.BASESIZE=6;var dt=je,pt={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Te={ex:!0,em:!0,mu:!0},ft=function(E){return typeof E!="string"&&(E=E.unit),E in pt||E in Te||E==="ex"},Ke=function(E,R){var P;if(E.unit in pt)P=pt[E.unit]/R.fontMetrics().ptPerEm/R.sizeMultiplier;else if(E.unit==="mu")P=R.fontMetrics().cssEmPerMu;else{var N;if(R.style.isTight()?N=R.havingStyle(R.style.text()):N=R,E.unit==="ex")P=N.fontMetrics().xHeight;else if(E.unit==="em")P=N.fontMetrics().quad;else throw new s("Invalid unit: '"+E.unit+"'");N!==R&&(P*=N.sizeMultiplier/R.sizeMultiplier)}return Math.min(E.number*P,R.maxSize)},Q=function(E){return+E.toFixed(4)+"em"},_e=function(E){return E.filter(function(R){return R}).join(" ")},Ae=function(E,R,P){if(this.classes=E||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=P||{},R){R.style.isTight()&&this.classes.push("mtight");var N=R.getColor();N&&(this.style.color=N)}},ge=function(E){var R=document.createElement(E);R.className=_e(this.classes);for(var P in this.style)this.style.hasOwnProperty(P)&&(R.style[P]=this.style[P]);for(var N in this.attributes)this.attributes.hasOwnProperty(N)&&R.setAttribute(N,this.attributes[N]);for(var G=0;G<this.children.length;G++)R.appendChild(this.children[G].toNode());return R},pe=function(E){var R="<"+E;this.classes.length&&(R+=' class="'+g.escape(_e(this.classes))+'"');var P="";for(var N in this.style)this.style.hasOwnProperty(N)&&(P+=g.hyphenate(N)+":"+this.style[N]+";");P&&(R+=' style="'+g.escape(P)+'"');for(var G in this.attributes)this.attributes.hasOwnProperty(G)&&(R+=" "+G+'="'+g.escape(this.attributes[G])+'"');R+=">";for(var ee=0;ee<this.children.length;ee++)R+=this.children[ee].toMarkup();return R+="</"+E+">",R},de=function(){function re(R,P,N,G){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Ae.call(this,R,N,G),this.children=P||[]}var E=re.prototype;return E.setAttribute=function(P,N){this.attributes[P]=N},E.hasClass=function(P){return g.contains(this.classes,P)},E.toNode=function(){return ge.call(this,"span")},E.toMarkup=function(){return pe.call(this,"span")},re}(),at=function(){function re(R,P,N,G){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Ae.call(this,P,G),this.children=N||[],this.setAttribute("href",R)}var E=re.prototype;return E.setAttribute=function(P,N){this.attributes[P]=N},E.hasClass=function(P){return g.contains(this.classes,P)},E.toNode=function(){return ge.call(this,"a")},E.toMarkup=function(){return pe.call(this,"a")},re}(),Ee=function(){function re(R,P,N){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=P,this.src=R,this.classes=["mord"],this.style=N}var E=re.prototype;return E.hasClass=function(P){return g.contains(this.classes,P)},E.toNode=function(){var P=document.createElement("img");P.src=this.src,P.alt=this.alt,P.className="mord";for(var N in this.style)this.style.hasOwnProperty(N)&&(P.style[N]=this.style[N]);return P},E.toMarkup=function(){var P="<img  src='"+this.src+" 'alt='"+this.alt+"' ",N="";for(var G in this.style)this.style.hasOwnProperty(G)&&(N+=g.hyphenate(G)+":"+this.style[G]+";");return N&&(P+=' style="'+g.escape(N)+'"'),P+="'/>",P},re}(),vt={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"},et=function(){function re(R,P,N,G,ee,ve,Ne,qe){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=R,this.height=P||0,this.depth=N||0,this.italic=G||0,this.skew=ee||0,this.width=ve||0,this.classes=Ne||[],this.style=qe||{},this.maxFontSize=0;var ut=q(this.text.charCodeAt(0));ut&&this.classes.push(ut+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=vt[this.text])}var E=re.prototype;return E.hasClass=function(P){return g.contains(this.classes,P)},E.toNode=function(){var P=document.createTextNode(this.text),N=null;this.italic>0&&(N=document.createElement("span"),N.style.marginRight=Q(this.italic)),this.classes.length>0&&(N=N||document.createElement("span"),N.className=_e(this.classes));for(var G in this.style)this.style.hasOwnProperty(G)&&(N=N||document.createElement("span"),N.style[G]=this.style[G]);return N?(N.appendChild(P),N):P},E.toMarkup=function(){var P=!1,N="<span";this.classes.length&&(P=!0,N+=' class="',N+=g.escape(_e(this.classes)),N+='"');var G="";this.italic>0&&(G+="margin-right:"+this.italic+"em;");for(var ee in this.style)this.style.hasOwnProperty(ee)&&(G+=g.hyphenate(ee)+":"+this.style[ee]+";");G&&(P=!0,N+=' style="'+g.escape(G)+'"');var ve=g.escape(this.text);return P?(N+=">",N+=ve,N+="</span>",N):ve},re}(),yt=function(){function re(R,P){this.children=void 0,this.attributes=void 0,this.children=R||[],this.attributes=P||{}}var E=re.prototype;return E.toNode=function(){var P="http://www.w3.org/2000/svg",N=document.createElementNS(P,"svg");for(var G in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,G)&&N.setAttribute(G,this.attributes[G]);for(var ee=0;ee<this.children.length;ee++)N.appendChild(this.children[ee].toNode());return N},E.toMarkup=function(){var P='<svg xmlns="http://www.w3.org/2000/svg"';for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&(P+=" "+N+"='"+this.attributes[N]+"'");P+=">";for(var G=0;G<this.children.length;G++)P+=this.children[G].toMarkup();return P+="</svg>",P},re}(),Ht=function(){function re(R,P){this.pathName=void 0,this.alternate=void 0,this.pathName=R,this.alternate=P}var E=re.prototype;return E.toNode=function(){var P="http://www.w3.org/2000/svg",N=document.createElementNS(P,"path");return this.alternate?N.setAttribute("d",this.alternate):N.setAttribute("d",j[this.pathName]),N},E.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+j[this.pathName]+"'/>"},re}(),Ot=function(){function re(R){this.attributes=void 0,this.attributes=R||{}}var E=re.prototype;return E.toNode=function(){var P="http://www.w3.org/2000/svg",N=document.createElementNS(P,"line");for(var G in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,G)&&N.setAttribute(G,this.attributes[G]);return N},E.toMarkup=function(){var P="<line";for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&(P+=" "+N+"='"+this.attributes[N]+"'");return P+="/>",P},re}();function ln(re){if(re instanceof et)return re;throw new Error("Expected symbolNode but got "+String(re)+".")}function Vt(re){if(re instanceof de)return re;throw new Error("Expected span<HtmlDomNode> but got "+String(re)+".")}var kt={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Jt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},on={math:{},text:{}},qn=on;function K(re,E,R,P,N,G){on[re][N]={font:E,group:R,replace:P},G&&P&&(on[re][P]=on[re][N])}var te="math",$t="text",Me="main",le="ams",St="accent-token",ht="bin",At="close",nt="inner",_t="mathord",jt="op-token",Sn="open",Vn="punct",Je="rel",Qn="spacing",ot="textord";K(te,Me,Je,"≡","\\equiv",!0),K(te,Me,Je,"≺","\\prec",!0),K(te,Me,Je,"≻","\\succ",!0),K(te,Me,Je,"∼","\\sim",!0),K(te,Me,Je,"⊥","\\perp"),K(te,Me,Je,"⪯","\\preceq",!0),K(te,Me,Je,"⪰","\\succeq",!0),K(te,Me,Je,"≃","\\simeq",!0),K(te,Me,Je,"∣","\\mid",!0),K(te,Me,Je,"≪","\\ll",!0),K(te,Me,Je,"≫","\\gg",!0),K(te,Me,Je,"≍","\\asymp",!0),K(te,Me,Je,"∥","\\parallel"),K(te,Me,Je,"⋈","\\bowtie",!0),K(te,Me,Je,"⌣","\\smile",!0),K(te,Me,Je,"⊑","\\sqsubseteq",!0),K(te,Me,Je,"⊒","\\sqsupseteq",!0),K(te,Me,Je,"≐","\\doteq",!0),K(te,Me,Je,"⌢","\\frown",!0),K(te,Me,Je,"∋","\\ni",!0),K(te,Me,Je,"∝","\\propto",!0),K(te,Me,Je,"⊢","\\vdash",!0),K(te,Me,Je,"⊣","\\dashv",!0),K(te,Me,Je,"∋","\\owns"),K(te,Me,Vn,".","\\ldotp"),K(te,Me,Vn,"⋅","\\cdotp"),K(te,Me,ot,"#","\\#"),K($t,Me,ot,"#","\\#"),K(te,Me,ot,"&","\\&"),K($t,Me,ot,"&","\\&"),K(te,Me,ot,"ℵ","\\aleph",!0),K(te,Me,ot,"∀","\\forall",!0),K(te,Me,ot,"ℏ","\\hbar",!0),K(te,Me,ot,"∃","\\exists",!0),K(te,Me,ot,"∇","\\nabla",!0),K(te,Me,ot,"♭","\\flat",!0),K(te,Me,ot,"ℓ","\\ell",!0),K(te,Me,ot,"♮","\\natural",!0),K(te,Me,ot,"♣","\\clubsuit",!0),K(te,Me,ot,"℘","\\wp",!0),K(te,Me,ot,"♯","\\sharp",!0),K(te,Me,ot,"♢","\\diamondsuit",!0),K(te,Me,ot,"ℜ","\\Re",!0),K(te,Me,ot,"♡","\\heartsuit",!0),K(te,Me,ot,"ℑ","\\Im",!0),K(te,Me,ot,"♠","\\spadesuit",!0),K(te,Me,ot,"§","\\S",!0),K($t,Me,ot,"§","\\S"),K(te,Me,ot,"¶","\\P",!0),K($t,Me,ot,"¶","\\P"),K(te,Me,ot,"†","\\dag"),K($t,Me,ot,"†","\\dag"),K($t,Me,ot,"†","\\textdagger"),K(te,Me,ot,"‡","\\ddag"),K($t,Me,ot,"‡","\\ddag"),K($t,Me,ot,"‡","\\textdaggerdbl"),K(te,Me,At,"⎱","\\rmoustache",!0),K(te,Me,Sn,"⎰","\\lmoustache",!0),K(te,Me,At,"⟯","\\rgroup",!0),K(te,Me,Sn,"⟮","\\lgroup",!0),K(te,Me,ht,"∓","\\mp",!0),K(te,Me,ht,"⊖","\\ominus",!0),K(te,Me,ht,"⊎","\\uplus",!0),K(te,Me,ht,"⊓","\\sqcap",!0),K(te,Me,ht,"∗","\\ast"),K(te,Me,ht,"⊔","\\sqcup",!0),K(te,Me,ht,"◯","\\bigcirc",!0),K(te,Me,ht,"∙","\\bullet"),K(te,Me,ht,"‡","\\ddagger"),K(te,Me,ht,"≀","\\wr",!0),K(te,Me,ht,"⨿","\\amalg"),K(te,Me,ht,"&","\\And"),K(te,Me,Je,"⟵","\\longleftarrow",!0),K(te,Me,Je,"⇐","\\Leftarrow",!0),K(te,Me,Je,"⟸","\\Longleftarrow",!0),K(te,Me,Je,"⟶","\\longrightarrow",!0),K(te,Me,Je,"⇒","\\Rightarrow",!0),K(te,Me,Je,"⟹","\\Longrightarrow",!0),K(te,Me,Je,"↔","\\leftrightarrow",!0),K(te,Me,Je,"⟷","\\longleftrightarrow",!0),K(te,Me,Je,"⇔","\\Leftrightarrow",!0),K(te,Me,Je,"⟺","\\Longleftrightarrow",!0),K(te,Me,Je,"↦","\\mapsto",!0),K(te,Me,Je,"⟼","\\longmapsto",!0),K(te,Me,Je,"↗","\\nearrow",!0),K(te,Me,Je,"↩","\\hookleftarrow",!0),K(te,Me,Je,"↪","\\hookrightarrow",!0),K(te,Me,Je,"↘","\\searrow",!0),K(te,Me,Je,"↼","\\leftharpoonup",!0),K(te,Me,Je,"⇀","\\rightharpoonup",!0),K(te,Me,Je,"↙","\\swarrow",!0),K(te,Me,Je,"↽","\\leftharpoondown",!0),K(te,Me,Je,"⇁","\\rightharpoondown",!0),K(te,Me,Je,"↖","\\nwarrow",!0),K(te,Me,Je,"⇌","\\rightleftharpoons",!0),K(te,le,Je,"≮","\\nless",!0),K(te,le,Je,"","\\@nleqslant"),K(te,le,Je,"","\\@nleqq"),K(te,le,Je,"⪇","\\lneq",!0),K(te,le,Je,"≨","\\lneqq",!0),K(te,le,Je,"","\\@lvertneqq"),K(te,le,Je,"⋦","\\lnsim",!0),K(te,le,Je,"⪉","\\lnapprox",!0),K(te,le,Je,"⊀","\\nprec",!0),K(te,le,Je,"⋠","\\npreceq",!0),K(te,le,Je,"⋨","\\precnsim",!0),K(te,le,Je,"⪹","\\precnapprox",!0),K(te,le,Je,"≁","\\nsim",!0),K(te,le,Je,"","\\@nshortmid"),K(te,le,Je,"∤","\\nmid",!0),K(te,le,Je,"⊬","\\nvdash",!0),K(te,le,Je,"⊭","\\nvDash",!0),K(te,le,Je,"⋪","\\ntriangleleft"),K(te,le,Je,"⋬","\\ntrianglelefteq",!0),K(te,le,Je,"⊊","\\subsetneq",!0),K(te,le,Je,"","\\@varsubsetneq"),K(te,le,Je,"⫋","\\subsetneqq",!0),K(te,le,Je,"","\\@varsubsetneqq"),K(te,le,Je,"≯","\\ngtr",!0),K(te,le,Je,"","\\@ngeqslant"),K(te,le,Je,"","\\@ngeqq"),K(te,le,Je,"⪈","\\gneq",!0),K(te,le,Je,"≩","\\gneqq",!0),K(te,le,Je,"","\\@gvertneqq"),K(te,le,Je,"⋧","\\gnsim",!0),K(te,le,Je,"⪊","\\gnapprox",!0),K(te,le,Je,"⊁","\\nsucc",!0),K(te,le,Je,"⋡","\\nsucceq",!0),K(te,le,Je,"⋩","\\succnsim",!0),K(te,le,Je,"⪺","\\succnapprox",!0),K(te,le,Je,"≆","\\ncong",!0),K(te,le,Je,"","\\@nshortparallel"),K(te,le,Je,"∦","\\nparallel",!0),K(te,le,Je,"⊯","\\nVDash",!0),K(te,le,Je,"⋫","\\ntriangleright"),K(te,le,Je,"⋭","\\ntrianglerighteq",!0),K(te,le,Je,"","\\@nsupseteqq"),K(te,le,Je,"⊋","\\supsetneq",!0),K(te,le,Je,"","\\@varsupsetneq"),K(te,le,Je,"⫌","\\supsetneqq",!0),K(te,le,Je,"","\\@varsupsetneqq"),K(te,le,Je,"⊮","\\nVdash",!0),K(te,le,Je,"⪵","\\precneqq",!0),K(te,le,Je,"⪶","\\succneqq",!0),K(te,le,Je,"","\\@nsubseteqq"),K(te,le,ht,"⊴","\\unlhd"),K(te,le,ht,"⊵","\\unrhd"),K(te,le,Je,"↚","\\nleftarrow",!0),K(te,le,Je,"↛","\\nrightarrow",!0),K(te,le,Je,"⇍","\\nLeftarrow",!0),K(te,le,Je,"⇏","\\nRightarrow",!0),K(te,le,Je,"↮","\\nleftrightarrow",!0),K(te,le,Je,"⇎","\\nLeftrightarrow",!0),K(te,le,Je,"△","\\vartriangle"),K(te,le,ot,"ℏ","\\hslash"),K(te,le,ot,"▽","\\triangledown"),K(te,le,ot,"◊","\\lozenge"),K(te,le,ot,"Ⓢ","\\circledS"),K(te,le,ot,"®","\\circledR"),K($t,le,ot,"®","\\circledR"),K(te,le,ot,"∡","\\measuredangle",!0),K(te,le,ot,"∄","\\nexists"),K(te,le,ot,"℧","\\mho"),K(te,le,ot,"Ⅎ","\\Finv",!0),K(te,le,ot,"⅁","\\Game",!0),K(te,le,ot,"‵","\\backprime"),K(te,le,ot,"▲","\\blacktriangle"),K(te,le,ot,"▼","\\blacktriangledown"),K(te,le,ot,"■","\\blacksquare"),K(te,le,ot,"⧫","\\blacklozenge"),K(te,le,ot,"★","\\bigstar"),K(te,le,ot,"∢","\\sphericalangle",!0),K(te,le,ot,"∁","\\complement",!0),K(te,le,ot,"ð","\\eth",!0),K($t,Me,ot,"ð","ð"),K(te,le,ot,"╱","\\diagup"),K(te,le,ot,"╲","\\diagdown"),K(te,le,ot,"□","\\square"),K(te,le,ot,"□","\\Box"),K(te,le,ot,"◊","\\Diamond"),K(te,le,ot,"¥","\\yen",!0),K($t,le,ot,"¥","\\yen",!0),K(te,le,ot,"✓","\\checkmark",!0),K($t,le,ot,"✓","\\checkmark"),K(te,le,ot,"ℶ","\\beth",!0),K(te,le,ot,"ℸ","\\daleth",!0),K(te,le,ot,"ℷ","\\gimel",!0),K(te,le,ot,"ϝ","\\digamma",!0),K(te,le,ot,"ϰ","\\varkappa"),K(te,le,Sn,"┌","\\@ulcorner",!0),K(te,le,At,"┐","\\@urcorner",!0),K(te,le,Sn,"└","\\@llcorner",!0),K(te,le,At,"┘","\\@lrcorner",!0),K(te,le,Je,"≦","\\leqq",!0),K(te,le,Je,"⩽","\\leqslant",!0),K(te,le,Je,"⪕","\\eqslantless",!0),K(te,le,Je,"≲","\\lesssim",!0),K(te,le,Je,"⪅","\\lessapprox",!0),K(te,le,Je,"≊","\\approxeq",!0),K(te,le,ht,"⋖","\\lessdot"),K(te,le,Je,"⋘","\\lll",!0),K(te,le,Je,"≶","\\lessgtr",!0),K(te,le,Je,"⋚","\\lesseqgtr",!0),K(te,le,Je,"⪋","\\lesseqqgtr",!0),K(te,le,Je,"≑","\\doteqdot"),K(te,le,Je,"≓","\\risingdotseq",!0),K(te,le,Je,"≒","\\fallingdotseq",!0),K(te,le,Je,"∽","\\backsim",!0),K(te,le,Je,"⋍","\\backsimeq",!0),K(te,le,Je,"⫅","\\subseteqq",!0),K(te,le,Je,"⋐","\\Subset",!0),K(te,le,Je,"⊏","\\sqsubset",!0),K(te,le,Je,"≼","\\preccurlyeq",!0),K(te,le,Je,"⋞","\\curlyeqprec",!0),K(te,le,Je,"≾","\\precsim",!0),K(te,le,Je,"⪷","\\precapprox",!0),K(te,le,Je,"⊲","\\vartriangleleft"),K(te,le,Je,"⊴","\\trianglelefteq"),K(te,le,Je,"⊨","\\vDash",!0),K(te,le,Je,"⊪","\\Vvdash",!0),K(te,le,Je,"⌣","\\smallsmile"),K(te,le,Je,"⌢","\\smallfrown"),K(te,le,Je,"≏","\\bumpeq",!0),K(te,le,Je,"≎","\\Bumpeq",!0),K(te,le,Je,"≧","\\geqq",!0),K(te,le,Je,"⩾","\\geqslant",!0),K(te,le,Je,"⪖","\\eqslantgtr",!0),K(te,le,Je,"≳","\\gtrsim",!0),K(te,le,Je,"⪆","\\gtrapprox",!0),K(te,le,ht,"⋗","\\gtrdot"),K(te,le,Je,"⋙","\\ggg",!0),K(te,le,Je,"≷","\\gtrless",!0),K(te,le,Je,"⋛","\\gtreqless",!0),K(te,le,Je,"⪌","\\gtreqqless",!0),K(te,le,Je,"≖","\\eqcirc",!0),K(te,le,Je,"≗","\\circeq",!0),K(te,le,Je,"≜","\\triangleq",!0),K(te,le,Je,"∼","\\thicksim"),K(te,le,Je,"≈","\\thickapprox"),K(te,le,Je,"⫆","\\supseteqq",!0),K(te,le,Je,"⋑","\\Supset",!0),K(te,le,Je,"⊐","\\sqsupset",!0),K(te,le,Je,"≽","\\succcurlyeq",!0),K(te,le,Je,"⋟","\\curlyeqsucc",!0),K(te,le,Je,"≿","\\succsim",!0),K(te,le,Je,"⪸","\\succapprox",!0),K(te,le,Je,"⊳","\\vartriangleright"),K(te,le,Je,"⊵","\\trianglerighteq"),K(te,le,Je,"⊩","\\Vdash",!0),K(te,le,Je,"∣","\\shortmid"),K(te,le,Je,"∥","\\shortparallel"),K(te,le,Je,"≬","\\between",!0),K(te,le,Je,"⋔","\\pitchfork",!0),K(te,le,Je,"∝","\\varpropto"),K(te,le,Je,"◀","\\blacktriangleleft"),K(te,le,Je,"∴","\\therefore",!0),K(te,le,Je,"∍","\\backepsilon"),K(te,le,Je,"▶","\\blacktriangleright"),K(te,le,Je,"∵","\\because",!0),K(te,le,Je,"⋘","\\llless"),K(te,le,Je,"⋙","\\gggtr"),K(te,le,ht,"⊲","\\lhd"),K(te,le,ht,"⊳","\\rhd"),K(te,le,Je,"≂","\\eqsim",!0),K(te,Me,Je,"⋈","\\Join"),K(te,le,Je,"≑","\\Doteq",!0),K(te,le,ht,"∔","\\dotplus",!0),K(te,le,ht,"∖","\\smallsetminus"),K(te,le,ht,"⋒","\\Cap",!0),K(te,le,ht,"⋓","\\Cup",!0),K(te,le,ht,"⩞","\\doublebarwedge",!0),K(te,le,ht,"⊟","\\boxminus",!0),K(te,le,ht,"⊞","\\boxplus",!0),K(te,le,ht,"⋇","\\divideontimes",!0),K(te,le,ht,"⋉","\\ltimes",!0),K(te,le,ht,"⋊","\\rtimes",!0),K(te,le,ht,"⋋","\\leftthreetimes",!0),K(te,le,ht,"⋌","\\rightthreetimes",!0),K(te,le,ht,"⋏","\\curlywedge",!0),K(te,le,ht,"⋎","\\curlyvee",!0),K(te,le,ht,"⊝","\\circleddash",!0),K(te,le,ht,"⊛","\\circledast",!0),K(te,le,ht,"⋅","\\centerdot"),K(te,le,ht,"⊺","\\intercal",!0),K(te,le,ht,"⋒","\\doublecap"),K(te,le,ht,"⋓","\\doublecup"),K(te,le,ht,"⊠","\\boxtimes",!0),K(te,le,Je,"⇢","\\dashrightarrow",!0),K(te,le,Je,"⇠","\\dashleftarrow",!0),K(te,le,Je,"⇇","\\leftleftarrows",!0),K(te,le,Je,"⇆","\\leftrightarrows",!0),K(te,le,Je,"⇚","\\Lleftarrow",!0),K(te,le,Je,"↞","\\twoheadleftarrow",!0),K(te,le,Je,"↢","\\leftarrowtail",!0),K(te,le,Je,"↫","\\looparrowleft",!0),K(te,le,Je,"⇋","\\leftrightharpoons",!0),K(te,le,Je,"↶","\\curvearrowleft",!0),K(te,le,Je,"↺","\\circlearrowleft",!0),K(te,le,Je,"↰","\\Lsh",!0),K(te,le,Je,"⇈","\\upuparrows",!0),K(te,le,Je,"↿","\\upharpoonleft",!0),K(te,le,Je,"⇃","\\downharpoonleft",!0),K(te,Me,Je,"⊶","\\origof",!0),K(te,Me,Je,"⊷","\\imageof",!0),K(te,le,Je,"⊸","\\multimap",!0),K(te,le,Je,"↭","\\leftrightsquigarrow",!0),K(te,le,Je,"⇉","\\rightrightarrows",!0),K(te,le,Je,"⇄","\\rightleftarrows",!0),K(te,le,Je,"↠","\\twoheadrightarrow",!0),K(te,le,Je,"↣","\\rightarrowtail",!0),K(te,le,Je,"↬","\\looparrowright",!0),K(te,le,Je,"↷","\\curvearrowright",!0),K(te,le,Je,"↻","\\circlearrowright",!0),K(te,le,Je,"↱","\\Rsh",!0),K(te,le,Je,"⇊","\\downdownarrows",!0),K(te,le,Je,"↾","\\upharpoonright",!0),K(te,le,Je,"⇂","\\downharpoonright",!0),K(te,le,Je,"⇝","\\rightsquigarrow",!0),K(te,le,Je,"⇝","\\leadsto"),K(te,le,Je,"⇛","\\Rrightarrow",!0),K(te,le,Je,"↾","\\restriction"),K(te,Me,ot,"‘","`"),K(te,Me,ot,"$","\\$"),K($t,Me,ot,"$","\\$"),K($t,Me,ot,"$","\\textdollar"),K(te,Me,ot,"%","\\%"),K($t,Me,ot,"%","\\%"),K(te,Me,ot,"_","\\_"),K($t,Me,ot,"_","\\_"),K($t,Me,ot,"_","\\textunderscore"),K(te,Me,ot,"∠","\\angle",!0),K(te,Me,ot,"∞","\\infty",!0),K(te,Me,ot,"′","\\prime"),K(te,Me,ot,"△","\\triangle"),K(te,Me,ot,"Γ","\\Gamma",!0),K(te,Me,ot,"Δ","\\Delta",!0),K(te,Me,ot,"Θ","\\Theta",!0),K(te,Me,ot,"Λ","\\Lambda",!0),K(te,Me,ot,"Ξ","\\Xi",!0),K(te,Me,ot,"Π","\\Pi",!0),K(te,Me,ot,"Σ","\\Sigma",!0),K(te,Me,ot,"Υ","\\Upsilon",!0),K(te,Me,ot,"Φ","\\Phi",!0),K(te,Me,ot,"Ψ","\\Psi",!0),K(te,Me,ot,"Ω","\\Omega",!0),K(te,Me,ot,"A","Α"),K(te,Me,ot,"B","Β"),K(te,Me,ot,"E","Ε"),K(te,Me,ot,"Z","Ζ"),K(te,Me,ot,"H","Η"),K(te,Me,ot,"I","Ι"),K(te,Me,ot,"K","Κ"),K(te,Me,ot,"M","Μ"),K(te,Me,ot,"N","Ν"),K(te,Me,ot,"O","Ο"),K(te,Me,ot,"P","Ρ"),K(te,Me,ot,"T","Τ"),K(te,Me,ot,"X","Χ"),K(te,Me,ot,"¬","\\neg",!0),K(te,Me,ot,"¬","\\lnot"),K(te,Me,ot,"⊤","\\top"),K(te,Me,ot,"⊥","\\bot"),K(te,Me,ot,"∅","\\emptyset"),K(te,le,ot,"∅","\\varnothing"),K(te,Me,_t,"α","\\alpha",!0),K(te,Me,_t,"β","\\beta",!0),K(te,Me,_t,"γ","\\gamma",!0),K(te,Me,_t,"δ","\\delta",!0),K(te,Me,_t,"ϵ","\\epsilon",!0),K(te,Me,_t,"ζ","\\zeta",!0),K(te,Me,_t,"η","\\eta",!0),K(te,Me,_t,"θ","\\theta",!0),K(te,Me,_t,"ι","\\iota",!0),K(te,Me,_t,"κ","\\kappa",!0),K(te,Me,_t,"λ","\\lambda",!0),K(te,Me,_t,"μ","\\mu",!0),K(te,Me,_t,"ν","\\nu",!0),K(te,Me,_t,"ξ","\\xi",!0),K(te,Me,_t,"ο","\\omicron",!0),K(te,Me,_t,"π","\\pi",!0),K(te,Me,_t,"ρ","\\rho",!0),K(te,Me,_t,"σ","\\sigma",!0),K(te,Me,_t,"τ","\\tau",!0),K(te,Me,_t,"υ","\\upsilon",!0),K(te,Me,_t,"ϕ","\\phi",!0),K(te,Me,_t,"χ","\\chi",!0),K(te,Me,_t,"ψ","\\psi",!0),K(te,Me,_t,"ω","\\omega",!0),K(te,Me,_t,"ε","\\varepsilon",!0),K(te,Me,_t,"ϑ","\\vartheta",!0),K(te,Me,_t,"ϖ","\\varpi",!0),K(te,Me,_t,"ϱ","\\varrho",!0),K(te,Me,_t,"ς","\\varsigma",!0),K(te,Me,_t,"φ","\\varphi",!0),K(te,Me,ht,"∗","*",!0),K(te,Me,ht,"+","+"),K(te,Me,ht,"−","-",!0),K(te,Me,ht,"⋅","\\cdot",!0),K(te,Me,ht,"∘","\\circ"),K(te,Me,ht,"÷","\\div",!0),K(te,Me,ht,"±","\\pm",!0),K(te,Me,ht,"×","\\times",!0),K(te,Me,ht,"∩","\\cap",!0),K(te,Me,ht,"∪","\\cup",!0),K(te,Me,ht,"∖","\\setminus"),K(te,Me,ht,"∧","\\land"),K(te,Me,ht,"∨","\\lor"),K(te,Me,ht,"∧","\\wedge",!0),K(te,Me,ht,"∨","\\vee",!0),K(te,Me,ot,"√","\\surd"),K(te,Me,Sn,"⟨","\\langle",!0),K(te,Me,Sn,"∣","\\lvert"),K(te,Me,Sn,"∥","\\lVert"),K(te,Me,At,"?","?"),K(te,Me,At,"!","!"),K(te,Me,At,"⟩","\\rangle",!0),K(te,Me,At,"∣","\\rvert"),K(te,Me,At,"∥","\\rVert"),K(te,Me,Je,"=","="),K(te,Me,Je,":",":"),K(te,Me,Je,"≈","\\approx",!0),K(te,Me,Je,"≅","\\cong",!0),K(te,Me,Je,"≥","\\ge"),K(te,Me,Je,"≥","\\geq",!0),K(te,Me,Je,"←","\\gets"),K(te,Me,Je,">","\\gt",!0),K(te,Me,Je,"∈","\\in",!0),K(te,Me,Je,"","\\@not"),K(te,Me,Je,"⊂","\\subset",!0),K(te,Me,Je,"⊃","\\supset",!0),K(te,Me,Je,"⊆","\\subseteq",!0),K(te,Me,Je,"⊇","\\supseteq",!0),K(te,le,Je,"⊈","\\nsubseteq",!0),K(te,le,Je,"⊉","\\nsupseteq",!0),K(te,Me,Je,"⊨","\\models"),K(te,Me,Je,"←","\\leftarrow",!0),K(te,Me,Je,"≤","\\le"),K(te,Me,Je,"≤","\\leq",!0),K(te,Me,Je,"<","\\lt",!0),K(te,Me,Je,"→","\\rightarrow",!0),K(te,Me,Je,"→","\\to"),K(te,le,Je,"≱","\\ngeq",!0),K(te,le,Je,"≰","\\nleq",!0),K(te,Me,Qn," ","\\ "),K(te,Me,Qn," ","\\space"),K(te,Me,Qn," ","\\nobreakspace"),K($t,Me,Qn," ","\\ "),K($t,Me,Qn," "," "),K($t,Me,Qn," ","\\space"),K($t,Me,Qn," ","\\nobreakspace"),K(te,Me,Qn,null,"\\nobreak"),K(te,Me,Qn,null,"\\allowbreak"),K(te,Me,Vn,",",","),K(te,Me,Vn,";",";"),K(te,le,ht,"⊼","\\barwedge",!0),K(te,le,ht,"⊻","\\veebar",!0),K(te,Me,ht,"⊙","\\odot",!0),K(te,Me,ht,"⊕","\\oplus",!0),K(te,Me,ht,"⊗","\\otimes",!0),K(te,Me,ot,"∂","\\partial",!0),K(te,Me,ht,"⊘","\\oslash",!0),K(te,le,ht,"⊚","\\circledcirc",!0),K(te,le,ht,"⊡","\\boxdot",!0),K(te,Me,ht,"△","\\bigtriangleup"),K(te,Me,ht,"▽","\\bigtriangledown"),K(te,Me,ht,"†","\\dagger"),K(te,Me,ht,"⋄","\\diamond"),K(te,Me,ht,"⋆","\\star"),K(te,Me,ht,"◃","\\triangleleft"),K(te,Me,ht,"▹","\\triangleright"),K(te,Me,Sn,"{","\\{"),K($t,Me,ot,"{","\\{"),K($t,Me,ot,"{","\\textbraceleft"),K(te,Me,At,"}","\\}"),K($t,Me,ot,"}","\\}"),K($t,Me,ot,"}","\\textbraceright"),K(te,Me,Sn,"{","\\lbrace"),K(te,Me,At,"}","\\rbrace"),K(te,Me,Sn,"[","\\lbrack",!0),K($t,Me,ot,"[","\\lbrack",!0),K(te,Me,At,"]","\\rbrack",!0),K($t,Me,ot,"]","\\rbrack",!0),K(te,Me,Sn,"(","\\lparen",!0),K(te,Me,At,")","\\rparen",!0),K($t,Me,ot,"<","\\textless",!0),K($t,Me,ot,">","\\textgreater",!0),K(te,Me,Sn,"⌊","\\lfloor",!0),K(te,Me,At,"⌋","\\rfloor",!0),K(te,Me,Sn,"⌈","\\lceil",!0),K(te,Me,At,"⌉","\\rceil",!0),K(te,Me,ot,"\\","\\backslash"),K(te,Me,ot,"∣","|"),K(te,Me,ot,"∣","\\vert"),K($t,Me,ot,"|","\\textbar",!0),K(te,Me,ot,"∥","\\|"),K(te,Me,ot,"∥","\\Vert"),K($t,Me,ot,"∥","\\textbardbl"),K($t,Me,ot,"~","\\textasciitilde"),K($t,Me,ot,"\\","\\textbackslash"),K($t,Me,ot,"^","\\textasciicircum"),K(te,Me,Je,"↑","\\uparrow",!0),K(te,Me,Je,"⇑","\\Uparrow",!0),K(te,Me,Je,"↓","\\downarrow",!0),K(te,Me,Je,"⇓","\\Downarrow",!0),K(te,Me,Je,"↕","\\updownarrow",!0),K(te,Me,Je,"⇕","\\Updownarrow",!0),K(te,Me,jt,"∐","\\coprod"),K(te,Me,jt,"⋁","\\bigvee"),K(te,Me,jt,"⋀","\\bigwedge"),K(te,Me,jt,"⨄","\\biguplus"),K(te,Me,jt,"⋂","\\bigcap"),K(te,Me,jt,"⋃","\\bigcup"),K(te,Me,jt,"∫","\\int"),K(te,Me,jt,"∫","\\intop"),K(te,Me,jt,"∬","\\iint"),K(te,Me,jt,"∭","\\iiint"),K(te,Me,jt,"∏","\\prod"),K(te,Me,jt,"∑","\\sum"),K(te,Me,jt,"⨂","\\bigotimes"),K(te,Me,jt,"⨁","\\bigoplus"),K(te,Me,jt,"⨀","\\bigodot"),K(te,Me,jt,"∮","\\oint"),K(te,Me,jt,"∯","\\oiint"),K(te,Me,jt,"∰","\\oiiint"),K(te,Me,jt,"⨆","\\bigsqcup"),K(te,Me,jt,"∫","\\smallint"),K($t,Me,nt,"…","\\textellipsis"),K(te,Me,nt,"…","\\mathellipsis"),K($t,Me,nt,"…","\\ldots",!0),K(te,Me,nt,"…","\\ldots",!0),K(te,Me,nt,"⋯","\\@cdots",!0),K(te,Me,nt,"⋱","\\ddots",!0),K(te,Me,ot,"⋮","\\varvdots"),K(te,Me,St,"ˊ","\\acute"),K(te,Me,St,"ˋ","\\grave"),K(te,Me,St,"¨","\\ddot"),K(te,Me,St,"~","\\tilde"),K(te,Me,St,"ˉ","\\bar"),K(te,Me,St,"˘","\\breve"),K(te,Me,St,"ˇ","\\check"),K(te,Me,St,"^","\\hat"),K(te,Me,St,"⃗","\\vec"),K(te,Me,St,"˙","\\dot"),K(te,Me,St,"˚","\\mathring"),K(te,Me,_t,"","\\@imath"),K(te,Me,_t,"","\\@jmath"),K(te,Me,ot,"ı","ı"),K(te,Me,ot,"ȷ","ȷ"),K($t,Me,ot,"ı","\\i",!0),K($t,Me,ot,"ȷ","\\j",!0),K($t,Me,ot,"ß","\\ss",!0),K($t,Me,ot,"æ","\\ae",!0),K($t,Me,ot,"œ","\\oe",!0),K($t,Me,ot,"ø","\\o",!0),K($t,Me,ot,"Æ","\\AE",!0),K($t,Me,ot,"Œ","\\OE",!0),K($t,Me,ot,"Ø","\\O",!0),K($t,Me,St,"ˊ","\\'"),K($t,Me,St,"ˋ","\\`"),K($t,Me,St,"ˆ","\\^"),K($t,Me,St,"˜","\\~"),K($t,Me,St,"ˉ","\\="),K($t,Me,St,"˘","\\u"),K($t,Me,St,"˙","\\."),K($t,Me,St,"¸","\\c"),K($t,Me,St,"˚","\\r"),K($t,Me,St,"ˇ","\\v"),K($t,Me,St,"¨",'\\"'),K($t,Me,St,"˝","\\H"),K($t,Me,St,"◯","\\textcircled");var Pe={"--":!0,"---":!0,"``":!0,"''":!0};K($t,Me,ot,"–","--",!0),K($t,Me,ot,"–","\\textendash"),K($t,Me,ot,"—","---",!0),K($t,Me,ot,"—","\\textemdash"),K($t,Me,ot,"‘","`",!0),K($t,Me,ot,"‘","\\textquoteleft"),K($t,Me,ot,"’","'",!0),K($t,Me,ot,"’","\\textquoteright"),K($t,Me,ot,"“","``",!0),K($t,Me,ot,"“","\\textquotedblleft"),K($t,Me,ot,"”","''",!0),K($t,Me,ot,"”","\\textquotedblright"),K(te,Me,ot,"°","\\degree",!0),K($t,Me,ot,"°","\\degree"),K($t,Me,ot,"°","\\textdegree",!0),K(te,Me,ot,"£","\\pounds"),K(te,Me,ot,"£","\\mathsterling",!0),K($t,Me,ot,"£","\\pounds"),K($t,Me,ot,"£","\\textsterling",!0),K(te,le,ot,"✠","\\maltese"),K($t,le,ot,"✠","\\maltese");for(var mt='0123456789/@."',Mt=0;Mt<mt.length;Mt++){var We=mt.charAt(Mt);K(te,Me,ot,We,We)}for(var tt='0123456789!@*()-=+";:?/.,',bt=0;bt<tt.length;bt++){var Dt=tt.charAt(bt);K($t,Me,ot,Dt,Dt)}for(var Kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",fn=0;fn<Kt.length;fn++){var On=Kt.charAt(fn);K(te,Me,_t,On,On),K($t,Me,ot,On,On)}K(te,le,ot,"C","ℂ"),K($t,le,ot,"C","ℂ"),K(te,le,ot,"H","ℍ"),K($t,le,ot,"H","ℍ"),K(te,le,ot,"N","ℕ"),K($t,le,ot,"N","ℕ"),K(te,le,ot,"P","ℙ"),K($t,le,ot,"P","ℙ"),K(te,le,ot,"Q","ℚ"),K($t,le,ot,"Q","ℚ"),K(te,le,ot,"R","ℝ"),K($t,le,ot,"R","ℝ"),K(te,le,ot,"Z","ℤ"),K($t,le,ot,"Z","ℤ"),K(te,Me,_t,"h","ℎ"),K($t,Me,_t,"h","ℎ");for(var nn="",Tn=0;Tn<Kt.length;Tn++){var In=Kt.charAt(Tn);nn=String.fromCharCode(55349,56320+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56372+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56424+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56580+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56736+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56788+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56840+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56944+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),Tn<26&&(nn=String.fromCharCode(55349,56632+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn),nn=String.fromCharCode(55349,56476+Tn),K(te,Me,_t,In,nn),K($t,Me,ot,In,nn))}nn=String.fromCharCode(55349,56668),K(te,Me,_t,"k",nn),K($t,Me,ot,"k",nn);for(var rr=0;rr<10;rr++){var Or=rr.toString();nn=String.fromCharCode(55349,57294+rr),K(te,Me,_t,Or,nn),K($t,Me,ot,Or,nn),nn=String.fromCharCode(55349,57314+rr),K(te,Me,_t,Or,nn),K($t,Me,ot,Or,nn),nn=String.fromCharCode(55349,57324+rr),K(te,Me,_t,Or,nn),K($t,Me,ot,Or,nn),nn=String.fromCharCode(55349,57334+rr),K(te,Me,_t,Or,nn),K($t,Me,ot,Or,nn)}for(var vr="ÐÞþ",Sr=0;Sr<vr.length;Sr++){var Yn=vr.charAt(Sr);K(te,Me,_t,Yn,Yn),K($t,Me,ot,Yn,Yn)}var bi=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Wr=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ia=function(E,R){var P=E.charCodeAt(0),N=E.charCodeAt(1),G=(P-55296)*1024+(N-56320)+65536,ee=R==="math"?0:1;if(119808<=G&&G<120484){var ve=Math.floor((G-119808)/26);return[bi[ve][2],bi[ve][ee]]}else if(120782<=G&&G<=120831){var Ne=Math.floor((G-120782)/10);return[Wr[Ne][2],Wr[Ne][ee]]}else{if(G===120485||G===120486)return[bi[0][2],bi[0][ee]];if(120486<G&&G<120782)return["",""];throw new s("Unsupported character: "+E)}},Ja=function(E,R,P){return qn[P][E]&&qn[P][E].replace&&(E=qn[P][E].replace),{value:E,metrics:st(E,R,P)}},gr=function(E,R,P,N,G){var ee=Ja(E,R,P),ve=ee.metrics;E=ee.value;var Ne;if(ve){var qe=ve.italic;(P==="text"||N&&N.font==="mathit")&&(qe=0),Ne=new et(E,ve.height,ve.depth,qe,ve.skew,ve.width,G)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+E+"' in style '"+R+"' and mode '"+P+"'")),Ne=new et(E,0,0,0,0,0,G);if(N){Ne.maxFontSize=N.sizeMultiplier,N.style.isTight()&&Ne.classes.push("mtight");var ut=N.getColor();ut&&(Ne.style.color=ut)}return Ne},Gl=function(E,R,P,N){return N===void 0&&(N=[]),P.font==="boldsymbol"&&Ja(E,"Main-Bold",R).metrics?gr(E,"Main-Bold",R,P,N.concat(["mathbf"])):E==="\\"||qn[R][E].font==="main"?gr(E,"Main-Regular",R,P,N):gr(E,"AMS-Regular",R,P,N.concat(["amsrm"]))},mi=function(E,R,P,N,G){return G!=="textord"&&Ja(E,"Math-BoldItalic",R).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},qs=function(E,R,P){var N=E.mode,G=E.text,ee=["mord"],ve=N==="math"||N==="text"&&R.font,Ne=ve?R.font:R.fontFamily;if(G.charCodeAt(0)===55349){var qe=Ia(G,N),ut=qe[0],It=qe[1];return gr(G,ut,N,R,ee.concat(It))}else if(Ne){var Gt,Zt;if(Ne==="boldsymbol"){var Qt=mi(G,N,R,ee,P);Gt=Qt.fontName,Zt=[Qt.fontClass]}else ve?(Gt=Pt[Ne].fontName,Zt=[Ne]):(Gt=$e(Ne,R.fontWeight,R.fontShape),Zt=[Ne,R.fontWeight,R.fontShape]);if(Ja(G,Gt,N).metrics)return gr(G,Gt,N,R,ee.concat(Zt));if(Pe.hasOwnProperty(G)&&Gt.substr(0,10)==="Typewriter"){for(var gn=[],_n=0;_n<G.length;_n++)gn.push(gr(G[_n],Gt,N,R,ee.concat(Zt)));return xh(gn)}}if(P==="mathord")return gr(G,"Math-Italic",N,R,ee.concat(["mathnormal"]));if(P==="textord"){var Gn=qn[N][G]&&qn[N][G].font;if(Gn==="ams"){var Zn=$e("amsrm",R.fontWeight,R.fontShape);return gr(G,Zn,N,R,ee.concat("amsrm",R.fontWeight,R.fontShape))}else if(Gn==="main"||!Gn){var ir=$e("textrm",R.fontWeight,R.fontShape);return gr(G,ir,N,R,ee.concat(R.fontWeight,R.fontShape))}else{var Jr=$e(Gn,R.fontWeight,R.fontShape);return gr(G,Jr,N,R,ee.concat(Jr,R.fontWeight,R.fontShape))}}else throw new Error("unexpected type: "+P+" in makeOrd")},Ks=function(E,R){if(_e(E.classes)!==_e(R.classes)||E.skew!==R.skew||E.maxFontSize!==R.maxFontSize)return!1;if(E.classes.length===1){var P=E.classes[0];if(P==="mbin"||P==="mord")return!1}for(var N in E.style)if(E.style.hasOwnProperty(N)&&E.style[N]!==R.style[N])return!1;for(var G in R.style)if(R.style.hasOwnProperty(G)&&E.style[G]!==R.style[G])return!1;return!0},os=function(E){for(var R=0;R<E.length-1;R++){var P=E[R],N=E[R+1];P instanceof et&&N instanceof et&&Ks(P,N)&&(P.text+=N.text,P.height=Math.max(P.height,N.height),P.depth=Math.max(P.depth,N.depth),P.italic=N.italic,E.splice(R+1,1),R--)}return E},Wi=function(E){for(var R=0,P=0,N=0,G=0;G<E.children.length;G++){var ee=E.children[G];ee.height>R&&(R=ee.height),ee.depth>P&&(P=ee.depth),ee.maxFontSize>N&&(N=ee.maxFontSize)}E.height=R,E.depth=P,E.maxFontSize=N},qi=function(E,R,P,N){var G=new de(E,R,P,N);return Wi(G),G},Eo=function(E,R,P,N){return new de(E,R,P,N)},QT=function(E,R,P){var N=qi([E],[],R);return N.height=Math.max(P||R.fontMetrics().defaultRuleThickness,R.minRuleThickness),N.style.borderBottomWidth=Q(N.height),N.maxFontSize=1,N},or=function(E,R,P,N){var G=new at(E,R,P,N);return Wi(G),G},xh=function(E){var R=new ke(E);return Wi(R),R},Ce=function(E,R){return E instanceof ke?qi([],[E],R):E},Se=function(E){if(E.positionType==="individualShift"){for(var R=E.children,P=[R[0]],N=-R[0].shift-R[0].elem.depth,G=N,ee=1;ee<R.length;ee++){var ve=-R[ee].shift-G-R[ee].elem.depth,Ne=ve-(R[ee-1].elem.height+R[ee-1].elem.depth);G=G+ve,P.push({type:"kern",size:Ne}),P.push(R[ee])}return{children:P,depth:N}}var qe;if(E.positionType==="top"){for(var ut=E.positionData,It=0;It<E.children.length;It++){var Gt=E.children[It];ut-=Gt.type==="kern"?Gt.size:Gt.elem.height+Gt.elem.depth}qe=ut}else if(E.positionType==="bottom")qe=-E.positionData;else{var Zt=E.children[0];if(Zt.type!=="elem")throw new Error('First child must have type "elem".');if(E.positionType==="shift")qe=-Zt.elem.depth-E.positionData;else if(E.positionType==="firstBaseline")qe=-Zt.elem.depth;else throw new Error("Invalid positionType "+E.positionType+".")}return{children:E.children,depth:qe}},Ue=function(E,R){for(var P=Se(E),N=P.children,G=P.depth,ee=0,ve=0;ve<N.length;ve++){var Ne=N[ve];if(Ne.type==="elem"){var qe=Ne.elem;ee=Math.max(ee,qe.maxFontSize,qe.height)}}ee+=2;var ut=qi(["pstrut"],[]);ut.style.height=Q(ee);for(var It=[],Gt=G,Zt=G,Qt=G,gn=0;gn<N.length;gn++){var _n=N[gn];if(_n.type==="kern")Qt+=_n.size;else{var Gn=_n.elem,Zn=_n.wrapperClasses||[],ir=_n.wrapperStyle||{},Jr=qi(Zn,[ut,Gn],void 0,ir);Jr.style.top=Q(-ee-Qt-Gn.depth),_n.marginLeft&&(Jr.style.marginLeft=_n.marginLeft),_n.marginRight&&(Jr.style.marginRight=_n.marginRight),It.push(Jr),Qt+=Gn.height+Gn.depth}Gt=Math.min(Gt,Qt),Zt=Math.max(Zt,Qt)}var ci=qi(["vlist"],It);ci.style.height=Q(Zt);var Bi;if(Gt<0){var ii=qi([],[]),ui=qi(["vlist"],[ii]);ui.style.height=Q(-Gt);var ls=qi(["vlist-s"],[new et("​")]);Bi=[qi(["vlist-r"],[ci,ls]),qi(["vlist-r"],[ui])]}else Bi=[qi(["vlist-r"],[ci])];var Ci=qi(["vlist-t"],Bi);return Bi.length===2&&Ci.classes.push("vlist-t2"),Ci.height=Zt,Ci.depth=-Gt,Ci},De=function(E,R){var P=qi(["mspace"],[],R),N=Ke(E,R);return P.style.marginRight=Q(N),P},$e=function(E,R,P){var N="";switch(E){case"amsrm":N="AMS";break;case"textrm":N="Main";break;case"textsf":N="SansSerif";break;case"texttt":N="Typewriter";break;default:N=E}var G;return R==="textbf"&&P==="textit"?G="BoldItalic":R==="textbf"?G="Bold":R==="textit"?G="Italic":G="Regular",N+"-"+G},Pt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Ft={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},kn=function(E,R){var P=Ft[E],N=P[0],G=P[1],ee=P[2],ve=new Ht(N),Ne=new yt([ve],{width:Q(G),height:Q(ee),style:"width:"+Q(G),viewBox:"0 0 "+1e3*G+" "+1e3*ee,preserveAspectRatio:"xMinYMin"}),qe=Eo(["overlay"],[Ne],R);return qe.height=ee,qe.style.height=Q(ee),qe.style.width=Q(G),qe},lt={fontMap:Pt,makeSymbol:gr,mathsym:Gl,makeSpan:qi,makeSvgSpan:Eo,makeLineSpan:QT,makeAnchor:or,makeFragment:xh,wrapFragment:Ce,makeVList:Ue,makeOrd:qs,makeGlue:De,staticSvg:kn,svgData:Ft,tryCombineChars:os},hn={number:3,unit:"mu"},$n={number:4,unit:"mu"},rn={number:5,unit:"mu"},er={mord:{mop:hn,mbin:$n,mrel:rn,minner:hn},mop:{mord:hn,mop:hn,mrel:rn,minner:hn},mbin:{mord:$n,mop:$n,mopen:$n,minner:$n},mrel:{mord:rn,mop:rn,mopen:rn,minner:rn},mopen:{},mclose:{mop:hn,mbin:$n,mrel:rn,minner:hn},mpunct:{mord:hn,mop:hn,mrel:rn,mopen:hn,mclose:hn,mpunct:hn,minner:hn},minner:{mord:hn,mop:hn,mbin:$n,mrel:rn,mopen:hn,mpunct:hn,minner:hn}},zn={mord:{mop:hn},mop:{mord:hn,mop:hn},mbin:{},mrel:{},mopen:{},mclose:{mop:hn},mpunct:{},minner:{mop:hn}},tr={},Xn={},vi={};function sn(re){for(var E=re.type,R=re.names,P=re.props,N=re.handler,G=re.htmlBuilder,ee=re.mathmlBuilder,ve={type:E,numArgs:P.numArgs,argTypes:P.argTypes,allowedInArgument:!!P.allowedInArgument,allowedInText:!!P.allowedInText,allowedInMath:P.allowedInMath===void 0?!0:P.allowedInMath,numOptionalArgs:P.numOptionalArgs||0,infix:!!P.infix,primitive:!!P.primitive,handler:N},Ne=0;Ne<R.length;++Ne)tr[R[Ne]]=ve;E&&(G&&(Xn[E]=G),ee&&(vi[E]=ee))}function Mr(re){var E=re.type,R=re.htmlBuilder,P=re.mathmlBuilder;sn({type:E,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:R,mathmlBuilder:P})}var Nr=function(E){return E.type==="ordgroup"&&E.body.length===1?E.body[0]:E},ri=function(E){return E.type==="ordgroup"?E.body:[E]},Ni=lt.makeSpan,Ud=["leftmost","mbin","mopen","mrel","mop","mpunct"],JT=["rightmost","mrel","mclose","mpunct"],mS={display:F.DISPLAY,text:F.TEXT,script:F.SCRIPT,scriptscript:F.SCRIPTSCRIPT},jne={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ys=function(E,R,P,N){N===void 0&&(N=[null,null]);for(var G=[],ee=0;ee<E.length;ee++){var ve=Qr(E[ee],R);if(ve instanceof ke){var Ne=ve.children;G.push.apply(G,Ne)}else G.push(ve)}if(lt.tryCombineChars(G),!P)return G;var qe=R;if(E.length===1){var ut=E[0];ut.type==="sizing"?qe=R.havingSize(ut.size):ut.type==="styling"&&(qe=R.havingStyle(mS[ut.style]))}var It=Ni([N[0]||"leftmost"],[],R),Gt=Ni([N[1]||"rightmost"],[],R),Zt=P==="root";return C8(G,function(Qt,gn){var _n=gn.classes[0],Gn=Qt.classes[0];_n==="mbin"&&g.contains(JT,Gn)?gn.classes[0]="mord":Gn==="mbin"&&g.contains(Ud,_n)&&(Qt.classes[0]="mord")},{node:It},Gt,Zt),C8(G,function(Qt,gn){var _n=eA(gn),Gn=eA(Qt),Zn=_n&&Gn?Qt.hasClass("mtight")?zn[_n][Gn]:er[_n][Gn]:null;if(Zn)return lt.makeGlue(Zn,qe)},{node:It},Gt,Zt),G},C8=function re(E,R,P,N,G){N&&E.push(N);for(var ee=0;ee<E.length;ee++){var ve=E[ee],Ne=M8(ve);if(Ne){re(Ne.children,R,P,null,G);continue}var qe=!ve.hasClass("mspace");if(qe){var ut=R(ve,P.node);ut&&(P.insertAfter?P.insertAfter(ut):(E.unshift(ut),ee++))}qe?P.node=ve:G&&ve.hasClass("newline")&&(P.node=Ni(["leftmost"])),P.insertAfter=function(It){return function(Gt){E.splice(It+1,0,Gt),ee++}}(ee)}N&&E.pop()},M8=function(E){return E instanceof ke||E instanceof at||E instanceof de&&E.hasClass("enclosing")?E:null},Zne=function re(E,R){var P=M8(E);if(P){var N=P.children;if(N.length){if(R==="right")return re(N[N.length-1],"right");if(R==="left")return re(N[0],"left")}}return E},eA=function(E,R){return E?(R&&(E=Zne(E,R)),jne[E.classes[0]]||null):null},yy=function(E,R){var P=["nulldelimiter"].concat(E.baseSizingClasses());return Ni(R.concat(P))},Qr=function(E,R,P){if(!E)return Ni();if(Xn[E.type]){var N=Xn[E.type](E,R);if(P&&R.size!==P.size){N=Ni(R.sizingClasses(P),[N],R);var G=R.sizeMultiplier/P.sizeMultiplier;N.height*=G,N.depth*=G}return N}else throw new s("Got group of unknown type: '"+E.type+"'")};function vS(re,E){var R=Ni(["base"],re,E),P=Ni(["strut"]);return P.style.height=Q(R.height+R.depth),R.depth&&(P.style.verticalAlign=Q(-R.depth)),R.children.unshift(P),R}function tA(re,E){var R=null;re.length===1&&re[0].type==="tag"&&(R=re[0].tag,re=re[0].body);var P=Ys(re,E,"root"),N;P.length===2&&P[1].hasClass("tag")&&(N=P.pop());for(var G=[],ee=[],ve=0;ve<P.length;ve++)if(ee.push(P[ve]),P[ve].hasClass("mbin")||P[ve].hasClass("mrel")||P[ve].hasClass("allowbreak")){for(var Ne=!1;ve<P.length-1&&P[ve+1].hasClass("mspace")&&!P[ve+1].hasClass("newline");)ve++,ee.push(P[ve]),P[ve].hasClass("nobreak")&&(Ne=!0);Ne||(G.push(vS(ee,E)),ee=[])}else P[ve].hasClass("newline")&&(ee.pop(),ee.length>0&&(G.push(vS(ee,E)),ee=[]),G.push(P[ve]));ee.length>0&&G.push(vS(ee,E));var qe;R?(qe=vS(Ys(R,E,!0)),qe.classes=["tag"],G.push(qe)):N&&G.push(N);var ut=Ni(["katex-html"],G);if(ut.setAttribute("aria-hidden","true"),qe){var It=qe.children[0];It.style.height=Q(ut.height+ut.depth),ut.depth&&(It.style.verticalAlign=Q(-ut.depth))}return ut}function T8(re){return new ke(re)}var tl=function(){function re(R,P,N){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=R,this.attributes={},this.children=P||[],this.classes=N||[]}var E=re.prototype;return E.setAttribute=function(P,N){this.attributes[P]=N},E.getAttribute=function(P){return this.attributes[P]},E.toNode=function(){var P=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&P.setAttribute(N,this.attributes[N]);this.classes.length>0&&(P.className=_e(this.classes));for(var G=0;G<this.children.length;G++)P.appendChild(this.children[G].toNode());return P},E.toMarkup=function(){var P="<"+this.type;for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&(P+=" "+N+'="',P+=g.escape(this.attributes[N]),P+='"');this.classes.length>0&&(P+=' class ="'+g.escape(_e(this.classes))+'"'),P+=">";for(var G=0;G<this.children.length;G++)P+=this.children[G].toMarkup();return P+="</"+this.type+">",P},E.toText=function(){return this.children.map(function(P){return P.toText()}).join("")},re}(),by=function(){function re(R){this.text=void 0,this.text=R}var E=re.prototype;return E.toNode=function(){return document.createTextNode(this.text)},E.toMarkup=function(){return g.escape(this.toText())},E.toText=function(){return this.text},re}(),Qne=function(){function re(R){this.width=void 0,this.character=void 0,this.width=R,R>=.05555&&R<=.05556?this.character=" ":R>=.1666&&R<=.1667?this.character=" ":R>=.2222&&R<=.2223?this.character=" ":R>=.2777&&R<=.2778?this.character="  ":R>=-.05556&&R<=-.05555?this.character=" ⁣":R>=-.1667&&R<=-.1666?this.character=" ⁣":R>=-.2223&&R<=-.2222?this.character=" ⁣":R>=-.2778&&R<=-.2777?this.character=" ⁣":this.character=null}var E=re.prototype;return E.toNode=function(){if(this.character)return document.createTextNode(this.character);var P=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return P.setAttribute("width",Q(this.width)),P},E.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Q(this.width)+'"/>'},E.toText=function(){return this.character?this.character:" "},re}(),cn={MathNode:tl,TextNode:by,SpaceNode:Qne,newDocumentFragment:T8},nl=function(E,R,P){return qn[R][E]&&qn[R][E].replace&&E.charCodeAt(0)!==55349&&!(Pe.hasOwnProperty(E)&&P&&(P.fontFamily&&P.fontFamily.substr(4,2)==="tt"||P.font&&P.font.substr(4,2)==="tt"))&&(E=qn[R][E].replace),new cn.TextNode(E)},nA=function(E){return E.length===1?E[0]:new cn.MathNode("mrow",E)},rA=function(E,R){if(R.fontFamily==="texttt")return"monospace";if(R.fontFamily==="textsf")return R.fontShape==="textit"&&R.fontWeight==="textbf"?"sans-serif-bold-italic":R.fontShape==="textit"?"sans-serif-italic":R.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(R.fontShape==="textit"&&R.fontWeight==="textbf")return"bold-italic";if(R.fontShape==="textit")return"italic";if(R.fontWeight==="textbf")return"bold";var P=R.font;if(!P||P==="mathnormal")return null;var N=E.mode;if(P==="mathit")return"italic";if(P==="boldsymbol")return E.type==="textord"?"bold":"bold-italic";if(P==="mathbf")return"bold";if(P==="mathbb")return"double-struck";if(P==="mathfrak")return"fraktur";if(P==="mathscr"||P==="mathcal")return"script";if(P==="mathsf")return"sans-serif";if(P==="mathtt")return"monospace";var G=E.text;if(g.contains(["\\imath","\\jmath"],G))return null;qn[N][G]&&qn[N][G].replace&&(G=qn[N][G].replace);var ee=lt.fontMap[P].fontName;return st(G,ee,N)?lt.fontMap[P].variant:null},Io=function(E,R,P){if(E.length===1){var N=_i(E[0],R);return P&&N instanceof tl&&N.type==="mo"&&(N.setAttribute("lspace","0em"),N.setAttribute("rspace","0em")),[N]}for(var G=[],ee,ve=0;ve<E.length;ve++){var Ne=_i(E[ve],R);if(Ne instanceof tl&&ee instanceof tl){if(Ne.type==="mtext"&&ee.type==="mtext"&&Ne.getAttribute("mathvariant")===ee.getAttribute("mathvariant")){var qe;(qe=ee.children).push.apply(qe,Ne.children);continue}else if(Ne.type==="mn"&&ee.type==="mn"){var ut;(ut=ee.children).push.apply(ut,Ne.children);continue}else if(Ne.type==="mi"&&Ne.children.length===1&&ee.type==="mn"){var It=Ne.children[0];if(It instanceof by&&It.text==="."){var Gt;(Gt=ee.children).push.apply(Gt,Ne.children);continue}}else if(ee.type==="mi"&&ee.children.length===1){var Zt=ee.children[0];if(Zt instanceof by&&Zt.text==="̸"&&(Ne.type==="mo"||Ne.type==="mi"||Ne.type==="mn")){var Qt=Ne.children[0];Qt instanceof by&&Qt.text.length>0&&(Qt.text=Qt.text.slice(0,1)+"̸"+Qt.text.slice(1),G.pop())}}}G.push(Ne),ee=Ne}return G},Hd=function(E,R,P){return nA(Io(E,R,P))},_i=function(E,R){if(!E)return new cn.MathNode("mrow");if(vi[E.type]){var P=vi[E.type](E,R);return P}else throw new s("Got group of unknown type: '"+E.type+"'")};function A8(re,E,R,P,N){var G=Io(re,R),ee;G.length===1&&G[0]instanceof tl&&g.contains(["mrow","mtable"],G[0].type)?ee=G[0]:ee=new cn.MathNode("mrow",G);var ve=new cn.MathNode("annotation",[new cn.TextNode(E)]);ve.setAttribute("encoding","application/x-tex");var Ne=new cn.MathNode("semantics",[ee,ve]),qe=new cn.MathNode("math",[Ne]);qe.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),P&&qe.setAttribute("display","block");var ut=N?"katex":"katex-mathml";return lt.makeSpan([ut],[qe])}var E8=function(E){return new dt({style:E.displayMode?F.DISPLAY:F.TEXT,maxSize:E.maxSize,minRuleThickness:E.minRuleThickness})},I8=function(E,R){if(R.displayMode){var P=["katex-display"];R.leqno&&P.push("leqno"),R.fleqn&&P.push("fleqn"),E=lt.makeSpan(P,[E])}return E},Jne=function(E,R,P){var N=E8(P),G;if(P.output==="mathml")return A8(E,R,N,P.displayMode,!0);if(P.output==="html"){var ee=tA(E,N);G=lt.makeSpan(["katex"],[ee])}else{var ve=A8(E,R,N,P.displayMode,!1),Ne=tA(E,N);G=lt.makeSpan(["katex"],[ve,Ne])}return I8(G,P)},ere=function(E,R,P){var N=E8(P),G=tA(E,N),ee=lt.makeSpan(["katex"],[G]);return I8(ee,P)},tre={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},nre=function(E){var R=new cn.MathNode("mo",[new cn.TextNode(tre[E.replace(/^\\/,"")])]);return R.setAttribute("stretchy","true"),R},rre={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ire=function(E){return E.type==="ordgroup"?E.body.length:1},sre=function(E,R){function P(){var Ne=4e5,qe=E.label.substr(1);if(g.contains(["widehat","widecheck","widetilde","utilde"],qe)){var ut=E,It=ire(ut.base),Gt,Zt,Qt;if(It>5)qe==="widehat"||qe==="widecheck"?(Gt=420,Ne=2364,Qt=.42,Zt=qe+"4"):(Gt=312,Ne=2340,Qt=.34,Zt="tilde4");else{var gn=[1,1,2,2,3,3][It];qe==="widehat"||qe==="widecheck"?(Ne=[0,1062,2364,2364,2364][gn],Gt=[0,239,300,360,420][gn],Qt=[0,.24,.3,.3,.36,.42][gn],Zt=qe+gn):(Ne=[0,600,1033,2339,2340][gn],Gt=[0,260,286,306,312][gn],Qt=[0,.26,.286,.3,.306,.34][gn],Zt="tilde"+gn)}var _n=new Ht(Zt),Gn=new yt([_n],{width:"100%",height:Q(Qt),viewBox:"0 0 "+Ne+" "+Gt,preserveAspectRatio:"none"});return{span:lt.makeSvgSpan([],[Gn],R),minWidth:0,height:Qt}}else{var Zn=[],ir=rre[qe],Jr=ir[0],ci=ir[1],Bi=ir[2],ii=Bi/1e3,ui=Jr.length,ls,Ci;if(ui===1){var Ro=ir[3];ls=["hide-tail"],Ci=[Ro]}else if(ui===2)ls=["halfarrow-left","halfarrow-right"],Ci=["xMinYMin","xMaxYMin"];else if(ui===3)ls=["brace-left","brace-center","brace-right"],Ci=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+ui+" children.");for(var Po=0;Po<ui;Po++){var Gd=new Ht(Jr[Po]),Ic=new yt([Gd],{width:"400em",height:Q(ii),viewBox:"0 0 "+Ne+" "+Bi,preserveAspectRatio:Ci[Po]+" slice"}),Do=lt.makeSvgSpan([ls[Po]],[Ic],R);if(ui===1)return{span:Do,minWidth:ci,height:ii};Do.style.height=Q(ii),Zn.push(Do)}return{span:lt.makeSpan(["stretchy"],Zn,R),minWidth:ci,height:ii}}}var N=P(),G=N.span,ee=N.minWidth,ve=N.height;return G.height=ve,G.style.height=Q(ve),ee>0&&(G.style.minWidth=Q(ee)),G},are=function(E,R,P,N,G){var ee,ve=E.height+E.depth+P+N;if(/fbox|color|angl/.test(R)){if(ee=lt.makeSpan(["stretchy",R],[],G),R==="fbox"){var Ne=G.color&&G.getColor();Ne&&(ee.style.borderColor=Ne)}}else{var qe=[];/^[bx]cancel$/.test(R)&&qe.push(new Ot({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(R)&&qe.push(new Ot({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var ut=new yt(qe,{width:"100%",height:Q(ve)});ee=lt.makeSvgSpan([],[ut],G)}return ee.height=ve,ee.style.height=Q(ve),ee},wu={encloseSpan:are,mathMLnode:nre,svgSpan:sre};function wr(re,E){if(!re||re.type!==E)throw new Error("Expected node of type "+E+", but got "+(re?"node of type "+re.type:String(re)));return re}function iA(re){var E=gS(re);if(!E)throw new Error("Expected node of symbol group type, but got "+(re?"node of type "+re.type:String(re)));return E}function gS(re){return re&&(re.type==="atom"||Jt.hasOwnProperty(re.type))?re:null}var sA=function(E,R){var P,N,G;E&&E.type==="supsub"?(N=wr(E.base,"accent"),P=N.base,E.base=P,G=Vt(Qr(E,R)),E.base=N):(N=wr(E,"accent"),P=N.base);var ee=Qr(P,R.havingCrampedStyle()),ve=N.isShifty&&g.isCharacterBox(P),Ne=0;if(ve){var qe=g.getBaseElem(P),ut=Qr(qe,R.havingCrampedStyle());Ne=ln(ut).skew}var It=N.label==="\\c",Gt=It?ee.height+ee.depth:Math.min(ee.height,R.fontMetrics().xHeight),Zt;if(N.isStretchy)Zt=wu.svgSpan(N,R),Zt=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"elem",elem:Zt,wrapperClasses:["svg-align"],wrapperStyle:Ne>0?{width:"calc(100% - "+Q(2*Ne)+")",marginLeft:Q(2*Ne)}:void 0}]},R);else{var Qt,gn;N.label==="\\vec"?(Qt=lt.staticSvg("vec",R),gn=lt.svgData.vec[1]):(Qt=lt.makeOrd({mode:N.mode,text:N.label},R,"textord"),Qt=ln(Qt),Qt.italic=0,gn=Qt.width,It&&(Gt+=Qt.depth)),Zt=lt.makeSpan(["accent-body"],[Qt]);var _n=N.label==="\\textcircled";_n&&(Zt.classes.push("accent-full"),Gt=ee.height);var Gn=Ne;_n||(Gn-=gn/2),Zt.style.left=Q(Gn),N.label==="\\textcircled"&&(Zt.style.top=".2em"),Zt=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"kern",size:-Gt},{type:"elem",elem:Zt}]},R)}var Zn=lt.makeSpan(["mord","accent"],[Zt],R);return G?(G.children[0]=Zn,G.height=Math.max(Zn.height,G.height),G.classes[0]="mord",G):Zn},R8=function(E,R){var P=E.isStretchy?wu.mathMLnode(E.label):new cn.MathNode("mo",[nl(E.label,E.mode)]),N=new cn.MathNode("mover",[_i(E.base,R),P]);return N.setAttribute("accent","true"),N},ore=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(function(re){return"\\"+re}).join("|"));sn({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(E,R){var P=Nr(R[0]),N=!ore.test(E.funcName),G=!N||E.funcName==="\\widehat"||E.funcName==="\\widetilde"||E.funcName==="\\widecheck";return{type:"accent",mode:E.parser.mode,label:E.funcName,isStretchy:N,isShifty:G,base:P}},htmlBuilder:sA,mathmlBuilder:R8}),sn({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:function(E,R){var P=R[0],N=E.parser.mode;return N==="math"&&(E.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+E.funcName+" works only in text mode"),N="text"),{type:"accent",mode:N,label:E.funcName,isStretchy:!1,isShifty:!0,base:P}},htmlBuilder:sA,mathmlBuilder:R8}),sn({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];return{type:"accentUnder",mode:P.mode,label:N,base:G}},htmlBuilder:function(E,R){var P=Qr(E.base,R),N=wu.svgSpan(E,R),G=E.label==="\\utilde"?.12:0,ee=lt.makeVList({positionType:"top",positionData:P.height,children:[{type:"elem",elem:N,wrapperClasses:["svg-align"]},{type:"kern",size:G},{type:"elem",elem:P}]},R);return lt.makeSpan(["mord","accentunder"],[ee],R)},mathmlBuilder:function(E,R){var P=wu.mathMLnode(E.label),N=new cn.MathNode("munder",[_i(E.base,R),P]);return N.setAttribute("accentunder","true"),N}});var yS=function(E){var R=new cn.MathNode("mpadded",E?[E]:[]);return R.setAttribute("width","+0.6em"),R.setAttribute("lspace","0.3em"),R};sn({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:function(E,R,P){var N=E.parser,G=E.funcName;return{type:"xArrow",mode:N.mode,label:G,body:R[0],below:P[0]}},htmlBuilder:function(E,R){var P=R.style,N=R.havingStyle(P.sup()),G=lt.wrapFragment(Qr(E.body,N,R),R),ee=E.label.slice(0,2)==="\\x"?"x":"cd";G.classes.push(ee+"-arrow-pad");var ve;E.below&&(N=R.havingStyle(P.sub()),ve=lt.wrapFragment(Qr(E.below,N,R),R),ve.classes.push(ee+"-arrow-pad"));var Ne=wu.svgSpan(E,R),qe=-R.fontMetrics().axisHeight+.5*Ne.height,ut=-R.fontMetrics().axisHeight-.5*Ne.height-.111;(G.depth>.25||E.label==="\\xleftequilibrium")&&(ut-=G.depth);var It;if(ve){var Gt=-R.fontMetrics().axisHeight+ve.height+.5*Ne.height+.111;It=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:G,shift:ut},{type:"elem",elem:Ne,shift:qe},{type:"elem",elem:ve,shift:Gt}]},R)}else It=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:G,shift:ut},{type:"elem",elem:Ne,shift:qe}]},R);return It.children[0].children[0].children[1].classes.push("svg-align"),lt.makeSpan(["mrel","x-arrow"],[It],R)},mathmlBuilder:function(E,R){var P=wu.mathMLnode(E.label);P.setAttribute("minsize",E.label.charAt(0)==="x"?"1.75em":"3.0em");var N;if(E.body){var G=yS(_i(E.body,R));if(E.below){var ee=yS(_i(E.below,R));N=new cn.MathNode("munderover",[P,ee,G])}else N=new cn.MathNode("mover",[P,G])}else if(E.below){var ve=yS(_i(E.below,R));N=new cn.MathNode("munder",[P,ve])}else N=yS(),N=new cn.MathNode("mover",[P,N]);return N}});var lre={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},P8=function(){return{type:"styling",body:[],mode:"math",style:"display"}},D8=function(E){return E.type==="textord"&&E.text==="@"},cre=function(E,R){return(E.type==="mathord"||E.type==="atom")&&E.text===R};function ure(re,E,R){var P=lre[re];switch(P){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return R.callFunction(P,[E[0]],[E[1]]);case"\\uparrow":case"\\downarrow":{var N=R.callFunction("\\\\cdleft",[E[0]],[]),G={type:"atom",text:P,mode:"math",family:"rel"},ee=R.callFunction("\\Big",[G],[]),ve=R.callFunction("\\\\cdright",[E[1]],[]),Ne={type:"ordgroup",mode:"math",body:[N,ee,ve]};return R.callFunction("\\\\cdparent",[Ne],[])}case"\\\\cdlongequal":return R.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var qe={type:"textord",text:"\\Vert",mode:"math"};return R.callFunction("\\Big",[qe],[])}default:return{type:"textord",text:" ",mode:"math"}}}function dre(re){var E=[];for(re.gullet.beginGroup(),re.gullet.macros.set("\\cr","\\\\\\relax"),re.gullet.beginGroup();;){E.push(re.parseExpression(!1,"\\\\")),re.gullet.endGroup(),re.gullet.beginGroup();var R=re.fetch().text;if(R==="&"||R==="\\\\")re.consume();else if(R==="\\end"){E[E.length-1].length===0&&E.pop();break}else throw new s("Expected \\\\ or \\cr or \\end",re.nextToken)}for(var P=[],N=[P],G=0;G<E.length;G++){for(var ee=E[G],ve=P8(),Ne=0;Ne<ee.length;Ne++)if(!D8(ee[Ne]))ve.body.push(ee[Ne]);else{P.push(ve),Ne+=1;var qe=iA(ee[Ne]).text,ut=new Array(2);if(ut[0]={type:"ordgroup",mode:"math",body:[]},ut[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(qe)>-1))if("<>AV".indexOf(qe)>-1)for(var It=0;It<2;It++){for(var Gt=!0,Zt=Ne+1;Zt<ee.length;Zt++){if(cre(ee[Zt],qe)){Gt=!1,Ne=Zt;break}if(D8(ee[Zt]))throw new s("Missing a "+qe+" character to complete a CD arrow.",ee[Zt]);ut[It].body.push(ee[Zt])}if(Gt)throw new s("Missing a "+qe+" character to complete a CD arrow.",ee[Ne])}else throw new s('Expected one of "<>AV=|." after @',ee[Ne]);var Qt=ure(qe,ut,re),gn={type:"styling",body:[Qt],mode:"math",style:"display"};P.push(gn),ve=P8()}G%2===0?P.push(ve):P.shift(),P=[],N.push(P)}re.gullet.endGroup(),re.gullet.endGroup();var _n=new Array(N[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:N,arraystretch:1,addJot:!0,rowGaps:[null],cols:_n,colSeparationType:"CD",hLinesBeforeRow:new Array(N.length+1).fill([])}}sn({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=E.funcName;return{type:"cdlabel",mode:P.mode,side:N.slice(4),label:R[0]}},htmlBuilder:function(E,R){var P=R.havingStyle(R.style.sup()),N=lt.wrapFragment(Qr(E.label,P,R),R);return N.classes.push("cd-label-"+E.side),N.style.bottom=Q(.8-N.depth),N.height=0,N.depth=0,N},mathmlBuilder:function(E,R){var P=new cn.MathNode("mrow",[_i(E.label,R)]);return P=new cn.MathNode("mpadded",[P]),P.setAttribute("width","0"),E.side==="left"&&P.setAttribute("lspace","-1width"),P.setAttribute("voffset","0.7em"),P=new cn.MathNode("mstyle",[P]),P.setAttribute("displaystyle","false"),P.setAttribute("scriptlevel","1"),P}}),sn({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:function(E,R){var P=E.parser;return{type:"cdlabelparent",mode:P.mode,fragment:R[0]}},htmlBuilder:function(E,R){var P=lt.wrapFragment(Qr(E.fragment,R),R);return P.classes.push("cd-vert-arrow"),P},mathmlBuilder:function(E,R){return new cn.MathNode("mrow",[_i(E.fragment,R)])}}),sn({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(E,R){for(var P=E.parser,N=wr(R[0],"ordgroup"),G=N.body,ee="",ve=0;ve<G.length;ve++){var Ne=wr(G[ve],"textord");ee+=Ne.text}var qe=parseInt(ee),ut;if(isNaN(qe))throw new s("\\@char has non-numeric argument "+ee);if(qe<0||qe>=1114111)throw new s("\\@char with invalid code point "+ee);return qe<=65535?ut=String.fromCharCode(qe):(qe-=65536,ut=String.fromCharCode((qe>>10)+55296,(qe&1023)+56320)),{type:"textord",mode:P.mode,text:ut}}});var L8=function(E,R){var P=Ys(E.body,R.withColor(E.color),!1);return lt.makeFragment(P)},k8=function(E,R){var P=Io(E.body,R.withColor(E.color)),N=new cn.MathNode("mstyle",P);return N.setAttribute("mathcolor",E.color),N};sn({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler:function(E,R){var P=E.parser,N=wr(R[0],"color-token").color,G=R[1];return{type:"color",mode:P.mode,color:N,body:ri(G)}},htmlBuilder:L8,mathmlBuilder:k8}),sn({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler:function(E,R){var P=E.parser,N=E.breakOnTokenText,G=wr(R[0],"color-token").color;P.gullet.macros.set("\\current@color",G);var ee=P.parseExpression(!0,N);return{type:"color",mode:P.mode,color:G,body:ee}},htmlBuilder:L8,mathmlBuilder:k8}),sn({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(E,R,P){var N=E.parser,G=P[0],ee=!N.settings.displayMode||!N.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:N.mode,newLine:ee,size:G&&wr(G,"size").value}},htmlBuilder:function(E,R){var P=lt.makeSpan(["mspace"],[],R);return E.newLine&&(P.classes.push("newline"),E.size&&(P.style.marginTop=Q(Ke(E.size,R)))),P},mathmlBuilder:function(E,R){var P=new cn.MathNode("mspace");return E.newLine&&(P.setAttribute("linebreak","newline"),E.size&&P.setAttribute("height",Q(Ke(E.size,R)))),P}});var aA={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},O8=function(E){var R=E.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(R))throw new s("Expected a control sequence",E);return R},fre=function(E){var R=E.gullet.popToken();return R.text==="="&&(R=E.gullet.popToken(),R.text===" "&&(R=E.gullet.popToken())),R},N8=function(E,R,P,N){var G=E.gullet.macros.get(P.text);G==null&&(P.noexpand=!0,G={tokens:[P],numArgs:0,unexpandable:!E.gullet.isExpandable(P.text)}),E.gullet.macros.set(R,G,N)};sn({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(E){var R=E.parser,P=E.funcName;R.consumeSpaces();var N=R.fetch();if(aA[N.text])return(P==="\\global"||P==="\\\\globallong")&&(N.text=aA[N.text]),wr(R.parseFunction(),"internal");throw new s("Invalid token after macro prefix",N)}}),sn({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(E){var R=E.parser,P=E.funcName,N=R.gullet.popToken(),G=N.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(G))throw new s("Expected a control sequence",N);for(var ee=0,ve,Ne=[[]];R.gullet.future().text!=="{";)if(N=R.gullet.popToken(),N.text==="#"){if(R.gullet.future().text==="{"){ve=R.gullet.future(),Ne[ee].push("{");break}if(N=R.gullet.popToken(),!/^[1-9]$/.test(N.text))throw new s('Invalid argument number "'+N.text+'"');if(parseInt(N.text)!==ee+1)throw new s('Argument number "'+N.text+'" out of order');ee++,Ne.push([])}else{if(N.text==="EOF")throw new s("Expected a macro definition");Ne[ee].push(N.text)}var qe=R.gullet.consumeArg(),ut=qe.tokens;return ve&&ut.unshift(ve),(P==="\\edef"||P==="\\xdef")&&(ut=R.gullet.expandTokens(ut),ut.reverse()),R.gullet.macros.set(G,{tokens:ut,numArgs:ee,delimiters:Ne},P===aA[P]),{type:"internal",mode:R.mode}}}),sn({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(E){var R=E.parser,P=E.funcName,N=O8(R.gullet.popToken());R.gullet.consumeSpaces();var G=fre(R);return N8(R,N,G,P==="\\\\globallet"),{type:"internal",mode:R.mode}}}),sn({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(E){var R=E.parser,P=E.funcName,N=O8(R.gullet.popToken()),G=R.gullet.popToken(),ee=R.gullet.popToken();return N8(R,N,ee,P==="\\\\globalfuture"),R.gullet.pushToken(ee),R.gullet.pushToken(G),{type:"internal",mode:R.mode}}});var _y=function(E,R,P){var N=qn.math[E]&&qn.math[E].replace,G=st(N||E,R,P);if(!G)throw new Error("Unsupported symbol "+E+" and font size "+R+".");return G},oA=function(E,R,P,N){var G=P.havingBaseStyle(R),ee=lt.makeSpan(N.concat(G.sizingClasses(P)),[E],P),ve=G.sizeMultiplier/P.sizeMultiplier;return ee.height*=ve,ee.depth*=ve,ee.maxFontSize=G.sizeMultiplier,ee},B8=function(E,R,P){var N=R.havingBaseStyle(P),G=(1-R.sizeMultiplier/N.sizeMultiplier)*R.fontMetrics().axisHeight;E.classes.push("delimcenter"),E.style.top=Q(G),E.height-=G,E.depth+=G},hre=function(E,R,P,N,G,ee){var ve=lt.makeSymbol(E,"Main-Regular",G,N),Ne=oA(ve,R,N,ee);return P&&B8(Ne,N,R),Ne},pre=function(E,R,P,N){return lt.makeSymbol(E,"Size"+R+"-Regular",P,N)},F8=function(E,R,P,N,G,ee){var ve=pre(E,R,G,N),Ne=oA(lt.makeSpan(["delimsizing","size"+R],[ve],N),F.TEXT,N,ee);return P&&B8(Ne,N,F.TEXT),Ne},lA=function(E,R,P){var N;R==="Size1-Regular"?N="delim-size1":N="delim-size4";var G=lt.makeSpan(["delimsizinginner",N],[lt.makeSpan([],[lt.makeSymbol(E,R,P)])]);return{type:"elem",elem:G}},cA=function(E,R,P){var N=ze["Size4-Regular"][E.charCodeAt(0)]?ze["Size4-Regular"][E.charCodeAt(0)][4]:ze["Size1-Regular"][E.charCodeAt(0)][4],G=new Ht("inner",oe(E,Math.round(1e3*R))),ee=new yt([G],{width:Q(N),height:Q(R),style:"width:"+Q(N),viewBox:"0 0 "+1e3*N+" "+Math.round(1e3*R),preserveAspectRatio:"xMinYMin"}),ve=lt.makeSvgSpan([],[ee],P);return ve.height=R,ve.style.height=Q(R),ve.style.width=Q(N),{type:"elem",elem:ve}},uA=.008,bS={type:"kern",size:-1*uA},mre=["|","\\lvert","\\rvert","\\vert"],vre=["\\|","\\lVert","\\rVert","\\Vert"],z8=function(E,R,P,N,G,ee){var ve,Ne,qe,ut;ve=qe=ut=E,Ne=null;var It="Size1-Regular";E==="\\uparrow"?qe=ut="⏐":E==="\\Uparrow"?qe=ut="‖":E==="\\downarrow"?ve=qe="⏐":E==="\\Downarrow"?ve=qe="‖":E==="\\updownarrow"?(ve="\\uparrow",qe="⏐",ut="\\downarrow"):E==="\\Updownarrow"?(ve="\\Uparrow",qe="‖",ut="\\Downarrow"):g.contains(mre,E)?qe="∣":g.contains(vre,E)?qe="∥":E==="["||E==="\\lbrack"?(ve="⎡",qe="⎢",ut="⎣",It="Size4-Regular"):E==="]"||E==="\\rbrack"?(ve="⎤",qe="⎥",ut="⎦",It="Size4-Regular"):E==="\\lfloor"||E==="⌊"?(qe=ve="⎢",ut="⎣",It="Size4-Regular"):E==="\\lceil"||E==="⌈"?(ve="⎡",qe=ut="⎢",It="Size4-Regular"):E==="\\rfloor"||E==="⌋"?(qe=ve="⎥",ut="⎦",It="Size4-Regular"):E==="\\rceil"||E==="⌉"?(ve="⎤",qe=ut="⎥",It="Size4-Regular"):E==="("||E==="\\lparen"?(ve="⎛",qe="⎜",ut="⎝",It="Size4-Regular"):E===")"||E==="\\rparen"?(ve="⎞",qe="⎟",ut="⎠",It="Size4-Regular"):E==="\\{"||E==="\\lbrace"?(ve="⎧",Ne="⎨",ut="⎩",qe="⎪",It="Size4-Regular"):E==="\\}"||E==="\\rbrace"?(ve="⎫",Ne="⎬",ut="⎭",qe="⎪",It="Size4-Regular"):E==="\\lgroup"||E==="⟮"?(ve="⎧",ut="⎩",qe="⎪",It="Size4-Regular"):E==="\\rgroup"||E==="⟯"?(ve="⎫",ut="⎭",qe="⎪",It="Size4-Regular"):E==="\\lmoustache"||E==="⎰"?(ve="⎧",ut="⎭",qe="⎪",It="Size4-Regular"):(E==="\\rmoustache"||E==="⎱")&&(ve="⎫",ut="⎩",qe="⎪",It="Size4-Regular");var Gt=_y(ve,It,G),Zt=Gt.height+Gt.depth,Qt=_y(qe,It,G),gn=Qt.height+Qt.depth,_n=_y(ut,It,G),Gn=_n.height+_n.depth,Zn=0,ir=1;if(Ne!==null){var Jr=_y(Ne,It,G);Zn=Jr.height+Jr.depth,ir=2}var ci=Zt+Gn+Zn,Bi=Math.max(0,Math.ceil((R-ci)/(ir*gn))),ii=ci+Bi*ir*gn,ui=N.fontMetrics().axisHeight;P&&(ui*=N.sizeMultiplier);var ls=ii/2-ui,Ci=[];if(Ci.push(lA(ut,It,G)),Ci.push(bS),Ne===null){var Ro=ii-Zt-Gn+2*uA;Ci.push(cA(qe,Ro,N))}else{var Po=(ii-Zt-Gn-Zn)/2+2*uA;Ci.push(cA(qe,Po,N)),Ci.push(bS),Ci.push(lA(Ne,It,G)),Ci.push(bS),Ci.push(cA(qe,Po,N))}Ci.push(bS),Ci.push(lA(ve,It,G));var Gd=N.havingBaseStyle(F.TEXT),Ic=lt.makeVList({positionType:"bottom",positionData:ls,children:Ci},Gd);return oA(lt.makeSpan(["delimsizing","mult"],[Ic],Gd),F.TEXT,N,ee)},dA=80,fA=.08,hA=function(E,R,P,N,G){var ee=be(E,N,P),ve=new Ht(E,ee),Ne=new yt([ve],{width:"400em",height:Q(R),viewBox:"0 0 400000 "+P,preserveAspectRatio:"xMinYMin slice"});return lt.makeSvgSpan(["hide-tail"],[Ne],G)},gre=function(E,R){var P=R.havingBaseSizing(),N=$8("\\surd",E*P.sizeMultiplier,V8,P),G=P.sizeMultiplier,ee=Math.max(0,R.minRuleThickness-R.fontMetrics().sqrtRuleThickness),ve,Ne=0,qe=0,ut=0,It;return N.type==="small"?(ut=1e3+1e3*ee+dA,E<1?G=1:E<1.4&&(G=.7),Ne=(1+ee+fA)/G,qe=(1+ee)/G,ve=hA("sqrtMain",Ne,ut,ee,R),ve.style.minWidth="0.853em",It=.833/G):N.type==="large"?(ut=(1e3+dA)*Sy[N.size],qe=(Sy[N.size]+ee)/G,Ne=(Sy[N.size]+ee+fA)/G,ve=hA("sqrtSize"+N.size,Ne,ut,ee,R),ve.style.minWidth="1.02em",It=1/G):(Ne=E+ee+fA,qe=E+ee,ut=Math.floor(1e3*E+ee)+dA,ve=hA("sqrtTall",Ne,ut,ee,R),ve.style.minWidth="0.742em",It=1.056),ve.height=qe,ve.style.height=Q(Ne),{span:ve,advanceWidth:It,ruleWidth:(R.fontMetrics().sqrtRuleThickness+ee)*G}},U8=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],yre=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],H8=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Sy=[0,1.2,1.8,2.4,3],bre=function(E,R,P,N,G){if(E==="<"||E==="\\lt"||E==="⟨"?E="\\langle":(E===">"||E==="\\gt"||E==="⟩")&&(E="\\rangle"),g.contains(U8,E)||g.contains(H8,E))return F8(E,R,!1,P,N,G);if(g.contains(yre,E))return z8(E,Sy[R],!1,P,N,G);throw new s("Illegal delimiter: '"+E+"'")},_re=[{type:"small",style:F.SCRIPTSCRIPT},{type:"small",style:F.SCRIPT},{type:"small",style:F.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Sre=[{type:"small",style:F.SCRIPTSCRIPT},{type:"small",style:F.SCRIPT},{type:"small",style:F.TEXT},{type:"stack"}],V8=[{type:"small",style:F.SCRIPTSCRIPT},{type:"small",style:F.SCRIPT},{type:"small",style:F.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],xre=function(E){if(E.type==="small")return"Main-Regular";if(E.type==="large")return"Size"+E.size+"-Regular";if(E.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+E.type+"' here.")},$8=function(E,R,P,N){for(var G=Math.min(2,3-N.style.size),ee=G;ee<P.length&&P[ee].type!=="stack";ee++){var ve=_y(E,xre(P[ee]),"math"),Ne=ve.height+ve.depth;if(P[ee].type==="small"){var qe=N.havingBaseStyle(P[ee].style);Ne*=qe.sizeMultiplier}if(Ne>R)return P[ee]}return P[P.length-1]},G8=function(E,R,P,N,G,ee){E==="<"||E==="\\lt"||E==="⟨"?E="\\langle":(E===">"||E==="\\gt"||E==="⟩")&&(E="\\rangle");var ve;g.contains(H8,E)?ve=_re:g.contains(U8,E)?ve=V8:ve=Sre;var Ne=$8(E,R,ve,N);return Ne.type==="small"?hre(E,Ne.style,P,N,G,ee):Ne.type==="large"?F8(E,Ne.size,P,N,G,ee):z8(E,R,P,N,G,ee)},wre=function(E,R,P,N,G,ee){var ve=N.fontMetrics().axisHeight*N.sizeMultiplier,Ne=901,qe=5/N.fontMetrics().ptPerEm,ut=Math.max(R-ve,P+ve),It=Math.max(ut/500*Ne,2*ut-qe);return G8(E,It,!0,N,G,ee)},Cu={sqrtImage:gre,sizedDelim:bre,sizeToMaxHeight:Sy,customSizedDelim:G8,leftRightDelim:wre},W8={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Cre=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function _S(re,E){var R=gS(re);if(R&&g.contains(Cre,R.text))return R;throw R?new s("Invalid delimiter '"+R.text+"' after '"+E.funcName+"'",re):new s("Invalid delimiter type '"+re.type+"'",re)}sn({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:function(E,R){var P=_S(R[0],E);return{type:"delimsizing",mode:E.parser.mode,size:W8[E.funcName].size,mclass:W8[E.funcName].mclass,delim:P.text}},htmlBuilder:function(E,R){return E.delim==="."?lt.makeSpan([E.mclass]):Cu.sizedDelim(E.delim,E.size,R,E.mode,[E.mclass])},mathmlBuilder:function(E){var R=[];E.delim!=="."&&R.push(nl(E.delim,E.mode));var P=new cn.MathNode("mo",R);E.mclass==="mopen"||E.mclass==="mclose"?P.setAttribute("fence","true"):P.setAttribute("fence","false"),P.setAttribute("stretchy","true");var N=Q(Cu.sizeToMaxHeight[E.size]);return P.setAttribute("minsize",N),P.setAttribute("maxsize",N),P}});function q8(re){if(!re.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}sn({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:function(E,R){var P=E.parser.gullet.macros.get("\\current@color");if(P&&typeof P!="string")throw new s("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:E.parser.mode,delim:_S(R[0],E).text,color:P}}}),sn({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:function(E,R){var P=_S(R[0],E),N=E.parser;++N.leftrightDepth;var G=N.parseExpression(!1);--N.leftrightDepth,N.expect("\\right",!1);var ee=wr(N.parseFunction(),"leftright-right");return{type:"leftright",mode:N.mode,body:G,left:P.text,right:ee.delim,rightColor:ee.color}},htmlBuilder:function(E,R){q8(E);for(var P=Ys(E.body,R,!0,["mopen","mclose"]),N=0,G=0,ee=!1,ve=0;ve<P.length;ve++)P[ve].isMiddle?ee=!0:(N=Math.max(P[ve].height,N),G=Math.max(P[ve].depth,G));N*=R.sizeMultiplier,G*=R.sizeMultiplier;var Ne;if(E.left==="."?Ne=yy(R,["mopen"]):Ne=Cu.leftRightDelim(E.left,N,G,R,E.mode,["mopen"]),P.unshift(Ne),ee)for(var qe=1;qe<P.length;qe++){var ut=P[qe],It=ut.isMiddle;It&&(P[qe]=Cu.leftRightDelim(It.delim,N,G,It.options,E.mode,[]))}var Gt;if(E.right===".")Gt=yy(R,["mclose"]);else{var Zt=E.rightColor?R.withColor(E.rightColor):R;Gt=Cu.leftRightDelim(E.right,N,G,Zt,E.mode,["mclose"])}return P.push(Gt),lt.makeSpan(["minner"],P,R)},mathmlBuilder:function(E,R){q8(E);var P=Io(E.body,R);if(E.left!=="."){var N=new cn.MathNode("mo",[nl(E.left,E.mode)]);N.setAttribute("fence","true"),P.unshift(N)}if(E.right!=="."){var G=new cn.MathNode("mo",[nl(E.right,E.mode)]);G.setAttribute("fence","true"),E.rightColor&&G.setAttribute("mathcolor",E.rightColor),P.push(G)}return nA(P)}}),sn({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:function(E,R){var P=_S(R[0],E);if(!E.parser.leftrightDepth)throw new s("\\middle without preceding \\left",P);return{type:"middle",mode:E.parser.mode,delim:P.text}},htmlBuilder:function(E,R){var P;if(E.delim===".")P=yy(R,[]);else{P=Cu.sizedDelim(E.delim,1,R,E.mode,[]);var N={delim:E.delim,options:R};P.isMiddle=N}return P},mathmlBuilder:function(E,R){var P=E.delim==="\\vert"||E.delim==="|"?nl("|","text"):nl(E.delim,E.mode),N=new cn.MathNode("mo",[P]);return N.setAttribute("fence","true"),N.setAttribute("lspace","0.05em"),N.setAttribute("rspace","0.05em"),N}});var pA=function(E,R){var P=lt.wrapFragment(Qr(E.body,R),R),N=E.label.substr(1),G=R.sizeMultiplier,ee,ve=0,Ne=g.isCharacterBox(E.body);if(N==="sout")ee=lt.makeSpan(["stretchy","sout"]),ee.height=R.fontMetrics().defaultRuleThickness/G,ve=-.5*R.fontMetrics().xHeight;else if(N==="phase"){var qe=Ke({number:.6,unit:"pt"},R),ut=Ke({number:.35,unit:"ex"},R),It=R.havingBaseSizing();G=G/It.sizeMultiplier;var Gt=P.height+P.depth+qe+ut;P.style.paddingLeft=Q(Gt/2+qe);var Zt=Math.floor(1e3*Gt*G),Qt=Ge(Zt),gn=new yt([new Ht("phase",Qt)],{width:"400em",height:Q(Zt/1e3),viewBox:"0 0 400000 "+Zt,preserveAspectRatio:"xMinYMin slice"});ee=lt.makeSvgSpan(["hide-tail"],[gn],R),ee.style.height=Q(Gt),ve=P.depth+qe+ut}else{/cancel/.test(N)?Ne||P.classes.push("cancel-pad"):N==="angl"?P.classes.push("anglpad"):P.classes.push("boxpad");var _n=0,Gn=0,Zn=0;/box/.test(N)?(Zn=Math.max(R.fontMetrics().fboxrule,R.minRuleThickness),_n=R.fontMetrics().fboxsep+(N==="colorbox"?0:Zn),Gn=_n):N==="angl"?(Zn=Math.max(R.fontMetrics().defaultRuleThickness,R.minRuleThickness),_n=4*Zn,Gn=Math.max(0,.25-P.depth)):(_n=Ne?.2:0,Gn=_n),ee=wu.encloseSpan(P,N,_n,Gn,R),/fbox|boxed|fcolorbox/.test(N)?(ee.style.borderStyle="solid",ee.style.borderWidth=Q(Zn)):N==="angl"&&Zn!==.049&&(ee.style.borderTopWidth=Q(Zn),ee.style.borderRightWidth=Q(Zn)),ve=P.depth+Gn,E.backgroundColor&&(ee.style.backgroundColor=E.backgroundColor,E.borderColor&&(ee.style.borderColor=E.borderColor))}var ir;if(E.backgroundColor)ir=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:ve},{type:"elem",elem:P,shift:0}]},R);else{var Jr=/cancel|phase/.test(N)?["svg-align"]:[];ir=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:0},{type:"elem",elem:ee,shift:ve,wrapperClasses:Jr}]},R)}return/cancel/.test(N)&&(ir.height=P.height,ir.depth=P.depth),/cancel/.test(N)&&!Ne?lt.makeSpan(["mord","cancel-lap"],[ir],R):lt.makeSpan(["mord"],[ir],R)},mA=function(E,R){var P=0,N=new cn.MathNode(E.label.indexOf("colorbox")>-1?"mpadded":"menclose",[_i(E.body,R)]);switch(E.label){case"\\cancel":N.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":N.setAttribute("notation","downdiagonalstrike");break;case"\\phase":N.setAttribute("notation","phasorangle");break;case"\\sout":N.setAttribute("notation","horizontalstrike");break;case"\\fbox":N.setAttribute("notation","box");break;case"\\angl":N.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(P=R.fontMetrics().fboxsep*R.fontMetrics().ptPerEm,N.setAttribute("width","+"+2*P+"pt"),N.setAttribute("height","+"+2*P+"pt"),N.setAttribute("lspace",P+"pt"),N.setAttribute("voffset",P+"pt"),E.label==="\\fcolorbox"){var G=Math.max(R.fontMetrics().fboxrule,R.minRuleThickness);N.setAttribute("style","border: "+G+"em solid "+String(E.borderColor))}break;case"\\xcancel":N.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return E.backgroundColor&&N.setAttribute("mathbackground",E.backgroundColor),N};sn({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler:function(E,R,P){var N=E.parser,G=E.funcName,ee=wr(R[0],"color-token").color,ve=R[1];return{type:"enclose",mode:N.mode,label:G,backgroundColor:ee,body:ve}},htmlBuilder:pA,mathmlBuilder:mA}),sn({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler:function(E,R,P){var N=E.parser,G=E.funcName,ee=wr(R[0],"color-token").color,ve=wr(R[1],"color-token").color,Ne=R[2];return{type:"enclose",mode:N.mode,label:G,backgroundColor:ve,borderColor:ee,body:Ne}},htmlBuilder:pA,mathmlBuilder:mA}),sn({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(E,R){var P=E.parser;return{type:"enclose",mode:P.mode,label:"\\fbox",body:R[0]}}}),sn({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];return{type:"enclose",mode:P.mode,label:N,body:G}},htmlBuilder:pA,mathmlBuilder:mA}),sn({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler:function(E,R){var P=E.parser;return{type:"enclose",mode:P.mode,label:"\\angl",body:R[0]}}});var K8={};function Tc(re){for(var E=re.type,R=re.names,P=re.props,N=re.handler,G=re.htmlBuilder,ee=re.mathmlBuilder,ve={type:E,numArgs:P.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:N},Ne=0;Ne<R.length;++Ne)K8[R[Ne]]=ve;G&&(Xn[E]=G),ee&&(vi[E]=ee)}function Y8(re){var E=[];re.consumeSpaces();for(var R=re.fetch().text;R==="\\hline"||R==="\\hdashline";)re.consume(),E.push(R==="\\hdashline"),re.consumeSpaces(),R=re.fetch().text;return E}var SS=function(E){var R=E.parser.settings;if(!R.displayMode)throw new s("{"+E.envName+"} can be used only in display mode.")};function Vd(re,E,R){var P=E.hskipBeforeAndAfter,N=E.addJot,G=E.cols,ee=E.arraystretch,ve=E.colSeparationType,Ne=E.addEqnNum,qe=E.singleRow,ut=E.emptySingleRow,It=E.maxNumCols,Gt=E.leqno;if(re.gullet.beginGroup(),qe||re.gullet.macros.set("\\cr","\\\\\\relax"),!ee){var Zt=re.gullet.expandMacroAsText("\\arraystretch");if(Zt==null)ee=1;else if(ee=parseFloat(Zt),!ee||ee<0)throw new s("Invalid \\arraystretch: "+Zt)}re.gullet.beginGroup();var Qt=[],gn=[Qt],_n=[],Gn=[];for(Gn.push(Y8(re));;){var Zn=re.parseExpression(!1,qe?"\\end":"\\\\");re.gullet.endGroup(),re.gullet.beginGroup(),Zn={type:"ordgroup",mode:re.mode,body:Zn},R&&(Zn={type:"styling",mode:re.mode,style:R,body:[Zn]}),Qt.push(Zn);var ir=re.fetch().text;if(ir==="&"){if(It&&Qt.length===It){if(qe||ve)throw new s("Too many tab characters: &",re.nextToken);re.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}re.consume()}else if(ir==="\\end"){Qt.length===1&&Zn.type==="styling"&&Zn.body[0].body.length===0&&(gn.length>1||!ut)&&gn.pop(),Gn.length<gn.length+1&&Gn.push([]);break}else if(ir==="\\\\"){re.consume();var Jr=void 0;re.gullet.future().text!==" "&&(Jr=re.parseSizeGroup(!0)),_n.push(Jr?Jr.value:null),Gn.push(Y8(re)),Qt=[],gn.push(Qt)}else throw new s("Expected & or \\\\ or \\cr or \\end",re.nextToken)}return re.gullet.endGroup(),re.gullet.endGroup(),{type:"array",mode:re.mode,addJot:N,arraystretch:ee,body:gn,cols:G,rowGaps:_n,hskipBeforeAndAfter:P,hLinesBeforeRow:Gn,colSeparationType:ve,addEqnNum:Ne,leqno:Gt}}function vA(re){return re.substr(0,1)==="d"?"display":"text"}var Ac=function(E,R){var P,N,G=E.body.length,ee=E.hLinesBeforeRow,ve=0,Ne=new Array(G),qe=[],ut=Math.max(R.fontMetrics().arrayRuleWidth,R.minRuleThickness),It=1/R.fontMetrics().ptPerEm,Gt=5*It;if(E.colSeparationType&&E.colSeparationType==="small"){var Zt=R.havingStyle(F.SCRIPT).sizeMultiplier;Gt=.2778*(Zt/R.sizeMultiplier)}var Qt=E.colSeparationType==="CD"?Ke({number:3,unit:"ex"},R):12*It,gn=3*It,_n=E.arraystretch*Qt,Gn=.7*_n,Zn=.3*_n,ir=0;function Jr(OO){for(var CS=0;CS<OO.length;++CS)CS>0&&(ir+=.25),qe.push({pos:ir,isDashed:OO[CS]})}for(Jr(ee[0]),P=0;P<E.body.length;++P){var ci=E.body[P],Bi=Gn,ii=Zn;ve<ci.length&&(ve=ci.length);var ui=new Array(ci.length);for(N=0;N<ci.length;++N){var ls=Qr(ci[N],R);ii<ls.depth&&(ii=ls.depth),Bi<ls.height&&(Bi=ls.height),ui[N]=ls}var Ci=E.rowGaps[P],Ro=0;Ci&&(Ro=Ke(Ci,R),Ro>0&&(Ro+=Zn,ii<Ro&&(ii=Ro),Ro=0)),E.addJot&&(ii+=gn),ui.height=Bi,ui.depth=ii,ir+=Bi,ui.pos=ir,ir+=ii+Ro,Ne[P]=ui,Jr(ee[P+1])}var Po=ir/2+R.fontMetrics().axisHeight,Gd=E.cols||[],Ic=[],Do,I0,RO=[];if(E.addEqnNum)for(P=0;P<G;++P){var IA=Ne[P],Qre=IA.pos-Po,RA=lt.makeSpan(["eqn-num"],[],R);RA.depth=IA.depth,RA.height=IA.height,RO.push({type:"elem",elem:RA,shift:Qre})}for(N=0,I0=0;N<ve||I0<Gd.length;++N,++I0){for(var Mu=Gd[I0]||{},PO=!0;Mu.type==="separator";){if(PO||(Do=lt.makeSpan(["arraycolsep"],[]),Do.style.width=Q(R.fontMetrics().doubleRuleSep),Ic.push(Do)),Mu.separator==="|"||Mu.separator===":"){var Jre=Mu.separator==="|"?"solid":"dashed",R0=lt.makeSpan(["vertical-separator"],[],R);R0.style.height=Q(ir),R0.style.borderRightWidth=Q(ut),R0.style.borderRightStyle=Jre,R0.style.margin="0 "+Q(-ut/2);var DO=ir-Po;DO&&(R0.style.verticalAlign=Q(-DO)),Ic.push(R0)}else throw new s("Invalid separator type: "+Mu.separator);I0++,Mu=Gd[I0]||{},PO=!1}if(!(N>=ve)){var P0=void 0;(N>0||E.hskipBeforeAndAfter)&&(P0=g.deflt(Mu.pregap,Gt),P0!==0&&(Do=lt.makeSpan(["arraycolsep"],[]),Do.style.width=Q(P0),Ic.push(Do)));var D0=[];for(P=0;P<G;++P){var xS=Ne[P],wS=xS[N];if(wS){var eie=xS.pos-Po;wS.depth=xS.depth,wS.height=xS.height,D0.push({type:"elem",elem:wS,shift:eie})}}D0=lt.makeVList({positionType:"individualShift",children:D0},R),D0=lt.makeSpan(["col-align-"+(Mu.align||"c")],[D0]),Ic.push(D0),(N<ve-1||E.hskipBeforeAndAfter)&&(P0=g.deflt(Mu.postgap,Gt),P0!==0&&(Do=lt.makeSpan(["arraycolsep"],[]),Do.style.width=Q(P0),Ic.push(Do)))}}if(Ne=lt.makeSpan(["mtable"],Ic),qe.length>0){for(var tie=lt.makeLineSpan("hline",R,ut),nie=lt.makeLineSpan("hdashline",R,ut),PA=[{type:"elem",elem:Ne,shift:0}];qe.length>0;){var LO=qe.pop(),kO=LO.pos-Po;LO.isDashed?PA.push({type:"elem",elem:nie,shift:kO}):PA.push({type:"elem",elem:tie,shift:kO})}Ne=lt.makeVList({positionType:"individualShift",children:PA},R)}if(E.addEqnNum){var DA=lt.makeVList({positionType:"individualShift",children:RO},R);return DA=lt.makeSpan(["tag"],[DA],R),lt.makeFragment([Ne,DA])}else return lt.makeSpan(["mord"],[Ne],R)},Mre={c:"center ",l:"left ",r:"right "},Ec=function(E,R){for(var P=[],N=new cn.MathNode("mtd",[],["mtr-glue"]),G=new cn.MathNode("mtd",[],["mml-eqn-num"]),ee=0;ee<E.body.length;ee++){for(var ve=E.body[ee],Ne=[],qe=0;qe<ve.length;qe++)Ne.push(new cn.MathNode("mtd",[_i(ve[qe],R)]));E.addEqnNum&&(Ne.unshift(N),Ne.push(N),E.leqno?Ne.unshift(G):Ne.push(G)),P.push(new cn.MathNode("mtr",Ne))}var ut=new cn.MathNode("mtable",P),It=E.arraystretch===.5?.1:.16+E.arraystretch-1+(E.addJot?.09:0);ut.setAttribute("rowspacing",Q(It));var Gt="",Zt="";if(E.cols&&E.cols.length>0){var Qt=E.cols,gn="",_n=!1,Gn=0,Zn=Qt.length;Qt[0].type==="separator"&&(Gt+="top ",Gn=1),Qt[Qt.length-1].type==="separator"&&(Gt+="bottom ",Zn-=1);for(var ir=Gn;ir<Zn;ir++)Qt[ir].type==="align"?(Zt+=Mre[Qt[ir].align],_n&&(gn+="none "),_n=!0):Qt[ir].type==="separator"&&_n&&(gn+=Qt[ir].separator==="|"?"solid ":"dashed ",_n=!1);ut.setAttribute("columnalign",Zt.trim()),/[sd]/.test(gn)&&ut.setAttribute("columnlines",gn.trim())}if(E.colSeparationType==="align"){for(var Jr=E.cols||[],ci="",Bi=1;Bi<Jr.length;Bi++)ci+=Bi%2?"0em ":"1em ";ut.setAttribute("columnspacing",ci.trim())}else E.colSeparationType==="alignat"||E.colSeparationType==="gather"?ut.setAttribute("columnspacing","0em"):E.colSeparationType==="small"?ut.setAttribute("columnspacing","0.2778em"):E.colSeparationType==="CD"?ut.setAttribute("columnspacing","0.5em"):ut.setAttribute("columnspacing","1em");var ii="",ui=E.hLinesBeforeRow;Gt+=ui[0].length>0?"left ":"",Gt+=ui[ui.length-1].length>0?"right ":"";for(var ls=1;ls<ui.length-1;ls++)ii+=ui[ls].length===0?"none ":ui[ls][0]?"dashed ":"solid ";return/[sd]/.test(ii)&&ut.setAttribute("rowlines",ii.trim()),Gt!==""&&(ut=new cn.MathNode("menclose",[ut]),ut.setAttribute("notation",Gt.trim())),E.arraystretch&&E.arraystretch<1&&(ut=new cn.MathNode("mstyle",[ut]),ut.setAttribute("scriptlevel","1")),ut},X8=function(E,R){E.envName.indexOf("ed")===-1&&SS(E);var P=[],N=E.envName.indexOf("at")>-1?"alignat":"align",G=Vd(E.parser,{cols:P,addJot:!0,addEqnNum:E.envName==="align"||E.envName==="alignat",emptySingleRow:!0,colSeparationType:N,maxNumCols:E.envName==="split"?2:void 0,leqno:E.parser.settings.leqno},"display"),ee,ve=0,Ne={type:"ordgroup",mode:E.mode,body:[]};if(R[0]&&R[0].type==="ordgroup"){for(var qe="",ut=0;ut<R[0].body.length;ut++){var It=wr(R[0].body[ut],"textord");qe+=It.text}ee=Number(qe),ve=ee*2}var Gt=!ve;G.body.forEach(function(_n){for(var Gn=1;Gn<_n.length;Gn+=2){var Zn=wr(_n[Gn],"styling"),ir=wr(Zn.body[0],"ordgroup");ir.body.unshift(Ne)}if(Gt)ve<_n.length&&(ve=_n.length);else{var Jr=_n.length/2;if(ee<Jr)throw new s("Too many math in a row: "+("expected "+ee+", but got "+Jr),_n[0])}});for(var Zt=0;Zt<ve;++Zt){var Qt="r",gn=0;Zt%2===1?Qt="l":Zt>0&&Gt&&(gn=1),P[Zt]={type:"align",align:Qt,pregap:gn,postgap:0}}return G.colSeparationType=Gt?"align":"alignat",G};Tc({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(E,R){var P=gS(R[0]),N=P?[R[0]]:wr(R[0],"ordgroup").body,G=N.map(function(ve){var Ne=iA(ve),qe=Ne.text;if("lcr".indexOf(qe)!==-1)return{type:"align",align:qe};if(qe==="|")return{type:"separator",separator:"|"};if(qe===":")return{type:"separator",separator:":"};throw new s("Unknown column alignment: "+qe,ve)}),ee={cols:G,hskipBeforeAndAfter:!0,maxNumCols:G.length};return Vd(E.parser,ee,vA(E.envName))},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler:function(E){var R={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[E.envName.replace("*","")],P="c",N={hskipBeforeAndAfter:!1,cols:[{type:"align",align:P}]};if(E.envName.charAt(E.envName.length-1)==="*"){var G=E.parser;if(G.consumeSpaces(),G.fetch().text==="["){if(G.consume(),G.consumeSpaces(),P=G.fetch().text,"lcr".indexOf(P)===-1)throw new s("Expected l or c or r",G.nextToken);G.consume(),G.consumeSpaces(),G.expect("]"),G.consume(),N.cols=[{type:"align",align:P}]}}var ee=Vd(E.parser,N,vA(E.envName)),ve=Math.max.apply(Math,[0].concat(ee.body.map(function(Ne){return Ne.length})));return ee.cols=new Array(ve).fill({type:"align",align:P}),R?{type:"leftright",mode:E.mode,body:[ee],left:R[0],right:R[1],rightColor:void 0}:ee},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(E){var R={arraystretch:.5},P=Vd(E.parser,R,"script");return P.colSeparationType="small",P},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["subarray"],props:{numArgs:1},handler:function(E,R){var P=gS(R[0]),N=P?[R[0]]:wr(R[0],"ordgroup").body,G=N.map(function(ve){var Ne=iA(ve),qe=Ne.text;if("lc".indexOf(qe)!==-1)return{type:"align",align:qe};throw new s("Unknown column alignment: "+qe,ve)});if(G.length>1)throw new s("{subarray} can contain only one column");var ee={cols:G,hskipBeforeAndAfter:!1,arraystretch:.5};if(ee=Vd(E.parser,ee,"script"),ee.body.length>0&&ee.body[0].length>1)throw new s("{subarray} can contain only one column");return ee},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(E){var R={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},P=Vd(E.parser,R,vA(E.envName));return{type:"leftright",mode:E.mode,body:[P],left:E.envName.indexOf("r")>-1?".":"\\{",right:E.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:X8,htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler:function(E){g.contains(["gather","gather*"],E.envName)&&SS(E);var R={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",addEqnNum:E.envName==="gather",emptySingleRow:!0,leqno:E.parser.settings.leqno};return Vd(E.parser,R,"display")},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:X8,htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["equation","equation*"],props:{numArgs:0},handler:function(E){SS(E);var R={addEqnNum:E.envName==="equation",emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:E.parser.settings.leqno};return Vd(E.parser,R,"display")},htmlBuilder:Ac,mathmlBuilder:Ec}),Tc({type:"array",names:["CD"],props:{numArgs:0},handler:function(E){return SS(E),dre(E.parser)},htmlBuilder:Ac,mathmlBuilder:Ec}),sn({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(E,R){throw new s(E.funcName+" valid only within array environment")}});var Tre=K8,j8=Tre;sn({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];if(G.type!=="ordgroup")throw new s("Invalid environment name",G);for(var ee="",ve=0;ve<G.body.length;++ve)ee+=wr(G.body[ve],"textord").text;if(N==="\\begin"){if(!j8.hasOwnProperty(ee))throw new s("No such environment: "+ee,G);var Ne=j8[ee],qe=P.parseArguments("\\begin{"+ee+"}",Ne),ut=qe.args,It=qe.optArgs,Gt={mode:P.mode,envName:ee,parser:P},Zt=Ne.handler(Gt,ut,It);P.expect("\\end",!1);var Qt=P.nextToken,gn=wr(P.parseFunction(),"environment");if(gn.name!==ee)throw new s("Mismatch: \\begin{"+ee+"} matched by \\end{"+gn.name+"}",Qt);return Zt}return{type:"environment",mode:P.mode,name:ee,nameGroup:G}}});var Are=lt.makeSpan;function Z8(re,E){var R=Ys(re.body,E,!0);return Are([re.mclass],R,E)}function Q8(re,E){var R,P=Io(re.body,E);return re.mclass==="minner"?cn.newDocumentFragment(P):(re.mclass==="mord"?re.isCharacterBox?(R=P[0],R.type="mi"):R=new cn.MathNode("mi",P):(re.isCharacterBox?(R=P[0],R.type="mo"):R=new cn.MathNode("mo",P),re.mclass==="mbin"?(R.attributes.lspace="0.22em",R.attributes.rspace="0.22em"):re.mclass==="mpunct"?(R.attributes.lspace="0em",R.attributes.rspace="0.17em"):(re.mclass==="mopen"||re.mclass==="mclose")&&(R.attributes.lspace="0em",R.attributes.rspace="0em")),R)}sn({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];return{type:"mclass",mode:P.mode,mclass:"m"+N.substr(5),body:ri(G),isCharacterBox:g.isCharacterBox(G)}},htmlBuilder:Z8,mathmlBuilder:Q8});var gA=function(E){var R=E.type==="ordgroup"&&E.body.length?E.body[0]:E;return R.type==="atom"&&(R.family==="bin"||R.family==="rel")?"m"+R.family:"mord"};sn({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(E,R){var P=E.parser;return{type:"mclass",mode:P.mode,mclass:gA(R[0]),body:ri(R[1]),isCharacterBox:g.isCharacterBox(R[1])}}}),sn({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[1],ee=R[0],ve;N!=="\\stackrel"?ve=gA(G):ve="mrel";var Ne={type:"op",mode:G.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:N!=="\\stackrel",body:ri(G)},qe={type:"supsub",mode:ee.mode,base:Ne,sup:N==="\\underset"?null:ee,sub:N==="\\underset"?ee:null};return{type:"mclass",mode:P.mode,mclass:ve,body:[qe],isCharacterBox:g.isCharacterBox(qe)}},htmlBuilder:Z8,mathmlBuilder:Q8});var J8=function(E,R){var P=E.font,N=R.withFont(P);return Qr(E.body,N)},eO=function(E,R){var P=E.font,N=R.withFont(P);return _i(E.body,N)},tO={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};sn({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=Nr(R[0]),ee=N;return ee in tO&&(ee=tO[ee]),{type:"font",mode:P.mode,font:ee.slice(1),body:G}},htmlBuilder:J8,mathmlBuilder:eO}),sn({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=R[0],G=g.isCharacterBox(N);return{type:"mclass",mode:P.mode,mclass:gA(N),body:[{type:"font",mode:P.mode,font:"boldsymbol",body:N}],isCharacterBox:G}}}),sn({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=E.breakOnTokenText,ee=P.mode,ve=P.parseExpression(!0,G),Ne="math"+N.slice(1);return{type:"font",mode:ee,font:Ne,body:{type:"ordgroup",mode:P.mode,body:ve}}},htmlBuilder:J8,mathmlBuilder:eO});var nO=function(E,R){var P=R;return E==="display"?P=P.id>=F.SCRIPT.id?P.text():F.DISPLAY:E==="text"&&P.size===F.DISPLAY.size?P=F.TEXT:E==="script"?P=F.SCRIPT:E==="scriptscript"&&(P=F.SCRIPTSCRIPT),P},yA=function(E,R){var P=nO(E.size,R.style),N=P.fracNum(),G=P.fracDen(),ee;ee=R.havingStyle(N);var ve=Qr(E.numer,ee,R);if(E.continued){var Ne=8.5/R.fontMetrics().ptPerEm,qe=3.5/R.fontMetrics().ptPerEm;ve.height=ve.height<Ne?Ne:ve.height,ve.depth=ve.depth<qe?qe:ve.depth}ee=R.havingStyle(G);var ut=Qr(E.denom,ee,R),It,Gt,Zt;E.hasBarLine?(E.barSize?(Gt=Ke(E.barSize,R),It=lt.makeLineSpan("frac-line",R,Gt)):It=lt.makeLineSpan("frac-line",R),Gt=It.height,Zt=It.height):(It=null,Gt=0,Zt=R.fontMetrics().defaultRuleThickness);var Qt,gn,_n;P.size===F.DISPLAY.size||E.size==="display"?(Qt=R.fontMetrics().num1,Gt>0?gn=3*Zt:gn=7*Zt,_n=R.fontMetrics().denom1):(Gt>0?(Qt=R.fontMetrics().num2,gn=Zt):(Qt=R.fontMetrics().num3,gn=3*Zt),_n=R.fontMetrics().denom2);var Gn;if(It){var ir=R.fontMetrics().axisHeight;Qt-ve.depth-(ir+.5*Gt)<gn&&(Qt+=gn-(Qt-ve.depth-(ir+.5*Gt))),ir-.5*Gt-(ut.height-_n)<gn&&(_n+=gn-(ir-.5*Gt-(ut.height-_n)));var Jr=-(ir-.5*Gt);Gn=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ut,shift:_n},{type:"elem",elem:It,shift:Jr},{type:"elem",elem:ve,shift:-Qt}]},R)}else{var Zn=Qt-ve.depth-(ut.height-_n);Zn<gn&&(Qt+=.5*(gn-Zn),_n+=.5*(gn-Zn)),Gn=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ut,shift:_n},{type:"elem",elem:ve,shift:-Qt}]},R)}ee=R.havingStyle(P),Gn.height*=ee.sizeMultiplier/R.sizeMultiplier,Gn.depth*=ee.sizeMultiplier/R.sizeMultiplier;var ci;P.size===F.DISPLAY.size?ci=R.fontMetrics().delim1:P.size===F.SCRIPTSCRIPT.size?ci=R.havingStyle(F.SCRIPT).fontMetrics().delim2:ci=R.fontMetrics().delim2;var Bi,ii;return E.leftDelim==null?Bi=yy(R,["mopen"]):Bi=Cu.customSizedDelim(E.leftDelim,ci,!0,R.havingStyle(P),E.mode,["mopen"]),E.continued?ii=lt.makeSpan([]):E.rightDelim==null?ii=yy(R,["mclose"]):ii=Cu.customSizedDelim(E.rightDelim,ci,!0,R.havingStyle(P),E.mode,["mclose"]),lt.makeSpan(["mord"].concat(ee.sizingClasses(R)),[Bi,lt.makeSpan(["mfrac"],[Gn]),ii],R)},bA=function(E,R){var P=new cn.MathNode("mfrac",[_i(E.numer,R),_i(E.denom,R)]);if(!E.hasBarLine)P.setAttribute("linethickness","0px");else if(E.barSize){var N=Ke(E.barSize,R);P.setAttribute("linethickness",Q(N))}var G=nO(E.size,R.style);if(G.size!==R.style.size){P=new cn.MathNode("mstyle",[P]);var ee=G.size===F.DISPLAY.size?"true":"false";P.setAttribute("displaystyle",ee),P.setAttribute("scriptlevel","0")}if(E.leftDelim!=null||E.rightDelim!=null){var ve=[];if(E.leftDelim!=null){var Ne=new cn.MathNode("mo",[new cn.TextNode(E.leftDelim.replace("\\",""))]);Ne.setAttribute("fence","true"),ve.push(Ne)}if(ve.push(P),E.rightDelim!=null){var qe=new cn.MathNode("mo",[new cn.TextNode(E.rightDelim.replace("\\",""))]);qe.setAttribute("fence","true"),ve.push(qe)}return nA(ve)}return P};sn({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0],ee=R[1],ve,Ne=null,qe=null,ut="auto";switch(N){case"\\dfrac":case"\\frac":case"\\tfrac":ve=!0;break;case"\\\\atopfrac":ve=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":ve=!1,Ne="(",qe=")";break;case"\\\\bracefrac":ve=!1,Ne="\\{",qe="\\}";break;case"\\\\brackfrac":ve=!1,Ne="[",qe="]";break;default:throw new Error("Unrecognized genfrac command")}switch(N){case"\\dfrac":case"\\dbinom":ut="display";break;case"\\tfrac":case"\\tbinom":ut="text";break}return{type:"genfrac",mode:P.mode,continued:!1,numer:G,denom:ee,hasBarLine:ve,leftDelim:Ne,rightDelim:qe,size:ut,barSize:null}},htmlBuilder:yA,mathmlBuilder:bA}),sn({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:function(E,R){var P=E.parser;E.funcName;var N=R[0],G=R[1];return{type:"genfrac",mode:P.mode,continued:!0,numer:N,denom:G,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),sn({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(E){var R=E.parser,P=E.funcName,N=E.token,G;switch(P){case"\\over":G="\\frac";break;case"\\choose":G="\\binom";break;case"\\atop":G="\\\\atopfrac";break;case"\\brace":G="\\\\bracefrac";break;case"\\brack":G="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:R.mode,replaceWith:G,token:N}}});var rO=["display","text","script","scriptscript"],iO=function(E){var R=null;return E.length>0&&(R=E,R=R==="."?null:R),R};sn({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler:function(E,R){var P=E.parser,N=R[4],G=R[5],ee=Nr(R[0]),ve=ee.type==="atom"&&ee.family==="open"?iO(ee.text):null,Ne=Nr(R[1]),qe=Ne.type==="atom"&&Ne.family==="close"?iO(Ne.text):null,ut=wr(R[2],"size"),It,Gt=null;ut.isBlank?It=!0:(Gt=ut.value,It=Gt.number>0);var Zt="auto",Qt=R[3];if(Qt.type==="ordgroup"){if(Qt.body.length>0){var gn=wr(Qt.body[0],"textord");Zt=rO[Number(gn.text)]}}else Qt=wr(Qt,"textord"),Zt=rO[Number(Qt.text)];return{type:"genfrac",mode:P.mode,numer:N,denom:G,continued:!1,hasBarLine:It,barSize:Gt,leftDelim:ve,rightDelim:qe,size:Zt}},htmlBuilder:yA,mathmlBuilder:bA}),sn({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(E,R){var P=E.parser;E.funcName;var N=E.token;return{type:"infix",mode:P.mode,replaceWith:"\\\\abovefrac",size:wr(R[0],"size").value,token:N}}}),sn({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(E,R){var P=E.parser;E.funcName;var N=R[0],G=m(wr(R[1],"infix").size),ee=R[2],ve=G.number>0;return{type:"genfrac",mode:P.mode,numer:N,denom:ee,continued:!1,hasBarLine:ve,barSize:G,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:yA,mathmlBuilder:bA});var sO=function(E,R){var P=R.style,N,G;E.type==="supsub"?(N=E.sup?Qr(E.sup,R.havingStyle(P.sup()),R):Qr(E.sub,R.havingStyle(P.sub()),R),G=wr(E.base,"horizBrace")):G=wr(E,"horizBrace");var ee=Qr(G.base,R.havingBaseStyle(F.DISPLAY)),ve=wu.svgSpan(G,R),Ne;if(G.isOver?(Ne=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ee},{type:"kern",size:.1},{type:"elem",elem:ve}]},R),Ne.children[0].children[0].children[1].classes.push("svg-align")):(Ne=lt.makeVList({positionType:"bottom",positionData:ee.depth+.1+ve.height,children:[{type:"elem",elem:ve},{type:"kern",size:.1},{type:"elem",elem:ee}]},R),Ne.children[0].children[0].children[0].classes.push("svg-align")),N){var qe=lt.makeSpan(["mord",G.isOver?"mover":"munder"],[Ne],R);G.isOver?Ne=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:qe},{type:"kern",size:.2},{type:"elem",elem:N}]},R):Ne=lt.makeVList({positionType:"bottom",positionData:qe.depth+.2+N.height+N.depth,children:[{type:"elem",elem:N},{type:"kern",size:.2},{type:"elem",elem:qe}]},R)}return lt.makeSpan(["mord",G.isOver?"mover":"munder"],[Ne],R)},Ere=function(E,R){var P=wu.mathMLnode(E.label);return new cn.MathNode(E.isOver?"mover":"munder",[_i(E.base,R),P])};sn({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=E.funcName;return{type:"horizBrace",mode:P.mode,label:N,isOver:/^\\over/.test(N),base:R[0]}},htmlBuilder:sO,mathmlBuilder:Ere}),sn({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(E,R){var P=E.parser,N=R[1],G=wr(R[0],"url").url;return P.settings.isTrusted({command:"\\href",url:G})?{type:"href",mode:P.mode,href:G,body:ri(N)}:P.formatUnsupportedCmd("\\href")},htmlBuilder:function(E,R){var P=Ys(E.body,R,!1);return lt.makeAnchor(E.href,[],P,R)},mathmlBuilder:function(E,R){var P=Hd(E.body,R);return P instanceof tl||(P=new tl("mrow",[P])),P.setAttribute("href",E.href),P}}),sn({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(E,R){var P=E.parser,N=wr(R[0],"url").url;if(!P.settings.isTrusted({command:"\\url",url:N}))return P.formatUnsupportedCmd("\\url");for(var G=[],ee=0;ee<N.length;ee++){var ve=N[ee];ve==="~"&&(ve="\\textasciitilde"),G.push({type:"textord",mode:"text",text:ve})}var Ne={type:"text",mode:P.mode,font:"\\texttt",body:G};return{type:"href",mode:P.mode,href:N,body:ri(Ne)}}}),sn({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler:function(E,R){var P=E.parser;return{type:"hbox",mode:P.mode,body:ri(R[0])}},htmlBuilder:function(E,R){var P=Ys(E.body,R,!1);return lt.makeFragment(P)},mathmlBuilder:function(E,R){return new cn.MathNode("mrow",Io(E.body,R))}}),sn({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(E,R){var P=E.parser,N=E.funcName;E.token;var G=wr(R[0],"raw").string,ee=R[1];P.settings.strict&&P.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var ve,Ne={};switch(N){case"\\htmlClass":Ne.class=G,ve={command:"\\htmlClass",class:G};break;case"\\htmlId":Ne.id=G,ve={command:"\\htmlId",id:G};break;case"\\htmlStyle":Ne.style=G,ve={command:"\\htmlStyle",style:G};break;case"\\htmlData":{for(var qe=G.split(","),ut=0;ut<qe.length;ut++){var It=qe[ut].split("=");if(It.length!==2)throw new s("Error parsing key-value for \\htmlData");Ne["data-"+It[0].trim()]=It[1].trim()}ve={command:"\\htmlData",attributes:Ne};break}default:throw new Error("Unrecognized html command")}return P.settings.isTrusted(ve)?{type:"html",mode:P.mode,attributes:Ne,body:ri(ee)}:P.formatUnsupportedCmd(N)},htmlBuilder:function(E,R){var P=Ys(E.body,R,!1),N=["enclosing"];E.attributes.class&&N.push.apply(N,E.attributes.class.trim().split(/\s+/));var G=lt.makeSpan(N,P,R);for(var ee in E.attributes)ee!=="class"&&E.attributes.hasOwnProperty(ee)&&G.setAttribute(ee,E.attributes[ee]);return G},mathmlBuilder:function(E,R){return Hd(E.body,R)}}),sn({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(E,R){var P=E.parser;return{type:"htmlmathml",mode:P.mode,html:ri(R[0]),mathml:ri(R[1])}},htmlBuilder:function(E,R){var P=Ys(E.html,R,!1);return lt.makeFragment(P)},mathmlBuilder:function(E,R){return Hd(E.mathml,R)}});var _A=function(E){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(E))return{number:+E,unit:"bp"};var R=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(E);if(!R)throw new s("Invalid size: '"+E+"' in \\includegraphics");var P={number:+(R[1]+R[2]),unit:R[3]};if(!ft(P))throw new s("Invalid unit: '"+P.unit+"' in \\includegraphics.");return P};sn({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(E,R,P){var N=E.parser,G={number:0,unit:"em"},ee={number:.9,unit:"em"},ve={number:0,unit:"em"},Ne="";if(P[0])for(var qe=wr(P[0],"raw").string,ut=qe.split(","),It=0;It<ut.length;It++){var Gt=ut[It].split("=");if(Gt.length===2){var Zt=Gt[1].trim();switch(Gt[0].trim()){case"alt":Ne=Zt;break;case"width":G=_A(Zt);break;case"height":ee=_A(Zt);break;case"totalheight":ve=_A(Zt);break;default:throw new s("Invalid key: '"+Gt[0]+"' in \\includegraphics.")}}}var Qt=wr(R[0],"url").url;return Ne===""&&(Ne=Qt,Ne=Ne.replace(/^.*[\\/]/,""),Ne=Ne.substring(0,Ne.lastIndexOf("."))),N.settings.isTrusted({command:"\\includegraphics",url:Qt})?{type:"includegraphics",mode:N.mode,alt:Ne,width:G,height:ee,totalheight:ve,src:Qt}:N.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(E,R){var P=Ke(E.height,R),N=0;E.totalheight.number>0&&(N=Ke(E.totalheight,R)-P);var G=0;E.width.number>0&&(G=Ke(E.width,R));var ee={height:Q(P+N)};G>0&&(ee.width=Q(G)),N>0&&(ee.verticalAlign=Q(-N));var ve=new Ee(E.src,E.alt,ee);return ve.height=P,ve.depth=N,ve},mathmlBuilder:function(E,R){var P=new cn.MathNode("mglyph",[]);P.setAttribute("alt",E.alt);var N=Ke(E.height,R),G=0;if(E.totalheight.number>0&&(G=Ke(E.totalheight,R)-N,P.setAttribute("valign",Q(-G))),P.setAttribute("height",Q(N+G)),E.width.number>0){var ee=Ke(E.width,R);P.setAttribute("width",Q(ee))}return P.setAttribute("src",E.src),P}}),sn({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=wr(R[0],"size");if(P.settings.strict){var ee=N[1]==="m",ve=G.value.unit==="mu";ee?(ve||P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" supports only mu units, "+("not "+G.value.unit+" units")),P.mode!=="math"&&P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" works only in math mode")):ve&&P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" doesn't support mu units")}return{type:"kern",mode:P.mode,dimension:G.value}},htmlBuilder:function(E,R){return lt.makeGlue(E.dimension,R)},mathmlBuilder:function(E,R){var P=Ke(E.dimension,R);return new cn.SpaceNode(P)}}),sn({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];return{type:"lap",mode:P.mode,alignment:N.slice(5),body:G}},htmlBuilder:function(E,R){var P;E.alignment==="clap"?(P=lt.makeSpan([],[Qr(E.body,R)]),P=lt.makeSpan(["inner"],[P],R)):P=lt.makeSpan(["inner"],[Qr(E.body,R)]);var N=lt.makeSpan(["fix"],[]),G=lt.makeSpan([E.alignment],[P,N],R),ee=lt.makeSpan(["strut"]);return ee.style.height=Q(G.height+G.depth),G.depth&&(ee.style.verticalAlign=Q(-G.depth)),G.children.unshift(ee),G=lt.makeSpan(["thinbox"],[G],R),lt.makeSpan(["mord","vbox"],[G],R)},mathmlBuilder:function(E,R){var P=new cn.MathNode("mpadded",[_i(E.body,R)]);if(E.alignment!=="rlap"){var N=E.alignment==="llap"?"-1":"-0.5";P.setAttribute("lspace",N+"width")}return P.setAttribute("width","0px"),P}}),sn({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(E,R){var P=E.funcName,N=E.parser,G=N.mode;N.switchMode("math");var ee=P==="\\("?"\\)":"$",ve=N.parseExpression(!1,ee);return N.expect(ee),N.switchMode(G),{type:"styling",mode:N.mode,style:"text",body:ve}}}),sn({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(E,R){throw new s("Mismatched "+E.funcName)}});var aO=function(E,R){switch(R.style.size){case F.DISPLAY.size:return E.display;case F.TEXT.size:return E.text;case F.SCRIPT.size:return E.script;case F.SCRIPTSCRIPT.size:return E.scriptscript;default:return E.text}};sn({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:function(E,R){var P=E.parser;return{type:"mathchoice",mode:P.mode,display:ri(R[0]),text:ri(R[1]),script:ri(R[2]),scriptscript:ri(R[3])}},htmlBuilder:function(E,R){var P=aO(E,R),N=Ys(P,R,!1);return lt.makeFragment(N)},mathmlBuilder:function(E,R){var P=aO(E,R);return Hd(P,R)}});var oO=function(E,R,P,N,G,ee,ve){E=lt.makeSpan([],[E]);var Ne=P&&g.isCharacterBox(P),qe,ut;if(R){var It=Qr(R,N.havingStyle(G.sup()),N);ut={elem:It,kern:Math.max(N.fontMetrics().bigOpSpacing1,N.fontMetrics().bigOpSpacing3-It.depth)}}if(P){var Gt=Qr(P,N.havingStyle(G.sub()),N);qe={elem:Gt,kern:Math.max(N.fontMetrics().bigOpSpacing2,N.fontMetrics().bigOpSpacing4-Gt.height)}}var Zt;if(ut&&qe){var Qt=N.fontMetrics().bigOpSpacing5+qe.elem.height+qe.elem.depth+qe.kern+E.depth+ve;Zt=lt.makeVList({positionType:"bottom",positionData:Qt,children:[{type:"kern",size:N.fontMetrics().bigOpSpacing5},{type:"elem",elem:qe.elem,marginLeft:Q(-ee)},{type:"kern",size:qe.kern},{type:"elem",elem:E},{type:"kern",size:ut.kern},{type:"elem",elem:ut.elem,marginLeft:Q(ee)},{type:"kern",size:N.fontMetrics().bigOpSpacing5}]},N)}else if(qe){var gn=E.height-ve;Zt=lt.makeVList({positionType:"top",positionData:gn,children:[{type:"kern",size:N.fontMetrics().bigOpSpacing5},{type:"elem",elem:qe.elem,marginLeft:Q(-ee)},{type:"kern",size:qe.kern},{type:"elem",elem:E}]},N)}else if(ut){var _n=E.depth+ve;Zt=lt.makeVList({positionType:"bottom",positionData:_n,children:[{type:"elem",elem:E},{type:"kern",size:ut.kern},{type:"elem",elem:ut.elem,marginLeft:Q(ee)},{type:"kern",size:N.fontMetrics().bigOpSpacing5}]},N)}else return E;var Gn=[Zt];if(qe&&ee!==0&&!Ne){var Zn=lt.makeSpan(["mspace"],[],N);Zn.style.marginRight=Q(ee),Gn.unshift(Zn)}return lt.makeSpan(["mop","op-limits"],Gn,N)},lO=["\\smallint"],E0=function(E,R){var P,N,G=!1,ee;E.type==="supsub"?(P=E.sup,N=E.sub,ee=wr(E.base,"op"),G=!0):ee=wr(E,"op");var ve=R.style,Ne=!1;ve.size===F.DISPLAY.size&&ee.symbol&&!g.contains(lO,ee.name)&&(Ne=!0);var qe;if(ee.symbol){var ut=Ne?"Size2-Regular":"Size1-Regular",It="";if((ee.name==="\\oiint"||ee.name==="\\oiiint")&&(It=ee.name.substr(1),ee.name=It==="oiint"?"\\iint":"\\iiint"),qe=lt.makeSymbol(ee.name,ut,"math",R,["mop","op-symbol",Ne?"large-op":"small-op"]),It.length>0){var Gt=qe.italic,Zt=lt.staticSvg(It+"Size"+(Ne?"2":"1"),R);qe=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:qe,shift:0},{type:"elem",elem:Zt,shift:Ne?.08:0}]},R),ee.name="\\"+It,qe.classes.unshift("mop"),qe.italic=Gt}}else if(ee.body){var Qt=Ys(ee.body,R,!0);Qt.length===1&&Qt[0]instanceof et?(qe=Qt[0],qe.classes[0]="mop"):qe=lt.makeSpan(["mop"],Qt,R)}else{for(var gn=[],_n=1;_n<ee.name.length;_n++)gn.push(lt.mathsym(ee.name[_n],ee.mode,R));qe=lt.makeSpan(["mop"],gn,R)}var Gn=0,Zn=0;return(qe instanceof et||ee.name==="\\oiint"||ee.name==="\\oiiint")&&!ee.suppressBaseShift&&(Gn=(qe.height-qe.depth)/2-R.fontMetrics().axisHeight,Zn=qe.italic),G?oO(qe,P,N,R,ve,Zn,Gn):(Gn&&(qe.style.position="relative",qe.style.top=Q(Gn)),qe)},xy=function(E,R){var P;if(E.symbol)P=new tl("mo",[nl(E.name,E.mode)]),g.contains(lO,E.name)&&P.setAttribute("largeop","false");else if(E.body)P=new tl("mo",Io(E.body,R));else{P=new tl("mi",[new by(E.name.slice(1))]);var N=new tl("mo",[nl("⁡","text")]);E.parentIsSupSub?P=new tl("mrow",[P,N]):P=T8([P,N])}return P},Ire={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};sn({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(E,R){var P=E.parser,N=E.funcName,G=N;return G.length===1&&(G=Ire[G]),{type:"op",mode:P.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:G}},htmlBuilder:E0,mathmlBuilder:xy}),sn({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:function(E,R){var P=E.parser,N=R[0];return{type:"op",mode:P.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ri(N)}},htmlBuilder:E0,mathmlBuilder:xy});var Rre={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};sn({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(E){var R=E.parser,P=E.funcName;return{type:"op",mode:R.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:P}},htmlBuilder:E0,mathmlBuilder:xy}),sn({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(E){var R=E.parser,P=E.funcName;return{type:"op",mode:R.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:P}},htmlBuilder:E0,mathmlBuilder:xy}),sn({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(E){var R=E.parser,P=E.funcName,N=P;return N.length===1&&(N=Rre[N]),{type:"op",mode:R.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:N}},htmlBuilder:E0,mathmlBuilder:xy});var cO={};function Be(re,E){cO[re]=E}var uO=function(E,R){var P,N,G=!1,ee;E.type==="supsub"?(P=E.sup,N=E.sub,ee=wr(E.base,"operatorname"),G=!0):ee=wr(E,"operatorname");var ve;if(ee.body.length>0){for(var Ne=ee.body.map(function(Gt){var Zt=Gt.text;return typeof Zt=="string"?{type:"textord",mode:Gt.mode,text:Zt}:Gt}),qe=Ys(Ne,R.withFont("mathrm"),!0),ut=0;ut<qe.length;ut++){var It=qe[ut];It instanceof et&&(It.text=It.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}ve=lt.makeSpan(["mop"],qe,R)}else ve=lt.makeSpan(["mop"],[],R);return G?oO(ve,P,N,R,R.style,0,0):ve},Pre=function(E,R){for(var P=Io(E.body,R.withFont("mathrm")),N=!0,G=0;G<P.length;G++){var ee=P[G];if(!(ee instanceof cn.SpaceNode))if(ee instanceof cn.MathNode)switch(ee.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var ve=ee.children[0];ee.children.length===1&&ve instanceof cn.TextNode?ve.text=ve.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):N=!1;break}default:N=!1}else N=!1}if(N){var Ne=P.map(function(It){return It.toText()}).join("");P=[new cn.TextNode(Ne)]}var qe=new cn.MathNode("mi",P);qe.setAttribute("mathvariant","normal");var ut=new cn.MathNode("mo",[nl("⁡","text")]);return E.parentIsSupSub?new cn.MathNode("mrow",[qe,ut]):cn.newDocumentFragment([qe,ut])};sn({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];return{type:"operatorname",mode:P.mode,body:ri(G),alwaysHandleSupSub:N==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:uO,mathmlBuilder:Pre}),Be("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Mr({type:"ordgroup",htmlBuilder:function(E,R){return E.semisimple?lt.makeFragment(Ys(E.body,R,!1)):lt.makeSpan(["mord"],Ys(E.body,R,!0),R)},mathmlBuilder:function(E,R){return Hd(E.body,R,!0)}}),sn({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(E,R){var P=E.parser,N=R[0];return{type:"overline",mode:P.mode,body:N}},htmlBuilder:function(E,R){var P=Qr(E.body,R.havingCrampedStyle()),N=lt.makeLineSpan("overline-line",R),G=R.fontMetrics().defaultRuleThickness,ee=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P},{type:"kern",size:3*G},{type:"elem",elem:N},{type:"kern",size:G}]},R);return lt.makeSpan(["mord","overline"],[ee],R)},mathmlBuilder:function(E,R){var P=new cn.MathNode("mo",[new cn.TextNode("‾")]);P.setAttribute("stretchy","true");var N=new cn.MathNode("mover",[_i(E.body,R),P]);return N.setAttribute("accent","true"),N}}),sn({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(E,R){var P=E.parser,N=R[0];return{type:"phantom",mode:P.mode,body:ri(N)}},htmlBuilder:function(E,R){var P=Ys(E.body,R.withPhantom(),!1);return lt.makeFragment(P)},mathmlBuilder:function(E,R){var P=Io(E.body,R);return new cn.MathNode("mphantom",P)}}),sn({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(E,R){var P=E.parser,N=R[0];return{type:"hphantom",mode:P.mode,body:N}},htmlBuilder:function(E,R){var P=lt.makeSpan([],[Qr(E.body,R.withPhantom())]);if(P.height=0,P.depth=0,P.children)for(var N=0;N<P.children.length;N++)P.children[N].height=0,P.children[N].depth=0;return P=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P}]},R),lt.makeSpan(["mord"],[P],R)},mathmlBuilder:function(E,R){var P=Io(ri(E.body),R),N=new cn.MathNode("mphantom",P),G=new cn.MathNode("mpadded",[N]);return G.setAttribute("height","0px"),G.setAttribute("depth","0px"),G}}),sn({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(E,R){var P=E.parser,N=R[0];return{type:"vphantom",mode:P.mode,body:N}},htmlBuilder:function(E,R){var P=lt.makeSpan(["inner"],[Qr(E.body,R.withPhantom())]),N=lt.makeSpan(["fix"],[]);return lt.makeSpan(["mord","rlap"],[P,N],R)},mathmlBuilder:function(E,R){var P=Io(ri(E.body),R),N=new cn.MathNode("mphantom",P),G=new cn.MathNode("mpadded",[N]);return G.setAttribute("width","0px"),G}}),sn({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(E,R){var P=E.parser,N=wr(R[0],"size").value,G=R[1];return{type:"raisebox",mode:P.mode,dy:N,body:G}},htmlBuilder:function(E,R){var P=Qr(E.body,R),N=Ke(E.dy,R);return lt.makeVList({positionType:"shift",positionData:-N,children:[{type:"elem",elem:P}]},R)},mathmlBuilder:function(E,R){var P=new cn.MathNode("mpadded",[_i(E.body,R)]),N=E.dy.number+E.dy.unit;return P.setAttribute("voffset",N),P}}),sn({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(E,R,P){var N=E.parser,G=P[0],ee=wr(R[0],"size"),ve=wr(R[1],"size");return{type:"rule",mode:N.mode,shift:G&&wr(G,"size").value,width:ee.value,height:ve.value}},htmlBuilder:function(E,R){var P=lt.makeSpan(["mord","rule"],[],R),N=Ke(E.width,R),G=Ke(E.height,R),ee=E.shift?Ke(E.shift,R):0;return P.style.borderRightWidth=Q(N),P.style.borderTopWidth=Q(G),P.style.bottom=Q(ee),P.width=N,P.height=G+ee,P.depth=-ee,P.maxFontSize=G*1.125*R.sizeMultiplier,P},mathmlBuilder:function(E,R){var P=Ke(E.width,R),N=Ke(E.height,R),G=E.shift?Ke(E.shift,R):0,ee=R.color&&R.getColor()||"black",ve=new cn.MathNode("mspace");ve.setAttribute("mathbackground",ee),ve.setAttribute("width",Q(P)),ve.setAttribute("height",Q(N));var Ne=new cn.MathNode("mpadded",[ve]);return G>=0?Ne.setAttribute("height",Q(G)):(Ne.setAttribute("height",Q(G)),Ne.setAttribute("depth",Q(-G))),Ne.setAttribute("voffset",Q(G)),Ne}});function dO(re,E,R){for(var P=Ys(re,E,!1),N=E.sizeMultiplier/R.sizeMultiplier,G=0;G<P.length;G++){var ee=P[G].classes.indexOf("sizing");ee<0?Array.prototype.push.apply(P[G].classes,E.sizingClasses(R)):P[G].classes[ee+1]==="reset-size"+E.size&&(P[G].classes[ee+1]="reset-size"+R.size),P[G].height*=N,P[G].depth*=N}return lt.makeFragment(P)}var fO=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Dre=function(E,R){var P=R.havingSize(E.size);return dO(E.body,P,R)};sn({type:"sizing",names:fO,props:{numArgs:0,allowedInText:!0},handler:function(E,R){var P=E.breakOnTokenText,N=E.funcName,G=E.parser,ee=G.parseExpression(!1,P);return{type:"sizing",mode:G.mode,size:fO.indexOf(N)+1,body:ee}},htmlBuilder:Dre,mathmlBuilder:function(E,R){var P=R.havingSize(E.size),N=Io(E.body,P),G=new cn.MathNode("mstyle",N);return G.setAttribute("mathsize",Q(P.sizeMultiplier)),G}}),sn({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(E,R,P){var N=E.parser,G=!1,ee=!1,ve=P[0]&&wr(P[0],"ordgroup");if(ve)for(var Ne="",qe=0;qe<ve.body.length;++qe){var ut=ve.body[qe];if(Ne=ut.text,Ne==="t")G=!0;else if(Ne==="b")ee=!0;else{G=!1,ee=!1;break}}else G=!0,ee=!0;var It=R[0];return{type:"smash",mode:N.mode,body:It,smashHeight:G,smashDepth:ee}},htmlBuilder:function(E,R){var P=lt.makeSpan([],[Qr(E.body,R)]);if(!E.smashHeight&&!E.smashDepth)return P;if(E.smashHeight&&(P.height=0,P.children))for(var N=0;N<P.children.length;N++)P.children[N].height=0;if(E.smashDepth&&(P.depth=0,P.children))for(var G=0;G<P.children.length;G++)P.children[G].depth=0;var ee=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P}]},R);return lt.makeSpan(["mord"],[ee],R)},mathmlBuilder:function(E,R){var P=new cn.MathNode("mpadded",[_i(E.body,R)]);return E.smashHeight&&P.setAttribute("height","0px"),E.smashDepth&&P.setAttribute("depth","0px"),P}}),sn({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(E,R,P){var N=E.parser,G=P[0],ee=R[0];return{type:"sqrt",mode:N.mode,body:ee,index:G}},htmlBuilder:function(E,R){var P=Qr(E.body,R.havingCrampedStyle());P.height===0&&(P.height=R.fontMetrics().xHeight),P=lt.wrapFragment(P,R);var N=R.fontMetrics(),G=N.defaultRuleThickness,ee=G;R.style.id<F.TEXT.id&&(ee=R.fontMetrics().xHeight);var ve=G+ee/4,Ne=P.height+P.depth+ve+G,qe=Cu.sqrtImage(Ne,R),ut=qe.span,It=qe.ruleWidth,Gt=qe.advanceWidth,Zt=ut.height-It;Zt>P.height+P.depth+ve&&(ve=(ve+Zt-P.height-P.depth)/2);var Qt=ut.height-P.height-ve-It;P.style.paddingLeft=Q(Gt);var gn=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P,wrapperClasses:["svg-align"]},{type:"kern",size:-(P.height+Qt)},{type:"elem",elem:ut},{type:"kern",size:It}]},R);if(E.index){var _n=R.havingStyle(F.SCRIPTSCRIPT),Gn=Qr(E.index,_n,R),Zn=.6*(gn.height-gn.depth),ir=lt.makeVList({positionType:"shift",positionData:-Zn,children:[{type:"elem",elem:Gn}]},R),Jr=lt.makeSpan(["root"],[ir]);return lt.makeSpan(["mord","sqrt"],[Jr,gn],R)}else return lt.makeSpan(["mord","sqrt"],[gn],R)},mathmlBuilder:function(E,R){var P=E.body,N=E.index;return N?new cn.MathNode("mroot",[_i(P,R),_i(N,R)]):new cn.MathNode("msqrt",[_i(P,R)])}});var hO={display:F.DISPLAY,text:F.TEXT,script:F.SCRIPT,scriptscript:F.SCRIPTSCRIPT};sn({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(E,R){var P=E.breakOnTokenText,N=E.funcName,G=E.parser,ee=G.parseExpression(!0,P),ve=N.slice(1,N.length-5);return{type:"styling",mode:G.mode,style:ve,body:ee}},htmlBuilder:function(E,R){var P=hO[E.style],N=R.havingStyle(P).withFont("");return dO(E.body,N,R)},mathmlBuilder:function(E,R){var P=hO[E.style],N=R.havingStyle(P),G=Io(E.body,N),ee=new cn.MathNode("mstyle",G),ve={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},Ne=ve[E.style];return ee.setAttribute("scriptlevel",Ne[0]),ee.setAttribute("displaystyle",Ne[1]),ee}});var Lre=function(E,R){var P=E.base;if(P)if(P.type==="op"){var N=P.limits&&(R.style.size===F.DISPLAY.size||P.alwaysHandleSupSub);return N?E0:null}else if(P.type==="operatorname"){var G=P.alwaysHandleSupSub&&(R.style.size===F.DISPLAY.size||P.limits);return G?uO:null}else{if(P.type==="accent")return g.isCharacterBox(P.base)?sA:null;if(P.type==="horizBrace"){var ee=!E.sub;return ee===P.isOver?sO:null}else return null}else return null};Mr({type:"supsub",htmlBuilder:function(E,R){var P=Lre(E,R);if(P)return P(E,R);var N=E.base,G=E.sup,ee=E.sub,ve=Qr(N,R),Ne,qe,ut=R.fontMetrics(),It=0,Gt=0,Zt=N&&g.isCharacterBox(N);if(G){var Qt=R.havingStyle(R.style.sup());Ne=Qr(G,Qt,R),Zt||(It=ve.height-Qt.fontMetrics().supDrop*Qt.sizeMultiplier/R.sizeMultiplier)}if(ee){var gn=R.havingStyle(R.style.sub());qe=Qr(ee,gn,R),Zt||(Gt=ve.depth+gn.fontMetrics().subDrop*gn.sizeMultiplier/R.sizeMultiplier)}var _n;R.style===F.DISPLAY?_n=ut.sup1:R.style.cramped?_n=ut.sup3:_n=ut.sup2;var Gn=R.sizeMultiplier,Zn=Q(.5/ut.ptPerEm/Gn),ir=null;if(qe){var Jr=E.base&&E.base.type==="op"&&E.base.name&&(E.base.name==="\\oiint"||E.base.name==="\\oiiint");(ve instanceof et||Jr)&&(ir=Q(-ve.italic))}var ci;if(Ne&&qe){It=Math.max(It,_n,Ne.depth+.25*ut.xHeight),Gt=Math.max(Gt,ut.sub2);var Bi=ut.defaultRuleThickness,ii=4*Bi;if(It-Ne.depth-(qe.height-Gt)<ii){Gt=ii-(It-Ne.depth)+qe.height;var ui=.8*ut.xHeight-(It-Ne.depth);ui>0&&(It+=ui,Gt-=ui)}var ls=[{type:"elem",elem:qe,shift:Gt,marginRight:Zn,marginLeft:ir},{type:"elem",elem:Ne,shift:-It,marginRight:Zn}];ci=lt.makeVList({positionType:"individualShift",children:ls},R)}else if(qe){Gt=Math.max(Gt,ut.sub1,qe.height-.8*ut.xHeight);var Ci=[{type:"elem",elem:qe,marginLeft:ir,marginRight:Zn}];ci=lt.makeVList({positionType:"shift",positionData:Gt,children:Ci},R)}else if(Ne)It=Math.max(It,_n,Ne.depth+.25*ut.xHeight),ci=lt.makeVList({positionType:"shift",positionData:-It,children:[{type:"elem",elem:Ne,marginRight:Zn}]},R);else throw new Error("supsub must have either sup or sub.");var Ro=eA(ve,"right")||"mord";return lt.makeSpan([Ro],[ve,lt.makeSpan(["msupsub"],[ci])],R)},mathmlBuilder:function(E,R){var P=!1,N,G;E.base&&E.base.type==="horizBrace"&&(G=!!E.sup,G===E.base.isOver&&(P=!0,N=E.base.isOver)),E.base&&(E.base.type==="op"||E.base.type==="operatorname")&&(E.base.parentIsSupSub=!0);var ee=[_i(E.base,R)];E.sub&&ee.push(_i(E.sub,R)),E.sup&&ee.push(_i(E.sup,R));var ve;if(P)ve=N?"mover":"munder";else if(E.sub)if(E.sup){var ut=E.base;ut&&ut.type==="op"&&ut.limits&&R.style===F.DISPLAY||ut&&ut.type==="operatorname"&&ut.alwaysHandleSupSub&&(R.style===F.DISPLAY||ut.limits)?ve="munderover":ve="msubsup"}else{var qe=E.base;qe&&qe.type==="op"&&qe.limits&&(R.style===F.DISPLAY||qe.alwaysHandleSupSub)||qe&&qe.type==="operatorname"&&qe.alwaysHandleSupSub&&(qe.limits||R.style===F.DISPLAY)?ve="munder":ve="msub"}else{var Ne=E.base;Ne&&Ne.type==="op"&&Ne.limits&&(R.style===F.DISPLAY||Ne.alwaysHandleSupSub)||Ne&&Ne.type==="operatorname"&&Ne.alwaysHandleSupSub&&(Ne.limits||R.style===F.DISPLAY)?ve="mover":ve="msup"}return new cn.MathNode(ve,ee)}}),Mr({type:"atom",htmlBuilder:function(E,R){return lt.mathsym(E.text,E.mode,R,["m"+E.family])},mathmlBuilder:function(E,R){var P=new cn.MathNode("mo",[nl(E.text,E.mode)]);if(E.family==="bin"){var N=rA(E,R);N==="bold-italic"&&P.setAttribute("mathvariant",N)}else E.family==="punct"?P.setAttribute("separator","true"):(E.family==="open"||E.family==="close")&&P.setAttribute("stretchy","false");return P}});var pO={mi:"italic",mn:"normal",mtext:"normal"};Mr({type:"mathord",htmlBuilder:function(E,R){return lt.makeOrd(E,R,"mathord")},mathmlBuilder:function(E,R){var P=new cn.MathNode("mi",[nl(E.text,E.mode,R)]),N=rA(E,R)||"italic";return N!==pO[P.type]&&P.setAttribute("mathvariant",N),P}}),Mr({type:"textord",htmlBuilder:function(E,R){return lt.makeOrd(E,R,"textord")},mathmlBuilder:function(E,R){var P=nl(E.text,E.mode,R),N=rA(E,R)||"normal",G;return E.mode==="text"?G=new cn.MathNode("mtext",[P]):/[0-9]/.test(E.text)?G=new cn.MathNode("mn",[P]):E.text==="\\prime"?G=new cn.MathNode("mo",[P]):G=new cn.MathNode("mi",[P]),N!==pO[G.type]&&G.setAttribute("mathvariant",N),G}});var SA={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},xA={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Mr({type:"spacing",htmlBuilder:function(E,R){if(xA.hasOwnProperty(E.text)){var P=xA[E.text].className||"";if(E.mode==="text"){var N=lt.makeOrd(E,R,"textord");return N.classes.push(P),N}else return lt.makeSpan(["mspace",P],[lt.mathsym(E.text,E.mode,R)],R)}else{if(SA.hasOwnProperty(E.text))return lt.makeSpan(["mspace",SA[E.text]],[],R);throw new s('Unknown type of space "'+E.text+'"')}},mathmlBuilder:function(E,R){var P;if(xA.hasOwnProperty(E.text))P=new cn.MathNode("mtext",[new cn.TextNode(" ")]);else{if(SA.hasOwnProperty(E.text))return new cn.MathNode("mspace");throw new s('Unknown type of space "'+E.text+'"')}return P}});var mO=function(){var E=new cn.MathNode("mtd",[]);return E.setAttribute("width","50%"),E};Mr({type:"tag",mathmlBuilder:function(E,R){var P=new cn.MathNode("mtable",[new cn.MathNode("mtr",[mO(),new cn.MathNode("mtd",[Hd(E.body,R)]),mO(),new cn.MathNode("mtd",[Hd(E.tag,R)])])]);return P.setAttribute("width","100%"),P}});var vO={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},gO={"\\textbf":"textbf","\\textmd":"textmd"},kre={"\\textit":"textit","\\textup":"textup"},yO=function(E,R){var P=E.font;return P?vO[P]?R.withTextFontFamily(vO[P]):gO[P]?R.withTextFontWeight(gO[P]):R.withTextFontShape(kre[P]):R};sn({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler:function(E,R){var P=E.parser,N=E.funcName,G=R[0];return{type:"text",mode:P.mode,body:ri(G),font:N}},htmlBuilder:function(E,R){var P=yO(E,R),N=Ys(E.body,P,!0);return lt.makeSpan(["mord","text"],N,P)},mathmlBuilder:function(E,R){var P=yO(E,R);return Hd(E.body,P)}}),sn({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(E,R){var P=E.parser;return{type:"underline",mode:P.mode,body:R[0]}},htmlBuilder:function(E,R){var P=Qr(E.body,R),N=lt.makeLineSpan("underline-line",R),G=R.fontMetrics().defaultRuleThickness,ee=lt.makeVList({positionType:"top",positionData:P.height,children:[{type:"kern",size:G},{type:"elem",elem:N},{type:"kern",size:3*G},{type:"elem",elem:P}]},R);return lt.makeSpan(["mord","underline"],[ee],R)},mathmlBuilder:function(E,R){var P=new cn.MathNode("mo",[new cn.TextNode("‾")]);P.setAttribute("stretchy","true");var N=new cn.MathNode("munder",[_i(E.body,R),P]);return N.setAttribute("accentunder","true"),N}}),sn({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:function(E,R){var P=E.parser;return{type:"vcenter",mode:P.mode,body:R[0]}},htmlBuilder:function(E,R){var P=Qr(E.body,R),N=R.fontMetrics().axisHeight,G=.5*(P.height-N-(P.depth+N));return lt.makeVList({positionType:"shift",positionData:G,children:[{type:"elem",elem:P}]},R)},mathmlBuilder:function(E,R){return new cn.MathNode("mpadded",[_i(E.body,R)],["vcenter"])}}),sn({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(E,R,P){throw new s("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(E,R){for(var P=bO(E),N=[],G=R.havingStyle(R.style.text()),ee=0;ee<P.length;ee++){var ve=P[ee];ve==="~"&&(ve="\\textasciitilde"),N.push(lt.makeSymbol(ve,"Typewriter-Regular",E.mode,G,["mord","texttt"]))}return lt.makeSpan(["mord","text"].concat(G.sizingClasses(R)),lt.tryCombineChars(N),G)},mathmlBuilder:function(E,R){var P=new cn.TextNode(bO(E)),N=new cn.MathNode("mtext",[P]);return N.setAttribute("mathvariant","monospace"),N}});var bO=function(E){return E.body.replace(/ /g,E.star?"␣":" ")},Ore=tr,$d=Ore,Wl=function(){function re(E,R,P){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=E,this.start=R,this.end=P}return re.range=function(R,P){return P?!R||!R.loc||!P.loc||R.loc.lexer!==P.loc.lexer?null:new re(R.loc.lexer,R.loc.start,P.loc.end):R&&R.loc},re}(),wh=function(){function re(R,P){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=R,this.loc=P}var E=re.prototype;return E.range=function(P,N){return new re(N,Wl.range(this,P))},re}(),_O=`[ \r
	]`,Nre="\\\\[a-zA-Z@]+",Bre="\\\\[^\uD800-\uDFFF]",Fre="("+Nre+")"+_O+"*",zre=`\\\\(
|[ \r	]+
?)[ \r	]*`,wA="[̀-ͯ]",Ure=new RegExp(wA+"+$"),Hre="("+_O+"+)|"+(zre+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(wA+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(wA+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Fre)+("|"+Bre+")"),SO=function(){function re(R,P){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=R,this.settings=P,this.tokenRegex=new RegExp(Hre,"g"),this.catcodes={"%":14,"~":13}}var E=re.prototype;return E.setCatcode=function(P,N){this.catcodes[P]=N},E.lex=function(){var P=this.input,N=this.tokenRegex.lastIndex;if(N===P.length)return new wh("EOF",new Wl(this,N,N));var G=this.tokenRegex.exec(P);if(G===null||G.index!==N)throw new s("Unexpected character: '"+P[N]+"'",new wh(P[N],new Wl(this,N,N+1)));var ee=G[6]||G[3]||(G[2]?"\\ ":" ");if(this.catcodes[ee]===14){var ve=P.indexOf(`
`,this.tokenRegex.lastIndex);return ve===-1?(this.tokenRegex.lastIndex=P.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=ve+1,this.lex()}return new wh(ee,new Wl(this,N,this.tokenRegex.lastIndex))},re}(),Vre=function(){function re(R,P){R===void 0&&(R={}),P===void 0&&(P={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=P,this.builtins=R,this.undefStack=[]}var E=re.prototype;return E.beginGroup=function(){this.undefStack.push({})},E.endGroup=function(){if(this.undefStack.length===0)throw new s("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var P=this.undefStack.pop();for(var N in P)P.hasOwnProperty(N)&&(P[N]===void 0?delete this.current[N]:this.current[N]=P[N])},E.endGroups=function(){for(;this.undefStack.length>0;)this.endGroup()},E.has=function(P){return this.current.hasOwnProperty(P)||this.builtins.hasOwnProperty(P)},E.get=function(P){return this.current.hasOwnProperty(P)?this.current[P]:this.builtins[P]},E.set=function(P,N,G){if(G===void 0&&(G=!1),G){for(var ee=0;ee<this.undefStack.length;ee++)delete this.undefStack[ee][P];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][P]=N)}else{var ve=this.undefStack[this.undefStack.length-1];ve&&!ve.hasOwnProperty(P)&&(ve[P]=this.current[P])}this.current[P]=N},re}(),$re=cO,Gre=$re;Be("\\noexpand",function(re){var E=re.popToken();return re.isExpandable(E.text)&&(E.noexpand=!0,E.treatAsRelax=!0),{tokens:[E],numArgs:0}}),Be("\\expandafter",function(re){var E=re.popToken();return re.expandOnce(!0),{tokens:[E],numArgs:0}}),Be("\\@firstoftwo",function(re){var E=re.consumeArgs(2);return{tokens:E[0],numArgs:0}}),Be("\\@secondoftwo",function(re){var E=re.consumeArgs(2);return{tokens:E[1],numArgs:0}}),Be("\\@ifnextchar",function(re){var E=re.consumeArgs(3);re.consumeSpaces();var R=re.future();return E[0].length===1&&E[0][0].text===R.text?{tokens:E[1],numArgs:0}:{tokens:E[2],numArgs:0}}),Be("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Be("\\TextOrMath",function(re){var E=re.consumeArgs(2);return re.mode==="text"?{tokens:E[0],numArgs:0}:{tokens:E[1],numArgs:0}});var xO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Be("\\char",function(re){var E=re.popToken(),R,P="";if(E.text==="'")R=8,E=re.popToken();else if(E.text==='"')R=16,E=re.popToken();else if(E.text==="`")if(E=re.popToken(),E.text[0]==="\\")P=E.text.charCodeAt(1);else{if(E.text==="EOF")throw new s("\\char` missing argument");P=E.text.charCodeAt(0)}else R=10;if(R){if(P=xO[E.text],P==null||P>=R)throw new s("Invalid base-"+R+" digit "+E.text);for(var N;(N=xO[re.future().text])!=null&&N<R;)P*=R,P+=N,re.popToken()}return"\\@char{"+P+"}"});var CA=function(E,R,P){var N=E.consumeArg().tokens;if(N.length!==1)throw new s("\\newcommand's first argument must be a macro name");var G=N[0].text,ee=E.isDefined(G);if(ee&&!R)throw new s("\\newcommand{"+G+"} attempting to redefine "+(G+"; use \\renewcommand"));if(!ee&&!P)throw new s("\\renewcommand{"+G+"} when command "+G+" does not yet exist; use \\newcommand");var ve=0;if(N=E.consumeArg().tokens,N.length===1&&N[0].text==="["){for(var Ne="",qe=E.expandNextToken();qe.text!=="]"&&qe.text!=="EOF";)Ne+=qe.text,qe=E.expandNextToken();if(!Ne.match(/^\s*[0-9]+\s*$/))throw new s("Invalid number of arguments: "+Ne);ve=parseInt(Ne),N=E.consumeArg().tokens}return E.macros.set(G,{tokens:N,numArgs:ve}),""};Be("\\newcommand",function(re){return CA(re,!1,!0)}),Be("\\renewcommand",function(re){return CA(re,!0,!1)}),Be("\\providecommand",function(re){return CA(re,!0,!0)}),Be("\\message",function(re){var E=re.consumeArgs(1)[0];return console.log(E.reverse().map(function(R){return R.text}).join("")),""}),Be("\\errmessage",function(re){var E=re.consumeArgs(1)[0];return console.error(E.reverse().map(function(R){return R.text}).join("")),""}),Be("\\show",function(re){var E=re.popToken(),R=E.text;return console.log(E,re.macros.get(R),$d[R],qn.math[R],qn.text[R]),""}),Be("\\bgroup","{"),Be("\\egroup","}"),Be("~","\\nobreakspace"),Be("\\lq","`"),Be("\\rq","'"),Be("\\aa","\\r a"),Be("\\AA","\\r A"),Be("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),Be("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Be("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),Be("ℬ","\\mathscr{B}"),Be("ℰ","\\mathscr{E}"),Be("ℱ","\\mathscr{F}"),Be("ℋ","\\mathscr{H}"),Be("ℐ","\\mathscr{I}"),Be("ℒ","\\mathscr{L}"),Be("ℳ","\\mathscr{M}"),Be("ℛ","\\mathscr{R}"),Be("ℭ","\\mathfrak{C}"),Be("ℌ","\\mathfrak{H}"),Be("ℨ","\\mathfrak{Z}"),Be("\\Bbbk","\\Bbb{k}"),Be("·","\\cdotp"),Be("\\llap","\\mathllap{\\textrm{#1}}"),Be("\\rlap","\\mathrlap{\\textrm{#1}}"),Be("\\clap","\\mathclap{\\textrm{#1}}"),Be("\\mathstrut","\\vphantom{(}"),Be("\\underbar","\\underline{\\text{#1}}"),Be("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Be("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),Be("\\ne","\\neq"),Be("≠","\\neq"),Be("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),Be("∉","\\notin"),Be("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),Be("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),Be("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),Be("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),Be("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),Be("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),Be("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),Be("⟂","\\perp"),Be("‼","\\mathclose{!\\mkern-0.8mu!}"),Be("∌","\\notni"),Be("⌜","\\ulcorner"),Be("⌝","\\urcorner"),Be("⌞","\\llcorner"),Be("⌟","\\lrcorner"),Be("©","\\copyright"),Be("®","\\textregistered"),Be("️","\\textregistered"),Be("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Be("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Be("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Be("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Be("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Be("⋮","\\vdots"),Be("\\varGamma","\\mathit{\\Gamma}"),Be("\\varDelta","\\mathit{\\Delta}"),Be("\\varTheta","\\mathit{\\Theta}"),Be("\\varLambda","\\mathit{\\Lambda}"),Be("\\varXi","\\mathit{\\Xi}"),Be("\\varPi","\\mathit{\\Pi}"),Be("\\varSigma","\\mathit{\\Sigma}"),Be("\\varUpsilon","\\mathit{\\Upsilon}"),Be("\\varPhi","\\mathit{\\Phi}"),Be("\\varPsi","\\mathit{\\Psi}"),Be("\\varOmega","\\mathit{\\Omega}"),Be("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Be("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Be("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Be("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Be("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Be("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var wO={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Be("\\dots",function(re){var E="\\dotso",R=re.expandAfterFuture().text;return R in wO?E=wO[R]:(R.substr(0,4)==="\\not"||R in qn.math&&g.contains(["bin","rel"],qn.math[R].group))&&(E="\\dotsb"),E});var MA={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Be("\\dotso",function(re){var E=re.future().text;return E in MA?"\\ldots\\,":"\\ldots"}),Be("\\dotsc",function(re){var E=re.future().text;return E in MA&&E!==","?"\\ldots\\,":"\\ldots"}),Be("\\cdots",function(re){var E=re.future().text;return E in MA?"\\@cdots\\,":"\\@cdots"}),Be("\\dotsb","\\cdots"),Be("\\dotsm","\\cdots"),Be("\\dotsi","\\!\\cdots"),Be("\\dotsx","\\ldots\\,"),Be("\\DOTSI","\\relax"),Be("\\DOTSB","\\relax"),Be("\\DOTSX","\\relax"),Be("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Be("\\,","\\tmspace+{3mu}{.1667em}"),Be("\\thinspace","\\,"),Be("\\>","\\mskip{4mu}"),Be("\\:","\\tmspace+{4mu}{.2222em}"),Be("\\medspace","\\:"),Be("\\;","\\tmspace+{5mu}{.2777em}"),Be("\\thickspace","\\;"),Be("\\!","\\tmspace-{3mu}{.1667em}"),Be("\\negthinspace","\\!"),Be("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Be("\\negthickspace","\\tmspace-{5mu}{.277em}"),Be("\\enspace","\\kern.5em "),Be("\\enskip","\\hskip.5em\\relax"),Be("\\quad","\\hskip1em\\relax"),Be("\\qquad","\\hskip2em\\relax"),Be("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Be("\\tag@paren","\\tag@literal{({#1})}"),Be("\\tag@literal",function(re){if(re.macros.get("\\df@tag"))throw new s("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Be("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Be("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Be("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Be("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Be("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),Be("\\newline","\\\\\\relax"),Be("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var CO=Q(ze["Main-Regular"]["T".charCodeAt(0)][1]-.7*ze["Main-Regular"]["A".charCodeAt(0)][1]);Be("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+CO+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),Be("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+CO+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),Be("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Be("\\@hspace","\\hskip #1\\relax"),Be("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Be("\\ordinarycolon",":"),Be("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Be("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Be("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Be("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Be("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Be("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Be("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Be("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Be("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Be("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Be("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Be("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Be("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Be("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Be("∷","\\dblcolon"),Be("∹","\\eqcolon"),Be("≔","\\coloneqq"),Be("≕","\\eqqcolon"),Be("⩴","\\Coloneqq"),Be("\\ratio","\\vcentcolon"),Be("\\coloncolon","\\dblcolon"),Be("\\colonequals","\\coloneqq"),Be("\\coloncolonequals","\\Coloneqq"),Be("\\equalscolon","\\eqqcolon"),Be("\\equalscoloncolon","\\Eqqcolon"),Be("\\colonminus","\\coloneq"),Be("\\coloncolonminus","\\Coloneq"),Be("\\minuscolon","\\eqcolon"),Be("\\minuscoloncolon","\\Eqcolon"),Be("\\coloncolonapprox","\\Colonapprox"),Be("\\coloncolonsim","\\Colonsim"),Be("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Be("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Be("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Be("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Be("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),Be("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Be("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Be("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Be("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Be("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Be("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Be("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Be("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Be("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),Be("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),Be("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),Be("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),Be("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),Be("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),Be("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),Be("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),Be("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),Be("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),Be("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),Be("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),Be("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),Be("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),Be("\\imath","\\html@mathml{\\@imath}{ı}"),Be("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),Be("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),Be("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),Be("⟦","\\llbracket"),Be("⟧","\\rrbracket"),Be("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),Be("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),Be("⦃","\\lBrace"),Be("⦄","\\rBrace"),Be("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),Be("⦵","\\minuso"),Be("\\darr","\\downarrow"),Be("\\dArr","\\Downarrow"),Be("\\Darr","\\Downarrow"),Be("\\lang","\\langle"),Be("\\rang","\\rangle"),Be("\\uarr","\\uparrow"),Be("\\uArr","\\Uparrow"),Be("\\Uarr","\\Uparrow"),Be("\\N","\\mathbb{N}"),Be("\\R","\\mathbb{R}"),Be("\\Z","\\mathbb{Z}"),Be("\\alef","\\aleph"),Be("\\alefsym","\\aleph"),Be("\\Alpha","\\mathrm{A}"),Be("\\Beta","\\mathrm{B}"),Be("\\bull","\\bullet"),Be("\\Chi","\\mathrm{X}"),Be("\\clubs","\\clubsuit"),Be("\\cnums","\\mathbb{C}"),Be("\\Complex","\\mathbb{C}"),Be("\\Dagger","\\ddagger"),Be("\\diamonds","\\diamondsuit"),Be("\\empty","\\emptyset"),Be("\\Epsilon","\\mathrm{E}"),Be("\\Eta","\\mathrm{H}"),Be("\\exist","\\exists"),Be("\\harr","\\leftrightarrow"),Be("\\hArr","\\Leftrightarrow"),Be("\\Harr","\\Leftrightarrow"),Be("\\hearts","\\heartsuit"),Be("\\image","\\Im"),Be("\\infin","\\infty"),Be("\\Iota","\\mathrm{I}"),Be("\\isin","\\in"),Be("\\Kappa","\\mathrm{K}"),Be("\\larr","\\leftarrow"),Be("\\lArr","\\Leftarrow"),Be("\\Larr","\\Leftarrow"),Be("\\lrarr","\\leftrightarrow"),Be("\\lrArr","\\Leftrightarrow"),Be("\\Lrarr","\\Leftrightarrow"),Be("\\Mu","\\mathrm{M}"),Be("\\natnums","\\mathbb{N}"),Be("\\Nu","\\mathrm{N}"),Be("\\Omicron","\\mathrm{O}"),Be("\\plusmn","\\pm"),Be("\\rarr","\\rightarrow"),Be("\\rArr","\\Rightarrow"),Be("\\Rarr","\\Rightarrow"),Be("\\real","\\Re"),Be("\\reals","\\mathbb{R}"),Be("\\Reals","\\mathbb{R}"),Be("\\Rho","\\mathrm{P}"),Be("\\sdot","\\cdot"),Be("\\sect","\\S"),Be("\\spades","\\spadesuit"),Be("\\sub","\\subset"),Be("\\sube","\\subseteq"),Be("\\supe","\\supseteq"),Be("\\Tau","\\mathrm{T}"),Be("\\thetasym","\\vartheta"),Be("\\weierp","\\wp"),Be("\\Zeta","\\mathrm{Z}"),Be("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Be("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Be("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Be("\\bra","\\mathinner{\\langle{#1}|}"),Be("\\ket","\\mathinner{|{#1}\\rangle}"),Be("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Be("\\Bra","\\left\\langle#1\\right|"),Be("\\Ket","\\left|#1\\right\\rangle"),Be("\\angln","{\\angl n}"),Be("\\blue","\\textcolor{##6495ed}{#1}"),Be("\\orange","\\textcolor{##ffa500}{#1}"),Be("\\pink","\\textcolor{##ff00af}{#1}"),Be("\\red","\\textcolor{##df0030}{#1}"),Be("\\green","\\textcolor{##28ae7b}{#1}"),Be("\\gray","\\textcolor{gray}{#1}"),Be("\\purple","\\textcolor{##9d38bd}{#1}"),Be("\\blueA","\\textcolor{##ccfaff}{#1}"),Be("\\blueB","\\textcolor{##80f6ff}{#1}"),Be("\\blueC","\\textcolor{##63d9ea}{#1}"),Be("\\blueD","\\textcolor{##11accd}{#1}"),Be("\\blueE","\\textcolor{##0c7f99}{#1}"),Be("\\tealA","\\textcolor{##94fff5}{#1}"),Be("\\tealB","\\textcolor{##26edd5}{#1}"),Be("\\tealC","\\textcolor{##01d1c1}{#1}"),Be("\\tealD","\\textcolor{##01a995}{#1}"),Be("\\tealE","\\textcolor{##208170}{#1}"),Be("\\greenA","\\textcolor{##b6ffb0}{#1}"),Be("\\greenB","\\textcolor{##8af281}{#1}"),Be("\\greenC","\\textcolor{##74cf70}{#1}"),Be("\\greenD","\\textcolor{##1fab54}{#1}"),Be("\\greenE","\\textcolor{##0d923f}{#1}"),Be("\\goldA","\\textcolor{##ffd0a9}{#1}"),Be("\\goldB","\\textcolor{##ffbb71}{#1}"),Be("\\goldC","\\textcolor{##ff9c39}{#1}"),Be("\\goldD","\\textcolor{##e07d10}{#1}"),Be("\\goldE","\\textcolor{##a75a05}{#1}"),Be("\\redA","\\textcolor{##fca9a9}{#1}"),Be("\\redB","\\textcolor{##ff8482}{#1}"),Be("\\redC","\\textcolor{##f9685d}{#1}"),Be("\\redD","\\textcolor{##e84d39}{#1}"),Be("\\redE","\\textcolor{##bc2612}{#1}"),Be("\\maroonA","\\textcolor{##ffbde0}{#1}"),Be("\\maroonB","\\textcolor{##ff92c6}{#1}"),Be("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Be("\\maroonD","\\textcolor{##ca337c}{#1}"),Be("\\maroonE","\\textcolor{##9e034e}{#1}"),Be("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Be("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Be("\\purpleC","\\textcolor{##aa87ff}{#1}"),Be("\\purpleD","\\textcolor{##7854ab}{#1}"),Be("\\purpleE","\\textcolor{##543b78}{#1}"),Be("\\mintA","\\textcolor{##f5f9e8}{#1}"),Be("\\mintB","\\textcolor{##edf2df}{#1}"),Be("\\mintC","\\textcolor{##e0e5cc}{#1}"),Be("\\grayA","\\textcolor{##f6f7f7}{#1}"),Be("\\grayB","\\textcolor{##f0f1f2}{#1}"),Be("\\grayC","\\textcolor{##e3e5e6}{#1}"),Be("\\grayD","\\textcolor{##d6d8da}{#1}"),Be("\\grayE","\\textcolor{##babec2}{#1}"),Be("\\grayF","\\textcolor{##888d93}{#1}"),Be("\\grayG","\\textcolor{##626569}{#1}"),Be("\\grayH","\\textcolor{##3b3e40}{#1}"),Be("\\grayI","\\textcolor{##21242c}{#1}"),Be("\\kaBlue","\\textcolor{##314453}{#1}"),Be("\\kaGreen","\\textcolor{##71B307}{#1}");var MO={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Wre=function(){function re(R,P,N){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=P,this.expansionCount=0,this.feed(R),this.macros=new Vre(Gre,P.macros),this.mode=N,this.stack=[]}var E=re.prototype;return E.feed=function(P){this.lexer=new SO(P,this.settings)},E.switchMode=function(P){this.mode=P},E.beginGroup=function(){this.macros.beginGroup()},E.endGroup=function(){this.macros.endGroup()},E.endGroups=function(){this.macros.endGroups()},E.future=function(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},E.popToken=function(){return this.future(),this.stack.pop()},E.pushToken=function(P){this.stack.push(P)},E.pushTokens=function(P){var N;(N=this.stack).push.apply(N,P)},E.scanArgument=function(P){var N,G,ee;if(P){if(this.consumeSpaces(),this.future().text!=="[")return null;N=this.popToken();var ve=this.consumeArg(["]"]);ee=ve.tokens,G=ve.end}else{var Ne=this.consumeArg();ee=Ne.tokens,N=Ne.start,G=Ne.end}return this.pushToken(new wh("EOF",G.loc)),this.pushTokens(ee),N.range(G,"")},E.consumeSpaces=function(){for(;;){var P=this.future();if(P.text===" ")this.stack.pop();else break}},E.consumeArg=function(P){var N=[],G=P&&P.length>0;G||this.consumeSpaces();var ee=this.future(),ve,Ne=0,qe=0;do{if(ve=this.popToken(),N.push(ve),ve.text==="{")++Ne;else if(ve.text==="}"){if(--Ne,Ne===-1)throw new s("Extra }",ve)}else if(ve.text==="EOF")throw new s("Unexpected end of input in a macro argument, expected '"+(P&&G?P[qe]:"}")+"'",ve);if(P&&G)if((Ne===0||Ne===1&&P[qe]==="{")&&ve.text===P[qe]){if(++qe,qe===P.length){N.splice(-qe,qe);break}}else qe=0}while(Ne!==0||G);return ee.text==="{"&&N[N.length-1].text==="}"&&(N.pop(),N.shift()),N.reverse(),{tokens:N,start:ee,end:ve}},E.consumeArgs=function(P,N){if(N){if(N.length!==P+1)throw new s("The length of delimiters doesn't match the number of args!");for(var G=N[0],ee=0;ee<G.length;ee++){var ve=this.popToken();if(G[ee]!==ve.text)throw new s("Use of the macro doesn't match its definition",ve)}}for(var Ne=[],qe=0;qe<P;qe++)Ne.push(this.consumeArg(N&&N[qe+1]).tokens);return Ne},E.expandOnce=function(P){var N=this.popToken(),G=N.text,ee=N.noexpand?null:this._getExpansion(G);if(ee==null||P&&ee.unexpandable){if(P&&ee==null&&G[0]==="\\"&&!this.isDefined(G))throw new s("Undefined control sequence: "+G);return this.pushToken(N),N}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new s("Too many expansions: infinite loop or need to increase maxExpand setting");var ve=ee.tokens,Ne=this.consumeArgs(ee.numArgs,ee.delimiters);if(ee.numArgs){ve=ve.slice();for(var qe=ve.length-1;qe>=0;--qe){var ut=ve[qe];if(ut.text==="#"){if(qe===0)throw new s("Incomplete placeholder at end of macro body",ut);if(ut=ve[--qe],ut.text==="#")ve.splice(qe+1,1);else if(/^[1-9]$/.test(ut.text)){var It;(It=ve).splice.apply(It,[qe,2].concat(Ne[+ut.text-1]))}else throw new s("Not a valid argument number",ut)}}}return this.pushTokens(ve),ve},E.expandAfterFuture=function(){return this.expandOnce(),this.future()},E.expandNextToken=function(){for(;;){var P=this.expandOnce();if(P instanceof wh)if(P.text==="\\relax"||P.treatAsRelax)this.stack.pop();else return this.stack.pop()}throw new Error},E.expandMacro=function(P){return this.macros.has(P)?this.expandTokens([new wh(P)]):void 0},E.expandTokens=function(P){var N=[],G=this.stack.length;for(this.pushTokens(P);this.stack.length>G;){var ee=this.expandOnce(!0);ee instanceof wh&&(ee.treatAsRelax&&(ee.noexpand=!1,ee.treatAsRelax=!1),N.push(this.stack.pop()))}return N},E.expandMacroAsText=function(P){var N=this.expandMacro(P);return N&&N.map(function(G){return G.text}).join("")},E._getExpansion=function(P){var N=this.macros.get(P);if(N==null)return N;if(P.length===1){var G=this.lexer.catcodes[P];if(G!=null&&G!==13)return}var ee=typeof N=="function"?N(this):N;if(typeof ee=="string"){var ve=0;if(ee.indexOf("#")!==-1)for(var Ne=ee.replace(/##/g,"");Ne.indexOf("#"+(ve+1))!==-1;)++ve;for(var qe=new SO(ee,this.settings),ut=[],It=qe.lex();It.text!=="EOF";)ut.push(It),It=qe.lex();ut.reverse();var Gt={tokens:ut,numArgs:ve};return Gt}return ee},E.isDefined=function(P){return this.macros.has(P)||$d.hasOwnProperty(P)||qn.math.hasOwnProperty(P)||qn.text.hasOwnProperty(P)||MO.hasOwnProperty(P)},E.isExpandable=function(P){var N=this.macros.get(P);return N!=null?typeof N=="string"||typeof N=="function"||!N.unexpandable:$d.hasOwnProperty(P)&&!$d[P].primitive},re}(),TA={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},TO={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"},AO=function(){function re(R,P){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Wre(R,P,this.mode),this.settings=P,this.leftrightDepth=0}var E=re.prototype;return E.expect=function(P,N){if(N===void 0&&(N=!0),this.fetch().text!==P)throw new s("Expected '"+P+"', got '"+this.fetch().text+"'",this.fetch());N&&this.consume()},E.consume=function(){this.nextToken=null},E.fetch=function(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},E.switchMode=function(P){this.mode=P,this.gullet.switchMode(P)},E.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var P=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),P}finally{this.gullet.endGroups()}},E.parseExpression=function(P,N){for(var G=[];;){this.mode==="math"&&this.consumeSpaces();var ee=this.fetch();if(re.endOfExpression.indexOf(ee.text)!==-1||N&&ee.text===N||P&&$d[ee.text]&&$d[ee.text].infix)break;var ve=this.parseAtom(N);if(ve){if(ve.type==="internal")continue}else break;G.push(ve)}return this.mode==="text"&&this.formLigatures(G),this.handleInfixNodes(G)},E.handleInfixNodes=function(P){for(var N=-1,G,ee=0;ee<P.length;ee++)if(P[ee].type==="infix"){if(N!==-1)throw new s("only one infix operator per group",P[ee].token);N=ee,G=P[ee].replaceWith}if(N!==-1&&G){var ve,Ne,qe=P.slice(0,N),ut=P.slice(N+1);qe.length===1&&qe[0].type==="ordgroup"?ve=qe[0]:ve={type:"ordgroup",mode:this.mode,body:qe},ut.length===1&&ut[0].type==="ordgroup"?Ne=ut[0]:Ne={type:"ordgroup",mode:this.mode,body:ut};var It;return G==="\\\\abovefrac"?It=this.callFunction(G,[ve,P[N],Ne],[]):It=this.callFunction(G,[ve,Ne],[]),[It]}else return P},E.handleSupSubscript=function(P){var N=this.fetch(),G=N.text;this.consume(),this.consumeSpaces();var ee=this.parseGroup(P);if(!ee)throw new s("Expected group after '"+G+"'",N);return ee},E.formatUnsupportedCmd=function(P){for(var N=[],G=0;G<P.length;G++)N.push({type:"textord",mode:"text",text:P[G]});var ee={type:"text",mode:this.mode,body:N},ve={type:"color",mode:this.mode,color:this.settings.errorColor,body:[ee]};return ve},E.parseAtom=function(P){var N=this.parseGroup("atom",P);if(this.mode==="text")return N;for(var G,ee;;){this.consumeSpaces();var ve=this.fetch();if(ve.text==="\\limits"||ve.text==="\\nolimits"){if(N&&N.type==="op"){var Ne=ve.text==="\\limits";N.limits=Ne,N.alwaysHandleSupSub=!0}else if(N&&N.type==="operatorname")N.alwaysHandleSupSub&&(N.limits=ve.text==="\\limits");else throw new s("Limit controls must follow a math operator",ve);this.consume()}else if(ve.text==="^"){if(G)throw new s("Double superscript",ve);G=this.handleSupSubscript("superscript")}else if(ve.text==="_"){if(ee)throw new s("Double subscript",ve);ee=this.handleSupSubscript("subscript")}else if(ve.text==="'"){if(G)throw new s("Double superscript",ve);var qe={type:"textord",mode:this.mode,text:"\\prime"},ut=[qe];for(this.consume();this.fetch().text==="'";)ut.push(qe),this.consume();this.fetch().text==="^"&&ut.push(this.handleSupSubscript("superscript")),G={type:"ordgroup",mode:this.mode,body:ut}}else break}return G||ee?{type:"supsub",mode:this.mode,base:N,sup:G,sub:ee}:N},E.parseFunction=function(P,N){var G=this.fetch(),ee=G.text,ve=$d[ee];if(!ve)return null;if(this.consume(),N&&N!=="atom"&&!ve.allowedInArgument)throw new s("Got function '"+ee+"' with no arguments"+(N?" as "+N:""),G);if(this.mode==="text"&&!ve.allowedInText)throw new s("Can't use function '"+ee+"' in text mode",G);if(this.mode==="math"&&ve.allowedInMath===!1)throw new s("Can't use function '"+ee+"' in math mode",G);var Ne=this.parseArguments(ee,ve),qe=Ne.args,ut=Ne.optArgs;return this.callFunction(ee,qe,ut,G,P)},E.callFunction=function(P,N,G,ee,ve){var Ne={funcName:P,parser:this,token:ee,breakOnTokenText:ve},qe=$d[P];if(qe&&qe.handler)return qe.handler(Ne,N,G);throw new s("No function handler for "+P)},E.parseArguments=function(P,N){var G=N.numArgs+N.numOptionalArgs;if(G===0)return{args:[],optArgs:[]};for(var ee=[],ve=[],Ne=0;Ne<G;Ne++){var qe=N.argTypes&&N.argTypes[Ne],ut=Ne<N.numOptionalArgs;(N.primitive&&qe==null||N.type==="sqrt"&&Ne===1&&ve[0]==null)&&(qe="primitive");var It=this.parseGroupOfType("argument to '"+P+"'",qe,ut);if(ut)ve.push(It);else if(It!=null)ee.push(It);else throw new s("Null argument, please report this as a bug")}return{args:ee,optArgs:ve}},E.parseGroupOfType=function(P,N,G){switch(N){case"color":return this.parseColorGroup(G);case"size":return this.parseSizeGroup(G);case"url":return this.parseUrlGroup(G);case"math":case"text":return this.parseArgumentGroup(G,N);case"hbox":{var ee=this.parseArgumentGroup(G,"text");return ee!=null?{type:"styling",mode:ee.mode,body:[ee],style:"text"}:null}case"raw":{var ve=this.parseStringGroup("raw",G);return ve!=null?{type:"raw",mode:"text",string:ve.text}:null}case"primitive":{if(G)throw new s("A primitive argument cannot be optional");var Ne=this.parseGroup(P);if(Ne==null)throw new s("Expected group as "+P,this.fetch());return Ne}case"original":case null:case void 0:return this.parseArgumentGroup(G);default:throw new s("Unknown group type as "+P,this.fetch())}},E.consumeSpaces=function(){for(;this.fetch().text===" ";)this.consume()},E.parseStringGroup=function(P,N){var G=this.gullet.scanArgument(N);if(G==null)return null;for(var ee="",ve;(ve=this.fetch()).text!=="EOF";)ee+=ve.text,this.consume();return this.consume(),G.text=ee,G},E.parseRegexGroup=function(P,N){for(var G=this.fetch(),ee=G,ve="",Ne;(Ne=this.fetch()).text!=="EOF"&&P.test(ve+Ne.text);)ee=Ne,ve+=ee.text,this.consume();if(ve==="")throw new s("Invalid "+N+": '"+G.text+"'",G);return G.range(ee,ve)},E.parseColorGroup=function(P){var N=this.parseStringGroup("color",P);if(N==null)return null;var G=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(N.text);if(!G)throw new s("Invalid color: '"+N.text+"'",N);var ee=G[0];return/^[0-9a-f]{6}$/i.test(ee)&&(ee="#"+ee),{type:"color-token",mode:this.mode,color:ee}},E.parseSizeGroup=function(P){var N,G=!1;if(this.gullet.consumeSpaces(),!P&&this.gullet.future().text!=="{"?N=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):N=this.parseStringGroup("size",P),!N)return null;!P&&N.text.length===0&&(N.text="0pt",G=!0);var ee=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(N.text);if(!ee)throw new s("Invalid size: '"+N.text+"'",N);var ve={number:+(ee[1]+ee[2]),unit:ee[3]};if(!ft(ve))throw new s("Invalid unit: '"+ve.unit+"'",N);return{type:"size",mode:this.mode,value:ve,isBlank:G}},E.parseUrlGroup=function(P){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var N=this.parseStringGroup("url",P);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),N==null)return null;var G=N.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:G}},E.parseArgumentGroup=function(P,N){var G=this.gullet.scanArgument(P);if(G==null)return null;var ee=this.mode;N&&this.switchMode(N),this.gullet.beginGroup();var ve=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var Ne={type:"ordgroup",mode:this.mode,loc:G.loc,body:ve};return N&&this.switchMode(ee),Ne},E.parseGroup=function(P,N){var G=this.fetch(),ee=G.text,ve;if(ee==="{"||ee==="\\begingroup"){this.consume();var Ne=ee==="{"?"}":"\\endgroup";this.gullet.beginGroup();var qe=this.parseExpression(!1,Ne),ut=this.fetch();this.expect(Ne),this.gullet.endGroup(),ve={type:"ordgroup",mode:this.mode,loc:Wl.range(G,ut),body:qe,semisimple:ee==="\\begingroup"||void 0}}else if(ve=this.parseFunction(N,P)||this.parseSymbol(),ve==null&&ee[0]==="\\"&&!MO.hasOwnProperty(ee)){if(this.settings.throwOnError)throw new s("Undefined control sequence: "+ee,G);ve=this.formatUnsupportedCmd(ee),this.consume()}return ve},E.formLigatures=function(P){for(var N=P.length-1,G=0;G<N;++G){var ee=P[G],ve=ee.text;ve==="-"&&P[G+1].text==="-"&&(G+1<N&&P[G+2].text==="-"?(P.splice(G,3,{type:"textord",mode:"text",loc:Wl.range(ee,P[G+2]),text:"---"}),N-=2):(P.splice(G,2,{type:"textord",mode:"text",loc:Wl.range(ee,P[G+1]),text:"--"}),N-=1)),(ve==="'"||ve==="`")&&P[G+1].text===ve&&(P.splice(G,2,{type:"textord",mode:"text",loc:Wl.range(ee,P[G+1]),text:ve+ve}),N-=1)}},E.parseSymbol=function(){var P=this.fetch(),N=P.text;if(/^\\verb[^a-zA-Z]/.test(N)){this.consume();var G=N.slice(5),ee=G.charAt(0)==="*";if(ee&&(G=G.slice(1)),G.length<2||G.charAt(0)!==G.slice(-1))throw new s(`\\verb assertion failed --
                    please report what input caused this bug`);return G=G.slice(1,-1),{type:"verb",mode:"text",body:G,star:ee}}TO.hasOwnProperty(N[0])&&!qn[this.mode][N[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+N[0]+'" used in math mode',P),N=TO[N[0]]+N.substr(1));var ve=Ure.exec(N);ve&&(N=N.substring(0,ve.index),N==="i"?N="ı":N==="j"&&(N="ȷ"));var Ne;if(qn[this.mode][N]){this.settings.strict&&this.mode==="math"&&vr.indexOf(N)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+N[0]+'" used in math mode',P);var qe=qn[this.mode][N].group,ut=Wl.range(P),It;if(kt.hasOwnProperty(qe)){var Gt=qe;It={type:"atom",mode:this.mode,family:Gt,loc:ut,text:N}}else It={type:qe,mode:this.mode,loc:ut,text:N};Ne=It}else if(N.charCodeAt(0)>=128)this.settings.strict&&(se(N.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+N[0]+'" used in math mode',P):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+N[0]+'"'+(" ("+N.charCodeAt(0)+")"),P)),Ne={type:"textord",mode:"text",loc:Wl.range(P),text:N};else return null;if(this.consume(),ve)for(var Zt=0;Zt<ve[0].length;Zt++){var Qt=ve[0][Zt];if(!TA[Qt])throw new s("Unknown accent ' "+Qt+"'",P);var gn=TA[Qt][this.mode]||TA[Qt].text;if(!gn)throw new s("Accent "+Qt+" unsupported in "+this.mode+" mode",P);Ne={type:"accent",mode:this.mode,loc:Wl.range(P),label:gn,isStretchy:!1,isShifty:!0,base:Ne}}return Ne},re}();AO.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var qre=function(E,R){if(!(typeof E=="string"||E instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var P=new AO(E,R);delete P.gullet.macros.current["\\df@tag"];var N=P.parse();if(delete P.gullet.macros.current["\\current@color"],delete P.gullet.macros.current["\\color"],P.gullet.macros.get("\\df@tag")){if(!R.displayMode)throw new s("\\tag works only in display equations");P.gullet.feed("\\df@tag"),N=[{type:"tag",mode:"text",body:N,tag:P.parse()}]}return N},AA=qre,EO=function(E,R,P){R.textContent="";var N=EA(E,P).toNode();R.appendChild(N)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),EO=function(){throw new s("KaTeX doesn't work in quirks mode.")});var Kre=function(E,R){var P=EA(E,R).toMarkup();return P},Yre=function(E,R){var P=new _(R);return AA(E,P)},IO=function(E,R,P){if(P.throwOnError||!(E instanceof s))throw E;var N=lt.makeSpan(["katex-error"],[new et(R)]);return N.setAttribute("title",E.toString()),N.setAttribute("style","color:"+P.errorColor),N},EA=function(E,R){var P=new _(R);try{var N=AA(E,P);return Jne(N,E,P)}catch(G){return IO(G,E,P)}},Xre=function(E,R){var P=new _(R);try{var N=AA(E,P);return ere(N,E,P)}catch(G){return IO(G,E,P)}},jre={version:"0.13.24",render:EO,renderToString:Kre,ParseError:s,__parse:Yre,__renderToDomTree:EA,__renderToHTMLTree:Xre,__setFontMetrics:Ze,__defineSymbol:K,__defineMacro:Be,__domTree:{Span:de,Anchor:at,SymbolNode:et,SvgNode:yt,PathNode:Ht,LineNode:Ot}},Zre=jre;return r=r.default,r}()})})(wee);var BHe=wee.exports;const FHe=gu(BHe),zHe=(n,e={},t)=>{const{props:r,domProps:i,on:s,...a}=e,o={...a,...r,...i,...(l=>l?Object.entries(l).reduce((c,[u,d])=>({...c,[u=`on${u=u.charAt(0).toUpperCase()+u.slice(1)}`]:d}),{}):null)(s)};return tn(n,o,t)};var UE=Ie({name:"VueLatex",props:{fontsize:{type:Number,default:16},expression:{type:String,required:!0},displayMode:{type:Boolean,default:!1},throwOnError:{type:Boolean,default:!1},errorColor:{type:String,default:void 0},minRuleThickness:{type:Number,default:.04},macros:{type:Object,default:void 0},colorIsTextColor:{type:Boolean,default:void 0},maxSize:{type:Number,default:void 0},maxExpand:{type:Number,default:void 0},allowedProtocols:{type:Array,default:void 0},strict:{type:[Boolean,String,Function],default:void 0}},setup:n=>({html:U(()=>FHe.renderToString(n.expression,n))}),render(){return zHe(this.displayMode?"div":"span",{domProps:{innerHTML:this.html},style:{"font-size":`${this.fontsize}px`}})}});UE.install=n=>{n.component(UE.name,UE)};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pk="143",tm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},UHe=0,TU=1,HHe=2,Cee=1,VHe=2,C1=3,ch=0,dc=1,uh=2,$He=1,Wf=0,Nv=1,AU=2,EU=3,IU=4,GHe=5,Ym=100,WHe=101,qHe=102,RU=103,PU=104,KHe=200,YHe=201,XHe=202,jHe=203,Mee=204,Tee=205,ZHe=206,QHe=207,JHe=208,eVe=209,tVe=210,nVe=0,rVe=1,iVe=2,z5=3,sVe=4,aVe=5,oVe=6,lVe=7,UT=0,cVe=1,uVe=2,fd=0,dVe=1,fVe=2,hVe=3,pVe=4,mVe=5,mk=300,s0=301,a0=302,l_=303,ZC=304,oS=306,po=1e3,Ps=1001,c_=1002,Vs=1003,QC=1004,JC=1005,xs=1006,vk=1007,zd=1008,o0=1009,vVe=1010,gVe=1011,Aee=1012,yVe=1013,Ip=1014,Uf=1015,u_=1016,bVe=1017,_Ve=1018,Bv=1020,SVe=1021,xVe=1022,Al=1023,wVe=1024,CVe=1025,Gp=1026,hg=1027,MVe=1028,TVe=1029,AVe=1030,EVe=1031,IVe=1033,I2=33776,HE=33777,R2=33778,P2=33779,DU=35840,LU=35841,kU=35842,OU=35843,Eee=36196,NU=37492,BU=37496,FU=37808,zU=37809,UU=37810,HU=37811,VU=37812,$U=37813,GU=37814,WU=37815,qU=37816,KU=37817,YU=37818,XU=37819,jU=37820,ZU=37821,QU=36492,RVe=2200,PVe=2201,DVe=2202,d_=2300,pg=2301,VE=2302,lv=2400,cv=2401,eM=2402,gk=2500,LVe=2501,kVe=1,Iee=2,dh=3e3,Rr=3001,OVe=3200,NVe=3201,x0=0,BVe=1,Ku="srgb",Rp="srgb-linear",$E=7680,FVe=519,U5=35044,JU="300 es",H5=1035;let bh=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const fa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eH=1234567;const Fv=Math.PI/180,f_=180/Math.PI;function Dl(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(fa[n&255]+fa[n>>8&255]+fa[n>>16&255]+fa[n>>24&255]+"-"+fa[e&255]+fa[e>>8&255]+"-"+fa[e>>16&15|64]+fa[e>>24&255]+"-"+fa[t&63|128]+fa[t>>8&255]+"-"+fa[t>>16&255]+fa[t>>24&255]+fa[r&255]+fa[r>>8&255]+fa[r>>16&255]+fa[r>>24&255]).toLowerCase()}function As(n,e,t){return Math.max(e,Math.min(t,n))}function yk(n,e){return(n%e+e)%e}function zVe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function UVe(n,e,t){return n!==e?(t-n)/(e-n):0}function tb(n,e,t){return(1-t)*n+t*e}function HVe(n,e,t,r){return tb(n,e,1-Math.exp(-t*r))}function VVe(n,e=1){return e-Math.abs(yk(n,e*2)-e)}function $Ve(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function GVe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function WVe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function qVe(n,e){return n+Math.random()*(e-n)}function KVe(n){return n*(.5-Math.random())}function YVe(n){n!==void 0&&(eH=n);let e=eH+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function XVe(n){return n*Fv}function jVe(n){return n*f_}function V5(n){return(n&n-1)===0&&n!==0}function Ree(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tM(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ZVe(n,e,t,r,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+r)/2),u=a((e+r)/2),d=s((e-r)/2),h=a((e-r)/2),f=s((r-e)/2),p=a((r-e)/2);switch(i){case"XYX":n.set(o*u,l*d,l*h,o*c);break;case"YZY":n.set(l*h,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*h,o*u,o*c);break;case"XZX":n.set(o*u,l*p,l*f,o*c);break;case"YXY":n.set(l*f,o*u,l*p,o*c);break;case"ZYZ":n.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function QVe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function JVe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var xa=Object.freeze({__proto__:null,DEG2RAD:Fv,RAD2DEG:f_,generateUUID:Dl,clamp:As,euclideanModulo:yk,mapLinear:zVe,inverseLerp:UVe,lerp:tb,damp:HVe,pingpong:VVe,smoothstep:$Ve,smootherstep:GVe,randInt:WVe,randFloat:qVe,randFloatSpread:KVe,seededRandom:YVe,degToRad:XVe,radToDeg:jVe,isPowerOfTwo:V5,ceilPowerOfTwo:Ree,floorPowerOfTwo:tM,setQuaternionFromProperEuler:ZVe,normalize:JVe,denormalize:QVe});let qt=class Pee{constructor(e=0,t=0){Pee.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},El=class Dee{constructor(){Dee.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],p=r[8],m=i[0],v=i[3],g=i[6],_=i[1],b=i[4],S=i[7],x=i[2],w=i[5],M=i[8];return s[0]=a*m+o*_+l*x,s[3]=a*v+o*b+l*w,s[6]=a*g+o*S+l*M,s[1]=c*m+u*_+d*x,s[4]=c*v+u*b+d*w,s[7]=c*g+u*S+d*M,s[2]=h*m+f*_+p*x,s[5]=h*v+f*b+p*w,s[8]=h*g+f*S+p*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-r*s*u+r*o*l+i*s*c-i*a*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,h=o*l-u*s,f=c*s-a*l,p=t*d+r*h+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(i*c-u*r)*m,e[2]=(o*r-i*a)*m,e[3]=h*m,e[4]=(u*t-i*l)*m,e[5]=(i*s-o*t)*m,e[6]=f*m,e[7]=(r*l-c*t)*m,e[8]=(a*t-r*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],c=i[4],u=i[7];return i[0]=t*s+r*l,i[3]=t*a+r*c,i[6]=t*o+r*u,i[1]=-r*s+t*l,i[4]=-r*a+t*c,i[7]=-r*o+t*u,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function Lee(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const e$e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function uv(n,e){return new e$e[n](e)}function h_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Wp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function D2(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const GE={[Ku]:{[Rp]:Wp},[Rp]:{[Ku]:D2}},Kl={legacyMode:!0,get workingColorSpace(){return Rp},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(GE[e]&&GE[e][t]!==void 0){const r=GE[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},kee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cs={r:0,g:0,b:0},Yl={h:0,s:0,l:0},Lx={h:0,s:0,l:0};function WE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function kx(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let wn=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ku){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Kl.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Rp){return this.r=e,this.g=t,this.b=r,Kl.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Rp){if(e=yk(e,1),t=As(t,0,1),r=As(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,a=2*r-s;this.r=WE(a,s,e+1/3),this.g=WE(a,s,e),this.b=WE(a,s,e-1/3)}return Kl.toWorkingColorSpace(this,i),this}setStyle(e,t=Ku){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Kl.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Kl.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return r(s[4]),this.setHSL(l,c,u,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Kl.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Kl.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ku){const r=kee[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wp(e.r),this.g=Wp(e.g),this.b=Wp(e.b),this}copyLinearToSRGB(e){return this.r=D2(e.r),this.g=D2(e.g),this.b=D2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ku){return Kl.fromWorkingColorSpace(kx(this,Cs),e),As(Cs.r*255,0,255)<<16^As(Cs.g*255,0,255)<<8^As(Cs.b*255,0,255)<<0}getHexString(e=Ku){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rp){Kl.fromWorkingColorSpace(kx(this,Cs),t);const r=Cs.r,i=Cs.g,s=Cs.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Rp){return Kl.fromWorkingColorSpace(kx(this,Cs),t),e.r=Cs.r,e.g=Cs.g,e.b=Cs.b,e}getStyle(e=Ku){return Kl.fromWorkingColorSpace(kx(this,Cs),e),e!==Ku?`color(${e} ${Cs.r} ${Cs.g} ${Cs.b})`:`rgb(${Cs.r*255|0},${Cs.g*255|0},${Cs.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Yl),Yl.h+=e,Yl.s+=t,Yl.l+=r,this.setHSL(Yl.h,Yl.s,Yl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Yl),e.getHSL(Lx);const r=tb(Yl.h,Lx.h,t),i=tb(Yl.s,Lx.s,t),s=tb(Yl.l,Lx.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};wn.NAMES=kee;let rm,Oee=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{rm===void 0&&(rm=h_("canvas")),rm.width=e.width,rm.height=e.height;const r=rm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=rm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=h_("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Wp(s[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Wp(t[r]/255)*255):t[r]=Wp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},dv=class{constructor(e=null){this.isSource=!0,this.uuid=Dl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(qE(i[a].image)):s.push(qE(i[a]))}else s=qE(i);r.url=s}return t||(e.images[this.uuid]=r),r}};function qE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Oee.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let t$e=0,sa=class $5 extends bh{constructor(e=$5.DEFAULT_IMAGE,t=$5.DEFAULT_MAPPING,r=Ps,i=Ps,s=xs,a=zd,o=Al,l=o0,c=1,u=dh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:t$e++}),this.uuid=Dl(),this.name="",this.source=new dv(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new qt(0,0),this.repeat=new qt(1,1),this.center=new qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new El,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mk)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case po:e.x=e.x-Math.floor(e.x);break;case Ps:e.x=e.x<0?0:1;break;case c_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case po:e.y=e.y-Math.floor(e.y);break;case Ps:e.y=e.y<0?0:1;break;case c_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};sa.DEFAULT_IMAGE=null;sa.DEFAULT_MAPPING=mk;let ni=class Nee{constructor(e=0,t=0,r=0,i=1){Nee.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,S=(f+1)/2,x=(g+1)/2,w=(u+h)/4,M=(d+m)/4,C=(p+v)/4;return b>S&&b>x?b<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(b),i=w/r,s=M/r):S>x?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=w/i,s=C/i):x<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(x),r=M/s,i=C/s),this.set(r,i,s,t),this}let _=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(v-p)/_,this.y=(d-m)/_,this.z=(h-u)/_,this.w=Math.acos((c+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},l0=class extends bh{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ni(0,0,e,t),this.scissorTest=!1,this.viewport=new ni(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new sa(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:xs,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new dv(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Bee=class extends sa{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Vs,this.minFilter=Vs,this.wrapR=Ps,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},n$e=class extends sa{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Vs,this.minFilter=Vs,this.wrapR=Ps,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},na=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,a,o){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[a+0],f=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==h||c!==f||u!==p){let v=1-o;const g=l*h+c*f+u*p+d*m,_=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const x=Math.sqrt(b),w=Math.atan2(x,g*_);v=Math.sin(v*w)/x,o=Math.sin(o*w)/x}const S=o*_;if(l=l*v+h*S,c=c*v+f*S,u=u*v+p*S,d=d*v+m*S,v===1-o){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,a){const o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[a],h=s[a+1],f=s[a+2],p=s[a+3];return e[t]=o*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-o*f,e[t+2]=c*p+u*f+o*h-l*d,e[t+3]=u*p-o*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(i/2),d=o(s/2),h=l(r/2),f=l(i/2),p=l(s/2);switch(a){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+o+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(a-i)*f}else if(r>o&&r>d){const f=2*Math.sqrt(1+r-o-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(s+c)/f}else if(o>d){const f=2*Math.sqrt(1+o-r-d);this._w=(s-c)/f,this._x=(i+a)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-o);this._w=(a-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(As(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-r*c,this._z=s*u+a*c+r*l-i*o,this._w=a*u-r*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=a*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Qe=class Fee{constructor(e=0,t=0,r=0){Fee.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tH.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tH.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*i-o*r,u=l*r+o*t-s*i,d=l*i+s*r-a*t,h=-s*t-a*r-o*i;return this.x=c*l+h*-s+u*-o-d*-a,this.y=u*l+h*-a+d*-s-c*-o,this.z=d*l+h*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return KE.copy(this).projectOnVector(e),this.sub(KE)}reflect(e){return this.sub(KE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(As(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const KE=new Qe,tH=new na;let w0=class{constructor(e=new Qe(1/0,1/0,1/0),t=new Qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>a&&(a=d),h>o&&(o=h)}return this.min.set(t,r,i),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>a&&(a=d),h>o&&(o=h)}return this.min.set(t,r,i),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Xh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let a=0,o=s.count;a<o;a++)Xh.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Xh)}else r.boundingBox===null&&r.computeBoundingBox(),YE.copy(r.boundingBox),YE.applyMatrix4(e.matrixWorld),this.union(YE);const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xh),Xh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jy),Ox.subVectors(this.max,Jy),im.subVectors(e.a,Jy),sm.subVectors(e.b,Jy),am.subVectors(e.c,Jy),Jd.subVectors(sm,im),ef.subVectors(am,sm),jh.subVectors(im,am);let t=[0,-Jd.z,Jd.y,0,-ef.z,ef.y,0,-jh.z,jh.y,Jd.z,0,-Jd.x,ef.z,0,-ef.x,jh.z,0,-jh.x,-Jd.y,Jd.x,0,-ef.y,ef.x,0,-jh.y,jh.x,0];return!XE(t,im,sm,am,Ox)||(t=[1,0,0,0,1,0,0,0,1],!XE(t,im,sm,am,Ox))?!1:(Nx.crossVectors(Jd,ef),t=[Nx.x,Nx.y,Nx.z],XE(t,im,sm,am,Ox))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Xh.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Xh).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ru[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ru[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ru[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ru[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ru[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ru[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ru[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ru[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ru),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const Ru=[new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe],Xh=new Qe,YE=new w0,im=new Qe,sm=new Qe,am=new Qe,Jd=new Qe,ef=new Qe,jh=new Qe,Jy=new Qe,Ox=new Qe,Nx=new Qe,Zh=new Qe;function XE(n,e,t,r,i){for(let s=0,a=n.length-3;s<=a;s+=3){Zh.fromArray(n,s);const o=i.x*Math.abs(Zh.x)+i.y*Math.abs(Zh.y)+i.z*Math.abs(Zh.z),l=e.dot(Zh),c=t.dot(Zh),u=r.dot(Zh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const r$e=new w0,nH=new Qe,Bx=new Qe,jE=new Qe;let C0=class{constructor(e=new Qe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):r$e.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){jE.subVectors(e,this.center);const t=jE.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(jE.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?Bx.set(0,0,1).multiplyScalar(e.radius):Bx.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(nH.copy(e.center).add(Bx)),this.expandByPoint(nH.copy(e.center).sub(Bx)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Pu=new Qe,ZE=new Qe,Fx=new Qe,tf=new Qe,QE=new Qe,zx=new Qe,JE=new Qe;let HT=class{constructor(e=new Qe,t=new Qe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pu.copy(this.direction).multiplyScalar(t).add(this.origin),Pu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){ZE.copy(e).add(t).multiplyScalar(.5),Fx.copy(t).sub(e).normalize(),tf.copy(this.origin).sub(ZE);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Fx),o=tf.dot(this.direction),l=-tf.dot(Fx),c=tf.lengthSq(),u=Math.abs(1-a*a);let d,h,f,p;if(u>0)if(d=a*l-o,h=a*o-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+a*h+2*o)+h*(a*d+h+2*l)+c}else h=s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-a*s+o)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(a*s+o)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=a>0?-s:s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Fx).multiplyScalar(h).add(ZE),f}intersectSphere(e,t){Pu.subVectors(e.center,this.origin);const r=Pu.dot(this.direction),i=Pu.dot(Pu)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||s>i||((s>r||r!==r)&&(r=s),(a<i||i!==i)&&(i=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Pu)!==null}intersectTriangle(e,t,r,i,s){QE.subVectors(t,e),zx.subVectors(r,e),JE.crossVectors(QE,zx);let a=this.direction.dot(JE),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;tf.subVectors(this.origin,e);const l=o*this.direction.dot(zx.crossVectors(tf,zx));if(l<0)return null;const c=o*this.direction.dot(QE.cross(tf));if(c<0||l+c>a)return null;const u=-o*tf.dot(JE);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Wn=class G5{constructor(){G5.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,a,o,l,c,u,d,h,f,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new G5().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/om.setFromMatrixColumn(e,0).length(),s=1/om.setFromMatrixColumn(e,1).length(),a=1/om.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=a*u,f=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-m*c,t[9]=-o*l,t[2]=m-h*c,t[6]=p+f*c,t[10]=a*l}else if(e.order==="YXZ"){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h+m*o,t[4]=p*o-f,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=f*o-p,t[6]=m+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h-m*o,t[4]=-a*d,t[8]=p+f*o,t[1]=f+p*o,t[5]=a*u,t[9]=m-h*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*u,f=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=f*c-p,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,f=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-m*d}else if(e.order==="XZY"){const h=a*l,f=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=a*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=o*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(i$e,e,s$e)}lookAt(e,t,r){const i=this.elements;return Lo.subVectors(e,t),Lo.lengthSq()===0&&(Lo.z=1),Lo.normalize(),nf.crossVectors(r,Lo),nf.lengthSq()===0&&(Math.abs(r.z)===1?Lo.x+=1e-4:Lo.z+=1e-4,Lo.normalize(),nf.crossVectors(r,Lo)),nf.normalize(),Ux.crossVectors(Lo,nf),i[0]=nf.x,i[4]=Ux.x,i[8]=Lo.x,i[1]=nf.y,i[5]=Ux.y,i[9]=Lo.y,i[2]=nf.z,i[6]=Ux.z,i[10]=Lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],p=r[2],m=r[6],v=r[10],g=r[14],_=r[3],b=r[7],S=r[11],x=r[15],w=i[0],M=i[4],C=i[8],A=i[12],T=i[1],I=i[5],D=i[9],B=i[13],O=i[2],H=i[6],L=i[10],z=i[14],k=i[3],F=i[7],W=i[11],q=i[15];return s[0]=a*w+o*T+l*O+c*k,s[4]=a*M+o*I+l*H+c*F,s[8]=a*C+o*D+l*L+c*W,s[12]=a*A+o*B+l*z+c*q,s[1]=u*w+d*T+h*O+f*k,s[5]=u*M+d*I+h*H+f*F,s[9]=u*C+d*D+h*L+f*W,s[13]=u*A+d*B+h*z+f*q,s[2]=p*w+m*T+v*O+g*k,s[6]=p*M+m*I+v*H+g*F,s[10]=p*C+m*D+v*L+g*W,s[14]=p*A+m*B+v*z+g*q,s[3]=_*w+b*T+S*O+x*k,s[7]=_*M+b*I+S*H+x*F,s[11]=_*C+b*D+S*L+x*W,s[15]=_*A+b*B+S*z+x*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+s*l*d-i*c*d-s*o*h+r*c*h+i*o*f-r*l*f)+m*(+t*l*f-t*c*h+s*a*h-i*a*f+i*c*u-s*l*u)+v*(+t*c*d-t*o*f-s*a*d+r*a*f+s*o*u-r*c*u)+g*(-i*o*u-t*l*d+t*o*h+i*a*d-r*a*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=d*v*c-m*h*c+m*l*f-o*v*f-d*l*g+o*h*g,b=p*h*c-u*v*c-p*l*f+a*v*f+u*l*g-a*h*g,S=u*m*c-p*d*c+p*o*f-a*m*f-u*o*g+a*d*g,x=p*d*l-u*m*l-p*o*h+a*m*h+u*o*v-a*d*v,w=t*_+r*b+i*S+s*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return e[0]=_*M,e[1]=(m*h*s-d*v*s-m*i*f+r*v*f+d*i*g-r*h*g)*M,e[2]=(o*v*s-m*l*s+m*i*c-r*v*c-o*i*g+r*l*g)*M,e[3]=(d*l*s-o*h*s-d*i*c+r*h*c+o*i*f-r*l*f)*M,e[4]=b*M,e[5]=(u*v*s-p*h*s+p*i*f-t*v*f-u*i*g+t*h*g)*M,e[6]=(p*l*s-a*v*s-p*i*c+t*v*c+a*i*g-t*l*g)*M,e[7]=(a*h*s-u*l*s+u*i*c-t*h*c-a*i*f+t*l*f)*M,e[8]=S*M,e[9]=(p*d*s-u*m*s-p*r*f+t*m*f+u*r*g-t*d*g)*M,e[10]=(a*m*s-p*o*s+p*r*c-t*m*c-a*r*g+t*o*g)*M,e[11]=(u*o*s-a*d*s-u*r*c+t*d*c+a*r*f-t*o*f)*M,e[12]=x*M,e[13]=(u*m*i-p*d*i+p*r*h-t*m*h-u*r*v+t*d*v)*M,e[14]=(p*o*i-a*m*i-p*r*l+t*m*l+a*r*v-t*o*v)*M,e[15]=(a*d*i-u*o*i+u*r*l-t*d*l-a*r*h+t*o*h)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+r,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,h=s*c,f=s*u,p=s*d,m=a*u,v=a*d,g=o*d,_=l*c,b=l*u,S=l*d,x=r.x,w=r.y,M=r.z;return i[0]=(1-(m+g))*x,i[1]=(f+S)*x,i[2]=(p-b)*x,i[3]=0,i[4]=(f-S)*w,i[5]=(1-(h+g))*w,i[6]=(v+_)*w,i[7]=0,i[8]=(p+b)*M,i[9]=(v-_)*M,i[10]=(1-(h+m))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=om.set(i[0],i[1],i[2]).length();const a=om.set(i[4],i[5],i[6]).length(),o=om.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Xl.copy(this);const c=1/s,u=1/a,d=1/o;return Xl.elements[0]*=c,Xl.elements[1]*=c,Xl.elements[2]*=c,Xl.elements[4]*=u,Xl.elements[5]*=u,Xl.elements[6]*=u,Xl.elements[8]*=d,Xl.elements[9]*=d,Xl.elements[10]*=d,t.setFromRotationMatrix(Xl),r.x=s,r.y=a,r.z=o,this}makePerspective(e,t,r,i,s,a){const o=this.elements,l=2*s/(t-e),c=2*s/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),h=-(a+s)/(a-s),f=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,r,i,s,a){const o=this.elements,l=1/(t-e),c=1/(r-i),u=1/(a-s),d=(t+e)*l,h=(r+i)*c,f=(a+s)*u;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};const om=new Qe,Xl=new Wn,i$e=new Qe(0,0,0),s$e=new Qe(1,1,1),nf=new Qe,Ux=new Qe,Lo=new Qe,rH=new Wn,iH=new na;let id=class zee{constructor(e=0,t=0,r=0,i=zee.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(As(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-As(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(As(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-As(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(As(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-As(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return rH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rH,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return iH.setFromEuler(this),this.setFromQuaternion(iH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};id.DefaultOrder="XYZ";id.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];let bk=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},a$e=0;const sH=new Qe,lm=new na,Du=new Wn,Hx=new Qe,e1=new Qe,o$e=new Qe,l$e=new na,aH=new Qe(1,0,0),oH=new Qe(0,1,0),lH=new Qe(0,0,1),c$e={type:"added"},cH={type:"removed"};let $i=class W5 extends bh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:a$e++}),this.uuid=Dl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=W5.DefaultUp.clone();const e=new Qe,t=new id,r=new na,i=new Qe(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Wn},normalMatrix:{value:new El}}),this.matrix=new Wn,this.matrixWorld=new Wn,this.matrixAutoUpdate=W5.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new bk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lm.setFromAxisAngle(e,t),this.quaternion.multiply(lm),this}rotateOnWorldAxis(e,t){return lm.setFromAxisAngle(e,t),this.quaternion.premultiply(lm),this}rotateX(e){return this.rotateOnAxis(aH,e)}rotateY(e){return this.rotateOnAxis(oH,e)}rotateZ(e){return this.rotateOnAxis(lH,e)}translateOnAxis(e,t){return sH.copy(e).applyQuaternion(this.quaternion),this.position.add(sH.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(aH,e)}translateY(e){return this.translateOnAxis(oH,e)}translateZ(e){return this.translateOnAxis(lH,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Du.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Hx.copy(e):Hx.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),e1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Du.lookAt(e1,Hx,this.up):Du.lookAt(Hx,e1,this.up),this.quaternion.setFromRotationMatrix(Du),i&&(Du.extractRotation(i.matrixWorld),lm.setFromRotationMatrix(Du),this.quaternion.premultiply(lm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(c$e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(cH)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(cH)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Du.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Du.multiply(e.parent.matrixWorld)),e.applyMatrix4(Du),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e1,e,o$e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e1,l$e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),h=a(e.skeletons),f=a(e.animations),p=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}};$i.DefaultUp=new Qe(0,1,0);$i.DefaultMatrixAutoUpdate=!0;const jl=new Qe,Lu=new Qe,e4=new Qe,ku=new Qe,cm=new Qe,um=new Qe,uH=new Qe,t4=new Qe,n4=new Qe,r4=new Qe;let nb=class Xm{constructor(e=new Qe,t=new Qe,r=new Qe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),jl.subVectors(e,t),i.cross(jl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){jl.subVectors(i,t),Lu.subVectors(r,t),e4.subVectors(e,t);const a=jl.dot(jl),o=jl.dot(Lu),l=jl.dot(e4),c=Lu.dot(Lu),u=Lu.dot(e4),d=a*c-o*o;if(d===0)return s.set(-2,-1,-1);const h=1/d,f=(c*l-o*u)*h,p=(a*u-o*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ku),ku.x>=0&&ku.y>=0&&ku.x+ku.y<=1}static getUV(e,t,r,i,s,a,o,l){return this.getBarycoord(e,t,r,i,ku),l.set(0,0),l.addScaledVector(s,ku.x),l.addScaledVector(a,ku.y),l.addScaledVector(o,ku.z),l}static isFrontFacing(e,t,r,i){return jl.subVectors(r,t),Lu.subVectors(e,t),jl.cross(Lu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jl.subVectors(this.c,this.b),Lu.subVectors(this.a,this.b),jl.cross(Lu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xm.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xm.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Xm.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Xm.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xm.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let a,o;cm.subVectors(i,r),um.subVectors(s,r),t4.subVectors(e,r);const l=cm.dot(t4),c=um.dot(t4);if(l<=0&&c<=0)return t.copy(r);n4.subVectors(e,i);const u=cm.dot(n4),d=um.dot(n4);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(r).addScaledVector(cm,a);r4.subVectors(e,s);const f=cm.dot(r4),p=um.dot(r4);if(p>=0&&f<=p)return t.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(r).addScaledVector(um,o);const v=u*p-f*d;if(v<=0&&d-u>=0&&f-p>=0)return uH.subVectors(s,i),o=(d-u)/(d-u+(f-p)),t.copy(i).addScaledVector(uH,o);const g=1/(v+m+h);return a=m*g,o=h*g,t.copy(r).addScaledVector(cm,a).addScaledVector(um,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},u$e=0,ws=class extends bh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:u$e++}),this.uuid=Dl(),this.name="",this.type="Material",this.blending=Nv,this.side=ch,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Mee,this.blendDst=Tee,this.blendEquation=Ym,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=z5,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=FVe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$E,this.stencilZFail=$E,this.stencilZPass=$E,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===$He;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Nv&&(r.blending=this.blending),this.side!==ch&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},oc=class extends ws{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=UT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const _s=new Qe,Vx=new qt;let ss=class{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=U5,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new wn),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new qt),t[r++]=a.x,t[r++]=a.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Qe),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new ni),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Vx.fromBufferAttribute(this,t),Vx.applyMatrix3(e),this.setXY(t,Vx.x,Vx.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)_s.fromBufferAttribute(this,t),_s.applyMatrix3(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)_s.fromBufferAttribute(this,t),_s.applyMatrix4(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)_s.fromBufferAttribute(this,t),_s.applyNormalMatrix(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)_s.fromBufferAttribute(this,t),_s.transformDirection(e),this.setXYZ(t,_s.x,_s.y,_s.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==U5&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},_k=class extends ss{constructor(e,t,r){super(new Uint16Array(e),t,r)}},Uee=class extends ss{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Pn=class extends ss{constructor(e,t,r){super(new Float32Array(e),t,r)}},d$e=0;const al=new Wn,i4=new $i,dm=new Qe,ko=new w0,t1=new w0,Us=new Qe;let Vr=class Hee extends bh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:d$e++}),this.uuid=Dl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Lee(e)?Uee:_k)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new El().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return al.makeRotationFromQuaternion(e),this.applyMatrix4(al),this}rotateX(e){return al.makeRotationX(e),this.applyMatrix4(al),this}rotateY(e){return al.makeRotationY(e),this.applyMatrix4(al),this}rotateZ(e){return al.makeRotationZ(e),this.applyMatrix4(al),this}translate(e,t,r){return al.makeTranslation(e,t,r),this.applyMatrix4(al),this}scale(e,t,r){return al.makeScale(e,t,r),this.applyMatrix4(al),this}lookAt(e){return i4.lookAt(e),i4.updateMatrix(),this.applyMatrix4(i4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dm).negate(),this.translate(dm.x,dm.y,dm.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Pn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new w0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Qe(-1/0,-1/0,-1/0),new Qe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ko.setFromBufferAttribute(s),this.morphTargetsRelative?(Us.addVectors(this.boundingBox.min,ko.min),this.boundingBox.expandByPoint(Us),Us.addVectors(this.boundingBox.max,ko.max),this.boundingBox.expandByPoint(Us)):(this.boundingBox.expandByPoint(ko.min),this.boundingBox.expandByPoint(ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new C0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Qe,1/0);return}if(e){const r=this.boundingSphere.center;if(ko.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];t1.setFromBufferAttribute(o),this.morphTargetsRelative?(Us.addVectors(ko.min,t1.min),ko.expandByPoint(Us),Us.addVectors(ko.max,t1.max),ko.expandByPoint(Us)):(ko.expandByPoint(t1.min),ko.expandByPoint(t1.max))}ko.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)Us.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Us));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Us.fromBufferAttribute(o,c),l&&(dm.fromBufferAttribute(e,c),Us.add(dm)),i=Math.max(i,r.distanceToSquared(Us))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,a=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ss(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let T=0;T<o;T++)c[T]=new Qe,u[T]=new Qe;const d=new Qe,h=new Qe,f=new Qe,p=new qt,m=new qt,v=new qt,g=new Qe,_=new Qe;function b(T,I,D){d.fromArray(i,T*3),h.fromArray(i,I*3),f.fromArray(i,D*3),p.fromArray(a,T*2),m.fromArray(a,I*2),v.fromArray(a,D*2),h.sub(d),f.sub(d),m.sub(p),v.sub(p);const B=1/(m.x*v.y-v.x*m.y);isFinite(B)&&(g.copy(h).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(B),_.copy(f).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(B),c[T].add(g),c[I].add(g),c[D].add(g),u[T].add(_),u[I].add(_),u[D].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let T=0,I=S.length;T<I;++T){const D=S[T],B=D.start,O=D.count;for(let H=B,L=B+O;H<L;H+=3)b(r[H+0],r[H+1],r[H+2])}const x=new Qe,w=new Qe,M=new Qe,C=new Qe;function A(T){M.fromArray(s,T*3),C.copy(M);const I=c[T];x.copy(I),x.sub(M.multiplyScalar(M.dot(I))).normalize(),w.crossVectors(C,I);const B=w.dot(u[T])<0?-1:1;l[T*4]=x.x,l[T*4+1]=x.y,l[T*4+2]=x.z,l[T*4+3]=B}for(let T=0,I=S.length;T<I;++T){const D=S[T],B=D.start,O=D.count;for(let H=B,L=B+O;H<L;H+=3)A(r[H+0]),A(r[H+1]),A(r[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ss(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new Qe,s=new Qe,a=new Qe,o=new Qe,l=new Qe,c=new Qe,u=new Qe,d=new Qe;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),c.fromBufferAttribute(r,v),o.add(u),l.add(u),c.add(u),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const a=r[i].array,o=e.attributes[i],l=o.array,c=o.itemSize*t,u=Math.min(l.length,a.length-c);for(let d=0,h=c;d<u;d++,h++)a[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Us.fromBufferAttribute(e,t),Us.normalize(),e.setXYZ(t,Us.x,Us.y,Us.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?f=l[m]*o.data.stride+o.offset:f=l[m]*u;for(let g=0;g<u;g++)h[p++]=c[f++]}return new ss(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Hee,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const h=c[u],f=e(h,r);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}};const dH=new Wn,fm=new HT,s4=new C0,rf=new Qe,sf=new Qe,af=new Qe,a4=new Qe,o4=new Qe,l4=new Qe,$x=new Qe,Gx=new Qe,Wx=new Qe,qx=new qt,Kx=new qt,Yx=new qt,c4=new Qe,Xx=new Qe;let Ds=class extends $i{constructor(e=new Vr,t=new oc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),s4.copy(r.boundingSphere),s4.applyMatrix4(s),e.ray.intersectsSphere(s4)===!1)||(dH.copy(s).invert(),fm.copy(e.ray).applyMatrix4(dH),r.boundingBox!==null&&fm.intersectsBox(r.boundingBox)===!1))return;let a;const o=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,d=r.attributes.uv,h=r.attributes.uv2,f=r.groups,p=r.drawRange;if(o!==null)if(Array.isArray(i))for(let m=0,v=f.length;m<v;m++){const g=f[m],_=i[g.materialIndex],b=Math.max(g.start,p.start),S=Math.min(o.count,Math.min(g.start+g.count,p.start+p.count));for(let x=b,w=S;x<w;x+=3){const M=o.getX(x),C=o.getX(x+1),A=o.getX(x+2);a=jx(this,_,e,fm,l,c,u,d,h,M,C,A),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let g=m,_=v;g<_;g+=3){const b=o.getX(g),S=o.getX(g+1),x=o.getX(g+2);a=jx(this,i,e,fm,l,c,u,d,h,b,S,x),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(i))for(let m=0,v=f.length;m<v;m++){const g=f[m],_=i[g.materialIndex],b=Math.max(g.start,p.start),S=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let x=b,w=S;x<w;x+=3){const M=x,C=x+1,A=x+2;a=jx(this,_,e,fm,l,c,u,d,h,M,C,A),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let g=m,_=v;g<_;g+=3){const b=g,S=g+1,x=g+2;a=jx(this,i,e,fm,l,c,u,d,h,b,S,x),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}}};function f$e(n,e,t,r,i,s,a,o){let l;if(e.side===dc?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side!==uh,o),l===null)return null;Xx.copy(o),Xx.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Xx);return c<t.near||c>t.far?null:{distance:c,point:Xx.clone(),object:n}}function jx(n,e,t,r,i,s,a,o,l,c,u,d){rf.fromBufferAttribute(i,c),sf.fromBufferAttribute(i,u),af.fromBufferAttribute(i,d);const h=n.morphTargetInfluences;if(s&&h){$x.set(0,0,0),Gx.set(0,0,0),Wx.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const v=h[p],g=s[p];v!==0&&(a4.fromBufferAttribute(g,c),o4.fromBufferAttribute(g,u),l4.fromBufferAttribute(g,d),a?($x.addScaledVector(a4,v),Gx.addScaledVector(o4,v),Wx.addScaledVector(l4,v)):($x.addScaledVector(a4.sub(rf),v),Gx.addScaledVector(o4.sub(sf),v),Wx.addScaledVector(l4.sub(af),v)))}rf.add($x),sf.add(Gx),af.add(Wx)}n.isSkinnedMesh&&(n.boneTransform(c,rf),n.boneTransform(u,sf),n.boneTransform(d,af));const f=f$e(n,e,t,r,rf,sf,af,c4);if(f){o&&(qx.fromBufferAttribute(o,c),Kx.fromBufferAttribute(o,u),Yx.fromBufferAttribute(o,d),f.uv=nb.getUV(c4,rf,sf,af,qx,Kx,Yx,new qt)),l&&(qx.fromBufferAttribute(l,c),Kx.fromBufferAttribute(l,u),Yx.fromBufferAttribute(l,d),f.uv2=nb.getUV(c4,rf,sf,af,qx,Kx,Yx,new qt));const p={a:c,b:u,c:d,normal:new Qe,materialIndex:0};nb.getNormal(rf,sf,af,p.normal),f.face=p}return f}let p_=class Vee extends Vr{constructor(e=1,t=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let h=0,f=0;p("z","y","x",-1,-1,r,t,e,a,s,0),p("z","y","x",1,-1,r,t,-e,a,s,1),p("x","z","y",1,1,e,r,t,i,a,2),p("x","z","y",1,-1,e,r,-t,i,a,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Pn(c,3)),this.setAttribute("normal",new Pn(u,3)),this.setAttribute("uv",new Pn(d,2));function p(m,v,g,_,b,S,x,w,M,C,A){const T=S/M,I=x/C,D=S/2,B=x/2,O=w/2,H=M+1,L=C+1;let z=0,k=0;const F=new Qe;for(let W=0;W<L;W++){const q=W*I-B;for(let Z=0;Z<H;Z++){const se=Z*T-D;F[m]=se*_,F[v]=q*b,F[g]=O,c.push(F.x,F.y,F.z),F[m]=0,F[v]=0,F[g]=w>0?1:-1,u.push(F.x,F.y,F.z),d.push(Z/M),d.push(1-W/C),z+=1}}for(let W=0;W<C;W++)for(let q=0;q<M;q++){const Z=h+q+H*W,se=h+q+H*(W+1),X=h+(q+1)+H*(W+1),ie=h+(q+1)+H*W;l.push(Z,se,ie),l.push(se,X,ie),k+=6}o.addGroup(f,k,A),f+=k,h+=z}}static fromJSON(e){return new Vee(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function mg(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function va(n){const e={};for(let t=0;t<n.length;t++){const r=mg(n[t]);for(const i in r)e[i]=r[i]}return e}function h$e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const p$e={clone:mg,merge:va};var m$e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,v$e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Cd=class extends ws{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=m$e,this.fragmentShader=v$e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mg(e.uniforms),this.uniformsGroups=h$e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},$ee=class extends $i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wn,this.projectionMatrix=new Wn,this.projectionMatrixInverse=new Wn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Es=class extends $ee{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=f_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Fv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return f_*2*Math.atan(Math.tan(Fv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Fv*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const hm=90,pm=1;let g$e=class extends $i{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new Es(hm,pm,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Qe(1,0,0)),this.add(i);const s=new Es(hm,pm,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Qe(-1,0,0)),this.add(s);const a=new Es(hm,pm,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Qe(0,1,0)),this.add(a);const o=new Es(hm,pm,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Qe(0,-1,0)),this.add(o);const l=new Es(hm,pm,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Qe(0,0,1)),this.add(l);const c=new Es(hm,pm,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Qe(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,a,o,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=fd,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,o),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}},Sk=class extends sa{constructor(e,t,r,i,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:s0,super(e,t,r,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},y$e=class extends l0{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Sk(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:xs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new p_(5,5,5),s=new Cd({name:"CubemapFromEquirect",uniforms:mg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:dc,blending:Wf});s.uniforms.tEquirect.value=t;const a=new Ds(i,s),o=t.minFilter;return t.minFilter===zd&&(t.minFilter=xs),new g$e(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(s)}};const u4=new Qe,b$e=new Qe,_$e=new El;let op=class{constructor(e=new Qe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=u4.subVectors(r,t).cross(b$e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(u4),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||_$e.getNormalMatrix(e),i=this.coplanarPoint(u4).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const mm=new C0,Zx=new Qe;let xk=class{constructor(e=new op,t=new op,r=new op,i=new op,s=new op,a=new op){this.planes=[e,t,r,i,s,a]}set(e,t,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],a=r[2],o=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],_=r[14],b=r[15];return t[0].setComponents(o-i,d-l,m-h,b-v).normalize(),t[1].setComponents(o+i,d+l,m+h,b+v).normalize(),t[2].setComponents(o+s,d+c,m+f,b+g).normalize(),t[3].setComponents(o-s,d-c,m-f,b-g).normalize(),t[4].setComponents(o-a,d-u,m-p,b-_).normalize(),t[5].setComponents(o+a,d+u,m+p,b+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),mm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(mm)}intersectsSprite(e){return mm.center.set(0,0,0),mm.radius=.7071067811865476,mm.applyMatrix4(e.matrixWorld),this.intersectsSphere(mm)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Zx.x=i.normal.x>0?e.max.x:e.min.x,Zx.y=i.normal.y>0?e.max.y:e.min.y,Zx.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Zx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Gee(){let n=null,e=!1,t=null,r=null;function i(s,a){t(s,a),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function S$e(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,h=c.usage,f=n.createBuffer();n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback();let p;if(d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else if(d instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),f.count===-1?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d===void 0?r.set(c,i(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:a,remove:o,update:l}}let q5=class Wee extends Vr{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(r),l=Math.floor(i),c=o+1,u=l+1,d=e/o,h=t/l,f=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const _=g*h-a;for(let b=0;b<c;b++){const S=b*d-s;p.push(S,-_,0),m.push(0,0,1),v.push(b/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<o;_++){const b=_+c*g,S=_+c*(g+1),x=_+1+c*(g+1),w=_+1+c*g;f.push(b,S,w),f.push(S,x,w)}this.setIndex(f),this.setAttribute("position",new Pn(p,3)),this.setAttribute("normal",new Pn(m,3)),this.setAttribute("uv",new Pn(v,2))}static fromJSON(e){return new Wee(e.width,e.height,e.widthSegments,e.heightSegments)}};var x$e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,w$e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C$e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,M$e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,T$e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,A$e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,E$e="vec3 transformed = vec3( position );",I$e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,R$e=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,P$e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,D$e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,L$e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,k$e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,O$e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,N$e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,B$e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,F$e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,z$e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,U$e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,H$e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,V$e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$$e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,G$e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,W$e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,q$e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,K$e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Y$e="gl_FragColor = linearToOutputTexel( gl_FragColor );",X$e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,j$e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Z$e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Q$e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,J$e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eGe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tGe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nGe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rGe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iGe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sGe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,aGe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,oGe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lGe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,cGe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,uGe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,dGe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fGe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,hGe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,pGe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,mGe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,vGe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gGe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yGe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bGe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,_Ge=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SGe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xGe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,wGe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,CGe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,MGe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,TGe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,AGe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,EGe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,IGe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,RGe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,PGe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,DGe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,LGe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,kGe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,OGe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NGe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BGe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FGe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zGe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,UGe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,HGe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,VGe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,$Ge=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,GGe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WGe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,qGe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KGe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,YGe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,XGe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,jGe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZGe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,QGe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,JGe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,eWe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,tWe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,nWe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rWe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,iWe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,sWe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,aWe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oWe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,lWe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cWe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,uWe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,dWe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,fWe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,hWe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,pWe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,mWe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,vWe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gWe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,yWe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bWe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_We=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,SWe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xWe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wWe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CWe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,MWe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TWe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,AWe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,EWe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,IWe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RWe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PWe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,DWe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LWe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kWe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OWe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,NWe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BWe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,FWe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zWe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UWe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HWe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,VWe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$We=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GWe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WWe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qWe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KWe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YWe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,XWe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jWe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Br={alphamap_fragment:x$e,alphamap_pars_fragment:w$e,alphatest_fragment:C$e,alphatest_pars_fragment:M$e,aomap_fragment:T$e,aomap_pars_fragment:A$e,begin_vertex:E$e,beginnormal_vertex:I$e,bsdfs:R$e,iridescence_fragment:P$e,bumpmap_pars_fragment:D$e,clipping_planes_fragment:L$e,clipping_planes_pars_fragment:k$e,clipping_planes_pars_vertex:O$e,clipping_planes_vertex:N$e,color_fragment:B$e,color_pars_fragment:F$e,color_pars_vertex:z$e,color_vertex:U$e,common:H$e,cube_uv_reflection_fragment:V$e,defaultnormal_vertex:$$e,displacementmap_pars_vertex:G$e,displacementmap_vertex:W$e,emissivemap_fragment:q$e,emissivemap_pars_fragment:K$e,encodings_fragment:Y$e,encodings_pars_fragment:X$e,envmap_fragment:j$e,envmap_common_pars_fragment:Z$e,envmap_pars_fragment:Q$e,envmap_pars_vertex:J$e,envmap_physical_pars_fragment:uGe,envmap_vertex:eGe,fog_vertex:tGe,fog_pars_vertex:nGe,fog_fragment:rGe,fog_pars_fragment:iGe,gradientmap_pars_fragment:sGe,lightmap_fragment:aGe,lightmap_pars_fragment:oGe,lights_lambert_vertex:lGe,lights_pars_begin:cGe,lights_toon_fragment:dGe,lights_toon_pars_fragment:fGe,lights_phong_fragment:hGe,lights_phong_pars_fragment:pGe,lights_physical_fragment:mGe,lights_physical_pars_fragment:vGe,lights_fragment_begin:gGe,lights_fragment_maps:yGe,lights_fragment_end:bGe,logdepthbuf_fragment:_Ge,logdepthbuf_pars_fragment:SGe,logdepthbuf_pars_vertex:xGe,logdepthbuf_vertex:wGe,map_fragment:CGe,map_pars_fragment:MGe,map_particle_fragment:TGe,map_particle_pars_fragment:AGe,metalnessmap_fragment:EGe,metalnessmap_pars_fragment:IGe,morphcolor_vertex:RGe,morphnormal_vertex:PGe,morphtarget_pars_vertex:DGe,morphtarget_vertex:LGe,normal_fragment_begin:kGe,normal_fragment_maps:OGe,normal_pars_fragment:NGe,normal_pars_vertex:BGe,normal_vertex:FGe,normalmap_pars_fragment:zGe,clearcoat_normal_fragment_begin:UGe,clearcoat_normal_fragment_maps:HGe,clearcoat_pars_fragment:VGe,iridescence_pars_fragment:$Ge,output_fragment:GGe,packing:WGe,premultiplied_alpha_fragment:qGe,project_vertex:KGe,dithering_fragment:YGe,dithering_pars_fragment:XGe,roughnessmap_fragment:jGe,roughnessmap_pars_fragment:ZGe,shadowmap_pars_fragment:QGe,shadowmap_pars_vertex:JGe,shadowmap_vertex:eWe,shadowmask_pars_fragment:tWe,skinbase_vertex:nWe,skinning_pars_vertex:rWe,skinning_vertex:iWe,skinnormal_vertex:sWe,specularmap_fragment:aWe,specularmap_pars_fragment:oWe,tonemapping_fragment:lWe,tonemapping_pars_fragment:cWe,transmission_fragment:uWe,transmission_pars_fragment:dWe,uv_pars_fragment:fWe,uv_pars_vertex:hWe,uv_vertex:pWe,uv2_pars_fragment:mWe,uv2_pars_vertex:vWe,uv2_vertex:gWe,worldpos_vertex:yWe,background_vert:bWe,background_frag:_We,cube_vert:SWe,cube_frag:xWe,depth_vert:wWe,depth_frag:CWe,distanceRGBA_vert:MWe,distanceRGBA_frag:TWe,equirect_vert:AWe,equirect_frag:EWe,linedashed_vert:IWe,linedashed_frag:RWe,meshbasic_vert:PWe,meshbasic_frag:DWe,meshlambert_vert:LWe,meshlambert_frag:kWe,meshmatcap_vert:OWe,meshmatcap_frag:NWe,meshnormal_vert:BWe,meshnormal_frag:FWe,meshphong_vert:zWe,meshphong_frag:UWe,meshphysical_vert:HWe,meshphysical_frag:VWe,meshtoon_vert:$We,meshtoon_frag:GWe,points_vert:WWe,points_frag:qWe,shadow_vert:KWe,shadow_frag:YWe,sprite_vert:XWe,sprite_frag:jWe},En={common:{diffuse:{value:new wn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new El},uv2Transform:{value:new El},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new qt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new El}},sprite:{diffuse:{value:new wn(16777215)},opacity:{value:1},center:{value:new qt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new El}}},Hc={basic:{uniforms:va([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.fog]),vertexShader:Br.meshbasic_vert,fragmentShader:Br.meshbasic_frag},lambert:{uniforms:va([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.fog,En.lights,{emissive:{value:new wn(0)}}]),vertexShader:Br.meshlambert_vert,fragmentShader:Br.meshlambert_frag},phong:{uniforms:va([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.fog,En.lights,{emissive:{value:new wn(0)},specular:{value:new wn(1118481)},shininess:{value:30}}]),vertexShader:Br.meshphong_vert,fragmentShader:Br.meshphong_frag},standard:{uniforms:va([En.common,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.roughnessmap,En.metalnessmap,En.fog,En.lights,{emissive:{value:new wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Br.meshphysical_vert,fragmentShader:Br.meshphysical_frag},toon:{uniforms:va([En.common,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.gradientmap,En.fog,En.lights,{emissive:{value:new wn(0)}}]),vertexShader:Br.meshtoon_vert,fragmentShader:Br.meshtoon_frag},matcap:{uniforms:va([En.common,En.bumpmap,En.normalmap,En.displacementmap,En.fog,{matcap:{value:null}}]),vertexShader:Br.meshmatcap_vert,fragmentShader:Br.meshmatcap_frag},points:{uniforms:va([En.points,En.fog]),vertexShader:Br.points_vert,fragmentShader:Br.points_frag},dashed:{uniforms:va([En.common,En.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Br.linedashed_vert,fragmentShader:Br.linedashed_frag},depth:{uniforms:va([En.common,En.displacementmap]),vertexShader:Br.depth_vert,fragmentShader:Br.depth_frag},normal:{uniforms:va([En.common,En.bumpmap,En.normalmap,En.displacementmap,{opacity:{value:1}}]),vertexShader:Br.meshnormal_vert,fragmentShader:Br.meshnormal_frag},sprite:{uniforms:va([En.sprite,En.fog]),vertexShader:Br.sprite_vert,fragmentShader:Br.sprite_frag},background:{uniforms:{uvTransform:{value:new El},t2D:{value:null}},vertexShader:Br.background_vert,fragmentShader:Br.background_frag},cube:{uniforms:va([En.envmap,{opacity:{value:1}}]),vertexShader:Br.cube_vert,fragmentShader:Br.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Br.equirect_vert,fragmentShader:Br.equirect_frag},distanceRGBA:{uniforms:va([En.common,En.displacementmap,{referencePosition:{value:new Qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Br.distanceRGBA_vert,fragmentShader:Br.distanceRGBA_frag},shadow:{uniforms:va([En.lights,En.fog,{color:{value:new wn(0)},opacity:{value:1}}]),vertexShader:Br.shadow_vert,fragmentShader:Br.shadow_frag}};Hc.physical={uniforms:va([Hc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new qt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new wn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new qt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new wn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new wn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Br.meshphysical_vert,fragmentShader:Br.meshphysical_frag};function ZWe(n,e,t,r,i,s){const a=new wn(0);let o=i===!0?0:1,l,c,u=null,d=0,h=null;function f(m,v){let g=!1,_=v.isScene===!0?v.background:null;_&&_.isTexture&&(_=e.get(_));const b=n.xr,S=b.getSession&&b.getSession();S&&S.environmentBlendMode==="additive"&&(_=null),_===null?p(a,o):_&&_.isColor&&(p(_,1),g=!0),(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===oS)?(c===void 0&&(c=new Ds(new p_(1,1,1),new Cd({name:"BackgroundCubeMaterial",uniforms:mg(Hc.cube.uniforms),vertexShader:Hc.cube.vertexShader,fragmentShader:Hc.cube.fragmentShader,side:dc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,w,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(u!==_||d!==_.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=_,d=_.version,h=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new Ds(new q5(2,2),new Cd({name:"BackgroundMaterial",uniforms:mg(Hc.background.uniforms),vertexShader:Hc.background.vertexShader,fragmentShader:Hc.background.fragmentShader,side:ch,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(u!==_||d!==_.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=_,d=_.version,h=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,v){t.buffers.color.setClear(m.r,m.g,m.b,v,s)}return{getClearColor:function(){return a},setClearColor:function(m,v=1){a.set(m),o=v,p(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,p(a,o)},render:f}}function QWe(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,o={},l=v(null);let c=l,u=!1;function d(O,H,L,z,k){let F=!1;if(a){const W=m(z,L,H);c!==W&&(c=W,f(c.object)),F=g(O,z,L,k),F&&_(O,z,L,k)}else{const W=H.wireframe===!0;(c.geometry!==z.id||c.program!==L.id||c.wireframe!==W)&&(c.geometry=z.id,c.program=L.id,c.wireframe=W,F=!0)}k!==null&&t.update(k,34963),(F||u)&&(u=!1,C(O,H,L,z),k!==null&&n.bindBuffer(34963,t.get(k).buffer))}function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(O){return r.isWebGL2?n.bindVertexArray(O):s.bindVertexArrayOES(O)}function p(O){return r.isWebGL2?n.deleteVertexArray(O):s.deleteVertexArrayOES(O)}function m(O,H,L){const z=L.wireframe===!0;let k=o[O.id];k===void 0&&(k={},o[O.id]=k);let F=k[H.id];F===void 0&&(F={},k[H.id]=F);let W=F[z];return W===void 0&&(W=v(h()),F[z]=W),W}function v(O){const H=[],L=[],z=[];for(let k=0;k<i;k++)H[k]=0,L[k]=0,z[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:L,attributeDivisors:z,object:O,attributes:{},index:null}}function g(O,H,L,z){const k=c.attributes,F=H.attributes;let W=0;const q=L.getAttributes();for(const Z in q)if(q[Z].location>=0){const X=k[Z];let ie=F[Z];if(ie===void 0&&(Z==="instanceMatrix"&&O.instanceMatrix&&(ie=O.instanceMatrix),Z==="instanceColor"&&O.instanceColor&&(ie=O.instanceColor)),X===void 0||X.attribute!==ie||ie&&X.data!==ie.data)return!0;W++}return c.attributesNum!==W||c.index!==z}function _(O,H,L,z){const k={},F=H.attributes;let W=0;const q=L.getAttributes();for(const Z in q)if(q[Z].location>=0){let X=F[Z];X===void 0&&(Z==="instanceMatrix"&&O.instanceMatrix&&(X=O.instanceMatrix),Z==="instanceColor"&&O.instanceColor&&(X=O.instanceColor));const ie={};ie.attribute=X,X&&X.data&&(ie.data=X.data),k[Z]=ie,W++}c.attributes=k,c.attributesNum=W,c.index=z}function b(){const O=c.newAttributes;for(let H=0,L=O.length;H<L;H++)O[H]=0}function S(O){x(O,0)}function x(O,H){const L=c.newAttributes,z=c.enabledAttributes,k=c.attributeDivisors;L[O]=1,z[O]===0&&(n.enableVertexAttribArray(O),z[O]=1),k[O]!==H&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,H),k[O]=H)}function w(){const O=c.newAttributes,H=c.enabledAttributes;for(let L=0,z=H.length;L<z;L++)H[L]!==O[L]&&(n.disableVertexAttribArray(L),H[L]=0)}function M(O,H,L,z,k,F){r.isWebGL2===!0&&(L===5124||L===5125)?n.vertexAttribIPointer(O,H,L,k,F):n.vertexAttribPointer(O,H,L,z,k,F)}function C(O,H,L,z){if(r.isWebGL2===!1&&(O.isInstancedMesh||z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const k=z.attributes,F=L.getAttributes(),W=H.defaultAttributeValues;for(const q in F){const Z=F[q];if(Z.location>=0){let se=k[q];if(se===void 0&&(q==="instanceMatrix"&&O.instanceMatrix&&(se=O.instanceMatrix),q==="instanceColor"&&O.instanceColor&&(se=O.instanceColor)),se!==void 0){const X=se.normalized,ie=se.itemSize,ae=t.get(se);if(ae===void 0)continue;const ce=ae.buffer,we=ae.type,He=ae.bytesPerElement;if(se.isInterleavedBufferAttribute){const Ge=se.data,me=Ge.stride,be=se.offset;if(Ge.isInstancedInterleavedBuffer){for(let oe=0;oe<Z.locationSize;oe++)x(Z.location+oe,Ge.meshPerAttribute);O.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let oe=0;oe<Z.locationSize;oe++)S(Z.location+oe);n.bindBuffer(34962,ce);for(let oe=0;oe<Z.locationSize;oe++)M(Z.location+oe,ie/Z.locationSize,we,X,me*He,(be+ie/Z.locationSize*oe)*He)}else{if(se.isInstancedBufferAttribute){for(let Ge=0;Ge<Z.locationSize;Ge++)x(Z.location+Ge,se.meshPerAttribute);O.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ge=0;Ge<Z.locationSize;Ge++)S(Z.location+Ge);n.bindBuffer(34962,ce);for(let Ge=0;Ge<Z.locationSize;Ge++)M(Z.location+Ge,ie/Z.locationSize,we,X,ie*He,ie/Z.locationSize*Ge*He)}}else if(W!==void 0){const X=W[q];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(Z.location,X);break;case 3:n.vertexAttrib3fv(Z.location,X);break;case 4:n.vertexAttrib4fv(Z.location,X);break;default:n.vertexAttrib1fv(Z.location,X)}}}}w()}function A(){D();for(const O in o){const H=o[O];for(const L in H){const z=H[L];for(const k in z)p(z[k].object),delete z[k];delete H[L]}delete o[O]}}function T(O){if(o[O.id]===void 0)return;const H=o[O.id];for(const L in H){const z=H[L];for(const k in z)p(z[k].object),delete z[k];delete H[L]}delete o[O.id]}function I(O){for(const H in o){const L=o[H];if(L[O.id]===void 0)continue;const z=L[O.id];for(const k in z)p(z[k].object),delete z[k];delete L[O.id]}}function D(){B(),u=!0,c!==l&&(c=l,f(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:D,resetDefaultState:B,dispose:A,releaseStatesOfGeometry:T,releaseStatesOfProgram:I,initAttributes:b,enableAttribute:S,disableUnusedAttributes:w}}function JWe(n,e,t,r){const i=r.isWebGL2;let s;function a(c){s=c}function o(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let h,f;if(i)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](s,c,u,d),t.update(u,s,d)}this.setMode=a,this.render=o,this.renderInstances=l}function eqe(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(M){if(M==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),v=n.getParameter(36347),g=n.getParameter(36348),_=n.getParameter(36349),b=h>0,S=a||e.has("OES_texture_float"),x=b&&S,w=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:b,floatFragmentTextures:S,floatVertexTextures:x,maxSamples:w}}function tqe(n){const e=this;let t=null,r=0,i=!1,s=!1;const a=new op,o=new El,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=d.length!==0||h||r!==0||i;return i=h,t=u(d,f,0),r=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!i||p===null||p.length===0||s&&!v)s?u(null):c();else{const _=s?0:r,b=_*4;let S=g.clippingState||null;l.value=S,S=u(p,h,b,f);for(let x=0;x!==b;++x)S[x]=t[x];g.clippingState=S,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=f+m*4,_=h.matrixWorldInverse;o.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let b=0,S=f;b!==m;++b,S+=4)a.copy(d[b]).applyMatrix4(_,o),a.normal.toArray(v,S),v[S+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function nqe(n){let e=new WeakMap;function t(a,o){return o===l_?a.mapping=s0:o===ZC&&(a.mapping=a0),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===l_||o===ZC)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new y$e(l.height/2);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",i),t(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let Jg=class extends $ee{constructor(e=-1,t=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const fv=4,fH=[.125,.215,.35,.446,.526,.582],vp=20,d4=new Jg,hH=new wn;let f4=null;const lp=(1+Math.sqrt(5))/2,vm=1/lp,pH=[new Qe(1,1,1),new Qe(-1,1,1),new Qe(1,1,-1),new Qe(-1,1,-1),new Qe(0,lp,vm),new Qe(0,lp,-vm),new Qe(vm,0,lp),new Qe(-vm,0,lp),new Qe(lp,vm,0),new Qe(-lp,vm,0)];let mH=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){f4=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=yH(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gH(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(f4),e.scissorTest=!1,Qx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===s0||e.mapping===a0?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),f4=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:xs,minFilter:xs,generateMipmaps:!1,type:u_,format:Al,encoding:dh,depthBuffer:!1},i=vH(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=vH(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rqe(s)),this._blurMaterial=iqe(s,e,t)}return i}_compileMaterial(e){const t=new Ds(this._lodPlanes[0],e);this._renderer.compile(t,d4)}_sceneToCubeUV(e,t,r,i){const o=new Es(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(hH),u.toneMapping=fd,u.autoClear=!1;const f=new oc({name:"PMREM.Background",side:dc,depthWrite:!1,depthTest:!1}),p=new Ds(new p_,f);let m=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,m=!0):(f.color.copy(hH),m=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):_===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const b=this._cubeSize;Qx(i,_*b,g>2?b:0,b,b),u.setRenderTarget(i),m&&u.render(p,o),u.render(e,o)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===s0||e.mapping===a0;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=yH()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gH());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Ds(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Qx(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(a,d4)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=pH[(i-1)%pH.length];this._blur(e,i-1,i,s,a)}t.autoClear=r}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Ds(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*vp-1),m=s/p,v=isFinite(s)?1+Math.floor(u*m):vp;v>vp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${vp}`);const g=[];let _=0;for(let M=0;M<vp;++M){const C=M/m,A=Math.exp(-C*C/2);g.push(A),M===0?_+=A:M<v&&(_+=2*A)}for(let M=0;M<g.length;M++)g[M]=g[M]/_;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:b}=this;h.dTheta.value=p,h.mipInt.value=b-r;const S=this._sizeLods[i],x=3*S*(i>b-fv?i-b+fv:0),w=4*(this._cubeSize-S);Qx(t,x,w,3*S,2*S),l.setRenderTarget(t),l.render(d,d4)}};function rqe(n){const e=[],t=[],r=[];let i=n;const s=n-fv+1+fH.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>n-fv?l=fH[a-n+fv-1]:a===0&&(l=0),r.push(l);const c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,v=2,g=1,_=new Float32Array(m*p*f),b=new Float32Array(v*p*f),S=new Float32Array(g*p*f);for(let w=0;w<f;w++){const M=w%3*2/3-1,C=w>2?0:-1,A=[M,C,0,M+2/3,C,0,M+2/3,C+1,0,M,C,0,M+2/3,C+1,0,M,C+1,0];_.set(A,m*p*w),b.set(h,v*p*w);const T=[w,w,w,w,w,w];S.set(T,g*p*w)}const x=new Vr;x.setAttribute("position",new ss(_,m)),x.setAttribute("uv",new ss(b,v)),x.setAttribute("faceIndex",new ss(S,g)),e.push(x),i>fv&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function vH(n,e,t){const r=new l0(n,e,t);return r.texture.mapping=oS,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Qx(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function iqe(n,e,t){const r=new Float32Array(vp),i=new Qe(0,1,0);return new Cd({name:"SphericalGaussianBlur",defines:{n:vp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:wk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wf,depthTest:!1,depthWrite:!1})}function gH(){return new Cd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wf,depthTest:!1,depthWrite:!1})}function yH(){return new Cd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wf,depthTest:!1,depthWrite:!1})}function wk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sqe(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===l_||l===ZC,u=l===s0||l===a0;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new mH(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(c&&d&&d.height>0||u&&d&&i(d)){t===null&&(t=new mH(n));const h=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,h),o.addEventListener("dispose",s),h.texture}else return null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:a}}function aqe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function oqe(n,e,t,r){const i={},s=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",a),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(d,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const m=f[p];for(let v=0,g=m.length;v<g;v++)e.update(m[v],34962)}}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(f!==null){const _=f.array;m=f.version;for(let b=0,S=_.length;b<S;b+=3){const x=_[b+0],w=_[b+1],M=_[b+2];h.push(x,w,w,M,M,x)}}else{const _=p.array;m=p.version;for(let b=0,S=_.length/3-1;b<S;b+=3){const x=b+0,w=b+1,M=b+2;h.push(x,w,w,M,M,x)}}const v=new(Lee(h)?Uee:_k)(h,1);v.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,v)}function u(d){const h=s.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function lqe(n,e,t,r){const i=r.isWebGL2;let s;function a(h){s=h}let o,l;function c(h){o=h.type,l=h.bytesPerElement}function u(h,f){n.drawElements(s,f,o,h*l),t.update(f,s,1)}function d(h,f,p){if(p===0)return;let m,v;if(i)m=n,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,f,o,h*l,p),t.update(f,s,p)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=d}function cqe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function uqe(n,e){return n[0]-e[0]}function dqe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function h4(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Uint8Array?t=255:r instanceof Uint16Array?t=65535:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function fqe(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,a=new ni,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,d,h){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=p!==void 0?p.length:0;let v=s.get(u);if(v===void 0||v.count!==m){let b=function(){O.dispose(),s.delete(u),u.removeEventListener("dispose",b)};v!==void 0&&v.texture.dispose();const S=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let T=0;S===!0&&(T=1),x===!0&&(T=2),w===!0&&(T=3);let I=u.attributes.position.count*T,D=1;I>e.maxTextureSize&&(D=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const B=new Float32Array(I*D*4*m),O=new Bee(B,I,D,m);O.type=Uf,O.needsUpdate=!0;const H=T*4;for(let L=0;L<m;L++){const z=M[L],k=C[L],F=A[L],W=I*D*4*L;for(let q=0;q<z.count;q++){const Z=q*H;S===!0&&(a.fromBufferAttribute(z,q),z.normalized===!0&&h4(a,z),B[W+Z+0]=a.x,B[W+Z+1]=a.y,B[W+Z+2]=a.z,B[W+Z+3]=0),x===!0&&(a.fromBufferAttribute(k,q),k.normalized===!0&&h4(a,k),B[W+Z+4]=a.x,B[W+Z+5]=a.y,B[W+Z+6]=a.z,B[W+Z+7]=0),w===!0&&(a.fromBufferAttribute(F,q),F.normalized===!0&&h4(a,F),B[W+Z+8]=a.x,B[W+Z+9]=a.y,B[W+Z+10]=a.z,B[W+Z+11]=F.itemSize===4?a.w:1)}}v={count:m,texture:O,size:new qt(I,D)},s.set(u,v),u.addEventListener("dispose",b)}let g=0;for(let b=0;b<f.length;b++)g+=f[b];const _=u.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",_),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const p=f===void 0?0:f.length;let m=r[u.id];if(m===void 0||m.length!==p){m=[];for(let S=0;S<p;S++)m[S]=[S,0];r[u.id]=m}for(let S=0;S<p;S++){const x=m[S];x[0]=S,x[1]=f[S]}m.sort(dqe);for(let S=0;S<8;S++)S<p&&m[S][1]?(o[S][0]=m[S][0],o[S][1]=m[S][1]):(o[S][0]=Number.MAX_SAFE_INTEGER,o[S][1]=0);o.sort(uqe);const v=u.morphAttributes.position,g=u.morphAttributes.normal;let _=0;for(let S=0;S<8;S++){const x=o[S],w=x[0],M=x[1];w!==Number.MAX_SAFE_INTEGER&&M?(v&&u.getAttribute("morphTarget"+S)!==v[w]&&u.setAttribute("morphTarget"+S,v[w]),g&&u.getAttribute("morphNormal"+S)!==g[w]&&u.setAttribute("morphNormal"+S,g[w]),i[S]=M,_+=M):(v&&u.hasAttribute("morphTarget"+S)===!0&&u.deleteAttribute("morphTarget"+S),g&&u.hasAttribute("morphNormal"+S)===!0&&u.deleteAttribute("morphNormal"+S),i[S]=0)}const b=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",b),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function hqe(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const qee=new sa,Kee=new Bee,Yee=new n$e,Xee=new Sk,bH=[],_H=[],SH=new Float32Array(16),xH=new Float32Array(9),wH=new Float32Array(4);function ey(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=bH[i];if(s===void 0&&(s=new Float32Array(i),bH[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Za(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Qa(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function VT(n,e){let t=_H[e];t===void 0&&(t=new Int32Array(e),_H[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function pqe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function mqe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Za(t,e))return;n.uniform2fv(this.addr,e),Qa(t,e)}}function vqe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Za(t,e))return;n.uniform3fv(this.addr,e),Qa(t,e)}}function gqe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Za(t,e))return;n.uniform4fv(this.addr,e),Qa(t,e)}}function yqe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Za(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qa(t,e)}else{if(Za(t,r))return;wH.set(r),n.uniformMatrix2fv(this.addr,!1,wH),Qa(t,r)}}function bqe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Za(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qa(t,e)}else{if(Za(t,r))return;xH.set(r),n.uniformMatrix3fv(this.addr,!1,xH),Qa(t,r)}}function _qe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Za(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qa(t,e)}else{if(Za(t,r))return;SH.set(r),n.uniformMatrix4fv(this.addr,!1,SH),Qa(t,r)}}function Sqe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function xqe(n,e){const t=this.cache;Za(t,e)||(n.uniform2iv(this.addr,e),Qa(t,e))}function wqe(n,e){const t=this.cache;Za(t,e)||(n.uniform3iv(this.addr,e),Qa(t,e))}function Cqe(n,e){const t=this.cache;Za(t,e)||(n.uniform4iv(this.addr,e),Qa(t,e))}function Mqe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Tqe(n,e){const t=this.cache;Za(t,e)||(n.uniform2uiv(this.addr,e),Qa(t,e))}function Aqe(n,e){const t=this.cache;Za(t,e)||(n.uniform3uiv(this.addr,e),Qa(t,e))}function Eqe(n,e){const t=this.cache;Za(t,e)||(n.uniform4uiv(this.addr,e),Qa(t,e))}function Iqe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||qee,i)}function Rqe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Yee,i)}function Pqe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Xee,i)}function Dqe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||Kee,i)}function Lqe(n){switch(n){case 5126:return pqe;case 35664:return mqe;case 35665:return vqe;case 35666:return gqe;case 35674:return yqe;case 35675:return bqe;case 35676:return _qe;case 5124:case 35670:return Sqe;case 35667:case 35671:return xqe;case 35668:case 35672:return wqe;case 35669:case 35673:return Cqe;case 5125:return Mqe;case 36294:return Tqe;case 36295:return Aqe;case 36296:return Eqe;case 35678:case 36198:case 36298:case 36306:case 35682:return Iqe;case 35679:case 36299:case 36307:return Rqe;case 35680:case 36300:case 36308:case 36293:return Pqe;case 36289:case 36303:case 36311:case 36292:return Dqe}}function kqe(n,e){n.uniform1fv(this.addr,e)}function Oqe(n,e){const t=ey(e,this.size,2);n.uniform2fv(this.addr,t)}function Nqe(n,e){const t=ey(e,this.size,3);n.uniform3fv(this.addr,t)}function Bqe(n,e){const t=ey(e,this.size,4);n.uniform4fv(this.addr,t)}function Fqe(n,e){const t=ey(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zqe(n,e){const t=ey(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Uqe(n,e){const t=ey(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Hqe(n,e){n.uniform1iv(this.addr,e)}function Vqe(n,e){n.uniform2iv(this.addr,e)}function $qe(n,e){n.uniform3iv(this.addr,e)}function Gqe(n,e){n.uniform4iv(this.addr,e)}function Wqe(n,e){n.uniform1uiv(this.addr,e)}function qqe(n,e){n.uniform2uiv(this.addr,e)}function Kqe(n,e){n.uniform3uiv(this.addr,e)}function Yqe(n,e){n.uniform4uiv(this.addr,e)}function Xqe(n,e,t){const r=e.length,i=VT(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||qee,i[s])}function jqe(n,e,t){const r=e.length,i=VT(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||Yee,i[s])}function Zqe(n,e,t){const r=e.length,i=VT(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||Xee,i[s])}function Qqe(n,e,t){const r=e.length,i=VT(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Kee,i[s])}function Jqe(n){switch(n){case 5126:return kqe;case 35664:return Oqe;case 35665:return Nqe;case 35666:return Bqe;case 35674:return Fqe;case 35675:return zqe;case 35676:return Uqe;case 5124:case 35670:return Hqe;case 35667:case 35671:return Vqe;case 35668:case 35672:return $qe;case 35669:case 35673:return Gqe;case 5125:return Wqe;case 36294:return qqe;case 36295:return Kqe;case 36296:return Yqe;case 35678:case 36198:case 36298:case 36306:case 35682:return Xqe;case 35679:case 36299:case 36307:return jqe;case 35680:case 36300:case 36308:case 36293:return Zqe;case 36289:case 36303:case 36311:case 36292:return Qqe}}let eKe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Lqe(t.type)}},tKe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Jqe(t.type)}},nKe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],r)}}};const p4=/(\w+)(\])?(\[|\.)?/g;function CH(n,e){n.seq.push(e),n.map[e.id]=e}function rKe(n,e,t){const r=n.name,i=r.length;for(p4.lastIndex=0;;){const s=p4.exec(r),a=p4.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){CH(t,c===void 0?new eKe(o,n,e):new tKe(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new nKe(o),CH(t,d)),t=d}}}let L2=class{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);rKe(s,a,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&r.push(a)}return r}};function MH(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let iKe=0;function sKe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return r.join(`
`)}function aKe(n){switch(n){case dh:return["Linear","( value )"];case Rr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function TH(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+sKe(n.getShaderSource(e),a)}else return i}function oKe(n,e){const t=aKe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function lKe(n,e){let t;switch(e){case dVe:t="Linear";break;case fVe:t="Reinhard";break;case hVe:t="OptimizedCineon";break;case pVe:t="ACESFilmic";break;case mVe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function cKe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(M1).join(`
`)}function uKe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function dKe(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function M1(n){return n!==""}function AH(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function EH(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fKe=/^[ \t]*#include +<([\w\d./]+)>/gm;function K5(n){return n.replace(fKe,hKe)}function hKe(n,e){const t=Br[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return K5(t)}const pKe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,mKe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IH(n){return n.replace(mKe,jee).replace(pKe,vKe)}function vKe(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),jee(n,e,t,r)}function jee(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function RH(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gKe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Cee?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===VHe?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===C1&&(e="SHADOWMAP_TYPE_VSM"),e}function yKe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case s0:case a0:e="ENVMAP_TYPE_CUBE";break;case oS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bKe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case a0:e="ENVMAP_MODE_REFRACTION";break}return e}function _Ke(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case UT:e="ENVMAP_BLENDING_MULTIPLY";break;case cVe:e="ENVMAP_BLENDING_MIX";break;case uVe:e="ENVMAP_BLENDING_ADD";break}return e}function SKe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function xKe(n,e,t,r){const i=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=gKe(t),c=yKe(t),u=bKe(t),d=_Ke(t),h=SKe(t),f=t.isWebGL2?"":cKe(t),p=uKe(s),m=i.createProgram();let v,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[p].filter(M1).join(`
`),v.length>0&&(v+=`
`),g=[f,p].filter(M1).join(`
`),g.length>0&&(g+=`
`)):(v=[RH(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(M1).join(`
`),g=[f,RH(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fd?"#define TONE_MAPPING":"",t.toneMapping!==fd?Br.tonemapping_pars_fragment:"",t.toneMapping!==fd?lKe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Br.encodings_pars_fragment,oKe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(M1).join(`
`)),a=K5(a),a=AH(a,t),a=EH(a,t),o=K5(o),o=AH(o,t),o=EH(o,t),a=IH(a),o=IH(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===JU?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===JU?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const b=_+v+a,S=_+g+o,x=MH(i,35633,b),w=MH(i,35632,S);if(i.attachShader(m,x),i.attachShader(m,w),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),n.debug.checkShaderErrors){const A=i.getProgramInfoLog(m).trim(),T=i.getShaderInfoLog(x).trim(),I=i.getShaderInfoLog(w).trim();let D=!0,B=!0;if(i.getProgramParameter(m,35714)===!1){D=!1;const O=TH(i,x,"vertex"),H=TH(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+`

Program Info Log: `+A+`
`+O+`
`+H)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(T===""||I==="")&&(B=!1);B&&(this.diagnostics={runnable:D,programLog:A,vertexShader:{log:T,prefix:v},fragmentShader:{log:I,prefix:g}})}i.deleteShader(x),i.deleteShader(w);let M;this.getUniforms=function(){return M===void 0&&(M=new L2(i,m)),M};let C;return this.getAttributes=function(){return C===void 0&&(C=dKe(i,m)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=iKe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let wKe=0,CKe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new MKe(e);t.set(e,r)}return t.get(e)}},MKe=class{constructor(e){this.id=wKe++,this.code=e,this.usedTimes=0}};function TKe(n,e,t,r,i,s,a){const o=new bk,l=new CKe,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(C,A,T,I,D){const B=I.fog,O=D.geometry,H=C.isMeshStandardMaterial?I.environment:null,L=(C.isMeshStandardMaterial?t:e).get(C.envMap||H),z=L&&L.mapping===oS?L.image.height:null,k=p[C.type];C.precision!==null&&(f=i.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const F=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,W=F!==void 0?F.length:0;let q=0;O.morphAttributes.position!==void 0&&(q=1),O.morphAttributes.normal!==void 0&&(q=2),O.morphAttributes.color!==void 0&&(q=3);let Z,se,X,ie;if(k){const me=Hc[k];Z=me.vertexShader,se=me.fragmentShader}else Z=C.vertexShader,se=C.fragmentShader,l.update(C),X=l.getVertexShaderID(C),ie=l.getFragmentShaderID(C);const ae=n.getRenderTarget(),ce=C.alphaTest>0,we=C.clearcoat>0,He=C.iridescence>0;return{isWebGL2:u,shaderID:k,shaderName:C.type,vertexShader:Z,fragmentShader:se,defines:C.defines,customVertexShaderID:X,customFragmentShaderID:ie,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:f,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:h,outputEncoding:ae===null?n.outputEncoding:ae.isXRRenderTarget===!0?ae.texture.encoding:dh,map:!!C.map,matcap:!!C.matcap,envMap:!!L,envMapMode:L&&L.mapping,envMapCubeUVHeight:z,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===BVe,tangentSpaceNormalMap:C.normalMapType===x0,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===Rr,clearcoat:we,clearcoatMap:we&&!!C.clearcoatMap,clearcoatRoughnessMap:we&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:we&&!!C.clearcoatNormalMap,iridescence:He,iridescenceMap:He&&!!C.iridescenceMap,iridescenceThicknessMap:He&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===Nv,alphaMap:!!C.alphaMap,alphaTest:ce,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!O.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.iridescenceMap||!!C.iridescenceThicknessMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!B,useFog:C.fog===!0,fogExp2:B&&B.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:D.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:q,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&T.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:fd,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===uh,flipSided:C.side===dc,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function v(C){const A=[];if(C.shaderID?A.push(C.shaderID):(A.push(C.customVertexShaderID),A.push(C.customFragmentShaderID)),C.defines!==void 0)for(const T in C.defines)A.push(T),A.push(C.defines[T]);return C.isRawShaderMaterial===!1&&(g(A,C),_(A,C),A.push(n.outputEncoding)),A.push(C.customProgramCacheKey),A.join()}function g(C,A){C.push(A.precision),C.push(A.outputEncoding),C.push(A.envMapMode),C.push(A.envMapCubeUVHeight),C.push(A.combine),C.push(A.vertexUvs),C.push(A.fogExp2),C.push(A.sizeAttenuation),C.push(A.morphTargetsCount),C.push(A.morphAttributeCount),C.push(A.numDirLights),C.push(A.numPointLights),C.push(A.numSpotLights),C.push(A.numHemiLights),C.push(A.numRectAreaLights),C.push(A.numDirLightShadows),C.push(A.numPointLightShadows),C.push(A.numSpotLightShadows),C.push(A.shadowMapType),C.push(A.toneMapping),C.push(A.numClippingPlanes),C.push(A.numClipIntersection),C.push(A.depthPacking)}function _(C,A){o.disableAll(),A.isWebGL2&&o.enable(0),A.supportsVertexTextures&&o.enable(1),A.instancing&&o.enable(2),A.instancingColor&&o.enable(3),A.map&&o.enable(4),A.matcap&&o.enable(5),A.envMap&&o.enable(6),A.lightMap&&o.enable(7),A.aoMap&&o.enable(8),A.emissiveMap&&o.enable(9),A.bumpMap&&o.enable(10),A.normalMap&&o.enable(11),A.objectSpaceNormalMap&&o.enable(12),A.tangentSpaceNormalMap&&o.enable(13),A.clearcoat&&o.enable(14),A.clearcoatMap&&o.enable(15),A.clearcoatRoughnessMap&&o.enable(16),A.clearcoatNormalMap&&o.enable(17),A.iridescence&&o.enable(18),A.iridescenceMap&&o.enable(19),A.iridescenceThicknessMap&&o.enable(20),A.displacementMap&&o.enable(21),A.specularMap&&o.enable(22),A.roughnessMap&&o.enable(23),A.metalnessMap&&o.enable(24),A.gradientMap&&o.enable(25),A.alphaMap&&o.enable(26),A.alphaTest&&o.enable(27),A.vertexColors&&o.enable(28),A.vertexAlphas&&o.enable(29),A.vertexUvs&&o.enable(30),A.vertexTangents&&o.enable(31),A.uvsVertexOnly&&o.enable(32),A.fog&&o.enable(33),C.push(o.mask),o.disableAll(),A.useFog&&o.enable(0),A.flatShading&&o.enable(1),A.logarithmicDepthBuffer&&o.enable(2),A.skinning&&o.enable(3),A.morphTargets&&o.enable(4),A.morphNormals&&o.enable(5),A.morphColors&&o.enable(6),A.premultipliedAlpha&&o.enable(7),A.shadowMapEnabled&&o.enable(8),A.physicallyCorrectLights&&o.enable(9),A.doubleSided&&o.enable(10),A.flipSided&&o.enable(11),A.useDepthPacking&&o.enable(12),A.dithering&&o.enable(13),A.specularIntensityMap&&o.enable(14),A.specularColorMap&&o.enable(15),A.transmission&&o.enable(16),A.transmissionMap&&o.enable(17),A.thicknessMap&&o.enable(18),A.sheen&&o.enable(19),A.sheenColorMap&&o.enable(20),A.sheenRoughnessMap&&o.enable(21),A.decodeVideoTexture&&o.enable(22),A.opaque&&o.enable(23),C.push(o.mask)}function b(C){const A=p[C.type];let T;if(A){const I=Hc[A];T=p$e.clone(I.uniforms)}else T=C.uniforms;return T}function S(C,A){let T;for(let I=0,D=c.length;I<D;I++){const B=c[I];if(B.cacheKey===A){T=B,++T.usedTimes;break}}return T===void 0&&(T=new xKe(n,A,C,s),c.push(T)),T}function x(C){if(--C.usedTimes===0){const A=c.indexOf(C);c[A]=c[c.length-1],c.pop(),C.destroy()}}function w(C){l.remove(C)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:b,acquireProgram:S,releaseProgram:x,releaseShaderCache:w,programs:c,dispose:M}}function AKe(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function r(s,a,o){n.get(s)[a]=o}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function EKe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DH(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function a(d,h,f,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,h,f,p,m,v){const g=a(d,h,f,p,m,v);f.transmission>0?r.push(g):f.transparent===!0?i.push(g):t.push(g)}function l(d,h,f,p,m,v){const g=a(d,h,f,p,m,v);f.transmission>0?r.unshift(g):f.transparent===!0?i.unshift(g):t.unshift(g)}function c(d,h){t.length>1&&t.sort(d||EKe),r.length>1&&r.sort(h||PH),i.length>1&&i.sort(h||PH)}function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function IKe(){let n=new WeakMap;function e(r,i){let s;return n.has(r)===!1?(s=new DH,n.set(r,[s])):i>=n.get(r).length?(s=new DH,n.get(r).push(s)):s=n.get(r)[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function RKe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Qe,color:new wn};break;case"SpotLight":t={position:new Qe,direction:new Qe,color:new wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Qe,color:new wn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Qe,skyColor:new wn,groundColor:new wn};break;case"RectAreaLight":t={color:new wn,position:new Qe,halfWidth:new Qe,halfHeight:new Qe};break}return n[e.id]=t,t}}}function PKe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let DKe=0;function LKe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function kKe(n,e){const t=new RKe,r=PKe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new Qe);const s=new Qe,a=new Wn,o=new Wn;function l(u,d){let h=0,f=0,p=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let m=0,v=0,g=0,_=0,b=0,S=0,x=0,w=0;u.sort(LKe);const M=d!==!0?Math.PI:1;for(let A=0,T=u.length;A<T;A++){const I=u[A],D=I.color,B=I.intensity,O=I.distance,H=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)h+=D.r*B*M,f+=D.g*B*M,p+=D.b*B*M;else if(I.isLightProbe)for(let L=0;L<9;L++)i.probe[L].addScaledVector(I.sh.coefficients[L],B);else if(I.isDirectionalLight){const L=t.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity*M),I.castShadow){const z=I.shadow,k=r.get(I);k.shadowBias=z.bias,k.shadowNormalBias=z.normalBias,k.shadowRadius=z.radius,k.shadowMapSize=z.mapSize,i.directionalShadow[m]=k,i.directionalShadowMap[m]=H,i.directionalShadowMatrix[m]=I.shadow.matrix,S++}i.directional[m]=L,m++}else if(I.isSpotLight){const L=t.get(I);if(L.position.setFromMatrixPosition(I.matrixWorld),L.color.copy(D).multiplyScalar(B*M),L.distance=O,L.coneCos=Math.cos(I.angle),L.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),L.decay=I.decay,I.castShadow){const z=I.shadow,k=r.get(I);k.shadowBias=z.bias,k.shadowNormalBias=z.normalBias,k.shadowRadius=z.radius,k.shadowMapSize=z.mapSize,i.spotShadow[g]=k,i.spotShadowMap[g]=H,i.spotShadowMatrix[g]=I.shadow.matrix,w++}i.spot[g]=L,g++}else if(I.isRectAreaLight){const L=t.get(I);L.color.copy(D).multiplyScalar(B),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),i.rectArea[_]=L,_++}else if(I.isPointLight){const L=t.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity*M),L.distance=I.distance,L.decay=I.decay,I.castShadow){const z=I.shadow,k=r.get(I);k.shadowBias=z.bias,k.shadowNormalBias=z.normalBias,k.shadowRadius=z.radius,k.shadowMapSize=z.mapSize,k.shadowCameraNear=z.camera.near,k.shadowCameraFar=z.camera.far,i.pointShadow[v]=k,i.pointShadowMap[v]=H,i.pointShadowMatrix[v]=I.shadow.matrix,x++}i.point[v]=L,v++}else if(I.isHemisphereLight){const L=t.get(I);L.skyColor.copy(I.color).multiplyScalar(B*M),L.groundColor.copy(I.groundColor).multiplyScalar(B*M),i.hemi[b]=L,b++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=En.LTC_FLOAT_1,i.rectAreaLTC2=En.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=En.LTC_HALF_1,i.rectAreaLTC2=En.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const C=i.hash;(C.directionalLength!==m||C.pointLength!==v||C.spotLength!==g||C.rectAreaLength!==_||C.hemiLength!==b||C.numDirectionalShadows!==S||C.numPointShadows!==x||C.numSpotShadows!==w)&&(i.directional.length=m,i.spot.length=g,i.rectArea.length=_,i.point.length=v,i.hemi.length=b,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=x,i.spotShadowMatrix.length=w,C.directionalLength=m,C.pointLength=v,C.spotLength=g,C.rectAreaLength=_,C.hemiLength=b,C.numDirectionalShadows=S,C.numPointShadows=x,C.numSpotShadows=w,i.version=DKe++)}function c(u,d){let h=0,f=0,p=0,m=0,v=0;const g=d.matrixWorldInverse;for(let _=0,b=u.length;_<b;_++){const S=u[_];if(S.isDirectionalLight){const x=i.directional[h];x.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(g),h++}else if(S.isSpotLight){const x=i.spot[p];x.position.setFromMatrixPosition(S.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(g),p++}else if(S.isRectAreaLight){const x=i.rectArea[m];x.position.setFromMatrixPosition(S.matrixWorld),x.position.applyMatrix4(g),o.identity(),a.copy(S.matrixWorld),a.premultiply(g),o.extractRotation(a),x.halfWidth.set(S.width*.5,0,0),x.halfHeight.set(0,S.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),m++}else if(S.isPointLight){const x=i.point[f];x.position.setFromMatrixPosition(S.matrixWorld),x.position.applyMatrix4(g),f++}else if(S.isHemisphereLight){const x=i.hemi[v];x.direction.setFromMatrixPosition(S.matrixWorld),x.direction.transformDirection(g),v++}}}return{setup:l,setupView:c,state:i}}function LH(n,e){const t=new kKe(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function a(d){r.push(d)}function o(d){i.push(d)}function l(d){t.setup(r,d)}function c(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function OKe(n,e){let t=new WeakMap;function r(s,a=0){let o;return t.has(s)===!1?(o=new LH(n,e),t.set(s,[o])):a>=t.get(s).length?(o=new LH(n,e),t.get(s).push(o)):o=t.get(s)[a],o}function i(){t=new WeakMap}return{get:r,dispose:i}}let Zee=class extends ws{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OVe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Qee=class extends ws{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Qe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};const NKe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,BKe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function FKe(n,e,t){let r=new xk;const i=new qt,s=new qt,a=new ni,o=new Zee({depthPacking:NVe}),l=new Qee,c={},u=t.maxTextureSize,d={0:dc,1:ch,2:uh},h=new Cd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qt},radius:{value:4}},vertexShader:NKe,fragmentShader:BKe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Vr;p.setAttribute("position",new ss(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ds(p,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Cee,this.render=function(S,x,w){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||S.length===0)return;const M=n.getRenderTarget(),C=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),T=n.state;T.setBlending(Wf),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let I=0,D=S.length;I<D;I++){const B=S[I],O=B.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const H=O.getFrameExtents();if(i.multiply(H),s.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/H.x),i.x=s.x*H.x,O.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/H.y),i.y=s.y*H.y,O.mapSize.y=s.y)),O.map===null){const z=this.type!==C1?{minFilter:Vs,magFilter:Vs}:{};O.map=new l0(i.x,i.y,z),O.map.texture.name=B.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const L=O.getViewportCount();for(let z=0;z<L;z++){const k=O.getViewport(z);a.set(s.x*k.x,s.y*k.y,s.x*k.z,s.y*k.w),T.viewport(a),O.updateMatrices(B,z),r=O.getFrustum(),b(x,w,O.camera,B,this.type)}O.isPointLightShadow!==!0&&this.type===C1&&g(O,w),O.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(M,C,A)};function g(S,x){const w=e.update(m);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new l0(i.x,i.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(x,null,w,h,m,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(x,null,w,f,m,null)}function _(S,x,w,M,C,A){let T=null;const I=w.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(I!==void 0?T=I:T=w.isPointLight===!0?l:o,n.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0){const D=T.uuid,B=x.uuid;let O=c[D];O===void 0&&(O={},c[D]=O);let H=O[B];H===void 0&&(H=T.clone(),O[B]=H),T=H}return T.visible=x.visible,T.wireframe=x.wireframe,A===C1?T.side=x.shadowSide!==null?x.shadowSide:x.side:T.side=x.shadowSide!==null?x.shadowSide:d[x.side],T.alphaMap=x.alphaMap,T.alphaTest=x.alphaTest,T.clipShadows=x.clipShadows,T.clippingPlanes=x.clippingPlanes,T.clipIntersection=x.clipIntersection,T.displacementMap=x.displacementMap,T.displacementScale=x.displacementScale,T.displacementBias=x.displacementBias,T.wireframeLinewidth=x.wireframeLinewidth,T.linewidth=x.linewidth,w.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(w.matrixWorld),T.nearDistance=M,T.farDistance=C),T}function b(S,x,w,M,C){if(S.visible===!1)return;if(S.layers.test(x.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&C===C1)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,S.matrixWorld);const I=e.update(S),D=S.material;if(Array.isArray(D)){const B=I.groups;for(let O=0,H=B.length;O<H;O++){const L=B[O],z=D[L.materialIndex];if(z&&z.visible){const k=_(S,z,M,w.near,w.far,C);n.renderBufferDirect(w,null,I,k,S,L)}}}else if(D.visible){const B=_(S,D,M,w.near,w.far,C);n.renderBufferDirect(w,null,I,B,S,null)}}const T=S.children;for(let I=0,D=T.length;I<D;I++)b(T[I],x,w,M,C)}}function zKe(n,e,t){const r=t.isWebGL2;function i(){let de=!1;const at=new ni;let Ee=null;const vt=new ni(0,0,0,0);return{setMask:function(et){Ee!==et&&!de&&(n.colorMask(et,et,et,et),Ee=et)},setLocked:function(et){de=et},setClear:function(et,yt,Ht,Ot,ln){ln===!0&&(et*=Ot,yt*=Ot,Ht*=Ot),at.set(et,yt,Ht,Ot),vt.equals(at)===!1&&(n.clearColor(et,yt,Ht,Ot),vt.copy(at))},reset:function(){de=!1,Ee=null,vt.set(-1,0,0,0)}}}function s(){let de=!1,at=null,Ee=null,vt=null;return{setTest:function(et){et?ce(2929):we(2929)},setMask:function(et){at!==et&&!de&&(n.depthMask(et),at=et)},setFunc:function(et){if(Ee!==et){if(et)switch(et){case nVe:n.depthFunc(512);break;case rVe:n.depthFunc(519);break;case iVe:n.depthFunc(513);break;case z5:n.depthFunc(515);break;case sVe:n.depthFunc(514);break;case aVe:n.depthFunc(518);break;case oVe:n.depthFunc(516);break;case lVe:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);Ee=et}},setLocked:function(et){de=et},setClear:function(et){vt!==et&&(n.clearDepth(et),vt=et)},reset:function(){de=!1,at=null,Ee=null,vt=null}}}function a(){let de=!1,at=null,Ee=null,vt=null,et=null,yt=null,Ht=null,Ot=null,ln=null;return{setTest:function(Vt){de||(Vt?ce(2960):we(2960))},setMask:function(Vt){at!==Vt&&!de&&(n.stencilMask(Vt),at=Vt)},setFunc:function(Vt,kt,Jt){(Ee!==Vt||vt!==kt||et!==Jt)&&(n.stencilFunc(Vt,kt,Jt),Ee=Vt,vt=kt,et=Jt)},setOp:function(Vt,kt,Jt){(yt!==Vt||Ht!==kt||Ot!==Jt)&&(n.stencilOp(Vt,kt,Jt),yt=Vt,Ht=kt,Ot=Jt)},setLocked:function(Vt){de=Vt},setClear:function(Vt){ln!==Vt&&(n.clearStencil(Vt),ln=Vt)},reset:function(){de=!1,at=null,Ee=null,vt=null,et=null,yt=null,Ht=null,Ot=null,ln=null}}}const o=new i,l=new s,c=new a,u=new WeakMap,d=new WeakMap;let h={},f={},p=new WeakMap,m=[],v=null,g=!1,_=null,b=null,S=null,x=null,w=null,M=null,C=null,A=!1,T=null,I=null,D=null,B=null,O=null;const H=n.getParameter(35661);let L=!1,z=0;const k=n.getParameter(7938);k.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(k)[1]),L=z>=1):k.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),L=z>=2);let F=null,W={};const q=n.getParameter(3088),Z=n.getParameter(2978),se=new ni().fromArray(q),X=new ni().fromArray(Z);function ie(de,at,Ee){const vt=new Uint8Array(4),et=n.createTexture();n.bindTexture(de,et),n.texParameteri(de,10241,9728),n.texParameteri(de,10240,9728);for(let yt=0;yt<Ee;yt++)n.texImage2D(at+yt,0,6408,1,1,0,6408,5121,vt);return et}const ae={};ae[3553]=ie(3553,3553,1),ae[34067]=ie(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ce(2929),l.setFunc(z5),ze(!1),Ve(TU),ce(2884),j(Wf);function ce(de){h[de]!==!0&&(n.enable(de),h[de]=!0)}function we(de){h[de]!==!1&&(n.disable(de),h[de]=!1)}function He(de,at){return f[de]!==at?(n.bindFramebuffer(de,at),f[de]=at,r&&(de===36009&&(f[36160]=at),de===36160&&(f[36009]=at)),!0):!1}function Ge(de,at){let Ee=m,vt=!1;if(de)if(Ee=p.get(at),Ee===void 0&&(Ee=[],p.set(at,Ee)),de.isWebGLMultipleRenderTargets){const et=de.texture;if(Ee.length!==et.length||Ee[0]!==36064){for(let yt=0,Ht=et.length;yt<Ht;yt++)Ee[yt]=36064+yt;Ee.length=et.length,vt=!0}}else Ee[0]!==36064&&(Ee[0]=36064,vt=!0);else Ee[0]!==1029&&(Ee[0]=1029,vt=!0);vt&&(t.isWebGL2?n.drawBuffers(Ee):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ee))}function me(de){return v!==de?(n.useProgram(de),v=de,!0):!1}const be={[Ym]:32774,[WHe]:32778,[qHe]:32779};if(r)be[RU]=32775,be[PU]=32776;else{const de=e.get("EXT_blend_minmax");de!==null&&(be[RU]=de.MIN_EXT,be[PU]=de.MAX_EXT)}const oe={[KHe]:0,[YHe]:1,[XHe]:768,[Mee]:770,[tVe]:776,[JHe]:774,[ZHe]:772,[jHe]:769,[Tee]:771,[eVe]:775,[QHe]:773};function j(de,at,Ee,vt,et,yt,Ht,Ot){if(de===Wf){g===!0&&(we(3042),g=!1);return}if(g===!1&&(ce(3042),g=!0),de!==GHe){if(de!==_||Ot!==A){if((b!==Ym||w!==Ym)&&(n.blendEquation(32774),b=Ym,w=Ym),Ot)switch(de){case Nv:n.blendFuncSeparate(1,771,1,771);break;case AU:n.blendFunc(1,1);break;case EU:n.blendFuncSeparate(0,769,0,1);break;case IU:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Nv:n.blendFuncSeparate(770,771,1,771);break;case AU:n.blendFunc(770,1);break;case EU:n.blendFuncSeparate(0,769,0,1);break;case IU:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}S=null,x=null,M=null,C=null,_=de,A=Ot}return}et=et||at,yt=yt||Ee,Ht=Ht||vt,(at!==b||et!==w)&&(n.blendEquationSeparate(be[at],be[et]),b=at,w=et),(Ee!==S||vt!==x||yt!==M||Ht!==C)&&(n.blendFuncSeparate(oe[Ee],oe[vt],oe[yt],oe[Ht]),S=Ee,x=vt,M=yt,C=Ht),_=de,A=null}function ke(de,at){de.side===uh?we(2884):ce(2884);let Ee=de.side===dc;at&&(Ee=!Ee),ze(Ee),de.blending===Nv&&de.transparent===!1?j(Wf):j(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),o.setMask(de.colorWrite);const vt=de.stencilWrite;c.setTest(vt),vt&&(c.setMask(de.stencilWriteMask),c.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),c.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),Ze(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ce(32926):we(32926)}function ze(de){T!==de&&(de?n.frontFace(2304):n.frontFace(2305),T=de)}function Ve(de){de!==UHe?(ce(2884),de!==I&&(de===TU?n.cullFace(1029):de===HHe?n.cullFace(1028):n.cullFace(1032))):we(2884),I=de}function Le(de){de!==D&&(L&&n.lineWidth(de),D=de)}function Ze(de,at,Ee){de?(ce(32823),(B!==at||O!==Ee)&&(n.polygonOffset(at,Ee),B=at,O=Ee)):we(32823)}function st(de){de?ce(3089):we(3089)}function fe(de){de===void 0&&(de=33984+H-1),F!==de&&(n.activeTexture(de),F=de)}function V(de,at){F===null&&fe();let Ee=W[F];Ee===void 0&&(Ee={type:void 0,texture:void 0},W[F]=Ee),(Ee.type!==de||Ee.texture!==at)&&(n.bindTexture(de,at||ae[de]),Ee.type=de,Ee.texture=at)}function J(){const de=W[F];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function he(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Oe(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function je(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function dt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function pt(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Te(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ft(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ke(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Q(de){se.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),se.copy(de))}function _e(de){X.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),X.copy(de))}function Ae(de,at){let Ee=d.get(at);Ee===void 0&&(Ee=new WeakMap,d.set(at,Ee));let vt=Ee.get(de);vt===void 0&&(vt=n.getUniformBlockIndex(at,de.name),Ee.set(de,vt))}function ge(de,at){const vt=d.get(at).get(de);u.get(de)!==vt&&(n.uniformBlockBinding(at,vt,de.__bindingPointIndex),u.set(de,vt))}function pe(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},F=null,W={},f={},p=new WeakMap,m=[],v=null,g=!1,_=null,b=null,S=null,x=null,w=null,M=null,C=null,A=!1,T=null,I=null,D=null,B=null,O=null,se.set(0,0,n.canvas.width,n.canvas.height),X.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:ce,disable:we,bindFramebuffer:He,drawBuffers:Ge,useProgram:me,setBlending:j,setMaterial:ke,setFlipSided:ze,setCullFace:Ve,setLineWidth:Le,setPolygonOffset:Ze,setScissorTest:st,activeTexture:fe,bindTexture:V,unbindTexture:J,compressedTexImage2D:he,texImage2D:ft,texImage3D:Ke,updateUBOMapping:Ae,uniformBlockBinding:ge,texStorage2D:pt,texStorage3D:Te,texSubImage2D:Oe,texSubImage3D:je,compressedTexSubImage2D:dt,scissor:Q,viewport:_e,reset:pe}}function UKe(n,e,t,r,i,s,a){const o=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(V,J){return g?new OffscreenCanvas(V,J):h_("canvas")}function b(V,J,he,Oe){let je=1;if((V.width>Oe||V.height>Oe)&&(je=Oe/Math.max(V.width,V.height)),je<1||J===!0)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap){const dt=J?tM:Math.floor,pt=dt(je*V.width),Te=dt(je*V.height);m===void 0&&(m=_(pt,Te));const ft=he?_(pt,Te):m;return ft.width=pt,ft.height=Te,ft.getContext("2d").drawImage(V,0,0,pt,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+V.width+"x"+V.height+") to ("+pt+"x"+Te+")."),ft}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+V.width+"x"+V.height+")."),V;return V}function S(V){return V5(V.width)&&V5(V.height)}function x(V){return o?!1:V.wrapS!==Ps||V.wrapT!==Ps||V.minFilter!==Vs&&V.minFilter!==xs}function w(V,J){return V.generateMipmaps&&J&&V.minFilter!==Vs&&V.minFilter!==xs}function M(V){n.generateMipmap(V)}function C(V,J,he,Oe,je=!1){if(o===!1)return J;if(V!==null){if(n[V]!==void 0)return n[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let dt=J;return J===6403&&(he===5126&&(dt=33326),he===5131&&(dt=33325),he===5121&&(dt=33321)),J===33319&&(he===5126&&(dt=33328),he===5131&&(dt=33327),he===5121&&(dt=33323)),J===6408&&(he===5126&&(dt=34836),he===5131&&(dt=34842),he===5121&&(dt=Oe===Rr&&je===!1?35907:32856),he===32819&&(dt=32854),he===32820&&(dt=32855)),(dt===33325||dt===33326||dt===33327||dt===33328||dt===34842||dt===34836)&&e.get("EXT_color_buffer_float"),dt}function A(V,J,he){return w(V,he)===!0||V.isFramebufferTexture&&V.minFilter!==Vs&&V.minFilter!==xs?Math.log2(Math.max(J.width,J.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?J.mipmaps.length:1}function T(V){return V===Vs||V===QC||V===JC?9728:9729}function I(V){const J=V.target;J.removeEventListener("dispose",I),B(J),J.isVideoTexture&&p.delete(J)}function D(V){const J=V.target;J.removeEventListener("dispose",D),H(J)}function B(V){const J=r.get(V);if(J.__webglInit===void 0)return;const he=V.source,Oe=v.get(he);if(Oe){const je=Oe[J.__cacheKey];je.usedTimes--,je.usedTimes===0&&O(V),Object.keys(Oe).length===0&&v.delete(he)}r.remove(V)}function O(V){const J=r.get(V);n.deleteTexture(J.__webglTexture);const he=V.source,Oe=v.get(he);delete Oe[J.__cacheKey],a.memory.textures--}function H(V){const J=V.texture,he=r.get(V),Oe=r.get(J);if(Oe.__webglTexture!==void 0&&(n.deleteTexture(Oe.__webglTexture),a.memory.textures--),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let je=0;je<6;je++)n.deleteFramebuffer(he.__webglFramebuffer[je]),he.__webglDepthbuffer&&n.deleteRenderbuffer(he.__webglDepthbuffer[je]);else{if(n.deleteFramebuffer(he.__webglFramebuffer),he.__webglDepthbuffer&&n.deleteRenderbuffer(he.__webglDepthbuffer),he.__webglMultisampledFramebuffer&&n.deleteFramebuffer(he.__webglMultisampledFramebuffer),he.__webglColorRenderbuffer)for(let je=0;je<he.__webglColorRenderbuffer.length;je++)he.__webglColorRenderbuffer[je]&&n.deleteRenderbuffer(he.__webglColorRenderbuffer[je]);he.__webglDepthRenderbuffer&&n.deleteRenderbuffer(he.__webglDepthRenderbuffer)}if(V.isWebGLMultipleRenderTargets)for(let je=0,dt=J.length;je<dt;je++){const pt=r.get(J[je]);pt.__webglTexture&&(n.deleteTexture(pt.__webglTexture),a.memory.textures--),r.remove(J[je])}r.remove(J),r.remove(V)}let L=0;function z(){L=0}function k(){const V=L;return V>=l&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+l),L+=1,V}function F(V){const J=[];return J.push(V.wrapS),J.push(V.wrapT),J.push(V.magFilter),J.push(V.minFilter),J.push(V.anisotropy),J.push(V.internalFormat),J.push(V.format),J.push(V.type),J.push(V.generateMipmaps),J.push(V.premultiplyAlpha),J.push(V.flipY),J.push(V.unpackAlignment),J.push(V.encoding),J.join()}function W(V,J){const he=r.get(V);if(V.isVideoTexture&&st(V),V.isRenderTargetTexture===!1&&V.version>0&&he.__version!==V.version){const Oe=V.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(he,V,J);return}}t.activeTexture(33984+J),t.bindTexture(3553,he.__webglTexture)}function q(V,J){const he=r.get(V);if(V.version>0&&he.__version!==V.version){we(he,V,J);return}t.activeTexture(33984+J),t.bindTexture(35866,he.__webglTexture)}function Z(V,J){const he=r.get(V);if(V.version>0&&he.__version!==V.version){we(he,V,J);return}t.activeTexture(33984+J),t.bindTexture(32879,he.__webglTexture)}function se(V,J){const he=r.get(V);if(V.version>0&&he.__version!==V.version){He(he,V,J);return}t.activeTexture(33984+J),t.bindTexture(34067,he.__webglTexture)}const X={[po]:10497,[Ps]:33071,[c_]:33648},ie={[Vs]:9728,[QC]:9984,[JC]:9986,[xs]:9729,[vk]:9985,[zd]:9987};function ae(V,J,he){if(he?(n.texParameteri(V,10242,X[J.wrapS]),n.texParameteri(V,10243,X[J.wrapT]),(V===32879||V===35866)&&n.texParameteri(V,32882,X[J.wrapR]),n.texParameteri(V,10240,ie[J.magFilter]),n.texParameteri(V,10241,ie[J.minFilter])):(n.texParameteri(V,10242,33071),n.texParameteri(V,10243,33071),(V===32879||V===35866)&&n.texParameteri(V,32882,33071),(J.wrapS!==Ps||J.wrapT!==Ps)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(V,10240,T(J.magFilter)),n.texParameteri(V,10241,T(J.minFilter)),J.minFilter!==Vs&&J.minFilter!==xs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Oe=e.get("EXT_texture_filter_anisotropic");if(J.type===Uf&&e.has("OES_texture_float_linear")===!1||o===!1&&J.type===u_&&e.has("OES_texture_half_float_linear")===!1)return;(J.anisotropy>1||r.get(J).__currentAnisotropy)&&(n.texParameterf(V,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,i.getMaxAnisotropy())),r.get(J).__currentAnisotropy=J.anisotropy)}}function ce(V,J){let he=!1;V.__webglInit===void 0&&(V.__webglInit=!0,J.addEventListener("dispose",I));const Oe=J.source;let je=v.get(Oe);je===void 0&&(je={},v.set(Oe,je));const dt=F(J);if(dt!==V.__cacheKey){je[dt]===void 0&&(je[dt]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,he=!0),je[dt].usedTimes++;const pt=je[V.__cacheKey];pt!==void 0&&(je[V.__cacheKey].usedTimes--,pt.usedTimes===0&&O(J)),V.__cacheKey=dt,V.__webglTexture=je[dt].texture}return he}function we(V,J,he){let Oe=3553;J.isDataArrayTexture&&(Oe=35866),J.isData3DTexture&&(Oe=32879);const je=ce(V,J),dt=J.source;if(t.activeTexture(33984+he),t.bindTexture(Oe,V.__webglTexture),dt.version!==dt.__currentVersion||je===!0){n.pixelStorei(37440,J.flipY),n.pixelStorei(37441,J.premultiplyAlpha),n.pixelStorei(3317,J.unpackAlignment),n.pixelStorei(37443,0);const pt=x(J)&&S(J.image)===!1;let Te=b(J.image,pt,!1,u);Te=fe(J,Te);const ft=S(Te)||o,Ke=s.convert(J.format,J.encoding);let Q=s.convert(J.type),_e=C(J.internalFormat,Ke,Q,J.encoding,J.isVideoTexture);ae(Oe,J,ft);let Ae;const ge=J.mipmaps,pe=o&&J.isVideoTexture!==!0,de=dt.__currentVersion===void 0||je===!0,at=A(J,Te,ft);if(J.isDepthTexture)_e=6402,o?J.type===Uf?_e=36012:J.type===Ip?_e=33190:J.type===Bv?_e=35056:_e=33189:J.type===Uf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),J.format===Gp&&_e===6402&&J.type!==Aee&&J.type!==Ip&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),J.type=Ip,Q=s.convert(J.type)),J.format===hg&&_e===6402&&(_e=34041,J.type!==Bv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),J.type=Bv,Q=s.convert(J.type))),de&&(pe?t.texStorage2D(3553,1,_e,Te.width,Te.height):t.texImage2D(3553,0,_e,Te.width,Te.height,0,Ke,Q,null));else if(J.isDataTexture)if(ge.length>0&&ft){pe&&de&&t.texStorage2D(3553,at,_e,ge[0].width,ge[0].height);for(let Ee=0,vt=ge.length;Ee<vt;Ee++)Ae=ge[Ee],pe?t.texSubImage2D(3553,Ee,0,0,Ae.width,Ae.height,Ke,Q,Ae.data):t.texImage2D(3553,Ee,_e,Ae.width,Ae.height,0,Ke,Q,Ae.data);J.generateMipmaps=!1}else pe?(de&&t.texStorage2D(3553,at,_e,Te.width,Te.height),t.texSubImage2D(3553,0,0,0,Te.width,Te.height,Ke,Q,Te.data)):t.texImage2D(3553,0,_e,Te.width,Te.height,0,Ke,Q,Te.data);else if(J.isCompressedTexture){pe&&de&&t.texStorage2D(3553,at,_e,ge[0].width,ge[0].height);for(let Ee=0,vt=ge.length;Ee<vt;Ee++)Ae=ge[Ee],J.format!==Al?Ke!==null?pe?t.compressedTexSubImage2D(3553,Ee,0,0,Ae.width,Ae.height,Ke,Ae.data):t.compressedTexImage2D(3553,Ee,_e,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?t.texSubImage2D(3553,Ee,0,0,Ae.width,Ae.height,Ke,Q,Ae.data):t.texImage2D(3553,Ee,_e,Ae.width,Ae.height,0,Ke,Q,Ae.data)}else if(J.isDataArrayTexture)pe?(de&&t.texStorage3D(35866,at,_e,Te.width,Te.height,Te.depth),t.texSubImage3D(35866,0,0,0,0,Te.width,Te.height,Te.depth,Ke,Q,Te.data)):t.texImage3D(35866,0,_e,Te.width,Te.height,Te.depth,0,Ke,Q,Te.data);else if(J.isData3DTexture)pe?(de&&t.texStorage3D(32879,at,_e,Te.width,Te.height,Te.depth),t.texSubImage3D(32879,0,0,0,0,Te.width,Te.height,Te.depth,Ke,Q,Te.data)):t.texImage3D(32879,0,_e,Te.width,Te.height,Te.depth,0,Ke,Q,Te.data);else if(J.isFramebufferTexture){if(de)if(pe)t.texStorage2D(3553,at,_e,Te.width,Te.height);else{let Ee=Te.width,vt=Te.height;for(let et=0;et<at;et++)t.texImage2D(3553,et,_e,Ee,vt,0,Ke,Q,null),Ee>>=1,vt>>=1}}else if(ge.length>0&&ft){pe&&de&&t.texStorage2D(3553,at,_e,ge[0].width,ge[0].height);for(let Ee=0,vt=ge.length;Ee<vt;Ee++)Ae=ge[Ee],pe?t.texSubImage2D(3553,Ee,0,0,Ke,Q,Ae):t.texImage2D(3553,Ee,_e,Ke,Q,Ae);J.generateMipmaps=!1}else pe?(de&&t.texStorage2D(3553,at,_e,Te.width,Te.height),t.texSubImage2D(3553,0,0,0,Ke,Q,Te)):t.texImage2D(3553,0,_e,Ke,Q,Te);w(J,ft)&&M(Oe),dt.__currentVersion=dt.version,J.onUpdate&&J.onUpdate(J)}V.__version=J.version}function He(V,J,he){if(J.image.length!==6)return;const Oe=ce(V,J),je=J.source;if(t.activeTexture(33984+he),t.bindTexture(34067,V.__webglTexture),je.version!==je.__currentVersion||Oe===!0){n.pixelStorei(37440,J.flipY),n.pixelStorei(37441,J.premultiplyAlpha),n.pixelStorei(3317,J.unpackAlignment),n.pixelStorei(37443,0);const dt=J.isCompressedTexture||J.image[0].isCompressedTexture,pt=J.image[0]&&J.image[0].isDataTexture,Te=[];for(let Ee=0;Ee<6;Ee++)!dt&&!pt?Te[Ee]=b(J.image[Ee],!1,!0,c):Te[Ee]=pt?J.image[Ee].image:J.image[Ee],Te[Ee]=fe(J,Te[Ee]);const ft=Te[0],Ke=S(ft)||o,Q=s.convert(J.format,J.encoding),_e=s.convert(J.type),Ae=C(J.internalFormat,Q,_e,J.encoding),ge=o&&J.isVideoTexture!==!0,pe=je.__currentVersion===void 0||Oe===!0;let de=A(J,ft,Ke);ae(34067,J,Ke);let at;if(dt){ge&&pe&&t.texStorage2D(34067,de,Ae,ft.width,ft.height);for(let Ee=0;Ee<6;Ee++){at=Te[Ee].mipmaps;for(let vt=0;vt<at.length;vt++){const et=at[vt];J.format!==Al?Q!==null?ge?t.compressedTexSubImage2D(34069+Ee,vt,0,0,et.width,et.height,Q,et.data):t.compressedTexImage2D(34069+Ee,vt,Ae,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?t.texSubImage2D(34069+Ee,vt,0,0,et.width,et.height,Q,_e,et.data):t.texImage2D(34069+Ee,vt,Ae,et.width,et.height,0,Q,_e,et.data)}}}else{at=J.mipmaps,ge&&pe&&(at.length>0&&de++,t.texStorage2D(34067,de,Ae,Te[0].width,Te[0].height));for(let Ee=0;Ee<6;Ee++)if(pt){ge?t.texSubImage2D(34069+Ee,0,0,0,Te[Ee].width,Te[Ee].height,Q,_e,Te[Ee].data):t.texImage2D(34069+Ee,0,Ae,Te[Ee].width,Te[Ee].height,0,Q,_e,Te[Ee].data);for(let vt=0;vt<at.length;vt++){const yt=at[vt].image[Ee].image;ge?t.texSubImage2D(34069+Ee,vt+1,0,0,yt.width,yt.height,Q,_e,yt.data):t.texImage2D(34069+Ee,vt+1,Ae,yt.width,yt.height,0,Q,_e,yt.data)}}else{ge?t.texSubImage2D(34069+Ee,0,0,0,Q,_e,Te[Ee]):t.texImage2D(34069+Ee,0,Ae,Q,_e,Te[Ee]);for(let vt=0;vt<at.length;vt++){const et=at[vt];ge?t.texSubImage2D(34069+Ee,vt+1,0,0,Q,_e,et.image[Ee]):t.texImage2D(34069+Ee,vt+1,Ae,Q,_e,et.image[Ee])}}}w(J,Ke)&&M(34067),je.__currentVersion=je.version,J.onUpdate&&J.onUpdate(J)}V.__version=J.version}function Ge(V,J,he,Oe,je){const dt=s.convert(he.format,he.encoding),pt=s.convert(he.type),Te=C(he.internalFormat,dt,pt,he.encoding);r.get(J).__hasExternalTextures||(je===32879||je===35866?t.texImage3D(je,0,Te,J.width,J.height,J.depth,0,dt,pt,null):t.texImage2D(je,0,Te,J.width,J.height,0,dt,pt,null)),t.bindFramebuffer(36160,V),Ze(J)?h.framebufferTexture2DMultisampleEXT(36160,Oe,je,r.get(he).__webglTexture,0,Le(J)):n.framebufferTexture2D(36160,Oe,je,r.get(he).__webglTexture,0),t.bindFramebuffer(36160,null)}function me(V,J,he){if(n.bindRenderbuffer(36161,V),J.depthBuffer&&!J.stencilBuffer){let Oe=33189;if(he||Ze(J)){const je=J.depthTexture;je&&je.isDepthTexture&&(je.type===Uf?Oe=36012:je.type===Ip&&(Oe=33190));const dt=Le(J);Ze(J)?h.renderbufferStorageMultisampleEXT(36161,dt,Oe,J.width,J.height):n.renderbufferStorageMultisample(36161,dt,Oe,J.width,J.height)}else n.renderbufferStorage(36161,Oe,J.width,J.height);n.framebufferRenderbuffer(36160,36096,36161,V)}else if(J.depthBuffer&&J.stencilBuffer){const Oe=Le(J);he&&Ze(J)===!1?n.renderbufferStorageMultisample(36161,Oe,35056,J.width,J.height):Ze(J)?h.renderbufferStorageMultisampleEXT(36161,Oe,35056,J.width,J.height):n.renderbufferStorage(36161,34041,J.width,J.height),n.framebufferRenderbuffer(36160,33306,36161,V)}else{const Oe=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let je=0;je<Oe.length;je++){const dt=Oe[je],pt=s.convert(dt.format,dt.encoding),Te=s.convert(dt.type),ft=C(dt.internalFormat,pt,Te,dt.encoding),Ke=Le(J);he&&Ze(J)===!1?n.renderbufferStorageMultisample(36161,Ke,ft,J.width,J.height):Ze(J)?h.renderbufferStorageMultisampleEXT(36161,Ke,ft,J.width,J.height):n.renderbufferStorage(36161,ft,J.width,J.height)}}n.bindRenderbuffer(36161,null)}function be(V,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,V),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(J.depthTexture).__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),W(J.depthTexture,0);const Oe=r.get(J.depthTexture).__webglTexture,je=Le(J);if(J.depthTexture.format===Gp)Ze(J)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Oe,0,je):n.framebufferTexture2D(36160,36096,3553,Oe,0);else if(J.depthTexture.format===hg)Ze(J)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Oe,0,je):n.framebufferTexture2D(36160,33306,3553,Oe,0);else throw new Error("Unknown depthTexture format")}function oe(V){const J=r.get(V),he=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!J.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");be(J.__webglFramebuffer,V)}else if(he){J.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)t.bindFramebuffer(36160,J.__webglFramebuffer[Oe]),J.__webglDepthbuffer[Oe]=n.createRenderbuffer(),me(J.__webglDepthbuffer[Oe],V,!1)}else t.bindFramebuffer(36160,J.__webglFramebuffer),J.__webglDepthbuffer=n.createRenderbuffer(),me(J.__webglDepthbuffer,V,!1);t.bindFramebuffer(36160,null)}function j(V,J,he){const Oe=r.get(V);J!==void 0&&Ge(Oe.__webglFramebuffer,V,V.texture,36064,3553),he!==void 0&&oe(V)}function ke(V){const J=V.texture,he=r.get(V),Oe=r.get(J);V.addEventListener("dispose",D),V.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture===void 0&&(Oe.__webglTexture=n.createTexture()),Oe.__version=J.version,a.memory.textures++);const je=V.isWebGLCubeRenderTarget===!0,dt=V.isWebGLMultipleRenderTargets===!0,pt=S(V)||o;if(je){he.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)he.__webglFramebuffer[Te]=n.createFramebuffer()}else{if(he.__webglFramebuffer=n.createFramebuffer(),dt)if(i.drawBuffers){const Te=V.texture;for(let ft=0,Ke=Te.length;ft<Ke;ft++){const Q=r.get(Te[ft]);Q.__webglTexture===void 0&&(Q.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&V.samples>0&&Ze(V)===!1){const Te=dt?J:[J];he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,he.__webglMultisampledFramebuffer);for(let ft=0;ft<Te.length;ft++){const Ke=Te[ft];he.__webglColorRenderbuffer[ft]=n.createRenderbuffer(),n.bindRenderbuffer(36161,he.__webglColorRenderbuffer[ft]);const Q=s.convert(Ke.format,Ke.encoding),_e=s.convert(Ke.type),Ae=C(Ke.internalFormat,Q,_e,Ke.encoding),ge=Le(V);n.renderbufferStorageMultisample(36161,ge,Ae,V.width,V.height),n.framebufferRenderbuffer(36160,36064+ft,36161,he.__webglColorRenderbuffer[ft])}n.bindRenderbuffer(36161,null),V.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),me(he.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(36160,null)}}if(je){t.bindTexture(34067,Oe.__webglTexture),ae(34067,J,pt);for(let Te=0;Te<6;Te++)Ge(he.__webglFramebuffer[Te],V,J,36064,34069+Te);w(J,pt)&&M(34067),t.unbindTexture()}else if(dt){const Te=V.texture;for(let ft=0,Ke=Te.length;ft<Ke;ft++){const Q=Te[ft],_e=r.get(Q);t.bindTexture(3553,_e.__webglTexture),ae(3553,Q,pt),Ge(he.__webglFramebuffer,V,Q,36064+ft,3553),w(Q,pt)&&M(3553)}t.unbindTexture()}else{let Te=3553;(V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(o?Te=V.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Te,Oe.__webglTexture),ae(Te,J,pt),Ge(he.__webglFramebuffer,V,J,36064,Te),w(J,pt)&&M(Te),t.unbindTexture()}V.depthBuffer&&oe(V)}function ze(V){const J=S(V)||o,he=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let Oe=0,je=he.length;Oe<je;Oe++){const dt=he[Oe];if(w(dt,J)){const pt=V.isWebGLCubeRenderTarget?34067:3553,Te=r.get(dt).__webglTexture;t.bindTexture(pt,Te),M(pt),t.unbindTexture()}}}function Ve(V){if(o&&V.samples>0&&Ze(V)===!1){const J=V.isWebGLMultipleRenderTargets?V.texture:[V.texture],he=V.width,Oe=V.height;let je=16384;const dt=[],pt=V.stencilBuffer?33306:36096,Te=r.get(V),ft=V.isWebGLMultipleRenderTargets===!0;if(ft)for(let Ke=0;Ke<J.length;Ke++)t.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ke,36161,null),t.bindFramebuffer(36160,Te.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ke,3553,null,0);t.bindFramebuffer(36008,Te.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Te.__webglFramebuffer);for(let Ke=0;Ke<J.length;Ke++){dt.push(36064+Ke),V.depthBuffer&&dt.push(pt);const Q=Te.__ignoreDepthValues!==void 0?Te.__ignoreDepthValues:!1;if(Q===!1&&(V.depthBuffer&&(je|=256),V.stencilBuffer&&(je|=1024)),ft&&n.framebufferRenderbuffer(36008,36064,36161,Te.__webglColorRenderbuffer[Ke]),Q===!0&&(n.invalidateFramebuffer(36008,[pt]),n.invalidateFramebuffer(36009,[pt])),ft){const _e=r.get(J[Ke]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,_e,0)}n.blitFramebuffer(0,0,he,Oe,0,0,he,Oe,je,9728),f&&n.invalidateFramebuffer(36008,dt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),ft)for(let Ke=0;Ke<J.length;Ke++){t.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ke,36161,Te.__webglColorRenderbuffer[Ke]);const Q=r.get(J[Ke]).__webglTexture;t.bindFramebuffer(36160,Te.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ke,3553,Q,0)}t.bindFramebuffer(36009,Te.__webglMultisampledFramebuffer)}}function Le(V){return Math.min(d,V.samples)}function Ze(V){const J=r.get(V);return o&&V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function st(V){const J=a.render.frame;p.get(V)!==J&&(p.set(V,J),V.update())}function fe(V,J){const he=V.encoding,Oe=V.format,je=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||V.format===H5||he!==dh&&(he===Rr?o===!1?e.has("EXT_sRGB")===!0&&Oe===Al?(V.format=H5,V.minFilter=xs,V.generateMipmaps=!1):J=Oee.sRGBToLinear(J):(Oe!==Al||je!==o0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",he)),J}this.allocateTextureUnit=k,this.resetTextureUnits=z,this.setTexture2D=W,this.setTexture2DArray=q,this.setTexture3D=Z,this.setTextureCube=se,this.rebindTextures=j,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=Ge,this.useMultisampledRTT=Ze}function HKe(n,e,t){const r=t.isWebGL2;function i(s,a=null){let o;if(s===o0)return 5121;if(s===bVe)return 32819;if(s===_Ve)return 32820;if(s===vVe)return 5120;if(s===gVe)return 5122;if(s===Aee)return 5123;if(s===yVe)return 5124;if(s===Ip)return 5125;if(s===Uf)return 5126;if(s===u_)return r?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===SVe)return 6406;if(s===Al)return 6408;if(s===wVe)return 6409;if(s===CVe)return 6410;if(s===Gp)return 6402;if(s===hg)return 34041;if(s===MVe)return 6403;if(s===xVe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===H5)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===TVe)return 36244;if(s===AVe)return 33319;if(s===EVe)return 33320;if(s===IVe)return 36249;if(s===I2||s===HE||s===R2||s===P2)if(a===Rr)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===I2)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===HE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===R2)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===P2)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===I2)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===HE)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===R2)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===P2)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===DU||s===LU||s===kU||s===OU)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===DU)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===LU)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===kU)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===OU)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Eee)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===NU||s===BU)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===NU)return a===Rr?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===BU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===FU||s===zU||s===UU||s===HU||s===VU||s===$U||s===GU||s===WU||s===qU||s===KU||s===YU||s===XU||s===jU||s===ZU)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===FU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===zU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===UU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===HU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===VU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===$U)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===GU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===WU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===qU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===KU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===YU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===XU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===jU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===ZU)return a===Rr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===QU)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===QU)return a===Rr?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Bv?r?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}let VKe=class extends Es{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},mo=class extends $i{constructor(){super(),this.isGroup=!0,this.type="Group"}};const $Ke={type:"move"};let m4=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Qe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,r);if(c.joints[m.jointName]===void 0){const _=new mo;_.matrixAutoUpdate=!1,_.visible=!1,c.joints[m.jointName]=_,c.add(_)}const g=c.joints[m.jointName];v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent($Ke)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}},GKe=class extends sa{constructor(e,t,r,i,s,a,o,l,c,u){if(u=u!==void 0?u:Gp,u!==Gp&&u!==hg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Gp&&(r=Ip),r===void 0&&u===hg&&(r=Bv),super(null,i,s,a,o,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Vs,this.minFilter=l!==void 0?l:Vs,this.flipY=!1,this.generateMipmaps=!1}},WKe=class extends bh{constructor(e,t){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let m=null,v=null;const g=[],_=[],b=new Es;b.layers.enable(1),b.viewport=new ni;const S=new Es;S.layers.enable(2),S.viewport=new ni;const x=[b,S],w=new VKe;w.layers.enable(1),w.layers.enable(2);let M=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(F){let W=g[F];return W===void 0&&(W=new m4,g[F]=W),W.getTargetRaySpace()},this.getControllerGrip=function(F){let W=g[F];return W===void 0&&(W=new m4,g[F]=W),W.getGripSpace()},this.getHand=function(F){let W=g[F];return W===void 0&&(W=new m4,g[F]=W),W.getHandSpace()};function A(F){const W=_.indexOf(F.inputSource);if(W===-1)return;const q=g[W];q!==void 0&&q.dispatchEvent({type:F.type,data:F.inputSource})}function T(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",I);for(let F=0;F<g.length;F++){const W=_[F];W!==null&&(_[F]=null,g[F].disconnect(W))}M=null,C=null,e.setRenderTarget(m),h=null,d=null,u=null,i=null,v=null,k.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(F){s=F,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(F){o=F,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(F){l=F},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(F){if(i=F,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",T),i.addEventListener("inputsourceschange",I),p.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const W={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,W),i.updateRenderState({baseLayer:h}),v=new l0(h.framebufferWidth,h.framebufferHeight,{format:Al,type:o0,encoding:e.outputEncoding})}else{let W=null,q=null,Z=null;p.depth&&(Z=p.stencil?35056:33190,W=p.stencil?hg:Gp,q=p.stencil?Bv:Ip);const se={colorFormat:32856,depthFormat:Z,scaleFactor:s};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(se),i.updateRenderState({layers:[d]}),v=new l0(d.textureWidth,d.textureHeight,{format:Al,type:o0,depthTexture:new GKe(d.textureWidth,d.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const X=e.properties.get(v);X.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),l=null,a=await i.requestReferenceSpace(o),k.setContext(i),k.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function I(F){for(let W=0;W<F.removed.length;W++){const q=F.removed[W],Z=_.indexOf(q);Z>=0&&(_[Z]=null,g[Z].dispatchEvent({type:"disconnected",data:q}))}for(let W=0;W<F.added.length;W++){const q=F.added[W];let Z=_.indexOf(q);if(Z===-1){for(let X=0;X<g.length;X++)if(X>=_.length){_.push(q),Z=X;break}else if(_[X]===null){_[X]=q,Z=X;break}if(Z===-1)break}const se=g[Z];se&&se.dispatchEvent({type:"connected",data:q})}}const D=new Qe,B=new Qe;function O(F,W,q){D.setFromMatrixPosition(W.matrixWorld),B.setFromMatrixPosition(q.matrixWorld);const Z=D.distanceTo(B),se=W.projectionMatrix.elements,X=q.projectionMatrix.elements,ie=se[14]/(se[10]-1),ae=se[14]/(se[10]+1),ce=(se[9]+1)/se[5],we=(se[9]-1)/se[5],He=(se[8]-1)/se[0],Ge=(X[8]+1)/X[0],me=ie*He,be=ie*Ge,oe=Z/(-He+Ge),j=oe*-He;W.matrixWorld.decompose(F.position,F.quaternion,F.scale),F.translateX(j),F.translateZ(oe),F.matrixWorld.compose(F.position,F.quaternion,F.scale),F.matrixWorldInverse.copy(F.matrixWorld).invert();const ke=ie+oe,ze=ae+oe,Ve=me-j,Le=be+(Z-j),Ze=ce*ae/ze*ke,st=we*ae/ze*ke;F.projectionMatrix.makePerspective(Ve,Le,Ze,st,ke,ze)}function H(F,W){W===null?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices(W.matrixWorld,F.matrix),F.matrixWorldInverse.copy(F.matrixWorld).invert()}this.updateCamera=function(F){if(i===null)return;w.near=S.near=b.near=F.near,w.far=S.far=b.far=F.far,(M!==w.near||C!==w.far)&&(i.updateRenderState({depthNear:w.near,depthFar:w.far}),M=w.near,C=w.far);const W=F.parent,q=w.cameras;H(w,W);for(let se=0;se<q.length;se++)H(q[se],W);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),F.position.copy(w.position),F.quaternion.copy(w.quaternion),F.scale.copy(w.scale),F.matrix.copy(w.matrix),F.matrixWorld.copy(w.matrixWorld);const Z=F.children;for(let se=0,X=Z.length;se<X;se++)Z[se].updateMatrixWorld(!0);q.length===2?O(w,b,S):w.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(F){d!==null&&(d.fixedFoveation=F),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=F)};let L=null;function z(F,W){if(c=W.getViewerPose(l||a),f=W,c!==null){const q=c.views;h!==null&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let Z=!1;q.length!==w.cameras.length&&(w.cameras.length=0,Z=!0);for(let se=0;se<q.length;se++){const X=q[se];let ie=null;if(h!==null)ie=h.getViewport(X);else{const ce=u.getViewSubImage(d,X);ie=ce.viewport,se===0&&(e.setRenderTargetTextures(v,ce.colorTexture,d.ignoreDepthValues?void 0:ce.depthStencilTexture),e.setRenderTarget(v))}let ae=x[se];ae===void 0&&(ae=new Es,ae.layers.enable(se),ae.viewport=new ni,x[se]=ae),ae.matrix.fromArray(X.transform.matrix),ae.projectionMatrix.fromArray(X.projectionMatrix),ae.viewport.set(ie.x,ie.y,ie.width,ie.height),se===0&&w.matrix.copy(ae.matrix),Z===!0&&w.cameras.push(ae)}}for(let q=0;q<g.length;q++){const Z=_[q],se=g[q];Z!==null&&se!==void 0&&se.update(Z,W,l||a)}L&&L(F,W),f=null}const k=new Gee;k.setAnimationLoop(z),this.setAnimationLoop=function(F){L=F},this.dispose=function(){}}};function qKe(n,e){function t(m,v){m.fogColor.value.copy(v.color),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function r(m,v,g,_,b){v.isMeshBasicMaterial||v.isMeshLambertMaterial?i(m,v):v.isMeshToonMaterial?(i(m,v),u(m,v)):v.isMeshPhongMaterial?(i(m,v),c(m,v)):v.isMeshStandardMaterial?(i(m,v),d(m,v),v.isMeshPhysicalMaterial&&h(m,v,b)):v.isMeshMatcapMaterial?(i(m,v),f(m,v)):v.isMeshDepthMaterial?i(m,v):v.isMeshDistanceMaterial?(i(m,v),p(m,v)):v.isMeshNormalMaterial?i(m,v):v.isLineBasicMaterial?(s(m,v),v.isLineDashedMaterial&&a(m,v)):v.isPointsMaterial?o(m,v,g,_):v.isSpriteMaterial?l(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function i(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.bumpMap&&(m.bumpMap.value=v.bumpMap,m.bumpScale.value=v.bumpScale,v.side===dc&&(m.bumpScale.value*=-1)),v.displacementMap&&(m.displacementMap.value=v.displacementMap,m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap),v.normalMap&&(m.normalMap.value=v.normalMap,m.normalScale.value.copy(v.normalScale),v.side===dc&&m.normalScale.value.negate()),v.specularMap&&(m.specularMap.value=v.specularMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const g=e.get(v).envMap;if(g&&(m.envMap.value=g,m.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;const S=n.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*S}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity);let _;v.map?_=v.map:v.specularMap?_=v.specularMap:v.displacementMap?_=v.displacementMap:v.normalMap?_=v.normalMap:v.bumpMap?_=v.bumpMap:v.roughnessMap?_=v.roughnessMap:v.metalnessMap?_=v.metalnessMap:v.alphaMap?_=v.alphaMap:v.emissiveMap?_=v.emissiveMap:v.clearcoatMap?_=v.clearcoatMap:v.clearcoatNormalMap?_=v.clearcoatNormalMap:v.clearcoatRoughnessMap?_=v.clearcoatRoughnessMap:v.iridescenceMap?_=v.iridescenceMap:v.iridescenceThicknessMap?_=v.iridescenceThicknessMap:v.specularIntensityMap?_=v.specularIntensityMap:v.specularColorMap?_=v.specularColorMap:v.transmissionMap?_=v.transmissionMap:v.thicknessMap?_=v.thicknessMap:v.sheenColorMap?_=v.sheenColorMap:v.sheenRoughnessMap&&(_=v.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix));let b;v.aoMap?b=v.aoMap:v.lightMap&&(b=v.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uv2Transform.value.copy(b.matrix))}function s(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity}function a(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function o(m,v,g,_){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*g,m.scale.value=_*.5,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let b;v.map?b=v.map:v.alphaMap&&(b=v.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}function l(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let g;v.map?g=v.map:v.alphaMap&&(g=v.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),m.uvTransform.value.copy(g.matrix))}function c(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function u(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function d(m,v){m.roughness.value=v.roughness,m.metalness.value=v.metalness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function h(m,v,g){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),m.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===dc&&m.clearcoatNormalScale.value.negate())),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=g.texture,m.transmissionSamplerSize.value.set(g.width,g.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap)}function f(m,v){v.matcap&&(m.matcap.value=v.matcap)}function p(m,v){m.referencePosition.value.copy(v.referencePosition),m.nearDistance.value=v.nearDistance,m.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function KKe(n,e,t,r){let i={},s={},a=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(_,b){const S=b.program;r.uniformBlockBinding(_,S)}function c(_,b){let S=i[_.id];S===void 0&&(p(_),S=u(_),i[_.id]=S,_.addEventListener("dispose",v));const x=b.program;r.updateUBOMapping(_,x);const w=e.render.frame;s[_.id]!==w&&(h(_),s[_.id]=w)}function u(_){const b=d();_.__bindingPointIndex=b;const S=n.createBuffer(),x=_.__size,w=_.usage;return n.bindBuffer(35345,S),n.bufferData(35345,x,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,b,S),S}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const b=i[_.id],S=_.uniforms,x=_.__cache;n.bindBuffer(35345,b);for(let w=0,M=S.length;w<M;w++){const C=S[w];if(f(C,w,x)===!0){const A=C.value,T=C.__offset;typeof A=="number"?(C.__data[0]=A,n.bufferSubData(35345,T,C.__data)):(C.value.isMatrix3?(C.__data[0]=C.value.elements[0],C.__data[1]=C.value.elements[1],C.__data[2]=C.value.elements[2],C.__data[3]=C.value.elements[0],C.__data[4]=C.value.elements[3],C.__data[5]=C.value.elements[4],C.__data[6]=C.value.elements[5],C.__data[7]=C.value.elements[0],C.__data[8]=C.value.elements[6],C.__data[9]=C.value.elements[7],C.__data[10]=C.value.elements[8],C.__data[11]=C.value.elements[0]):A.toArray(C.__data),n.bufferSubData(35345,T,C.__data))}}n.bindBuffer(35345,null)}function f(_,b,S){const x=_.value;if(S[b]===void 0)return typeof x=="number"?S[b]=x:S[b]=x.clone(),!0;if(typeof x=="number"){if(S[b]!==x)return S[b]=x,!0}else{const w=S[b];if(w.equals(x)===!1)return w.copy(x),!0}return!1}function p(_){const b=_.uniforms;let S=0;const x=16;let w=0;for(let M=0,C=b.length;M<C;M++){const A=b[M],T=m(A);if(A.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=S,M>0){w=S%x;const I=x-w;w!==0&&I-T.boundary<0&&(S+=x-w,A.__offset=S)}S+=T.storage}return w=S%x,w>0&&(S+=x-w),_.__size=S,_.__cache={},this}function m(_){const b=_.value,S={boundary:0,storage:0};return typeof b=="number"?(S.boundary=4,S.storage=4):b.isVector2?(S.boundary=8,S.storage=8):b.isVector3||b.isColor?(S.boundary=16,S.storage=12):b.isVector4?(S.boundary=16,S.storage=16):b.isMatrix3?(S.boundary=48,S.storage=48):b.isMatrix4?(S.boundary=64,S.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),S}function v(_){const b=_.target;b.removeEventListener("dispose",v);const S=a.indexOf(b.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function g(){for(const _ in i)n.deleteBuffer(i[_]);a=[],i={},s={}}return{bind:l,update:c,dispose:g}}function YKe(){const n=h_("canvas");return n.style.display="block",n}function Jee(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:YKe(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let u;t!==null?u=t.getContextAttributes().alpha:u=n.alpha!==void 0?n.alpha:!1;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=dh,this.physicallyCorrectLights=!1,this.toneMapping=fd,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let v=!1,g=0,_=0,b=null,S=-1,x=null;const w=new ni,M=new ni;let C=null,A=e.width,T=e.height,I=1,D=null,B=null;const O=new ni(0,0,A,T),H=new ni(0,0,A,T);let L=!1;const z=new xk;let k=!1,F=!1,W=null;const q=new Wn,Z=new qt,se=new Qe,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ie(){return b===null?I:1}let ae=t;function ce(le,St){for(let ht=0;ht<le.length;ht++){const At=le[ht],nt=e.getContext(At,St);if(nt!==null)return nt}return null}try{const le={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${pk}`),e.addEventListener("webglcontextlost",Ae,!1),e.addEventListener("webglcontextrestored",ge,!1),e.addEventListener("webglcontextcreationerror",pe,!1),ae===null){const St=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&St.shift(),ae=ce(St,le),ae===null)throw ce(St)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ae.getShaderPrecisionFormat===void 0&&(ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let we,He,Ge,me,be,oe,j,ke,ze,Ve,Le,Ze,st,fe,V,J,he,Oe,je,dt,pt,Te,ft,Ke;function Q(){we=new aqe(ae),He=new eqe(ae,we,n),we.init(He),Te=new HKe(ae,we,He),Ge=new zKe(ae,we,He),me=new cqe,be=new AKe,oe=new UKe(ae,we,Ge,be,He,Te,me),j=new nqe(m),ke=new sqe(m),ze=new S$e(ae,He),ft=new QWe(ae,we,ze,He),Ve=new oqe(ae,ze,me,ft),Le=new hqe(ae,Ve,ze,me),je=new fqe(ae,He,oe),J=new tqe(be),Ze=new TKe(m,j,ke,we,He,ft,J),st=new qKe(m,be),fe=new IKe,V=new OKe(we,He),Oe=new ZWe(m,j,Ge,Le,u,a),he=new FKe(m,Le,He),Ke=new KKe(ae,me,He,Ge),dt=new JWe(ae,we,me,He),pt=new lqe(ae,we,me,He),me.programs=Ze.programs,m.capabilities=He,m.extensions=we,m.properties=be,m.renderLists=fe,m.shadowMap=he,m.state=Ge,m.info=me}Q();const _e=new WKe(m,ae);this.xr=_e,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const le=we.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=we.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(le){le!==void 0&&(I=le,this.setSize(A,T,!1))},this.getSize=function(le){return le.set(A,T)},this.setSize=function(le,St,ht){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=le,T=St,e.width=Math.floor(le*I),e.height=Math.floor(St*I),ht!==!1&&(e.style.width=le+"px",e.style.height=St+"px"),this.setViewport(0,0,le,St)},this.getDrawingBufferSize=function(le){return le.set(A*I,T*I).floor()},this.setDrawingBufferSize=function(le,St,ht){A=le,T=St,I=ht,e.width=Math.floor(le*ht),e.height=Math.floor(St*ht),this.setViewport(0,0,le,St)},this.getCurrentViewport=function(le){return le.copy(w)},this.getViewport=function(le){return le.copy(O)},this.setViewport=function(le,St,ht,At){le.isVector4?O.set(le.x,le.y,le.z,le.w):O.set(le,St,ht,At),Ge.viewport(w.copy(O).multiplyScalar(I).floor())},this.getScissor=function(le){return le.copy(H)},this.setScissor=function(le,St,ht,At){le.isVector4?H.set(le.x,le.y,le.z,le.w):H.set(le,St,ht,At),Ge.scissor(M.copy(H).multiplyScalar(I).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(le){Ge.setScissorTest(L=le)},this.setOpaqueSort=function(le){D=le},this.setTransparentSort=function(le){B=le},this.getClearColor=function(le){return le.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(le=!0,St=!0,ht=!0){let At=0;le&&(At|=16384),St&&(At|=256),ht&&(At|=1024),ae.clear(At)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ae,!1),e.removeEventListener("webglcontextrestored",ge,!1),e.removeEventListener("webglcontextcreationerror",pe,!1),fe.dispose(),V.dispose(),be.dispose(),j.dispose(),ke.dispose(),Le.dispose(),ft.dispose(),Ke.dispose(),Ze.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",yt),_e.removeEventListener("sessionend",Ht),W&&(W.dispose(),W=null),Ot.stop()};function Ae(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const le=me.autoReset,St=he.enabled,ht=he.autoUpdate,At=he.needsUpdate,nt=he.type;Q(),me.autoReset=le,he.enabled=St,he.autoUpdate=ht,he.needsUpdate=At,he.type=nt}function pe(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function de(le){const St=le.target;St.removeEventListener("dispose",de),at(St)}function at(le){Ee(le),be.remove(le)}function Ee(le){const St=be.get(le).programs;St!==void 0&&(St.forEach(function(ht){Ze.releaseProgram(ht)}),le.isShaderMaterial&&Ze.releaseShaderCache(le))}this.renderBufferDirect=function(le,St,ht,At,nt,_t){St===null&&(St=X);const jt=nt.isMesh&&nt.matrixWorld.determinant()<0,Sn=te(le,St,ht,At,nt);Ge.setMaterial(At,jt);let Vn=ht.index;const Je=ht.attributes.position;if(Vn===null){if(Je===void 0||Je.count===0)return}else if(Vn.count===0)return;let Qn=1;At.wireframe===!0&&(Vn=Ve.getWireframeAttribute(ht),Qn=2),ft.setup(nt,At,Sn,ht,Vn);let ot,Pe=dt;Vn!==null&&(ot=ze.get(Vn),Pe=pt,Pe.setIndex(ot));const mt=Vn!==null?Vn.count:Je.count,Mt=ht.drawRange.start*Qn,We=ht.drawRange.count*Qn,tt=_t!==null?_t.start*Qn:0,bt=_t!==null?_t.count*Qn:1/0,Dt=Math.max(Mt,tt),Kt=Math.min(mt,Mt+We,tt+bt)-1,fn=Math.max(0,Kt-Dt+1);if(fn!==0){if(nt.isMesh)At.wireframe===!0?(Ge.setLineWidth(At.wireframeLinewidth*ie()),Pe.setMode(1)):Pe.setMode(4);else if(nt.isLine){let On=At.linewidth;On===void 0&&(On=1),Ge.setLineWidth(On*ie()),nt.isLineSegments?Pe.setMode(1):nt.isLineLoop?Pe.setMode(2):Pe.setMode(3)}else nt.isPoints?Pe.setMode(0):nt.isSprite&&Pe.setMode(4);if(nt.isInstancedMesh)Pe.renderInstances(Dt,fn,nt.count);else if(ht.isInstancedBufferGeometry){const On=Math.min(ht.instanceCount,ht._maxInstanceCount);Pe.renderInstances(Dt,fn,On)}else Pe.render(Dt,fn)}},this.compile=function(le,St){h=V.get(le),h.init(),p.push(h),le.traverseVisible(function(ht){ht.isLight&&ht.layers.test(St.layers)&&(h.pushLight(ht),ht.castShadow&&h.pushShadow(ht))}),h.setupLights(m.physicallyCorrectLights),le.traverse(function(ht){const At=ht.material;if(At)if(Array.isArray(At))for(let nt=0;nt<At.length;nt++){const _t=At[nt];qn(_t,le,ht)}else qn(At,le,ht)}),p.pop(),h=null};let vt=null;function et(le){vt&&vt(le)}function yt(){Ot.stop()}function Ht(){Ot.start()}const Ot=new Gee;Ot.setAnimationLoop(et),typeof self<"u"&&Ot.setContext(self),this.setAnimationLoop=function(le){vt=le,_e.setAnimationLoop(le),le===null?Ot.stop():Ot.start()},_e.addEventListener("sessionstart",yt),_e.addEventListener("sessionend",Ht),this.render=function(le,St){if(St!==void 0&&St.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;le.autoUpdate===!0&&le.updateMatrixWorld(),St.parent===null&&St.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(St),St=_e.getCamera()),le.isScene===!0&&le.onBeforeRender(m,le,St,b),h=V.get(le,p.length),h.init(),p.push(h),q.multiplyMatrices(St.projectionMatrix,St.matrixWorldInverse),z.setFromProjectionMatrix(q),F=this.localClippingEnabled,k=J.init(this.clippingPlanes,F,St),d=fe.get(le,f.length),d.init(),f.push(d),ln(le,St,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(D,B),k===!0&&J.beginShadows();const ht=h.state.shadowsArray;if(he.render(ht,le,St),k===!0&&J.endShadows(),this.info.autoReset===!0&&this.info.reset(),Oe.render(d,le),h.setupLights(m.physicallyCorrectLights),St.isArrayCamera){const At=St.cameras;for(let nt=0,_t=At.length;nt<_t;nt++){const jt=At[nt];Vt(d,le,jt,jt.viewport)}}else Vt(d,le,St);b!==null&&(oe.updateMultisampleRenderTarget(b),oe.updateRenderTargetMipmap(b)),le.isScene===!0&&le.onAfterRender(m,le,St),ft.resetDefaultState(),S=-1,x=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,f.pop(),f.length>0?d=f[f.length-1]:d=null};function ln(le,St,ht,At){if(le.visible===!1)return;if(le.layers.test(St.layers)){if(le.isGroup)ht=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(St);else if(le.isLight)h.pushLight(le),le.castShadow&&h.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||z.intersectsSprite(le)){At&&se.setFromMatrixPosition(le.matrixWorld).applyMatrix4(q);const jt=Le.update(le),Sn=le.material;Sn.visible&&d.push(le,jt,Sn,ht,se.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(le.isSkinnedMesh&&le.skeleton.frame!==me.render.frame&&(le.skeleton.update(),le.skeleton.frame=me.render.frame),!le.frustumCulled||z.intersectsObject(le))){At&&se.setFromMatrixPosition(le.matrixWorld).applyMatrix4(q);const jt=Le.update(le),Sn=le.material;if(Array.isArray(Sn)){const Vn=jt.groups;for(let Je=0,Qn=Vn.length;Je<Qn;Je++){const ot=Vn[Je],Pe=Sn[ot.materialIndex];Pe&&Pe.visible&&d.push(le,jt,Pe,ht,se.z,ot)}}else Sn.visible&&d.push(le,jt,Sn,ht,se.z,null)}}const _t=le.children;for(let jt=0,Sn=_t.length;jt<Sn;jt++)ln(_t[jt],St,ht,At)}function Vt(le,St,ht,At){const nt=le.opaque,_t=le.transmissive,jt=le.transparent;h.setupLightsView(ht),_t.length>0&&kt(nt,St,ht),At&&Ge.viewport(w.copy(At)),nt.length>0&&Jt(nt,St,ht),_t.length>0&&Jt(_t,St,ht),jt.length>0&&Jt(jt,St,ht),Ge.buffers.depth.setTest(!0),Ge.buffers.depth.setMask(!0),Ge.buffers.color.setMask(!0),Ge.setPolygonOffset(!1)}function kt(le,St,ht){const At=He.isWebGL2;W===null&&(W=new l0(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?u_:o0,minFilter:zd,samples:At&&s===!0?4:0})),m.getDrawingBufferSize(Z),At?W.setSize(Z.x,Z.y):W.setSize(tM(Z.x),tM(Z.y));const nt=m.getRenderTarget();m.setRenderTarget(W),m.clear();const _t=m.toneMapping;m.toneMapping=fd,Jt(le,St,ht),m.toneMapping=_t,oe.updateMultisampleRenderTarget(W),oe.updateRenderTargetMipmap(W),m.setRenderTarget(nt)}function Jt(le,St,ht){const At=St.isScene===!0?St.overrideMaterial:null;for(let nt=0,_t=le.length;nt<_t;nt++){const jt=le[nt],Sn=jt.object,Vn=jt.geometry,Je=At===null?jt.material:At,Qn=jt.group;Sn.layers.test(ht.layers)&&on(Sn,St,ht,Vn,Je,Qn)}}function on(le,St,ht,At,nt,_t){le.onBeforeRender(m,St,ht,At,nt,_t),le.modelViewMatrix.multiplyMatrices(ht.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),nt.onBeforeRender(m,St,ht,At,le,_t),nt.transparent===!0&&nt.side===uh?(nt.side=dc,nt.needsUpdate=!0,m.renderBufferDirect(ht,St,At,nt,le,_t),nt.side=ch,nt.needsUpdate=!0,m.renderBufferDirect(ht,St,At,nt,le,_t),nt.side=uh):m.renderBufferDirect(ht,St,At,nt,le,_t),le.onAfterRender(m,St,ht,At,nt,_t)}function qn(le,St,ht){St.isScene!==!0&&(St=X);const At=be.get(le),nt=h.state.lights,_t=h.state.shadowsArray,jt=nt.state.version,Sn=Ze.getParameters(le,nt.state,_t,St,ht),Vn=Ze.getProgramCacheKey(Sn);let Je=At.programs;At.environment=le.isMeshStandardMaterial?St.environment:null,At.fog=St.fog,At.envMap=(le.isMeshStandardMaterial?ke:j).get(le.envMap||At.environment),Je===void 0&&(le.addEventListener("dispose",de),Je=new Map,At.programs=Je);let Qn=Je.get(Vn);if(Qn!==void 0){if(At.currentProgram===Qn&&At.lightsStateVersion===jt)return K(le,Sn),Qn}else Sn.uniforms=Ze.getUniforms(le),le.onBuild(ht,Sn,m),le.onBeforeCompile(Sn,m),Qn=Ze.acquireProgram(Sn,Vn),Je.set(Vn,Qn),At.uniforms=Sn.uniforms;const ot=At.uniforms;(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(ot.clippingPlanes=J.uniform),K(le,Sn),At.needsLights=Me(le),At.lightsStateVersion=jt,At.needsLights&&(ot.ambientLightColor.value=nt.state.ambient,ot.lightProbe.value=nt.state.probe,ot.directionalLights.value=nt.state.directional,ot.directionalLightShadows.value=nt.state.directionalShadow,ot.spotLights.value=nt.state.spot,ot.spotLightShadows.value=nt.state.spotShadow,ot.rectAreaLights.value=nt.state.rectArea,ot.ltc_1.value=nt.state.rectAreaLTC1,ot.ltc_2.value=nt.state.rectAreaLTC2,ot.pointLights.value=nt.state.point,ot.pointLightShadows.value=nt.state.pointShadow,ot.hemisphereLights.value=nt.state.hemi,ot.directionalShadowMap.value=nt.state.directionalShadowMap,ot.directionalShadowMatrix.value=nt.state.directionalShadowMatrix,ot.spotShadowMap.value=nt.state.spotShadowMap,ot.spotShadowMatrix.value=nt.state.spotShadowMatrix,ot.pointShadowMap.value=nt.state.pointShadowMap,ot.pointShadowMatrix.value=nt.state.pointShadowMatrix);const Pe=Qn.getUniforms(),mt=L2.seqWithValue(Pe.seq,ot);return At.currentProgram=Qn,At.uniformsList=mt,Qn}function K(le,St){const ht=be.get(le);ht.outputEncoding=St.outputEncoding,ht.instancing=St.instancing,ht.skinning=St.skinning,ht.morphTargets=St.morphTargets,ht.morphNormals=St.morphNormals,ht.morphColors=St.morphColors,ht.morphTargetsCount=St.morphTargetsCount,ht.numClippingPlanes=St.numClippingPlanes,ht.numIntersection=St.numClipIntersection,ht.vertexAlphas=St.vertexAlphas,ht.vertexTangents=St.vertexTangents,ht.toneMapping=St.toneMapping}function te(le,St,ht,At,nt){St.isScene!==!0&&(St=X),oe.resetTextureUnits();const _t=St.fog,jt=At.isMeshStandardMaterial?St.environment:null,Sn=b===null?m.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:dh,Vn=(At.isMeshStandardMaterial?ke:j).get(At.envMap||jt),Je=At.vertexColors===!0&&!!ht.attributes.color&&ht.attributes.color.itemSize===4,Qn=!!At.normalMap&&!!ht.attributes.tangent,ot=!!ht.morphAttributes.position,Pe=!!ht.morphAttributes.normal,mt=!!ht.morphAttributes.color,Mt=At.toneMapped?m.toneMapping:fd,We=ht.morphAttributes.position||ht.morphAttributes.normal||ht.morphAttributes.color,tt=We!==void 0?We.length:0,bt=be.get(At),Dt=h.state.lights;if(k===!0&&(F===!0||le!==x)){const vr=le===x&&At.id===S;J.setState(At,le,vr)}let Kt=!1;At.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Dt.state.version||bt.outputEncoding!==Sn||nt.isInstancedMesh&&bt.instancing===!1||!nt.isInstancedMesh&&bt.instancing===!0||nt.isSkinnedMesh&&bt.skinning===!1||!nt.isSkinnedMesh&&bt.skinning===!0||bt.envMap!==Vn||At.fog===!0&&bt.fog!==_t||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==J.numPlanes||bt.numIntersection!==J.numIntersection)||bt.vertexAlphas!==Je||bt.vertexTangents!==Qn||bt.morphTargets!==ot||bt.morphNormals!==Pe||bt.morphColors!==mt||bt.toneMapping!==Mt||He.isWebGL2===!0&&bt.morphTargetsCount!==tt)&&(Kt=!0):(Kt=!0,bt.__version=At.version);let fn=bt.currentProgram;Kt===!0&&(fn=qn(At,St,nt));let On=!1,nn=!1,Tn=!1;const In=fn.getUniforms(),rr=bt.uniforms;if(Ge.useProgram(fn.program)&&(On=!0,nn=!0,Tn=!0),At.id!==S&&(S=At.id,nn=!0),On||x!==le){if(In.setValue(ae,"projectionMatrix",le.projectionMatrix),He.logarithmicDepthBuffer&&In.setValue(ae,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),x!==le&&(x=le,nn=!0,Tn=!0),At.isShaderMaterial||At.isMeshPhongMaterial||At.isMeshToonMaterial||At.isMeshStandardMaterial||At.envMap){const vr=In.map.cameraPosition;vr!==void 0&&vr.setValue(ae,se.setFromMatrixPosition(le.matrixWorld))}(At.isMeshPhongMaterial||At.isMeshToonMaterial||At.isMeshLambertMaterial||At.isMeshBasicMaterial||At.isMeshStandardMaterial||At.isShaderMaterial)&&In.setValue(ae,"isOrthographic",le.isOrthographicCamera===!0),(At.isMeshPhongMaterial||At.isMeshToonMaterial||At.isMeshLambertMaterial||At.isMeshBasicMaterial||At.isMeshStandardMaterial||At.isShaderMaterial||At.isShadowMaterial||nt.isSkinnedMesh)&&In.setValue(ae,"viewMatrix",le.matrixWorldInverse)}if(nt.isSkinnedMesh){In.setOptional(ae,nt,"bindMatrix"),In.setOptional(ae,nt,"bindMatrixInverse");const vr=nt.skeleton;vr&&(He.floatVertexTextures?(vr.boneTexture===null&&vr.computeBoneTexture(),In.setValue(ae,"boneTexture",vr.boneTexture,oe),In.setValue(ae,"boneTextureSize",vr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Or=ht.morphAttributes;if((Or.position!==void 0||Or.normal!==void 0||Or.color!==void 0&&He.isWebGL2===!0)&&je.update(nt,ht,At,fn),(nn||bt.receiveShadow!==nt.receiveShadow)&&(bt.receiveShadow=nt.receiveShadow,In.setValue(ae,"receiveShadow",nt.receiveShadow)),nn&&(In.setValue(ae,"toneMappingExposure",m.toneMappingExposure),bt.needsLights&&$t(rr,Tn),_t&&At.fog===!0&&st.refreshFogUniforms(rr,_t),st.refreshMaterialUniforms(rr,At,I,T,W),L2.upload(ae,bt.uniformsList,rr,oe)),At.isShaderMaterial&&At.uniformsNeedUpdate===!0&&(L2.upload(ae,bt.uniformsList,rr,oe),At.uniformsNeedUpdate=!1),At.isSpriteMaterial&&In.setValue(ae,"center",nt.center),In.setValue(ae,"modelViewMatrix",nt.modelViewMatrix),In.setValue(ae,"normalMatrix",nt.normalMatrix),In.setValue(ae,"modelMatrix",nt.matrixWorld),At.isShaderMaterial||At.isRawShaderMaterial){const vr=At.uniformsGroups;for(let Sr=0,Yn=vr.length;Sr<Yn;Sr++)if(He.isWebGL2){const bi=vr[Sr];Ke.update(bi,fn),Ke.bind(bi,fn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return fn}function $t(le,St){le.ambientLightColor.needsUpdate=St,le.lightProbe.needsUpdate=St,le.directionalLights.needsUpdate=St,le.directionalLightShadows.needsUpdate=St,le.pointLights.needsUpdate=St,le.pointLightShadows.needsUpdate=St,le.spotLights.needsUpdate=St,le.spotLightShadows.needsUpdate=St,le.rectAreaLights.needsUpdate=St,le.hemisphereLights.needsUpdate=St}function Me(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(le,St,ht){be.get(le.texture).__webglTexture=St,be.get(le.depthTexture).__webglTexture=ht;const At=be.get(le);At.__hasExternalTextures=!0,At.__hasExternalTextures&&(At.__autoAllocateDepthBuffer=ht===void 0,At.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),At.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(le,St){const ht=be.get(le);ht.__webglFramebuffer=St,ht.__useDefaultFramebuffer=St===void 0},this.setRenderTarget=function(le,St=0,ht=0){b=le,g=St,_=ht;let At=!0;if(le){const Vn=be.get(le);Vn.__useDefaultFramebuffer!==void 0?(Ge.bindFramebuffer(36160,null),At=!1):Vn.__webglFramebuffer===void 0?oe.setupRenderTarget(le):Vn.__hasExternalTextures&&oe.rebindTextures(le,be.get(le.texture).__webglTexture,be.get(le.depthTexture).__webglTexture)}let nt=null,_t=!1,jt=!1;if(le){const Vn=le.texture;(Vn.isData3DTexture||Vn.isDataArrayTexture)&&(jt=!0);const Je=be.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(nt=Je[St],_t=!0):He.isWebGL2&&le.samples>0&&oe.useMultisampledRTT(le)===!1?nt=be.get(le).__webglMultisampledFramebuffer:nt=Je,w.copy(le.viewport),M.copy(le.scissor),C=le.scissorTest}else w.copy(O).multiplyScalar(I).floor(),M.copy(H).multiplyScalar(I).floor(),C=L;if(Ge.bindFramebuffer(36160,nt)&&He.drawBuffers&&At&&Ge.drawBuffers(le,nt),Ge.viewport(w),Ge.scissor(M),Ge.setScissorTest(C),_t){const Vn=be.get(le.texture);ae.framebufferTexture2D(36160,36064,34069+St,Vn.__webglTexture,ht)}else if(jt){const Vn=be.get(le.texture),Je=St||0;ae.framebufferTextureLayer(36160,36064,Vn.__webglTexture,ht||0,Je)}S=-1},this.readRenderTargetPixels=function(le,St,ht,At,nt,_t,jt){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Sn=be.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&jt!==void 0&&(Sn=Sn[jt]),Sn){Ge.bindFramebuffer(36160,Sn);try{const Vn=le.texture,Je=Vn.format,Qn=Vn.type;if(Je!==Al&&Te.convert(Je)!==ae.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ot=Qn===u_&&(we.has("EXT_color_buffer_half_float")||He.isWebGL2&&we.has("EXT_color_buffer_float"));if(Qn!==o0&&Te.convert(Qn)!==ae.getParameter(35738)&&!(Qn===Uf&&(He.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!ot){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}St>=0&&St<=le.width-At&&ht>=0&&ht<=le.height-nt&&ae.readPixels(St,ht,At,nt,Te.convert(Je),Te.convert(Qn),_t)}finally{const Vn=b!==null?be.get(b).__webglFramebuffer:null;Ge.bindFramebuffer(36160,Vn)}}},this.copyFramebufferToTexture=function(le,St,ht=0){const At=Math.pow(2,-ht),nt=Math.floor(St.image.width*At),_t=Math.floor(St.image.height*At);oe.setTexture2D(St,0),ae.copyTexSubImage2D(3553,ht,0,0,le.x,le.y,nt,_t),Ge.unbindTexture()},this.copyTextureToTexture=function(le,St,ht,At=0){const nt=St.image.width,_t=St.image.height,jt=Te.convert(ht.format),Sn=Te.convert(ht.type);oe.setTexture2D(ht,0),ae.pixelStorei(37440,ht.flipY),ae.pixelStorei(37441,ht.premultiplyAlpha),ae.pixelStorei(3317,ht.unpackAlignment),St.isDataTexture?ae.texSubImage2D(3553,At,le.x,le.y,nt,_t,jt,Sn,St.image.data):St.isCompressedTexture?ae.compressedTexSubImage2D(3553,At,le.x,le.y,St.mipmaps[0].width,St.mipmaps[0].height,jt,St.mipmaps[0].data):ae.texSubImage2D(3553,At,le.x,le.y,jt,Sn,St.image),At===0&&ht.generateMipmaps&&ae.generateMipmap(3553),Ge.unbindTexture()},this.copyTextureToTexture3D=function(le,St,ht,At,nt=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const _t=le.max.x-le.min.x+1,jt=le.max.y-le.min.y+1,Sn=le.max.z-le.min.z+1,Vn=Te.convert(At.format),Je=Te.convert(At.type);let Qn;if(At.isData3DTexture)oe.setTexture3D(At,0),Qn=32879;else if(At.isDataArrayTexture)oe.setTexture2DArray(At,0),Qn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ae.pixelStorei(37440,At.flipY),ae.pixelStorei(37441,At.premultiplyAlpha),ae.pixelStorei(3317,At.unpackAlignment);const ot=ae.getParameter(3314),Pe=ae.getParameter(32878),mt=ae.getParameter(3316),Mt=ae.getParameter(3315),We=ae.getParameter(32877),tt=ht.isCompressedTexture?ht.mipmaps[0]:ht.image;ae.pixelStorei(3314,tt.width),ae.pixelStorei(32878,tt.height),ae.pixelStorei(3316,le.min.x),ae.pixelStorei(3315,le.min.y),ae.pixelStorei(32877,le.min.z),ht.isDataTexture||ht.isData3DTexture?ae.texSubImage3D(Qn,nt,St.x,St.y,St.z,_t,jt,Sn,Vn,Je,tt.data):ht.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ae.compressedTexSubImage3D(Qn,nt,St.x,St.y,St.z,_t,jt,Sn,Vn,tt.data)):ae.texSubImage3D(Qn,nt,St.x,St.y,St.z,_t,jt,Sn,Vn,Je,tt),ae.pixelStorei(3314,ot),ae.pixelStorei(32878,Pe),ae.pixelStorei(3316,mt),ae.pixelStorei(3315,Mt),ae.pixelStorei(32877,We),nt===0&&At.generateMipmaps&&ae.generateMipmap(Qn),Ge.unbindTexture()},this.initTexture=function(le){le.isCubeTexture?oe.setTextureCube(le,0):le.isData3DTexture?oe.setTexture3D(le,0):le.isDataArrayTexture?oe.setTexture2DArray(le,0):oe.setTexture2D(le,0),Ge.unbindTexture()},this.resetState=function(){g=0,_=0,b=null,Ge.reset(),ft.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class XKe extends Jee{}XKe.prototype.isWebGL1Renderer=!0;class Ck{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new wn(e),this.density=t}clone(){return new Ck(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Mk{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new wn(e),this.near=t,this.far=r}clone(){return new Mk(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let Tk=class extends $i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};class Ak{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=U5,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Pa=new Qe;class c0{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Pa.fromBufferAttribute(this,t),Pa.applyMatrix4(e),this.setXYZ(t,Pa.x,Pa.y,Pa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Pa.fromBufferAttribute(this,t),Pa.applyNormalMatrix(e),this.setXYZ(t,Pa.x,Pa.y,Pa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Pa.fromBufferAttribute(this,t),Pa.transformDirection(e),this.setXYZ(t,Pa.x,Pa.y,Pa.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new ss(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new c0(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ek extends ws{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gm;const n1=new Qe,ym=new Qe,bm=new Qe,_m=new qt,r1=new qt,ete=new Wn,Jx=new Qe,i1=new Qe,ew=new Qe,kH=new qt,v4=new qt,OH=new qt;class k2 extends $i{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",gm===void 0){gm=new Vr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Ak(t,5);gm.setIndex([0,1,2,0,2,3]),gm.setAttribute("position",new c0(r,3,0,!1)),gm.setAttribute("uv",new c0(r,2,3,!1))}this.geometry=gm,this.material=e!==void 0?e:new Ek,this.center=new qt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ym.setFromMatrixScale(this.matrixWorld),ete.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ym.multiplyScalar(-bm.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const a=this.center;tw(Jx.set(-.5,-.5,0),bm,a,ym,i,s),tw(i1.set(.5,-.5,0),bm,a,ym,i,s),tw(ew.set(.5,.5,0),bm,a,ym,i,s),kH.set(0,0),v4.set(1,0),OH.set(1,1);let o=e.ray.intersectTriangle(Jx,i1,ew,!1,n1);if(o===null&&(tw(i1.set(-.5,.5,0),bm,a,ym,i,s),v4.set(0,1),o=e.ray.intersectTriangle(Jx,ew,i1,!1,n1),o===null))return;const l=e.ray.origin.distanceTo(n1);l<e.near||l>e.far||t.push({distance:l,point:n1.clone(),uv:nb.getUV(n1,Jx,i1,ew,kH,v4,OH,new qt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function tw(n,e,t,r,i,s){_m.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(r1.x=s*_m.x-i*_m.y,r1.y=i*_m.x+s*_m.y):r1.copy(_m),n.copy(e),n.x+=r1.x,n.y+=r1.y,n.applyMatrix4(ete)}const nw=new Qe,NH=new Qe;class jKe extends $i{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){nw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(nw);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){nw.setFromMatrixPosition(e.matrixWorld),NH.setFromMatrixPosition(this.matrixWorld);const r=nw.distanceTo(NH)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}const BH=new Qe,FH=new ni,zH=new ni,ZKe=new Qe,UH=new Wn;class $T extends Ds{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Wn,this.bindMatrixInverse=new Wn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ni,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;FH.fromBufferAttribute(i.attributes.skinIndex,e),zH.fromBufferAttribute(i.attributes.skinWeight,e),BH.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=zH.getComponent(s);if(a!==0){const o=FH.getComponent(s);UH.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(ZKe.copy(BH).applyMatrix4(UH),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class vg extends $i{constructor(){super(),this.isBone=!0,this.type="Bone"}}let rb=class extends sa{constructor(e=null,t=1,r=1,i,s,a,o,l,c=Vs,u=Vs,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const HH=new Wn,QKe=new Wn;class ty{constructor(e=[],t=[]){this.uuid=Dl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Wn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Wn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:QKe;HH.multiplyMatrices(o,t[s]),HH.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new ty(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Ree(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new rb(t,e,e,Al,Uf);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new vg),this.bones.push(a),this.boneInverses.push(new Wn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}let m_=class extends ss{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const VH=new Wn,$H=new Wn,rw=[],s1=new Ds;class JKe extends Ds{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new m_(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(s1.geometry=this.geometry,s1.material=this.material,s1.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,VH),$H.multiplyMatrices(r,VH),s1.matrixWorld=$H,s1.raycast(e,rw);for(let a=0,o=rw.length;a<o;a++){const l=rw[a];l.instanceId=s,l.object=this,t.push(l)}rw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new m_(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class fc extends ws{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const GH=new Qe,WH=new Qe,qH=new Wn,g4=new HT,iw=new C0;class ny extends $i{constructor(e=new Vr,t=new fc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)GH.fromBufferAttribute(t,i-1),WH.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=GH.distanceTo(WH);e.setAttribute("lineDistance",new Pn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),iw.copy(r.boundingSphere),iw.applyMatrix4(i),iw.radius+=s,e.ray.intersectsSphere(iw)===!1)return;qH.copy(i).invert(),g4.copy(e.ray).applyMatrix4(qH);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new Qe,u=new Qe,d=new Qe,h=new Qe,f=this.isLineSegments?2:1,p=r.index,v=r.attributes.position;if(p!==null){const g=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count);for(let b=g,S=_-1;b<S;b+=f){const x=p.getX(b),w=p.getX(b+1);if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,w),g4.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(h);C<e.near||C>e.far||t.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,a.start),_=Math.min(v.count,a.start+a.count);for(let b=g,S=_-1;b<S;b+=f){if(c.fromBufferAttribute(v,b),u.fromBufferAttribute(v,b+1),g4.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const KH=new Qe,YH=new Qe;class u0 extends ny{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)KH.fromBufferAttribute(t,i),YH.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+KH.distanceTo(YH);e.setAttribute("lineDistance",new Pn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tte extends ny{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Pp extends ws{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const XH=new Wn,Y5=new HT,sw=new C0,aw=new Qe;class ib extends $i{constructor(e=new Vr,t=new Pp){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),sw.copy(r.boundingSphere),sw.applyMatrix4(i),sw.radius+=s,e.ray.intersectsSphere(sw)===!1)return;XH.copy(i).invert(),Y5.copy(e.ray).applyMatrix4(XH);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=r.index,d=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),f=Math.min(c.count,a.start+a.count);for(let p=h,m=f;p<m;p++){const v=c.getX(p);aw.fromBufferAttribute(d,v),jH(aw,v,l,i,e,t,this)}}else{const h=Math.max(0,a.start),f=Math.min(d.count,a.start+a.count);for(let p=h,m=f;p<m;p++)aw.fromBufferAttribute(d,p),jH(aw,p,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function jH(n,e,t,r,i,s,a){const o=Y5.distanceSqToPoint(n);if(o<t){const l=new Qe;Y5.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class eYe extends sa{constructor(e,t,r,i,s,a,o,l,c,u,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Mc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let a;t?a=t:a=e*r[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=r[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(s-1);const u=r[i],h=r[i+1]-u,f=(a-u)/h;return(i+f)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new qt:new Qe);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Qe,i=[],s=[],a=[],o=new Qe,l=new Wn;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new Qe)}s[0]=new Qe,a[0]=new Qe;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(i[f-1],i[f]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(As(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(o,p))}a[f].crossVectors(i[f],s[f])}if(t===!0){let f=Math.acos(As(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),a[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ik extends Mc{constructor(e=0,t=0,r=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const r=t||new qt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tYe extends Ik{constructor(e,t,r,i,s,a){super(e,t,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Rk(){let n=0,e=0,t=0,r=0;function i(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){i(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,d){let h=(a-s)/c-(o-s)/(c+u)+(o-a)/u,f=(o-a)/u-(l-a)/(u+d)+(l-o)/d;h*=u,f*=u,i(a,o,h,f)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+r*o}}}const ow=new Qe,y4=new Rk,b4=new Rk,_4=new Rk;class nYe extends Mc{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Qe){const r=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=i[(o-1)%s]:(ow.subVectors(i[0],i[1]).add(i[0]),c=ow);const d=i[o%s],h=i[(o+1)%s];if(this.closed||o+2<s?u=i[(o+2)%s]:(ow.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=ow),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),m=Math.pow(d.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),y4.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,m,v),b4.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,m,v),_4.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,m,v)}else this.curveType==="catmullrom"&&(y4.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),b4.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),_4.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(y4.calc(l),b4.calc(l),_4.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Qe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ZH(n,e,t,r,i){const s=(r-e)*.5,a=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+s+a)*l+(-3*t+3*r-2*s-a)*o+s*n+t}function rYe(n,e){const t=1-n;return t*t*e}function iYe(n,e){return 2*(1-n)*n*e}function sYe(n,e){return n*n*e}function sb(n,e,t,r){return rYe(n,e)+iYe(n,t)+sYe(n,r)}function aYe(n,e){const t=1-n;return t*t*t*e}function oYe(n,e){const t=1-n;return 3*t*t*n*e}function lYe(n,e){return 3*(1-n)*n*n*e}function cYe(n,e){return n*n*n*e}function ab(n,e,t,r,i){return aYe(n,e)+oYe(n,t)+lYe(n,r)+cYe(n,i)}class nte extends Mc{constructor(e=new qt,t=new qt,r=new qt,i=new qt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new qt){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(ab(e,i.x,s.x,a.x,o.x),ab(e,i.y,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uYe extends Mc{constructor(e=new Qe,t=new Qe,r=new Qe,i=new Qe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Qe){const r=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(ab(e,i.x,s.x,a.x,o.x),ab(e,i.y,s.y,a.y,o.y),ab(e,i.z,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Pk extends Mc{constructor(e=new qt,t=new qt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new qt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new qt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dYe extends Mc{constructor(e=new Qe,t=new Qe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Qe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rte extends Mc{constructor(e=new qt,t=new qt,r=new qt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new qt){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(sb(e,i.x,s.x,a.x),sb(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ite extends Mc{constructor(e=new Qe,t=new Qe,r=new Qe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Qe){const r=t,i=this.v0,s=this.v1,a=this.v2;return r.set(sb(e,i.x,s.x,a.x),sb(e,i.y,s.y,a.y),sb(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ste extends Mc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new qt){const r=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],d=i[a>i.length-3?i.length-1:a+2];return r.set(ZH(o,l.x,c.x,u.x,d.x),ZH(o,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new qt().fromArray(i))}return this}}var Dk=Object.freeze({__proto__:null,ArcCurve:tYe,CatmullRomCurve3:nYe,CubicBezierCurve:nte,CubicBezierCurve3:uYe,EllipseCurve:Ik,LineCurve:Pk,LineCurve3:dYe,QuadraticBezierCurve:rte,QuadraticBezierCurve3:ite,SplineCurve:ste});class fYe extends Mc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Pk(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const a=i[s]-r,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new Dk[i.type]().fromJSON(i))}return this}}class X5 extends fYe{constructor(e){super(),this.type="Path",this.currentPoint=new qt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Pk(this.currentPoint.clone(),new qt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new rte(this.currentPoint.clone(),new qt(e,t),new qt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,a){const o=new nte(this.currentPoint.clone(),new qt(e,t),new qt(r,i),new qt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new ste(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,s,a),this}absarc(e,t,r,i,s,a){return this.absellipse(e,t,r,r,i,s,a),this}ellipse(e,t,r,i,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,r,i,s,a,o,l),this}absellipse(e,t,r,i,s,a,o,l){const c=new Ik(e,t,r,i,s,a,o,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class v_ extends Vr{constructor(e=[new qt(0,-.5),new qt(.5,0),new qt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=As(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,d=new Qe,h=new qt,f=new Qe,p=new Qe,m=new Qe;let v=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:v=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,f.x=g*1,f.y=-v,f.z=g*0,m.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:v=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,f.x=g*1,f.y=-v,f.z=g*0,p.copy(f),f.x+=m.x,f.y+=m.y,f.z+=m.z,f.normalize(),l.push(f.x,f.y,f.z),m.copy(p)}for(let _=0;_<=t;_++){const b=r+_*u*i,S=Math.sin(b),x=Math.cos(b);for(let w=0;w<=e.length-1;w++){d.x=e[w].x*S,d.y=e[w].y,d.z=e[w].x*x,a.push(d.x,d.y,d.z),h.x=_/t,h.y=w/(e.length-1),o.push(h.x,h.y);const M=l[3*w+0]*S,C=l[3*w+1],A=l[3*w+0]*x;c.push(M,C,A)}}for(let _=0;_<t;_++)for(let b=0;b<e.length-1;b++){const S=b+_*e.length,x=S,w=S+e.length,M=S+e.length+1,C=S+1;s.push(x,w,C),s.push(M,C,w)}this.setIndex(s),this.setAttribute("position",new Pn(a,3)),this.setAttribute("uv",new Pn(o,2)),this.setAttribute("normal",new Pn(c,3))}static fromJSON(e){return new v_(e.points,e.segments,e.phiStart,e.phiLength)}}class nM extends v_{constructor(e=1,t=1,r=4,i=8){const s=new X5;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new nM(e.radius,e.length,e.capSegments,e.radialSegments)}}class rM extends Vr{constructor(e=1,t=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new Qe,u=new qt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const f=r+d/t*i;c.x=e*Math.cos(f),c.y=e*Math.sin(f),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Pn(a,3)),this.setAttribute("normal",new Pn(o,3)),this.setAttribute("uv",new Pn(l,2))}static fromJSON(e){return new rM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}let j5=class ate extends Vr{constructor(e=1,t=1,r=1,i=8,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],h=[],f=[];let p=0;const m=[],v=r/2;let g=0;_(),a===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new Pn(d,3)),this.setAttribute("normal",new Pn(h,3)),this.setAttribute("uv",new Pn(f,2));function _(){const S=new Qe,x=new Qe;let w=0;const M=(t-e)/r;for(let C=0;C<=s;C++){const A=[],T=C/s,I=T*(t-e)+e;for(let D=0;D<=i;D++){const B=D/i,O=B*l+o,H=Math.sin(O),L=Math.cos(O);x.x=I*H,x.y=-T*r+v,x.z=I*L,d.push(x.x,x.y,x.z),S.set(H,M,L).normalize(),h.push(S.x,S.y,S.z),f.push(B,1-T),A.push(p++)}m.push(A)}for(let C=0;C<i;C++)for(let A=0;A<s;A++){const T=m[A][C],I=m[A+1][C],D=m[A+1][C+1],B=m[A][C+1];u.push(T,I,B),u.push(I,D,B),w+=6}c.addGroup(g,w,0),g+=w}function b(S){const x=p,w=new qt,M=new Qe;let C=0;const A=S===!0?e:t,T=S===!0?1:-1;for(let D=1;D<=i;D++)d.push(0,v*T,0),h.push(0,T,0),f.push(.5,.5),p++;const I=p;for(let D=0;D<=i;D++){const O=D/i*l+o,H=Math.cos(O),L=Math.sin(O);M.x=A*L,M.y=v*T,M.z=A*H,d.push(M.x,M.y,M.z),h.push(0,T,0),w.x=H*.5+.5,w.y=L*.5*T+.5,f.push(w.x,w.y),p++}for(let D=0;D<i;D++){const B=x+D,O=I+D;S===!0?u.push(O,O+1,B):u.push(O+1,O,B),C+=3}c.addGroup(g,C,S===!0?1:2),g+=C}}static fromJSON(e){return new ate(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},QH=class ote extends j5{constructor(e=1,t=1,r=8,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new ote(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};class fh extends Vr{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],a=[];o(i),c(r),u(),this.setAttribute("position",new Pn(s,3)),this.setAttribute("normal",new Pn(s.slice(),3)),this.setAttribute("uv",new Pn(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(_){const b=new Qe,S=new Qe,x=new Qe;for(let w=0;w<t.length;w+=3)f(t[w+0],b),f(t[w+1],S),f(t[w+2],x),l(b,S,x,_)}function l(_,b,S,x){const w=x+1,M=[];for(let C=0;C<=w;C++){M[C]=[];const A=_.clone().lerp(S,C/w),T=b.clone().lerp(S,C/w),I=w-C;for(let D=0;D<=I;D++)D===0&&C===w?M[C][D]=A:M[C][D]=A.clone().lerp(T,D/I)}for(let C=0;C<w;C++)for(let A=0;A<2*(w-C)-1;A++){const T=Math.floor(A/2);A%2===0?(h(M[C][T+1]),h(M[C+1][T]),h(M[C][T])):(h(M[C][T+1]),h(M[C+1][T+1]),h(M[C+1][T]))}}function c(_){const b=new Qe;for(let S=0;S<s.length;S+=3)b.x=s[S+0],b.y=s[S+1],b.z=s[S+2],b.normalize().multiplyScalar(_),s[S+0]=b.x,s[S+1]=b.y,s[S+2]=b.z}function u(){const _=new Qe;for(let b=0;b<s.length;b+=3){_.x=s[b+0],_.y=s[b+1],_.z=s[b+2];const S=v(_)/2/Math.PI+.5,x=g(_)/Math.PI+.5;a.push(S,1-x)}p(),d()}function d(){for(let _=0;_<a.length;_+=6){const b=a[_+0],S=a[_+2],x=a[_+4],w=Math.max(b,S,x),M=Math.min(b,S,x);w>.9&&M<.1&&(b<.2&&(a[_+0]+=1),S<.2&&(a[_+2]+=1),x<.2&&(a[_+4]+=1))}}function h(_){s.push(_.x,_.y,_.z)}function f(_,b){const S=_*3;b.x=e[S+0],b.y=e[S+1],b.z=e[S+2]}function p(){const _=new Qe,b=new Qe,S=new Qe,x=new Qe,w=new qt,M=new qt,C=new qt;for(let A=0,T=0;A<s.length;A+=9,T+=6){_.set(s[A+0],s[A+1],s[A+2]),b.set(s[A+3],s[A+4],s[A+5]),S.set(s[A+6],s[A+7],s[A+8]),w.set(a[T+0],a[T+1]),M.set(a[T+2],a[T+3]),C.set(a[T+4],a[T+5]),x.copy(_).add(b).add(S).divideScalar(3);const I=v(x);m(w,T+0,_,I),m(M,T+2,b,I),m(C,T+4,S,I)}}function m(_,b,S,x){x<0&&_.x===1&&(a[b]=_.x-1),S.x===0&&S.z===0&&(a[b]=x/2/Math.PI+.5)}function v(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new fh(e.vertices,e.indices,e.radius,e.details)}}class iM extends fh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new iM(e.radius,e.detail)}}const lw=new Qe,cw=new Qe,S4=new Qe,uw=new nb;class hYe extends Vr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Fv*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},f=[];for(let p=0;p<l;p+=3){a?(c[0]=a.getX(p),c[1]=a.getX(p+1),c[2]=a.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:v,c:g}=uw;if(m.fromBufferAttribute(o,c[0]),v.fromBufferAttribute(o,c[1]),g.fromBufferAttribute(o,c[2]),uw.getNormal(S4),d[0]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,d[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const b=(_+1)%3,S=d[_],x=d[b],w=uw[u[_]],M=uw[u[b]],C=`${S}_${x}`,A=`${x}_${S}`;A in h&&h[A]?(S4.dot(h[A].normal)<=s&&(f.push(w.x,w.y,w.z),f.push(M.x,M.y,M.z)),h[A]=null):C in h||(h[C]={index0:c[_],index1:c[b],normal:S4.clone()})}}for(const p in h)if(h[p]){const{index0:m,index1:v}=h[p];lw.fromBufferAttribute(o,m),cw.fromBufferAttribute(o,v),f.push(lw.x,lw.y,lw.z),f.push(cw.x,cw.y,cw.z)}this.setAttribute("position",new Pn(f,3))}}}class Lk extends X5{constructor(e){super(e),this.uuid=Dl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new X5().fromJSON(i))}return this}}const pYe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=lte(n,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,d,h,f;if(r&&(s=bYe(n,e,s,t)),n.length>80*t){o=c=n[0],l=u=n[1];for(let p=t;p<i;p+=t)d=n[p],h=n[p+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-o,u-l),f=f!==0?1/f:0}return g_(s,a,t,o,l,f),a}};function lte(n,e,t,r,i){let s,a;if(i===RYe(n,e,t,r)>0)for(s=e;s<t;s+=r)a=JH(s,n[s],n[s+1],a);else for(s=t-r;s>=e;s-=r)a=JH(s,n[s],n[s+1],a);return a&&GT(a,a.next)&&(b_(a),a=a.next),a}function hh(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(GT(t,t.next)||Xi(t.prev,t,t.next)===0)){if(b_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function g_(n,e,t,r,i,s,a){if(!n)return;!a&&s&&CYe(n,r,i,s);let o=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?vYe(n,r,i,s):mYe(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),b_(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=gYe(hh(n),e,t),g_(n,e,t,r,i,s,2)):a===2&&yYe(n,e,t,r,i,s):g_(hh(n),e,t,r,i,s,1);break}}}function mYe(n){const e=n.prev,t=n,r=n.next;if(Xi(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(hv(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Xi(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function vYe(n,e,t,r){const i=n.prev,s=n,a=n.next;if(Xi(i,s,a)>=0)return!1;const o=i.x<s.x?i.x<a.x?i.x:a.x:s.x<a.x?s.x:a.x,l=i.y<s.y?i.y<a.y?i.y:a.y:s.y<a.y?s.y:a.y,c=i.x>s.x?i.x>a.x?i.x:a.x:s.x>a.x?s.x:a.x,u=i.y>s.y?i.y>a.y?i.y:a.y:s.y>a.y?s.y:a.y,d=Z5(o,l,e,t,r),h=Z5(c,u,e,t,r);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&hv(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Xi(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&hv(i.x,i.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Xi(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&hv(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Xi(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&hv(i.x,i.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Xi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function gYe(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!GT(i,s)&&cte(i,r,r.next,s)&&y_(i,s)&&y_(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),b_(r),b_(r.next),r=n=s),r=r.next}while(r!==n);return hh(r)}function yYe(n,e,t,r,i,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&AYe(a,o)){let l=ute(a,o);a=hh(a,a.next),l=hh(l,l.next),g_(a,e,t,r,i,s),g_(l,e,t,r,i,s);return}o=o.next}a=a.next}while(a!==n)}function bYe(n,e,t,r){const i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*r,l=s<a-1?e[s+1]*r:n.length,c=lte(n,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(TYe(c));for(i.sort(_Ye),s=0;s<i.length;s++)SYe(i[s],t),t=hh(t,t.next);return t}function _Ye(n,e){return n.x-e.x}function SYe(n,e){if(e=xYe(n,e),e){const t=ute(e,n);hh(e,e.next),hh(t,t.next)}}function xYe(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,a;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>s){if(s=h,h===r){if(i===t.y)return t;if(i===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(r===s)return a;const o=a,l=a.x,c=a.y;let u=1/0,d;t=a;do r>=t.x&&t.x>=l&&r!==t.x&&hv(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),y_(t,n)&&(d<u||d===u&&(t.x>a.x||t.x===a.x&&wYe(a,t)))&&(a=t,u=d)),t=t.next;while(t!==o);return a}function wYe(n,e){return Xi(n.prev,n,e.prev)<0&&Xi(e.next,n,n.next)<0}function CYe(n,e,t,r){let i=n;do i.z===null&&(i.z=Z5(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,MYe(i)}function MYe(n){let e,t,r,i,s,a,o,l,c=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,r=t,o=0,e=0;e<c&&(o++,r=r.nextZ,!!r);e++);for(l=c;o>0||l>0&&r;)o!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(a>1);return n}function Z5(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function TYe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function hv(n,e,t,r,i,s,a,o){return(i-a)*(e-o)-(n-a)*(s-o)>=0&&(n-a)*(r-o)-(t-a)*(e-o)>=0&&(t-a)*(s-o)-(i-a)*(r-o)>=0}function AYe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!EYe(n,e)&&(y_(n,e)&&y_(e,n)&&IYe(n,e)&&(Xi(n.prev,n,e.prev)||Xi(n,e.prev,e))||GT(n,e)&&Xi(n.prev,n,n.next)>0&&Xi(e.prev,e,e.next)>0)}function Xi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function GT(n,e){return n.x===e.x&&n.y===e.y}function cte(n,e,t,r){const i=fw(Xi(n,e,t)),s=fw(Xi(n,e,r)),a=fw(Xi(t,r,n)),o=fw(Xi(t,r,e));return!!(i!==s&&a!==o||i===0&&dw(n,t,e)||s===0&&dw(n,r,e)||a===0&&dw(t,n,r)||o===0&&dw(t,e,r))}function dw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fw(n){return n>0?1:n<0?-1:0}function EYe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&cte(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function y_(n,e){return Xi(n.prev,n,n.next)<0?Xi(n,e,n.next)>=0&&Xi(n,n.prev,e)>=0:Xi(n,e,n.prev)<0||Xi(n,n.next,e)<0}function IYe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function ute(n,e){const t=new Q5(n.i,n.x,n.y),r=new Q5(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function JH(n,e,t,r){const i=new Q5(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function b_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Q5(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function RYe(n,e,t,r){let i=0;for(let s=e,a=t-r;s<t;s+=r)i+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return i}class qf{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return qf.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];eV(e),tV(r,e);let a=e.length;t.forEach(eV);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,tV(r,t[l]);const o=pYe.triangulate(r,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function eV(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function tV(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class sM extends Vr{constructor(e=new Lk([new qt(.5,.5),new qt(-.5,.5),new qt(-.5,-.5),new qt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new Pn(i,3)),this.setAttribute("uv",new Pn(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:PYe;let b,S=!1,x,w,M,C;g&&(b=g.getSpacedPoints(u),S=!0,h=!1,x=g.computeFrenetFrames(u,!1),w=new Qe,M=new Qe,C=new Qe),h||(v=0,f=0,p=0,m=0);const A=o.extractPoints(c);let T=A.shape;const I=A.holes;if(!qf.isClockWise(T)){T=T.reverse();for(let be=0,oe=I.length;be<oe;be++){const j=I[be];qf.isClockWise(j)&&(I[be]=j.reverse())}}const B=qf.triangulateShape(T,I),O=T;for(let be=0,oe=I.length;be<oe;be++){const j=I[be];T=T.concat(j)}function H(be,oe,j){return oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().multiplyScalar(j).add(be)}const L=T.length,z=B.length;function k(be,oe,j){let ke,ze,Ve;const Le=be.x-oe.x,Ze=be.y-oe.y,st=j.x-be.x,fe=j.y-be.y,V=Le*Le+Ze*Ze,J=Le*fe-Ze*st;if(Math.abs(J)>Number.EPSILON){const he=Math.sqrt(V),Oe=Math.sqrt(st*st+fe*fe),je=oe.x-Ze/he,dt=oe.y+Le/he,pt=j.x-fe/Oe,Te=j.y+st/Oe,ft=((pt-je)*fe-(Te-dt)*st)/(Le*fe-Ze*st);ke=je+Le*ft-be.x,ze=dt+Ze*ft-be.y;const Ke=ke*ke+ze*ze;if(Ke<=2)return new qt(ke,ze);Ve=Math.sqrt(Ke/2)}else{let he=!1;Le>Number.EPSILON?st>Number.EPSILON&&(he=!0):Le<-Number.EPSILON?st<-Number.EPSILON&&(he=!0):Math.sign(Ze)===Math.sign(fe)&&(he=!0),he?(ke=-Ze,ze=Le,Ve=Math.sqrt(V)):(ke=Le,ze=Ze,Ve=Math.sqrt(V/2))}return new qt(ke/Ve,ze/Ve)}const F=[];for(let be=0,oe=O.length,j=oe-1,ke=be+1;be<oe;be++,j++,ke++)j===oe&&(j=0),ke===oe&&(ke=0),F[be]=k(O[be],O[j],O[ke]);const W=[];let q,Z=F.concat();for(let be=0,oe=I.length;be<oe;be++){const j=I[be];q=[];for(let ke=0,ze=j.length,Ve=ze-1,Le=ke+1;ke<ze;ke++,Ve++,Le++)Ve===ze&&(Ve=0),Le===ze&&(Le=0),q[ke]=k(j[ke],j[Ve],j[Le]);W.push(q),Z=Z.concat(q)}for(let be=0;be<v;be++){const oe=be/v,j=f*Math.cos(oe*Math.PI/2),ke=p*Math.sin(oe*Math.PI/2)+m;for(let ze=0,Ve=O.length;ze<Ve;ze++){const Le=H(O[ze],F[ze],ke);ce(Le.x,Le.y,-j)}for(let ze=0,Ve=I.length;ze<Ve;ze++){const Le=I[ze];q=W[ze];for(let Ze=0,st=Le.length;Ze<st;Ze++){const fe=H(Le[Ze],q[Ze],ke);ce(fe.x,fe.y,-j)}}}const se=p+m;for(let be=0;be<L;be++){const oe=h?H(T[be],Z[be],se):T[be];S?(M.copy(x.normals[0]).multiplyScalar(oe.x),w.copy(x.binormals[0]).multiplyScalar(oe.y),C.copy(b[0]).add(M).add(w),ce(C.x,C.y,C.z)):ce(oe.x,oe.y,0)}for(let be=1;be<=u;be++)for(let oe=0;oe<L;oe++){const j=h?H(T[oe],Z[oe],se):T[oe];S?(M.copy(x.normals[be]).multiplyScalar(j.x),w.copy(x.binormals[be]).multiplyScalar(j.y),C.copy(b[be]).add(M).add(w),ce(C.x,C.y,C.z)):ce(j.x,j.y,d/u*be)}for(let be=v-1;be>=0;be--){const oe=be/v,j=f*Math.cos(oe*Math.PI/2),ke=p*Math.sin(oe*Math.PI/2)+m;for(let ze=0,Ve=O.length;ze<Ve;ze++){const Le=H(O[ze],F[ze],ke);ce(Le.x,Le.y,d+j)}for(let ze=0,Ve=I.length;ze<Ve;ze++){const Le=I[ze];q=W[ze];for(let Ze=0,st=Le.length;Ze<st;Ze++){const fe=H(Le[Ze],q[Ze],ke);S?ce(fe.x,fe.y+b[u-1].y,b[u-1].x+j):ce(fe.x,fe.y,d+j)}}}X(),ie();function X(){const be=i.length/3;if(h){let oe=0,j=L*oe;for(let ke=0;ke<z;ke++){const ze=B[ke];we(ze[2]+j,ze[1]+j,ze[0]+j)}oe=u+v*2,j=L*oe;for(let ke=0;ke<z;ke++){const ze=B[ke];we(ze[0]+j,ze[1]+j,ze[2]+j)}}else{for(let oe=0;oe<z;oe++){const j=B[oe];we(j[2],j[1],j[0])}for(let oe=0;oe<z;oe++){const j=B[oe];we(j[0]+L*u,j[1]+L*u,j[2]+L*u)}}r.addGroup(be,i.length/3-be,0)}function ie(){const be=i.length/3;let oe=0;ae(O,oe),oe+=O.length;for(let j=0,ke=I.length;j<ke;j++){const ze=I[j];ae(ze,oe),oe+=ze.length}r.addGroup(be,i.length/3-be,1)}function ae(be,oe){let j=be.length;for(;--j>=0;){const ke=j;let ze=j-1;ze<0&&(ze=be.length-1);for(let Ve=0,Le=u+v*2;Ve<Le;Ve++){const Ze=L*Ve,st=L*(Ve+1),fe=oe+ke+Ze,V=oe+ze+Ze,J=oe+ze+st,he=oe+ke+st;He(fe,V,J,he)}}}function ce(be,oe,j){l.push(be),l.push(oe),l.push(j)}function we(be,oe,j){Ge(be),Ge(oe),Ge(j);const ke=i.length/3,ze=_.generateTopUV(r,i,ke-3,ke-2,ke-1);me(ze[0]),me(ze[1]),me(ze[2])}function He(be,oe,j,ke){Ge(be),Ge(oe),Ge(ke),Ge(oe),Ge(j),Ge(ke);const ze=i.length/3,Ve=_.generateSideWallUV(r,i,ze-6,ze-3,ze-2,ze-1);me(Ve[0]),me(Ve[1]),me(Ve[3]),me(Ve[1]),me(Ve[2]),me(Ve[3])}function Ge(be){i.push(l[be*3+0]),i.push(l[be*3+1]),i.push(l[be*3+2])}function me(be){s.push(be.x),s.push(be.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return DYe(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Dk[i.type]().fromJSON(i)),new sM(r,e.options)}}const PYe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],a=e[t*3+1],o=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new qt(s,a),new qt(o,l),new qt(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],h=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[s*3],v=e[s*3+1],g=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new qt(a,1-l),new qt(c,1-d),new qt(h,1-p),new qt(m,1-g)]:[new qt(o,1-l),new qt(u,1-d),new qt(f,1-p),new qt(v,1-g)]}};function DYe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class aM extends fh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aM(e.radius,e.detail)}}class oM extends fh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oM(e.radius,e.detail)}}class lM extends Vr{constructor(e=.5,t=1,r=8,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],c=[],u=[];let d=e;const h=(t-e)/i,f=new Qe,p=new qt;for(let m=0;m<=i;m++){for(let v=0;v<=r;v++){const g=s+v/r*a;f.x=d*Math.cos(g),f.y=d*Math.sin(g),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,u.push(p.x,p.y)}d+=h}for(let m=0;m<i;m++){const v=m*(r+1);for(let g=0;g<r;g++){const _=g+v,b=_,S=_+r+1,x=_+r+2,w=_+1;o.push(b,S,w),o.push(S,x,w)}}this.setIndex(o),this.setAttribute("position",new Pn(l,3)),this.setAttribute("normal",new Pn(c,3)),this.setAttribute("uv",new Pn(u,2))}static fromJSON(e){return new lM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cM extends Vr{constructor(e=new Lk([new qt(0,.5),new qt(-.5,-.5),new qt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Pn(i,3)),this.setAttribute("normal",new Pn(s,3)),this.setAttribute("uv",new Pn(a,2));function c(u){const d=i.length/3,h=u.extractPoints(t);let f=h.shape;const p=h.holes;qf.isClockWise(f)===!1&&(f=f.reverse());for(let v=0,g=p.length;v<g;v++){const _=p[v];qf.isClockWise(_)===!0&&(p[v]=_.reverse())}const m=qf.triangulateShape(f,p);for(let v=0,g=p.length;v<g;v++){const _=p[v];f=f.concat(_)}for(let v=0,g=f.length;v<g;v++){const _=f[v];i.push(_.x,_.y,0),s.push(0,0,1),a.push(_.x,_.y)}for(let v=0,g=m.length;v<g;v++){const _=m[v],b=_[0]+d,S=_[1]+d,x=_[2]+d;r.push(b,S,x),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return LYe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];r.push(a)}return new cM(r,e.curveSegments)}}function LYe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}let nV=class dte extends Vr{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new Qe,h=new Qe,f=[],p=[],m=[],v=[];for(let g=0;g<=r;g++){const _=[],b=g/r;let S=0;g==0&&a==0?S=.5/t:g==r&&l==Math.PI&&(S=-.5/t);for(let x=0;x<=t;x++){const w=x/t;d.x=-e*Math.cos(i+w*s)*Math.sin(a+b*o),d.y=e*Math.cos(a+b*o),d.z=e*Math.sin(i+w*s)*Math.sin(a+b*o),p.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),v.push(w+S,1-b),_.push(c++)}u.push(_)}for(let g=0;g<r;g++)for(let _=0;_<t;_++){const b=u[g][_+1],S=u[g][_],x=u[g+1][_],w=u[g+1][_+1];(g!==0||a>0)&&f.push(b,S,w),(g!==r-1||l<Math.PI)&&f.push(S,x,w)}this.setIndex(f),this.setAttribute("position",new Pn(p,3)),this.setAttribute("normal",new Pn(m,3)),this.setAttribute("uv",new Pn(v,2))}static fromJSON(e){return new dte(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class uM extends fh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uM(e.radius,e.detail)}}class dM extends Vr{constructor(e=1,t=.4,r=8,i=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new Qe,d=new Qe,h=new Qe;for(let f=0;f<=r;f++)for(let p=0;p<=i;p++){const m=p/i*s,v=f/r*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),o.push(d.x,d.y,d.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(p/i),c.push(f/r)}for(let f=1;f<=r;f++)for(let p=1;p<=i;p++){const m=(i+1)*f+p-1,v=(i+1)*(f-1)+p-1,g=(i+1)*(f-1)+p,_=(i+1)*f+p;a.push(m,v,_),a.push(v,g,_)}this.setIndex(a),this.setAttribute("position",new Pn(o,3)),this.setAttribute("normal",new Pn(l,3)),this.setAttribute("uv",new Pn(c,2))}static fromJSON(e){return new dM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class fM extends Vr{constructor(e=1,t=.4,r=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:a},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],c=[],u=[],d=new Qe,h=new Qe,f=new Qe,p=new Qe,m=new Qe,v=new Qe,g=new Qe;for(let b=0;b<=r;++b){const S=b/r*s*Math.PI*2;_(S,s,a,e,f),_(S+.01,s,a,e,p),v.subVectors(p,f),g.addVectors(p,f),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(let x=0;x<=i;++x){const w=x/i*Math.PI*2,M=-t*Math.cos(w),C=t*Math.sin(w);d.x=f.x+(M*g.x+C*m.x),d.y=f.y+(M*g.y+C*m.y),d.z=f.z+(M*g.z+C*m.z),l.push(d.x,d.y,d.z),h.subVectors(d,f).normalize(),c.push(h.x,h.y,h.z),u.push(b/r),u.push(x/i)}}for(let b=1;b<=r;b++)for(let S=1;S<=i;S++){const x=(i+1)*(b-1)+(S-1),w=(i+1)*b+(S-1),M=(i+1)*b+S,C=(i+1)*(b-1)+S;o.push(x,w,C),o.push(w,M,C)}this.setIndex(o),this.setAttribute("position",new Pn(l,3)),this.setAttribute("normal",new Pn(c,3)),this.setAttribute("uv",new Pn(u,2));function _(b,S,x,w,M){const C=Math.cos(b),A=Math.sin(b),T=x/S*b,I=Math.cos(T);M.x=w*(2+I)*.5*C,M.y=w*(2+I)*A*.5,M.z=w*Math.sin(T)*.5}}static fromJSON(e){return new fM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class hM extends Vr{constructor(e=new ite(new Qe(-1,-1,0),new Qe(-1,1,0),new Qe(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new Qe,l=new Qe,c=new qt;let u=new Qe;const d=[],h=[],f=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Pn(d,3)),this.setAttribute("normal",new Pn(h,3)),this.setAttribute("uv",new Pn(f,2));function m(){for(let b=0;b<t;b++)v(b);v(s===!1?t:0),_(),g()}function v(b){u=e.getPointAt(b/t,u);const S=a.normals[b],x=a.binormals[b];for(let w=0;w<=i;w++){const M=w/i*Math.PI*2,C=Math.sin(M),A=-Math.cos(M);l.x=A*S.x+C*x.x,l.y=A*S.y+C*x.y,l.z=A*S.z+C*x.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=u.x+r*l.x,o.y=u.y+r*l.y,o.z=u.z+r*l.z,d.push(o.x,o.y,o.z)}}function g(){for(let b=1;b<=t;b++)for(let S=1;S<=i;S++){const x=(i+1)*(b-1)+(S-1),w=(i+1)*b+(S-1),M=(i+1)*b+S,C=(i+1)*(b-1)+S;p.push(x,w,C),p.push(w,M,C)}}function _(){for(let b=0;b<=t;b++)for(let S=0;S<=i;S++)c.x=b/t,c.y=S/i,f.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hM(new Dk[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class kYe extends Vr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new Qe,s=new Qe;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,f=d.count;for(let p=h,m=h+f;p<m;p+=3)for(let v=0;v<3;v++){const g=o.getX(p+v),_=o.getX(p+(v+1)%3);i.fromBufferAttribute(a,g),s.fromBufferAttribute(a,_),rV(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,d=3*o+(c+1)%3;i.fromBufferAttribute(a,u),s.fromBufferAttribute(a,d),rV(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Pn(t,3))}}}function rV(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var iV=Object.freeze({__proto__:null,BoxGeometry:p_,BoxBufferGeometry:p_,CapsuleGeometry:nM,CapsuleBufferGeometry:nM,CircleGeometry:rM,CircleBufferGeometry:rM,ConeGeometry:QH,ConeBufferGeometry:QH,CylinderGeometry:j5,CylinderBufferGeometry:j5,DodecahedronGeometry:iM,DodecahedronBufferGeometry:iM,EdgesGeometry:hYe,ExtrudeGeometry:sM,ExtrudeBufferGeometry:sM,IcosahedronGeometry:aM,IcosahedronBufferGeometry:aM,LatheGeometry:v_,LatheBufferGeometry:v_,OctahedronGeometry:oM,OctahedronBufferGeometry:oM,PlaneGeometry:q5,PlaneBufferGeometry:q5,PolyhedronGeometry:fh,PolyhedronBufferGeometry:fh,RingGeometry:lM,RingBufferGeometry:lM,ShapeGeometry:cM,ShapeBufferGeometry:cM,SphereGeometry:nV,SphereBufferGeometry:nV,TetrahedronGeometry:uM,TetrahedronBufferGeometry:uM,TorusGeometry:dM,TorusBufferGeometry:dM,TorusKnotGeometry:fM,TorusKnotBufferGeometry:fM,TubeGeometry:hM,TubeBufferGeometry:hM,WireframeGeometry:kYe});class OYe extends ws{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NYe extends Cd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ry extends ws{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _h extends ry{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return As(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new wn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class hd extends ws{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wn(16777215),this.specular=new wn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=UT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BYe extends ws{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class FYe extends ws{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class kk extends ws{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=UT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zYe extends ws{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=x0,this.normalScale=new qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UYe extends fc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function of(n,e,t){return fte(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function hw(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function fte(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function HYe(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function sV(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,a=0;a!==r;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=n[o+l]}return i}function hte(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let a=s[r];if(a!==void 0)if(Array.isArray(a))do a=s[r],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[r],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do a=s[r],a!==void 0&&(e.push(s.time),t.push(a)),s=n[i++];while(s!==void 0)}class lS{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(s=i,i=t[++r],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(r=2,s=o);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}a=r,r=0;break n}break e}for(;r<a;){const o=r+a>>>1;e<t[o]?a=o:r=o+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=r[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class VYe extends lS{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lv,endingEnd:lv}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case cv:s=e,o=2*t-r;break;case eM:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case cv:a=e,l=2*r-t;break;case eM:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-t)/(i-t),m=p*p,v=m*p,g=-h*v+2*h*m-h*p,_=(1+h)*v+(-1.5-2*h)*m+(-.5+h)*p+1,b=(-1-f)*v+(1.5+f)*m+.5*p,S=f*v-f*m;for(let x=0;x!==o;++x)s[x]=g*a[u+x]+_*a[c+x]+b*a[l+x]+S*a[d+x];return s}}class pte extends lS{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==o;++h)s[h]=a[c+h]*d+a[l+h]*u;return s}}class $Ye extends lS{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class xu{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=hw(t,this.TimeBufferType),this.values=hw(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:hw(e.times,Array),values:hw(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new $Ye(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new VYe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case d_:t=this.InterpolantFactoryMethodDiscrete;break;case pg:t=this.InterpolantFactoryMethodLinear;break;case VE:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return d_;case this.InterpolantFactoryMethodLinear:return pg;case this.InterpolantFactoryMethodSmooth:return VE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,a=i-1;for(;s!==i&&r[s]<e;)++s;for(;a!==-1&&r[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=of(r,s,a),this.values=of(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&fte(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=of(this.times),t=of(this.values),r=this.getValueSize(),i=this.getInterpolation()===VE,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(i)l=!0;else{const d=o*r,h=d-r,f=d+r;for(let p=0;p!==r;++p){const m=t[d+p];if(m!==t[h+p]||m!==t[f+p]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*r,h=a*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++a}}if(s>0){e[a]=e[s];for(let o=s*r,l=a*r,c=0;c!==r;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=of(e,0,a),this.values=of(t,0,a*r)):(this.times=e,this.values=t),this}clone(){const e=of(this.times,0),t=of(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}xu.prototype.TimeBufferType=Float32Array;xu.prototype.ValueBufferType=Float32Array;xu.prototype.DefaultInterpolation=pg;class iy extends xu{}iy.prototype.ValueTypeName="bool";iy.prototype.ValueBufferType=Array;iy.prototype.DefaultInterpolation=d_;iy.prototype.InterpolantFactoryMethodLinear=void 0;iy.prototype.InterpolantFactoryMethodSmooth=void 0;class mte extends xu{}mte.prototype.ValueTypeName="color";class gg extends xu{}gg.prototype.ValueTypeName="number";class GYe extends lS{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let c=e*o;for(let u=c+o;c!==u;c+=4)na.slerpFlat(s,0,a,c-o,a,c,l);return s}}class Md extends xu{InterpolantFactoryMethodLinear(e){return new GYe(this.times,this.values,this.getValueSize(),e)}}Md.prototype.ValueTypeName="quaternion";Md.prototype.DefaultInterpolation=pg;Md.prototype.InterpolantFactoryMethodSmooth=void 0;class sy extends xu{}sy.prototype.ValueTypeName="string";sy.prototype.ValueBufferType=Array;sy.prototype.DefaultInterpolation=d_;sy.prototype.InterpolantFactoryMethodLinear=void 0;sy.prototype.InterpolantFactoryMethodSmooth=void 0;class ph extends xu{}ph.prototype.ValueTypeName="vector";class d0{constructor(e,t=-1,r,i=gk){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Dl(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,o=r.length;a!==o;++a)t.push(qYe(r[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=r.length;s!==a;++s)t.push(xu.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=HYe(l);l=sV(l,1,u),c=sV(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new gg(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,f,p,m){if(f.length!==0){const v=[],g=[];hte(f,v,g,p),v.length!==0&&m.push(new d(h,v,g))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(const m in f){const v=[],g=[];for(let _=0;_!==h[p].morphTargets.length;++_){const b=h[p];v.push(b.time),g.push(b.morphTarget===m?1:0)}i.push(new gg(".morphTargetInfluence["+m+"]",v,g))}l=f.length*a}else{const f=".bones["+t[d].name+"]";r(ph,f+".position",h,"pos",i),r(Md,f+".quaternion",h,"rot",i),r(ph,f+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function WYe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gg;case"vector":case"vector2":case"vector3":case"vector4":return ph;case"color":return mte;case"quaternion":return Md;case"bool":case"boolean":return iy;case"string":return sy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function qYe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=WYe(n.type);if(n.times===void 0){const t=[],r=[];hte(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const yg={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class vte{constructor(e,t,r){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const gte=new vte;class ca{constructor(e){this.manager=e!==void 0?e:gte,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ou={};class KYe extends Error{constructor(e,t){super(e),this.response=t}}class Ea extends ca{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=yg.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ou[e]!==void 0){Ou[e].push({onLoad:t,onProgress:r,onError:i});return}Ou[e]=[],Ou[e].push({onLoad:t,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ou[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0;let m=0;const v=new ReadableStream({start(g){_();function _(){d.read().then(({done:b,value:S})=>{if(b)g.close();else{m+=S.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let w=0,M=u.length;w<M;w++){const C=u[w];C.onProgress&&C.onProgress(x)}g.enqueue(S),_()}})}}});return new Response(v)}else throw new KYe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{yg.add(e,c);const u=Ou[e];delete Ou[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Ou[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ou[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class YYe extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=[],o=new eYe,l=new Ea(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const f=s.parse(h,!0);a[d]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(o.minFilter=xs),o.image=a,o.format=f.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let p=0;p<f;p++){a[p]={mipmaps:[]};for(let m=0;m<h.mipmapCount;m++)a[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+m]),a[p].format=h.format,a[p].width=h.width,a[p].height=h.height}o.image=a}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=xs),o.format=h.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}class J5 extends ca{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=yg.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=h_("img");function l(){u(),yg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class XYe extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new rb,o=new Ea(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Ps,a.wrapT=c.wrapT!==void 0?c.wrapT:Ps,a.magFilter=c.magFilter!==void 0?c.magFilter:xs,a.minFilter=c.minFilter!==void 0?c.minFilter:xs,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=zd),c.mipmapCount===1&&(a.minFilter=xs),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c))},r,i),a}}class bg extends ca{constructor(e){super(e)}load(e,t,r,i){const s=new sa,a=new J5(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class M0 extends $i{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class yte extends M0{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy($i.DefaultUp),this.updateMatrix(),this.groundColor=new wn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const aV=new Wn,oV=new Qe,lV=new Qe;class Ok{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qt(512,512),this.map=null,this.mapPass=null,this.matrix=new Wn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xk,this._frameExtents=new qt(1,1),this._viewportCount=1,this._viewports=[new ni(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;oV.setFromMatrixPosition(e.matrixWorld),t.position.copy(oV),lV.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(lV),t.updateMatrixWorld(),aV.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aV),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class jYe extends Ok{constructor(){super(new Es(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=f_*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WT extends M0{constructor(e,t,r=0,i=Math.PI/3,s=0,a=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($i.DefaultUp),this.updateMatrix(),this.target=new $i,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.shadow=new jYe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const cV=new Wn,a1=new Qe,x4=new Qe;class ZYe extends Ok{constructor(){super(new Es(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qt(4,2),this._viewportCount=6,this._viewports=[new ni(2,1,1,1),new ni(0,1,1,1),new ni(3,1,1,1),new ni(1,1,1,1),new ni(3,0,1,1),new ni(1,0,1,1)],this._cubeDirections=[new Qe(1,0,0),new Qe(-1,0,0),new Qe(0,0,1),new Qe(0,0,-1),new Qe(0,1,0),new Qe(0,-1,0)],this._cubeUps=[new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,0,1),new Qe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),a1.setFromMatrixPosition(e.matrixWorld),r.position.copy(a1),x4.copy(r.position),x4.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(x4),r.updateMatrixWorld(),i.makeTranslation(-a1.x,-a1.y,-a1.z),cV.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cV)}}class f0 extends M0{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new ZYe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class QYe extends Ok{constructor(){super(new Jg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class cS extends M0{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($i.DefaultUp),this.updateMatrix(),this.target=new $i,this.shadow=new QYe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qT extends M0{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class JYe extends M0{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eXe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Qe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],1.092548*(r*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(r*s)),t.addScaledVector(a[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*r),t.addScaledVector(a[4],2*.429043*r*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*r*s),t.addScaledVector(a[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class tXe extends M0{constructor(e=new eXe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nk extends ca{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,a=new Ea(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Nk.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new wn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=r(a.value);break;case"c":i.uniforms[s].value=new wn().setHex(a.value);break;case"v2":i.uniforms[s].value=new qt().fromArray(a.value);break;case"v3":i.uniforms[s].value=new Qe().fromArray(a.value);break;case"v4":i.uniforms[s].value=new ni().fromArray(a.value);break;case"m3":i.uniforms[s].value=new El().fromArray(a.value);break;case"m4":i.uniforms[s].value=new Wn().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new qt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new qt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:OYe,SpriteMaterial:Ek,RawShaderMaterial:NYe,ShaderMaterial:Cd,PointsMaterial:Pp,MeshPhysicalMaterial:_h,MeshStandardMaterial:ry,MeshPhongMaterial:hd,MeshToonMaterial:BYe,MeshNormalMaterial:FYe,MeshLambertMaterial:kk,MeshDepthMaterial:Zee,MeshDistanceMaterial:Qee,MeshBasicMaterial:oc,MeshMatcapMaterial:zYe,LineDashedMaterial:UYe,LineBasicMaterial:fc,Material:ws};return new t[e]}}class Aa{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}let nXe=class extends Vr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};class rXe extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Ea(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(f,p){if(t[p]!==void 0)return t[p];const v=f.interleavedBuffers[p],g=s(f,v.buffer),_=uv(v.type,g),b=new Ak(_,v.stride);return b.uuid=v.uuid,t[p]=b,b}function s(f,p){if(r[p]!==void 0)return r[p];const v=f.arrayBuffers[p],g=new Uint32Array(v).buffer;return r[p]=g,g}const a=e.isInstancedBufferGeometry?new nXe:new Vr,o=e.data.index;if(o!==void 0){const f=uv(o.type,o.array);a.setIndex(new ss(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let m;if(p.isInterleavedBufferAttribute){const v=i(e.data,p.data);m=new c0(v,p.itemSize,p.offset,p.normalized)}else{const v=uv(p.type,p.array),g=p.isInstancedBufferAttribute?m_:ss;m=new g(v,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),a.setAttribute(f,m)}const c=e.data.morphAttributes;if(c)for(const f in c){const p=c[f],m=[];for(let v=0,g=p.length;v<g;v++){const _=p[v];let b;if(_.isInterleavedBufferAttribute){const S=i(e.data,_.data);b=new c0(S,_.itemSize,_.offset,_.normalized)}else{const S=uv(_.type,_.array);b=new ss(S,_.itemSize,_.normalized)}_.name!==void 0&&(b.name=_.name),m.push(b)}a.morphAttributes[f]=m}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let f=0,p=d.length;f!==p;++f){const m=d[f];a.addGroup(m.start,m.count,m.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const f=new Qe;h.center!==void 0&&f.fromArray(h.center),a.boundingSphere=new C0(f,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class iXe extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=this.path===""?Aa.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Ea(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Aa.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ea(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Lk().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new ty().fromJSON(e[s],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new rXe;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in iV?o=iV[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Nk;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];if(l.type==="MultiMaterial"){const c=[];for(let u=0;u<l.materials.length;u++){const d=l.materials[u];r[d.uuid]===void 0&&(r[d.uuid]=s.parse(d)),c.push(r[d.uuid])}i[l.uuid]=c}else r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=d0.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function a(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return a(u)}else return l.data?{data:uv(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new vte(t);s=new J5(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p<m;p++){const v=h[p],g=o(v);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new rb(g.data,g.width,g.height)))}i[d.uuid]=new dv(f)}else{const f=o(d.url);i[d.uuid]=new dv(f)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:uv(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new J5(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d],p=await s(f);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new rb(p.data,p.width,p.height)))}r[l.uuid]=new dv(u)}else{const u=await s(l.url);r[l.uuid]=new dv(u)}}}return r}parseTextures(e,t){function r(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new Sk,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new rb:u=new sa,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=r(o.mapping,sXe)),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=r(o.wrap[0],uV),u.wrapT=r(o.wrap[1],uV)),o.format!==void 0&&(u.format=o.format),o.type!==void 0&&(u.type=o.type),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=r(o.minFilter,dV)),o.magFilter!==void 0&&(u.magFilter=r(o.magFilter,dV)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(u.userData=o.userData),i[o.uuid]=u}return i}parseObject(e,t,r,i,s){let a;function o(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p<m;p++){const v=h[p];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),f.push(r[v])}return f}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,d;switch(e.type){case"Scene":a=new Tk,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new wn(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Mk(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Ck(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Es(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Jg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new qT(e.color,e.intensity);break;case"DirectionalLight":a=new cS(e.color,e.intensity);break;case"PointLight":a=new f0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new JYe(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new WT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new yte(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new tXe().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),d=l(e.material),a=new $T(u,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),d=l(e.material),a=new Ds(u,d);break;case"InstancedMesh":u=o(e.geometry),d=l(e.material);const h=e.count,f=e.instanceMatrix,p=e.instanceColor;a=new JKe(u,d,h),a.instanceMatrix=new m_(new Float32Array(f.array),16),p!==void 0&&(a.instanceColor=new m_(new Float32Array(p.array),p.itemSize));break;case"LOD":a=new jKe;break;case"Line":a=new ny(o(e.geometry),l(e.material));break;case"LineLoop":a=new tte(o(e.geometry),l(e.material));break;case"LineSegments":a=new u0(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new ib(o(e.geometry),l(e.material));break;case"Sprite":a=new k2(l(e.material));break;case"Group":a=new mo;break;case"Bone":a=new vg;break;default:a=new $i}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let f=0;f<h.length;f++)a.add(this.parseObject(h[f],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let f=0;f<h.length;f++){const p=h[f];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let f=0;f<h.length;f++){const p=h[f],m=a.getObjectByProperty("uuid",p.object);m!==void 0&&a.addLevel(m,p.distance)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const sXe={UVMapping:mk,CubeReflectionMapping:s0,CubeRefractionMapping:a0,EquirectangularReflectionMapping:l_,EquirectangularRefractionMapping:ZC,CubeUVReflectionMapping:oS},uV={RepeatWrapping:po,ClampToEdgeWrapping:Ps,MirroredRepeatWrapping:c_},dV={NearestFilter:Vs,NearestMipmapNearestFilter:QC,NearestMipmapLinearFilter:JC,LinearFilter:xs,LinearMipmapNearestFilter:vk,LinearMipmapLinearFilter:zd};class aXe extends ca{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=yg.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){yg.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class oXe{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fV(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=fV();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function fV(){return(typeof performance>"u"?Date:performance).now()}class lXe{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)r[s+o]=r[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(r,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,a=i;s!==a;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){na.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const a=this._workIndex*s;na.multiplyQuaternionsFlat(e,a,e,t,e,r),na.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[r+o]*i}}_lerpAdditive(e,t,r,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[r+a]*i}}}const Bk="\\[\\]\\.:\\/",cXe=new RegExp("["+Bk+"]","g"),Fk="[^"+Bk+"]",uXe="[^"+Bk.replace("\\.","")+"]",dXe=/((?:WC+[\/:])*)/.source.replace("WC",Fk),fXe=/(WCOD+)?/.source.replace("WCOD",uXe),hXe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Fk),pXe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Fk),mXe=new RegExp("^"+dXe+fXe+hXe+pXe+"$"),vXe=["material","materials","bones"];class gXe{constructor(e,t,r){const i=r||Yr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Yr{constructor(e,t,r){this.path=t,this.parsedPath=r||Yr.parseTrackName(t),this.node=Yr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Yr.Composite(e,t,r):new Yr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cXe,"")}static parseTrackName(e){const t=mXe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);vXe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Yr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yr.Composite=gXe;Yr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Yr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Yr.prototype.GetterByBindingType=[Yr.prototype._getValue_direct,Yr.prototype._getValue_array,Yr.prototype._getValue_arrayElement,Yr.prototype._getValue_toArray];Yr.prototype.SetterByBindingTypeAndVersioning=[[Yr.prototype._setValue_direct,Yr.prototype._setValue_direct_setNeedsUpdate,Yr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yr.prototype._setValue_array,Yr.prototype._setValue_array_setNeedsUpdate,Yr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yr.prototype._setValue_arrayElement,Yr.prototype._setValue_arrayElement_setNeedsUpdate,Yr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yr.prototype._setValue_fromArray,Yr.prototype._setValue_fromArray_setNeedsUpdate,Yr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class yXe{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:lv,endingEnd:lv};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PVe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;if(l<0||r===0)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case LVe:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case gk:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const a=r===DVe;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(r===RVe){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=cv,i.endingEnd=cv):(e?i.endingStart=this.zeroSlopeAtStart?cv:lv:i.endingStart=eM,t?i.endingEnd=this.zeroSlopeAtEnd?cv:lv:i.endingEnd=eM)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=r,this}}const bXe=new Float32Array(1);class w4 extends bh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=i[d],f=h.name;let p=u[f];if(p!==void 0)++p.referenceCount,a[d]=p;else{if(p=a[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const m=t&&t._propertyBindings[d].binding.parsedPath;p=new lXe(Yr.create(r,f,m),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),a[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new pte(new Float32Array(2),new Float32Array(2),1,bXe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?d0.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(r===void 0&&(a!==null?r=a.blendMode:r=gk),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new yXe(this,a,t,r);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?d0.findByName(r,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const a in r){const o=r[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}let _Xe=class{constructor(e,t,r=0,i=1/0){this.ray=new HT(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new bk,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return eP(e,this,r,t),r.sort(hV),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)eP(e[i],this,r,t);return r.sort(hV),r}};function hV(n,e){return n.distance-e.distance}function eP(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,a=i.length;s<a;s++)eP(i[s],e,t,!0)}}let pV=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(As(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class SXe extends u0{constructor(e=10,t=10,r=4473924,i=8947848){r=new wn(r),i=new wn(i);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let h=0,f=0,p=-o;h<=t;h++,p+=a){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const m=h===s?r:i;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}const u=new Vr;u.setAttribute("position",new Pn(l,3)),u.setAttribute("color",new Pn(c,3));const d=new fc({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}}class xXe extends u0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Vr;i.setAttribute("position",new Pn(t,3)),i.setAttribute("color",new Pn(r,3));const s=new fc({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new wn,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pk}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pk);const mV={type:"change"},C4={type:"start"},vV={type:"end"};let wXe=class extends bh{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Qe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:tm.ROTATE,MIDDLE:tm.DOLLY,RIGHT:tm.PAN},this.touches={ONE:nm.ROTATE,TWO:nm.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Te){Te.addEventListener("keydown",fe),this._domElementKeyEvents=Te},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(mV),r.update(),s=i.NONE},this.update=function(){const Te=new Qe,ft=new na().setFromUnitVectors(e.up,new Qe(0,1,0)),Ke=ft.clone().invert(),Q=new Qe,_e=new na,Ae=2*Math.PI;return function(){const pe=r.object.position;Te.copy(pe).sub(r.target),Te.applyQuaternion(ft),o.setFromVector3(Te),r.autoRotate&&s===i.NONE&&A(M()),r.enableDamping?(o.theta+=l.theta*r.dampingFactor,o.phi+=l.phi*r.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let de=r.minAzimuthAngle,at=r.maxAzimuthAngle;return isFinite(de)&&isFinite(at)&&(de<-Math.PI?de+=Ae:de>Math.PI&&(de-=Ae),at<-Math.PI?at+=Ae:at>Math.PI&&(at-=Ae),de<=at?o.theta=Math.max(de,Math.min(at,o.theta)):o.theta=o.theta>(de+at)/2?Math.max(de,o.theta):Math.min(at,o.theta)),o.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=c,o.radius=Math.max(r.minDistance,Math.min(r.maxDistance,o.radius)),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),Te.setFromSpherical(o),Te.applyQuaternion(Ke),pe.copy(r.target).add(Te),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,d||Q.distanceToSquared(r.object.position)>a||8*(1-_e.dot(r.object.quaternion))>a?(r.dispatchEvent(mV),Q.copy(r.object.position),_e.copy(r.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",he),r.domElement.removeEventListener("pointerdown",j),r.domElement.removeEventListener("pointercancel",Ve),r.domElement.removeEventListener("wheel",st),r.domElement.removeEventListener("pointermove",ke),r.domElement.removeEventListener("pointerup",ze),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",fe)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const a=1e-6,o=new pV,l=new pV;let c=1;const u=new Qe;let d=!1;const h=new qt,f=new qt,p=new qt,m=new qt,v=new qt,g=new qt,_=new qt,b=new qt,S=new qt,x=[],w={};function M(){return 2*Math.PI/60/60*r.autoRotateSpeed}function C(){return Math.pow(.95,r.zoomSpeed)}function A(Te){l.theta-=Te}function T(Te){l.phi-=Te}const I=function(){const Te=new Qe;return function(Ke,Q){Te.setFromMatrixColumn(Q,0),Te.multiplyScalar(-Ke),u.add(Te)}}(),D=function(){const Te=new Qe;return function(Ke,Q){r.screenSpacePanning===!0?Te.setFromMatrixColumn(Q,1):(Te.setFromMatrixColumn(Q,0),Te.crossVectors(r.object.up,Te)),Te.multiplyScalar(Ke),u.add(Te)}}(),B=function(){const Te=new Qe;return function(Ke,Q){const _e=r.domElement;if(r.object.isPerspectiveCamera){const Ae=r.object.position;Te.copy(Ae).sub(r.target);let ge=Te.length();ge*=Math.tan(r.object.fov/2*Math.PI/180),I(2*Ke*ge/_e.clientHeight,r.object.matrix),D(2*Q*ge/_e.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(I(Ke*(r.object.right-r.object.left)/r.object.zoom/_e.clientWidth,r.object.matrix),D(Q*(r.object.top-r.object.bottom)/r.object.zoom/_e.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function O(Te){r.object.isPerspectiveCamera?c/=Te:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*Te)),r.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function H(Te){r.object.isPerspectiveCamera?c*=Te:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/Te)),r.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function L(Te){h.set(Te.clientX,Te.clientY)}function z(Te){_.set(Te.clientX,Te.clientY)}function k(Te){m.set(Te.clientX,Te.clientY)}function F(Te){f.set(Te.clientX,Te.clientY),p.subVectors(f,h).multiplyScalar(r.rotateSpeed);const ft=r.domElement;A(2*Math.PI*p.x/ft.clientHeight),T(2*Math.PI*p.y/ft.clientHeight),h.copy(f),r.update()}function W(Te){b.set(Te.clientX,Te.clientY),S.subVectors(b,_),S.y>0?O(C()):S.y<0&&H(C()),_.copy(b),r.update()}function q(Te){v.set(Te.clientX,Te.clientY),g.subVectors(v,m).multiplyScalar(r.panSpeed),B(g.x,g.y),m.copy(v),r.update()}function Z(Te){Te.deltaY<0?H(C()):Te.deltaY>0&&O(C()),r.update()}function se(Te){let ft=!1;switch(Te.code){case r.keys.UP:B(0,r.keyPanSpeed),ft=!0;break;case r.keys.BOTTOM:B(0,-r.keyPanSpeed),ft=!0;break;case r.keys.LEFT:B(r.keyPanSpeed,0),ft=!0;break;case r.keys.RIGHT:B(-r.keyPanSpeed,0),ft=!0;break}ft&&(Te.preventDefault(),r.update())}function X(){if(x.length===1)h.set(x[0].pageX,x[0].pageY);else{const Te=.5*(x[0].pageX+x[1].pageX),ft=.5*(x[0].pageY+x[1].pageY);h.set(Te,ft)}}function ie(){if(x.length===1)m.set(x[0].pageX,x[0].pageY);else{const Te=.5*(x[0].pageX+x[1].pageX),ft=.5*(x[0].pageY+x[1].pageY);m.set(Te,ft)}}function ae(){const Te=x[0].pageX-x[1].pageX,ft=x[0].pageY-x[1].pageY,Ke=Math.sqrt(Te*Te+ft*ft);_.set(0,Ke)}function ce(){r.enableZoom&&ae(),r.enablePan&&ie()}function we(){r.enableZoom&&ae(),r.enableRotate&&X()}function He(Te){if(x.length==1)f.set(Te.pageX,Te.pageY);else{const Ke=pt(Te),Q=.5*(Te.pageX+Ke.x),_e=.5*(Te.pageY+Ke.y);f.set(Q,_e)}p.subVectors(f,h).multiplyScalar(r.rotateSpeed);const ft=r.domElement;A(2*Math.PI*p.x/ft.clientHeight),T(2*Math.PI*p.y/ft.clientHeight),h.copy(f)}function Ge(Te){if(x.length===1)v.set(Te.pageX,Te.pageY);else{const ft=pt(Te),Ke=.5*(Te.pageX+ft.x),Q=.5*(Te.pageY+ft.y);v.set(Ke,Q)}g.subVectors(v,m).multiplyScalar(r.panSpeed),B(g.x,g.y),m.copy(v)}function me(Te){const ft=pt(Te),Ke=Te.pageX-ft.x,Q=Te.pageY-ft.y,_e=Math.sqrt(Ke*Ke+Q*Q);b.set(0,_e),S.set(0,Math.pow(b.y/_.y,r.zoomSpeed)),O(S.y),_.copy(b)}function be(Te){r.enableZoom&&me(Te),r.enablePan&&Ge(Te)}function oe(Te){r.enableZoom&&me(Te),r.enableRotate&&He(Te)}function j(Te){r.enabled!==!1&&(x.length===0&&(r.domElement.setPointerCapture(Te.pointerId),r.domElement.addEventListener("pointermove",ke),r.domElement.addEventListener("pointerup",ze)),Oe(Te),Te.pointerType==="touch"?V(Te):Le(Te))}function ke(Te){r.enabled!==!1&&(Te.pointerType==="touch"?J(Te):Ze(Te))}function ze(Te){je(Te),x.length===0&&(r.domElement.releasePointerCapture(Te.pointerId),r.domElement.removeEventListener("pointermove",ke),r.domElement.removeEventListener("pointerup",ze)),r.dispatchEvent(vV),s=i.NONE}function Ve(Te){je(Te)}function Le(Te){let ft;switch(Te.button){case 0:ft=r.mouseButtons.LEFT;break;case 1:ft=r.mouseButtons.MIDDLE;break;case 2:ft=r.mouseButtons.RIGHT;break;default:ft=-1}switch(ft){case tm.DOLLY:if(r.enableZoom===!1)return;z(Te),s=i.DOLLY;break;case tm.ROTATE:if(Te.ctrlKey||Te.metaKey||Te.shiftKey){if(r.enablePan===!1)return;k(Te),s=i.PAN}else{if(r.enableRotate===!1)return;L(Te),s=i.ROTATE}break;case tm.PAN:if(Te.ctrlKey||Te.metaKey||Te.shiftKey){if(r.enableRotate===!1)return;L(Te),s=i.ROTATE}else{if(r.enablePan===!1)return;k(Te),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(C4)}function Ze(Te){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;F(Te);break;case i.DOLLY:if(r.enableZoom===!1)return;W(Te);break;case i.PAN:if(r.enablePan===!1)return;q(Te);break}}function st(Te){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(Te.preventDefault(),r.dispatchEvent(C4),Z(Te),r.dispatchEvent(vV))}function fe(Te){r.enabled===!1||r.enablePan===!1||se(Te)}function V(Te){switch(dt(Te),x.length){case 1:switch(r.touches.ONE){case nm.ROTATE:if(r.enableRotate===!1)return;X(),s=i.TOUCH_ROTATE;break;case nm.PAN:if(r.enablePan===!1)return;ie(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case nm.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ce(),s=i.TOUCH_DOLLY_PAN;break;case nm.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;we(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(C4)}function J(Te){switch(dt(Te),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;He(Te),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;Ge(Te),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;be(Te),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;oe(Te),r.update();break;default:s=i.NONE}}function he(Te){r.enabled!==!1&&Te.preventDefault()}function Oe(Te){x.push(Te)}function je(Te){delete w[Te.pointerId];for(let ft=0;ft<x.length;ft++)if(x[ft].pointerId==Te.pointerId){x.splice(ft,1);return}}function dt(Te){let ft=w[Te.pointerId];ft===void 0&&(ft=new qt,w[Te.pointerId]=ft),ft.set(Te.pageX,Te.pageY)}function pt(Te){const ft=Te.pointerId===x[0].pointerId?x[1]:x[0];return w[ft.pointerId]}r.domElement.addEventListener("contextmenu",he),r.domElement.addEventListener("pointerdown",j),r.domElement.addEventListener("pointercancel",Ve),r.domElement.addEventListener("wheel",st,{passive:!1}),this.update()}};var ob=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),r(++n%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function r(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";n=u}var i=(performance||Date).now(),s=i,a=0,o=t(new ob.Panel("FPS","#0ff","#002")),l=t(new ob.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new ob.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:e,addPanel:t,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){a++;var u=(performance||Date).now();if(l.update(u-i,200),u>=s+1e3&&(o.update(a*1e3/(u-s),100),s=u,a=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){i=this.end()},domElement:e,setMode:r}};ob.Panel=function(n,e,t){var r=1/0,i=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,l=48*a,c=3*a,u=2*a,d=3*a,h=15*a,f=74*a,p=30*a,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=t,v.fillRect(0,0,o,l),v.fillStyle=e,v.fillText(n,c,u),v.fillRect(d,h,f,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d,h,f,p),{dom:m,update:function(g,_){r=Math.min(r,g),i=Math.max(i,g),v.fillStyle=t,v.globalAlpha=1,v.fillRect(0,0,o,h),v.fillStyle=e,v.fillText(s(g)+" "+n+" ("+s(r)+"-"+s(i)+")",c,u),v.drawImage(m,d+a,h,f-a,p,d,h,f-a,p),v.fillRect(d+f-a,h,a,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d+f-a,h,a,s((1-g/_)*p))}}};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var gV={},tP=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},bte=function(n){return new Worker(n)};try{URL.revokeObjectURL(tP(""))}catch{tP=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},bte=function(e){return new Worker(e,{type:"module"})}}var CXe=function(n,e,t,r,i){var s=bte(gV[e]||(gV[e]=tP(n)));return s.onerror=function(a){return i(a.error,null)},s.onmessage=function(a){return i(null,a.data)},s.postMessage(t,r),s},Gr=Uint8Array,$s=Uint16Array,Td=Uint32Array,ay=new Gr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oy=new Gr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),__=new Gr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_te=function(n,e){for(var t=new $s(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Td(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},Ste=_te(ay,2),zk=Ste[0],pM=Ste[1];zk[28]=258,pM[258]=28;var xte=_te(oy,0),wte=xte[0],nP=xte[1],S_=new $s(32768);for(var ki=0;ki<32768;++ki){var lf=(ki&43690)>>>1|(ki&21845)<<1;lf=(lf&52428)>>>2|(lf&13107)<<2,lf=(lf&61680)>>>4|(lf&3855)<<4,S_[ki]=((lf&65280)>>>8|(lf&255)<<8)>>>1}var Ll=function(n,e,t){for(var r=n.length,i=0,s=new $s(e);i<r;++i)++s[n[i]-1];var a=new $s(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new $s(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],u=e-n[i],d=a[n[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[S_[d]>>>l]=c}else for(o=new $s(r),i=0;i<r;++i)n[i]&&(o[i]=S_[a[n[i]-1]++]>>>15-n[i]);return o},Ad=new Gr(288);for(var ki=0;ki<144;++ki)Ad[ki]=8;for(var ki=144;ki<256;++ki)Ad[ki]=9;for(var ki=256;ki<280;++ki)Ad[ki]=7;for(var ki=280;ki<288;++ki)Ad[ki]=8;var _g=new Gr(32);for(var ki=0;ki<32;++ki)_g[ki]=5;var Cte=Ll(Ad,9,0),Mte=Ll(Ad,9,1),Tte=Ll(_g,5,0),Ate=Ll(_g,5,1),O2=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ul=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},N2=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},uS=function(n){return(n/8|0)+(n&7&&1)},kl=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof $s?$s:n instanceof Td?Td:Gr)(t-e);return r.set(n.subarray(e,t)),r},dS=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Gr(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Gr(r*3));var a=function(ae){var ce=e.length;if(ae>ce){var we=new Gr(Math.max(ce*2,ae));we.set(e),e=we}},o=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,h=t.m,f=t.n,p=r*8;do{if(!u){t.f=o=ul(n,l,1);var m=ul(n,l+1,3);if(l+=3,m)if(m==1)u=Mte,d=Ate,h=9,f=5;else if(m==2){var b=ul(n,l,31)+257,S=ul(n,l+10,15)+4,x=b+ul(n,l+5,31)+1;l+=14;for(var w=new Gr(x),M=new Gr(19),C=0;C<S;++C)M[__[C]]=ul(n,l+C*3,7);l+=S*3;for(var A=O2(M),T=(1<<A)-1,I=Ll(M,A,1),C=0;C<x;){var D=I[ul(n,l,T)];l+=D&15;var v=D>>>4;if(v<16)w[C++]=v;else{var B=0,O=0;for(v==16?(O=3+ul(n,l,3),l+=2,B=w[C-1]):v==17?(O=3+ul(n,l,7),l+=3):v==18&&(O=11+ul(n,l,127),l+=7);O--;)w[C++]=B}}var H=w.subarray(0,b),L=w.subarray(b);h=O2(H),f=O2(L),u=Ll(H,h,1),d=Ll(L,f,1)}else throw"invalid block type";else{var v=uS(l)+4,g=n[v-4]|n[v-3]<<8,_=v+g;if(_>r){if(s)throw"unexpected EOF";break}i&&a(c+g),e.set(n.subarray(v,_),c),t.b=c+=g,t.p=l=_*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}i&&a(c+131072);for(var z=(1<<h)-1,k=(1<<f)-1,F=l;;F=l){var B=u[N2(n,l)&z],W=B>>>4;if(l+=B&15,l>p){if(s)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(W<256)e[c++]=W;else if(W==256){F=l,u=null;break}else{var q=W-254;if(W>264){var C=W-257,Z=ay[C];q=ul(n,l,(1<<Z)-1)+zk[C],l+=Z}var se=d[N2(n,l)&k],X=se>>>4;if(!se)throw"invalid distance";l+=se&15;var L=wte[X];if(X>3){var Z=oy[X];L+=N2(n,l)&(1<<Z)-1,l+=Z}if(l>p){if(s)throw"unexpected EOF";break}i&&a(c+131072);for(var ie=c+q;c<ie;c+=4)e[c]=e[c-L],e[c+1]=e[c+1-L],e[c+2]=e[c+2-L],e[c+3]=e[c+3-L];c=ie}}t.l=u,t.p=F,t.b=c,u&&(o=1,t.m=h,t.d=d,t.n=f)}while(!o);return c==e.length?e:kl(e,0,c)},Nc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8},jm=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},B2=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[sd,0];if(i==1){var a=new Gr(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(x,w){return x.f-w.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var f=new $s(h+1),p=mM(t[u-1],f,0);if(p>e){var r=0,m=0,v=p-e,g=1<<v;for(s.sort(function(w,M){return f[M.s]-f[w.s]||w.f-M.f});r<i;++r){var _=s[r].s;if(f[_]>e)m+=g-(1<<p-f[_]),f[_]=e;else break}for(m>>>=v;m>0;){var b=s[r].s;f[b]<e?m-=1<<e-f[b]++-1:++r}for(;r>=0&&m;--r){var S=s[r].s;f[S]==e&&(--f[S],++m)}p=e}return[new Gr(f),p]},mM=function(n,e,t){return n.s==-1?Math.max(mM(n.l,e,t+1),mM(n.r,e,t+1)):e[n.s]=t},rP=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new $s(++e),r=0,i=n[0],s=1,a=function(l){t[r++]=l},o=1;o<=e;++o)if(n[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[o]}return[t.subarray(0,r),e]},Zm=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},lb=function(n,e,t){var r=t.length,i=uS(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},iP=function(n,e,t,r,i,s,a,o,l,c,u){Nc(e,u++,t),++i[256];for(var d=B2(i,15),h=d[0],f=d[1],p=B2(s,15),m=p[0],v=p[1],g=rP(h),_=g[0],b=g[1],S=rP(m),x=S[0],w=S[1],M=new $s(19),C=0;C<_.length;++C)M[_[C]&31]++;for(var C=0;C<x.length;++C)M[x[C]&31]++;for(var A=B2(M,7),T=A[0],I=A[1],D=19;D>4&&!T[__[D-1]];--D);var B=c+5<<3,O=Zm(i,Ad)+Zm(s,_g)+a,H=Zm(i,h)+Zm(s,m)+a+14+3*D+Zm(M,T)+(2*M[16]+3*M[17]+7*M[18]);if(B<=O&&B<=H)return lb(e,u,n.subarray(l,l+c));var L,z,k,F;if(Nc(e,u,1+(H<O)),u+=2,H<O){L=Ll(h,f,0),z=h,k=Ll(m,v,0),F=m;var W=Ll(T,I,0);Nc(e,u,b-257),Nc(e,u+5,w-1),Nc(e,u+10,D-4),u+=14;for(var C=0;C<D;++C)Nc(e,u+3*C,T[__[C]]);u+=3*D;for(var q=[_,x],Z=0;Z<2;++Z)for(var se=q[Z],C=0;C<se.length;++C){var X=se[C]&31;Nc(e,u,W[X]),u+=T[X],X>15&&(Nc(e,u,se[C]>>>5&127),u+=se[C]>>>12)}}else L=Cte,z=Ad,k=Tte,F=_g;for(var C=0;C<o;++C)if(r[C]>255){var X=r[C]>>>18&31;jm(e,u,L[X+257]),u+=z[X+257],X>7&&(Nc(e,u,r[C]>>>23&31),u+=ay[X]);var ie=r[C]&31;jm(e,u,k[ie]),u+=F[ie],ie>3&&(jm(e,u,r[C]>>>5&8191),u+=oy[ie])}else jm(e,u,L[r[C]]),u+=z[r[C]];return jm(e,u,L[256]),u+z[256]},Ete=new Td([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sd=new Gr(0),Ite=function(n,e,t,r,i,s){var a=n.length,o=new Gr(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),c=0;if(!e||a<8)for(var u=0;u<=a;u+=65535){var d=u+65535;d<a?c=lb(l,c,n.subarray(u,d)):(l[u]=s,c=lb(l,c,n.subarray(u,a)))}else{for(var h=Ete[e-1],f=h>>>13,p=h&8191,m=(1<<t)-1,v=new $s(32768),g=new $s(m+1),_=Math.ceil(t/3),b=2*_,S=function(j){return(n[j]^n[j+1]<<_^n[j+2]<<b)&m},x=new Td(25e3),w=new $s(288),M=new $s(32),C=0,A=0,u=0,T=0,I=0,D=0;u<a;++u){var B=S(u),O=u&32767,H=g[B];if(v[O]=H,g[B]=O,I<=u){var L=a-u;if((C>7e3||T>24576)&&L>423){c=iP(n,l,0,x,w,M,A,T,D,u-D,c),T=C=A=0,D=u;for(var z=0;z<286;++z)w[z]=0;for(var z=0;z<30;++z)M[z]=0}var k=2,F=0,W=p,q=O-H&32767;if(L>2&&B==S(u-q))for(var Z=Math.min(f,L)-1,se=Math.min(32767,u),X=Math.min(258,L);q<=se&&--W&&O!=H;){if(n[u+k]==n[u+k-q]){for(var ie=0;ie<X&&n[u+ie]==n[u+ie-q];++ie);if(ie>k){if(k=ie,F=q,ie>Z)break;for(var ae=Math.min(q,ie-2),ce=0,z=0;z<ae;++z){var we=u-q+z+32768&32767,He=v[we],Ge=we-He+32768&32767;Ge>ce&&(ce=Ge,H=we)}}}O=H,H=v[O],q+=O-H+32768&32767}if(F){x[T++]=268435456|pM[k]<<18|nP[F];var me=pM[k]&31,be=nP[F]&31;A+=ay[me]+oy[be],++w[257+me],++M[be],I=u+k,++C}else x[T++]=n[u],++w[n[u]]}}c=iP(n,l,s,x,w,M,A,T,D,u-D,c),!s&&c&7&&(c=lb(l,c+1,sd))}return kl(o,0,r+uS(c)+i)},Rte=function(){for(var n=new Td(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),ly=function(){var n=-1;return{p:function(e){for(var t=n,r=0;r<e.length;++r)t=Rte[t&255^e[r]]^t>>>8;n=t},d:function(){return~n}}},Uk=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},T0=function(n,e,t,r,i){return Ite(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!i)},fS=function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},yV=function(n,e,t){for(var r=n(),i=n.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<r.length;++a){var o=r[a],l=s[a];if(typeof o=="function"){e+=";"+l+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var u=c.indexOf(" ",8)+1;e+=c.slice(u,c.indexOf("(",u))}else{e+=c;for(var d in o.prototype)e+=";"+l+".prototype."+d+"="+o.prototype[d].toString()}else e+=c}else t[l]=o}return[e,t]},pw=[],MXe=function(n){var e=[];for(var t in n)(n[t]instanceof Gr||n[t]instanceof $s||n[t]instanceof Td)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},Pte=function(n,e,t,r){var i;if(!pw[t]){for(var s="",a={},o=n.length-1,l=0;l<o;++l)i=yV(n[l],s,a),s=i[0],a=i[1];pw[t]=yV(n[o],s,a)}var c=fS({},pw[t][1]);return CXe(pw[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,MXe(c),r)},cy=function(){return[Gr,$s,Td,ay,oy,__,zk,wte,Mte,Ate,S_,Ll,O2,ul,N2,uS,kl,dS,hy,Sh,Hk]},uy=function(){return[Gr,$s,Td,ay,oy,__,pM,nP,Cte,Ad,Tte,_g,S_,Ete,sd,Ll,Nc,jm,B2,mM,rP,Zm,lb,iP,uS,kl,Ite,T0,hS,Sh]},Dte=function(){return[Vk,Gk,oi,ly,Rte]},Lte=function(){return[$k,Nte]},kte=function(){return[Wk,oi,Uk]},Ote=function(){return[Bte]},Sh=function(n){return postMessage(n,[n.buffer])},Hk=function(n){return n&&n.size&&new Gr(n.size)},dy=function(n,e,t,r,i,s){var a=Pte(t,r,i,function(o,l){a.terminate(),s(o,l)});return a.postMessage([n,e],e.consume?[n.buffer]:[]),function(){a.terminate()}},Hl=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},fy=function(n,e,t,r,i){var s,a=Pte(n,r,i,function(o,l){o?(a.terminate(),e.ondata.call(e,o)):(l[1]&&a.terminate(),e.ondata.call(e,o,l[0],l[1]))});a.postMessage(t),e.push=function(o,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";a.postMessage([o,s=l],[o.buffer])},e.terminate=function(){a.terminate()}},Va=function(n,e){return n[e]|n[e+1]<<8},ps=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},M4=function(n,e){return ps(n,e)+ps(n,e+4)*4294967296},oi=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Vk=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&oi(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var r=0;r<=t.length;++r)n[r+10]=t.charCodeAt(r)}},$k=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},Nte=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Gk=function(n){return 10+(n.filename&&n.filename.length+1||0)},Wk=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},Bte=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function qk(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var uu=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(T0(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),Fte=function(){function n(e,t){fy([uy,function(){return[Hl,uu]}],this,qk.call(this,e,t),function(r){var i=new uu(r.data);onmessage=Hl(i)},6)}return n}();function zte(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return dy(n,e,[uy],function(r){return Sh(hS(r.data[0],r.data[1]))},0,t)}function hS(n,e){return T0(n,e||{},0,0)}var So=function(){function n(e){this.s={},this.p=new Gr(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new Gr(t+e.length);r.set(this.p),r.set(e,t),this.p=r},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=dS(this.p,this.o,this.s);this.ondata(kl(r,t,this.s.b),this.d),this.o=kl(r,this.s.b-32768),this.s.b=this.o.length,this.p=kl(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),Kk=function(){function n(e){this.ondata=e,fy([cy,function(){return[Hl,So]}],this,0,function(){var t=new So;onmessage=Hl(t)},7)}return n}();function Yk(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return dy(n,e,[cy],function(r){return Sh(hy(r.data[0],Hk(r.data[1])))},1,t)}function hy(n,e){return dS(n,e)}var vM=function(){function n(e,t){this.c=ly(),this.l=0,this.v=1,uu.call(this,e,t)}return n.prototype.push=function(e,t){uu.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=T0(e,this.o,this.v&&Gk(this.o),t&&8,!t);this.v&&(Vk(r,this.o),this.v=0),t&&(oi(r,r.length-8,this.c.d()),oi(r,r.length-4,this.l)),this.ondata(r,t)},n}(),bV=function(){function n(e,t){fy([uy,Dte,function(){return[Hl,uu,vM]}],this,qk.call(this,e,t),function(r){var i=new vM(r.data);onmessage=Hl(i)},8)}return n}();function _V(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return dy(n,e,[uy,Dte,function(){return[gM]}],function(r){return Sh(gM(r.data[0],r.data[1]))},2,t)}function gM(n,e){e||(e={});var t=ly(),r=n.length;t.p(n);var i=T0(n,e,Gk(e),8),s=i.length;return Vk(i,e),oi(i,s-8,t.d()),oi(i,s-4,r),i}var yM=function(){function n(e){this.v=1,So.call(this,e)}return n.prototype.push=function(e,t){if(So.prototype.e.call(this,e),this.v){var r=this.p.length>3?$k(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}So.prototype.c.call(this,t)},n}(),Ute=function(){function n(e){this.ondata=e,fy([cy,Lte,function(){return[Hl,So,yM]}],this,0,function(){var t=new yM;onmessage=Hl(t)},9)}return n}();function Hte(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return dy(n,e,[cy,Lte,function(){return[bM]}],function(r){return Sh(bM(r.data[0]))},3,t)}function bM(n,e){return dS(n.subarray($k(n),-8),e||new Gr(Nte(n)))}var sP=function(){function n(e,t){this.c=Uk(),this.v=1,uu.call(this,e,t)}return n.prototype.push=function(e,t){uu.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var r=T0(e,this.o,this.v&&2,t&&4,!t);this.v&&(Wk(r,this.o),this.v=0),t&&oi(r,r.length-4,this.c.d()),this.ondata(r,t)},n}(),TXe=function(){function n(e,t){fy([uy,kte,function(){return[Hl,uu,sP]}],this,qk.call(this,e,t),function(r){var i=new sP(r.data);onmessage=Hl(i)},10)}return n}();function AXe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return dy(n,e,[uy,kte,function(){return[aP]}],function(r){return Sh(aP(r.data[0],r.data[1]))},4,t)}function aP(n,e){e||(e={});var t=Uk();t.p(n);var r=T0(n,e,2,4);return Wk(r,e),oi(r,r.length-4,t.d()),r}var _M=function(){function n(e){this.v=1,So.call(this,e)}return n.prototype.push=function(e,t){if(So.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}So.prototype.c.call(this,t)},n}(),Vte=function(){function n(e){this.ondata=e,fy([cy,Ote,function(){return[Hl,So,_M]}],this,0,function(){var t=new _M;onmessage=Hl(t)},11)}return n}();function $te(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return dy(n,e,[cy,Ote,function(){return[x_]}],function(r){return Sh(x_(r.data[0],Hk(r.data[1])))},5,t)}function x_(n,e){return dS((Bte(n),n.subarray(2,-4)),e)}var Gte=function(){function n(e){this.G=yM,this.I=So,this.Z=_M,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new Gr(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var i=this,s=function(){i.ondata.apply(i,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),EXe=function(){function n(e){this.G=Ute,this.I=Kk,this.Z=Vte,this.ondata=e}return n.prototype.push=function(e,t){Gte.prototype.push.call(this,e,t)},n}();function IXe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?Hte(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Yk(n,e,t):$te(n,e,t)}function RXe(n,e){return n[0]==31&&n[1]==139&&n[2]==8?bM(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?hy(n,e):x_(n,e)}var Xk=function(n,e,t,r){for(var i in n){var s=n[i],a=e+i;s instanceof Gr?t[a]=[s,r]:Array.isArray(s)?t[a]=[s[0],fS(r,s[1])]:Xk(s,a+"/",t,r)}},SV=typeof TextEncoder<"u"&&new TextEncoder,oP=typeof TextDecoder<"u"&&new TextDecoder,Wte=0;try{oP.decode(sd,{stream:!0}),Wte=1}catch{}var qte=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return[e,kl(n,t-1)];i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}},PXe=function(){function n(e){this.ondata=e,Wte?this.t=new TextDecoder:this.p=sd}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new Gr(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var i=qte(r),s=i[0],a=i[1];if(t){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(s,t)},n}(),DXe=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(mh(e),this.d=t||!1)},n}();function mh(n,e){if(e){for(var t=new Gr(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);return t}if(SV)return SV.encode(n);for(var i=n.length,s=new Gr(n.length+(n.length>>1)),a=0,o=function(u){s[a++]=u},r=0;r<i;++r){if(a+5>s.length){var l=new Gr(a+8+(i-r<<1));l.set(s),s=l}var c=n.charCodeAt(r);c<128||e?o(c):c<2048?(o(192|c>>6),o(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|n.charCodeAt(++r)&1023,o(240|c>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|c&63)):(o(224|c>>12),o(128|c>>6&63),o(128|c&63))}return kl(s,0,a)}function jk(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(oP)return oP.decode(n);var i=qte(n),s=i[0],a=i[1];if(a.length)throw"invalid utf-8 data";return s}}var Kte=function(n){return n==1?3:n<6?2:n==9?1:0},Yte=function(n,e){return e+30+Va(n,e+26)+Va(n,e+28)},Xte=function(n,e,t){var r=Va(n,e+28),i=jk(n.subarray(e+46,e+46+r),!(Va(n,e+8)&2048)),s=e+46+r,a=ps(n,e+20),o=t&&a==4294967295?jte(n,s):[a,ps(n,e+24),ps(n,e+42)],l=o[0],c=o[1],u=o[2];return[Va(n,e+10),l,c,i,s+Va(n,e+30)+Va(n,e+32),u]},jte=function(n,e){for(;Va(n,e)!=1;e+=4+Va(n,e+2));return[M4(n,e+12),M4(n,e+4),M4(n,e+20)]},Kf=function(n){var e=0;if(n)for(var t in n){var r=n[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},Sg=function(n,e,t,r,i,s,a,o){var l=r.length,c=t.extra,u=o&&o.length,d=Kf(c);oi(n,e,a!=null?33639248:67324752),e+=4,a!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=i&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var h=new Date(t.mtime==null?Date.now():t.mtime),f=h.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(oi(n,e,f<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),e+=4,s!=null&&(oi(n,e,t.crc),oi(n,e+4,s),oi(n,e+8,t.size)),oi(n,e+12,l),oi(n,e+14,d),e+=16,a!=null&&(oi(n,e,u),oi(n,e+6,t.attrs),oi(n,e+10,a),e+=14),n.set(r,e),e+=l,d)for(var p in c){var m=c[p],v=m.length;oi(n,e,+p),oi(n,e+2,v),n.set(m,e+4),e+=4+v}return u&&(n.set(o,e),e+=u),e},Zk=function(n,e,t,r,i){oi(n,e,101010256),oi(n,e+8,t),oi(n,e+10,t),oi(n,e+12,r),oi(n,e+16,i)},w_=function(){function n(e){this.filename=e,this.c=ly(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),LXe=function(){function n(e,t){var r=this;t||(t={}),w_.call(this,e),this.d=new uu(t,function(i,s){r.ondata(null,i,s)}),this.compression=8,this.flag=Kte(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},n.prototype.push=function(e,t){w_.prototype.push.call(this,e,t)},n}(),kXe=function(){function n(e,t){var r=this;t||(t={}),w_.call(this,e),this.d=new Fte(t,function(i,s,a){r.ondata(i,s,a)}),this.compression=8,this.flag=Kte(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){w_.prototype.push.call(this,e,t)},n}(),OXe=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=mh(e.filename),i=r.length,s=e.comment,a=s&&mh(s),o=i!=e.filename.length||a&&s.length!=a.length,l=i+Kf(e.extra)+30;if(i>65535)throw"filename too long";var c=new Gr(l);Sg(c,0,e,r,o);var u=[c],d=function(){for(var v=0,g=u;v<g.length;v++){var _=g[v];t.ondata(null,_,!1)}u=[]},h=this.d;this.d=0;var f=this.u.length,p=fS(e,{f:r,u:o,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),h){var v=t.u[f+1];v?v.r():t.d=1}h=1}}),m=0;e.ondata=function(v,g,_){if(v)t.ondata(v,g,_),t.terminate();else if(m+=g.length,u.push(g),_){var b=new Gr(16);oi(b,0,134695760),oi(b,4,e.crc),oi(b,8,m),oi(b,12,e.size),u.push(b),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,h&&p.r(),h=1}else h&&d()},this.u.push(p)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,r=0,i=0,s=this.u;i<s.length;i++){var a=s[i];r+=46+a.f.length+Kf(a.extra)+(a.o?a.o.length:0)}for(var o=new Gr(r+22),l=0,c=this.u;l<c.length;l++){var a=c[l];Sg(o,e,a,a.f,a.u,a.c,t,a.o),e+=46+a.f.length+Kf(a.extra)+(a.o?a.o.length:0),t+=a.b}Zk(o,e,this.u.length,r,t),this.ondata(null,o,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},n}();function NXe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};Xk(n,"",r,e);var i=Object.keys(r),s=i.length,a=0,o=0,l=s,c=new Array(s),u=[],d=function(){for(var m=0;m<u.length;++m)u[m]()},h=function(){var m=new Gr(o+22),v=a,g=o-a;o=0;for(var _=0;_<l;++_){var b=c[_];try{var S=b.c.length;Sg(m,o,b,b.f,b.u,S);var x=30+b.f.length+Kf(b.extra),w=o+x;m.set(b.c,w),Sg(m,a,b,b.f,b.u,S,o,b.m),a+=16+x+(b.m?b.m.length:0),o=w+S}catch(M){return t(M,null)}}Zk(m,a,c.length,g,v),t(null,m)};s||h();for(var f=function(m){var v=i[m],g=r[v],_=g[0],b=g[1],S=ly(),x=_.length;S.p(_);var w=mh(v),M=w.length,C=b.comment,A=C&&mh(C),T=A&&A.length,I=Kf(b.extra),D=b.level==0?0:8,B=function(O,H){if(O)d(),t(O,null);else{var L=H.length;c[m]=fS(b,{size:x,crc:S.d(),c:H,f:w,m:A,u:M!=v.length||A&&C.length!=T,compression:D}),a+=30+M+I+L,o+=76+2*(M+I)+(T||0)+L,--s||h()}};if(M>65535&&B("filename too long",null),!D)B(null,_);else if(x<16e4)try{B(null,hS(_,b))}catch(O){B(O,null)}else u.push(zte(_,b,B))},p=0;p<l;++p)f(p);return d}function BXe(n,e){e||(e={});var t={},r=[];Xk(n,"",t,e);var i=0,s=0;for(var a in t){var o=t[a],l=o[0],c=o[1],u=c.level==0?0:8,d=mh(a),h=d.length,f=c.comment,p=f&&mh(f),m=p&&p.length,v=Kf(c.extra);if(h>65535)throw"filename too long";var g=u?hS(l,c):l,_=g.length,b=ly();b.p(l),r.push(fS(c,{size:l.length,crc:b.d(),c:g,f:d,m:p,u:h!=a.length||p&&f.length!=m,o:i,compression:u})),i+=30+h+v+_,s+=76+2*(h+v)+(m||0)+_}for(var S=new Gr(s+22),x=i,w=s-i,M=0;M<r.length;++M){var d=r[M];Sg(S,d.o,d,d.f,d.u,d.c.length);var C=30+d.f.length+Kf(d.extra);S.set(d.c,d.o+C),Sg(S,i,d,d.f,d.u,d.c.length,d.o,d.m),i+=16+C+(d.m?d.m.length:0)}return Zk(S,i,r.length,w,x),S}var Zte=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),FXe=function(){function n(){var e=this;this.i=new So(function(t,r){e.ondata(null,t,r)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},n.compression=8,n}(),zXe=function(){function n(e,t){var r=this;t<32e4?this.i=new So(function(i,s){r.ondata(null,i,s)}):(this.i=new Kk(function(i,s,a){r.ondata(i,s,a)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=kl(e,0)),this.i.push(e,t)},n.compression=8,n}(),UXe=function(){function n(e){this.onfile=e,this.k=[],this.o={0:Zte},this.p=sd}return n.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var i=Math.min(this.c,e.length),s=e.subarray(0,i);if(this.c-=i,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(i),e.length)return this.push(e,t)}else{var a=0,o=0,l=void 0,c=void 0;this.p.length?e.length?(c=new Gr(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var u=c.length,d=this.c,h=d&&this.d,f=function(){var g,_=ps(c,o);if(_==67324752){a=1,l=o,p.d=null,p.c=0;var b=Va(c,o+6),S=Va(c,o+8),x=b&2048,w=b&8,M=Va(c,o+26),C=Va(c,o+28);if(u>o+30+M+C){var A=[];p.k.unshift(A),a=2;var T=ps(c,o+18),I=ps(c,o+22),D=jk(c.subarray(o+30,o+=30+M),!x);T==4294967295?(g=w?[-2]:jte(c,o),T=g[0],I=g[1]):w&&(T=-1),o+=C,p.c=T;var B,O={name:D,compression:S,start:function(){if(!O.ondata)throw"no callback";if(!T)O.ondata(null,sd,!0);else{var H=r.o[S];if(!H)throw"unknown compression type "+S;B=T<0?new H(D):new H(D,T,I),B.ondata=function(F,W,q){O.ondata(F,W,q)};for(var L=0,z=A;L<z.length;L++){var k=z[L];B.push(k,!1)}r.k[0]==A&&r.c?r.d=B:B.push(sd,!0)}},terminate:function(){B&&B.terminate&&B.terminate()}};T>=0&&(O.size=T,O.originalSize=I),p.onfile(O)}return"break"}else if(d){if(_==134695760)return l=o+=12+(d==-2&&8),a=3,p.c=0,"break";if(_==33639248)return l=o-=4,a=3,p.c=0,"break"}},p=this;o<u-4;++o){var m=f();if(m==="break")break}if(this.p=sd,d<0){var v=a?c.subarray(0,l-12-(d==-2&&8)-(ps(c,l-16)==134695760&&4)):c.subarray(0,o);h?h.push(v,!!a):this.k[+(a==2)].push(v)}if(a&2)return this.push(c.subarray(o),t);this.p=c.subarray(o)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function HXe(n,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var h=0;h<t.length;++h)t[h]()},i={},s=n.length-22;ps(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var a=Va(n,s+8);a||e(null,{});var o=a,l=ps(n,s+16),c=l==4294967295;if(c){if(s=ps(n,s-12),ps(n,s)!=101075792){e("invalid zip file",null);return}o=a=ps(n,s+32),l=ps(n,s+48)}for(var u=function(h){var f=Xte(n,l,c),p=f[0],m=f[1],v=f[2],g=f[3],_=f[4],b=f[5],S=Yte(n,b);l=_;var x=function(M,C){M?(r(),e(M,null)):(i[g]=C,--a||e(null,i))};if(!p)x(null,kl(n,S,S+m));else if(p==8){var w=n.subarray(S,S+m);if(m<32e4)try{x(null,hy(w,new Gr(v)))}catch(M){x(M,null)}else t.push(Yk(w,{size:v},x))}else x("unknown compression type "+p,null)},d=0;d<o;++d)u();return r}function VXe(n){for(var e={},t=n.length-22;ps(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var r=Va(n,t+8);if(!r)return{};var i=ps(n,t+16),s=i==4294967295;if(s){if(t=ps(n,t-12),ps(n,t)!=101075792)throw"invalid zip file";r=ps(n,t+32),i=ps(n,t+48)}for(var a=0;a<r;++a){var o=Xte(n,i,s),l=o[0],c=o[1],u=o[2],d=o[3],h=o[4],f=o[5],p=Yte(n,f);if(i=h,!l)e[d]=kl(n,p,p+c);else if(l==8)e[d]=hy(n.subarray(p,p+c),new Gr(u));else throw"unknown compression type "+l}return e}var $Xe=Object.freeze(Object.defineProperty({__proto__:null,Deflate:uu,AsyncDeflate:Fte,deflate:zte,deflateSync:hS,Inflate:So,AsyncInflate:Kk,inflate:Yk,inflateSync:hy,Gzip:vM,AsyncGzip:bV,gzip:_V,gzipSync:gM,Gunzip:yM,AsyncGunzip:Ute,gunzip:Hte,gunzipSync:bM,Zlib:sP,AsyncZlib:TXe,zlib:AXe,zlibSync:aP,Unzlib:_M,AsyncUnzlib:Vte,unzlib:$te,unzlibSync:x_,compress:_V,AsyncCompress:bV,compressSync:gM,Compress:vM,Decompress:Gte,AsyncDecompress:EXe,decompress:IXe,decompressSync:RXe,DecodeUTF8:PXe,EncodeUTF8:DXe,strToU8:mh,strFromU8:jk,ZipPassThrough:w_,ZipDeflate:LXe,AsyncZipDeflate:kXe,Zip:OXe,zip:NXe,zipSync:BXe,UnzipPassThrough:Zte,UnzipInflate:FXe,AsyncUnzipInflate:zXe,Unzip:UXe,unzip:HXe,unzipSync:VXe},Symbol.toStringTag,{value:"Module"}));function Qte(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,a=Math.floor((i+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:i=a,a=Math.floor((i+s)/2);return a}function GXe(n,e,t,r){const i=[],s=[],a=[];i[0]=1;for(let o=1;o<=t;++o){s[o]=e-r[n+1-o],a[o]=r[n+o]-e;let l=0;for(let c=0;c<o;++c){const u=a[c+1],d=s[o-c],h=i[c]/(u+d);i[c]=l+u*h,l=d*h}i[o]=l}return i}function WXe(n,e,t,r){const i=Qte(n,r,e),s=GXe(i,r,n,e),a=new ni(0,0,0,0);for(let o=0;o<=n;++o){const l=t[i-n+o],c=s[o],u=l.w*c;a.x+=l.x*u,a.y+=l.y*u,a.z+=l.z*u,a.w+=l.w*c}return a}function qXe(n,e,t,r,i){const s=[];for(let d=0;d<=t;++d)s[d]=0;const a=[];for(let d=0;d<=r;++d)a[d]=s.slice(0);const o=[];for(let d=0;d<=t;++d)o[d]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-i[n+1-d],c[d]=i[n+d]-e;let h=0;for(let f=0;f<d;++f){const p=c[f+1],m=l[d-f];o[d][f]=p+m;const v=o[f][d-1]/o[d][f];o[f][d]=h+p*v,h=m*v}o[d][d]=h}for(let d=0;d<=t;++d)a[0][d]=o[d][t];for(let d=0;d<=t;++d){let h=0,f=1;const p=[];for(let m=0;m<=t;++m)p[m]=s.slice(0);p[0][0]=1;for(let m=1;m<=r;++m){let v=0;const g=d-m,_=t-m;d>=m&&(p[f][0]=p[h][0]/o[_+1][g],v=p[f][0]*o[g][_]);const b=g>=-1?1:-g,S=d-1<=_?m-1:t-d;for(let w=b;w<=S;++w)p[f][w]=(p[h][w]-p[h][w-1])/o[_+1][g+w],v+=p[f][w]*o[g+w][_];d<=_&&(p[f][m]=-p[h][m-1]/o[_+1][d],v+=p[f][m]*o[d][_]),a[m][d]=v;const x=h;h=f,f=x}}let u=t;for(let d=1;d<=r;++d){for(let h=0;h<=t;++h)a[d][h]*=u;u*=t-d}return a}function KXe(n,e,t,r,i){const s=i<n?i:n,a=[],o=Qte(n,r,e),l=qXe(o,r,n,s,e),c=[];for(let u=0;u<t.length;++u){const d=t[u].clone(),h=d.w;d.x*=h,d.y*=h,d.z*=h,c[u]=d}for(let u=0;u<=s;++u){const d=c[o-n].clone().multiplyScalar(l[u][0]);for(let h=1;h<=n;++h)d.add(c[o-n+h].clone().multiplyScalar(l[u][h]));a[u]=d}for(let u=s+1;u<=i+1;++u)a[u]=new ni(0,0,0);return a}function YXe(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function XXe(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const a=n[s];t[s]=new Qe(a.x,a.y,a.z),r[s]=a.w}const i=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let o=1;o<=s;++o)a.sub(i[s-o].clone().multiplyScalar(YXe(s,o)*r[o]));i[s]=a.divideScalar(r[0])}return i}function jXe(n,e,t,r,i){const s=KXe(n,e,t,r,i);return XXe(s)}class xV extends Mc{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<r.length;++a){const o=r[a];this.controlPoints[a]=new ni(o.x,o.y,o.z,o.w)}}getPoint(e,t=new Qe){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=WXe(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new Qe){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=jXe(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let Fr,cs,io;class ZXe extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=s.path===""?Aa.extractUrlBase(e):s.path,o=new Ea(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,t){if(rje(e))Fr=new nje().parse(e);else{const i=nne(e);if(!ije(i))throw new Error("THREE.FBXLoader: Unknown format.");if(CV(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+CV(i));Fr=new tje().parse(i)}const r=new bg(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new QXe(r,this.manager).parse(Fr)}}class QXe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){cs=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new JXe().parse(i);return this.parseScene(i,s,r),io}parseConnections(){const e=new Map;return"Connections"in Fr&&Fr.Connections.connections.forEach(function(r){const i=r[0],s=r[1],a=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:s,relationship:a};e.get(i).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:a};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Fr.Objects){const r=Fr.Objects.Video;for(const i in r){const s=r[i],a=parseInt(i);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const c=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=c}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Fr.Objects){const r=Fr.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,a=i!==void 0?i.value:0,o=s!==void 0?s.value:0;if(r.wrapS=a===0?po:Ps,r.wrapT=o===0?po:Ps,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=cs.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const o=e.FileName.slice(-3).toLowerCase();if(o==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new sa):(l.setPath(this.textureLoader.path),a=l.load(r))}else o==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new sa):a=this.textureLoader.load(r);return this.textureLoader.setPath(i),a}parseMaterials(e){const t=new Map;if("Material"in Fr.Objects){const r=Fr.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!cs.has(r))return null;const a=this.parseParameters(e,t,r);let o;switch(s.toLowerCase()){case"phong":o=new hd;break;case"lambert":o=new kk;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new hd;break}return o.setValues(a),o.name=i,o}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new wn().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new wn().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new wn().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new wn().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new wn().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new wn().fromArray(e.SpecularColor.value));const s=this;return cs.get(r).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":i.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,a.ID),i.map!==void 0&&(i.map.encoding=Rr);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,a.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=Rr);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,a.ID),i.envMap!==void 0&&(i.envMap.mapping=l_,i.envMap.encoding=Rr);break;case"SpecularColor":i.specularMap=s.getTexture(t,a.ID),i.specularMap!==void 0&&(i.specularMap.encoding=Rr);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,a.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),i}getTexture(e,t){return"LayeredTexture"in Fr.Objects&&t in Fr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=cs.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Fr.Objects){const r=Fr.Objects.Deformer;for(const i in r){const s=r[i],a=cs.get(parseInt(i));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,r);o.ID=i,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[i]=o}else if(s.attrType==="BlendShape"){const o={id:i};o.rawTargets=this.parseMorphTargets(a,r),o.id=i,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const a={ID:i.ID,indices:[],weights:[],transformLink:new Wn().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),r.push(a)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],a=t[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=cs.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(o)}return r}parseScene(e,t,r){io=new mo;const i=this.parseModels(e.skeletons,t,r),s=Fr.Objects.Model,a=this;i.forEach(function(l){const c=s[l.ID];a.setLookAtProperties(l,c),cs.get(l.ID).parents.forEach(function(d){const h=i.get(d.ID);h!==void 0&&h.add(l)}),l.parent===null&&io.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),io.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=ene(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const o=new eje().parse();io.children.length===1&&io.children[0].isGroup&&(io.children[0].animations=o,io=io.children[0]),io.animations=o}parseModels(e,t,r){const i=new Map,s=Fr.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],c=cs.get(o);let u=this.buildSkeleton(c,e,o,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,r);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new vg;break;case"Null":default:u=new mo;break}u.name=l.attrName?Yr.sanitizeNodeName(l.attrName):"",u.ID=o}this.getTransformData(u,l),i.set(o,u)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(a){for(const o in t){const l=t[o];l.rawBones.forEach(function(c,u){if(c.ID===a.ID){const d=s;s=new vg,s.matrixWorld.copy(c.transformLink),s.name=i?Yr.sanitizeNodeName(i):"",s.ID=r,l.bones[u]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=Fr.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new $i;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let a=1e3;r.FarPlane!==void 0&&(a=r.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(o=r.AspectWidth.value,l=r.AspectHeight.value);const c=o/l;let u=45;r.FieldOfView!==void 0&&(u=r.FieldOfView.value);const d=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Es(u,c,s,a),d!==null&&t.setFocalLength(d);break;case 1:t=new Jg(-o/2,o/2,l/2,-l/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new $i;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=Fr.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new $i;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new wn().fromArray(r.Color.value));let a=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(a=0);let o=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?o=0:o=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new f0(s,a,o,l);break;case 1:t=new cS(s,a);break;case 2:let c=Math.PI/3;r.InnerAngle!==void 0&&(c=xa.degToRad(r.InnerAngle.value));let u=0;r.OuterAngle!==void 0&&(u=xa.degToRad(r.OuterAngle.value),u=Math.max(u,1)),t=new WT(s,a,o,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new f0(s,a);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,a=null;const o=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&o.push(r.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new hd({color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new $T(s,a),i.normalizeSkinWeights()):i=new Ds(s,a),i}createCurve(e,t){const r=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),i=new fc({color:3342591,linewidth:1});return new ny(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=tne(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&cs.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=Fr.Objects.Model[i.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),io.add(e.target)):e.lookAt(new Qe().fromArray(a))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const a=e[s];cs.get(parseInt(a.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;cs.get(c).parents.forEach(function(d){r.has(d.ID)&&r.get(d.ID).bind(new ty(a.bones),i[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Fr.Objects){const t=Fr.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Wn().fromArray(s.Matrix.a)}):e[i.Node]=new Wn().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Fr&&"AmbientColor"in Fr.GlobalSettings){const e=Fr.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new wn(t,r,i);io.add(new qT(s,1))}}}}class JXe{parse(e){const t=new Map;if("Geometry"in Fr.Objects){const r=Fr.Objects.Geometry;for(const i in r){const s=cs.get(parseInt(i)),a=this.parseGeometry(s,r[i],e);t.set(parseInt(i),a)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],a=e.parents.map(function(d){return Fr.Objects.Model[d.ID]});if(a.length===0)return;const o=e.children.reduce(function(d,h){return i[h.ID]!==void 0&&(d=i[h.ID]),d},null);e.children.forEach(function(d){r.morphTargets[d.ID]!==void 0&&s.push(r.morphTargets[d.ID])});const l=a[0],c={};"RotationOrder"in l&&(c.eulerOrder=tne(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=ene(c);return this.genGeometry(t,o,s,u)}genGeometry(e,t,r,i){const s=new Vr;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new Pn(o.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new Pn(o.colors,3)),t&&(s.setAttribute("skinIndex",new _k(o.weightsIndices,4)),s.setAttribute("skinWeight",new Pn(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const c=new El().getNormalMatrix(i),u=new Pn(o.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(o.uvs.forEach(function(c,u){let d="uv"+(u+1).toString();u===0&&(d="uv"),s.setAttribute(d,new Pn(o.uvs[u],2))}),a.material&&a.material.mappingType!=="AllSame"){let c=o.materialIndex[0],u=0;if(o.materialIndex.forEach(function(d,h){d!==c&&(s.addGroup(u,h-u,c),c=d,u=h)}),s.groups.length>0){const d=s.groups[s.groups.length-1],h=d.start+d.count;h!==o.materialIndex.length&&s.addGroup(h,o.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(a,o){r.weightTable[a]===void 0&&(r.weightTable[a]=[]),r.weightTable[a].push({id:s,weight:i.weights[o]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,a=[],o=[],l=[],c=[],u=[],d=[];const h=this;return e.vertexIndices.forEach(function(f,p){let m,v=!1;f<0&&(f=f^-1,v=!0);let g=[],_=[];if(a.push(f*3,f*3+1,f*3+2),e.color){const b=mw(p,r,f,e.color);l.push(b[0],b[1],b[2])}if(e.skeleton){if(e.weightTable[f]!==void 0&&e.weightTable[f].forEach(function(b){_.push(b.weight),g.push(b.id)}),_.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const b=[0,0,0,0],S=[0,0,0,0];_.forEach(function(x,w){let M=x,C=g[w];S.forEach(function(A,T,I){if(M>A){I[T]=M,M=A;const D=b[T];b[T]=C,C=D}})}),g=b,_=S}for(;_.length<4;)_.push(0),g.push(0);for(let b=0;b<4;++b)u.push(_[b]),d.push(g[b])}if(e.normal){const b=mw(p,r,f,e.normal);o.push(b[0],b[1],b[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=mw(p,r,f,e.material)[0]),e.uv&&e.uv.forEach(function(b,S){const x=mw(p,r,f,b);c[S]===void 0&&(c[S]=[]),c[S].push(x[0]),c[S].push(x[1])}),i++,v&&(h.genFace(t,e,a,m,o,l,c,u,d,i),r++,i=0,a=[],o=[],l=[],c=[],u=[],d=[])}),t}genFace(e,t,r,i,s,a,o,l,c,u){for(let d=2;d<u;d++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(d-1)*3]]),e.vertex.push(t.vertexPositions[r[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[r[d*3]]),e.vertex.push(t.vertexPositions[r[d*3+1]]),e.vertex.push(t.vertexPositions[r[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(d-1)*3]),e.colors.push(a[(d-1)*3+1]),e.colors.push(a[(d-1)*3+2]),e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(h,f){e.uvs[f]===void 0&&(e.uvs[f]=[]),e.uvs[f].push(o[f][0]),e.uvs[f].push(o[f][1]),e.uvs[f].push(o[f][(d-1)*2]),e.uvs[f].push(o[f][(d-1)*2+1]),e.uvs[f].push(o[f][d*2]),e.uvs[f].push(o[f][d*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(a){a.rawTargets.forEach(function(o){const l=Fr.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,o.name)})})}genMorphGeometry(e,t,r,i,s){const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],o=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let p=0;p<l.length;p++){const m=l[p]*3;u[m]=o[p*3],u[m+1]=o[p*3+1],u[m+2]=o[p*3+2]}const d={vertexIndices:a,vertexPositions:u},h=this.genBuffers(d),f=new Pn(h.vertex,3);f.name=s||r.attrName,f.applyMatrix4(i),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let a=0;a<i.length;++a)s.push(a);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(xV===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Vr;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Vr;const r=t-1,i=e.KnotVector.a,s=[],a=e.Points.a;for(let d=0,h=a.length;d<h;d+=4)s.push(new ni().fromArray(a,d));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=r,l=i.length-1-o;for(let d=0;d<r;++d)s.push(s[d])}const u=new xV(r,i,s,o,l).getPoints(s.length*12);return new Vr().setFromPoints(u)}}class eje{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(Fr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Fr.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Fr.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(sje),values:t[r].KeyValueFloat.a},s=cs.get(i.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=i:o.match(/Y/)?e.get(a).curves.y=i:o.match(/Z/)?e.get(a).curves.z=i:o.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=i)}}}parseAnimationLayers(e){const t=Fr.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],a=cs.get(parseInt(i));a!==void 0&&(a.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const d=cs.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(d!==void 0){const h=Fr.Objects.Model[d.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const f={modelName:h.attrName?Yr.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};io.traverse(function(p){p.ID===h.id&&(f.transform=p.matrix,p.userData.transformData&&(f.eulerOrder=p.userData.transformData.eulerOrder))}),f.transform||(f.transform=new Wn),"PreRotation"in h&&(f.preRotation=h.PreRotation.value),"PostRotation"in h&&(f.postRotation=h.PostRotation.value),s[c]=f}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const d=cs.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,h=cs.get(d).parents[0].ID,f=cs.get(h).parents[0].ID,p=cs.get(f).parents[0].ID,m=Fr.Objects.Model[p],v={modelName:m.attrName?Yr.sanitizeNodeName(m.attrName):"",morphName:Fr.Objects.Deformer[d].attrName};s[c]=v}s[c][u.attr]=u}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=Fr.Objects.AnimationStack,r={};for(const i in t){const s=cs.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:a}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new d0(e.name,-1,t)}generateTracks(e){const t=[];let r=new Qe,i=new na,s=new Qe;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new id().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,r);return new ph(e+"."+i,s,a)}generateRotationTrack(e,t,r,i,s,a){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(xa.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(xa.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(xa.degToRad));const o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,r);i!==void 0&&(i=i.map(xa.degToRad),i.push(a),i=new id().fromArray(i),i=new na().setFromEuler(i)),s!==void 0&&(s=s.map(xa.degToRad),s.push(a),s=new id().fromArray(s),s=new na().setFromEuler(s).invert());const c=new na,u=new id,d=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],a),c.setFromEuler(u),i!==void 0&&c.premultiply(i),s!==void 0&&c.multiply(s),c.toArray(d,h/3*4);return new Md(e+".quaternion",o,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=io.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new gg(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==i&&(t[r]=a,i=a,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(c){if(t.x&&(a=t.x.times.indexOf(c)),t.y&&(o=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),a!==-1){const u=t.x.values[a];s.push(u),i[0]=u}else s.push(i[0]);if(o!==-1){const u=t.y.values[o];s.push(u),i[1]=u}else s.push(i[1]);if(l!==-1){const u=t.z.values[l];s.push(u),i[2]=u}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const a=s/180,o=i/a;let l=r+o;const c=e.times[t-1],d=(e.times[t]-c)/a;let h=c+d;const f=[],p=[];for(;h<e.times[t];)f.push(h),h+=d,p.push(l),l+=o;e.times=MV(e.times,t,f),e.values=MV(e.values,t,p)}}}}class tje{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Jte,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const a=i.match(/^[\s\t]*;/),o=i.match(/^[\s\t]*$/);if(a||o)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):c?t.parseNodeProperty(i,c,r[++s]):u?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},a=this.parseNodeAttr(i),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in o?(r==="PoseNode"?o.PoseNode.push(s):o[r].id!==void 0&&(o[r]={},o[r][o[r].id]=o[r]),a.id!==""&&(o[r][a.id]=s)):typeof a.id=="number"?(o[r]={},o[r][a.id]=s):r!=="Properties70"&&(r==="PoseNode"?o[r]=[s]:o[r]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(h){return h.trim().replace(/^"/,"")}),i="connections",s=[c,u],oje(s,d),a[i]===void 0&&(a[i]=[])}i==="Node"&&(a.id=s),i in a&&Array.isArray(a[i])?a[i].push(s):i!=="a"?a[i]=s:a.a=s,this.setCurrentProp(a,i),i==="a"&&s.slice(-1)!==","&&(a.a=A4(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=A4(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],a=i[1],o=i[2],l=i[3];let c=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=A4(c);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class nje{parse(e){const t=new wV(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new Jte;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(i===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(o,r,h)}return r.propertyList=l,typeof c=="number"&&(r.id=c),u!==""&&(r.attrName=u),d!==""&&(r.attrType=d),o!==""&&(r.name=o),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,a){a!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const a=r.propertyList[2],o=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:a,flag:o,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}typeof $Xe>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const o=x_(new Uint8Array(e.getArrayBuffer(a))),l=new wV(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class wV{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),Aa.decodeText(new Uint8Array(t))}}class Jte{add(e,t){this[e]=t}}function rje(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===nne(n,0,e.length)}function ije(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function CV(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function sje(n){return n/46186158e3}const aje=[];function mw(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,a=s+r.dataSize;return lje(aje,r.buffer,s,a)}const T4=new id,Sm=new Qe;function ene(n){const e=new Wn,t=new Wn,r=new Wn,i=new Wn,s=new Wn,a=new Wn,o=new Wn,l=new Wn,c=new Wn,u=new Wn,d=new Wn,h=new Wn,f=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Sm.fromArray(n.translation)),n.preRotation){const T=n.preRotation.map(xa.degToRad);T.push(n.eulerOrder),t.makeRotationFromEuler(T4.fromArray(T))}if(n.rotation){const T=n.rotation.map(xa.degToRad);T.push(n.eulerOrder),r.makeRotationFromEuler(T4.fromArray(T))}if(n.postRotation){const T=n.postRotation.map(xa.degToRad);T.push(n.eulerOrder),i.makeRotationFromEuler(T4.fromArray(T)),i.invert()}n.scale&&s.scale(Sm.fromArray(n.scale)),n.scalingOffset&&o.setPosition(Sm.fromArray(n.scalingOffset)),n.scalingPivot&&a.setPosition(Sm.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Sm.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Sm.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const p=t.clone().multiply(r).multiply(i),m=new Wn;m.extractRotation(u);const v=new Wn;v.copyPosition(u);const g=v.clone().invert().multiply(u),_=m.clone().invert().multiply(g),b=s,S=new Wn;if(f===0)S.copy(m).multiply(p).multiply(_).multiply(b);else if(f===1)S.copy(m).multiply(_).multiply(p).multiply(b);else{const I=new Wn().scale(new Qe().setFromMatrixScale(d)).clone().invert(),D=_.clone().multiply(I);S.copy(m).multiply(p).multiply(D).multiply(b)}const x=c.clone().invert(),w=a.clone().invert();let M=e.clone().multiply(l).multiply(c).multiply(t).multiply(r).multiply(i).multiply(x).multiply(o).multiply(a).multiply(s).multiply(w);const C=new Wn().copyPosition(M),A=u.clone().multiply(C);return h.copyPosition(A),M=h.clone().multiply(S),M.premultiply(u.invert()),M}function tne(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function A4(n){return n.split(",").map(function(t){return parseFloat(t)})}function nne(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Aa.decodeText(new Uint8Array(n,e,t))}function oje(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function lje(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function MV(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class lP extends XYe{constructor(e){super(e)}parse(e){function t(L){switch(L.image_type){case h:case m:(L.colormap_length>256||L.colormap_size!==24||L.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case f:case p:case v:case g:L.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',L.image_type)}(L.width<=0||L.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),L.pixel_size!==8&&L.pixel_size!==16&&L.pixel_size!==24&&L.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',L.pixel_size)}function r(L,z,k,F,W){let q,Z;const se=k.pixel_size>>3,X=k.width*k.height*se;if(z&&(Z=W.subarray(F,F+=k.colormap_length*(k.colormap_size>>3))),L){q=new Uint8Array(X);let ie,ae,ce,we=0;const He=new Uint8Array(se);for(;we<X;)if(ie=W[F++],ae=(ie&127)+1,ie&128){for(ce=0;ce<se;++ce)He[ce]=W[F++];for(ce=0;ce<ae;++ce)q.set(He,we+ce*se);we+=se*ae}else{for(ae*=se,ce=0;ce<ae;++ce)q[we+ce]=W[F++];we+=ae}}else q=W.subarray(F,F+=z?k.width*k.height:X);return{pixel_data:q,palettes:Z}}function i(L,z,k,F,W,q,Z,se,X){const ie=X;let ae,ce=0,we,He;const Ge=T.width;for(He=z;He!==F;He+=k)for(we=W;we!==Z;we+=q,ce++)ae=se[ce],L[(we+Ge*He)*4+3]=255,L[(we+Ge*He)*4+2]=ie[ae*3+0],L[(we+Ge*He)*4+1]=ie[ae*3+1],L[(we+Ge*He)*4+0]=ie[ae*3+2];return L}function s(L,z,k,F,W,q,Z,se){let X,ie=0,ae,ce;const we=T.width;for(ce=z;ce!==F;ce+=k)for(ae=W;ae!==Z;ae+=q,ie+=2)X=se[ie+0]+(se[ie+1]<<8),L[(ae+we*ce)*4+0]=(X&31744)>>7,L[(ae+we*ce)*4+1]=(X&992)>>2,L[(ae+we*ce)*4+2]=(X&31)<<3,L[(ae+we*ce)*4+3]=X&32768?0:255;return L}function a(L,z,k,F,W,q,Z,se){let X=0,ie,ae;const ce=T.width;for(ae=z;ae!==F;ae+=k)for(ie=W;ie!==Z;ie+=q,X+=3)L[(ie+ce*ae)*4+3]=255,L[(ie+ce*ae)*4+2]=se[X+0],L[(ie+ce*ae)*4+1]=se[X+1],L[(ie+ce*ae)*4+0]=se[X+2];return L}function o(L,z,k,F,W,q,Z,se){let X=0,ie,ae;const ce=T.width;for(ae=z;ae!==F;ae+=k)for(ie=W;ie!==Z;ie+=q,X+=4)L[(ie+ce*ae)*4+2]=se[X+0],L[(ie+ce*ae)*4+1]=se[X+1],L[(ie+ce*ae)*4+0]=se[X+2],L[(ie+ce*ae)*4+3]=se[X+3];return L}function l(L,z,k,F,W,q,Z,se){let X,ie=0,ae,ce;const we=T.width;for(ce=z;ce!==F;ce+=k)for(ae=W;ae!==Z;ae+=q,ie++)X=se[ie],L[(ae+we*ce)*4+0]=X,L[(ae+we*ce)*4+1]=X,L[(ae+we*ce)*4+2]=X,L[(ae+we*ce)*4+3]=255;return L}function c(L,z,k,F,W,q,Z,se){let X=0,ie,ae;const ce=T.width;for(ae=z;ae!==F;ae+=k)for(ie=W;ie!==Z;ie+=q,X+=2)L[(ie+ce*ae)*4+0]=se[X+0],L[(ie+ce*ae)*4+1]=se[X+0],L[(ie+ce*ae)*4+2]=se[X+0],L[(ie+ce*ae)*4+3]=se[X+1];return L}function u(L,z,k,F,W){let q,Z,se,X,ie,ae;switch((T.flags&_)>>b){default:case w:q=0,se=1,ie=z,Z=0,X=1,ae=k;break;case S:q=0,se=1,ie=z,Z=k-1,X=-1,ae=-1;break;case M:q=z-1,se=-1,ie=-1,Z=0,X=1,ae=k;break;case x:q=z-1,se=-1,ie=-1,Z=k-1,X=-1,ae=-1;break}if(B)switch(T.pixel_size){case 8:l(L,Z,X,ae,q,se,ie,F);break;case 16:c(L,Z,X,ae,q,se,ie,F);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(T.pixel_size){case 8:i(L,Z,X,ae,q,se,ie,F,W);break;case 16:s(L,Z,X,ae,q,se,ie,F);break;case 24:a(L,Z,X,ae,q,se,ie,F);break;case 32:o(L,Z,X,ae,q,se,ie,F);break;default:console.error("THREE.TGALoader: Format not supported.");break}return L}const d=0,h=1,f=2,p=3,m=9,v=10,g=11,_=48,b=4,S=0,x=1,w=2,M=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let C=0;const A=new Uint8Array(e),T={id_length:A[C++],colormap_type:A[C++],image_type:A[C++],colormap_index:A[C++]|A[C++]<<8,colormap_length:A[C++]|A[C++]<<8,colormap_size:A[C++],origin:[A[C++]|A[C++]<<8,A[C++]|A[C++]<<8],width:A[C++]|A[C++]<<8,height:A[C++]|A[C++]<<8,pixel_size:A[C++],flags:A[C++]};t(T),T.id_length+C>e.length&&console.error("THREE.TGALoader: No data."),C+=T.id_length;let I=!1,D=!1,B=!1;switch(T.image_type){case m:I=!0,D=!0;break;case h:D=!0;break;case v:I=!0;break;case f:break;case g:I=!0,B=!0;break;case p:B=!0;break}const O=new Uint8Array(T.width*T.height*4),H=r(I,D,T,C,A);return u(O,T.width,T.height,H.pixel_data,H.palettes),{data:O,width:T.width,height:T.height,flipY:!0,generateMipmaps:!0,minFilter:zd}}}class cje extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=s.path===""?Aa.extractUrlBase(e):s.path,o=new Ea(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,t){function r(Ce,Se){const Ue=[],De=Ce.childNodes;for(let $e=0,Pt=De.length;$e<Pt;$e++){const Ft=De[$e];Ft.nodeName===Se&&Ue.push(Ft)}return Ue}function i(Ce){if(Ce.length===0)return[];const Se=Ce.trim().split(/\s+/),Ue=new Array(Se.length);for(let De=0,$e=Se.length;De<$e;De++)Ue[De]=Se[De];return Ue}function s(Ce){if(Ce.length===0)return[];const Se=Ce.trim().split(/\s+/),Ue=new Array(Se.length);for(let De=0,$e=Se.length;De<$e;De++)Ue[De]=parseFloat(Se[De]);return Ue}function a(Ce){if(Ce.length===0)return[];const Se=Ce.trim().split(/\s+/),Ue=new Array(Se.length);for(let De=0,$e=Se.length;De<$e;De++)Ue[De]=parseInt(Se[De]);return Ue}function o(Ce){return Ce.substring(1)}function l(){return"three_default_"+QT++}function c(Ce){return Object.keys(Ce).length===0}function u(Ce){return{unit:d(r(Ce,"unit")[0]),upAxis:h(r(Ce,"up_axis")[0])}}function d(Ce){return Ce!==void 0&&Ce.hasAttribute("meter")===!0?parseFloat(Ce.getAttribute("meter")):1}function h(Ce){return Ce!==void 0?Ce.textContent:"Y_UP"}function f(Ce,Se,Ue,De){const $e=r(Ce,Se)[0];if($e!==void 0){const Pt=r($e,Ue);for(let Ft=0;Ft<Pt.length;Ft++)De(Pt[Ft])}}function p(Ce,Se){for(const Ue in Ce){const De=Ce[Ue];De.build=Se(Ce[Ue])}}function m(Ce,Se){return Ce.build!==void 0||(Ce.build=Se(Ce)),Ce.build}function v(Ce){const Se={sources:{},samplers:{},channels:{}};let Ue=!1;for(let De=0,$e=Ce.childNodes.length;De<$e;De++){const Pt=Ce.childNodes[De];if(Pt.nodeType!==1)continue;let Ft;switch(Pt.nodeName){case"source":Ft=Pt.getAttribute("id"),Se.sources[Ft]=et(Pt);break;case"sampler":Ft=Pt.getAttribute("id"),Se.samplers[Ft]=g(Pt);break;case"channel":Ft=Pt.getAttribute("target"),Se.channels[Ft]=_(Pt);break;case"animation":v(Pt),Ue=!0;break;default:console.log(Pt)}}Ue===!1&&(or.animations[Ce.getAttribute("id")||xa.generateUUID()]=Se)}function g(Ce){const Se={inputs:{}};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"input":const Pt=o($e.getAttribute("source")),Ft=$e.getAttribute("semantic");Se.inputs[Ft]=Pt;break}}return Se}function _(Ce){const Se={};let De=Ce.getAttribute("target").split("/");const $e=De.shift();let Pt=De.shift();const Ft=Pt.indexOf("(")!==-1,kn=Pt.indexOf(".")!==-1;if(kn)De=Pt.split("."),Pt=De.shift(),Se.member=De.shift();else if(Ft){const lt=Pt.split("(");Pt=lt.shift();for(let hn=0;hn<lt.length;hn++)lt[hn]=parseInt(lt[hn].replace(/\)/,""));Se.indices=lt}return Se.id=$e,Se.sid=Pt,Se.arraySyntax=Ft,Se.memberSyntax=kn,Se.sampler=o(Ce.getAttribute("source")),Se}function b(Ce){const Se=[],Ue=Ce.channels,De=Ce.samplers,$e=Ce.sources;for(const Pt in Ue)if(Ue.hasOwnProperty(Pt)){const Ft=Ue[Pt],kn=De[Ft.sampler],lt=kn.inputs.INPUT,hn=kn.inputs.OUTPUT,$n=$e[lt],rn=$e[hn],er=x(Ft,$n,rn);T(er,Se)}return Se}function S(Ce){return m(or.animations[Ce],b)}function x(Ce,Se,Ue){const De=or.nodes[Ce.id],$e=rr(De.id),Pt=De.transforms[Ce.sid],Ft=De.matrix.clone().transpose();let kn,lt,hn,$n,rn,er;const zn={};switch(Pt){case"matrix":for(hn=0,$n=Se.array.length;hn<$n;hn++)if(kn=Se.array[hn],lt=hn*Ue.stride,zn[kn]===void 0&&(zn[kn]={}),Ce.arraySyntax===!0){const vi=Ue.array[lt],sn=Ce.indices[0]+4*Ce.indices[1];zn[kn][sn]=vi}else for(rn=0,er=Ue.stride;rn<er;rn++)zn[kn][rn]=Ue.array[lt+rn];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Pt);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Pt);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Pt);break}const tr=w(zn,Ft);return{name:$e.uuid,keyframes:tr}}function w(Ce,Se){const Ue=[];for(const $e in Ce)Ue.push({time:parseFloat($e),value:Ce[$e]});Ue.sort(De);for(let $e=0;$e<16;$e++)I(Ue,$e,Se.elements[$e]);return Ue;function De($e,Pt){return $e.time-Pt.time}}const M=new Qe,C=new Qe,A=new na;function T(Ce,Se){const Ue=Ce.keyframes,De=Ce.name,$e=[],Pt=[],Ft=[],kn=[];for(let lt=0,hn=Ue.length;lt<hn;lt++){const $n=Ue[lt],rn=$n.time,er=$n.value;Mt.fromArray(er).transpose(),Mt.decompose(M,A,C),$e.push(rn),Pt.push(M.x,M.y,M.z),Ft.push(A.x,A.y,A.z,A.w),kn.push(C.x,C.y,C.z)}return Pt.length>0&&Se.push(new ph(De+".position",$e,Pt)),Ft.length>0&&Se.push(new Md(De+".quaternion",$e,Ft)),kn.length>0&&Se.push(new ph(De+".scale",$e,kn)),Se}function I(Ce,Se,Ue){let De,$e=!0,Pt,Ft;for(Pt=0,Ft=Ce.length;Pt<Ft;Pt++)De=Ce[Pt],De.value[Se]===void 0?De.value[Se]=null:$e=!1;if($e===!0)for(Pt=0,Ft=Ce.length;Pt<Ft;Pt++)De=Ce[Pt],De.value[Se]=Ue;else D(Ce,Se)}function D(Ce,Se){let Ue,De;for(let $e=0,Pt=Ce.length;$e<Pt;$e++){const Ft=Ce[$e];if(Ft.value[Se]===null){if(Ue=B(Ce,$e,Se),De=O(Ce,$e,Se),Ue===null){Ft.value[Se]=De.value[Se];continue}if(De===null){Ft.value[Se]=Ue.value[Se];continue}H(Ft,Ue,De,Se)}}}function B(Ce,Se,Ue){for(;Se>=0;){const De=Ce[Se];if(De.value[Ue]!==null)return De;Se--}return null}function O(Ce,Se,Ue){for(;Se<Ce.length;){const De=Ce[Se];if(De.value[Ue]!==null)return De;Se++}return null}function H(Ce,Se,Ue,De){if(Ue.time-Se.time===0){Ce.value[De]=Se.value[De];return}Ce.value[De]=(Ce.time-Se.time)*(Ue.value[De]-Se.value[De])/(Ue.time-Se.time)+Se.value[De]}function L(Ce){const Se={name:Ce.getAttribute("id")||"default",start:parseFloat(Ce.getAttribute("start")||0),end:parseFloat(Ce.getAttribute("end")||0),animations:[]};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"instance_animation":Se.animations.push(o($e.getAttribute("url")));break}}or.clips[Ce.getAttribute("id")]=Se}function z(Ce){const Se=[],Ue=Ce.name,De=Ce.end-Ce.start||-1,$e=Ce.animations;for(let Pt=0,Ft=$e.length;Pt<Ft;Pt++){const kn=S($e[Pt]);for(let lt=0,hn=kn.length;lt<hn;lt++)Se.push(kn[lt])}return new d0(Ue,De,Se)}function k(Ce){return m(or.clips[Ce],z)}function F(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"skin":Se.id=o($e.getAttribute("source")),Se.skin=W($e);break;case"morph":Se.id=o($e.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}or.controllers[Ce.getAttribute("id")]=Se}function W(Ce){const Se={sources:{}};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"bind_shape_matrix":Se.bindShapeMatrix=s($e.textContent);break;case"source":const Pt=$e.getAttribute("id");Se.sources[Pt]=et($e);break;case"joints":Se.joints=q($e);break;case"vertex_weights":Se.vertexWeights=Z($e);break}}return Se}function q(Ce){const Se={inputs:{}};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"input":const Pt=$e.getAttribute("semantic"),Ft=o($e.getAttribute("source"));Se.inputs[Pt]=Ft;break}}return Se}function Z(Ce){const Se={inputs:{}};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"input":const Pt=$e.getAttribute("semantic"),Ft=o($e.getAttribute("source")),kn=parseInt($e.getAttribute("offset"));Se.inputs[Pt]={id:Ft,offset:kn};break;case"vcount":Se.vcount=a($e.textContent);break;case"v":Se.v=a($e.textContent);break}}return Se}function se(Ce){const Se={id:Ce.id},Ue=or.geometries[Se.id];return Ce.skin!==void 0&&(Se.skin=X(Ce.skin),Ue.sources.skinIndices=Se.skin.indices,Ue.sources.skinWeights=Se.skin.weights),Se}function X(Ce){const Ue={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},De=Ce.sources,$e=Ce.vertexWeights,Pt=$e.vcount,Ft=$e.v,kn=$e.inputs.JOINT.offset,lt=$e.inputs.WEIGHT.offset,hn=Ce.sources[Ce.joints.inputs.JOINT],$n=Ce.sources[Ce.joints.inputs.INV_BIND_MATRIX],rn=De[$e.inputs.WEIGHT.id].array;let er=0,zn,tr,Xn;for(zn=0,Xn=Pt.length;zn<Xn;zn++){const sn=Pt[zn],Mr=[];for(tr=0;tr<sn;tr++){const Nr=Ft[er+kn],ri=Ft[er+lt],Ni=rn[ri];Mr.push({index:Nr,weight:Ni}),er+=2}for(Mr.sort(vi),tr=0;tr<4;tr++){const Nr=Mr[tr];Nr!==void 0?(Ue.indices.array.push(Nr.index),Ue.weights.array.push(Nr.weight)):(Ue.indices.array.push(0),Ue.weights.array.push(0))}}for(Ce.bindShapeMatrix?Ue.bindMatrix=new Wn().fromArray(Ce.bindShapeMatrix).transpose():Ue.bindMatrix=new Wn().identity(),zn=0,Xn=hn.array.length;zn<Xn;zn++){const sn=hn.array[zn],Mr=new Wn().fromArray($n.array,zn*$n.stride).transpose();Ue.joints.push({name:sn,boneInverse:Mr})}return Ue;function vi(sn,Mr){return Mr.weight-sn.weight}}function ie(Ce){return m(or.controllers[Ce],se)}function ae(Ce){const Se={init_from:r(Ce,"init_from")[0].textContent};or.images[Ce.getAttribute("id")]=Se}function ce(Ce){return Ce.build!==void 0?Ce.build:Ce.init_from}function we(Ce){const Se=or.images[Ce];return Se!==void 0?m(Se,ce):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",Ce),null)}function He(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"profile_COMMON":Se.profile=Ge($e);break}}or.effects[Ce.getAttribute("id")]=Se}function Ge(Ce){const Se={surfaces:{},samplers:{}};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"newparam":me($e,Se);break;case"technique":Se.technique=j($e);break;case"extra":Se.extra=st($e);break}}return Se}function me(Ce,Se){const Ue=Ce.getAttribute("sid");for(let De=0,$e=Ce.childNodes.length;De<$e;De++){const Pt=Ce.childNodes[De];if(Pt.nodeType===1)switch(Pt.nodeName){case"surface":Se.surfaces[Ue]=be(Pt);break;case"sampler2D":Se.samplers[Ue]=oe(Pt);break}}}function be(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"init_from":Se.init_from=$e.textContent;break}}return Se}function oe(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"source":Se.source=$e.textContent;break}}return Se}function j(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"constant":case"lambert":case"blinn":case"phong":Se.type=$e.nodeName,Se.parameters=ke($e);break;case"extra":Se.extra=st($e);break}}return Se}function ke(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":Se[$e.nodeName]=ze($e);break;case"transparent":Se[$e.nodeName]={opaque:$e.hasAttribute("opaque")?$e.getAttribute("opaque"):"A_ONE",data:ze($e)};break}}return Se}function ze(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"color":Se[$e.nodeName]=s($e.textContent);break;case"float":Se[$e.nodeName]=parseFloat($e.textContent);break;case"texture":Se[$e.nodeName]={id:$e.getAttribute("texture"),extra:Ve($e)};break}}return Se}function Ve(Ce){const Se={technique:{}};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"extra":Le($e,Se);break}}return Se}function Le(Ce,Se){for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"technique":Ze($e,Se);break}}}function Ze(Ce,Se){for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":Se.technique[$e.nodeName]=parseFloat($e.textContent);break;case"wrapU":case"wrapV":$e.textContent.toUpperCase()==="TRUE"?Se.technique[$e.nodeName]=1:$e.textContent.toUpperCase()==="FALSE"?Se.technique[$e.nodeName]=0:Se.technique[$e.nodeName]=parseInt($e.textContent);break;case"bump":Se[$e.nodeName]=V($e);break}}}function st(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"technique":Se.technique=fe($e);break}}return Se}function fe(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"double_sided":Se[$e.nodeName]=parseInt($e.textContent);break;case"bump":Se[$e.nodeName]=V($e);break}}return Se}function V(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"texture":Se[$e.nodeName]={id:$e.getAttribute("texture"),texcoord:$e.getAttribute("texcoord"),extra:Ve($e)};break}}return Se}function J(Ce){return Ce}function he(Ce){return m(or.effects[Ce],J)}function Oe(Ce){const Se={name:Ce.getAttribute("name")};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"instance_effect":Se.url=o($e.getAttribute("url"));break}}or.materials[Ce.getAttribute("id")]=Se}function je(Ce){let Se,Ue=Ce.slice((Ce.lastIndexOf(".")-1>>>0)+2);switch(Ue=Ue.toLowerCase(),Ue){case"tga":Se=os;break;default:Se=Ks}return Se}function dt(Ce){const Se=he(Ce.url),Ue=Se.profile.technique;let De;switch(Ue.type){case"phong":case"blinn":De=new hd;break;case"lambert":De=new kk;break;default:De=new oc;break}De.name=Ce.name||"";function $e(lt,hn=null){const $n=Se.profile.samplers[lt.id];let rn=null;if($n!==void 0){const er=Se.profile.surfaces[$n.source];rn=we(er.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),rn=we(lt.id);if(rn!==null){const er=je(rn);if(er!==void 0){const zn=er.load(rn),tr=lt.extra;if(tr!==void 0&&tr.technique!==void 0&&c(tr.technique)===!1){const Xn=tr.technique;zn.wrapS=Xn.wrapU?po:Ps,zn.wrapT=Xn.wrapV?po:Ps,zn.offset.set(Xn.offsetU||0,Xn.offsetV||0),zn.repeat.set(Xn.repeatU||1,Xn.repeatV||1)}else zn.wrapS=po,zn.wrapT=po;return hn!==null&&(zn.encoding=hn),zn}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",rn),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",lt.id),null}const Pt=Ue.parameters;for(const lt in Pt){const hn=Pt[lt];switch(lt){case"diffuse":hn.color&&De.color.fromArray(hn.color),hn.texture&&(De.map=$e(hn.texture,Rr));break;case"specular":hn.color&&De.specular&&De.specular.fromArray(hn.color),hn.texture&&(De.specularMap=$e(hn.texture));break;case"bump":hn.texture&&(De.normalMap=$e(hn.texture));break;case"ambient":hn.texture&&(De.lightMap=$e(hn.texture,Rr));break;case"shininess":hn.float&&De.shininess&&(De.shininess=hn.float);break;case"emission":hn.color&&De.emissive&&De.emissive.fromArray(hn.color),hn.texture&&(De.emissiveMap=$e(hn.texture,Rr));break}}De.color.convertSRGBToLinear(),De.specular&&De.specular.convertSRGBToLinear(),De.emissive&&De.emissive.convertSRGBToLinear();let Ft=Pt.transparent,kn=Pt.transparency;if(kn===void 0&&Ft&&(kn={float:1}),Ft===void 0&&kn&&(Ft={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Ft&&kn)if(Ft.data.texture)De.transparent=!0;else{const lt=Ft.data.color;switch(Ft.opaque){case"A_ONE":De.opacity=lt[3]*kn.float;break;case"RGB_ZERO":De.opacity=1-lt[0]*kn.float;break;case"A_ZERO":De.opacity=1-lt[3]*kn.float;break;case"RGB_ONE":De.opacity=lt[0]*kn.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Ft.opaque)}De.opacity<1&&(De.transparent=!0)}if(Ue.extra!==void 0&&Ue.extra.technique!==void 0){const lt=Ue.extra.technique;for(const hn in lt){const $n=lt[hn];switch(hn){case"double_sided":De.side=$n===1?uh:ch;break;case"bump":De.normalMap=$e($n.texture),De.normalScale=new qt(1,1);break}}}return De}function pt(Ce){return m(or.materials[Ce],dt)}function Te(Ce){const Se={name:Ce.getAttribute("name")};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"optics":Se.optics=ft($e);break}}or.cameras[Ce.getAttribute("id")]=Se}function ft(Ce){for(let Se=0;Se<Ce.childNodes.length;Se++){const Ue=Ce.childNodes[Se];switch(Ue.nodeName){case"technique_common":return Ke(Ue)}}return{}}function Ke(Ce){const Se={};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];switch(De.nodeName){case"perspective":case"orthographic":Se.technique=De.nodeName,Se.parameters=Q(De);break}}return Se}function Q(Ce){const Se={};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];switch(De.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":Se[De.nodeName]=parseFloat(De.textContent);break}}return Se}function _e(Ce){let Se;switch(Ce.optics.technique){case"perspective":Se=new Es(Ce.optics.parameters.yfov,Ce.optics.parameters.aspect_ratio,Ce.optics.parameters.znear,Ce.optics.parameters.zfar);break;case"orthographic":let Ue=Ce.optics.parameters.ymag,De=Ce.optics.parameters.xmag;const $e=Ce.optics.parameters.aspect_ratio;De=De===void 0?Ue*$e:De,Ue=Ue===void 0?De/$e:Ue,De*=.5,Ue*=.5,Se=new Jg(-De,De,Ue,-Ue,Ce.optics.parameters.znear,Ce.optics.parameters.zfar);break;default:Se=new Es;break}return Se.name=Ce.name||"",Se}function Ae(Ce){const Se=or.cameras[Ce];return Se!==void 0?m(Se,_e):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",Ce),null)}function ge(Ce){let Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"technique_common":Se=pe($e);break}}or.lights[Ce.getAttribute("id")]=Se}function pe(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"directional":case"point":case"spot":case"ambient":Se.technique=$e.nodeName,Se.parameters=de($e)}}return Se}function de(Ce){const Se={};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"color":const Pt=s($e.textContent);Se.color=new wn().fromArray(Pt).convertSRGBToLinear();break;case"falloff_angle":Se.falloffAngle=parseFloat($e.textContent);break;case"quadratic_attenuation":const Ft=parseFloat($e.textContent);Se.distance=Ft?Math.sqrt(1/Ft):0;break}}return Se}function at(Ce){let Se;switch(Ce.technique){case"directional":Se=new cS;break;case"point":Se=new f0;break;case"spot":Se=new WT;break;case"ambient":Se=new qT;break}return Ce.parameters.color&&Se.color.copy(Ce.parameters.color),Ce.parameters.distance&&(Se.distance=Ce.parameters.distance),Se}function Ee(Ce){const Se=or.lights[Ce];return Se!==void 0?m(Se,at):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",Ce),null)}function vt(Ce){const Se={name:Ce.getAttribute("name"),sources:{},vertices:{},primitives:[]},Ue=r(Ce,"mesh")[0];if(Ue!==void 0){for(let De=0;De<Ue.childNodes.length;De++){const $e=Ue.childNodes[De];if($e.nodeType!==1)continue;const Pt=$e.getAttribute("id");switch($e.nodeName){case"source":Se.sources[Pt]=et($e);break;case"vertices":Se.vertices=yt($e);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",$e.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":Se.primitives.push(Ht($e));break;default:console.log($e)}}or.geometries[Ce.getAttribute("id")]=Se}}function et(Ce){const Se={array:[],stride:3};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"float_array":Se.array=s(De.textContent);break;case"Name_array":Se.array=i(De.textContent);break;case"technique_common":const $e=r(De,"accessor")[0];$e!==void 0&&(Se.stride=parseInt($e.getAttribute("stride")));break}}return Se}function yt(Ce){const Se={};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];De.nodeType===1&&(Se[De.getAttribute("semantic")]=o(De.getAttribute("source")))}return Se}function Ht(Ce){const Se={type:Ce.nodeName,material:Ce.getAttribute("material"),count:parseInt(Ce.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let Ue=0,De=Ce.childNodes.length;Ue<De;Ue++){const $e=Ce.childNodes[Ue];if($e.nodeType===1)switch($e.nodeName){case"input":const Pt=o($e.getAttribute("source")),Ft=$e.getAttribute("semantic"),kn=parseInt($e.getAttribute("offset")),lt=parseInt($e.getAttribute("set")),hn=lt>0?Ft+lt:Ft;Se.inputs[hn]={id:Pt,offset:kn},Se.stride=Math.max(Se.stride,kn+1),Ft==="TEXCOORD"&&(Se.hasUV=!0);break;case"vcount":Se.vcount=a($e.textContent);break;case"p":Se.p=a($e.textContent);break}}return Se}function Ot(Ce){const Se={};for(let Ue=0;Ue<Ce.length;Ue++){const De=Ce[Ue];Se[De.type]===void 0&&(Se[De.type]=[]),Se[De.type].push(De)}return Se}function ln(Ce){let Se=0;for(let Ue=0,De=Ce.length;Ue<De;Ue++)Ce[Ue].hasUV===!0&&Se++;Se>0&&Se<Ce.length&&(Ce.uvsNeedsFix=!0)}function Vt(Ce){const Se={},Ue=Ce.sources,De=Ce.vertices,$e=Ce.primitives;if($e.length===0)return{};const Pt=Ot($e);for(const Ft in Pt){const kn=Pt[Ft];ln(kn),Se[Ft]=kt(kn,Ue,De)}return Se}function kt(Ce,Se,Ue){const De={},$e={array:[],stride:0},Pt={array:[],stride:0},Ft={array:[],stride:0},kn={array:[],stride:0},lt={array:[],stride:0},hn={array:[],stride:4},$n={array:[],stride:4},rn=new Vr,er=[];let zn=0;for(let tr=0;tr<Ce.length;tr++){const Xn=Ce[tr],vi=Xn.inputs;let sn=0;switch(Xn.type){case"lines":case"linestrips":sn=Xn.count*2;break;case"triangles":sn=Xn.count*3;break;case"polylist":for(let Mr=0;Mr<Xn.count;Mr++){const Nr=Xn.vcount[Mr];switch(Nr){case 3:sn+=3;break;case 4:sn+=6;break;default:sn+=(Nr-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",Xn.type)}rn.addGroup(zn,sn,tr),zn+=sn,Xn.material&&er.push(Xn.material);for(const Mr in vi){const Nr=vi[Mr];switch(Mr){case"VERTEX":for(const ri in Ue){const Ni=Ue[ri];switch(ri){case"POSITION":const Ud=$e.array.length;if(Jt(Xn,Se[Ni],Nr.offset,$e.array),$e.stride=Se[Ni].stride,Se.skinWeights&&Se.skinIndices&&(Jt(Xn,Se.skinIndices,Nr.offset,hn.array),Jt(Xn,Se.skinWeights,Nr.offset,$n.array)),Xn.hasUV===!1&&Ce.uvsNeedsFix===!0){const JT=($e.array.length-Ud)/$e.stride;for(let mS=0;mS<JT;mS++)Ft.array.push(0,0)}break;case"NORMAL":Jt(Xn,Se[Ni],Nr.offset,Pt.array),Pt.stride=Se[Ni].stride;break;case"COLOR":Jt(Xn,Se[Ni],Nr.offset,lt.array),lt.stride=Se[Ni].stride;break;case"TEXCOORD":Jt(Xn,Se[Ni],Nr.offset,Ft.array),Ft.stride=Se[Ni].stride;break;case"TEXCOORD1":Jt(Xn,Se[Ni],Nr.offset,kn.array),Ft.stride=Se[Ni].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',ri)}}break;case"NORMAL":Jt(Xn,Se[Nr.id],Nr.offset,Pt.array),Pt.stride=Se[Nr.id].stride;break;case"COLOR":Jt(Xn,Se[Nr.id],Nr.offset,lt.array,!0),lt.stride=Se[Nr.id].stride;break;case"TEXCOORD":Jt(Xn,Se[Nr.id],Nr.offset,Ft.array),Ft.stride=Se[Nr.id].stride;break;case"TEXCOORD1":Jt(Xn,Se[Nr.id],Nr.offset,kn.array),kn.stride=Se[Nr.id].stride;break}}}return $e.array.length>0&&rn.setAttribute("position",new Pn($e.array,$e.stride)),Pt.array.length>0&&rn.setAttribute("normal",new Pn(Pt.array,Pt.stride)),lt.array.length>0&&rn.setAttribute("color",new Pn(lt.array,lt.stride)),Ft.array.length>0&&rn.setAttribute("uv",new Pn(Ft.array,Ft.stride)),kn.array.length>0&&rn.setAttribute("uv2",new Pn(kn.array,kn.stride)),hn.array.length>0&&rn.setAttribute("skinIndex",new Pn(hn.array,hn.stride)),$n.array.length>0&&rn.setAttribute("skinWeight",new Pn($n.array,$n.stride)),De.data=rn,De.type=Ce[0].type,De.materialKeys=er,De}function Jt(Ce,Se,Ue,De,$e=!1){const Pt=Ce.p,Ft=Ce.stride,kn=Ce.vcount;function lt(rn){let er=Pt[rn+Ue]*$n;const zn=er+$n;for(;er<zn;er++)De.push(hn[er]);if($e){const tr=De.length-$n-1;Wi.setRGB(De[tr+0],De[tr+1],De[tr+2]).convertSRGBToLinear(),De[tr+0]=Wi.r,De[tr+1]=Wi.g,De[tr+2]=Wi.b}}const hn=Se.array,$n=Se.stride;if(Ce.vcount!==void 0){let rn=0;for(let er=0,zn=kn.length;er<zn;er++){const tr=kn[er];if(tr===4){const Xn=rn+Ft*0,vi=rn+Ft*1,sn=rn+Ft*2,Mr=rn+Ft*3;lt(Xn),lt(vi),lt(Mr),lt(vi),lt(sn),lt(Mr)}else if(tr===3){const Xn=rn+Ft*0,vi=rn+Ft*1,sn=rn+Ft*2;lt(Xn),lt(vi),lt(sn)}else if(tr>4)for(let Xn=1,vi=tr-2;Xn<=vi;Xn++){const sn=rn+Ft*0,Mr=rn+Ft*Xn,Nr=rn+Ft*(Xn+1);lt(sn),lt(Mr),lt(Nr)}rn+=Ft*tr}}else for(let rn=0,er=Pt.length;rn<er;rn+=Ft)lt(rn)}function on(Ce){return m(or.geometries[Ce],Vt)}function qn(Ce){const Se={name:Ce.getAttribute("name")||"",joints:{},links:[]};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"technique_common":$t(De,Se);break}}or.kinematicsModels[Ce.getAttribute("id")]=Se}function K(Ce){return Ce.build!==void 0?Ce.build:Ce}function te(Ce){return m(or.kinematicsModels[Ce],K)}function $t(Ce,Se){for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"joint":Se.joints[De.getAttribute("sid")]=Me(De);break;case"link":Se.links.push(St(De));break}}}function Me(Ce){let Se;for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"prismatic":case"revolute":Se=le(De);break}}return Se}function le(Ce){const Se={sid:Ce.getAttribute("sid"),name:Ce.getAttribute("name")||"",axis:new Qe,limits:{min:0,max:0},type:Ce.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"axis":const $e=s(De.textContent);Se.axis.fromArray($e);break;case"limits":const Pt=De.getElementsByTagName("max")[0],Ft=De.getElementsByTagName("min")[0];Se.limits.max=parseFloat(Pt.textContent),Se.limits.min=parseFloat(Ft.textContent);break}}return Se.limits.min>=Se.limits.max&&(Se.static=!0),Se.middlePosition=(Se.limits.min+Se.limits.max)/2,Se}function St(Ce){const Se={sid:Ce.getAttribute("sid"),name:Ce.getAttribute("name")||"",attachments:[],transforms:[]};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"attachment_full":Se.attachments.push(ht(De));break;case"matrix":case"translate":case"rotate":Se.transforms.push(At(De));break}}return Se}function ht(Ce){const Se={joint:Ce.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"link":Se.links.push(St(De));break;case"matrix":case"translate":case"rotate":Se.transforms.push(At(De));break}}return Se}function At(Ce){const Se={type:Ce.nodeName},Ue=s(Ce.textContent);switch(Se.type){case"matrix":Se.obj=new Wn,Se.obj.fromArray(Ue).transpose();break;case"translate":Se.obj=new Qe,Se.obj.fromArray(Ue);break;case"rotate":Se.obj=new Qe,Se.obj.fromArray(Ue),Se.angle=xa.degToRad(Ue[3]);break}return Se}function nt(Ce){const Se={name:Ce.getAttribute("name")||"",rigidBodies:{}};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"rigid_body":Se.rigidBodies[De.getAttribute("name")]={},_t(De,Se.rigidBodies[De.getAttribute("name")]);break}}or.physicsModels[Ce.getAttribute("id")]=Se}function _t(Ce,Se){for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"technique_common":jt(De,Se);break}}}function jt(Ce,Se){for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"inertia":Se.inertia=s(De.textContent);break;case"mass":Se.mass=s(De.textContent)[0];break}}}function Sn(Ce){const Se={bindJointAxis:[]};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"bind_joint_axis":Se.bindJointAxis.push(Vn(De));break}}or.kinematicsScenes[o(Ce.getAttribute("url"))]=Se}function Vn(Ce){const Se={target:Ce.getAttribute("target").split("/").pop()};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType===1)switch(De.nodeName){case"axis":const $e=De.getElementsByTagName("param")[0];Se.axis=$e.textContent;const Pt=Se.axis.split("inst_").pop().split("axis")[0];Se.jointIndex=Pt.substring(0,Pt.length-1);break}}return Se}function Je(Ce){return Ce.build!==void 0?Ce.build:Ce}function Qn(Ce){return m(or.kinematicsScenes[Ce],Je)}function ot(){const Ce=Object.keys(or.kinematicsModels)[0],Se=Object.keys(or.kinematicsScenes)[0],Ue=Object.keys(or.visualScenes)[0];if(Ce===void 0||Se===void 0)return;const De=te(Ce),$e=Qn(Se),Pt=Yn(Ue),Ft=$e.bindJointAxis,kn={};for(let $n=0,rn=Ft.length;$n<rn;$n++){const er=Ft[$n],zn=gr.querySelector('[sid="'+er.target+'"]');if(zn){const tr=zn.parentElement;lt(er.jointIndex,tr)}}function lt($n,rn){const er=rn.getAttribute("name"),zn=De.joints[$n];Pt.traverse(function(tr){tr.name===er&&(kn[$n]={object:tr,transforms:Pe(rn),joint:zn,position:zn.zeroPosition})})}const hn=new Wn;Eo={joints:De&&De.joints,getJointValue:function($n){const rn=kn[$n];if(rn)return rn.position;console.warn("THREE.ColladaLoader: Joint "+$n+" doesn't exist.")},setJointValue:function($n,rn){const er=kn[$n];if(er){const zn=er.joint;if(rn>zn.limits.max||rn<zn.limits.min)console.warn("THREE.ColladaLoader: Joint "+$n+" value "+rn+" outside of limits (min: "+zn.limits.min+", max: "+zn.limits.max+").");else if(zn.static)console.warn("THREE.ColladaLoader: Joint "+$n+" is static.");else{const tr=er.object,Xn=zn.axis,vi=er.transforms;Mt.identity();for(let sn=0;sn<vi.length;sn++){const Mr=vi[sn];if(Mr.sid&&Mr.sid.indexOf($n)!==-1)switch(zn.type){case"revolute":Mt.multiply(hn.makeRotationAxis(Xn,xa.degToRad(rn)));break;case"prismatic":Mt.multiply(hn.makeTranslation(Xn.x*rn,Xn.y*rn,Xn.z*rn));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+zn.type);break}else switch(Mr.type){case"matrix":Mt.multiply(Mr.obj);break;case"translate":Mt.multiply(hn.makeTranslation(Mr.obj.x,Mr.obj.y,Mr.obj.z));break;case"scale":Mt.scale(Mr.obj);break;case"rotate":Mt.multiply(hn.makeRotationAxis(Mr.obj,Mr.angle));break}}tr.matrix.copy(Mt),tr.matrix.decompose(tr.position,tr.quaternion,tr.scale),kn[$n].position=rn}}else console.log("THREE.ColladaLoader: "+$n+" does not exist.")}}}function Pe(Ce){const Se=[],Ue=gr.querySelector('[id="'+Ce.id+'"]');for(let De=0;De<Ue.childNodes.length;De++){const $e=Ue.childNodes[De];if($e.nodeType!==1)continue;let Pt,Ft;switch($e.nodeName){case"matrix":Pt=s($e.textContent);const kn=new Wn().fromArray(Pt).transpose();Se.push({sid:$e.getAttribute("sid"),type:$e.nodeName,obj:kn});break;case"translate":case"scale":Pt=s($e.textContent),Ft=new Qe().fromArray(Pt),Se.push({sid:$e.getAttribute("sid"),type:$e.nodeName,obj:Ft});break;case"rotate":Pt=s($e.textContent),Ft=new Qe().fromArray(Pt);const lt=xa.degToRad(Pt[3]);Se.push({sid:$e.getAttribute("sid"),type:$e.nodeName,obj:Ft,angle:lt});break}}return Se}function mt(Ce){const Se=Ce.getElementsByTagName("node");for(let Ue=0;Ue<Se.length;Ue++){const De=Se[Ue];De.hasAttribute("id")===!1&&De.setAttribute("id",l())}}const Mt=new Wn,We=new Qe;function tt(Ce){const Se={name:Ce.getAttribute("name")||"",type:Ce.getAttribute("type"),id:Ce.getAttribute("id"),sid:Ce.getAttribute("sid"),matrix:new Wn,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];if(De.nodeType!==1)continue;let $e;switch(De.nodeName){case"node":Se.nodes.push(De.getAttribute("id")),tt(De);break;case"instance_camera":Se.instanceCameras.push(o(De.getAttribute("url")));break;case"instance_controller":Se.instanceControllers.push(bt(De));break;case"instance_light":Se.instanceLights.push(o(De.getAttribute("url")));break;case"instance_geometry":Se.instanceGeometries.push(bt(De));break;case"instance_node":Se.instanceNodes.push(o(De.getAttribute("url")));break;case"matrix":$e=s(De.textContent),Se.matrix.multiply(Mt.fromArray($e).transpose()),Se.transforms[De.getAttribute("sid")]=De.nodeName;break;case"translate":$e=s(De.textContent),We.fromArray($e),Se.matrix.multiply(Mt.makeTranslation(We.x,We.y,We.z)),Se.transforms[De.getAttribute("sid")]=De.nodeName;break;case"rotate":$e=s(De.textContent);const Pt=xa.degToRad($e[3]);Se.matrix.multiply(Mt.makeRotationAxis(We.fromArray($e),Pt)),Se.transforms[De.getAttribute("sid")]=De.nodeName;break;case"scale":$e=s(De.textContent),Se.matrix.scale(We.fromArray($e)),Se.transforms[De.getAttribute("sid")]=De.nodeName;break;case"extra":break;default:console.log(De)}}return In(Se.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",Se.id):or.nodes[Se.id]=Se,Se}function bt(Ce){const Se={id:o(Ce.getAttribute("url")),materials:{},skeletons:[]};for(let Ue=0;Ue<Ce.childNodes.length;Ue++){const De=Ce.childNodes[Ue];switch(De.nodeName){case"bind_material":const $e=De.getElementsByTagName("instance_material");for(let Pt=0;Pt<$e.length;Pt++){const Ft=$e[Pt],kn=Ft.getAttribute("symbol"),lt=Ft.getAttribute("target");Se.materials[kn]=o(lt)}break;case"skeleton":Se.skeletons.push(o(De.textContent));break}}return Se}function Dt(Ce,Se){const Ue=[],De=[];let $e,Pt,Ft;for($e=0;$e<Ce.length;$e++){const hn=Ce[$e];let $n;if(In(hn))$n=rr(hn),Kt($n,Se,Ue);else if(Sr(hn)){const er=or.visualScenes[hn].children;for(let zn=0;zn<er.length;zn++){const tr=er[zn];if(tr.type==="JOINT"){const Xn=rr(tr.id);Kt(Xn,Se,Ue)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",hn)}for($e=0;$e<Se.length;$e++)for(Pt=0;Pt<Ue.length;Pt++)if(Ft=Ue[Pt],Ft.bone.name===Se[$e].name){De[$e]=Ft,Ft.processed=!0;break}for($e=0;$e<Ue.length;$e++)Ft=Ue[$e],Ft.processed===!1&&(De.push(Ft),Ft.processed=!0);const kn=[],lt=[];for($e=0;$e<De.length;$e++)Ft=De[$e],kn.push(Ft.bone),lt.push(Ft.boneInverse);return new ty(kn,lt)}function Kt(Ce,Se,Ue){Ce.traverse(function(De){if(De.isBone===!0){let $e;for(let Pt=0;Pt<Se.length;Pt++){const Ft=Se[Pt];if(Ft.name===De.name){$e=Ft.boneInverse;break}}$e===void 0&&($e=new Wn),Ue.push({bone:De,boneInverse:$e,processed:!1})}})}function fn(Ce){const Se=[],Ue=Ce.matrix,De=Ce.nodes,$e=Ce.type,Pt=Ce.instanceCameras,Ft=Ce.instanceControllers,kn=Ce.instanceLights,lt=Ce.instanceGeometries,hn=Ce.instanceNodes;for(let rn=0,er=De.length;rn<er;rn++)Se.push(rr(De[rn]));for(let rn=0,er=Pt.length;rn<er;rn++){const zn=Ae(Pt[rn]);zn!==null&&Se.push(zn.clone())}for(let rn=0,er=Ft.length;rn<er;rn++){const zn=Ft[rn],tr=ie(zn.id),Xn=on(tr.id),vi=Tn(Xn,zn.materials),sn=zn.skeletons,Mr=tr.skin.joints,Nr=Dt(sn,Mr);for(let ri=0,Ni=vi.length;ri<Ni;ri++){const Ud=vi[ri];Ud.isSkinnedMesh&&(Ud.bind(Nr,tr.skin.bindMatrix),Ud.normalizeSkinWeights()),Se.push(Ud)}}for(let rn=0,er=kn.length;rn<er;rn++){const zn=Ee(kn[rn]);zn!==null&&Se.push(zn.clone())}for(let rn=0,er=lt.length;rn<er;rn++){const zn=lt[rn],tr=on(zn.id),Xn=Tn(tr,zn.materials);for(let vi=0,sn=Xn.length;vi<sn;vi++)Se.push(Xn[vi])}for(let rn=0,er=hn.length;rn<er;rn++)Se.push(rr(hn[rn]).clone());let $n;if(De.length===0&&Se.length===1)$n=Se[0];else{$n=$e==="JOINT"?new vg:new mo;for(let rn=0;rn<Se.length;rn++)$n.add(Se[rn])}return $n.name=$e==="JOINT"?Ce.sid:Ce.name,$n.matrix.copy(Ue),$n.matrix.decompose($n.position,$n.quaternion,$n.scale),$n}const On=new oc({color:16711935});function nn(Ce,Se){const Ue=[];for(let De=0,$e=Ce.length;De<$e;De++){const Pt=Se[Ce[De]];Pt===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",Ce[De]),Ue.push(On)):Ue.push(pt(Pt))}return Ue}function Tn(Ce,Se){const Ue=[];for(const De in Ce){const $e=Ce[De],Pt=nn($e.materialKeys,Se);Pt.length===0&&(De==="lines"||De==="linestrips"?Pt.push(new fc):Pt.push(new hd));const Ft=$e.data.attributes.skinIndex!==void 0,kn=Pt.length===1?Pt[0]:Pt;let lt;switch(De){case"lines":lt=new u0($e.data,kn);break;case"linestrips":lt=new ny($e.data,kn);break;case"triangles":case"polylist":Ft?lt=new $T($e.data,kn):lt=new Ds($e.data,kn);break}Ue.push(lt)}return Ue}function In(Ce){return or.nodes[Ce]!==void 0}function rr(Ce){return m(or.nodes[Ce],fn)}function Or(Ce){const Se={name:Ce.getAttribute("name"),children:[]};mt(Ce);const Ue=r(Ce,"node");for(let De=0;De<Ue.length;De++)Se.children.push(tt(Ue[De]));or.visualScenes[Ce.getAttribute("id")]=Se}function vr(Ce){const Se=new mo;Se.name=Ce.name;const Ue=Ce.children;for(let De=0;De<Ue.length;De++){const $e=Ue[De];Se.add(rr($e.id))}return Se}function Sr(Ce){return or.visualScenes[Ce]!==void 0}function Yn(Ce){return m(or.visualScenes[Ce],vr)}function bi(Ce){const Se=r(Ce,"instance_visual_scene")[0];return Yn(o(Se.getAttribute("url")))}function Wr(){const Ce=or.clips;if(c(Ce)===!0){if(c(or.animations)===!1){const Se=[];for(const Ue in or.animations){const De=S(Ue);for(let $e=0,Pt=De.length;$e<Pt;$e++)Se.push(De[$e])}qi.push(new d0("default",-1,Se))}}else for(const Se in Ce)qi.push(k(Se))}function Ia(Ce){let Se="";const Ue=[Ce];for(;Ue.length;){const De=Ue.shift();De.nodeType===Node.TEXT_NODE?Se+=De.textContent:(Se+=`
`,Ue.push.apply(Ue,De.childNodes))}return Se.trim()}if(e.length===0)return{scene:new Tk};const Ja=new DOMParser().parseFromString(e,"application/xml"),gr=r(Ja,"COLLADA")[0],Gl=Ja.getElementsByTagName("parsererror")[0];if(Gl!==void 0){const Ce=r(Gl,"div")[0];let Se;return Ce?Se=Ce.textContent:Se=Ia(Gl),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,Se),null}const mi=gr.getAttribute("version");console.log("THREE.ColladaLoader: File version",mi);const qs=u(r(gr,"asset")[0]),Ks=new bg(this.manager);Ks.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let os;lP&&(os=new lP(this.manager),os.setPath(this.resourcePath||t));const Wi=new wn,qi=[];let Eo={},QT=0;const or={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};f(gr,"library_animations","animation",v),f(gr,"library_animation_clips","animation_clip",L),f(gr,"library_controllers","controller",F),f(gr,"library_images","image",ae),f(gr,"library_effects","effect",He),f(gr,"library_materials","material",Oe),f(gr,"library_cameras","camera",Te),f(gr,"library_lights","light",ge),f(gr,"library_geometries","geometry",vt),f(gr,"library_nodes","node",tt),f(gr,"library_visual_scenes","visual_scene",Or),f(gr,"library_kinematics_models","kinematics_model",qn),f(gr,"library_physics_models","physics_model",nt),f(gr,"scene","instance_kinematics_scene",Sn),p(or.animations,b),p(or.clips,z),p(or.controllers,se),p(or.images,ce),p(or.effects,J),p(or.materials,dt),p(or.cameras,_e),p(or.lights,at),p(or.geometries,Vt),p(or.visualScenes,vr),Wr(),ot();const xh=bi(r(gr,"scene")[0]);return xh.animations=qi,qs.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),xh.quaternion.setFromEuler(new id(-Math.PI/2,0,0))),xh.scale.multiplyScalar(qs.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),qi},kinematics:Eo,library:or,scene:xh}}}class uje extends ca{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new mje(t)}),this.register(function(t){return new xje(t)}),this.register(function(t){return new wje(t)}),this.register(function(t){return new gje(t)}),this.register(function(t){return new yje(t)}),this.register(function(t){return new bje(t)}),this.register(function(t){return new _je(t)}),this.register(function(t){return new pje(t)}),this.register(function(t){return new Sje(t)}),this.register(function(t){return new vje(t)}),this.register(function(t){return new fje(t)}),this.register(function(t){return new Cje(t)})}load(e,t,r,i){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Aa.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ea(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},r,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const a={},o={};if(typeof e=="string")s=e;else if(Aa.decodeText(new Uint8Array(e,0,4))===rne){try{a[Ur.KHR_BINARY_GLTF]=new Mje(e)}catch(d){i&&i(d);return}s=a[Ur.KHR_BINARY_GLTF].content}else s=Aa.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Fje(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);o[d.name]=d,a[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case Ur.KHR_MATERIALS_UNLIT:a[d]=new hje;break;case Ur.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[d]=new Eje;break;case Ur.KHR_DRACO_MESH_COMPRESSION:a[d]=new Tje(l,this.dracoLoader);break;case Ur.KHR_TEXTURE_TRANSFORM:a[d]=new Aje;break;case Ur.KHR_MESH_QUANTIZATION:a[d]=new Ije;break;default:h.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function dje(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ur={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class fje{constructor(e){this.parser=e,this.name=Ur.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new wn(16777215);l.color!==void 0&&u.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new cS(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new f0(u),c.distance=d;break;case"spot":c=new WT(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return r._getNodeRef(t.cache,o,l)})}}class hje{constructor(){this.name=Ur.KHR_MATERIALS_UNLIT}getMaterialType(){return oc}extendParams(e,t,r){const i=[];e.color=new wn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Rr))}return Promise.all(i)}}class pje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class mje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new qt(o,o)}return Promise.all(s)}}class vje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class gje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new wn(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Rr)),a.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class yje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class bje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new wn(o[0],o[1],o[2]),Promise.all(s)}}class _je{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Sje{constructor(e){this.parser=e,this.name=Ur.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new wn(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",a.specularColorTexture,Rr)),Promise.all(s)}}class xje{constructor(e){this.parser=e,this.name=Ur.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class wje{constructor(e){this.parser=e,this.name=Ur.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=r.textureLoader;if(o.uri){const c=r.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Cje{constructor(e){this.name=Ur.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,a.ready]).then(function(o){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,h=new ArrayBuffer(u*d),f=new Uint8Array(o[0],l,c);return a.decodeGltfBuffer(new Uint8Array(h),u,d,f,i.mode,i.filter),h})}else return null}}const rne="glTF",o1=12,TV={JSON:1313821514,BIN:5130562};class Mje{constructor(e){this.name=Ur.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,o1);if(this.header={magic:Aa.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==rne)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-o1,i=new DataView(e,o1);let s=0;for(;s<r;){const a=i.getUint32(s,!0);s+=4;const o=i.getUint32(s,!0);if(s+=4,o===TV.JSON){const l=new Uint8Array(e,o1+s,a);this.content=Aa.decodeText(l)}else if(o===TV.BIN){const l=o1+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Tje{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ur.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const d=uP[u]||u.toLowerCase();o[d]=a[u]}for(const u in e.attributes){const d=uP[u]||u.toLowerCase();if(a[u]!==void 0){const h=r.accessors[e.attributes[u]],f=C_[h.componentType];c[d]=f,l[d]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){i.decodeDracoFile(u,function(h){for(const f in h.attributes){const p=h.attributes[f],m=l[f];m!==void 0&&(p.normalized=m)}d(h)},o,c)})})}}class Aje{constructor(){this.name=Ur.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class cP extends ry{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new wn().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(l){for(const c in o)l.uniforms[c]=o[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(l){o.specular.value=l}},specularMap:{get:function(){return o.specularMap.value},set:function(l){o.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(l){o.glossiness.value=l}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(l){o.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Eje{constructor(){this.name=Ur.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return cP}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new wn(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const a=i.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture,Rr)),e.emissive=new wn(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new wn(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const a=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",a)),s.push(r.assignTexture(e,"specularMap",a,Rr))}return Promise.all(s)}createMaterial(e){const t=new cP(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=x0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class Ije{constructor(){this.name=Ur.KHR_MESH_QUANTIZATION}}class ine extends lS{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)t[a]=r[s+a];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=i-t,d=(r-t)/u,h=d*d,f=h*d,p=e*c,m=p-c,v=-2*f+3*h,g=f-h,_=1-v,b=g-h+d;for(let S=0;S!==o;S++){const x=a[m+S+o],w=a[m+S+l]*u,M=a[p+S+o],C=a[p+S]*u;s[S]=_*x+b*w+v*M+g*C}return s}}const Rje=new na;class Pje extends ine{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return Rje.fromArray(s).normalize().toArray(s),s}}const Nu={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},C_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},AV={9728:Vs,9729:xs,9984:QC,9985:vk,9986:JC,9987:zd},EV={33071:Ps,33648:c_,10497:po},IV={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Dje={CUBICSPLINE:void 0,LINEAR:pg,STEP:d_},E4={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Lje(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new ry({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ch})),n.DefaultMaterial}function l1(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function cp(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function kje(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(r){const h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;a.push(h)}if(i){const h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(h)}if(s){const h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2];return r&&(n.morphAttributes.position=u),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function Oje(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Nje(n){const e=n.extensions&&n.extensions[Ur.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+RV(e.attributes):t=n.indices+":"+RV(n.attributes)+":"+n.mode,t}function RV(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function dP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Bje(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class Fje{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dje,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new bg(this.options.manager):this.textureLoader=new aXe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ea(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:r,userData:{}};l1(s,o,i),cp(o,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const a=t[i].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(r[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,a){return r.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ur.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){r.load(Aa.resolveURL(t.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=IV[i.type],c=C_[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=i.byteOffset||0,f=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let m,v;if(f&&f!==d){const g=Math.floor(h/f),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let b=t.cache.get(_);b||(m=new c(o,g*f,i.count*f/u),b=new Ak(m,f/u),t.cache.add(_,b)),v=new c0(b,l,h%f/u,p)}else o===null?m=new c(i.count*l):m=new c(o,h,i.count*l),v=new ss(m,l,p);if(i.sparse!==void 0){const g=IV.SCALAR,_=C_[i.sparse.indices.componentType],b=i.sparse.indices.byteOffset||0,S=i.sparse.values.byteOffset||0,x=new _(a[1],b,i.sparse.count*g),w=new c(a[2],S,i.sparse.count*l);o!==null&&(v=new ss(v.array.slice(),v.itemSize,v.normalized));for(let M=0,C=x.length;M<C;M++){const A=x[M];if(v.setX(A,w[M*l]),l>=2&&v.setY(A,w[M*l+1]),l>=3&&v.setZ(A,w[M*l+2]),l>=4&&v.setW(A,w[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=r.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,r){const i=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,a.name&&(u.name=a.name);const h=(s.samplers||{})[a.sampler]||{};return u.magFilter=AV[h.magFilter]||xs,u.minFilter=AV[h.minFilter]||zd,u.wrapS=EV[h.wrapS]||po,u.wrapT=EV[h.wrapT]||po,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=i.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=r.getDependency("bufferView",a.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(h),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;t.isImageBitmapLoader===!0&&(p=function(m){const v=new sa(m);v.needsUpdate=!0,h(v)}),t.load(Aa.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return c===!0&&o.revokeObjectURL(l),d.userData.mimeType=a.mimeType||Bje(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(a){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[Ur.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[Ur.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Ur.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return i!==void 0&&(a.encoding=i),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new Pp,ws.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(o,l)),r=l}else if(e.isLine){const o="LineBasicMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new fc,ws.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(o,l)),r=l}if(i||s||a){let o="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=r.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return ry}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[Ur.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=i[Ur.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else if(l[Ur.KHR_MATERIALS_UNLIT]){const d=i[Ur.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else{const d=s.pbrMetallicRoughness||{};if(o.color=new wn(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,Rr)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=uh);const u=s.alphaMode||E4.OPAQUE;if(u===E4.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===E4.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==oc&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new qt(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;o.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&a!==oc&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==oc&&(o.emissive=new wn().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==oc&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Rr)),Promise.all(c).then(function(){let d;return a===cP?d=i[Ur.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):d=new a(o),s.name&&(d.name=s.name),cp(d,s),t.associations.set(d,{materials:e}),s.extensions&&l1(i,d,s),d})}createUniqueName(e){const t=Yr.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(o){return r[Ur.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return PV(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=Nje(c),d=i[u];if(d)a.push(d.promise);else{let h;c.extensions&&c.extensions[Ur.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=PV(new Vr,c,t),i[u]={primitive:c,promise:h},a.push(h)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?Lje(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],v=a[f];let g;const _=c[f];if(v.mode===Nu.TRIANGLES||v.mode===Nu.TRIANGLE_STRIP||v.mode===Nu.TRIANGLE_FAN||v.mode===void 0)g=s.isSkinnedMesh===!0?new $T(m,_):new Ds(m,_),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),v.mode===Nu.TRIANGLE_STRIP?g.geometry=DV(g.geometry,kVe):v.mode===Nu.TRIANGLE_FAN&&(g.geometry=DV(g.geometry,Iee));else if(v.mode===Nu.LINES)g=new u0(m,_);else if(v.mode===Nu.LINE_STRIP)g=new ny(m,_);else if(v.mode===Nu.LINE_LOOP)g=new tte(m,_);else if(v.mode===Nu.POINTS)g=new ib(m,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&Oje(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),cp(g,s),v.extensions&&l1(i,g,v),t.assignFinalMaterial(g),d.push(g)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return d[0];const h=new mo;t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Es(xa.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Jg(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),cp(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],a=[],o=[],l=[];for(let c=0,u=r.channels.length;c<u;c++){const d=r.channels[c],h=r.samplers[d.sampler],f=d.target,p=f.node!==void 0?f.node:f.id,m=r.parameters!==void 0?r.parameters[h.input]:h.input,v=r.parameters!==void 0?r.parameters[h.output]:h.output;i.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",v)),o.push(h),l.push(f)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],f=c[3],p=c[4],m=[];for(let g=0,_=u.length;g<_;g++){const b=u[g],S=d[g],x=h[g],w=f[g],M=p[g];if(b===void 0)continue;b.updateMatrix();let C;switch(cf[M.path]){case cf.weights:C=gg;break;case cf.rotation:C=Md;break;case cf.position:case cf.scale:default:C=ph;break}const A=b.name?b.name:b.uuid,T=w.interpolation!==void 0?Dje[w.interpolation]:pg,I=[];cf[M.path]===cf.weights?b.traverse(function(B){B.morphTargetInfluences&&I.push(B.name?B.name:B.uuid)}):I.push(A);let D=x.array;if(x.normalized){const B=dP(D.constructor),O=new Float32Array(D.length);for(let H=0,L=D.length;H<L;H++)O[H]=D[H]*B;D=O}for(let B=0,O=I.length;B<O;B++){const H=new C(I[B]+"."+cf[M.path],S.array,D,T);w.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(z){const k=this instanceof Md?Pje:ine;return new k(this.times,this.values,this.getValueSize()/3,z)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(H)}}const v=r.name?r.name:"animation_"+e;return new d0(v,void 0,m)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const a=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=i.weights.length;l<c;l++)o.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"";return function(){const o=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),Promise.all(o)}().then(function(o){let l;if(s.isBone===!0?l=new vg:o.length>1?l=new mo:o.length===1?l=o[0]:l=new $i,l!==o[0])for(let c=0,u=o.length;c<u;c++)l.add(o[c]);if(s.name&&(l.userData.name=s.name,l.name=a),cp(l,s),s.extensions&&l1(r,l,s),s.matrix!==void 0){const c=new Wn;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,a=new mo;i.name&&(a.name=s.createUniqueName(i.name)),cp(a,i),i.extensions&&l1(r,a,i);const o=i.nodes||[],l=[];for(let c=0,u=o.length;c<u;c++)l.push(sne(o[c],a,t,s));return Promise.all(l).then(function(){const c=u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof ws||h instanceof sa)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);f!=null&&d.set(h,f)}),d};return s.associations=c(a),a})}}function sne(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let a;return r.getDependency("skin",i.skin).then(function(o){a=o;const l=[];for(let c=0,u=a.joints.length;c<u;c++)l.push(r.getDependency("node",a.joints[c]));return Promise.all(l)}).then(function(o){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=o.length;d<h;d++){const f=o[d];if(f){c.push(f);const p=new Wn;a.inverseBindMatrices!==void 0&&p.fromArray(a.inverseBindMatrices.array,d*16),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[d])}l.bind(new ty(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const a=[];if(i.children){const o=i.children;for(let l=0,c=o.length;l<c;l++){const u=o[l];a.push(sne(u,s,t,r))}}return Promise.all(a)})}function zje(n,e,t){const r=e.attributes,i=new w0;if(r.POSITION!==void 0){const o=t.json.accessors[r.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(i.set(new Qe(l[0],l[1],l[2]),new Qe(c[0],c[1],c[2])),o.normalized){const u=dP(C_[o.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new Qe,l=new Qe;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const m=dP(C_[h.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}n.boundingBox=i;const a=new C0;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=a}function PV(n,e,t){const r=e.attributes,i=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in r){const o=uP[a]||a.toLowerCase();o in n.attributes||i.push(s(r[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});i.push(a)}return cp(n,e),zje(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?kje(n,e.targets,t):n})}function DV(n,e){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===Iee)for(let a=1;a<=r;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}const Uje=/^[og]\s*(.+)?/,Hje=/^mtllib /,Vje=/^usemtl /,$je=/^usemap /,LV=/\s+/,kV=new Qe,I4=new Qe,OV=new Qe,NV=new Qe,ol=new Qe,vw=new wn;function Gje(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:i||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),i&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const r=parseInt(e,10);return(r>=0?r-1:r+t/3)*3},parseNormalIndex:function(e,t){const r=parseInt(e,10);return(r>=0?r-1:r+t/3)*3},parseUVIndex:function(e,t){const r=parseInt(e,10);return(r>=0?r-1:r+t/2)*2},addVertex:function(e,t,r){const i=this.vertices,s=this.object.geometry.vertices;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[t+0],i[t+1],i[t+2]),s.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){const i=this.normals,s=this.object.geometry.normals;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[t+0],i[t+1],i[t+2]),s.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(e,t,r){const i=this.vertices,s=this.object.geometry.normals;kV.fromArray(i,e),I4.fromArray(i,t),OV.fromArray(i,r),ol.subVectors(OV,I4),NV.subVectors(kV,I4),ol.cross(NV),ol.normalize(),s.push(ol.x,ol.y,ol.z),s.push(ol.x,ol.y,ol.z),s.push(ol.x,ol.y,ol.z)},addColor:function(e,t,r){const i=this.colors,s=this.object.geometry.colors;i[e]!==void 0&&s.push(i[e+0],i[e+1],i[e+2]),i[t]!==void 0&&s.push(i[t+0],i[t+1],i[t+2]),i[r]!==void 0&&s.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,t,r){const i=this.uvs,s=this.object.geometry.uvs;s.push(i[e+0],i[e+1]),s.push(i[t+0],i[t+1]),s.push(i[r+0],i[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,i,s,a,o,l,c){const u=this.vertices.length;let d=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),f=this.parseVertexIndex(r,u);if(this.addVertex(d,h,f),this.addColor(d,h,f),o!==void 0&&o!==""){const p=this.normals.length;d=this.parseNormalIndex(o,p),h=this.parseNormalIndex(l,p),f=this.parseNormalIndex(c,p),this.addNormal(d,h,f)}else this.addFaceNormal(d,h,f);if(i!==void 0&&i!==""){const p=this.uvs.length;d=this.parseUVIndex(i,p),h=this.parseUVIndex(s,p),f=this.parseUVIndex(a,p),this.addUV(d,h,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let r=0,i=e.length;r<i;r++){const s=this.parseVertexIndex(e[r],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],r));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],i))}};return n.startObject("",!1),n}class Wje extends ca{constructor(e){super(e),this.materials=null}load(e,t,r,i){const s=this,a=new Ea(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Gje;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const r=e.split(`
`);let i=[];for(let o=0,l=r.length;o<l;o++){const c=r[o].trimStart();if(c.length===0)continue;const u=c.charAt(0);if(u!=="#")if(u==="v"){const d=c.split(LV);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(vw.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(vw.r,vw.g,vw.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(u==="f"){const h=c.slice(1).trim().split(LV),f=[];for(let m=0,v=h.length;m<v;m++){const g=h[m];if(g.length>0){const _=g.split("/");f.push(_)}}const p=f[0];for(let m=1,v=f.length-1;m<v;m++){const g=f[m],_=f[m+1];t.addFace(p[0],g[0],_[0],p[1],g[1],_[1],p[2],g[2],_[2])}}else if(u==="l"){const d=c.substring(1).trim().split(" ");let h=[];const f=[];if(c.indexOf("/")===-1)h=d;else for(let p=0,m=d.length;p<m;p++){const v=d[p].split("/");v[0]!==""&&h.push(v[0]),v[1]!==""&&f.push(v[1])}t.addLineGeometry(h,f)}else if(u==="p"){const h=c.slice(1).trim().split(" ");t.addPointGeometry(h)}else if((i=Uje.exec(c))!==null){const d=(" "+i[0].slice(1).trim()).slice(1);t.startObject(d)}else if(Vje.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(Hje.test(c))t.materialLibraries.push(c.substring(7).trim());else if($je.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(u==="s"){if(i=c.split(" "),i.length>1){const h=i[1].trim().toLowerCase();t.object.smooth=h!=="0"&&h!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new mo;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,l=t.objects.length;o<l;o++){const c=t.objects[o],u=c.geometry,d=c.materials,h=u.type==="Line",f=u.type==="Points";let p=!1;if(u.vertices.length===0)continue;const m=new Vr;m.setAttribute("position",new Pn(u.vertices,3)),u.normals.length>0&&m.setAttribute("normal",new Pn(u.normals,3)),u.colors.length>0&&(p=!0,m.setAttribute("color",new Pn(u.colors,3))),u.hasUVIndices===!0&&m.setAttribute("uv",new Pn(u.uvs,2));const v=[];for(let _=0,b=d.length;_<b;_++){const S=d[_],x=S.name+"_"+S.smooth+"_"+p;let w=t.materials[x];if(this.materials!==null){if(w=this.materials.create(S.name),h&&w&&!(w instanceof fc)){const M=new fc;ws.prototype.copy.call(M,w),M.color.copy(w.color),w=M}else if(f&&w&&!(w instanceof Pp)){const M=new Pp({size:10,sizeAttenuation:!1});ws.prototype.copy.call(M,w),M.color.copy(w.color),M.map=w.map,w=M}}w===void 0&&(h?w=new fc:f?w=new Pp({size:1,sizeAttenuation:!1}):w=new hd,w.name=S.name,w.flatShading=!S.smooth,w.vertexColors=p,t.materials[x]=w),v.push(w)}let g;if(v.length>1){for(let _=0,b=d.length;_<b;_++){const S=d[_];m.addGroup(S.groupStart,S.groupCount,_)}h?g=new u0(m,v):f?g=new ib(m,v):g=new Ds(m,v)}else h?g=new u0(m,v[0]):f?g=new ib(m,v[0]):g=new Ds(m,v[0]);g.name=c.name,s.add(g)}else if(t.vertices.length>0){const o=new Pp({size:1,sizeAttenuation:!1}),l=new Vr;l.setAttribute("position",new Pn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Pn(t.colors,3)),o.vertexColors=!0);const c=new ib(l,o);s.add(c)}return s}}class qje extends YYe{constructor(e){super(e)}parse(e,t){const r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},i=542327876,s=131072,a=512,o=1024,l=2048,c=4096,u=8192,d=16384,h=32768;function f(ie){return ie.charCodeAt(0)+(ie.charCodeAt(1)<<8)+(ie.charCodeAt(2)<<16)+(ie.charCodeAt(3)<<24)}function p(ie){return String.fromCharCode(ie&255,ie>>8&255,ie>>16&255,ie>>24&255)}function m(ie,ae,ce,we){const He=ce*we*4,Ge=new Uint8Array(ie,ae,He),me=new Uint8Array(He);let be=0,oe=0;for(let j=0;j<we;j++)for(let ke=0;ke<ce;ke++){const ze=Ge[oe];oe++;const Ve=Ge[oe];oe++;const Le=Ge[oe];oe++;const Ze=Ge[oe];oe++,me[be]=Le,be++,me[be]=Ve,be++,me[be]=ze,be++,me[be]=Ze,be++}return me}const v=f("DXT1"),g=f("DXT3"),_=f("DXT5"),b=f("ETC1"),S=31,x=0,w=1,M=2,C=3,A=4,T=7,I=21,D=22,B=23,O=24,H=25,L=26,z=28,k=new Int32Array(e,0,S);if(k[x]!==i)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),r;let F;const W=k[I];let q=!1;switch(W){case v:F=8,r.format=I2;break;case g:F=16,r.format=R2;break;case _:F=16,r.format=P2;break;case b:F=8,r.format=Eee;break;default:if(k[D]===32&&k[B]&16711680&&k[O]&65280&&k[H]&255&&k[L]&4278190080)q=!0,F=64,r.format=Al;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p(W)),r}r.mipmapCount=1,k[M]&s&&t!==!1&&(r.mipmapCount=Math.max(1,k[T]));const Z=k[z];if(r.isCubemap=!!(Z&a),r.isCubemap&&(!(Z&o)||!(Z&l)||!(Z&c)||!(Z&u)||!(Z&d)||!(Z&h)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),r;r.width=k[A],r.height=k[C];let se=k[w]+4;const X=r.isCubemap?6:1;for(let ie=0;ie<X;ie++){let ae=r.width,ce=r.height;for(let we=0;we<r.mipmapCount;we++){let He,Ge;q?(He=m(e,se,ae,ce),Ge=He.length):(Ge=Math.max(4,ae)/4*Math.max(4,ce)/4*F,He=new Uint8Array(e,se,Ge));const me={data:He,width:ae,height:ce};r.mipmaps.push(me),se+=Ge,ae=Math.max(ae>>1,1),ce=Math.max(ce>>1,1)}}return r}}class Kje{constructor(e,t,r){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const gw=new wn;class Yje extends ca{constructor(e){super(e),this.propertyNameMapping={}}load(e,t,r,i){const s=this,a=new Ea(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function t(f){const p=/^ply([\s\S]*)end_header(\r\n|\r|\n)/;let m="",v=0;const g=p.exec(f);g!==null&&(m=g[1],v=new Blob([g[0]]).size);const _={comments:[],elements:[],headerLength:v,objInfo:""},b=m.split(/\r\n|\r|\n/);let S;function x(w,M){const C={type:w[0]};return C.type==="list"?(C.name=w[3],C.countType=w[1],C.itemType=w[2]):C.name=w[1],C.name in M&&(C.name=M[C.name]),C}for(let w=0;w<b.length;w++){let M=b[w];if(M=M.trim(),M==="")continue;const C=M.split(/\s+/),A=C.shift();switch(M=C.join(" "),A){case"format":_.format=C[0],_.version=C[1];break;case"comment":_.comments.push(M);break;case"element":S!==void 0&&_.elements.push(S),S={},S.name=C[0],S.count=parseInt(C[1]),S.properties=[];break;case"property":S.properties.push(x(C,h.propertyNameMapping));break;case"obj_info":_.objInfo=M;break;default:console.log("unhandled",A,C)}}return S!==void 0&&_.elements.push(S),_}function r(f,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(f);case"float":case"double":case"float32":case"float64":return parseFloat(f)}}function i(f,p){const m=p.split(/\s+/),v={};for(let g=0;g<f.length;g++)if(f[g].type==="list"){const _=[],b=r(m.shift(),f[g].countType);for(let S=0;S<b;S++)_.push(r(m.shift(),f[g].itemType));v[f[g].name]=_}else v[f[g].name]=r(m.shift(),f[g].type);return v}function s(f,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let v;const g=/end_header\s([\s\S]*)$/;let _="";(v=g.exec(f))!==null&&(_=v[1]);const b=_.split(/\r\n|\r|\n/);let S=0,x=0;for(let w=0;w<b.length;w++){let M=b[w];if(M=M.trim(),M==="")continue;x>=p.elements[S].count&&(S++,x=0);const C=i(p.elements[S].properties,M);o(m,p.elements[S].name,C),x++}return a(m)}function a(f){let p=new Vr;return f.indices.length>0&&p.setIndex(f.indices),p.setAttribute("position",new Pn(f.vertices,3)),f.normals.length>0&&p.setAttribute("normal",new Pn(f.normals,3)),f.uvs.length>0&&p.setAttribute("uv",new Pn(f.uvs,2)),f.colors.length>0&&p.setAttribute("color",new Pn(f.colors,3)),f.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new Pn(f.faceVertexUvs,2))),p.computeBoundingSphere(),p}function o(f,p,m){function v(D){for(let B=0,O=D.length;B<O;B++){const H=D[B];if(H in m)return H}return null}const g=v(["x","px","posx"])||"x",_=v(["y","py","posy"])||"y",b=v(["z","pz","posz"])||"z",S=v(["nx","normalx"]),x=v(["ny","normaly"]),w=v(["nz","normalz"]),M=v(["s","u","texture_u","tx"]),C=v(["t","v","texture_v","ty"]),A=v(["red","diffuse_red","r","diffuse_r"]),T=v(["green","diffuse_green","g","diffuse_g"]),I=v(["blue","diffuse_blue","b","diffuse_b"]);if(p==="vertex")f.vertices.push(m[g],m[_],m[b]),S!==null&&x!==null&&w!==null&&f.normals.push(m[S],m[x],m[w]),M!==null&&C!==null&&f.uvs.push(m[M],m[C]),A!==null&&T!==null&&I!==null&&(gw.setRGB(m[A]/255,m[T]/255,m[I]/255).convertSRGBToLinear(),f.colors.push(gw.r,gw.g,gw.b));else if(p==="face"){const D=m.vertex_indices||m.vertex_index,B=m.texcoord;D.length===3?(f.indices.push(D[0],D[1],D[2]),B&&B.length===6&&(f.faceVertexUvs.push(B[0],B[1]),f.faceVertexUvs.push(B[2],B[3]),f.faceVertexUvs.push(B[4],B[5]))):D.length===4&&(f.indices.push(D[0],D[1],D[3]),f.indices.push(D[1],D[2],D[3]))}}function l(f,p,m,v){switch(m){case"int8":case"char":return[f.getInt8(p),1];case"uint8":case"uchar":return[f.getUint8(p),1];case"int16":case"short":return[f.getInt16(p,v),2];case"uint16":case"ushort":return[f.getUint16(p,v),2];case"int32":case"int":return[f.getInt32(p,v),4];case"uint32":case"uint":return[f.getUint32(p,v),4];case"float32":case"float":return[f.getFloat32(p,v),4];case"float64":case"double":return[f.getFloat64(p,v),8]}}function c(f,p,m,v){const g={};let _,b=0;for(let S=0;S<m.length;S++)if(m[S].type==="list"){const x=[];_=l(f,p+b,m[S].countType,v);const w=_[0];b+=_[1];for(let M=0;M<w;M++)_=l(f,p+b,m[S].itemType,v),x.push(_[0]),b+=_[1];g[m[S].name]=x}else _=l(f,p+b,m[S].type,v),g[m[S].name]=_[0],b+=_[1];return[g,b]}function u(f,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},v=p.format==="binary_little_endian",g=new DataView(f,p.headerLength);let _,b=0;for(let S=0;S<p.elements.length;S++)for(let x=0;x<p.elements[S].count;x++){_=c(g,b,p.elements[S].properties,v),b+=_[1];const w=_[0];o(m,p.elements[S].name,w)}return a(m)}let d;const h=this;if(e instanceof ArrayBuffer){const f=Aa.decodeText(new Uint8Array(e)),p=t(f);d=p.format==="ascii"?s(f,p):u(e,p)}else d=s(e,t(e));return d}}class Xje extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=new Ea(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){function t(c){const u=new DataView(c),d=32/8*3+32/8*3*3+16/8,h=u.getUint32(80,!0);if(80+32/8+h*d===u.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(r(p,u,m))return!1;return!0}function r(c,u,d){for(let h=0,f=c.length;h<f;h++)if(c[h]!==u.getUint8(d+h))return!1;return!0}function i(c){const u=new DataView(c),d=u.getUint32(80,!0);let h,f,p,m=!1,v,g,_,b,S;for(let T=0;T<80-10;T++)u.getUint32(T,!1)==1129270351&&u.getUint8(T+4)==82&&u.getUint8(T+5)==61&&(m=!0,v=new Float32Array(d*3*3),g=u.getUint8(T+6)/255,_=u.getUint8(T+7)/255,b=u.getUint8(T+8)/255,S=u.getUint8(T+9)/255);const x=84,w=12*4+2,M=new Vr,C=new Float32Array(d*3*3),A=new Float32Array(d*3*3);for(let T=0;T<d;T++){const I=x+T*w,D=u.getFloat32(I,!0),B=u.getFloat32(I+4,!0),O=u.getFloat32(I+8,!0);if(m){const H=u.getUint16(I+48,!0);H&32768?(h=g,f=_,p=b):(h=(H&31)/31,f=(H>>5&31)/31,p=(H>>10&31)/31)}for(let H=1;H<=3;H++){const L=I+H*12,z=T*3*3+(H-1)*3;C[z]=u.getFloat32(L,!0),C[z+1]=u.getFloat32(L+4,!0),C[z+2]=u.getFloat32(L+8,!0),A[z]=D,A[z+1]=B,A[z+2]=O,m&&(v[z]=h,v[z+1]=f,v[z+2]=p)}}return M.setAttribute("position",new ss(C,3)),M.setAttribute("normal",new ss(A,3)),m&&(M.setAttribute("color",new ss(v,3)),M.hasColors=!0,M.alpha=S),M}function s(c){const u=new Vr,d=/solid([\s\S]*?)endsolid/g,h=/facet([\s\S]*?)endfacet/g;let f=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+p+p+p,"g"),v=new RegExp("normal"+p+p+p,"g"),g=[],_=[],b=new Qe;let S,x=0,w=0,M=0;for(;(S=d.exec(c))!==null;){w=M;const C=S[0];for(;(S=h.exec(C))!==null;){let I=0,D=0;const B=S[0];for(;(S=v.exec(B))!==null;)b.x=parseFloat(S[1]),b.y=parseFloat(S[2]),b.z=parseFloat(S[3]),D++;for(;(S=m.exec(B))!==null;)g.push(parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])),_.push(b.x,b.y,b.z),I++,M++;D!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+f),I!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+f),f++}const A=w,T=M-w;u.addGroup(A,T,x),x++}return u.setAttribute("position",new Pn(g,3)),u.setAttribute("normal",new Pn(_,3)),u}function a(c){return typeof c!="string"?Aa.decodeText(new Uint8Array(c)):c}function o(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d)&255;return u.buffer||u}else return c}const l=o(e);return t(l)?i(l):s(a(e))}}class jje extends ca{constructor(e){super(e)}load(e,t,r,i){const s=this,a=this.path===""?Aa.extractUrlBase(e):this.path,o=new Ea(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const r=e.split(`
`);let i={};const s=/\s+/,a={};for(let l=0;l<r.length;l++){let c=r[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const u=c.indexOf(" ");let d=u>=0?c.substring(0,u):c;d=d.toLowerCase();let h=u>=0?c.substring(u+1):"";if(h=h.trim(),d==="newmtl")i={name:h},a[h]=i;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const f=h.split(s,3);i[d]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])]}else i[d]=h}const o=new Zje(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class Zje{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:ch,this.wrap=this.options.wrap!==void 0?this.options.wrap:po}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const r in e){const i=e[r],s={};t[r]=s;for(const a in i){let o=!0,l=i[a];const c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,r=this.materialsInfo[e],i={name:e,side:this.side};function s(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function a(o,l){if(i[o])return;const c=t.getTextureParams(l,i),u=t.loadTexture(s(t.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(u.encoding=Rr),i[o]=u}for(const o in r){const l=r[o];let c;if(l!=="")switch(o.toLowerCase()){case"kd":i.color=new wn().fromArray(l).convertSRGBToLinear();break;case"ks":i.specular=new wn().fromArray(l).convertSRGBToLinear();break;case"ke":i.emissive=new wn().fromArray(l).convertSRGBToLinear();break;case"map_kd":a("map",l);break;case"map_ks":a("specularMap",l);break;case"map_ke":a("emissiveMap",l);break;case"norm":a("normalMap",l);break;case"map_bump":case"bump":a("bumpMap",l);break;case"map_d":a("alphaMap",l),i.transparent=!0;break;case"ns":i.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(i.opacity=c,i.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(i.opacity=1-c,i.transparent=!0);break}}return this.materials[e]=new hd(i),this.materials[e]}getTextureParams(e,t){const r={scale:new qt(1,1),offset:new qt(0,0)},i=e.split(/\s+/);let s;return s=i.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(i[s+1]),i.splice(s,2)),s=i.indexOf("-s"),s>=0&&(r.scale.set(parseFloat(i[s+1]),parseFloat(i[s+2])),i.splice(s,4)),s=i.indexOf("-o"),s>=0&&(r.offset.set(parseFloat(i[s+1]),parseFloat(i[s+2])),i.splice(s,4)),r.url=i.join(" ").trim(),r}loadTexture(e,t,r,i,s){const a=this.manager!==void 0?this.manager:gte;let o=a.getHandler(e);o===null&&(o=new bg(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,r,i,s);return t!==void 0&&(l.mapping=t),l}}const R4=new WeakMap;class Qje extends ca{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Ea(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(R4.has(e)){const l=R4.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),R4.set(e,{key:r,promise:o}),o}_createGeometry(e){const t=new Vr;e.index&&t.setIndex(new ss(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,a=i.array,o=i.itemSize;t.setAttribute(s,new ss(a,o))}return t}_loadLibrary(e,t){const r=new Ea(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=Jje.toString(),a=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const a=s.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Jje(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const d=u.draco,h=new d.Decoder,f=new d.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const p=t(d,h,f,c),m=p.attributes.map(v=>v.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(f),d.destroy(h)}});break}};function t(a,o,l,c){const u=c.attributeIDs,d=c.attributeTypes;let h,f;const p=o.GetEncodedGeometryType(l);if(p===a.TRIANGULAR_MESH)h=new a.Mesh,f=o.DecodeBufferToMesh(l,h);else if(p===a.POINT_CLOUD)h=new a.PointCloud,f=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const m={index:null,attributes:[]};for(const v in u){const g=self[d[v]];let _,b;if(c.useUniqueIDs)b=u[v],_=o.GetAttributeByUniqueId(h,b);else{if(b=o.GetAttributeId(h,a[u[v]]),b===-1)continue;_=o.GetAttribute(h,b)}m.attributes.push(i(a,o,h,v,g,_))}return p===a.TRIANGULAR_MESH&&(m.index=r(a,o,h)),a.destroy(h),m}function r(a,o,l){const u=l.num_faces()*3,d=u*4,h=a._malloc(d);o.GetTrianglesUInt32Array(l,d,h);const f=new Uint32Array(a.HEAPF32.buffer,h,u).slice();return a._free(h),{array:f,itemSize:1}}function i(a,o,l,c,u,d){const h=d.num_components(),p=l.num_points()*h,m=p*u.BYTES_PER_ELEMENT,v=s(a,u),g=a._malloc(m);o.GetAttributeDataArrayForAllPoints(l,d,v,m,g);const _=new u(a.HEAPF32.buffer,g,p).slice();return a._free(g),{name:c,array:_,itemSize:h}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}const SM=new w0,zc=new Kje;zc.addHandler(/\.dds$/i,new qje);zc.addHandler(/\.tga$/i,new lP);function eZe(n){return SM.setFromObject(n),SM.getSize(new Qe)}function tZe(n){return SM.setFromObject(n),SM.getCenter(new Qe)}function nZe(n){const e=n.split(".");if(e.length<=1)return"";{let t=e.pop();return t=t.toLowerCase(),t}}function rZe(n,e,t,r,i){let s;e?s=e:s=nZe(n),s==="glb"&&(s="gltf");let a={loader:null,getObject:null};switch(s){case"dae":a={loader:new cje(zc),getObject:o=>o.scene};break;case"fbx":a={loader:new ZXe(zc)};break;case"gltf":a={loader:new uje(zc),getObject:o=>{const l=o.scene;return o.animations&&(l.animations=o.animations),l}},sZe(t,a,i);break;case"obj":a={loader:new Wje(zc)};break;case"ply":a={loader:new Yje(zc),getObject:o=>(o.computeVertexNormals(),new Ds(o,r==="MeshStandardMaterial"?new ry:new oc({vertexColors:!0})))};break;case"stl":a={loader:new Xje(zc),getObject:o=>new Ds(o,new hd)};break;case"json":a={loader:new iXe(zc)};break}return a}function iZe(){return new jje(zc)}function sZe(n,e,t){if(n){const r=new Qje;r.setDecoderPath(t||"assets/draco/gltf/"),r.setDecoderConfig({type:"js"}),e.loader.setDRACOLoader(r)}}const aZe=Ie({name:"vue3dLoader"});({...aZe});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Qk="171",xm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},oZe=0,BV=1,lZe=2,ane=1,cZe=2,$u=3,du=0,xo=1,wl=2,Yf=0,Xf=1,FV=2,zV=3,UV=4,one=5,gp=100,uZe=101,dZe=102,fZe=103,hZe=104,pZe=200,mZe=201,vZe=202,gZe=203,M_=204,T_=205,yZe=206,bZe=207,_Ze=208,SZe=209,xZe=210,wZe=211,CZe=212,MZe=213,TZe=214,fP=0,hP=1,pP=2,xg=3,mP=4,vP=5,gP=6,yP=7,lne=0,AZe=1,EZe=2,jf=0,IZe=1,RZe=2,PZe=3,DZe=4,LZe=5,kZe=6,OZe=7,cne=300,wg=301,Cg=302,bP=303,_P=304,KT=306,SP=1e3,Dp=1001,xP=1002,jo=1003,NZe=1004,yw=1005,Xc=1006,P4=1007,Lp=1008,fu=1009,une=1010,dne=1011,A_=1012,Jk=1013,Il=1014,lc=1015,py=1016,e8=1017,t8=1018,Mg=1020,fne=35902,hne=1021,pne=1022,$a=1023,mne=1024,vne=1025,qp=1026,Tg=1027,gne=1028,YT=1029,yne=1030,n8=1031,zv=1033,F2=33776,z2=33777,U2=33778,H2=33779,wP=35840,CP=35841,MP=35842,TP=35843,AP=36196,EP=37492,IP=37496,RP=37808,PP=37809,DP=37810,LP=37811,kP=37812,OP=37813,NP=37814,BP=37815,FP=37816,zP=37817,UP=37818,HP=37819,VP=37820,$P=37821,V2=36492,GP=36494,WP=36495,bne=36283,qP=36284,KP=36285,YP=36286,BZe=3200,FZe=3201,zZe=0,UZe=1,Pf="",gl="srgb",Ag="srgb-linear",xM="linear",yi="srgb",Cm=7680,HV=519,HZe=512,VZe=513,$Ze=514,_ne=515,GZe=516,WZe=517,qZe=518,KZe=519,VV=35044,YZe=35048,$V="300 es",ad=2e3,wM=2001;class A0{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const ha=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let GV=1234567;const cb=Math.PI/180,E_=180/Math.PI;function my(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ha[n&255]+ha[n>>8&255]+ha[n>>16&255]+ha[n>>24&255]+"-"+ha[e&255]+ha[e>>8&255]+"-"+ha[e>>16&15|64]+ha[e>>24&255]+"-"+ha[t&63|128]+ha[t>>8&255]+"-"+ha[t>>16&255]+ha[t>>24&255]+ha[r&255]+ha[r>>8&255]+ha[r>>16&255]+ha[r>>24&255]).toLowerCase()}function Er(n,e,t){return Math.max(e,Math.min(t,n))}function r8(n,e){return(n%e+e)%e}function XZe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function jZe(n,e,t){return n!==e?(t-n)/(e-n):0}function ub(n,e,t){return(1-t)*n+t*e}function ZZe(n,e,t,r){return ub(n,e,1-Math.exp(-t*r))}function QZe(n,e=1){return e-Math.abs(r8(n,e*2)-e)}function JZe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function eQe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function tQe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function nQe(n,e){return n+Math.random()*(e-n)}function rQe(n){return n*(.5-Math.random())}function iQe(n){n!==void 0&&(GV=n);let e=GV+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sQe(n){return n*cb}function aQe(n){return n*E_}function oQe(n){return(n&n-1)===0&&n!==0}function lQe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function cQe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function uQe(n,e,t,r,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+r)/2),u=a((e+r)/2),d=s((e-r)/2),h=a((e-r)/2),f=s((r-e)/2),p=a((r-e)/2);switch(i){case"XYX":n.set(o*u,l*d,l*h,o*c);break;case"YZY":n.set(l*h,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*h,o*u,o*c);break;case"XZX":n.set(o*u,l*p,l*f,o*c);break;case"YXY":n.set(l*f,o*u,l*p,o*c);break;case"ZYZ":n.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Qm(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ka(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Sne={DEG2RAD:cb,RAD2DEG:E_,generateUUID:my,clamp:Er,euclideanModulo:r8,mapLinear:XZe,inverseLerp:jZe,lerp:ub,damp:ZZe,pingpong:QZe,smoothstep:JZe,smootherstep:eQe,randInt:tQe,randFloat:nQe,randFloatSpread:rQe,seededRandom:iQe,degToRad:sQe,radToDeg:aQe,isPowerOfTwo:oQe,ceilPowerOfTwo:lQe,floorPowerOfTwo:cQe,setQuaternionFromProperEuler:uQe,normalize:ka,denormalize:Qm};class Kn{constructor(e=0,t=0){Kn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Er(this.x,e.x,t.x),this.y=Er(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Er(this.x,e,t),this.y=Er(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Er(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Er(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dr{constructor(e,t,r,i,s,a,o,l,c){dr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,c)}set(e,t,r,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],p=r[8],m=i[0],v=i[3],g=i[6],_=i[1],b=i[4],S=i[7],x=i[2],w=i[5],M=i[8];return s[0]=a*m+o*_+l*x,s[3]=a*v+o*b+l*w,s[6]=a*g+o*S+l*M,s[1]=c*m+u*_+d*x,s[4]=c*v+u*b+d*w,s[7]=c*g+u*S+d*M,s[2]=h*m+f*_+p*x,s[5]=h*v+f*b+p*w,s[8]=h*g+f*S+p*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-r*s*u+r*o*l+i*s*c-i*a*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,h=o*l-u*s,f=c*s-a*l,p=t*d+r*h+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(i*c-u*r)*m,e[2]=(o*r-i*a)*m,e[3]=h*m,e[4]=(u*t-i*l)*m,e[5]=(i*s-o*t)*m,e[6]=f*m,e[7]=(r*l-c*t)*m,e[8]=(a*t-r*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(D4.makeScale(e,t)),this}rotate(e){return this.premultiply(D4.makeRotation(-e)),this}translate(e,t){return this.premultiply(D4.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const D4=new dr;function xne(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function CM(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function dQe(){const n=CM("canvas");return n.style.display="block",n}const WV={};function Jm(n){n in WV||(WV[n]=!0,console.warn(n))}function fQe(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function hQe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function pQe(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const qV=new dr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),KV=new dr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function mQe(){const n={enabled:!0,workingColorSpace:Ag,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===yi&&(i.r=pd(i.r),i.g=pd(i.g),i.b=pd(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===yi&&(i.r=Uv(i.r),i.g=Uv(i.g),i.b=Uv(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Pf?xM:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[Ag]:{primaries:e,whitePoint:r,transfer:xM,toXYZ:qV,fromXYZ:KV,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:gl},outputColorSpaceConfig:{drawingBufferColorSpace:gl}},[gl]:{primaries:e,whitePoint:r,transfer:yi,toXYZ:qV,fromXYZ:KV,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:gl}}}),n}const ei=mQe();function pd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Uv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Mm;class vQe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Mm===void 0&&(Mm=CM("canvas")),Mm.width=e.width,Mm.height=e.height;const r=Mm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Mm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=CM("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=pd(s[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(pd(t[r]/255)*255):t[r]=pd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let gQe=0;class wne{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:gQe++}),this.uuid=my(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(L4(i[a].image)):s.push(L4(i[a]))}else s=L4(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function L4(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?vQe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yQe=0;class qa extends A0{constructor(e=qa.DEFAULT_IMAGE,t=qa.DEFAULT_MAPPING,r=Dp,i=Dp,s=Xc,a=Lp,o=$a,l=fu,c=qa.DEFAULT_ANISOTROPY,u=Pf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yQe++}),this.uuid=my(),this.name="",this.source=new wne(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Kn(0,0),this.repeat=new Kn(1,1),this.center=new Kn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case SP:e.x=e.x-Math.floor(e.x);break;case Dp:e.x=e.x<0?0:1;break;case xP:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case SP:e.y=e.y-Math.floor(e.y);break;case Dp:e.y=e.y<0?0:1;break;case xP:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}qa.DEFAULT_IMAGE=null;qa.DEFAULT_MAPPING=cne;qa.DEFAULT_ANISOTROPY=1;class Ui{constructor(e=0,t=0,r=0,i=1){Ui.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,S=(f+1)/2,x=(g+1)/2,w=(u+h)/4,M=(d+m)/4,C=(p+v)/4;return b>S&&b>x?b<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(b),i=w/r,s=M/r):S>x?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=w/i,s=C/i):x<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(x),r=M/s,i=C/s),this.set(r,i,s,t),this}let _=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(v-p)/_,this.y=(d-m)/_,this.z=(h-u)/_,this.w=Math.acos((c+f+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Er(this.x,e.x,t.x),this.y=Er(this.y,e.y,t.y),this.z=Er(this.z,e.z,t.z),this.w=Er(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Er(this.x,e,t),this.y=Er(this.y,e,t),this.z=Er(this.z,e,t),this.w=Er(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Er(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bQe extends A0{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ui(0,0,e,t),this.scissorTest=!1,this.viewport=new Ui(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Xc,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new qa(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new wne(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class vh extends bQe{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Cne extends qa{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=jo,this.minFilter=jo,this.wrapR=Dp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _Qe extends qa{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=jo,this.minFilter=jo,this.wrapR=Dp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hi{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,a,o){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[a+0],f=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==h||c!==f||u!==p){let v=1-o;const g=l*h+c*f+u*p+d*m,_=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const x=Math.sqrt(b),w=Math.atan2(x,g*_);v=Math.sin(v*w)/x,o=Math.sin(o*w)/x}const S=o*_;if(l=l*v+h*S,c=c*v+f*S,u=u*v+p*S,d=d*v+m*S,v===1-o){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,a){const o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[a],h=s[a+1],f=s[a+2],p=s[a+3];return e[t]=o*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-o*f,e[t+2]=c*p+u*f+o*h-l*d,e[t+3]=u*p-o*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(i/2),d=o(s/2),h=l(r/2),f=l(i/2),p=l(s/2);switch(a){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+o+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(a-i)*f}else if(r>o&&r>d){const f=2*Math.sqrt(1+r-o-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+a)/f,this._z=(s+c)/f}else if(o>d){const f=2*Math.sqrt(1+o-r-d);this._w=(s-c)/f,this._x=(i+a)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-o);this._w=(a-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Er(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-r*c,this._z=s*u+a*c+r*l-i*o,this._w=a*u-r*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=a*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class it{constructor(e=0,t=0,r=0){it.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(YV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(YV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*r),u=2*(o*t-s*i),d=2*(s*r-a*t);return this.x=t+l*c+a*d-o*u,this.y=r+l*u+o*c-s*d,this.z=i+l*d+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Er(this.x,e.x,t.x),this.y=Er(this.y,e.y,t.y),this.z=Er(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Er(this.x,e,t),this.y=Er(this.y,e,t),this.z=Er(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Er(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return k4.copy(this).projectOnVector(e),this.sub(k4)}reflect(e){return this.sub(k4.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Er(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const k4=new it,YV=new Hi;class jc{constructor(e=new it(1/0,1/0,1/0),t=new it(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Zl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Zl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Zl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Zl):Zl.fromBufferAttribute(s,a),Zl.applyMatrix4(e.matrixWorld),this.expandByPoint(Zl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bw.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),bw.copy(r.boundingBox)),bw.applyMatrix4(e.matrixWorld),this.union(bw)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Zl),Zl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(c1),_w.subVectors(this.max,c1),Tm.subVectors(e.a,c1),Am.subVectors(e.b,c1),Em.subVectors(e.c,c1),uf.subVectors(Am,Tm),df.subVectors(Em,Am),Qh.subVectors(Tm,Em);let t=[0,-uf.z,uf.y,0,-df.z,df.y,0,-Qh.z,Qh.y,uf.z,0,-uf.x,df.z,0,-df.x,Qh.z,0,-Qh.x,-uf.y,uf.x,0,-df.y,df.x,0,-Qh.y,Qh.x,0];return!O4(t,Tm,Am,Em,_w)||(t=[1,0,0,0,1,0,0,0,1],!O4(t,Tm,Am,Em,_w))?!1:(Sw.crossVectors(uf,df),t=[Sw.x,Sw.y,Sw.z],O4(t,Tm,Am,Em,_w))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bu=[new it,new it,new it,new it,new it,new it,new it,new it],Zl=new it,bw=new jc,Tm=new it,Am=new it,Em=new it,uf=new it,df=new it,Qh=new it,c1=new it,_w=new it,Sw=new it,Jh=new it;function O4(n,e,t,r,i){for(let s=0,a=n.length-3;s<=a;s+=3){Jh.fromArray(n,s);const o=i.x*Math.abs(Jh.x)+i.y*Math.abs(Jh.y)+i.z*Math.abs(Jh.z),l=e.dot(Jh),c=t.dot(Jh),u=r.dot(Jh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const SQe=new jc,u1=new it,N4=new it;class i8{constructor(e=new it,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):SQe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;u1.subVectors(e,this.center);const t=u1.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(u1,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(N4.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(u1.copy(e.center).add(N4)),this.expandByPoint(u1.copy(e.center).sub(N4))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fu=new it,B4=new it,xw=new it,ff=new it,F4=new it,ww=new it,z4=new it;let Mne=class{constructor(e=new it,t=new it(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Fu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Fu.copy(this.origin).addScaledVector(this.direction,t),Fu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){B4.copy(e).add(t).multiplyScalar(.5),xw.copy(t).sub(e).normalize(),ff.copy(this.origin).sub(B4);const s=e.distanceTo(t)*.5,a=-this.direction.dot(xw),o=ff.dot(this.direction),l=-ff.dot(xw),c=ff.lengthSq(),u=Math.abs(1-a*a);let d,h,f,p;if(u>0)if(d=a*l-o,h=a*o-l,p=s*u,d>=0)if(h>=-p)if(h<=p){const m=1/u;d*=m,h*=m,f=d*(d+a*h+2*o)+h*(a*d+h+2*l)+c}else h=s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-a*s+o)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(a*s+o)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=a>0?-s:s,d=Math.max(0,-(a*h+o)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(B4).addScaledVector(xw,h),f}intersectSphere(e,t){Fu.subVectors(e.center,this.origin);const r=Fu.dot(this.direction),i=Fu.dot(Fu)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Fu)!==null}intersectTriangle(e,t,r,i,s){F4.subVectors(t,e),ww.subVectors(r,e),z4.crossVectors(F4,ww);let a=this.direction.dot(z4),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ff.subVectors(this.origin,e);const l=o*this.direction.dot(ww.crossVectors(ff,ww));if(l<0)return null;const c=o*this.direction.dot(F4.cross(ff));if(c<0||l+c>a)return null;const u=-o*ff.dot(z4);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class hr{constructor(e,t,r,i,s,a,o,l,c,u,d,h,f,p,m,v){hr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,a,o,l,c,u,d,h,f,p,m,v)}set(e,t,r,i,s,a,o,l,c,u,d,h,f,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hr().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Im.setFromMatrixColumn(e,0).length(),s=1/Im.setFromMatrixColumn(e,1).length(),a=1/Im.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=a*u,f=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-m*c,t[9]=-o*l,t[2]=m-h*c,t[6]=p+f*c,t[10]=a*l}else if(e.order==="YXZ"){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h+m*o,t[4]=p*o-f,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=f*o-p,t[6]=m+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*u,f=l*d,p=c*u,m=c*d;t[0]=h-m*o,t[4]=-a*d,t[8]=p+f*o,t[1]=f+p*o,t[5]=a*u,t[9]=m-h*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*u,f=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=f*c-p,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,f=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-m*d}else if(e.order==="XZY"){const h=a*l,f=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=a*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=o*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xQe,e,wQe)}lookAt(e,t,r){const i=this.elements;return Oo.subVectors(e,t),Oo.lengthSq()===0&&(Oo.z=1),Oo.normalize(),hf.crossVectors(r,Oo),hf.lengthSq()===0&&(Math.abs(r.z)===1?Oo.x+=1e-4:Oo.z+=1e-4,Oo.normalize(),hf.crossVectors(r,Oo)),hf.normalize(),Cw.crossVectors(Oo,hf),i[0]=hf.x,i[4]=Cw.x,i[8]=Oo.x,i[1]=hf.y,i[5]=Cw.y,i[9]=Oo.y,i[2]=hf.z,i[6]=Cw.z,i[10]=Oo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],p=r[2],m=r[6],v=r[10],g=r[14],_=r[3],b=r[7],S=r[11],x=r[15],w=i[0],M=i[4],C=i[8],A=i[12],T=i[1],I=i[5],D=i[9],B=i[13],O=i[2],H=i[6],L=i[10],z=i[14],k=i[3],F=i[7],W=i[11],q=i[15];return s[0]=a*w+o*T+l*O+c*k,s[4]=a*M+o*I+l*H+c*F,s[8]=a*C+o*D+l*L+c*W,s[12]=a*A+o*B+l*z+c*q,s[1]=u*w+d*T+h*O+f*k,s[5]=u*M+d*I+h*H+f*F,s[9]=u*C+d*D+h*L+f*W,s[13]=u*A+d*B+h*z+f*q,s[2]=p*w+m*T+v*O+g*k,s[6]=p*M+m*I+v*H+g*F,s[10]=p*C+m*D+v*L+g*W,s[14]=p*A+m*B+v*z+g*q,s[3]=_*w+b*T+S*O+x*k,s[7]=_*M+b*I+S*H+x*F,s[11]=_*C+b*D+S*L+x*W,s[15]=_*A+b*B+S*z+x*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+s*l*d-i*c*d-s*o*h+r*c*h+i*o*f-r*l*f)+m*(+t*l*f-t*c*h+s*a*h-i*a*f+i*c*u-s*l*u)+v*(+t*c*d-t*o*f-s*a*d+r*a*f+s*o*u-r*c*u)+g*(-i*o*u-t*l*d+t*o*h+i*a*d-r*a*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=d*v*c-m*h*c+m*l*f-o*v*f-d*l*g+o*h*g,b=p*h*c-u*v*c-p*l*f+a*v*f+u*l*g-a*h*g,S=u*m*c-p*d*c+p*o*f-a*m*f-u*o*g+a*d*g,x=p*d*l-u*m*l-p*o*h+a*m*h+u*o*v-a*d*v,w=t*_+r*b+i*S+s*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return e[0]=_*M,e[1]=(m*h*s-d*v*s-m*i*f+r*v*f+d*i*g-r*h*g)*M,e[2]=(o*v*s-m*l*s+m*i*c-r*v*c-o*i*g+r*l*g)*M,e[3]=(d*l*s-o*h*s-d*i*c+r*h*c+o*i*f-r*l*f)*M,e[4]=b*M,e[5]=(u*v*s-p*h*s+p*i*f-t*v*f-u*i*g+t*h*g)*M,e[6]=(p*l*s-a*v*s-p*i*c+t*v*c+a*i*g-t*l*g)*M,e[7]=(a*h*s-u*l*s+u*i*c-t*h*c-a*i*f+t*l*f)*M,e[8]=S*M,e[9]=(p*d*s-u*m*s-p*r*f+t*m*f+u*r*g-t*d*g)*M,e[10]=(a*m*s-p*o*s+p*r*c-t*m*c-a*r*g+t*o*g)*M,e[11]=(u*o*s-a*d*s-u*r*c+t*d*c+a*r*f-t*o*f)*M,e[12]=x*M,e[13]=(u*m*i-p*d*i+p*r*h-t*m*h-u*r*v+t*d*v)*M,e[14]=(p*o*i-a*m*i-p*r*l+t*m*l+a*r*v-t*o*v)*M,e[15]=(a*d*i-u*o*i+u*r*l-t*d*l-a*r*h+t*o*h)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+r,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,h=s*c,f=s*u,p=s*d,m=a*u,v=a*d,g=o*d,_=l*c,b=l*u,S=l*d,x=r.x,w=r.y,M=r.z;return i[0]=(1-(m+g))*x,i[1]=(f+S)*x,i[2]=(p-b)*x,i[3]=0,i[4]=(f-S)*w,i[5]=(1-(h+g))*w,i[6]=(v+_)*w,i[7]=0,i[8]=(p+b)*M,i[9]=(v-_)*M,i[10]=(1-(h+m))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Im.set(i[0],i[1],i[2]).length();const a=Im.set(i[4],i[5],i[6]).length(),o=Im.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ql.copy(this);const c=1/s,u=1/a,d=1/o;return Ql.elements[0]*=c,Ql.elements[1]*=c,Ql.elements[2]*=c,Ql.elements[4]*=u,Ql.elements[5]*=u,Ql.elements[6]*=u,Ql.elements[8]*=d,Ql.elements[9]*=d,Ql.elements[10]*=d,t.setFromRotationMatrix(Ql),r.x=s,r.y=a,r.z=o,this}makePerspective(e,t,r,i,s,a,o=ad){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),d=(t+e)/(t-e),h=(r+i)/(r-i);let f,p;if(o===ad)f=-(a+s)/(a-s),p=-2*a*s/(a-s);else if(o===wM)f=-a/(a-s),p=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,a,o=ad){const l=this.elements,c=1/(t-e),u=1/(r-i),d=1/(a-s),h=(t+e)*c,f=(r+i)*u;let p,m;if(o===ad)p=(a+s)*d,m=-2*d;else if(o===wM)p=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=m,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Im=new it,Ql=new hr,xQe=new it(0,0,0),wQe=new it(1,1,1),hf=new it,Cw=new it,Oo=new it,XV=new hr,jV=new Hi;class Ed{constructor(e=0,t=0,r=0,i=Ed.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Er(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Er(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Er(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Er(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Er(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Er(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return XV.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XV,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jV.setFromEuler(this),this.setFromQuaternion(jV,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ed.DEFAULT_ORDER="XYZ";class Tne{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let CQe=0;const ZV=new it,Rm=new Hi,zu=new hr,Mw=new it,d1=new it,MQe=new it,TQe=new Hi,QV=new it(1,0,0),JV=new it(0,1,0),e$=new it(0,0,1),t$={type:"added"},AQe={type:"removed"},Pm={type:"childadded",child:null},U4={type:"childremoved",child:null};class Ls extends A0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:CQe++}),this.uuid=my(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ls.DEFAULT_UP.clone();const e=new it,t=new Ed,r=new Hi,i=new it(1,1,1);function s(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new hr},normalMatrix:{value:new dr}}),this.matrix=new hr,this.matrixWorld=new hr,this.matrixAutoUpdate=Ls.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ls.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Tne,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Rm.setFromAxisAngle(e,t),this.quaternion.multiply(Rm),this}rotateOnWorldAxis(e,t){return Rm.setFromAxisAngle(e,t),this.quaternion.premultiply(Rm),this}rotateX(e){return this.rotateOnAxis(QV,e)}rotateY(e){return this.rotateOnAxis(JV,e)}rotateZ(e){return this.rotateOnAxis(e$,e)}translateOnAxis(e,t){return ZV.copy(e).applyQuaternion(this.quaternion),this.position.add(ZV.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(QV,e)}translateY(e){return this.translateOnAxis(JV,e)}translateZ(e){return this.translateOnAxis(e$,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Mw.copy(e):Mw.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),d1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zu.lookAt(d1,Mw,this.up):zu.lookAt(Mw,d1,this.up),this.quaternion.setFromRotationMatrix(zu),i&&(zu.extractRotation(i.matrixWorld),Rm.setFromRotationMatrix(zu),this.quaternion.premultiply(Rm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(t$),Pm.child=e,this.dispatchEvent(Pm),Pm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(AQe),U4.child=e,this.dispatchEvent(U4),U4.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zu.multiply(e.parent.matrixWorld)),e.applyMatrix4(zu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(t$),Pm.child=e,this.dispatchEvent(Pm),Pm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(d1,e,MQe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(d1,TQe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),h=a(e.skeletons),f=a(e.animations),p=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Ls.DEFAULT_UP=new it(0,1,0);Ls.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ls.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jl=new it,Uu=new it,H4=new it,Hu=new it,Dm=new it,Lm=new it,n$=new it,V4=new it,$4=new it,G4=new it,W4=new Ui,q4=new Ui,K4=new Ui;class sc{constructor(e=new it,t=new it,r=new it){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Jl.subVectors(e,t),i.cross(Jl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Jl.subVectors(i,t),Uu.subVectors(r,t),H4.subVectors(e,t);const a=Jl.dot(Jl),o=Jl.dot(Uu),l=Jl.dot(H4),c=Uu.dot(Uu),u=Uu.dot(H4),d=a*c-o*o;if(d===0)return s.set(0,0,0),null;const h=1/d,f=(c*l-o*u)*h,p=(a*u-o*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Hu)===null?!1:Hu.x>=0&&Hu.y>=0&&Hu.x+Hu.y<=1}static getInterpolation(e,t,r,i,s,a,o,l){return this.getBarycoord(e,t,r,i,Hu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Hu.x),l.addScaledVector(a,Hu.y),l.addScaledVector(o,Hu.z),l)}static getInterpolatedAttribute(e,t,r,i,s,a){return W4.setScalar(0),q4.setScalar(0),K4.setScalar(0),W4.fromBufferAttribute(e,t),q4.fromBufferAttribute(e,r),K4.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(W4,s.x),a.addScaledVector(q4,s.y),a.addScaledVector(K4,s.z),a}static isFrontFacing(e,t,r,i){return Jl.subVectors(r,t),Uu.subVectors(e,t),Jl.cross(Uu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jl.subVectors(this.c,this.b),Uu.subVectors(this.a,this.b),Jl.cross(Uu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return sc.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return sc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let a,o;Dm.subVectors(i,r),Lm.subVectors(s,r),V4.subVectors(e,r);const l=Dm.dot(V4),c=Lm.dot(V4);if(l<=0&&c<=0)return t.copy(r);$4.subVectors(e,i);const u=Dm.dot($4),d=Lm.dot($4);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(r).addScaledVector(Dm,a);G4.subVectors(e,s);const f=Dm.dot(G4),p=Lm.dot(G4);if(p>=0&&f<=p)return t.copy(s);const m=f*c-l*p;if(m<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(r).addScaledVector(Lm,o);const v=u*p-f*d;if(v<=0&&d-u>=0&&f-p>=0)return n$.subVectors(s,i),o=(d-u)/(d-u+(f-p)),t.copy(i).addScaledVector(n$,o);const g=1/(v+m+h);return a=m*g,o=h*g,t.copy(r).addScaledVector(Dm,a).addScaledVector(Lm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ane={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pf={h:0,s:0,l:0},Tw={h:0,s:0,l:0};function Y4(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ti{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=gl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ei.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=ei.workingColorSpace){return this.r=e,this.g=t,this.b=r,ei.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=ei.workingColorSpace){if(e=r8(e,1),t=Er(t,0,1),r=Er(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,a=2*r-s;this.r=Y4(a,s,e+1/3),this.g=Y4(a,s,e),this.b=Y4(a,s,e-1/3)}return ei.toWorkingColorSpace(this,i),this}setStyle(e,t=gl){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=gl){const r=Ane[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pd(e.r),this.g=pd(e.g),this.b=pd(e.b),this}copyLinearToSRGB(e){return this.r=Uv(e.r),this.g=Uv(e.g),this.b=Uv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=gl){return ei.fromWorkingColorSpace(pa.copy(this),e),Math.round(Er(pa.r*255,0,255))*65536+Math.round(Er(pa.g*255,0,255))*256+Math.round(Er(pa.b*255,0,255))}getHexString(e=gl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ei.workingColorSpace){ei.fromWorkingColorSpace(pa.copy(this),t);const r=pa.r,i=pa.g,s=pa.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=ei.workingColorSpace){return ei.fromWorkingColorSpace(pa.copy(this),t),e.r=pa.r,e.g=pa.g,e.b=pa.b,e}getStyle(e=gl){ei.fromWorkingColorSpace(pa.copy(this),e);const t=pa.r,r=pa.g,i=pa.b;return e!==gl?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(pf),this.setHSL(pf.h+e,pf.s+t,pf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(pf),e.getHSL(Tw);const r=ub(pf.h,Tw.h,t),i=ub(pf.s,Tw.s,t),s=ub(pf.l,Tw.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pa=new ti;ti.NAMES=Ane;let EQe=0;class XT extends A0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:EQe++}),this.uuid=my(),this.name="",this.type="Material",this.blending=Xf,this.side=du,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=M_,this.blendDst=T_,this.blendEquation=gp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ti(0,0,0),this.blendAlpha=0,this.depthFunc=xg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=HV,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cm,this.stencilZFail=Cm,this.stencilZPass=Cm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Xf&&(r.blending=this.blending),this.side!==du&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==M_&&(r.blendSrc=this.blendSrc),this.blendDst!==T_&&(r.blendDst=this.blendDst),this.blendEquation!==gp&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==xg&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==HV&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cm&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Cm&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Cm&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class h0 extends XT{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ti(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ed,this.combine=lne,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ed=IQe();function IQe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function RQe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Er(n,-65504,65504),ed.floatView[0]=n;const e=ed.uint32View[0],t=e>>23&511;return ed.baseTable[t]+((e&8388607)>>ed.shiftTable[t])}function PQe(n){const e=n>>10;return ed.uint32View[0]=ed.mantissaTable[ed.offsetTable[e]+(n&1023)]+ed.exponentTable[e],ed.floatView[0]}const I_={toHalfFloat:RQe,fromHalfFloat:PQe},Ss=new it,Aw=new Kn;class Ol{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=VV,this.updateRanges=[],this.gpuType=lc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Aw.fromBufferAttribute(this,t),Aw.applyMatrix3(e),this.setXY(t,Aw.x,Aw.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ss.fromBufferAttribute(this,t),Ss.applyMatrix3(e),this.setXYZ(t,Ss.x,Ss.y,Ss.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ss.fromBufferAttribute(this,t),Ss.applyMatrix4(e),this.setXYZ(t,Ss.x,Ss.y,Ss.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ss.fromBufferAttribute(this,t),Ss.applyNormalMatrix(e),this.setXYZ(t,Ss.x,Ss.y,Ss.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ss.fromBufferAttribute(this,t),Ss.transformDirection(e),this.setXYZ(t,Ss.x,Ss.y,Ss.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Qm(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ka(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qm(t,this.array)),t}setX(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qm(t,this.array)),t}setY(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qm(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qm(t,this.array)),t}setW(e,t){return this.normalized&&(t=ka(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),r=ka(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),r=ka(r,this.array),i=ka(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ka(t,this.array),r=ka(r,this.array),i=ka(i,this.array),s=ka(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==VV&&(e.usage=this.usage),e}}class Ene extends Ol{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Ine extends Ol{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Zo extends Ol{constructor(e,t,r){super(new Float32Array(e),t,r)}}let DQe=0;const ll=new hr,X4=new Ls,km=new it,No=new jc,f1=new jc,Hs=new it;class $l extends A0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:DQe++}),this.uuid=my(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xne(e)?Ine:Ene)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new dr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ll.makeRotationFromQuaternion(e),this.applyMatrix4(ll),this}rotateX(e){return ll.makeRotationX(e),this.applyMatrix4(ll),this}rotateY(e){return ll.makeRotationY(e),this.applyMatrix4(ll),this}rotateZ(e){return ll.makeRotationZ(e),this.applyMatrix4(ll),this}translate(e,t,r){return ll.makeTranslation(e,t,r),this.applyMatrix4(ll),this}scale(e,t,r){return ll.makeScale(e,t,r),this.applyMatrix4(ll),this}lookAt(e){return X4.lookAt(e),X4.updateMatrix(),this.applyMatrix4(X4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(km).negate(),this.translate(km.x,km.y,km.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Zo(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new jc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new it(-1/0,-1/0,-1/0),new it(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];No.setFromBufferAttribute(s),this.morphTargetsRelative?(Hs.addVectors(this.boundingBox.min,No.min),this.boundingBox.expandByPoint(Hs),Hs.addVectors(this.boundingBox.max,No.max),this.boundingBox.expandByPoint(Hs)):(this.boundingBox.expandByPoint(No.min),this.boundingBox.expandByPoint(No.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new i8);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new it,1/0);return}if(e){const r=this.boundingSphere.center;if(No.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];f1.setFromBufferAttribute(o),this.morphTargetsRelative?(Hs.addVectors(No.min,f1.min),No.expandByPoint(Hs),Hs.addVectors(No.max,f1.max),No.expandByPoint(Hs)):(No.expandByPoint(f1.min),No.expandByPoint(f1.max))}No.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)Hs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Hs));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Hs.fromBufferAttribute(o,c),l&&(km.fromBufferAttribute(e,c),Hs.add(km)),i=Math.max(i,r.distanceToSquared(Hs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ol(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let C=0;C<r.count;C++)o[C]=new it,l[C]=new it;const c=new it,u=new it,d=new it,h=new Kn,f=new Kn,p=new Kn,m=new it,v=new it;function g(C,A,T){c.fromBufferAttribute(r,C),u.fromBufferAttribute(r,A),d.fromBufferAttribute(r,T),h.fromBufferAttribute(s,C),f.fromBufferAttribute(s,A),p.fromBufferAttribute(s,T),u.sub(c),d.sub(c),f.sub(h),p.sub(h);const I=1/(f.x*p.y-p.x*f.y);isFinite(I)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(I),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(I),o[C].add(m),o[A].add(m),o[T].add(m),l[C].add(v),l[A].add(v),l[T].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let C=0,A=_.length;C<A;++C){const T=_[C],I=T.start,D=T.count;for(let B=I,O=I+D;B<O;B+=3)g(e.getX(B+0),e.getX(B+1),e.getX(B+2))}const b=new it,S=new it,x=new it,w=new it;function M(C){x.fromBufferAttribute(i,C),w.copy(x);const A=o[C];b.copy(A),b.sub(x.multiplyScalar(x.dot(A))).normalize(),S.crossVectors(w,A);const I=S.dot(l[C])<0?-1:1;a.setXYZW(C,b.x,b.y,b.z,I)}for(let C=0,A=_.length;C<A;++C){const T=_[C],I=T.start,D=T.count;for(let B=I,O=I+D;B<O;B+=3)M(e.getX(B+0)),M(e.getX(B+1)),M(e.getX(B+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ol(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new it,s=new it,a=new it,o=new it,l=new it,c=new it,u=new it,d=new it;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),c.fromBufferAttribute(r,v),o.add(u),l.add(u),c.add(u),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Hs.fromBufferAttribute(e,t),Hs.normalize(),e.setXYZ(t,Hs.x,Hs.y,Hs.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?f=l[m]*o.data.stride+o.offset:f=l[m]*u;for(let g=0;g<u;g++)h[p++]=c[f++]}return new Ol(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $l,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const h=c[u],f=e(h,r);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const r$=new hr,ep=new Mne,Ew=new i8,i$=new it,Iw=new it,Rw=new it,Pw=new it,j4=new it,Dw=new it,s$=new it,Lw=new it;class ds extends Ls{constructor(e=new $l,t=new h0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){Dw.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],d=s[l];u!==0&&(j4.fromBufferAttribute(d,e),a?Dw.addScaledVector(j4,u):Dw.addScaledVector(j4.sub(t),u))}t.add(Dw)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Ew.copy(r.boundingSphere),Ew.applyMatrix4(s),ep.copy(e.ray).recast(e.near),!(Ew.containsPoint(ep.origin)===!1&&(ep.intersectSphere(Ew,i$)===null||ep.origin.distanceToSquared(i$)>(e.far-e.near)**2))&&(r$.copy(s).invert(),ep.copy(e.ray).applyMatrix4(r$),!(r.boundingBox!==null&&ep.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,ep)))}_computeIntersections(e,t,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(o!==null)if(Array.isArray(a))for(let p=0,m=h.length;p<m;p++){const v=h[p],g=a[v.materialIndex],_=Math.max(v.start,f.start),b=Math.min(o.count,Math.min(v.start+v.count,f.start+f.count));for(let S=_,x=b;S<x;S+=3){const w=o.getX(S),M=o.getX(S+1),C=o.getX(S+2);i=kw(this,g,e,r,c,u,d,w,M,C),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=v.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),m=Math.min(o.count,f.start+f.count);for(let v=p,g=m;v<g;v+=3){const _=o.getX(v),b=o.getX(v+1),S=o.getX(v+2);i=kw(this,a,e,r,c,u,d,_,b,S),i&&(i.faceIndex=Math.floor(v/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let p=0,m=h.length;p<m;p++){const v=h[p],g=a[v.materialIndex],_=Math.max(v.start,f.start),b=Math.min(l.count,Math.min(v.start+v.count,f.start+f.count));for(let S=_,x=b;S<x;S+=3){const w=S,M=S+1,C=S+2;i=kw(this,g,e,r,c,u,d,w,M,C),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=v.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),m=Math.min(l.count,f.start+f.count);for(let v=p,g=m;v<g;v+=3){const _=v,b=v+1,S=v+2;i=kw(this,a,e,r,c,u,d,_,b,S),i&&(i.faceIndex=Math.floor(v/3),t.push(i))}}}}function LQe(n,e,t,r,i,s,a,o){let l;if(e.side===xo?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===du,o),l===null)return null;Lw.copy(o),Lw.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Lw);return c<t.near||c>t.far?null:{distance:c,point:Lw.clone(),object:n}}function kw(n,e,t,r,i,s,a,o,l,c){n.getVertexPosition(o,Iw),n.getVertexPosition(l,Rw),n.getVertexPosition(c,Pw);const u=LQe(n,e,t,r,Iw,Rw,Pw,s$);if(u){const d=new it;sc.getBarycoord(s$,Iw,Rw,Pw,d),i&&(u.uv=sc.getInterpolatedAttribute(i,o,l,c,d,new Kn)),s&&(u.uv1=sc.getInterpolatedAttribute(s,o,l,c,d,new Kn)),a&&(u.normal=sc.getInterpolatedAttribute(a,o,l,c,d,new it),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new it,materialIndex:0};sc.getNormal(Iw,Rw,Pw,h.normal),u.face=h,u.barycoord=d}return u}class vy extends $l{constructor(e=1,t=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let h=0,f=0;p("z","y","x",-1,-1,r,t,e,a,s,0),p("z","y","x",1,-1,r,t,-e,a,s,1),p("x","z","y",1,1,e,r,t,i,a,2),p("x","z","y",1,-1,e,r,-t,i,a,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Zo(c,3)),this.setAttribute("normal",new Zo(u,3)),this.setAttribute("uv",new Zo(d,2));function p(m,v,g,_,b,S,x,w,M,C,A){const T=S/M,I=x/C,D=S/2,B=x/2,O=w/2,H=M+1,L=C+1;let z=0,k=0;const F=new it;for(let W=0;W<L;W++){const q=W*I-B;for(let Z=0;Z<H;Z++){const se=Z*T-D;F[m]=se*_,F[v]=q*b,F[g]=O,c.push(F.x,F.y,F.z),F[m]=0,F[v]=0,F[g]=w>0?1:-1,u.push(F.x,F.y,F.z),d.push(Z/M),d.push(1-W/C),z+=1}}for(let W=0;W<C;W++)for(let q=0;q<M;q++){const Z=h+q+H*W,se=h+q+H*(W+1),X=h+(q+1)+H*(W+1),ie=h+(q+1)+H*W;l.push(Z,se,ie),l.push(se,X,ie),k+=6}o.addGroup(f,k,A),f+=k,h+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Eg(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Oa(n){const e={};for(let t=0;t<n.length;t++){const r=Eg(n[t]);for(const i in r)e[i]=r[i]}return e}function kQe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Rne(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ei.workingColorSpace}const OQe={clone:Eg,merge:Oa};var NQe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,BQe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qo extends XT{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=NQe,this.fragmentShader=BQe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Eg(e.uniforms),this.uniformsGroups=kQe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Pne extends Ls{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hr,this.projectionMatrix=new hr,this.projectionMatrixInverse=new hr,this.coordinateSystem=ad}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const mf=new it,a$=new Kn,o$=new Kn;class xl extends Pne{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=E_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(cb*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return E_*2*Math.atan(Math.tan(cb*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){mf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(mf.x,mf.y).multiplyScalar(-e/mf.z),mf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(mf.x,mf.y).multiplyScalar(-e/mf.z)}getViewSize(e,t){return this.getViewBounds(e,a$,o$),t.subVectors(o$,a$)}setViewOffset(e,t,r,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(cb*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Om=-90,Nm=1;class FQe extends Ls{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new xl(Om,Nm,e,t);i.layers=this.layers,this.add(i);const s=new xl(Om,Nm,e,t);s.layers=this.layers,this.add(s);const a=new xl(Om,Nm,e,t);a.layers=this.layers,this.add(a);const o=new xl(Om,Nm,e,t);o.layers=this.layers,this.add(o);const l=new xl(Om,Nm,e,t);l.layers=this.layers,this.add(l);const c=new xl(Om,Nm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===ad)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===wM)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,a),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=m,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Dne extends qa{constructor(e,t,r,i,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:wg,super(e,t,r,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zQe extends vh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Dne(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Xc}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new vy(5,5,5),s=new Qo({name:"CubemapFromEquirect",uniforms:Eg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:xo,blending:Yf});s.uniforms.tEquirect.value=t;const a=new ds(i,s),o=t.minFilter;return t.minFilter===Lp&&(t.minFilter=Xc),new FQe(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(s)}}class UQe extends Ls{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ed,this.environmentIntensity=1,this.environmentRotation=new Ed,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class vf extends qa{constructor(e=null,t=1,r=1,i,s,a,o,l,c=jo,u=jo,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class HQe extends Ol{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Z4=new it,VQe=new it,$Qe=new dr;class Af{constructor(e=new it(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Z4.subVectors(r,t).cross(VQe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Z4),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||$Qe.getNormalMatrix(e),i=this.coplanarPoint(Z4).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const tp=new i8,Ow=new it;class Lne{constructor(e=new Af,t=new Af,r=new Af,i=new Af,s=new Af,a=new Af){this.planes=[e,t,r,i,s,a]}set(e,t,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ad){const r=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],m=i[10],v=i[11],g=i[12],_=i[13],b=i[14],S=i[15];if(r[0].setComponents(l-s,h-c,v-f,S-g).normalize(),r[1].setComponents(l+s,h+c,v+f,S+g).normalize(),r[2].setComponents(l+a,h+u,v+p,S+_).normalize(),r[3].setComponents(l-a,h-u,v-p,S-_).normalize(),r[4].setComponents(l-o,h-d,v-m,S-b).normalize(),t===ad)r[5].setComponents(l+o,h+d,v+m,S+b).normalize();else if(t===wM)r[5].setComponents(o,d,m,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),tp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),tp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(tp)}intersectsSprite(e){return tp.center.set(0,0,0),tp.radius=.7071067811865476,tp.applyMatrix4(e.matrixWorld),this.intersectsSphere(tp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Ow.x=i.normal.x>0?e.max.x:e.min.x,Ow.y=i.normal.y>0?e.max.y:e.min.y,Ow.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ow)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Nw extends Ls{constructor(){super(),this.isGroup=!0,this.type="Group"}}class s8 extends qa{constructor(e,t,r,i,s,a,o,l,c,u=qp){if(u!==qp&&u!==Tg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===qp&&(r=Il),r===void 0&&u===Tg&&(r=Mg),super(null,i,s,a,o,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:jo,this.minFilter=l!==void 0?l:jo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class R_ extends $l{constructor(e=1,t=1,r=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],h=[],f=[];let p=0;const m=[],v=r/2;let g=0;_(),a===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new Zo(d,3)),this.setAttribute("normal",new Zo(h,3)),this.setAttribute("uv",new Zo(f,2));function _(){const S=new it,x=new it;let w=0;const M=(t-e)/r;for(let C=0;C<=s;C++){const A=[],T=C/s,I=T*(t-e)+e;for(let D=0;D<=i;D++){const B=D/i,O=B*l+o,H=Math.sin(O),L=Math.cos(O);x.x=I*H,x.y=-T*r+v,x.z=I*L,d.push(x.x,x.y,x.z),S.set(H,M,L).normalize(),h.push(S.x,S.y,S.z),f.push(B,1-T),A.push(p++)}m.push(A)}for(let C=0;C<i;C++)for(let A=0;A<s;A++){const T=m[A][C],I=m[A+1][C],D=m[A+1][C+1],B=m[A][C+1];(e>0||A!==0)&&(u.push(T,I,B),w+=3),(t>0||A!==s-1)&&(u.push(I,D,B),w+=3)}c.addGroup(g,w,0),g+=w}function b(S){const x=p,w=new Kn,M=new it;let C=0;const A=S===!0?e:t,T=S===!0?1:-1;for(let D=1;D<=i;D++)d.push(0,v*T,0),h.push(0,T,0),f.push(.5,.5),p++;const I=p;for(let D=0;D<=i;D++){const O=D/i*l+o,H=Math.cos(O),L=Math.sin(O);M.x=A*L,M.y=v*T,M.z=A*H,d.push(M.x,M.y,M.z),h.push(0,T,0),w.x=H*.5+.5,w.y=L*.5*T+.5,f.push(w.x,w.y),p++}for(let D=0;D<i;D++){const B=x+D,O=I+D;S===!0?u.push(O,O+1,B):u.push(O+1,O,B),C+=3}c.addGroup(g,C,S===!0?1:2),g+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class a8 extends R_{constructor(e=1,t=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new a8(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ig extends $l{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(r),l=Math.floor(i),c=o+1,u=l+1,d=e/o,h=t/l,f=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const _=g*h-a;for(let b=0;b<c;b++){const S=b*d-s;p.push(S,-_,0),m.push(0,0,1),v.push(b/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<o;_++){const b=_+c*g,S=_+c*(g+1),x=_+1+c*(g+1),w=_+1+c*g;f.push(b,S,w),f.push(S,x,w)}this.setIndex(f),this.setAttribute("position",new Zo(p,3)),this.setAttribute("normal",new Zo(m,3)),this.setAttribute("uv",new Zo(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ig(e.width,e.height,e.widthSegments,e.heightSegments)}}class MM extends $l{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new it,h=new it,f=[],p=[],m=[],v=[];for(let g=0;g<=r;g++){const _=[],b=g/r;let S=0;g===0&&a===0?S=.5/t:g===r&&l===Math.PI&&(S=-.5/t);for(let x=0;x<=t;x++){const w=x/t;d.x=-e*Math.cos(i+w*s)*Math.sin(a+b*o),d.y=e*Math.cos(a+b*o),d.z=e*Math.sin(i+w*s)*Math.sin(a+b*o),p.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),v.push(w+S,1-b),_.push(c++)}u.push(_)}for(let g=0;g<r;g++)for(let _=0;_<t;_++){const b=u[g][_+1],S=u[g][_],x=u[g+1][_],w=u[g+1][_+1];(g!==0||a>0)&&f.push(b,S,w),(g!==r-1||l<Math.PI)&&f.push(S,x,w)}this.setIndex(f),this.setAttribute("position",new Zo(p,3)),this.setAttribute("normal",new Zo(m,3)),this.setAttribute("uv",new Zo(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MM(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class GQe extends XT{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BZe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WQe extends XT{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class o8 extends Pne{constructor(e=-1,t=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class qQe extends $l{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class KQe extends xl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class l${constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Er(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Er(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function c$(n,e,t,r){const i=YQe(r);switch(t){case hne:return n*e;case mne:return n*e;case vne:return n*e*2;case gne:return n*e/i.components*i.byteLength;case YT:return n*e/i.components*i.byteLength;case yne:return n*e*2/i.components*i.byteLength;case n8:return n*e*2/i.components*i.byteLength;case pne:return n*e*3/i.components*i.byteLength;case $a:return n*e*4/i.components*i.byteLength;case zv:return n*e*4/i.components*i.byteLength;case F2:case z2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case U2:case H2:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case CP:case TP:return Math.max(n,16)*Math.max(e,8)/4;case wP:case MP:return Math.max(n,8)*Math.max(e,8)/2;case AP:case EP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case IP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case RP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case PP:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case DP:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case LP:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case kP:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case OP:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case NP:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case BP:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case FP:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case zP:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case UP:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case HP:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case VP:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case $P:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case V2:case GP:case WP:return Math.ceil(n/4)*Math.ceil(e/4)*16;case bne:case qP:return Math.ceil(n/4)*Math.ceil(e/4)*8;case KP:case YP:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function YQe(n){switch(n){case fu:case une:return{byteLength:1,components:1};case A_:case dne:case py:return{byteLength:2,components:1};case e8:case t8:return{byteLength:2,components:4};case Il:case Jk:case lc:return{byteLength:4,components:1};case fne:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Qk}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Qk);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function kne(){let n=null,e=!1,t=null,r=null;function i(s,a){t(s,a),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function XQe(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,d=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,u),o.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function r(o,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,o),d.length===0)n.bufferSubData(c,0,u);else{d.sort((f,p)=>f.start-p.start);let h=0;for(let f=1;f<d.length;f++){const p=d[h],m=d[f];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++h,d[h]=m)}d.length=h+1;for(let f=0,p=d.length;f<p;f++){const m=d[f];n.bufferSubData(c,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}var jQe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ZQe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,QQe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,JQe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,eJe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,tJe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,nJe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rJe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,iJe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,sJe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,aJe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,oJe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lJe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,cJe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,uJe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dJe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,fJe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,hJe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,pJe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mJe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vJe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,gJe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,yJe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,bJe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,_Je=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,SJe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xJe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wJe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,CJe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,MJe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,TJe="gl_FragColor = linearToOutputTexel( gl_FragColor );",AJe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,EJe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,IJe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,RJe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,PJe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,DJe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,LJe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kJe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,OJe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,NJe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,BJe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,FJe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zJe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,UJe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,HJe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,VJe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,$Je=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,GJe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,WJe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qJe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,KJe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,YJe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XJe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jJe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ZJe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,QJe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,JJe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eet=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tet=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,net=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ret=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,iet=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,set=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aet=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,oet=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cet=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,uet=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,det=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fet=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,het=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pet=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,met=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,vet=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,get=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yet=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,bet=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_et=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,xet=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,wet=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Cet=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Met=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Tet=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Aet=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Eet=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Iet=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Ret=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pet=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Det=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Let=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ket=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Oet=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Net=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Bet=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Fet=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,zet=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Uet=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Het=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vet=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,$et=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Get=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Wet=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,qet=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ket=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Yet=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Xet=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jet=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Zet=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Qet=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jet=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ett=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ttt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ntt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rtt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,itt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,stt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,att=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ott=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ltt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ctt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,utt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dtt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ftt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,htt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ptt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mtt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vtt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gtt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ytt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,btt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_tt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Stt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,xtt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wtt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ctt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mtt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ttt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Att=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ett=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Itt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rtt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tr={alphahash_fragment:jQe,alphahash_pars_fragment:ZQe,alphamap_fragment:QQe,alphamap_pars_fragment:JQe,alphatest_fragment:eJe,alphatest_pars_fragment:tJe,aomap_fragment:nJe,aomap_pars_fragment:rJe,batching_pars_vertex:iJe,batching_vertex:sJe,begin_vertex:aJe,beginnormal_vertex:oJe,bsdfs:lJe,iridescence_fragment:cJe,bumpmap_pars_fragment:uJe,clipping_planes_fragment:dJe,clipping_planes_pars_fragment:fJe,clipping_planes_pars_vertex:hJe,clipping_planes_vertex:pJe,color_fragment:mJe,color_pars_fragment:vJe,color_pars_vertex:gJe,color_vertex:yJe,common:bJe,cube_uv_reflection_fragment:_Je,defaultnormal_vertex:SJe,displacementmap_pars_vertex:xJe,displacementmap_vertex:wJe,emissivemap_fragment:CJe,emissivemap_pars_fragment:MJe,colorspace_fragment:TJe,colorspace_pars_fragment:AJe,envmap_fragment:EJe,envmap_common_pars_fragment:IJe,envmap_pars_fragment:RJe,envmap_pars_vertex:PJe,envmap_physical_pars_fragment:VJe,envmap_vertex:DJe,fog_vertex:LJe,fog_pars_vertex:kJe,fog_fragment:OJe,fog_pars_fragment:NJe,gradientmap_pars_fragment:BJe,lightmap_pars_fragment:FJe,lights_lambert_fragment:zJe,lights_lambert_pars_fragment:UJe,lights_pars_begin:HJe,lights_toon_fragment:$Je,lights_toon_pars_fragment:GJe,lights_phong_fragment:WJe,lights_phong_pars_fragment:qJe,lights_physical_fragment:KJe,lights_physical_pars_fragment:YJe,lights_fragment_begin:XJe,lights_fragment_maps:jJe,lights_fragment_end:ZJe,logdepthbuf_fragment:QJe,logdepthbuf_pars_fragment:JJe,logdepthbuf_pars_vertex:eet,logdepthbuf_vertex:tet,map_fragment:net,map_pars_fragment:ret,map_particle_fragment:iet,map_particle_pars_fragment:set,metalnessmap_fragment:aet,metalnessmap_pars_fragment:oet,morphinstance_vertex:cet,morphcolor_vertex:uet,morphnormal_vertex:det,morphtarget_pars_vertex:fet,morphtarget_vertex:het,normal_fragment_begin:pet,normal_fragment_maps:met,normal_pars_fragment:vet,normal_pars_vertex:get,normal_vertex:yet,normalmap_pars_fragment:bet,clearcoat_normal_fragment_begin:_et,clearcoat_normal_fragment_maps:xet,clearcoat_pars_fragment:wet,iridescence_pars_fragment:Cet,opaque_fragment:Met,packing:Tet,premultiplied_alpha_fragment:Aet,project_vertex:Eet,dithering_fragment:Iet,dithering_pars_fragment:Ret,roughnessmap_fragment:Pet,roughnessmap_pars_fragment:Det,shadowmap_pars_fragment:Let,shadowmap_pars_vertex:ket,shadowmap_vertex:Oet,shadowmask_pars_fragment:Net,skinbase_vertex:Bet,skinning_pars_vertex:Fet,skinning_vertex:zet,skinnormal_vertex:Uet,specularmap_fragment:Het,specularmap_pars_fragment:Vet,tonemapping_fragment:$et,tonemapping_pars_fragment:Get,transmission_fragment:Wet,transmission_pars_fragment:qet,uv_pars_fragment:Ket,uv_pars_vertex:Yet,uv_vertex:Xet,worldpos_vertex:jet,background_vert:Zet,background_frag:Qet,backgroundCube_vert:Jet,backgroundCube_frag:ett,cube_vert:ttt,cube_frag:ntt,depth_vert:rtt,depth_frag:itt,distanceRGBA_vert:stt,distanceRGBA_frag:att,equirect_vert:ott,equirect_frag:ltt,linedashed_vert:ctt,linedashed_frag:utt,meshbasic_vert:dtt,meshbasic_frag:ftt,meshlambert_vert:htt,meshlambert_frag:ptt,meshmatcap_vert:mtt,meshmatcap_frag:vtt,meshnormal_vert:gtt,meshnormal_frag:ytt,meshphong_vert:btt,meshphong_frag:_tt,meshphysical_vert:Stt,meshphysical_frag:xtt,meshtoon_vert:wtt,meshtoon_frag:Ctt,points_vert:Mtt,points_frag:Ttt,shadow_vert:Att,shadow_frag:Ett,sprite_vert:Itt,sprite_frag:Rtt},An={common:{diffuse:{value:new ti(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dr},alphaMap:{value:null},alphaMapTransform:{value:new dr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dr}},envmap:{envMap:{value:null},envMapRotation:{value:new dr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dr},normalScale:{value:new Kn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ti(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ti(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dr},alphaTest:{value:0},uvTransform:{value:new dr}},sprite:{diffuse:{value:new ti(16777215)},opacity:{value:1},center:{value:new Kn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dr},alphaMap:{value:null},alphaMapTransform:{value:new dr},alphaTest:{value:0}}},Vc={basic:{uniforms:Oa([An.common,An.specularmap,An.envmap,An.aomap,An.lightmap,An.fog]),vertexShader:Tr.meshbasic_vert,fragmentShader:Tr.meshbasic_frag},lambert:{uniforms:Oa([An.common,An.specularmap,An.envmap,An.aomap,An.lightmap,An.emissivemap,An.bumpmap,An.normalmap,An.displacementmap,An.fog,An.lights,{emissive:{value:new ti(0)}}]),vertexShader:Tr.meshlambert_vert,fragmentShader:Tr.meshlambert_frag},phong:{uniforms:Oa([An.common,An.specularmap,An.envmap,An.aomap,An.lightmap,An.emissivemap,An.bumpmap,An.normalmap,An.displacementmap,An.fog,An.lights,{emissive:{value:new ti(0)},specular:{value:new ti(1118481)},shininess:{value:30}}]),vertexShader:Tr.meshphong_vert,fragmentShader:Tr.meshphong_frag},standard:{uniforms:Oa([An.common,An.envmap,An.aomap,An.lightmap,An.emissivemap,An.bumpmap,An.normalmap,An.displacementmap,An.roughnessmap,An.metalnessmap,An.fog,An.lights,{emissive:{value:new ti(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tr.meshphysical_vert,fragmentShader:Tr.meshphysical_frag},toon:{uniforms:Oa([An.common,An.aomap,An.lightmap,An.emissivemap,An.bumpmap,An.normalmap,An.displacementmap,An.gradientmap,An.fog,An.lights,{emissive:{value:new ti(0)}}]),vertexShader:Tr.meshtoon_vert,fragmentShader:Tr.meshtoon_frag},matcap:{uniforms:Oa([An.common,An.bumpmap,An.normalmap,An.displacementmap,An.fog,{matcap:{value:null}}]),vertexShader:Tr.meshmatcap_vert,fragmentShader:Tr.meshmatcap_frag},points:{uniforms:Oa([An.points,An.fog]),vertexShader:Tr.points_vert,fragmentShader:Tr.points_frag},dashed:{uniforms:Oa([An.common,An.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tr.linedashed_vert,fragmentShader:Tr.linedashed_frag},depth:{uniforms:Oa([An.common,An.displacementmap]),vertexShader:Tr.depth_vert,fragmentShader:Tr.depth_frag},normal:{uniforms:Oa([An.common,An.bumpmap,An.normalmap,An.displacementmap,{opacity:{value:1}}]),vertexShader:Tr.meshnormal_vert,fragmentShader:Tr.meshnormal_frag},sprite:{uniforms:Oa([An.sprite,An.fog]),vertexShader:Tr.sprite_vert,fragmentShader:Tr.sprite_frag},background:{uniforms:{uvTransform:{value:new dr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tr.background_vert,fragmentShader:Tr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new dr}},vertexShader:Tr.backgroundCube_vert,fragmentShader:Tr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tr.cube_vert,fragmentShader:Tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tr.equirect_vert,fragmentShader:Tr.equirect_frag},distanceRGBA:{uniforms:Oa([An.common,An.displacementmap,{referencePosition:{value:new it},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tr.distanceRGBA_vert,fragmentShader:Tr.distanceRGBA_frag},shadow:{uniforms:Oa([An.lights,An.fog,{color:{value:new ti(0)},opacity:{value:1}}]),vertexShader:Tr.shadow_vert,fragmentShader:Tr.shadow_frag}};Vc.physical={uniforms:Oa([Vc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dr},clearcoatNormalScale:{value:new Kn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dr},sheen:{value:0},sheenColor:{value:new ti(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dr},transmissionSamplerSize:{value:new Kn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dr},attenuationDistance:{value:0},attenuationColor:{value:new ti(0)},specularColor:{value:new ti(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dr},anisotropyVector:{value:new Kn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dr}}]),vertexShader:Tr.meshphysical_vert,fragmentShader:Tr.meshphysical_frag};const Bw={r:0,b:0,g:0},np=new Ed,Ptt=new hr;function Dtt(n,e,t,r,i,s,a){const o=new ti(0);let l=s===!0?0:1,c,u,d=null,h=0,f=null;function p(b){let S=b.isScene===!0?b.background:null;return S&&S.isTexture&&(S=(b.backgroundBlurriness>0?t:e).get(S)),S}function m(b){let S=!1;const x=p(b);x===null?g(o,l):x&&x.isColor&&(g(x,1),S=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?r.buffers.color.setClear(0,0,0,1,a):w==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(b,S){const x=p(S);x&&(x.isCubeTexture||x.mapping===KT)?(u===void 0&&(u=new ds(new vy(1,1,1),new Qo({name:"BackgroundCubeMaterial",uniforms:Eg(Vc.backgroundCube.uniforms),vertexShader:Vc.backgroundCube.vertexShader,fragmentShader:Vc.backgroundCube.fragmentShader,side:xo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,M,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),np.copy(S.backgroundRotation),np.x*=-1,np.y*=-1,np.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(np.y*=-1,np.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Ptt.makeRotationFromEuler(np)),u.material.toneMapped=ei.getTransfer(x.colorSpace)!==yi,(d!==x||h!==x.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=x,h=x.version,f=n.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new ds(new Ig(2,2),new Qo({name:"BackgroundMaterial",uniforms:Eg(Vc.background.uniforms),vertexShader:Vc.background.vertexShader,fragmentShader:Vc.background.fragmentShader,side:du,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=ei.getTransfer(x.colorSpace)!==yi,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||h!==x.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=x,h=x.version,f=n.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}function g(b,S){b.getRGB(Bw,Rne(n)),r.buffers.color.setClear(Bw.r,Bw.g,Bw.b,S,a)}function _(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(b,S=1){o.set(b),l=S,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,g(o,l)},render:m,addToRenderList:v,dispose:_}}function Ltt(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,a=!1;function o(T,I,D,B,O){let H=!1;const L=d(B,D,I);s!==L&&(s=L,c(s.object)),H=f(T,B,D,O),H&&p(T,B,D,O),O!==null&&e.update(O,n.ELEMENT_ARRAY_BUFFER),(H||a)&&(a=!1,S(T,I,D,B),O!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(O).buffer))}function l(){return n.createVertexArray()}function c(T){return n.bindVertexArray(T)}function u(T){return n.deleteVertexArray(T)}function d(T,I,D){const B=D.wireframe===!0;let O=r[T.id];O===void 0&&(O={},r[T.id]=O);let H=O[I.id];H===void 0&&(H={},O[I.id]=H);let L=H[B];return L===void 0&&(L=h(l()),H[B]=L),L}function h(T){const I=[],D=[],B=[];for(let O=0;O<t;O++)I[O]=0,D[O]=0,B[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:D,attributeDivisors:B,object:T,attributes:{},index:null}}function f(T,I,D,B){const O=s.attributes,H=I.attributes;let L=0;const z=D.getAttributes();for(const k in z)if(z[k].location>=0){const W=O[k];let q=H[k];if(q===void 0&&(k==="instanceMatrix"&&T.instanceMatrix&&(q=T.instanceMatrix),k==="instanceColor"&&T.instanceColor&&(q=T.instanceColor)),W===void 0||W.attribute!==q||q&&W.data!==q.data)return!0;L++}return s.attributesNum!==L||s.index!==B}function p(T,I,D,B){const O={},H=I.attributes;let L=0;const z=D.getAttributes();for(const k in z)if(z[k].location>=0){let W=H[k];W===void 0&&(k==="instanceMatrix"&&T.instanceMatrix&&(W=T.instanceMatrix),k==="instanceColor"&&T.instanceColor&&(W=T.instanceColor));const q={};q.attribute=W,W&&W.data&&(q.data=W.data),O[k]=q,L++}s.attributes=O,s.attributesNum=L,s.index=B}function m(){const T=s.newAttributes;for(let I=0,D=T.length;I<D;I++)T[I]=0}function v(T){g(T,0)}function g(T,I){const D=s.newAttributes,B=s.enabledAttributes,O=s.attributeDivisors;D[T]=1,B[T]===0&&(n.enableVertexAttribArray(T),B[T]=1),O[T]!==I&&(n.vertexAttribDivisor(T,I),O[T]=I)}function _(){const T=s.newAttributes,I=s.enabledAttributes;for(let D=0,B=I.length;D<B;D++)I[D]!==T[D]&&(n.disableVertexAttribArray(D),I[D]=0)}function b(T,I,D,B,O,H,L){L===!0?n.vertexAttribIPointer(T,I,D,O,H):n.vertexAttribPointer(T,I,D,B,O,H)}function S(T,I,D,B){m();const O=B.attributes,H=D.getAttributes(),L=I.defaultAttributeValues;for(const z in H){const k=H[z];if(k.location>=0){let F=O[z];if(F===void 0&&(z==="instanceMatrix"&&T.instanceMatrix&&(F=T.instanceMatrix),z==="instanceColor"&&T.instanceColor&&(F=T.instanceColor)),F!==void 0){const W=F.normalized,q=F.itemSize,Z=e.get(F);if(Z===void 0)continue;const se=Z.buffer,X=Z.type,ie=Z.bytesPerElement,ae=X===n.INT||X===n.UNSIGNED_INT||F.gpuType===Jk;if(F.isInterleavedBufferAttribute){const ce=F.data,we=ce.stride,He=F.offset;if(ce.isInstancedInterleavedBuffer){for(let Ge=0;Ge<k.locationSize;Ge++)g(k.location+Ge,ce.meshPerAttribute);T.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Ge=0;Ge<k.locationSize;Ge++)v(k.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,se);for(let Ge=0;Ge<k.locationSize;Ge++)b(k.location+Ge,q/k.locationSize,X,W,we*ie,(He+q/k.locationSize*Ge)*ie,ae)}else{if(F.isInstancedBufferAttribute){for(let ce=0;ce<k.locationSize;ce++)g(k.location+ce,F.meshPerAttribute);T.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=F.meshPerAttribute*F.count)}else for(let ce=0;ce<k.locationSize;ce++)v(k.location+ce);n.bindBuffer(n.ARRAY_BUFFER,se);for(let ce=0;ce<k.locationSize;ce++)b(k.location+ce,q/k.locationSize,X,W,q*ie,q/k.locationSize*ce*ie,ae)}}else if(L!==void 0){const W=L[z];if(W!==void 0)switch(W.length){case 2:n.vertexAttrib2fv(k.location,W);break;case 3:n.vertexAttrib3fv(k.location,W);break;case 4:n.vertexAttrib4fv(k.location,W);break;default:n.vertexAttrib1fv(k.location,W)}}}}_()}function x(){C();for(const T in r){const I=r[T];for(const D in I){const B=I[D];for(const O in B)u(B[O].object),delete B[O];delete I[D]}delete r[T]}}function w(T){if(r[T.id]===void 0)return;const I=r[T.id];for(const D in I){const B=I[D];for(const O in B)u(B[O].object),delete B[O];delete I[D]}delete r[T.id]}function M(T){for(const I in r){const D=r[I];if(D[T.id]===void 0)continue;const B=D[T.id];for(const O in B)u(B[O].object),delete B[O];delete D[T.id]}}function C(){A(),a=!0,s!==i&&(s=i,c(s.object))}function A(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:C,resetDefaultState:A,dispose:x,releaseStatesOfGeometry:w,releaseStatesOfProgram:M,initAttributes:m,enableAttribute:v,disableUnusedAttributes:_}}function ktt(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function a(c,u,d){d!==0&&(n.drawArraysInstanced(r,c,u,d),t.update(u,r,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,r,1)}function l(c,u,d,h){if(d===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<c.length;p++)a(c[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(r,c,0,u,0,h,0,d);let p=0;for(let m=0;m<d;m++)p+=u[m]*h[m];t.update(p,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Ott(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(M){return!(M!==$a&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(M){const C=M===py&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==fu&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==lc&&!C)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),b=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,w=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:_,maxVaryings:b,maxFragmentUniforms:S,vertexTextures:x,maxSamples:w}}function Ntt(n){const e=this;let t=null,r=0,i=!1,s=!1;const a=new Af,o=new dr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=d.length!==0||h||r!==0||i;return i=h,r=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!i||p===null||p.length===0||s&&!v)s?u(null):c();else{const _=s?0:r,b=_*4;let S=g.clippingState||null;l.value=S,S=u(p,h,b,f);for(let x=0;x!==b;++x)S[x]=t[x];g.clippingState=S,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=f+m*4,_=h.matrixWorldInverse;o.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let b=0,S=f;b!==m;++b,S+=4)a.copy(d[b]).applyMatrix4(_,o),a.normal.toArray(v,S),v[S+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function Btt(n){let e=new WeakMap;function t(a,o){return o===bP?a.mapping=wg:o===_P&&(a.mapping=Cg),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===bP||o===_P)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new zQe(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",i),t(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const pv=4,u$=[.125,.215,.35,.446,.526,.582],yp=20,Q4=new o8,d$=new ti;let J4=null,eI=0,tI=0,nI=!1;const up=(1+Math.sqrt(5))/2,Bm=1/up,f$=[new it(-up,Bm,0),new it(up,Bm,0),new it(-Bm,0,up),new it(Bm,0,up),new it(0,up,-Bm),new it(0,up,Bm),new it(-1,1,-1),new it(1,1,-1),new it(-1,1,1),new it(1,1,1)];class h${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){J4=this._renderer.getRenderTarget(),eI=this._renderer.getActiveCubeFace(),tI=this._renderer.getActiveMipmapLevel(),nI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=v$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=m$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(J4,eI,tI),this._renderer.xr.enabled=nI,e.scissorTest=!1,Fw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===wg||e.mapping===Cg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),J4=this._renderer.getRenderTarget(),eI=this._renderer.getActiveCubeFace(),tI=this._renderer.getActiveMipmapLevel(),nI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Xc,minFilter:Xc,generateMipmaps:!1,type:py,format:$a,colorSpace:Ag,depthBuffer:!1},i=p$(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=p$(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ftt(s)),this._blurMaterial=ztt(s,e,t)}return i}_compileMaterial(e){const t=new ds(this._lodPlanes[0],e);this._renderer.compile(t,Q4)}_sceneToCubeUV(e,t,r,i){const o=new xl(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(d$),u.toneMapping=jf,u.autoClear=!1;const f=new h0({name:"PMREM.Background",side:xo,depthWrite:!1,depthTest:!1}),p=new ds(new vy,f);let m=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,m=!0):(f.color.copy(d$),m=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):_===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const b=this._cubeSize;Fw(i,_*b,g>2?b:0,b,b),u.setRenderTarget(i),m&&u.render(p,o),u.render(e,o)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===wg||e.mapping===Cg;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=v$()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=m$());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new ds(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Fw(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(a,Q4)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=f$[(i-s-1)%f$.length];this._blur(e,s-1,s,a,o)}t.autoClear=r}_blur(e,t,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new ds(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*yp-1),m=s/p,v=isFinite(s)?1+Math.floor(u*m):yp;v>yp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${yp}`);const g=[];let _=0;for(let M=0;M<yp;++M){const C=M/m,A=Math.exp(-C*C/2);g.push(A),M===0?_+=A:M<v&&(_+=2*A)}for(let M=0;M<g.length;M++)g[M]=g[M]/_;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:b}=this;h.dTheta.value=p,h.mipInt.value=b-r;const S=this._sizeLods[i],x=3*S*(i>b-pv?i-b+pv:0),w=4*(this._cubeSize-S);Fw(t,x,w,3*S,2*S),l.setRenderTarget(t),l.render(d,Q4)}}function Ftt(n){const e=[],t=[],r=[];let i=n;const s=n-pv+1+u$.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>n-pv?l=u$[a-n+pv-1]:a===0&&(l=0),r.push(l);const c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,v=2,g=1,_=new Float32Array(m*p*f),b=new Float32Array(v*p*f),S=new Float32Array(g*p*f);for(let w=0;w<f;w++){const M=w%3*2/3-1,C=w>2?0:-1,A=[M,C,0,M+2/3,C,0,M+2/3,C+1,0,M,C,0,M+2/3,C+1,0,M,C+1,0];_.set(A,m*p*w),b.set(h,v*p*w);const T=[w,w,w,w,w,w];S.set(T,g*p*w)}const x=new $l;x.setAttribute("position",new Ol(_,m)),x.setAttribute("uv",new Ol(b,v)),x.setAttribute("faceIndex",new Ol(S,g)),e.push(x),i>pv&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function p$(n,e,t){const r=new vh(n,e,t);return r.texture.mapping=KT,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Fw(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function ztt(n,e,t){const r=new Float32Array(yp),i=new it(0,1,0);return new Qo({name:"SphericalGaussianBlur",defines:{n:yp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:l8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yf,depthTest:!1,depthWrite:!1})}function m$(){return new Qo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:l8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yf,depthTest:!1,depthWrite:!1})}function v$(){return new Qo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:l8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yf,depthTest:!1,depthWrite:!1})}function l8(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Utt(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===bP||l===_P,u=l===wg||l===Cg;if(c||u){let d=e.get(o);const h=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return t===null&&(t=new h$(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const f=o.image;return c&&f&&f.height>0||u&&f&&i(f)?(t===null&&(t=new h$(n)),d=c?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",s),d.texture):null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:a}}function Htt(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Jm("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Vtt(n,e,t,r){const i={},s=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",a),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(d,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const f in h)e.update(h[f],n.ARRAY_BUFFER)}function c(d){const h=[],f=d.index,p=d.attributes.position;let m=0;if(f!==null){const _=f.array;m=f.version;for(let b=0,S=_.length;b<S;b+=3){const x=_[b+0],w=_[b+1],M=_[b+2];h.push(x,w,w,M,M,x)}}else if(p!==void 0){const _=p.array;m=p.version;for(let b=0,S=_.length/3-1;b<S;b+=3){const x=b+0,w=b+1,M=b+2;h.push(x,w,w,M,M,x)}}else return;const v=new(xne(h)?Ine:Ene)(h,1);v.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,v)}function u(d){const h=s.get(d);if(h){const f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function $tt(n,e,t){let r;function i(h){r=h}let s,a;function o(h){s=h.type,a=h.bytesPerElement}function l(h,f){n.drawElements(r,f,s,h*a),t.update(f,r,1)}function c(h,f,p){p!==0&&(n.drawElementsInstanced(r,f,s,h*a,p),t.update(f,r,p))}function u(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,s,h,0,p);let v=0;for(let g=0;g<p;g++)v+=f[g];t.update(v,r,1)}function d(h,f,p,m){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<h.length;g++)c(h[g]/a,f[g],m[g]);else{v.multiDrawElementsInstancedWEBGL(r,f,0,s,h,0,m,0,p);let g=0;for(let _=0;_<p;_++)g+=f[_]*m[_];t.update(g,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Gtt(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Wtt(n,e,t){const r=new WeakMap,i=new Ui;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let h=r.get(o);if(h===void 0||h.count!==d){let T=function(){C.dispose(),r.delete(o),o.removeEventListener("dispose",T)};var f=T;h!==void 0&&h.texture.dispose();const p=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],_=o.morphAttributes.normal||[],b=o.morphAttributes.color||[];let S=0;p===!0&&(S=1),m===!0&&(S=2),v===!0&&(S=3);let x=o.attributes.position.count*S,w=1;x>e.maxTextureSize&&(w=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const M=new Float32Array(x*w*4*d),C=new Cne(M,x,w,d);C.type=lc,C.needsUpdate=!0;const A=S*4;for(let I=0;I<d;I++){const D=g[I],B=_[I],O=b[I],H=x*w*4*I;for(let L=0;L<D.count;L++){const z=L*A;p===!0&&(i.fromBufferAttribute(D,L),M[H+z+0]=i.x,M[H+z+1]=i.y,M[H+z+2]=i.z,M[H+z+3]=0),m===!0&&(i.fromBufferAttribute(B,L),M[H+z+4]=i.x,M[H+z+5]=i.y,M[H+z+6]=i.z,M[H+z+7]=0),v===!0&&(i.fromBufferAttribute(O,L),M[H+z+8]=i.x,M[H+z+9]=i.y,M[H+z+10]=i.z,M[H+z+11]=O.itemSize===4?i.w:1)}}h={count:d,texture:C,size:new Kn(x,w)},r.set(o,h),o.addEventListener("dispose",T)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let p=0;for(let v=0;v<c.length;v++)p+=c[v];const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function qtt(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return d}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const One=new qa,g$=new s8(1,1),Nne=new Cne,Bne=new _Qe,Fne=new Dne,y$=[],b$=[],_$=new Float32Array(16),S$=new Float32Array(9),x$=new Float32Array(4);function gy(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=y$[i];if(s===void 0&&(s=new Float32Array(i),y$[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Bs(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Fs(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function jT(n,e){let t=b$[e];t===void 0&&(t=new Int32Array(e),b$[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Ktt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Ytt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bs(t,e))return;n.uniform2fv(this.addr,e),Fs(t,e)}}function Xtt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bs(t,e))return;n.uniform3fv(this.addr,e),Fs(t,e)}}function jtt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bs(t,e))return;n.uniform4fv(this.addr,e),Fs(t,e)}}function Ztt(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Bs(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fs(t,e)}else{if(Bs(t,r))return;x$.set(r),n.uniformMatrix2fv(this.addr,!1,x$),Fs(t,r)}}function Qtt(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Bs(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fs(t,e)}else{if(Bs(t,r))return;S$.set(r),n.uniformMatrix3fv(this.addr,!1,S$),Fs(t,r)}}function Jtt(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Bs(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fs(t,e)}else{if(Bs(t,r))return;_$.set(r),n.uniformMatrix4fv(this.addr,!1,_$),Fs(t,r)}}function ent(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function tnt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bs(t,e))return;n.uniform2iv(this.addr,e),Fs(t,e)}}function nnt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bs(t,e))return;n.uniform3iv(this.addr,e),Fs(t,e)}}function rnt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bs(t,e))return;n.uniform4iv(this.addr,e),Fs(t,e)}}function int(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function snt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bs(t,e))return;n.uniform2uiv(this.addr,e),Fs(t,e)}}function ant(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bs(t,e))return;n.uniform3uiv(this.addr,e),Fs(t,e)}}function ont(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bs(t,e))return;n.uniform4uiv(this.addr,e),Fs(t,e)}}function lnt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(g$.compareFunction=_ne,s=g$):s=One,t.setTexture2D(e||s,i)}function cnt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Bne,i)}function unt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Fne,i)}function dnt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||Nne,i)}function fnt(n){switch(n){case 5126:return Ktt;case 35664:return Ytt;case 35665:return Xtt;case 35666:return jtt;case 35674:return Ztt;case 35675:return Qtt;case 35676:return Jtt;case 5124:case 35670:return ent;case 35667:case 35671:return tnt;case 35668:case 35672:return nnt;case 35669:case 35673:return rnt;case 5125:return int;case 36294:return snt;case 36295:return ant;case 36296:return ont;case 35678:case 36198:case 36298:case 36306:case 35682:return lnt;case 35679:case 36299:case 36307:return cnt;case 35680:case 36300:case 36308:case 36293:return unt;case 36289:case 36303:case 36311:case 36292:return dnt}}function hnt(n,e){n.uniform1fv(this.addr,e)}function pnt(n,e){const t=gy(e,this.size,2);n.uniform2fv(this.addr,t)}function mnt(n,e){const t=gy(e,this.size,3);n.uniform3fv(this.addr,t)}function vnt(n,e){const t=gy(e,this.size,4);n.uniform4fv(this.addr,t)}function gnt(n,e){const t=gy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ynt(n,e){const t=gy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bnt(n,e){const t=gy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _nt(n,e){n.uniform1iv(this.addr,e)}function Snt(n,e){n.uniform2iv(this.addr,e)}function xnt(n,e){n.uniform3iv(this.addr,e)}function wnt(n,e){n.uniform4iv(this.addr,e)}function Cnt(n,e){n.uniform1uiv(this.addr,e)}function Mnt(n,e){n.uniform2uiv(this.addr,e)}function Tnt(n,e){n.uniform3uiv(this.addr,e)}function Ant(n,e){n.uniform4uiv(this.addr,e)}function Ent(n,e,t){const r=this.cache,i=e.length,s=jT(t,i);Bs(r,s)||(n.uniform1iv(this.addr,s),Fs(r,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||One,s[a])}function Int(n,e,t){const r=this.cache,i=e.length,s=jT(t,i);Bs(r,s)||(n.uniform1iv(this.addr,s),Fs(r,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||Bne,s[a])}function Rnt(n,e,t){const r=this.cache,i=e.length,s=jT(t,i);Bs(r,s)||(n.uniform1iv(this.addr,s),Fs(r,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||Fne,s[a])}function Pnt(n,e,t){const r=this.cache,i=e.length,s=jT(t,i);Bs(r,s)||(n.uniform1iv(this.addr,s),Fs(r,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||Nne,s[a])}function Dnt(n){switch(n){case 5126:return hnt;case 35664:return pnt;case 35665:return mnt;case 35666:return vnt;case 35674:return gnt;case 35675:return ynt;case 35676:return bnt;case 5124:case 35670:return _nt;case 35667:case 35671:return Snt;case 35668:case 35672:return xnt;case 35669:case 35673:return wnt;case 5125:return Cnt;case 36294:return Mnt;case 36295:return Tnt;case 36296:return Ant;case 35678:case 36198:case 36298:case 36306:case 35682:return Ent;case 35679:case 36299:case 36307:return Int;case 35680:case 36300:case 36308:case 36293:return Rnt;case 36289:case 36303:case 36311:case 36292:return Pnt}}class Lnt{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=fnt(t.type)}}class knt{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Dnt(t.type)}}class Ont{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],r)}}}const rI=/(\w+)(\])?(\[|\.)?/g;function w$(n,e){n.seq.push(e),n.map[e.id]=e}function Nnt(n,e,t){const r=n.name,i=r.length;for(rI.lastIndex=0;;){const s=rI.exec(r),a=rI.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){w$(t,c===void 0?new Lnt(o,n,e):new knt(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new Ont(o),w$(t,d)),t=d}}}class $2{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);Nnt(s,a,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&r.push(a)}return r}}function C$(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Bnt=37297;let Fnt=0;function znt(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return r.join(`
`)}const M$=new dr;function Unt(n){ei._getMatrix(M$,ei.workingColorSpace,n);const e=`mat3( ${M$.elements.map(t=>t.toFixed(4))} )`;switch(ei.getTransfer(n)){case xM:return[e,"LinearTransferOETF"];case yi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function T$(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+znt(n.getShaderSource(e),a)}else return i}function Hnt(n,e){const t=Unt(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Vnt(n,e){let t;switch(e){case IZe:t="Linear";break;case RZe:t="Reinhard";break;case PZe:t="Cineon";break;case DZe:t="ACESFilmic";break;case kZe:t="AgX";break;case OZe:t="Neutral";break;case LZe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const zw=new it;function $nt(){ei.getLuminanceCoefficients(zw);const n=zw.x.toFixed(4),e=zw.y.toFixed(4),t=zw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Gnt(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(T1).join(`
`)}function Wnt(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function qnt(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function T1(n){return n!==""}function A$(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function E$(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Knt=/^[ \t]*#include +<([\w\d./]+)>/gm;function XP(n){return n.replace(Knt,Xnt)}const Ynt=new Map;function Xnt(n,e){let t=Tr[e];if(t===void 0){const r=Ynt.get(e);if(r!==void 0)t=Tr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return XP(t)}const jnt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function I$(n){return n.replace(jnt,Znt)}function Znt(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function R$(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Qnt(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ane?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cZe?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===$u&&(e="SHADOWMAP_TYPE_VSM"),e}function Jnt(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case wg:case Cg:e="ENVMAP_TYPE_CUBE";break;case KT:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ert(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Cg:e="ENVMAP_MODE_REFRACTION";break}return e}function trt(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case lne:e="ENVMAP_BLENDING_MULTIPLY";break;case AZe:e="ENVMAP_BLENDING_MIX";break;case EZe:e="ENVMAP_BLENDING_ADD";break}return e}function nrt(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function rrt(n,e,t,r){const i=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Qnt(t),c=Jnt(t),u=ert(t),d=trt(t),h=nrt(t),f=Gnt(t),p=Wnt(s),m=i.createProgram();let v,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(T1).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(T1).join(`
`),g.length>0&&(g+=`
`)):(v=[R$(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(T1).join(`
`),g=[R$(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==jf?"#define TONE_MAPPING":"",t.toneMapping!==jf?Tr.tonemapping_pars_fragment:"",t.toneMapping!==jf?Vnt("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tr.colorspace_pars_fragment,Hnt("linearToOutputTexel",t.outputColorSpace),$nt(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(T1).join(`
`)),a=XP(a),a=A$(a,t),a=E$(a,t),o=XP(o),o=A$(o,t),o=E$(o,t),a=I$(a),o=I$(o),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===$V?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$V?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const b=_+v+a,S=_+g+o,x=C$(i,i.VERTEX_SHADER,b),w=C$(i,i.FRAGMENT_SHADER,S);i.attachShader(m,x),i.attachShader(m,w),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function M(I){if(n.debug.checkShaderErrors){const D=i.getProgramInfoLog(m).trim(),B=i.getShaderInfoLog(x).trim(),O=i.getShaderInfoLog(w).trim();let H=!0,L=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(H=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,m,x,w);else{const z=T$(i,x,"vertex"),k=T$(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+D+`
`+z+`
`+k)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(B===""||O==="")&&(L=!1);L&&(I.diagnostics={runnable:H,programLog:D,vertexShader:{log:B,prefix:v},fragmentShader:{log:O,prefix:g}})}i.deleteShader(x),i.deleteShader(w),C=new $2(i,m),A=qnt(i,m)}let C;this.getUniforms=function(){return C===void 0&&M(this),C};let A;this.getAttributes=function(){return A===void 0&&M(this),A};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=i.getProgramParameter(m,Bnt)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Fnt++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let irt=0;class srt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new art(e),t.set(e,r)),r}}class art{constructor(e){this.id=irt++,this.code=e,this.usedTimes=0}}function ort(n,e,t,r,i,s,a){const o=new Tne,l=new srt,c=new Set,u=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(A){return c.add(A),A===0?"uv":`uv${A}`}function v(A,T,I,D,B){const O=D.fog,H=B.geometry,L=A.isMeshStandardMaterial?D.environment:null,z=(A.isMeshStandardMaterial?t:e).get(A.envMap||L),k=z&&z.mapping===KT?z.image.height:null,F=p[A.type];A.precision!==null&&(f=i.getMaxPrecision(A.precision),f!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",f,"instead."));const W=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,q=W!==void 0?W.length:0;let Z=0;H.morphAttributes.position!==void 0&&(Z=1),H.morphAttributes.normal!==void 0&&(Z=2),H.morphAttributes.color!==void 0&&(Z=3);let se,X,ie,ae;if(F){const Jt=Vc[F];se=Jt.vertexShader,X=Jt.fragmentShader}else se=A.vertexShader,X=A.fragmentShader,l.update(A),ie=l.getVertexShaderID(A),ae=l.getFragmentShaderID(A);const ce=n.getRenderTarget(),we=n.state.buffers.depth.getReversed(),He=B.isInstancedMesh===!0,Ge=B.isBatchedMesh===!0,me=!!A.map,be=!!A.matcap,oe=!!z,j=!!A.aoMap,ke=!!A.lightMap,ze=!!A.bumpMap,Ve=!!A.normalMap,Le=!!A.displacementMap,Ze=!!A.emissiveMap,st=!!A.metalnessMap,fe=!!A.roughnessMap,V=A.anisotropy>0,J=A.clearcoat>0,he=A.dispersion>0,Oe=A.iridescence>0,je=A.sheen>0,dt=A.transmission>0,pt=V&&!!A.anisotropyMap,Te=J&&!!A.clearcoatMap,ft=J&&!!A.clearcoatNormalMap,Ke=J&&!!A.clearcoatRoughnessMap,Q=Oe&&!!A.iridescenceMap,_e=Oe&&!!A.iridescenceThicknessMap,Ae=je&&!!A.sheenColorMap,ge=je&&!!A.sheenRoughnessMap,pe=!!A.specularMap,de=!!A.specularColorMap,at=!!A.specularIntensityMap,Ee=dt&&!!A.transmissionMap,vt=dt&&!!A.thicknessMap,et=!!A.gradientMap,yt=!!A.alphaMap,Ht=A.alphaTest>0,Ot=!!A.alphaHash,ln=!!A.extensions;let Vt=jf;A.toneMapped&&(ce===null||ce.isXRRenderTarget===!0)&&(Vt=n.toneMapping);const kt={shaderID:F,shaderType:A.type,shaderName:A.name,vertexShader:se,fragmentShader:X,defines:A.defines,customVertexShaderID:ie,customFragmentShaderID:ae,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:f,batching:Ge,batchingColor:Ge&&B._colorsTexture!==null,instancing:He,instancingColor:He&&B.instanceColor!==null,instancingMorph:He&&B.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ce===null?n.outputColorSpace:ce.isXRRenderTarget===!0?ce.texture.colorSpace:Ag,alphaToCoverage:!!A.alphaToCoverage,map:me,matcap:be,envMap:oe,envMapMode:oe&&z.mapping,envMapCubeUVHeight:k,aoMap:j,lightMap:ke,bumpMap:ze,normalMap:Ve,displacementMap:h&&Le,emissiveMap:Ze,normalMapObjectSpace:Ve&&A.normalMapType===UZe,normalMapTangentSpace:Ve&&A.normalMapType===zZe,metalnessMap:st,roughnessMap:fe,anisotropy:V,anisotropyMap:pt,clearcoat:J,clearcoatMap:Te,clearcoatNormalMap:ft,clearcoatRoughnessMap:Ke,dispersion:he,iridescence:Oe,iridescenceMap:Q,iridescenceThicknessMap:_e,sheen:je,sheenColorMap:Ae,sheenRoughnessMap:ge,specularMap:pe,specularColorMap:de,specularIntensityMap:at,transmission:dt,transmissionMap:Ee,thicknessMap:vt,gradientMap:et,opaque:A.transparent===!1&&A.blending===Xf&&A.alphaToCoverage===!1,alphaMap:yt,alphaTest:Ht,alphaHash:Ot,combine:A.combine,mapUv:me&&m(A.map.channel),aoMapUv:j&&m(A.aoMap.channel),lightMapUv:ke&&m(A.lightMap.channel),bumpMapUv:ze&&m(A.bumpMap.channel),normalMapUv:Ve&&m(A.normalMap.channel),displacementMapUv:Le&&m(A.displacementMap.channel),emissiveMapUv:Ze&&m(A.emissiveMap.channel),metalnessMapUv:st&&m(A.metalnessMap.channel),roughnessMapUv:fe&&m(A.roughnessMap.channel),anisotropyMapUv:pt&&m(A.anisotropyMap.channel),clearcoatMapUv:Te&&m(A.clearcoatMap.channel),clearcoatNormalMapUv:ft&&m(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&m(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Q&&m(A.iridescenceMap.channel),iridescenceThicknessMapUv:_e&&m(A.iridescenceThicknessMap.channel),sheenColorMapUv:Ae&&m(A.sheenColorMap.channel),sheenRoughnessMapUv:ge&&m(A.sheenRoughnessMap.channel),specularMapUv:pe&&m(A.specularMap.channel),specularColorMapUv:de&&m(A.specularColorMap.channel),specularIntensityMapUv:at&&m(A.specularIntensityMap.channel),transmissionMapUv:Ee&&m(A.transmissionMap.channel),thicknessMapUv:vt&&m(A.thicknessMap.channel),alphaMapUv:yt&&m(A.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(Ve||V),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!H.attributes.uv&&(me||yt),fog:!!O,useFog:A.fog===!0,fogExp2:!!O&&O.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:we,skinning:B.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:Z,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:Vt,decodeVideoTexture:me&&A.map.isVideoTexture===!0&&ei.getTransfer(A.map.colorSpace)===yi,decodeVideoTextureEmissive:Ze&&A.emissiveMap.isVideoTexture===!0&&ei.getTransfer(A.emissiveMap.colorSpace)===yi,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===wl,flipSided:A.side===xo,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:ln&&A.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ln&&A.extensions.multiDraw===!0||Ge)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return kt.vertexUv1s=c.has(1),kt.vertexUv2s=c.has(2),kt.vertexUv3s=c.has(3),c.clear(),kt}function g(A){const T=[];if(A.shaderID?T.push(A.shaderID):(T.push(A.customVertexShaderID),T.push(A.customFragmentShaderID)),A.defines!==void 0)for(const I in A.defines)T.push(I),T.push(A.defines[I]);return A.isRawShaderMaterial===!1&&(_(T,A),b(T,A),T.push(n.outputColorSpace)),T.push(A.customProgramCacheKey),T.join()}function _(A,T){A.push(T.precision),A.push(T.outputColorSpace),A.push(T.envMapMode),A.push(T.envMapCubeUVHeight),A.push(T.mapUv),A.push(T.alphaMapUv),A.push(T.lightMapUv),A.push(T.aoMapUv),A.push(T.bumpMapUv),A.push(T.normalMapUv),A.push(T.displacementMapUv),A.push(T.emissiveMapUv),A.push(T.metalnessMapUv),A.push(T.roughnessMapUv),A.push(T.anisotropyMapUv),A.push(T.clearcoatMapUv),A.push(T.clearcoatNormalMapUv),A.push(T.clearcoatRoughnessMapUv),A.push(T.iridescenceMapUv),A.push(T.iridescenceThicknessMapUv),A.push(T.sheenColorMapUv),A.push(T.sheenRoughnessMapUv),A.push(T.specularMapUv),A.push(T.specularColorMapUv),A.push(T.specularIntensityMapUv),A.push(T.transmissionMapUv),A.push(T.thicknessMapUv),A.push(T.combine),A.push(T.fogExp2),A.push(T.sizeAttenuation),A.push(T.morphTargetsCount),A.push(T.morphAttributeCount),A.push(T.numDirLights),A.push(T.numPointLights),A.push(T.numSpotLights),A.push(T.numSpotLightMaps),A.push(T.numHemiLights),A.push(T.numRectAreaLights),A.push(T.numDirLightShadows),A.push(T.numPointLightShadows),A.push(T.numSpotLightShadows),A.push(T.numSpotLightShadowsWithMaps),A.push(T.numLightProbes),A.push(T.shadowMapType),A.push(T.toneMapping),A.push(T.numClippingPlanes),A.push(T.numClipIntersection),A.push(T.depthPacking)}function b(A,T){o.disableAll(),T.supportsVertexTextures&&o.enable(0),T.instancing&&o.enable(1),T.instancingColor&&o.enable(2),T.instancingMorph&&o.enable(3),T.matcap&&o.enable(4),T.envMap&&o.enable(5),T.normalMapObjectSpace&&o.enable(6),T.normalMapTangentSpace&&o.enable(7),T.clearcoat&&o.enable(8),T.iridescence&&o.enable(9),T.alphaTest&&o.enable(10),T.vertexColors&&o.enable(11),T.vertexAlphas&&o.enable(12),T.vertexUv1s&&o.enable(13),T.vertexUv2s&&o.enable(14),T.vertexUv3s&&o.enable(15),T.vertexTangents&&o.enable(16),T.anisotropy&&o.enable(17),T.alphaHash&&o.enable(18),T.batching&&o.enable(19),T.dispersion&&o.enable(20),T.batchingColor&&o.enable(21),A.push(o.mask),o.disableAll(),T.fog&&o.enable(0),T.useFog&&o.enable(1),T.flatShading&&o.enable(2),T.logarithmicDepthBuffer&&o.enable(3),T.reverseDepthBuffer&&o.enable(4),T.skinning&&o.enable(5),T.morphTargets&&o.enable(6),T.morphNormals&&o.enable(7),T.morphColors&&o.enable(8),T.premultipliedAlpha&&o.enable(9),T.shadowMapEnabled&&o.enable(10),T.doubleSided&&o.enable(11),T.flipSided&&o.enable(12),T.useDepthPacking&&o.enable(13),T.dithering&&o.enable(14),T.transmission&&o.enable(15),T.sheen&&o.enable(16),T.opaque&&o.enable(17),T.pointsUvs&&o.enable(18),T.decodeVideoTexture&&o.enable(19),T.decodeVideoTextureEmissive&&o.enable(20),T.alphaToCoverage&&o.enable(21),A.push(o.mask)}function S(A){const T=p[A.type];let I;if(T){const D=Vc[T];I=OQe.clone(D.uniforms)}else I=A.uniforms;return I}function x(A,T){let I;for(let D=0,B=u.length;D<B;D++){const O=u[D];if(O.cacheKey===T){I=O,++I.usedTimes;break}}return I===void 0&&(I=new rrt(n,T,A,s),u.push(I)),I}function w(A){if(--A.usedTimes===0){const T=u.indexOf(A);u[T]=u[u.length-1],u.pop(),A.destroy()}}function M(A){l.remove(A)}function C(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:S,acquireProgram:x,releaseProgram:w,releaseShaderCache:M,programs:u,dispose:C}}function lrt(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function r(a){n.delete(a)}function i(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function crt(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function P$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function D$(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function a(d,h,f,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,h,f,p,m,v){const g=a(d,h,f,p,m,v);f.transmission>0?r.push(g):f.transparent===!0?i.push(g):t.push(g)}function l(d,h,f,p,m,v){const g=a(d,h,f,p,m,v);f.transmission>0?r.unshift(g):f.transparent===!0?i.unshift(g):t.unshift(g)}function c(d,h){t.length>1&&t.sort(d||crt),r.length>1&&r.sort(h||P$),i.length>1&&i.sort(h||P$)}function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function urt(){let n=new WeakMap;function e(r,i){const s=n.get(r);let a;return s===void 0?(a=new D$,n.set(r,[a])):i>=s.length?(a=new D$,s.push(a)):a=s[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function drt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new it,color:new ti};break;case"SpotLight":t={position:new it,direction:new it,color:new ti,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new it,color:new ti,distance:0,decay:0};break;case"HemisphereLight":t={direction:new it,skyColor:new ti,groundColor:new ti};break;case"RectAreaLight":t={color:new ti,position:new it,halfWidth:new it,halfHeight:new it};break}return n[e.id]=t,t}}}function frt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kn};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kn};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let hrt=0;function prt(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mrt(n){const e=new drt,t=frt(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new it);const i=new it,s=new hr,a=new hr;function o(c){let u=0,d=0,h=0;for(let A=0;A<9;A++)r.probe[A].set(0,0,0);let f=0,p=0,m=0,v=0,g=0,_=0,b=0,S=0,x=0,w=0,M=0;c.sort(prt);for(let A=0,T=c.length;A<T;A++){const I=c[A],D=I.color,B=I.intensity,O=I.distance,H=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)u+=D.r*B,d+=D.g*B,h+=D.b*B;else if(I.isLightProbe){for(let L=0;L<9;L++)r.probe[L].addScaledVector(I.sh.coefficients[L],B);M++}else if(I.isDirectionalLight){const L=e.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const z=I.shadow,k=t.get(I);k.shadowIntensity=z.intensity,k.shadowBias=z.bias,k.shadowNormalBias=z.normalBias,k.shadowRadius=z.radius,k.shadowMapSize=z.mapSize,r.directionalShadow[f]=k,r.directionalShadowMap[f]=H,r.directionalShadowMatrix[f]=I.shadow.matrix,_++}r.directional[f]=L,f++}else if(I.isSpotLight){const L=e.get(I);L.position.setFromMatrixPosition(I.matrixWorld),L.color.copy(D).multiplyScalar(B),L.distance=O,L.coneCos=Math.cos(I.angle),L.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),L.decay=I.decay,r.spot[m]=L;const z=I.shadow;if(I.map&&(r.spotLightMap[x]=I.map,x++,z.updateMatrices(I),I.castShadow&&w++),r.spotLightMatrix[m]=z.matrix,I.castShadow){const k=t.get(I);k.shadowIntensity=z.intensity,k.shadowBias=z.bias,k.shadowNormalBias=z.normalBias,k.shadowRadius=z.radius,k.shadowMapSize=z.mapSize,r.spotShadow[m]=k,r.spotShadowMap[m]=H,S++}m++}else if(I.isRectAreaLight){const L=e.get(I);L.color.copy(D).multiplyScalar(B),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),r.rectArea[v]=L,v++}else if(I.isPointLight){const L=e.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity),L.distance=I.distance,L.decay=I.decay,I.castShadow){const z=I.shadow,k=t.get(I);k.shadowIntensity=z.intensity,k.shadowBias=z.bias,k.shadowNormalBias=z.normalBias,k.shadowRadius=z.radius,k.shadowMapSize=z.mapSize,k.shadowCameraNear=z.camera.near,k.shadowCameraFar=z.camera.far,r.pointShadow[p]=k,r.pointShadowMap[p]=H,r.pointShadowMatrix[p]=I.shadow.matrix,b++}r.point[p]=L,p++}else if(I.isHemisphereLight){const L=e.get(I);L.skyColor.copy(I.color).multiplyScalar(B),L.groundColor.copy(I.groundColor).multiplyScalar(B),r.hemi[g]=L,g++}}v>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=An.LTC_FLOAT_1,r.rectAreaLTC2=An.LTC_FLOAT_2):(r.rectAreaLTC1=An.LTC_HALF_1,r.rectAreaLTC2=An.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=h;const C=r.hash;(C.directionalLength!==f||C.pointLength!==p||C.spotLength!==m||C.rectAreaLength!==v||C.hemiLength!==g||C.numDirectionalShadows!==_||C.numPointShadows!==b||C.numSpotShadows!==S||C.numSpotMaps!==x||C.numLightProbes!==M)&&(r.directional.length=f,r.spot.length=m,r.rectArea.length=v,r.point.length=p,r.hemi.length=g,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=S+x-w,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=w,r.numLightProbes=M,C.directionalLength=f,C.pointLength=p,C.spotLength=m,C.rectAreaLength=v,C.hemiLength=g,C.numDirectionalShadows=_,C.numPointShadows=b,C.numSpotShadows=S,C.numSpotMaps=x,C.numLightProbes=M,r.version=hrt++)}function l(c,u){let d=0,h=0,f=0,p=0,m=0;const v=u.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const b=c[g];if(b.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(v),d++}else if(b.isSpotLight){const S=r.spot[f];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(v),f++}else if(b.isRectAreaLight){const S=r.rectArea[p];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),a.identity(),s.copy(b.matrixWorld),s.premultiply(v),a.extractRotation(s),S.halfWidth.set(b.width*.5,0,0),S.halfHeight.set(0,b.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),p++}else if(b.isPointLight){const S=r.point[h];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),h++}else if(b.isHemisphereLight){const S=r.hemi[m];S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),m++}}}return{setup:o,setupView:l,state:r}}function L$(n){const e=new mrt(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function a(u){r.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function vrt(n){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new L$(n),e.set(i,[o])):s>=a.length?(o=new L$(n),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const grt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yrt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function brt(n,e,t){let r=new Lne;const i=new Kn,s=new Kn,a=new Ui,o=new GQe({depthPacking:FZe}),l=new WQe,c={},u=t.maxTextureSize,d={[du]:xo,[xo]:du,[wl]:wl},h=new Qo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Kn},radius:{value:4}},vertexShader:grt,fragmentShader:yrt}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new $l;p.setAttribute("position",new Ol(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ds(p,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ane;let g=this.type;this.render=function(w,M,C){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||w.length===0)return;const A=n.getRenderTarget(),T=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Yf),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const B=g!==$u&&this.type===$u,O=g===$u&&this.type!==$u;for(let H=0,L=w.length;H<L;H++){const z=w[H],k=z.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;i.copy(k.mapSize);const F=k.getFrameExtents();if(i.multiply(F),s.copy(k.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/F.x),i.x=s.x*F.x,k.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/F.y),i.y=s.y*F.y,k.mapSize.y=s.y)),k.map===null||B===!0||O===!0){const q=this.type!==$u?{minFilter:jo,magFilter:jo}:{};k.map!==null&&k.map.dispose(),k.map=new vh(i.x,i.y,q),k.map.texture.name=z.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const W=k.getViewportCount();for(let q=0;q<W;q++){const Z=k.getViewport(q);a.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),D.viewport(a),k.updateMatrices(z,q),r=k.getFrustum(),S(M,C,k.camera,z,this.type)}k.isPointLightShadow!==!0&&this.type===$u&&_(k,C),k.needsUpdate=!1}g=this.type,v.needsUpdate=!1,n.setRenderTarget(A,T,I)};function _(w,M){const C=e.update(m);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new vh(i.x,i.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(M,null,C,h,m,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(M,null,C,f,m,null)}function b(w,M,C,A){let T=null;const I=C.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(I!==void 0)T=I;else if(T=C.isPointLight===!0?l:o,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const D=T.uuid,B=M.uuid;let O=c[D];O===void 0&&(O={},c[D]=O);let H=O[B];H===void 0&&(H=T.clone(),O[B]=H,M.addEventListener("dispose",x)),T=H}if(T.visible=M.visible,T.wireframe=M.wireframe,A===$u?T.side=M.shadowSide!==null?M.shadowSide:M.side:T.side=M.shadowSide!==null?M.shadowSide:d[M.side],T.alphaMap=M.alphaMap,T.alphaTest=M.alphaTest,T.map=M.map,T.clipShadows=M.clipShadows,T.clippingPlanes=M.clippingPlanes,T.clipIntersection=M.clipIntersection,T.displacementMap=M.displacementMap,T.displacementScale=M.displacementScale,T.displacementBias=M.displacementBias,T.wireframeLinewidth=M.wireframeLinewidth,T.linewidth=M.linewidth,C.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const D=n.properties.get(T);D.light=C}return T}function S(w,M,C,A,T){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&T===$u)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,w.matrixWorld);const B=e.update(w),O=w.material;if(Array.isArray(O)){const H=B.groups;for(let L=0,z=H.length;L<z;L++){const k=H[L],F=O[k.materialIndex];if(F&&F.visible){const W=b(w,F,A,T);w.onBeforeShadow(n,w,M,C,B,W,k),n.renderBufferDirect(C,null,B,W,w,k),w.onAfterShadow(n,w,M,C,B,W,k)}}}else if(O.visible){const H=b(w,O,A,T);w.onBeforeShadow(n,w,M,C,B,H,null),n.renderBufferDirect(C,null,B,H,w,null),w.onAfterShadow(n,w,M,C,B,H,null)}}const D=w.children;for(let B=0,O=D.length;B<O;B++)S(D[B],M,C,A,T)}function x(w){w.target.removeEventListener("dispose",x);for(const C in c){const A=c[C],T=w.target.uuid;T in A&&(A[T].dispose(),delete A[T])}}}const _rt={[fP]:hP,[pP]:gP,[mP]:yP,[xg]:vP,[hP]:fP,[gP]:pP,[yP]:mP,[vP]:xg};function Srt(n,e){function t(){let Ee=!1;const vt=new Ui;let et=null;const yt=new Ui(0,0,0,0);return{setMask:function(Ht){et!==Ht&&!Ee&&(n.colorMask(Ht,Ht,Ht,Ht),et=Ht)},setLocked:function(Ht){Ee=Ht},setClear:function(Ht,Ot,ln,Vt,kt){kt===!0&&(Ht*=Vt,Ot*=Vt,ln*=Vt),vt.set(Ht,Ot,ln,Vt),yt.equals(vt)===!1&&(n.clearColor(Ht,Ot,ln,Vt),yt.copy(vt))},reset:function(){Ee=!1,et=null,yt.set(-1,0,0,0)}}}function r(){let Ee=!1,vt=!1,et=null,yt=null,Ht=null;return{setReversed:function(Ot){if(vt!==Ot){const ln=e.get("EXT_clip_control");vt?ln.clipControlEXT(ln.LOWER_LEFT_EXT,ln.ZERO_TO_ONE_EXT):ln.clipControlEXT(ln.LOWER_LEFT_EXT,ln.NEGATIVE_ONE_TO_ONE_EXT);const Vt=Ht;Ht=null,this.setClear(Vt)}vt=Ot},getReversed:function(){return vt},setTest:function(Ot){Ot?ce(n.DEPTH_TEST):we(n.DEPTH_TEST)},setMask:function(Ot){et!==Ot&&!Ee&&(n.depthMask(Ot),et=Ot)},setFunc:function(Ot){if(vt&&(Ot=_rt[Ot]),yt!==Ot){switch(Ot){case fP:n.depthFunc(n.NEVER);break;case hP:n.depthFunc(n.ALWAYS);break;case pP:n.depthFunc(n.LESS);break;case xg:n.depthFunc(n.LEQUAL);break;case mP:n.depthFunc(n.EQUAL);break;case vP:n.depthFunc(n.GEQUAL);break;case gP:n.depthFunc(n.GREATER);break;case yP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}yt=Ot}},setLocked:function(Ot){Ee=Ot},setClear:function(Ot){Ht!==Ot&&(vt&&(Ot=1-Ot),n.clearDepth(Ot),Ht=Ot)},reset:function(){Ee=!1,et=null,yt=null,Ht=null,vt=!1}}}function i(){let Ee=!1,vt=null,et=null,yt=null,Ht=null,Ot=null,ln=null,Vt=null,kt=null;return{setTest:function(Jt){Ee||(Jt?ce(n.STENCIL_TEST):we(n.STENCIL_TEST))},setMask:function(Jt){vt!==Jt&&!Ee&&(n.stencilMask(Jt),vt=Jt)},setFunc:function(Jt,on,qn){(et!==Jt||yt!==on||Ht!==qn)&&(n.stencilFunc(Jt,on,qn),et=Jt,yt=on,Ht=qn)},setOp:function(Jt,on,qn){(Ot!==Jt||ln!==on||Vt!==qn)&&(n.stencilOp(Jt,on,qn),Ot=Jt,ln=on,Vt=qn)},setLocked:function(Jt){Ee=Jt},setClear:function(Jt){kt!==Jt&&(n.clearStencil(Jt),kt=Jt)},reset:function(){Ee=!1,vt=null,et=null,yt=null,Ht=null,Ot=null,ln=null,Vt=null,kt=null}}}const s=new t,a=new r,o=new i,l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,f=[],p=null,m=!1,v=null,g=null,_=null,b=null,S=null,x=null,w=null,M=new ti(0,0,0),C=0,A=!1,T=null,I=null,D=null,B=null,O=null;const H=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,z=0;const k=n.getParameter(n.VERSION);k.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(k)[1]),L=z>=1):k.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),L=z>=2);let F=null,W={};const q=n.getParameter(n.SCISSOR_BOX),Z=n.getParameter(n.VIEWPORT),se=new Ui().fromArray(q),X=new Ui().fromArray(Z);function ie(Ee,vt,et,yt){const Ht=new Uint8Array(4),Ot=n.createTexture();n.bindTexture(Ee,Ot),n.texParameteri(Ee,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ee,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ln=0;ln<et;ln++)Ee===n.TEXTURE_3D||Ee===n.TEXTURE_2D_ARRAY?n.texImage3D(vt,0,n.RGBA,1,1,yt,0,n.RGBA,n.UNSIGNED_BYTE,Ht):n.texImage2D(vt+ln,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ht);return Ot}const ae={};ae[n.TEXTURE_2D]=ie(n.TEXTURE_2D,n.TEXTURE_2D,1),ae[n.TEXTURE_CUBE_MAP]=ie(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[n.TEXTURE_2D_ARRAY]=ie(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ae[n.TEXTURE_3D]=ie(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ce(n.DEPTH_TEST),a.setFunc(xg),ze(!1),Ve(BV),ce(n.CULL_FACE),j(Yf);function ce(Ee){u[Ee]!==!0&&(n.enable(Ee),u[Ee]=!0)}function we(Ee){u[Ee]!==!1&&(n.disable(Ee),u[Ee]=!1)}function He(Ee,vt){return d[Ee]!==vt?(n.bindFramebuffer(Ee,vt),d[Ee]=vt,Ee===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=vt),Ee===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=vt),!0):!1}function Ge(Ee,vt){let et=f,yt=!1;if(Ee){et=h.get(vt),et===void 0&&(et=[],h.set(vt,et));const Ht=Ee.textures;if(et.length!==Ht.length||et[0]!==n.COLOR_ATTACHMENT0){for(let Ot=0,ln=Ht.length;Ot<ln;Ot++)et[Ot]=n.COLOR_ATTACHMENT0+Ot;et.length=Ht.length,yt=!0}}else et[0]!==n.BACK&&(et[0]=n.BACK,yt=!0);yt&&n.drawBuffers(et)}function me(Ee){return p!==Ee?(n.useProgram(Ee),p=Ee,!0):!1}const be={[gp]:n.FUNC_ADD,[uZe]:n.FUNC_SUBTRACT,[dZe]:n.FUNC_REVERSE_SUBTRACT};be[fZe]=n.MIN,be[hZe]=n.MAX;const oe={[pZe]:n.ZERO,[mZe]:n.ONE,[vZe]:n.SRC_COLOR,[M_]:n.SRC_ALPHA,[xZe]:n.SRC_ALPHA_SATURATE,[_Ze]:n.DST_COLOR,[yZe]:n.DST_ALPHA,[gZe]:n.ONE_MINUS_SRC_COLOR,[T_]:n.ONE_MINUS_SRC_ALPHA,[SZe]:n.ONE_MINUS_DST_COLOR,[bZe]:n.ONE_MINUS_DST_ALPHA,[wZe]:n.CONSTANT_COLOR,[CZe]:n.ONE_MINUS_CONSTANT_COLOR,[MZe]:n.CONSTANT_ALPHA,[TZe]:n.ONE_MINUS_CONSTANT_ALPHA};function j(Ee,vt,et,yt,Ht,Ot,ln,Vt,kt,Jt){if(Ee===Yf){m===!0&&(we(n.BLEND),m=!1);return}if(m===!1&&(ce(n.BLEND),m=!0),Ee!==one){if(Ee!==v||Jt!==A){if((g!==gp||S!==gp)&&(n.blendEquation(n.FUNC_ADD),g=gp,S=gp),Jt)switch(Ee){case Xf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case FV:n.blendFunc(n.ONE,n.ONE);break;case zV:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case UV:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee);break}else switch(Ee){case Xf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case FV:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case zV:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case UV:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee);break}_=null,b=null,x=null,w=null,M.set(0,0,0),C=0,v=Ee,A=Jt}return}Ht=Ht||vt,Ot=Ot||et,ln=ln||yt,(vt!==g||Ht!==S)&&(n.blendEquationSeparate(be[vt],be[Ht]),g=vt,S=Ht),(et!==_||yt!==b||Ot!==x||ln!==w)&&(n.blendFuncSeparate(oe[et],oe[yt],oe[Ot],oe[ln]),_=et,b=yt,x=Ot,w=ln),(Vt.equals(M)===!1||kt!==C)&&(n.blendColor(Vt.r,Vt.g,Vt.b,kt),M.copy(Vt),C=kt),v=Ee,A=!1}function ke(Ee,vt){Ee.side===wl?we(n.CULL_FACE):ce(n.CULL_FACE);let et=Ee.side===xo;vt&&(et=!et),ze(et),Ee.blending===Xf&&Ee.transparent===!1?j(Yf):j(Ee.blending,Ee.blendEquation,Ee.blendSrc,Ee.blendDst,Ee.blendEquationAlpha,Ee.blendSrcAlpha,Ee.blendDstAlpha,Ee.blendColor,Ee.blendAlpha,Ee.premultipliedAlpha),a.setFunc(Ee.depthFunc),a.setTest(Ee.depthTest),a.setMask(Ee.depthWrite),s.setMask(Ee.colorWrite);const yt=Ee.stencilWrite;o.setTest(yt),yt&&(o.setMask(Ee.stencilWriteMask),o.setFunc(Ee.stencilFunc,Ee.stencilRef,Ee.stencilFuncMask),o.setOp(Ee.stencilFail,Ee.stencilZFail,Ee.stencilZPass)),Ze(Ee.polygonOffset,Ee.polygonOffsetFactor,Ee.polygonOffsetUnits),Ee.alphaToCoverage===!0?ce(n.SAMPLE_ALPHA_TO_COVERAGE):we(n.SAMPLE_ALPHA_TO_COVERAGE)}function ze(Ee){T!==Ee&&(Ee?n.frontFace(n.CW):n.frontFace(n.CCW),T=Ee)}function Ve(Ee){Ee!==oZe?(ce(n.CULL_FACE),Ee!==I&&(Ee===BV?n.cullFace(n.BACK):Ee===lZe?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):we(n.CULL_FACE),I=Ee}function Le(Ee){Ee!==D&&(L&&n.lineWidth(Ee),D=Ee)}function Ze(Ee,vt,et){Ee?(ce(n.POLYGON_OFFSET_FILL),(B!==vt||O!==et)&&(n.polygonOffset(vt,et),B=vt,O=et)):we(n.POLYGON_OFFSET_FILL)}function st(Ee){Ee?ce(n.SCISSOR_TEST):we(n.SCISSOR_TEST)}function fe(Ee){Ee===void 0&&(Ee=n.TEXTURE0+H-1),F!==Ee&&(n.activeTexture(Ee),F=Ee)}function V(Ee,vt,et){et===void 0&&(F===null?et=n.TEXTURE0+H-1:et=F);let yt=W[et];yt===void 0&&(yt={type:void 0,texture:void 0},W[et]=yt),(yt.type!==Ee||yt.texture!==vt)&&(F!==et&&(n.activeTexture(et),F=et),n.bindTexture(Ee,vt||ae[Ee]),yt.type=Ee,yt.texture=vt)}function J(){const Ee=W[F];Ee!==void 0&&Ee.type!==void 0&&(n.bindTexture(Ee.type,null),Ee.type=void 0,Ee.texture=void 0)}function he(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function je(){try{n.texSubImage2D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function dt(){try{n.texSubImage3D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function pt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Te(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function ft(){try{n.texStorage2D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Ke(){try{n.texStorage3D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Q(){try{n.texImage2D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function _e(){try{n.texImage3D.apply(n,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Ae(Ee){se.equals(Ee)===!1&&(n.scissor(Ee.x,Ee.y,Ee.z,Ee.w),se.copy(Ee))}function ge(Ee){X.equals(Ee)===!1&&(n.viewport(Ee.x,Ee.y,Ee.z,Ee.w),X.copy(Ee))}function pe(Ee,vt){let et=c.get(vt);et===void 0&&(et=new WeakMap,c.set(vt,et));let yt=et.get(Ee);yt===void 0&&(yt=n.getUniformBlockIndex(vt,Ee.name),et.set(Ee,yt))}function de(Ee,vt){const yt=c.get(vt).get(Ee);l.get(vt)!==yt&&(n.uniformBlockBinding(vt,yt,Ee.__bindingPointIndex),l.set(vt,yt))}function at(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},F=null,W={},d={},h=new WeakMap,f=[],p=null,m=!1,v=null,g=null,_=null,b=null,S=null,x=null,w=null,M=new ti(0,0,0),C=0,A=!1,T=null,I=null,D=null,B=null,O=null,se.set(0,0,n.canvas.width,n.canvas.height),X.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ce,disable:we,bindFramebuffer:He,drawBuffers:Ge,useProgram:me,setBlending:j,setMaterial:ke,setFlipSided:ze,setCullFace:Ve,setLineWidth:Le,setPolygonOffset:Ze,setScissorTest:st,activeTexture:fe,bindTexture:V,unbindTexture:J,compressedTexImage2D:he,compressedTexImage3D:Oe,texImage2D:Q,texImage3D:_e,updateUBOMapping:pe,uniformBlockBinding:de,texStorage2D:ft,texStorage3D:Ke,texSubImage2D:je,texSubImage3D:dt,compressedTexSubImage2D:pt,compressedTexSubImage3D:Te,scissor:Ae,viewport:ge,reset:at}}function xrt(n,e,t,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Kn,u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(fe,V){return f?new OffscreenCanvas(fe,V):CM("canvas")}function m(fe,V,J){let he=1;const Oe=st(fe);if((Oe.width>J||Oe.height>J)&&(he=J/Math.max(Oe.width,Oe.height)),he<1)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap||typeof VideoFrame<"u"&&fe instanceof VideoFrame){const je=Math.floor(he*Oe.width),dt=Math.floor(he*Oe.height);d===void 0&&(d=p(je,dt));const pt=V?p(je,dt):d;return pt.width=je,pt.height=dt,pt.getContext("2d").drawImage(fe,0,0,je,dt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+je+"x"+dt+")."),pt}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),fe;return fe}function v(fe){return fe.generateMipmaps}function g(fe){n.generateMipmap(fe)}function _(fe){return fe.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:fe.isWebGL3DRenderTarget?n.TEXTURE_3D:fe.isWebGLArrayRenderTarget||fe.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function b(fe,V,J,he,Oe=!1){if(fe!==null){if(n[fe]!==void 0)return n[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let je=V;if(V===n.RED&&(J===n.FLOAT&&(je=n.R32F),J===n.HALF_FLOAT&&(je=n.R16F),J===n.UNSIGNED_BYTE&&(je=n.R8)),V===n.RED_INTEGER&&(J===n.UNSIGNED_BYTE&&(je=n.R8UI),J===n.UNSIGNED_SHORT&&(je=n.R16UI),J===n.UNSIGNED_INT&&(je=n.R32UI),J===n.BYTE&&(je=n.R8I),J===n.SHORT&&(je=n.R16I),J===n.INT&&(je=n.R32I)),V===n.RG&&(J===n.FLOAT&&(je=n.RG32F),J===n.HALF_FLOAT&&(je=n.RG16F),J===n.UNSIGNED_BYTE&&(je=n.RG8)),V===n.RG_INTEGER&&(J===n.UNSIGNED_BYTE&&(je=n.RG8UI),J===n.UNSIGNED_SHORT&&(je=n.RG16UI),J===n.UNSIGNED_INT&&(je=n.RG32UI),J===n.BYTE&&(je=n.RG8I),J===n.SHORT&&(je=n.RG16I),J===n.INT&&(je=n.RG32I)),V===n.RGB_INTEGER&&(J===n.UNSIGNED_BYTE&&(je=n.RGB8UI),J===n.UNSIGNED_SHORT&&(je=n.RGB16UI),J===n.UNSIGNED_INT&&(je=n.RGB32UI),J===n.BYTE&&(je=n.RGB8I),J===n.SHORT&&(je=n.RGB16I),J===n.INT&&(je=n.RGB32I)),V===n.RGBA_INTEGER&&(J===n.UNSIGNED_BYTE&&(je=n.RGBA8UI),J===n.UNSIGNED_SHORT&&(je=n.RGBA16UI),J===n.UNSIGNED_INT&&(je=n.RGBA32UI),J===n.BYTE&&(je=n.RGBA8I),J===n.SHORT&&(je=n.RGBA16I),J===n.INT&&(je=n.RGBA32I)),V===n.RGB&&J===n.UNSIGNED_INT_5_9_9_9_REV&&(je=n.RGB9_E5),V===n.RGBA){const dt=Oe?xM:ei.getTransfer(he);J===n.FLOAT&&(je=n.RGBA32F),J===n.HALF_FLOAT&&(je=n.RGBA16F),J===n.UNSIGNED_BYTE&&(je=dt===yi?n.SRGB8_ALPHA8:n.RGBA8),J===n.UNSIGNED_SHORT_4_4_4_4&&(je=n.RGBA4),J===n.UNSIGNED_SHORT_5_5_5_1&&(je=n.RGB5_A1)}return(je===n.R16F||je===n.R32F||je===n.RG16F||je===n.RG32F||je===n.RGBA16F||je===n.RGBA32F)&&e.get("EXT_color_buffer_float"),je}function S(fe,V){let J;return fe?V===null||V===Il||V===Mg?J=n.DEPTH24_STENCIL8:V===lc?J=n.DEPTH32F_STENCIL8:V===A_&&(J=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Il||V===Mg?J=n.DEPTH_COMPONENT24:V===lc?J=n.DEPTH_COMPONENT32F:V===A_&&(J=n.DEPTH_COMPONENT16),J}function x(fe,V){return v(fe)===!0||fe.isFramebufferTexture&&fe.minFilter!==jo&&fe.minFilter!==Xc?Math.log2(Math.max(V.width,V.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?V.mipmaps.length:1}function w(fe){const V=fe.target;V.removeEventListener("dispose",w),C(V),V.isVideoTexture&&u.delete(V)}function M(fe){const V=fe.target;V.removeEventListener("dispose",M),T(V)}function C(fe){const V=r.get(fe);if(V.__webglInit===void 0)return;const J=fe.source,he=h.get(J);if(he){const Oe=he[V.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&A(fe),Object.keys(he).length===0&&h.delete(J)}r.remove(fe)}function A(fe){const V=r.get(fe);n.deleteTexture(V.__webglTexture);const J=fe.source,he=h.get(J);delete he[V.__cacheKey],a.memory.textures--}function T(fe){const V=r.get(fe);if(fe.depthTexture&&(fe.depthTexture.dispose(),r.remove(fe.depthTexture)),fe.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(V.__webglFramebuffer[he]))for(let Oe=0;Oe<V.__webglFramebuffer[he].length;Oe++)n.deleteFramebuffer(V.__webglFramebuffer[he][Oe]);else n.deleteFramebuffer(V.__webglFramebuffer[he]);V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer[he])}else{if(Array.isArray(V.__webglFramebuffer))for(let he=0;he<V.__webglFramebuffer.length;he++)n.deleteFramebuffer(V.__webglFramebuffer[he]);else n.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&n.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let he=0;he<V.__webglColorRenderbuffer.length;he++)V.__webglColorRenderbuffer[he]&&n.deleteRenderbuffer(V.__webglColorRenderbuffer[he]);V.__webglDepthRenderbuffer&&n.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const J=fe.textures;for(let he=0,Oe=J.length;he<Oe;he++){const je=r.get(J[he]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),a.memory.textures--),r.remove(J[he])}r.remove(fe)}let I=0;function D(){I=0}function B(){const fe=I;return fe>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+i.maxTextures),I+=1,fe}function O(fe){const V=[];return V.push(fe.wrapS),V.push(fe.wrapT),V.push(fe.wrapR||0),V.push(fe.magFilter),V.push(fe.minFilter),V.push(fe.anisotropy),V.push(fe.internalFormat),V.push(fe.format),V.push(fe.type),V.push(fe.generateMipmaps),V.push(fe.premultiplyAlpha),V.push(fe.flipY),V.push(fe.unpackAlignment),V.push(fe.colorSpace),V.join()}function H(fe,V){const J=r.get(fe);if(fe.isVideoTexture&&Le(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&J.__version!==fe.version){const he=fe.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{X(J,fe,V);return}}t.bindTexture(n.TEXTURE_2D,J.__webglTexture,n.TEXTURE0+V)}function L(fe,V){const J=r.get(fe);if(fe.version>0&&J.__version!==fe.version){X(J,fe,V);return}t.bindTexture(n.TEXTURE_2D_ARRAY,J.__webglTexture,n.TEXTURE0+V)}function z(fe,V){const J=r.get(fe);if(fe.version>0&&J.__version!==fe.version){X(J,fe,V);return}t.bindTexture(n.TEXTURE_3D,J.__webglTexture,n.TEXTURE0+V)}function k(fe,V){const J=r.get(fe);if(fe.version>0&&J.__version!==fe.version){ie(J,fe,V);return}t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+V)}const F={[SP]:n.REPEAT,[Dp]:n.CLAMP_TO_EDGE,[xP]:n.MIRRORED_REPEAT},W={[jo]:n.NEAREST,[NZe]:n.NEAREST_MIPMAP_NEAREST,[yw]:n.NEAREST_MIPMAP_LINEAR,[Xc]:n.LINEAR,[P4]:n.LINEAR_MIPMAP_NEAREST,[Lp]:n.LINEAR_MIPMAP_LINEAR},q={[HZe]:n.NEVER,[KZe]:n.ALWAYS,[VZe]:n.LESS,[_ne]:n.LEQUAL,[$Ze]:n.EQUAL,[qZe]:n.GEQUAL,[GZe]:n.GREATER,[WZe]:n.NOTEQUAL};function Z(fe,V){if(V.type===lc&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Xc||V.magFilter===P4||V.magFilter===yw||V.magFilter===Lp||V.minFilter===Xc||V.minFilter===P4||V.minFilter===yw||V.minFilter===Lp)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(fe,n.TEXTURE_WRAP_S,F[V.wrapS]),n.texParameteri(fe,n.TEXTURE_WRAP_T,F[V.wrapT]),(fe===n.TEXTURE_3D||fe===n.TEXTURE_2D_ARRAY)&&n.texParameteri(fe,n.TEXTURE_WRAP_R,F[V.wrapR]),n.texParameteri(fe,n.TEXTURE_MAG_FILTER,W[V.magFilter]),n.texParameteri(fe,n.TEXTURE_MIN_FILTER,W[V.minFilter]),V.compareFunction&&(n.texParameteri(fe,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(fe,n.TEXTURE_COMPARE_FUNC,q[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===jo||V.minFilter!==yw&&V.minFilter!==Lp||V.type===lc&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||r.get(V).__currentAnisotropy){const J=e.get("EXT_texture_filter_anisotropic");n.texParameterf(fe,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),r.get(V).__currentAnisotropy=V.anisotropy}}}function se(fe,V){let J=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,V.addEventListener("dispose",w));const he=V.source;let Oe=h.get(he);Oe===void 0&&(Oe={},h.set(he,Oe));const je=O(V);if(je!==fe.__cacheKey){Oe[je]===void 0&&(Oe[je]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,J=!0),Oe[je].usedTimes++;const dt=Oe[fe.__cacheKey];dt!==void 0&&(Oe[fe.__cacheKey].usedTimes--,dt.usedTimes===0&&A(V)),fe.__cacheKey=je,fe.__webglTexture=Oe[je].texture}return J}function X(fe,V,J){let he=n.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(he=n.TEXTURE_2D_ARRAY),V.isData3DTexture&&(he=n.TEXTURE_3D);const Oe=se(fe,V),je=V.source;t.bindTexture(he,fe.__webglTexture,n.TEXTURE0+J);const dt=r.get(je);if(je.version!==dt.__version||Oe===!0){t.activeTexture(n.TEXTURE0+J);const pt=ei.getPrimaries(ei.workingColorSpace),Te=V.colorSpace===Pf?null:ei.getPrimaries(V.colorSpace),ft=V.colorSpace===Pf||pt===Te?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);let Ke=m(V.image,!1,i.maxTextureSize);Ke=Ze(V,Ke);const Q=s.convert(V.format,V.colorSpace),_e=s.convert(V.type);let Ae=b(V.internalFormat,Q,_e,V.colorSpace,V.isVideoTexture);Z(he,V);let ge;const pe=V.mipmaps,de=V.isVideoTexture!==!0,at=dt.__version===void 0||Oe===!0,Ee=je.dataReady,vt=x(V,Ke);if(V.isDepthTexture)Ae=S(V.format===Tg,V.type),at&&(de?t.texStorage2D(n.TEXTURE_2D,1,Ae,Ke.width,Ke.height):t.texImage2D(n.TEXTURE_2D,0,Ae,Ke.width,Ke.height,0,Q,_e,null));else if(V.isDataTexture)if(pe.length>0){de&&at&&t.texStorage2D(n.TEXTURE_2D,vt,Ae,pe[0].width,pe[0].height);for(let et=0,yt=pe.length;et<yt;et++)ge=pe[et],de?Ee&&t.texSubImage2D(n.TEXTURE_2D,et,0,0,ge.width,ge.height,Q,_e,ge.data):t.texImage2D(n.TEXTURE_2D,et,Ae,ge.width,ge.height,0,Q,_e,ge.data);V.generateMipmaps=!1}else de?(at&&t.texStorage2D(n.TEXTURE_2D,vt,Ae,Ke.width,Ke.height),Ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke.width,Ke.height,Q,_e,Ke.data)):t.texImage2D(n.TEXTURE_2D,0,Ae,Ke.width,Ke.height,0,Q,_e,Ke.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){de&&at&&t.texStorage3D(n.TEXTURE_2D_ARRAY,vt,Ae,pe[0].width,pe[0].height,Ke.depth);for(let et=0,yt=pe.length;et<yt;et++)if(ge=pe[et],V.format!==$a)if(Q!==null)if(de){if(Ee)if(V.layerUpdates.size>0){const Ht=c$(ge.width,ge.height,V.format,V.type);for(const Ot of V.layerUpdates){const ln=ge.data.subarray(Ot*Ht/ge.data.BYTES_PER_ELEMENT,(Ot+1)*Ht/ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,et,0,0,Ot,ge.width,ge.height,1,Q,ln)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,et,0,0,0,ge.width,ge.height,Ke.depth,Q,ge.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,et,Ae,ge.width,ge.height,Ke.depth,0,ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else de?Ee&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,et,0,0,0,ge.width,ge.height,Ke.depth,Q,_e,ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,et,Ae,ge.width,ge.height,Ke.depth,0,Q,_e,ge.data)}else{de&&at&&t.texStorage2D(n.TEXTURE_2D,vt,Ae,pe[0].width,pe[0].height);for(let et=0,yt=pe.length;et<yt;et++)ge=pe[et],V.format!==$a?Q!==null?de?Ee&&t.compressedTexSubImage2D(n.TEXTURE_2D,et,0,0,ge.width,ge.height,Q,ge.data):t.compressedTexImage2D(n.TEXTURE_2D,et,Ae,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?Ee&&t.texSubImage2D(n.TEXTURE_2D,et,0,0,ge.width,ge.height,Q,_e,ge.data):t.texImage2D(n.TEXTURE_2D,et,Ae,ge.width,ge.height,0,Q,_e,ge.data)}else if(V.isDataArrayTexture)if(de){if(at&&t.texStorage3D(n.TEXTURE_2D_ARRAY,vt,Ae,Ke.width,Ke.height,Ke.depth),Ee)if(V.layerUpdates.size>0){const et=c$(Ke.width,Ke.height,V.format,V.type);for(const yt of V.layerUpdates){const Ht=Ke.data.subarray(yt*et/Ke.data.BYTES_PER_ELEMENT,(yt+1)*et/Ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,yt,Ke.width,Ke.height,1,Q,_e,Ht)}V.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,Q,_e,Ke.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ae,Ke.width,Ke.height,Ke.depth,0,Q,_e,Ke.data);else if(V.isData3DTexture)de?(at&&t.texStorage3D(n.TEXTURE_3D,vt,Ae,Ke.width,Ke.height,Ke.depth),Ee&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,Q,_e,Ke.data)):t.texImage3D(n.TEXTURE_3D,0,Ae,Ke.width,Ke.height,Ke.depth,0,Q,_e,Ke.data);else if(V.isFramebufferTexture){if(at)if(de)t.texStorage2D(n.TEXTURE_2D,vt,Ae,Ke.width,Ke.height);else{let et=Ke.width,yt=Ke.height;for(let Ht=0;Ht<vt;Ht++)t.texImage2D(n.TEXTURE_2D,Ht,Ae,et,yt,0,Q,_e,null),et>>=1,yt>>=1}}else if(pe.length>0){if(de&&at){const et=st(pe[0]);t.texStorage2D(n.TEXTURE_2D,vt,Ae,et.width,et.height)}for(let et=0,yt=pe.length;et<yt;et++)ge=pe[et],de?Ee&&t.texSubImage2D(n.TEXTURE_2D,et,0,0,Q,_e,ge):t.texImage2D(n.TEXTURE_2D,et,Ae,Q,_e,ge);V.generateMipmaps=!1}else if(de){if(at){const et=st(Ke);t.texStorage2D(n.TEXTURE_2D,vt,Ae,et.width,et.height)}Ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Q,_e,Ke)}else t.texImage2D(n.TEXTURE_2D,0,Ae,Q,_e,Ke);v(V)&&g(he),dt.__version=je.version,V.onUpdate&&V.onUpdate(V)}fe.__version=V.version}function ie(fe,V,J){if(V.image.length!==6)return;const he=se(fe,V),Oe=V.source;t.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+J);const je=r.get(Oe);if(Oe.version!==je.__version||he===!0){t.activeTexture(n.TEXTURE0+J);const dt=ei.getPrimaries(ei.workingColorSpace),pt=V.colorSpace===Pf?null:ei.getPrimaries(V.colorSpace),Te=V.colorSpace===Pf||dt===pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Te);const ft=V.isCompressedTexture||V.image[0].isCompressedTexture,Ke=V.image[0]&&V.image[0].isDataTexture,Q=[];for(let yt=0;yt<6;yt++)!ft&&!Ke?Q[yt]=m(V.image[yt],!0,i.maxCubemapSize):Q[yt]=Ke?V.image[yt].image:V.image[yt],Q[yt]=Ze(V,Q[yt]);const _e=Q[0],Ae=s.convert(V.format,V.colorSpace),ge=s.convert(V.type),pe=b(V.internalFormat,Ae,ge,V.colorSpace),de=V.isVideoTexture!==!0,at=je.__version===void 0||he===!0,Ee=Oe.dataReady;let vt=x(V,_e);Z(n.TEXTURE_CUBE_MAP,V);let et;if(ft){de&&at&&t.texStorage2D(n.TEXTURE_CUBE_MAP,vt,pe,_e.width,_e.height);for(let yt=0;yt<6;yt++){et=Q[yt].mipmaps;for(let Ht=0;Ht<et.length;Ht++){const Ot=et[Ht];V.format!==$a?Ae!==null?de?Ee&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht,0,0,Ot.width,Ot.height,Ae,Ot.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht,pe,Ot.width,Ot.height,0,Ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht,0,0,Ot.width,Ot.height,Ae,ge,Ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht,pe,Ot.width,Ot.height,0,Ae,ge,Ot.data)}}}else{if(et=V.mipmaps,de&&at){et.length>0&&vt++;const yt=st(Q[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,vt,pe,yt.width,yt.height)}for(let yt=0;yt<6;yt++)if(Ke){de?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,0,0,Q[yt].width,Q[yt].height,Ae,ge,Q[yt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,pe,Q[yt].width,Q[yt].height,0,Ae,ge,Q[yt].data);for(let Ht=0;Ht<et.length;Ht++){const ln=et[Ht].image[yt].image;de?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht+1,0,0,ln.width,ln.height,Ae,ge,ln.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht+1,pe,ln.width,ln.height,0,Ae,ge,ln.data)}}else{de?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,0,0,Ae,ge,Q[yt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0,pe,Ae,ge,Q[yt]);for(let Ht=0;Ht<et.length;Ht++){const Ot=et[Ht];de?Ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht+1,0,0,Ae,ge,Ot.image[yt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,Ht+1,pe,Ae,ge,Ot.image[yt])}}}v(V)&&g(n.TEXTURE_CUBE_MAP),je.__version=Oe.version,V.onUpdate&&V.onUpdate(V)}fe.__version=V.version}function ae(fe,V,J,he,Oe,je){const dt=s.convert(J.format,J.colorSpace),pt=s.convert(J.type),Te=b(J.internalFormat,dt,pt,J.colorSpace),ft=r.get(V),Ke=r.get(J);if(Ke.__renderTarget=V,!ft.__hasExternalTextures){const Q=Math.max(1,V.width>>je),_e=Math.max(1,V.height>>je);Oe===n.TEXTURE_3D||Oe===n.TEXTURE_2D_ARRAY?t.texImage3D(Oe,je,Te,Q,_e,V.depth,0,dt,pt,null):t.texImage2D(Oe,je,Te,Q,_e,0,dt,pt,null)}t.bindFramebuffer(n.FRAMEBUFFER,fe),Ve(V)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,he,Oe,Ke.__webglTexture,0,ze(V)):(Oe===n.TEXTURE_2D||Oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,he,Oe,Ke.__webglTexture,je),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ce(fe,V,J){if(n.bindRenderbuffer(n.RENDERBUFFER,fe),V.depthBuffer){const he=V.depthTexture,Oe=he&&he.isDepthTexture?he.type:null,je=S(V.stencilBuffer,Oe),dt=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pt=ze(V);Ve(V)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pt,je,V.width,V.height):J?n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,je,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,je,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,fe)}else{const he=V.textures;for(let Oe=0;Oe<he.length;Oe++){const je=he[Oe],dt=s.convert(je.format,je.colorSpace),pt=s.convert(je.type),Te=b(je.internalFormat,dt,pt,je.colorSpace),ft=ze(V);J&&Ve(V)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ft,Te,V.width,V.height):Ve(V)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ft,Te,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,Te,V.width,V.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function we(fe,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,fe),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const he=r.get(V.depthTexture);he.__renderTarget=V,(!he.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),H(V.depthTexture,0);const Oe=he.__webglTexture,je=ze(V);if(V.depthTexture.format===qp)Ve(V)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0,je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0);else if(V.depthTexture.format===Tg)Ve(V)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0,je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function He(fe){const V=r.get(fe),J=fe.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==fe.depthTexture){const he=fe.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),he){const Oe=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,he.removeEventListener("dispose",Oe)};he.addEventListener("dispose",Oe),V.__depthDisposeCallback=Oe}V.__boundDepthTexture=he}if(fe.depthTexture&&!V.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");we(V.__webglFramebuffer,fe)}else if(J){V.__webglDepthbuffer=[];for(let he=0;he<6;he++)if(t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[he]),V.__webglDepthbuffer[he]===void 0)V.__webglDepthbuffer[he]=n.createRenderbuffer(),ce(V.__webglDepthbuffer[he],fe,!1);else{const Oe=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=V.__webglDepthbuffer[he];n.bindRenderbuffer(n.RENDERBUFFER,je),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,je)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=n.createRenderbuffer(),ce(V.__webglDepthbuffer,fe,!1);else{const he=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=V.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Oe),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,Oe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ge(fe,V,J){const he=r.get(fe);V!==void 0&&ae(he.__webglFramebuffer,fe,fe.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),J!==void 0&&He(fe)}function me(fe){const V=fe.texture,J=r.get(fe),he=r.get(V);fe.addEventListener("dispose",M);const Oe=fe.textures,je=fe.isWebGLCubeRenderTarget===!0,dt=Oe.length>1;if(dt||(he.__webglTexture===void 0&&(he.__webglTexture=n.createTexture()),he.__version=V.version,a.memory.textures++),je){J.__webglFramebuffer=[];for(let pt=0;pt<6;pt++)if(V.mipmaps&&V.mipmaps.length>0){J.__webglFramebuffer[pt]=[];for(let Te=0;Te<V.mipmaps.length;Te++)J.__webglFramebuffer[pt][Te]=n.createFramebuffer()}else J.__webglFramebuffer[pt]=n.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){J.__webglFramebuffer=[];for(let pt=0;pt<V.mipmaps.length;pt++)J.__webglFramebuffer[pt]=n.createFramebuffer()}else J.__webglFramebuffer=n.createFramebuffer();if(dt)for(let pt=0,Te=Oe.length;pt<Te;pt++){const ft=r.get(Oe[pt]);ft.__webglTexture===void 0&&(ft.__webglTexture=n.createTexture(),a.memory.textures++)}if(fe.samples>0&&Ve(fe)===!1){J.__webglMultisampledFramebuffer=n.createFramebuffer(),J.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let pt=0;pt<Oe.length;pt++){const Te=Oe[pt];J.__webglColorRenderbuffer[pt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,J.__webglColorRenderbuffer[pt]);const ft=s.convert(Te.format,Te.colorSpace),Ke=s.convert(Te.type),Q=b(Te.internalFormat,ft,Ke,Te.colorSpace,fe.isXRRenderTarget===!0),_e=ze(fe);n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,Q,fe.width,fe.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pt,n.RENDERBUFFER,J.__webglColorRenderbuffer[pt])}n.bindRenderbuffer(n.RENDERBUFFER,null),fe.depthBuffer&&(J.__webglDepthRenderbuffer=n.createRenderbuffer(),ce(J.__webglDepthRenderbuffer,fe,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(je){t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture),Z(n.TEXTURE_CUBE_MAP,V);for(let pt=0;pt<6;pt++)if(V.mipmaps&&V.mipmaps.length>0)for(let Te=0;Te<V.mipmaps.length;Te++)ae(J.__webglFramebuffer[pt][Te],fe,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Te);else ae(J.__webglFramebuffer[pt],fe,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0);v(V)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(dt){for(let pt=0,Te=Oe.length;pt<Te;pt++){const ft=Oe[pt],Ke=r.get(ft);t.bindTexture(n.TEXTURE_2D,Ke.__webglTexture),Z(n.TEXTURE_2D,ft),ae(J.__webglFramebuffer,fe,ft,n.COLOR_ATTACHMENT0+pt,n.TEXTURE_2D,0),v(ft)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let pt=n.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(pt=fe.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(pt,he.__webglTexture),Z(pt,V),V.mipmaps&&V.mipmaps.length>0)for(let Te=0;Te<V.mipmaps.length;Te++)ae(J.__webglFramebuffer[Te],fe,V,n.COLOR_ATTACHMENT0,pt,Te);else ae(J.__webglFramebuffer,fe,V,n.COLOR_ATTACHMENT0,pt,0);v(V)&&g(pt),t.unbindTexture()}fe.depthBuffer&&He(fe)}function be(fe){const V=fe.textures;for(let J=0,he=V.length;J<he;J++){const Oe=V[J];if(v(Oe)){const je=_(fe),dt=r.get(Oe).__webglTexture;t.bindTexture(je,dt),g(je),t.unbindTexture()}}}const oe=[],j=[];function ke(fe){if(fe.samples>0){if(Ve(fe)===!1){const V=fe.textures,J=fe.width,he=fe.height;let Oe=n.COLOR_BUFFER_BIT;const je=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,dt=r.get(fe),pt=V.length>1;if(pt)for(let Te=0;Te<V.length;Te++)t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let Te=0;Te<V.length;Te++){if(fe.resolveDepthBuffer&&(fe.depthBuffer&&(Oe|=n.DEPTH_BUFFER_BIT),fe.stencilBuffer&&fe.resolveStencilBuffer&&(Oe|=n.STENCIL_BUFFER_BIT)),pt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,dt.__webglColorRenderbuffer[Te]);const ft=r.get(V[Te]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ft,0)}n.blitFramebuffer(0,0,J,he,0,0,J,he,Oe,n.NEAREST),l===!0&&(oe.length=0,j.length=0,oe.push(n.COLOR_ATTACHMENT0+Te),fe.depthBuffer&&fe.resolveDepthBuffer===!1&&(oe.push(je),j.push(je),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,oe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),pt)for(let Te=0;Te<V.length;Te++){t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.RENDERBUFFER,dt.__webglColorRenderbuffer[Te]);const ft=r.get(V[Te]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Te,n.TEXTURE_2D,ft,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(fe.depthBuffer&&fe.resolveDepthBuffer===!1&&l){const V=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[V])}}}function ze(fe){return Math.min(i.maxSamples,fe.samples)}function Ve(fe){const V=r.get(fe);return fe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Le(fe){const V=a.render.frame;u.get(fe)!==V&&(u.set(fe,V),fe.update())}function Ze(fe,V){const J=fe.colorSpace,he=fe.format,Oe=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||J!==Ag&&J!==Pf&&(ei.getTransfer(J)===yi?(he!==$a||Oe!==fu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",J)),V}function st(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement?(c.width=fe.naturalWidth||fe.width,c.height=fe.naturalHeight||fe.height):typeof VideoFrame<"u"&&fe instanceof VideoFrame?(c.width=fe.displayWidth,c.height=fe.displayHeight):(c.width=fe.width,c.height=fe.height),c}this.allocateTextureUnit=B,this.resetTextureUnits=D,this.setTexture2D=H,this.setTexture2DArray=L,this.setTexture3D=z,this.setTextureCube=k,this.rebindTextures=Ge,this.setupRenderTarget=me,this.updateRenderTargetMipmap=be,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=Ve}function zne(n,e){function t(r,i=Pf){let s;const a=ei.getTransfer(i);if(r===fu)return n.UNSIGNED_BYTE;if(r===e8)return n.UNSIGNED_SHORT_4_4_4_4;if(r===t8)return n.UNSIGNED_SHORT_5_5_5_1;if(r===fne)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===une)return n.BYTE;if(r===dne)return n.SHORT;if(r===A_)return n.UNSIGNED_SHORT;if(r===Jk)return n.INT;if(r===Il)return n.UNSIGNED_INT;if(r===lc)return n.FLOAT;if(r===py)return n.HALF_FLOAT;if(r===hne)return n.ALPHA;if(r===pne)return n.RGB;if(r===$a)return n.RGBA;if(r===mne)return n.LUMINANCE;if(r===vne)return n.LUMINANCE_ALPHA;if(r===qp)return n.DEPTH_COMPONENT;if(r===Tg)return n.DEPTH_STENCIL;if(r===gne)return n.RED;if(r===YT)return n.RED_INTEGER;if(r===yne)return n.RG;if(r===n8)return n.RG_INTEGER;if(r===zv)return n.RGBA_INTEGER;if(r===F2||r===z2||r===U2||r===H2)if(a===yi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===F2)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===z2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===U2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===H2)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===F2)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===z2)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===U2)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===H2)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===wP||r===CP||r===MP||r===TP)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===wP)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===CP)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===MP)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===TP)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===AP||r===EP||r===IP)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===AP||r===EP)return a===yi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===IP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===RP||r===PP||r===DP||r===LP||r===kP||r===OP||r===NP||r===BP||r===FP||r===zP||r===UP||r===HP||r===VP||r===$P)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===RP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===PP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===DP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===LP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===kP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===OP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===NP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===BP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===FP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===zP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===UP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===HP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===VP)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===$P)return a===yi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===V2||r===GP||r===WP)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===V2)return a===yi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===GP)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===WP)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===bne||r===qP||r===KP||r===YP)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===V2)return s.COMPRESSED_RED_RGTC1_EXT;if(r===qP)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===KP)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===YP)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Mg?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const wrt={type:"move"};class iI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Nw,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Nw,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new it,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new it),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Nw,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new it,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new it),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,r),g=this._getHandJoint(c,m);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(wrt)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Nw;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const Crt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Mrt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Trt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new qa,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Qo({vertexShader:Crt,fragmentShader:Mrt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ds(new Ig(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Art extends A0{constructor(e,t){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,p=null;const m=new Trt,v=t.getContextAttributes();let g=null,_=null;const b=[],S=[],x=new Kn;let w=null;const M=new xl;M.viewport=new Ui;const C=new xl;C.viewport=new Ui;const A=[M,C],T=new KQe;let I=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(X){let ie=b[X];return ie===void 0&&(ie=new iI,b[X]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(X){let ie=b[X];return ie===void 0&&(ie=new iI,b[X]=ie),ie.getGripSpace()},this.getHand=function(X){let ie=b[X];return ie===void 0&&(ie=new iI,b[X]=ie),ie.getHandSpace()};function B(X){const ie=S.indexOf(X.inputSource);if(ie===-1)return;const ae=b[ie];ae!==void 0&&(ae.update(X.inputSource,X.frame,c||a),ae.dispatchEvent({type:X.type,data:X.inputSource}))}function O(){i.removeEventListener("select",B),i.removeEventListener("selectstart",B),i.removeEventListener("selectend",B),i.removeEventListener("squeeze",B),i.removeEventListener("squeezestart",B),i.removeEventListener("squeezeend",B),i.removeEventListener("end",O),i.removeEventListener("inputsourceschange",H);for(let X=0;X<b.length;X++){const ie=S[X];ie!==null&&(S[X]=null,b[X].disconnect(ie))}I=null,D=null,m.reset(),e.setRenderTarget(g),f=null,h=null,d=null,i=null,_=null,se.stop(),r.isPresenting=!1,e.setPixelRatio(w),e.setSize(x.width,x.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(X){s=X,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){o=X,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(X){c=X},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(X){if(i=X,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",B),i.addEventListener("selectstart",B),i.addEventListener("selectend",B),i.addEventListener("squeeze",B),i.addEventListener("squeezestart",B),i.addEventListener("squeezeend",B),i.addEventListener("end",O),i.addEventListener("inputsourceschange",H),v.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(x),i.renderState.layers===void 0){const ie={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,ie),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),_=new vh(f.framebufferWidth,f.framebufferHeight,{format:$a,type:fu,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let ie=null,ae=null,ce=null;v.depth&&(ce=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ie=v.stencil?Tg:qp,ae=v.stencil?Mg:Il);const we={colorFormat:t.RGBA8,depthFormat:ce,scaleFactor:s};d=new XRWebGLBinding(i,t),h=d.createProjectionLayer(we),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new vh(h.textureWidth,h.textureHeight,{format:$a,type:fu,depthTexture:new s8(h.textureWidth,h.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),se.setContext(i),se.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function H(X){for(let ie=0;ie<X.removed.length;ie++){const ae=X.removed[ie],ce=S.indexOf(ae);ce>=0&&(S[ce]=null,b[ce].disconnect(ae))}for(let ie=0;ie<X.added.length;ie++){const ae=X.added[ie];let ce=S.indexOf(ae);if(ce===-1){for(let He=0;He<b.length;He++)if(He>=S.length){S.push(ae),ce=He;break}else if(S[He]===null){S[He]=ae,ce=He;break}if(ce===-1)break}const we=b[ce];we&&we.connect(ae)}}const L=new it,z=new it;function k(X,ie,ae){L.setFromMatrixPosition(ie.matrixWorld),z.setFromMatrixPosition(ae.matrixWorld);const ce=L.distanceTo(z),we=ie.projectionMatrix.elements,He=ae.projectionMatrix.elements,Ge=we[14]/(we[10]-1),me=we[14]/(we[10]+1),be=(we[9]+1)/we[5],oe=(we[9]-1)/we[5],j=(we[8]-1)/we[0],ke=(He[8]+1)/He[0],ze=Ge*j,Ve=Ge*ke,Le=ce/(-j+ke),Ze=Le*-j;if(ie.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(Ze),X.translateZ(Le),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert(),we[10]===-1)X.projectionMatrix.copy(ie.projectionMatrix),X.projectionMatrixInverse.copy(ie.projectionMatrixInverse);else{const st=Ge+Le,fe=me+Le,V=ze-Ze,J=Ve+(ce-Ze),he=be*me/fe*st,Oe=oe*me/fe*st;X.projectionMatrix.makePerspective(V,J,he,Oe,st,fe),X.projectionMatrixInverse.copy(X.projectionMatrix).invert()}}function F(X,ie){ie===null?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(ie.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCamera=function(X){if(i===null)return;let ie=X.near,ae=X.far;m.texture!==null&&(m.depthNear>0&&(ie=m.depthNear),m.depthFar>0&&(ae=m.depthFar)),T.near=C.near=M.near=ie,T.far=C.far=M.far=ae,(I!==T.near||D!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),I=T.near,D=T.far),M.layers.mask=X.layers.mask|2,C.layers.mask=X.layers.mask|4,T.layers.mask=M.layers.mask|C.layers.mask;const ce=X.parent,we=T.cameras;F(T,ce);for(let He=0;He<we.length;He++)F(we[He],ce);we.length===2?k(T,M,C):T.projectionMatrix.copy(M.projectionMatrix),W(X,T,ce)};function W(X,ie,ae){ae===null?X.matrix.copy(ie.matrixWorld):(X.matrix.copy(ae.matrixWorld),X.matrix.invert(),X.matrix.multiply(ie.matrixWorld)),X.matrix.decompose(X.position,X.quaternion,X.scale),X.updateMatrixWorld(!0),X.projectionMatrix.copy(ie.projectionMatrix),X.projectionMatrixInverse.copy(ie.projectionMatrixInverse),X.isPerspectiveCamera&&(X.fov=E_*2*Math.atan(1/X.projectionMatrix.elements[5]),X.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(X){l=X,h!==null&&(h.fixedFoveation=X),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=X)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(T)};let q=null;function Z(X,ie){if(u=ie.getViewerPose(c||a),p=ie,u!==null){const ae=u.views;f!==null&&(e.setRenderTargetFramebuffer(_,f.framebuffer),e.setRenderTarget(_));let ce=!1;ae.length!==T.cameras.length&&(T.cameras.length=0,ce=!0);for(let He=0;He<ae.length;He++){const Ge=ae[He];let me=null;if(f!==null)me=f.getViewport(Ge);else{const oe=d.getViewSubImage(h,Ge);me=oe.viewport,He===0&&(e.setRenderTargetTextures(_,oe.colorTexture,h.ignoreDepthValues?void 0:oe.depthStencilTexture),e.setRenderTarget(_))}let be=A[He];be===void 0&&(be=new xl,be.layers.enable(He),be.viewport=new Ui,A[He]=be),be.matrix.fromArray(Ge.transform.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale),be.projectionMatrix.fromArray(Ge.projectionMatrix),be.projectionMatrixInverse.copy(be.projectionMatrix).invert(),be.viewport.set(me.x,me.y,me.width,me.height),He===0&&(T.matrix.copy(be.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ce===!0&&T.cameras.push(be)}const we=i.enabledFeatures;if(we&&we.includes("depth-sensing")){const He=d.getDepthInformation(ae[0]);He&&He.isValid&&He.texture&&m.init(e,He,i.renderState)}}for(let ae=0;ae<b.length;ae++){const ce=S[ae],we=b[ae];ce!==null&&we!==void 0&&we.update(ce,ie,c||a)}q&&q(X,ie),ie.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ie}),p=null}const se=new kne;se.setAnimationLoop(Z),this.setAnimationLoop=function(X){q=X},this.dispose=function(){}}}const rp=new Ed,Ert=new hr;function Irt(n,e){function t(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function r(v,g){g.color.getRGB(v.fogColor.value,Rne(n)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function i(v,g,_,b,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(v,g):g.isMeshToonMaterial?(s(v,g),d(v,g)):g.isMeshPhongMaterial?(s(v,g),u(v,g)):g.isMeshStandardMaterial?(s(v,g),h(v,g),g.isMeshPhysicalMaterial&&f(v,g,S)):g.isMeshMatcapMaterial?(s(v,g),p(v,g)):g.isMeshDepthMaterial?s(v,g):g.isMeshDistanceMaterial?(s(v,g),m(v,g)):g.isMeshNormalMaterial?s(v,g):g.isLineBasicMaterial?(a(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,_,b):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===xo&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===xo&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const _=e.get(g),b=_.envMap,S=_.envMapRotation;b&&(v.envMap.value=b,rp.copy(S),rp.x*=-1,rp.y*=-1,rp.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(rp.y*=-1,rp.z*=-1),v.envMapRotation.value.setFromMatrix4(Ert.makeRotationFromEuler(rp)),v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,_,b){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*_,v.scale.value=b*.5,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function h(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function f(v,g,_){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===xo&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){const _=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(_.matrixWorld),v.nearDistance.value=_.shadow.camera.near,v.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Rrt(n,e,t,r){let i={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,b){const S=b.program;r.uniformBlockBinding(_,S)}function c(_,b){let S=i[_.id];S===void 0&&(p(_),S=u(_),i[_.id]=S,_.addEventListener("dispose",v));const x=b.program;r.updateUBOMapping(_,x);const w=e.render.frame;s[_.id]!==w&&(h(_),s[_.id]=w)}function u(_){const b=d();_.__bindingPointIndex=b;const S=n.createBuffer(),x=_.__size,w=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,x,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,S),S}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const b=i[_.id],S=_.uniforms,x=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let w=0,M=S.length;w<M;w++){const C=Array.isArray(S[w])?S[w]:[S[w]];for(let A=0,T=C.length;A<T;A++){const I=C[A];if(f(I,w,A,x)===!0){const D=I.__offset,B=Array.isArray(I.value)?I.value:[I.value];let O=0;for(let H=0;H<B.length;H++){const L=B[H],z=m(L);typeof L=="number"||typeof L=="boolean"?(I.__data[0]=L,n.bufferSubData(n.UNIFORM_BUFFER,D+O,I.__data)):L.isMatrix3?(I.__data[0]=L.elements[0],I.__data[1]=L.elements[1],I.__data[2]=L.elements[2],I.__data[3]=0,I.__data[4]=L.elements[3],I.__data[5]=L.elements[4],I.__data[6]=L.elements[5],I.__data[7]=0,I.__data[8]=L.elements[6],I.__data[9]=L.elements[7],I.__data[10]=L.elements[8],I.__data[11]=0):(L.toArray(I.__data,O),O+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(_,b,S,x){const w=_.value,M=b+"_"+S;if(x[M]===void 0)return typeof w=="number"||typeof w=="boolean"?x[M]=w:x[M]=w.clone(),!0;{const C=x[M];if(typeof w=="number"||typeof w=="boolean"){if(C!==w)return x[M]=w,!0}else if(C.equals(w)===!1)return C.copy(w),!0}return!1}function p(_){const b=_.uniforms;let S=0;const x=16;for(let M=0,C=b.length;M<C;M++){const A=Array.isArray(b[M])?b[M]:[b[M]];for(let T=0,I=A.length;T<I;T++){const D=A[T],B=Array.isArray(D.value)?D.value:[D.value];for(let O=0,H=B.length;O<H;O++){const L=B[O],z=m(L),k=S%x,F=k%z.boundary,W=k+F;S+=F,W!==0&&x-W<z.storage&&(S+=x-W),D.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=S,S+=z.storage}}}const w=S%x;return w>0&&(S+=x-w),_.__size=S,_.__cache={},this}function m(_){const b={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(b.boundary=4,b.storage=4):_.isVector2?(b.boundary=8,b.storage=8):_.isVector3||_.isColor?(b.boundary=16,b.storage=12):_.isVector4?(b.boundary=16,b.storage=16):_.isMatrix3?(b.boundary=48,b.storage=48):_.isMatrix4?(b.boundary=64,b.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),b}function v(_){const b=_.target;b.removeEventListener("dispose",v);const S=a.indexOf(b.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function g(){for(const _ in i)n.deleteBuffer(i[_]);a=[],i={},s={}}return{bind:l,update:c,dispose:g}}class Prt{constructor(e={}){const{canvas:t=dQe(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=a;const p=new Uint32Array(4),m=new Int32Array(4);let v=null,g=null;const _=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=gl,this.toneMapping=jf,this.toneMappingExposure=1;const S=this;let x=!1,w=0,M=0,C=null,A=-1,T=null;const I=new Ui,D=new Ui;let B=null;const O=new ti(0);let H=0,L=t.width,z=t.height,k=1,F=null,W=null;const q=new Ui(0,0,L,z),Z=new Ui(0,0,L,z);let se=!1;const X=new Lne;let ie=!1,ae=!1;const ce=new hr,we=new hr,He=new it,Ge=new Ui,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let be=!1;function oe(){return C===null?k:1}let j=r;function ke(Pe,mt){return t.getContext(Pe,mt)}try{const Pe={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Qk}`),t.addEventListener("webglcontextlost",yt,!1),t.addEventListener("webglcontextrestored",Ht,!1),t.addEventListener("webglcontextcreationerror",Ot,!1),j===null){const mt="webgl2";if(j=ke(mt,Pe),j===null)throw ke(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Pe){throw console.error("THREE.WebGLRenderer: "+Pe.message),Pe}let ze,Ve,Le,Ze,st,fe,V,J,he,Oe,je,dt,pt,Te,ft,Ke,Q,_e,Ae,ge,pe,de,at,Ee;function vt(){ze=new Htt(j),ze.init(),de=new zne(j,ze),Ve=new Ott(j,ze,e,de),Le=new Srt(j,ze),Ve.reverseDepthBuffer&&h&&Le.buffers.depth.setReversed(!0),Ze=new Gtt(j),st=new lrt,fe=new xrt(j,ze,Le,st,Ve,de,Ze),V=new Btt(S),J=new Utt(S),he=new XQe(j),at=new Ltt(j,he),Oe=new Vtt(j,he,Ze,at),je=new qtt(j,Oe,he,Ze),Ae=new Wtt(j,Ve,fe),Ke=new Ntt(st),dt=new ort(S,V,J,ze,Ve,at,Ke),pt=new Irt(S,st),Te=new urt,ft=new vrt(ze),_e=new Dtt(S,V,J,Le,je,f,l),Q=new brt(S,je,Ve),Ee=new Rrt(j,Ze,Ve,Le),ge=new ktt(j,ze,Ze),pe=new $tt(j,ze,Ze),Ze.programs=dt.programs,S.capabilities=Ve,S.extensions=ze,S.properties=st,S.renderLists=Te,S.shadowMap=Q,S.state=Le,S.info=Ze}vt();const et=new Art(S,j);this.xr=et,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const Pe=ze.get("WEBGL_lose_context");Pe&&Pe.loseContext()},this.forceContextRestore=function(){const Pe=ze.get("WEBGL_lose_context");Pe&&Pe.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(Pe){Pe!==void 0&&(k=Pe,this.setSize(L,z,!1))},this.getSize=function(Pe){return Pe.set(L,z)},this.setSize=function(Pe,mt,Mt=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=Pe,z=mt,t.width=Math.floor(Pe*k),t.height=Math.floor(mt*k),Mt===!0&&(t.style.width=Pe+"px",t.style.height=mt+"px"),this.setViewport(0,0,Pe,mt)},this.getDrawingBufferSize=function(Pe){return Pe.set(L*k,z*k).floor()},this.setDrawingBufferSize=function(Pe,mt,Mt){L=Pe,z=mt,k=Mt,t.width=Math.floor(Pe*Mt),t.height=Math.floor(mt*Mt),this.setViewport(0,0,Pe,mt)},this.getCurrentViewport=function(Pe){return Pe.copy(I)},this.getViewport=function(Pe){return Pe.copy(q)},this.setViewport=function(Pe,mt,Mt,We){Pe.isVector4?q.set(Pe.x,Pe.y,Pe.z,Pe.w):q.set(Pe,mt,Mt,We),Le.viewport(I.copy(q).multiplyScalar(k).round())},this.getScissor=function(Pe){return Pe.copy(Z)},this.setScissor=function(Pe,mt,Mt,We){Pe.isVector4?Z.set(Pe.x,Pe.y,Pe.z,Pe.w):Z.set(Pe,mt,Mt,We),Le.scissor(D.copy(Z).multiplyScalar(k).round())},this.getScissorTest=function(){return se},this.setScissorTest=function(Pe){Le.setScissorTest(se=Pe)},this.setOpaqueSort=function(Pe){F=Pe},this.setTransparentSort=function(Pe){W=Pe},this.getClearColor=function(Pe){return Pe.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(Pe=!0,mt=!0,Mt=!0){let We=0;if(Pe){let tt=!1;if(C!==null){const bt=C.texture.format;tt=bt===zv||bt===n8||bt===YT}if(tt){const bt=C.texture.type,Dt=bt===fu||bt===Il||bt===A_||bt===Mg||bt===e8||bt===t8,Kt=_e.getClearColor(),fn=_e.getClearAlpha(),On=Kt.r,nn=Kt.g,Tn=Kt.b;Dt?(p[0]=On,p[1]=nn,p[2]=Tn,p[3]=fn,j.clearBufferuiv(j.COLOR,0,p)):(m[0]=On,m[1]=nn,m[2]=Tn,m[3]=fn,j.clearBufferiv(j.COLOR,0,m))}else We|=j.COLOR_BUFFER_BIT}mt&&(We|=j.DEPTH_BUFFER_BIT),Mt&&(We|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(We)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",yt,!1),t.removeEventListener("webglcontextrestored",Ht,!1),t.removeEventListener("webglcontextcreationerror",Ot,!1),_e.dispose(),Te.dispose(),ft.dispose(),st.dispose(),V.dispose(),J.dispose(),je.dispose(),at.dispose(),Ee.dispose(),dt.dispose(),et.dispose(),et.removeEventListener("sessionstart",K),et.removeEventListener("sessionend",te),$t.stop()};function yt(Pe){Pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ht(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const Pe=Ze.autoReset,mt=Q.enabled,Mt=Q.autoUpdate,We=Q.needsUpdate,tt=Q.type;vt(),Ze.autoReset=Pe,Q.enabled=mt,Q.autoUpdate=Mt,Q.needsUpdate=We,Q.type=tt}function Ot(Pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Pe.statusMessage)}function ln(Pe){const mt=Pe.target;mt.removeEventListener("dispose",ln),Vt(mt)}function Vt(Pe){kt(Pe),st.remove(Pe)}function kt(Pe){const mt=st.get(Pe).programs;mt!==void 0&&(mt.forEach(function(Mt){dt.releaseProgram(Mt)}),Pe.isShaderMaterial&&dt.releaseShaderCache(Pe))}this.renderBufferDirect=function(Pe,mt,Mt,We,tt,bt){mt===null&&(mt=me);const Dt=tt.isMesh&&tt.matrixWorld.determinant()<0,Kt=Sn(Pe,mt,Mt,We,tt);Le.setMaterial(We,Dt);let fn=Mt.index,On=1;if(We.wireframe===!0){if(fn=Oe.getWireframeAttribute(Mt),fn===void 0)return;On=2}const nn=Mt.drawRange,Tn=Mt.attributes.position;let In=nn.start*On,rr=(nn.start+nn.count)*On;bt!==null&&(In=Math.max(In,bt.start*On),rr=Math.min(rr,(bt.start+bt.count)*On)),fn!==null?(In=Math.max(In,0),rr=Math.min(rr,fn.count)):Tn!=null&&(In=Math.max(In,0),rr=Math.min(rr,Tn.count));const Or=rr-In;if(Or<0||Or===1/0)return;at.setup(tt,We,Kt,Mt,fn);let vr,Sr=ge;if(fn!==null&&(vr=he.get(fn),Sr=pe,Sr.setIndex(vr)),tt.isMesh)We.wireframe===!0?(Le.setLineWidth(We.wireframeLinewidth*oe()),Sr.setMode(j.LINES)):Sr.setMode(j.TRIANGLES);else if(tt.isLine){let Yn=We.linewidth;Yn===void 0&&(Yn=1),Le.setLineWidth(Yn*oe()),tt.isLineSegments?Sr.setMode(j.LINES):tt.isLineLoop?Sr.setMode(j.LINE_LOOP):Sr.setMode(j.LINE_STRIP)}else tt.isPoints?Sr.setMode(j.POINTS):tt.isSprite&&Sr.setMode(j.TRIANGLES);if(tt.isBatchedMesh)if(tt._multiDrawInstances!==null)Sr.renderMultiDrawInstances(tt._multiDrawStarts,tt._multiDrawCounts,tt._multiDrawCount,tt._multiDrawInstances);else if(ze.get("WEBGL_multi_draw"))Sr.renderMultiDraw(tt._multiDrawStarts,tt._multiDrawCounts,tt._multiDrawCount);else{const Yn=tt._multiDrawStarts,bi=tt._multiDrawCounts,Wr=tt._multiDrawCount,Ia=fn?he.get(fn).bytesPerElement:1,Ja=st.get(We).currentProgram.getUniforms();for(let gr=0;gr<Wr;gr++)Ja.setValue(j,"_gl_DrawID",gr),Sr.render(Yn[gr]/Ia,bi[gr])}else if(tt.isInstancedMesh)Sr.renderInstances(In,Or,tt.count);else if(Mt.isInstancedBufferGeometry){const Yn=Mt._maxInstanceCount!==void 0?Mt._maxInstanceCount:1/0,bi=Math.min(Mt.instanceCount,Yn);Sr.renderInstances(In,Or,bi)}else Sr.render(In,Or)};function Jt(Pe,mt,Mt){Pe.transparent===!0&&Pe.side===wl&&Pe.forceSinglePass===!1?(Pe.side=xo,Pe.needsUpdate=!0,nt(Pe,mt,Mt),Pe.side=du,Pe.needsUpdate=!0,nt(Pe,mt,Mt),Pe.side=wl):nt(Pe,mt,Mt)}this.compile=function(Pe,mt,Mt=null){Mt===null&&(Mt=Pe),g=ft.get(Mt),g.init(mt),b.push(g),Mt.traverseVisible(function(tt){tt.isLight&&tt.layers.test(mt.layers)&&(g.pushLight(tt),tt.castShadow&&g.pushShadow(tt))}),Pe!==Mt&&Pe.traverseVisible(function(tt){tt.isLight&&tt.layers.test(mt.layers)&&(g.pushLight(tt),tt.castShadow&&g.pushShadow(tt))}),g.setupLights();const We=new Set;return Pe.traverse(function(tt){if(!(tt.isMesh||tt.isPoints||tt.isLine||tt.isSprite))return;const bt=tt.material;if(bt)if(Array.isArray(bt))for(let Dt=0;Dt<bt.length;Dt++){const Kt=bt[Dt];Jt(Kt,Mt,tt),We.add(Kt)}else Jt(bt,Mt,tt),We.add(bt)}),b.pop(),g=null,We},this.compileAsync=function(Pe,mt,Mt=null){const We=this.compile(Pe,mt,Mt);return new Promise(tt=>{function bt(){if(We.forEach(function(Dt){st.get(Dt).currentProgram.isReady()&&We.delete(Dt)}),We.size===0){tt(Pe);return}setTimeout(bt,10)}ze.get("KHR_parallel_shader_compile")!==null?bt():setTimeout(bt,10)})};let on=null;function qn(Pe){on&&on(Pe)}function K(){$t.stop()}function te(){$t.start()}const $t=new kne;$t.setAnimationLoop(qn),typeof self<"u"&&$t.setContext(self),this.setAnimationLoop=function(Pe){on=Pe,et.setAnimationLoop(Pe),Pe===null?$t.stop():$t.start()},et.addEventListener("sessionstart",K),et.addEventListener("sessionend",te),this.render=function(Pe,mt){if(mt!==void 0&&mt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(Pe.matrixWorldAutoUpdate===!0&&Pe.updateMatrixWorld(),mt.parent===null&&mt.matrixWorldAutoUpdate===!0&&mt.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(mt),mt=et.getCamera()),Pe.isScene===!0&&Pe.onBeforeRender(S,Pe,mt,C),g=ft.get(Pe,b.length),g.init(mt),b.push(g),we.multiplyMatrices(mt.projectionMatrix,mt.matrixWorldInverse),X.setFromProjectionMatrix(we),ae=this.localClippingEnabled,ie=Ke.init(this.clippingPlanes,ae),v=Te.get(Pe,_.length),v.init(),_.push(v),et.enabled===!0&&et.isPresenting===!0){const bt=S.xr.getDepthSensingMesh();bt!==null&&Me(bt,mt,-1/0,S.sortObjects)}Me(Pe,mt,0,S.sortObjects),v.finish(),S.sortObjects===!0&&v.sort(F,W),be=et.enabled===!1||et.isPresenting===!1||et.hasDepthSensing()===!1,be&&_e.addToRenderList(v,Pe),this.info.render.frame++,ie===!0&&Ke.beginShadows();const Mt=g.state.shadowsArray;Q.render(Mt,Pe,mt),ie===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset();const We=v.opaque,tt=v.transmissive;if(g.setupLights(),mt.isArrayCamera){const bt=mt.cameras;if(tt.length>0)for(let Dt=0,Kt=bt.length;Dt<Kt;Dt++){const fn=bt[Dt];St(We,tt,Pe,fn)}be&&_e.render(Pe);for(let Dt=0,Kt=bt.length;Dt<Kt;Dt++){const fn=bt[Dt];le(v,Pe,fn,fn.viewport)}}else tt.length>0&&St(We,tt,Pe,mt),be&&_e.render(Pe),le(v,Pe,mt);C!==null&&(fe.updateMultisampleRenderTarget(C),fe.updateRenderTargetMipmap(C)),Pe.isScene===!0&&Pe.onAfterRender(S,Pe,mt),at.resetDefaultState(),A=-1,T=null,b.pop(),b.length>0?(g=b[b.length-1],ie===!0&&Ke.setGlobalState(S.clippingPlanes,g.state.camera)):g=null,_.pop(),_.length>0?v=_[_.length-1]:v=null};function Me(Pe,mt,Mt,We){if(Pe.visible===!1)return;if(Pe.layers.test(mt.layers)){if(Pe.isGroup)Mt=Pe.renderOrder;else if(Pe.isLOD)Pe.autoUpdate===!0&&Pe.update(mt);else if(Pe.isLight)g.pushLight(Pe),Pe.castShadow&&g.pushShadow(Pe);else if(Pe.isSprite){if(!Pe.frustumCulled||X.intersectsSprite(Pe)){We&&Ge.setFromMatrixPosition(Pe.matrixWorld).applyMatrix4(we);const Dt=je.update(Pe),Kt=Pe.material;Kt.visible&&v.push(Pe,Dt,Kt,Mt,Ge.z,null)}}else if((Pe.isMesh||Pe.isLine||Pe.isPoints)&&(!Pe.frustumCulled||X.intersectsObject(Pe))){const Dt=je.update(Pe),Kt=Pe.material;if(We&&(Pe.boundingSphere!==void 0?(Pe.boundingSphere===null&&Pe.computeBoundingSphere(),Ge.copy(Pe.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),Ge.copy(Dt.boundingSphere.center)),Ge.applyMatrix4(Pe.matrixWorld).applyMatrix4(we)),Array.isArray(Kt)){const fn=Dt.groups;for(let On=0,nn=fn.length;On<nn;On++){const Tn=fn[On],In=Kt[Tn.materialIndex];In&&In.visible&&v.push(Pe,Dt,In,Mt,Ge.z,Tn)}}else Kt.visible&&v.push(Pe,Dt,Kt,Mt,Ge.z,null)}}const bt=Pe.children;for(let Dt=0,Kt=bt.length;Dt<Kt;Dt++)Me(bt[Dt],mt,Mt,We)}function le(Pe,mt,Mt,We){const tt=Pe.opaque,bt=Pe.transmissive,Dt=Pe.transparent;g.setupLightsView(Mt),ie===!0&&Ke.setGlobalState(S.clippingPlanes,Mt),We&&Le.viewport(I.copy(We)),tt.length>0&&ht(tt,mt,Mt),bt.length>0&&ht(bt,mt,Mt),Dt.length>0&&ht(Dt,mt,Mt),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function St(Pe,mt,Mt,We){if((Mt.isScene===!0?Mt.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[We.id]===void 0&&(g.state.transmissionRenderTarget[We.id]=new vh(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")||ze.has("EXT_color_buffer_float")?py:fu,minFilter:Lp,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ei.workingColorSpace}));const bt=g.state.transmissionRenderTarget[We.id],Dt=We.viewport||I;bt.setSize(Dt.z,Dt.w);const Kt=S.getRenderTarget();S.setRenderTarget(bt),S.getClearColor(O),H=S.getClearAlpha(),H<1&&S.setClearColor(16777215,.5),S.clear(),be&&_e.render(Mt);const fn=S.toneMapping;S.toneMapping=jf;const On=We.viewport;if(We.viewport!==void 0&&(We.viewport=void 0),g.setupLightsView(We),ie===!0&&Ke.setGlobalState(S.clippingPlanes,We),ht(Pe,Mt,We),fe.updateMultisampleRenderTarget(bt),fe.updateRenderTargetMipmap(bt),ze.has("WEBGL_multisampled_render_to_texture")===!1){let nn=!1;for(let Tn=0,In=mt.length;Tn<In;Tn++){const rr=mt[Tn],Or=rr.object,vr=rr.geometry,Sr=rr.material,Yn=rr.group;if(Sr.side===wl&&Or.layers.test(We.layers)){const bi=Sr.side;Sr.side=xo,Sr.needsUpdate=!0,At(Or,Mt,We,vr,Sr,Yn),Sr.side=bi,Sr.needsUpdate=!0,nn=!0}}nn===!0&&(fe.updateMultisampleRenderTarget(bt),fe.updateRenderTargetMipmap(bt))}S.setRenderTarget(Kt),S.setClearColor(O,H),On!==void 0&&(We.viewport=On),S.toneMapping=fn}function ht(Pe,mt,Mt){const We=mt.isScene===!0?mt.overrideMaterial:null;for(let tt=0,bt=Pe.length;tt<bt;tt++){const Dt=Pe[tt],Kt=Dt.object,fn=Dt.geometry,On=We===null?Dt.material:We,nn=Dt.group;Kt.layers.test(Mt.layers)&&At(Kt,mt,Mt,fn,On,nn)}}function At(Pe,mt,Mt,We,tt,bt){Pe.onBeforeRender(S,mt,Mt,We,tt,bt),Pe.modelViewMatrix.multiplyMatrices(Mt.matrixWorldInverse,Pe.matrixWorld),Pe.normalMatrix.getNormalMatrix(Pe.modelViewMatrix),tt.onBeforeRender(S,mt,Mt,We,Pe,bt),tt.transparent===!0&&tt.side===wl&&tt.forceSinglePass===!1?(tt.side=xo,tt.needsUpdate=!0,S.renderBufferDirect(Mt,mt,We,tt,Pe,bt),tt.side=du,tt.needsUpdate=!0,S.renderBufferDirect(Mt,mt,We,tt,Pe,bt),tt.side=wl):S.renderBufferDirect(Mt,mt,We,tt,Pe,bt),Pe.onAfterRender(S,mt,Mt,We,tt,bt)}function nt(Pe,mt,Mt){mt.isScene!==!0&&(mt=me);const We=st.get(Pe),tt=g.state.lights,bt=g.state.shadowsArray,Dt=tt.state.version,Kt=dt.getParameters(Pe,tt.state,bt,mt,Mt),fn=dt.getProgramCacheKey(Kt);let On=We.programs;We.environment=Pe.isMeshStandardMaterial?mt.environment:null,We.fog=mt.fog,We.envMap=(Pe.isMeshStandardMaterial?J:V).get(Pe.envMap||We.environment),We.envMapRotation=We.environment!==null&&Pe.envMap===null?mt.environmentRotation:Pe.envMapRotation,On===void 0&&(Pe.addEventListener("dispose",ln),On=new Map,We.programs=On);let nn=On.get(fn);if(nn!==void 0){if(We.currentProgram===nn&&We.lightsStateVersion===Dt)return jt(Pe,Kt),nn}else Kt.uniforms=dt.getUniforms(Pe),Pe.onBeforeCompile(Kt,S),nn=dt.acquireProgram(Kt,fn),On.set(fn,nn),We.uniforms=Kt.uniforms;const Tn=We.uniforms;return(!Pe.isShaderMaterial&&!Pe.isRawShaderMaterial||Pe.clipping===!0)&&(Tn.clippingPlanes=Ke.uniform),jt(Pe,Kt),We.needsLights=Je(Pe),We.lightsStateVersion=Dt,We.needsLights&&(Tn.ambientLightColor.value=tt.state.ambient,Tn.lightProbe.value=tt.state.probe,Tn.directionalLights.value=tt.state.directional,Tn.directionalLightShadows.value=tt.state.directionalShadow,Tn.spotLights.value=tt.state.spot,Tn.spotLightShadows.value=tt.state.spotShadow,Tn.rectAreaLights.value=tt.state.rectArea,Tn.ltc_1.value=tt.state.rectAreaLTC1,Tn.ltc_2.value=tt.state.rectAreaLTC2,Tn.pointLights.value=tt.state.point,Tn.pointLightShadows.value=tt.state.pointShadow,Tn.hemisphereLights.value=tt.state.hemi,Tn.directionalShadowMap.value=tt.state.directionalShadowMap,Tn.directionalShadowMatrix.value=tt.state.directionalShadowMatrix,Tn.spotShadowMap.value=tt.state.spotShadowMap,Tn.spotLightMatrix.value=tt.state.spotLightMatrix,Tn.spotLightMap.value=tt.state.spotLightMap,Tn.pointShadowMap.value=tt.state.pointShadowMap,Tn.pointShadowMatrix.value=tt.state.pointShadowMatrix),We.currentProgram=nn,We.uniformsList=null,nn}function _t(Pe){if(Pe.uniformsList===null){const mt=Pe.currentProgram.getUniforms();Pe.uniformsList=$2.seqWithValue(mt.seq,Pe.uniforms)}return Pe.uniformsList}function jt(Pe,mt){const Mt=st.get(Pe);Mt.outputColorSpace=mt.outputColorSpace,Mt.batching=mt.batching,Mt.batchingColor=mt.batchingColor,Mt.instancing=mt.instancing,Mt.instancingColor=mt.instancingColor,Mt.instancingMorph=mt.instancingMorph,Mt.skinning=mt.skinning,Mt.morphTargets=mt.morphTargets,Mt.morphNormals=mt.morphNormals,Mt.morphColors=mt.morphColors,Mt.morphTargetsCount=mt.morphTargetsCount,Mt.numClippingPlanes=mt.numClippingPlanes,Mt.numIntersection=mt.numClipIntersection,Mt.vertexAlphas=mt.vertexAlphas,Mt.vertexTangents=mt.vertexTangents,Mt.toneMapping=mt.toneMapping}function Sn(Pe,mt,Mt,We,tt){mt.isScene!==!0&&(mt=me),fe.resetTextureUnits();const bt=mt.fog,Dt=We.isMeshStandardMaterial?mt.environment:null,Kt=C===null?S.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Ag,fn=(We.isMeshStandardMaterial?J:V).get(We.envMap||Dt),On=We.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,nn=!!Mt.attributes.tangent&&(!!We.normalMap||We.anisotropy>0),Tn=!!Mt.morphAttributes.position,In=!!Mt.morphAttributes.normal,rr=!!Mt.morphAttributes.color;let Or=jf;We.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(Or=S.toneMapping);const vr=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,Sr=vr!==void 0?vr.length:0,Yn=st.get(We),bi=g.state.lights;if(ie===!0&&(ae===!0||Pe!==T)){const os=Pe===T&&We.id===A;Ke.setState(We,Pe,os)}let Wr=!1;We.version===Yn.__version?(Yn.needsLights&&Yn.lightsStateVersion!==bi.state.version||Yn.outputColorSpace!==Kt||tt.isBatchedMesh&&Yn.batching===!1||!tt.isBatchedMesh&&Yn.batching===!0||tt.isBatchedMesh&&Yn.batchingColor===!0&&tt.colorTexture===null||tt.isBatchedMesh&&Yn.batchingColor===!1&&tt.colorTexture!==null||tt.isInstancedMesh&&Yn.instancing===!1||!tt.isInstancedMesh&&Yn.instancing===!0||tt.isSkinnedMesh&&Yn.skinning===!1||!tt.isSkinnedMesh&&Yn.skinning===!0||tt.isInstancedMesh&&Yn.instancingColor===!0&&tt.instanceColor===null||tt.isInstancedMesh&&Yn.instancingColor===!1&&tt.instanceColor!==null||tt.isInstancedMesh&&Yn.instancingMorph===!0&&tt.morphTexture===null||tt.isInstancedMesh&&Yn.instancingMorph===!1&&tt.morphTexture!==null||Yn.envMap!==fn||We.fog===!0&&Yn.fog!==bt||Yn.numClippingPlanes!==void 0&&(Yn.numClippingPlanes!==Ke.numPlanes||Yn.numIntersection!==Ke.numIntersection)||Yn.vertexAlphas!==On||Yn.vertexTangents!==nn||Yn.morphTargets!==Tn||Yn.morphNormals!==In||Yn.morphColors!==rr||Yn.toneMapping!==Or||Yn.morphTargetsCount!==Sr)&&(Wr=!0):(Wr=!0,Yn.__version=We.version);let Ia=Yn.currentProgram;Wr===!0&&(Ia=nt(We,mt,tt));let Ja=!1,gr=!1,Gl=!1;const mi=Ia.getUniforms(),qs=Yn.uniforms;if(Le.useProgram(Ia.program)&&(Ja=!0,gr=!0,Gl=!0),We.id!==A&&(A=We.id,gr=!0),Ja||T!==Pe){Le.buffers.depth.getReversed()?(ce.copy(Pe.projectionMatrix),hQe(ce),pQe(ce),mi.setValue(j,"projectionMatrix",ce)):mi.setValue(j,"projectionMatrix",Pe.projectionMatrix),mi.setValue(j,"viewMatrix",Pe.matrixWorldInverse);const Wi=mi.map.cameraPosition;Wi!==void 0&&Wi.setValue(j,He.setFromMatrixPosition(Pe.matrixWorld)),Ve.logarithmicDepthBuffer&&mi.setValue(j,"logDepthBufFC",2/(Math.log(Pe.far+1)/Math.LN2)),(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial)&&mi.setValue(j,"isOrthographic",Pe.isOrthographicCamera===!0),T!==Pe&&(T=Pe,gr=!0,Gl=!0)}if(tt.isSkinnedMesh){mi.setOptional(j,tt,"bindMatrix"),mi.setOptional(j,tt,"bindMatrixInverse");const os=tt.skeleton;os&&(os.boneTexture===null&&os.computeBoneTexture(),mi.setValue(j,"boneTexture",os.boneTexture,fe))}tt.isBatchedMesh&&(mi.setOptional(j,tt,"batchingTexture"),mi.setValue(j,"batchingTexture",tt._matricesTexture,fe),mi.setOptional(j,tt,"batchingIdTexture"),mi.setValue(j,"batchingIdTexture",tt._indirectTexture,fe),mi.setOptional(j,tt,"batchingColorTexture"),tt._colorsTexture!==null&&mi.setValue(j,"batchingColorTexture",tt._colorsTexture,fe));const Ks=Mt.morphAttributes;if((Ks.position!==void 0||Ks.normal!==void 0||Ks.color!==void 0)&&Ae.update(tt,Mt,Ia),(gr||Yn.receiveShadow!==tt.receiveShadow)&&(Yn.receiveShadow=tt.receiveShadow,mi.setValue(j,"receiveShadow",tt.receiveShadow)),We.isMeshGouraudMaterial&&We.envMap!==null&&(qs.envMap.value=fn,qs.flipEnvMap.value=fn.isCubeTexture&&fn.isRenderTargetTexture===!1?-1:1),We.isMeshStandardMaterial&&We.envMap===null&&mt.environment!==null&&(qs.envMapIntensity.value=mt.environmentIntensity),gr&&(mi.setValue(j,"toneMappingExposure",S.toneMappingExposure),Yn.needsLights&&Vn(qs,Gl),bt&&We.fog===!0&&pt.refreshFogUniforms(qs,bt),pt.refreshMaterialUniforms(qs,We,k,z,g.state.transmissionRenderTarget[Pe.id]),$2.upload(j,_t(Yn),qs,fe)),We.isShaderMaterial&&We.uniformsNeedUpdate===!0&&($2.upload(j,_t(Yn),qs,fe),We.uniformsNeedUpdate=!1),We.isSpriteMaterial&&mi.setValue(j,"center",tt.center),mi.setValue(j,"modelViewMatrix",tt.modelViewMatrix),mi.setValue(j,"normalMatrix",tt.normalMatrix),mi.setValue(j,"modelMatrix",tt.matrixWorld),We.isShaderMaterial||We.isRawShaderMaterial){const os=We.uniformsGroups;for(let Wi=0,qi=os.length;Wi<qi;Wi++){const Eo=os[Wi];Ee.update(Eo,Ia),Ee.bind(Eo,Ia)}}return Ia}function Vn(Pe,mt){Pe.ambientLightColor.needsUpdate=mt,Pe.lightProbe.needsUpdate=mt,Pe.directionalLights.needsUpdate=mt,Pe.directionalLightShadows.needsUpdate=mt,Pe.pointLights.needsUpdate=mt,Pe.pointLightShadows.needsUpdate=mt,Pe.spotLights.needsUpdate=mt,Pe.spotLightShadows.needsUpdate=mt,Pe.rectAreaLights.needsUpdate=mt,Pe.hemisphereLights.needsUpdate=mt}function Je(Pe){return Pe.isMeshLambertMaterial||Pe.isMeshToonMaterial||Pe.isMeshPhongMaterial||Pe.isMeshStandardMaterial||Pe.isShadowMaterial||Pe.isShaderMaterial&&Pe.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(Pe,mt,Mt){st.get(Pe.texture).__webglTexture=mt,st.get(Pe.depthTexture).__webglTexture=Mt;const We=st.get(Pe);We.__hasExternalTextures=!0,We.__autoAllocateDepthBuffer=Mt===void 0,We.__autoAllocateDepthBuffer||ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),We.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Pe,mt){const Mt=st.get(Pe);Mt.__webglFramebuffer=mt,Mt.__useDefaultFramebuffer=mt===void 0},this.setRenderTarget=function(Pe,mt=0,Mt=0){C=Pe,w=mt,M=Mt;let We=!0,tt=null,bt=!1,Dt=!1;if(Pe){const fn=st.get(Pe);if(fn.__useDefaultFramebuffer!==void 0)Le.bindFramebuffer(j.FRAMEBUFFER,null),We=!1;else if(fn.__webglFramebuffer===void 0)fe.setupRenderTarget(Pe);else if(fn.__hasExternalTextures)fe.rebindTextures(Pe,st.get(Pe.texture).__webglTexture,st.get(Pe.depthTexture).__webglTexture);else if(Pe.depthBuffer){const Tn=Pe.depthTexture;if(fn.__boundDepthTexture!==Tn){if(Tn!==null&&st.has(Tn)&&(Pe.width!==Tn.image.width||Pe.height!==Tn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(Pe)}}const On=Pe.texture;(On.isData3DTexture||On.isDataArrayTexture||On.isCompressedArrayTexture)&&(Dt=!0);const nn=st.get(Pe).__webglFramebuffer;Pe.isWebGLCubeRenderTarget?(Array.isArray(nn[mt])?tt=nn[mt][Mt]:tt=nn[mt],bt=!0):Pe.samples>0&&fe.useMultisampledRTT(Pe)===!1?tt=st.get(Pe).__webglMultisampledFramebuffer:Array.isArray(nn)?tt=nn[Mt]:tt=nn,I.copy(Pe.viewport),D.copy(Pe.scissor),B=Pe.scissorTest}else I.copy(q).multiplyScalar(k).floor(),D.copy(Z).multiplyScalar(k).floor(),B=se;if(Le.bindFramebuffer(j.FRAMEBUFFER,tt)&&We&&Le.drawBuffers(Pe,tt),Le.viewport(I),Le.scissor(D),Le.setScissorTest(B),bt){const fn=st.get(Pe.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+mt,fn.__webglTexture,Mt)}else if(Dt){const fn=st.get(Pe.texture),On=mt||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,fn.__webglTexture,Mt||0,On)}A=-1},this.readRenderTargetPixels=function(Pe,mt,Mt,We,tt,bt,Dt){if(!(Pe&&Pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Kt=st.get(Pe).__webglFramebuffer;if(Pe.isWebGLCubeRenderTarget&&Dt!==void 0&&(Kt=Kt[Dt]),Kt){Le.bindFramebuffer(j.FRAMEBUFFER,Kt);try{const fn=Pe.texture,On=fn.format,nn=fn.type;if(!Ve.textureFormatReadable(On)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ve.textureTypeReadable(nn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}mt>=0&&mt<=Pe.width-We&&Mt>=0&&Mt<=Pe.height-tt&&j.readPixels(mt,Mt,We,tt,de.convert(On),de.convert(nn),bt)}finally{const fn=C!==null?st.get(C).__webglFramebuffer:null;Le.bindFramebuffer(j.FRAMEBUFFER,fn)}}},this.readRenderTargetPixelsAsync=async function(Pe,mt,Mt,We,tt,bt,Dt){if(!(Pe&&Pe.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Kt=st.get(Pe).__webglFramebuffer;if(Pe.isWebGLCubeRenderTarget&&Dt!==void 0&&(Kt=Kt[Dt]),Kt){const fn=Pe.texture,On=fn.format,nn=fn.type;if(!Ve.textureFormatReadable(On))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ve.textureTypeReadable(nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(mt>=0&&mt<=Pe.width-We&&Mt>=0&&Mt<=Pe.height-tt){Le.bindFramebuffer(j.FRAMEBUFFER,Kt);const Tn=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,Tn),j.bufferData(j.PIXEL_PACK_BUFFER,bt.byteLength,j.STREAM_READ),j.readPixels(mt,Mt,We,tt,de.convert(On),de.convert(nn),0);const In=C!==null?st.get(C).__webglFramebuffer:null;Le.bindFramebuffer(j.FRAMEBUFFER,In);const rr=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await fQe(j,rr,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,Tn),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,bt),j.deleteBuffer(Tn),j.deleteSync(rr),bt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Pe,mt=null,Mt=0){Pe.isTexture!==!0&&(Jm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),mt=arguments[0]||null,Pe=arguments[1]);const We=Math.pow(2,-Mt),tt=Math.floor(Pe.image.width*We),bt=Math.floor(Pe.image.height*We),Dt=mt!==null?mt.x:0,Kt=mt!==null?mt.y:0;fe.setTexture2D(Pe,0),j.copyTexSubImage2D(j.TEXTURE_2D,Mt,0,0,Dt,Kt,tt,bt),Le.unbindTexture()};const Qn=j.createFramebuffer(),ot=j.createFramebuffer();this.copyTextureToTexture=function(Pe,mt,Mt=null,We=null,tt=0,bt=null){Pe.isTexture!==!0&&(Jm("WebGLRenderer: copyTextureToTexture function signature has changed."),We=arguments[0]||null,Pe=arguments[1],mt=arguments[2],bt=arguments[3]||0,Mt=null),bt===null&&(tt!==0?(Jm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),bt=tt,tt=0):bt=0);let Dt,Kt,fn,On,nn,Tn,In,rr,Or;const vr=Pe.isCompressedTexture?Pe.mipmaps[bt]:Pe.image;if(Mt!==null)Dt=Mt.max.x-Mt.min.x,Kt=Mt.max.y-Mt.min.y,fn=Mt.isBox3?Mt.max.z-Mt.min.z:1,On=Mt.min.x,nn=Mt.min.y,Tn=Mt.isBox3?Mt.min.z:0;else{const Ks=Math.pow(2,-tt);Dt=Math.floor(vr.width*Ks),Kt=Math.floor(vr.height*Ks),Pe.isDataArrayTexture?fn=vr.depth:Pe.isData3DTexture?fn=Math.floor(vr.depth*Ks):fn=1,On=0,nn=0,Tn=0}We!==null?(In=We.x,rr=We.y,Or=We.z):(In=0,rr=0,Or=0);const Sr=de.convert(mt.format),Yn=de.convert(mt.type);let bi;mt.isData3DTexture?(fe.setTexture3D(mt,0),bi=j.TEXTURE_3D):mt.isDataArrayTexture||mt.isCompressedArrayTexture?(fe.setTexture2DArray(mt,0),bi=j.TEXTURE_2D_ARRAY):(fe.setTexture2D(mt,0),bi=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,mt.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,mt.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,mt.unpackAlignment);const Wr=j.getParameter(j.UNPACK_ROW_LENGTH),Ia=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Ja=j.getParameter(j.UNPACK_SKIP_PIXELS),gr=j.getParameter(j.UNPACK_SKIP_ROWS),Gl=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,vr.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,vr.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,On),j.pixelStorei(j.UNPACK_SKIP_ROWS,nn),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Tn);const mi=Pe.isDataArrayTexture||Pe.isData3DTexture,qs=mt.isDataArrayTexture||mt.isData3DTexture;if(Pe.isDepthTexture){const Ks=st.get(Pe),os=st.get(mt),Wi=st.get(Ks.__renderTarget),qi=st.get(os.__renderTarget);Le.bindFramebuffer(j.READ_FRAMEBUFFER,Wi.__webglFramebuffer),Le.bindFramebuffer(j.DRAW_FRAMEBUFFER,qi.__webglFramebuffer);for(let Eo=0;Eo<fn;Eo++)mi&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,st.get(Pe).__webglTexture,tt,Tn+Eo),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,st.get(mt).__webglTexture,bt,Or+Eo)),j.blitFramebuffer(On,nn,Dt,Kt,In,rr,Dt,Kt,j.DEPTH_BUFFER_BIT,j.NEAREST);Le.bindFramebuffer(j.READ_FRAMEBUFFER,null),Le.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(tt!==0||Pe.isRenderTargetTexture||st.has(Pe)){const Ks=st.get(Pe),os=st.get(mt);Le.bindFramebuffer(j.READ_FRAMEBUFFER,Qn),Le.bindFramebuffer(j.DRAW_FRAMEBUFFER,ot);for(let Wi=0;Wi<fn;Wi++)mi?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Ks.__webglTexture,tt,Tn+Wi):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Ks.__webglTexture,tt),qs?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,os.__webglTexture,bt,Or+Wi):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,os.__webglTexture,bt),tt!==0?j.blitFramebuffer(On,nn,Dt,Kt,In,rr,Dt,Kt,j.COLOR_BUFFER_BIT,j.NEAREST):qs?j.copyTexSubImage3D(bi,bt,In,rr,Or+Wi,On,nn,Dt,Kt):j.copyTexSubImage2D(bi,bt,In,rr,On,nn,Dt,Kt);Le.bindFramebuffer(j.READ_FRAMEBUFFER,null),Le.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else qs?Pe.isDataTexture||Pe.isData3DTexture?j.texSubImage3D(bi,bt,In,rr,Or,Dt,Kt,fn,Sr,Yn,vr.data):mt.isCompressedArrayTexture?j.compressedTexSubImage3D(bi,bt,In,rr,Or,Dt,Kt,fn,Sr,vr.data):j.texSubImage3D(bi,bt,In,rr,Or,Dt,Kt,fn,Sr,Yn,vr):Pe.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,bt,In,rr,Dt,Kt,Sr,Yn,vr.data):Pe.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,bt,In,rr,vr.width,vr.height,Sr,vr.data):j.texSubImage2D(j.TEXTURE_2D,bt,In,rr,Dt,Kt,Sr,Yn,vr);j.pixelStorei(j.UNPACK_ROW_LENGTH,Wr),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Ia),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Ja),j.pixelStorei(j.UNPACK_SKIP_ROWS,gr),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Gl),bt===0&&mt.generateMipmaps&&j.generateMipmap(bi),Le.unbindTexture()},this.copyTextureToTexture3D=function(Pe,mt,Mt=null,We=null,tt=0){return Pe.isTexture!==!0&&(Jm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Mt=arguments[0]||null,We=arguments[1]||null,Pe=arguments[2],mt=arguments[3],tt=arguments[4]||0),Jm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Pe,mt,Mt,We,tt)},this.initRenderTarget=function(Pe){st.get(Pe).__webglFramebuffer===void 0&&fe.setupRenderTarget(Pe)},this.initTexture=function(Pe){Pe.isCubeTexture?fe.setTextureCube(Pe,0):Pe.isData3DTexture?fe.setTexture3D(Pe,0):Pe.isDataArrayTexture||Pe.isCompressedArrayTexture?fe.setTexture2DArray(Pe,0):fe.setTexture2D(Pe,0),Le.unbindTexture()},this.resetState=function(){w=0,M=0,C=null,Le.reset(),at.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ad}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=ei._getDrawingBufferColorSpace(e),t.unpackColorSpace=ei._getUnpackColorSpace()}}const _p=class _p{constructor(e,t){let r,i;this.promise=new Promise((c,u)=>{r=c,i=u});const s=r.bind(this),a=i.bind(this),o=(...c)=>{s(...c)},l=c=>{a(c)};e(o.bind(this),l.bind(this)),this.abortHandler=t,this.id=_p.idGen++}then(e){return new _p((t,r)=>{this.promise=this.promise.then((...i)=>{const s=e(...i);s instanceof Promise||s instanceof _p?s.then((...a)=>{t(...a)}):t(s)}).catch(i=>{r(i)})},this.abortHandler)}catch(e){return new _p(t=>{this.promise=this.promise.then((...r)=>{t(...r)}).catch(e)},this.abortHandler)}abort(e){this.abortHandler&&this.abortHandler(e)}};pn(_p,"idGen",0);let P_=_p;class Une extends Error{constructor(e){super(e)}}(function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){n[0]=t;const r=e[0];let i=r>>16&32768,s=r>>12&2047;const a=r>>23&255;return a<103?i:a>142?(i|=31744,i|=(a==255?0:1)&&r&8388607,i):a<113?(s|=2048,i|=(s>>114-a)+(s>>113-a&1),i):(i|=a-112<<10|s>>1,i+=s&1,i)}})();const sI=function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){return n[0]=t,e[0]}}(),Drt=function(n,e){return n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)},ZT=function(n,e,t=!0,r){const i=new AbortController,s=i.signal;let a=!1;const o=u=>{i.abort(u),a=!0};let l=!1;const c=(u,d,h,f)=>{e&&!l&&(e(u,d,h,f),u===100&&(l=!0))};return new P_((u,d)=>{const h={signal:s};r&&(h.headers=r),fetch(n,h).then(async f=>{if(!f.ok){const b=await f.text();d(new Error(`Fetch failed: ${f.status} ${f.statusText} ${b}`));return}const p=f.body.getReader();let m=0,v=f.headers.get("Content-Length"),g=v?parseInt(v):void 0;const _=[];for(;!a;)try{const{value:b,done:S}=await p.read();if(S){if(c(100,"100%",b,g),t){const M=new Blob(_).arrayBuffer();u(M)}else u();break}m+=b.length;let x,w;g!==void 0&&(x=m/g*100,w=`${x.toFixed(2)}%`),t&&_.push(b),c(x,w,b,g)}catch(b){d(b);return}}).catch(f=>{d(new Une(f))})},o)},zi=function(n,e,t){return Math.max(Math.min(n,t),e)},Fm=function(){return performance.now()/1e3},ev=n=>{if(n.geometry&&(n.geometry.dispose(),n.geometry=null),n.material&&(n.material.dispose(),n.material=null),n.children)for(let e of n.children)ev(e)},Wo=(n,e)=>new Promise(t=>{window.setTimeout(()=>{t(n?n():void 0)},e?1:50)}),Hv=(n=0)=>{let e=0;if(n===1)e=9;else if(n===2)e=24;else if(n===3)e=45;else if(n>3)throw new Error("getSphericalHarmonicsComponentCountForDegree() -> Invalid spherical harmonics degree");return e},c8=()=>{let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}},aI=n=>{let e,t;return n||(n=()=>{}),{promise:new P_((i,s)=>{e=i,t=s},n),resolve:e,reject:t}};class Lrt{constructor(e,t,r){this.major=e,this.minor=t,this.patch=r}toString(){return`${this.major}_${this.minor}_${this.patch}`}}function u8(){const n=navigator.userAgent;return n.indexOf("iPhone")>0||n.indexOf("iPad")>0}function Hne(){if(u8()){const n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return new Lrt(parseInt(n[1]||0,10),parseInt(n[2]||0,10),parseInt(n[3]||0,10))}else return null}const krt=14,mb=class mb{constructor(e=0){this.sphericalHarmonicsDegree=e,this.sphericalHarmonicsCount=Hv(this.sphericalHarmonicsDegree),this.componentCount=this.sphericalHarmonicsCount+krt,this.defaultSphericalHarmonics=new Array(this.sphericalHarmonicsCount).fill(0),this.splats=[],this.splatCount=0}static createSplat(e=0){const t=[0,0,0,1,1,1,1,0,0,0,0,0,0,0];let r=Hv(e);for(let i=0;i<r;i++)t.push(0);return t}addSplat(e){this.splats.push(e),this.splatCount++}getSplat(e){return this.splats[e]}addDefaultSplat(){const e=mb.createSplat(this.sphericalHarmonicsDegree);return this.addSplat(e),e}addSplatFromComonents(e,t,r,i,s,a,o,l,c,u,d,h,f,p,...m){const v=[e,t,r,i,s,a,o,l,c,u,d,h,f,p,...this.defaultSphericalHarmonics];for(let g=0;g<m.length&&g<this.sphericalHarmonicsCount;g++)v[g]=m[g];return this.addSplat(v),v}addSplatFromArray(e,t){const r=e.splats[t],i=mb.createSplat(this.sphericalHarmonicsDegree);for(let s=0;s<this.componentCount&&s<r.length;s++)i[s]=r[s];this.addSplat(i)}};pn(mb,"OFFSET",{X:0,Y:1,Z:2,SCALE0:3,SCALE1:4,SCALE2:5,ROTATION0:6,ROTATION1:7,ROTATION2:8,ROTATION3:9,FDC0:10,FDC1:11,FDC2:12,OPACITY:13,FRC0:14,FRC1:15,FRC2:16,FRC3:17,FRC4:18,FRC5:19,FRC6:20,FRC7:21,FRC8:22,FRC9:23,FRC10:24,FRC11:25,FRC12:26,FRC13:27,FRC14:28,FRC15:29,FRC16:30,FRC17:31,FRC18:32,FRC19:33,FRC20:34,FRC21:35,FRC22:36,FRC23:37});let yn=mb;class Hr{}pn(Hr,"DefaultSplatSortDistanceMapPrecision",16),pn(Hr,"MemoryPageSize",65536),pn(Hr,"BytesPerFloat",4),pn(Hr,"BytesPerInt",4),pn(Hr,"MaxScenes",32),pn(Hr,"ProgressiveLoadSectionSize",262144),pn(Hr,"ProgressiveLoadSectionDelayDuration",15),pn(Hr,"SphericalHarmonics8BitCompressionRange",3);const Ort=Hr.SphericalHarmonics8BitCompressionRange,gf=Ort/2,Ms=I_.toHalfFloat.bind(I_),d8=I_.fromHalfFloat.bind(I_),Fi=(n,e,t=!1,r,i)=>{if(e===0)return n;if(e===1||e===2&&!t)return I_.fromHalfFloat(n);if(e===2)return f8(n,r,i)},db=(n,e,t)=>{n=zi(n,e,t);const r=t-e;return zi(Math.floor((n-e)/r*255),0,255)},f8=(n,e,t)=>{const r=t-e;return n/255*r+e},Vne=(n,e,t)=>db(d8(n,e,t)),Nrt=(n,e,t)=>Ms(f8(n,e,t)),ai=(n,e,t,r=!1)=>t===0?n.getFloat32(e*4,!0):t===1||t===2&&!r?n.getUint16(e*2,!0):n.getUint8(e,!0),Brt=function(){const n=e=>e;return function(e,t,r,i=!1){if(t===r)return e;let s=n;return t===2&&i?r===1?s=Nrt:r==0&&(s=f8):t===2||t===1?r===0?s=d8:r==2&&(i?s=Vne:s=n):t===0&&(r===1?s=Ms:r==2&&(i?s=db:s=Ms)),s(e)}}(),zm=(n,e,t,r,i=0)=>{const s=new Uint8Array(n,e),a=new Uint8Array(t,r);for(let o=0;o<i;o++)a[o]=s[o]},Nt=class Nt{constructor(e,t=!0){pn(this,"getSplatScaleAndRotation",function(){const e=new hr,t=new hr,r=new hr,i=new it,s=new it,a=new Hi;return function(o,l,c,u,d){const h=this.globalSplatIndexToSectionMap[o],f=this.sections[h],p=o-f.splatCountOffset,m=f.bytesPerSplat*p+Nt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,f.dataBase+m);s.set(Fi(ai(v,0,this.compressionLevel),this.compressionLevel),Fi(ai(v,1,this.compressionLevel),this.compressionLevel),Fi(ai(v,2,this.compressionLevel),this.compressionLevel)),d&&(d.x!==void 0&&(s.x=d.x),d.y!==void 0&&(s.y=d.y),d.z!==void 0&&(s.z=d.z)),a.set(Fi(ai(v,4,this.compressionLevel),this.compressionLevel),Fi(ai(v,5,this.compressionLevel),this.compressionLevel),Fi(ai(v,6,this.compressionLevel),this.compressionLevel),Fi(ai(v,3,this.compressionLevel),this.compressionLevel)),u?(e.makeScale(s.x,s.y,s.z),t.makeRotationFromQuaternion(a),r.copy(e).multiply(t).multiply(u),r.decompose(i,c,l)):(l.copy(s),c.copy(a))}}());pn(this,"fillSplatScaleRotationArray",function(){const e=new hr,t=new hr,r=new hr,i=new it,s=new Hi,a=new it,o=l=>{const c=l.w<0?-1:1;l.x*=c,l.y*=c,l.z*=c,l.w*=c};return function(l,c,u,d,h,f,p,m){const v=this.splatCount;d=d||0,h=h||v-1,f===void 0&&(f=d);const g=(_,b)=>(b===void 0&&(b=this.compressionLevel),Brt(_,b,p));for(let _=d;_<=h;_++){const b=this.globalSplatIndexToSectionMap[_],S=this.sections[b],x=_-S.splatCountOffset,w=S.bytesPerSplat*x+Nt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,M=(_-d+f)*Nt.ScaleComponentCount,C=(_-d+f)*Nt.RotationComponentCount,A=new DataView(this.bufferData,S.dataBase+w),T=m&&m.x!==void 0?m.x:ai(A,0,this.compressionLevel),I=m&&m.y!==void 0?m.y:ai(A,1,this.compressionLevel),D=m&&m.z!==void 0?m.z:ai(A,2,this.compressionLevel),B=ai(A,3,this.compressionLevel),O=ai(A,4,this.compressionLevel),H=ai(A,5,this.compressionLevel),L=ai(A,6,this.compressionLevel);i.set(Fi(T,this.compressionLevel),Fi(I,this.compressionLevel),Fi(D,this.compressionLevel)),s.set(Fi(O,this.compressionLevel),Fi(H,this.compressionLevel),Fi(L,this.compressionLevel),Fi(B,this.compressionLevel)).normalize(),u&&(a.set(0,0,0),e.makeScale(i.x,i.y,i.z),t.makeRotationFromQuaternion(s),r.identity().premultiply(e).premultiply(t),r.premultiply(u),r.decompose(a,s,i),s.normalize()),o(s),l&&(l[M]=g(i.x,0),l[M+1]=g(i.y,0),l[M+2]=g(i.z,0)),c&&(c[C]=g(s.x,0),c[C+1]=g(s.y,0),c[C+2]=g(s.z,0),c[C+3]=g(s.w,0))}}}());pn(this,"fillSphericalHarmonicsArray",function(){for(let O=0;O<15;O++)new it;const e=new dr,t=new hr,r=new it,i=new it,s=new Hi,a=[],o=[],l=[],c=[],u=[],d=[],h=[],f=[],p=[],m=[],v=[],g=[],_=[],b=[],S=[],x=[],w=[],M=[],C=O=>O,A=(O,H,L,z)=>{O[0]=H,O[1]=L,O[2]=z},T=(O,H,L,z,k)=>{O[0]=ai(H,z,k,!0),O[1]=ai(H,z+L,k,!0),O[2]=ai(H,z+L+L,k,!0)},I=(O,H)=>{H[0]=O[0],H[1]=O[1],H[2]=O[2]},D=(O,H,L,z)=>{H[L]=z(O[0]),H[L+1]=z(O[1]),H[L+2]=z(O[2])},B=(O,H,L,z,k)=>(H[0]=Fi(O[0],L,!0,z,k),H[1]=Fi(O[1],L,!0,z,k),H[2]=Fi(O[2],L,!0,z,k),H);return function(O,H,L,z,k,F,W){const q=this.splatCount;z=z||0,k=k||q-1,F===void 0&&(F=z),L&&H>=1&&(t.copy(L),t.decompose(r,s,i),s.normalize(),t.makeRotationFromQuaternion(s),e.setFromMatrix4(t),A(a,e.elements[4],-e.elements[7],e.elements[1]),A(o,-e.elements[5],e.elements[8],-e.elements[2]),A(l,e.elements[3],-e.elements[6],e.elements[0]));const Z=X=>Vne(X,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff),se=X=>db(X,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff);for(let X=z;X<=k;X++){const ie=this.globalSplatIndexToSectionMap[X],ae=this.sections[ie];H=Math.min(H,ae.sphericalHarmonicsDegree);const ce=Hv(H),we=X-ae.splatCountOffset,He=ae.bytesPerSplat*we+Nt.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes,Ge=new DataView(this.bufferData,ae.dataBase+He),me=(X-z+F)*ce;let be=L?0:this.compressionLevel,oe=C;be!==W&&(be===1?W===0?oe=d8:W==2&&(oe=Z):be===0&&(W===1?oe=Ms:W==2&&(oe=se)));const j=this.minSphericalHarmonicsCoeff,ke=this.maxSphericalHarmonicsCoeff;H>=1&&(T(p,Ge,3,0,this.compressionLevel),T(m,Ge,3,1,this.compressionLevel),T(v,Ge,3,2,this.compressionLevel),L?(B(p,p,this.compressionLevel,j,ke),B(m,m,this.compressionLevel,j,ke),B(v,v,this.compressionLevel,j,ke),Nt.rotateSphericalHarmonics3(p,m,v,a,o,l,b,S,x)):(I(p,b),I(m,S),I(v,x)),D(b,O,me,oe),D(S,O,me+3,oe),D(x,O,me+6,oe),H>=2&&(T(p,Ge,5,9,this.compressionLevel),T(m,Ge,5,10,this.compressionLevel),T(v,Ge,5,11,this.compressionLevel),T(g,Ge,5,12,this.compressionLevel),T(_,Ge,5,13,this.compressionLevel),L?(B(p,p,this.compressionLevel,j,ke),B(m,m,this.compressionLevel,j,ke),B(v,v,this.compressionLevel,j,ke),B(g,g,this.compressionLevel,j,ke),B(_,_,this.compressionLevel,j,ke),Nt.rotateSphericalHarmonics5(p,m,v,g,_,a,o,l,c,u,d,h,f,b,S,x,w,M)):(I(p,b),I(m,S),I(v,x),I(g,w),I(_,M)),D(b,O,me+9,oe),D(S,O,me+12,oe),D(x,O,me+15,oe),D(w,O,me+18,oe),D(M,O,me+21,oe)))}}}());this.constructFromBuffer(e,t)}getSplatCount(){return this.splatCount}getMaxSplatCount(){return this.maxSplatCount}getMinSphericalHarmonicsDegree(){let e=0;for(let t=0;t<this.sections.length;t++){const r=this.sections[t];(t===0||r.sphericalHarmonicsDegree<e)&&(e=r.sphericalHarmonicsDegree)}return e}getBucketIndex(e,t){let r;const i=e.fullBucketCount*e.bucketSize;if(t<i)r=Math.floor(t/e.bucketSize);else{let s=i;r=e.fullBucketCount;let a=0;for(;s<e.splatCount;){let o=e.partiallyFilledBucketLengths[a];if(t>=s&&t<s+o)break;s+=o,r++,a++}}return r}getSplatCenter(e,t,r){const i=this.globalSplatIndexToSectionMap[e],s=this.sections[i],a=e-s.splatCountOffset,o=s.bytesPerSplat*a,l=new DataView(this.bufferData,s.dataBase+o),c=ai(l,0,this.compressionLevel),u=ai(l,1,this.compressionLevel),d=ai(l,2,this.compressionLevel);if(this.compressionLevel>=1){const f=this.getBucketIndex(s,a)*Nt.BucketStorageSizeFloats,p=s.compressionScaleFactor,m=s.compressionScaleRange;t.x=(c-m)*p+s.bucketArray[f],t.y=(u-m)*p+s.bucketArray[f+1],t.z=(d-m)*p+s.bucketArray[f+2]}else t.x=c,t.y=u,t.z=d;r&&t.applyMatrix4(r)}getSplatColor(e,t){const r=this.globalSplatIndexToSectionMap[e],i=this.sections[r],s=e-i.splatCountOffset,a=i.bytesPerSplat*s+Nt.CompressionLevels[this.compressionLevel].ColorOffsetBytes,o=new Uint8Array(this.bufferData,i.dataBase+a,4);t.set(o[0],o[1],o[2],o[3])}fillSplatCenterArray(e,t,r,i,s){const a=this.splatCount;r=r||0,i=i||a-1,s===void 0&&(s=r);const o=new it;for(let l=r;l<=i;l++){const c=this.globalSplatIndexToSectionMap[l],u=this.sections[c],d=l-u.splatCountOffset,h=(l-r+s)*Nt.CenterComponentCount,f=u.bytesPerSplat*d,p=new DataView(this.bufferData,u.dataBase+f),m=ai(p,0,this.compressionLevel),v=ai(p,1,this.compressionLevel),g=ai(p,2,this.compressionLevel);if(this.compressionLevel>=1){const b=this.getBucketIndex(u,d)*Nt.BucketStorageSizeFloats,S=u.compressionScaleFactor,x=u.compressionScaleRange;o.x=(m-x)*S+u.bucketArray[b],o.y=(v-x)*S+u.bucketArray[b+1],o.z=(g-x)*S+u.bucketArray[b+2]}else o.x=m,o.y=v,o.z=g;t&&o.applyMatrix4(t),e[h]=o.x,e[h+1]=o.y,e[h+2]=o.z}}fillSplatCovarianceArray(e,t,r,i,s,a){const o=this.splatCount,l=new it,c=new Hi;r=r||0,i=i||o-1,s===void 0&&(s=r);for(let u=r;u<=i;u++){const d=this.globalSplatIndexToSectionMap[u],h=this.sections[d],f=u-h.splatCountOffset,p=(u-r+s)*Nt.CovarianceComponentCount,m=h.bytesPerSplat*f+Nt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,h.dataBase+m);l.set(Fi(ai(v,0,this.compressionLevel),this.compressionLevel),Fi(ai(v,1,this.compressionLevel),this.compressionLevel),Fi(ai(v,2,this.compressionLevel),this.compressionLevel)),c.set(Fi(ai(v,4,this.compressionLevel),this.compressionLevel),Fi(ai(v,5,this.compressionLevel),this.compressionLevel),Fi(ai(v,6,this.compressionLevel),this.compressionLevel),Fi(ai(v,3,this.compressionLevel),this.compressionLevel)),Nt.computeCovariance(l,c,t,e,p,a)}}fillSplatColorArray(e,t,r,i,s){const a=this.splatCount;r=r||0,i=i||a-1,s===void 0&&(s=r);for(let o=r;o<=i;o++){const l=this.globalSplatIndexToSectionMap[o],c=this.sections[l],u=o-c.splatCountOffset,d=(o-r+s)*Nt.ColorComponentCount,h=c.bytesPerSplat*u+Nt.CompressionLevels[this.compressionLevel].ColorOffsetBytes,f=new Uint8Array(this.bufferData,c.dataBase+h);let p=f[3];p=p>=t?p:0,e[d]=f[0],e[d+1]=f[1],e[d+2]=f[2],e[d+3]=p}}static parseHeader(e){const t=new Uint8Array(e,0,Nt.HeaderSizeBytes),r=new Uint16Array(e,0,Nt.HeaderSizeBytes/2),i=new Uint32Array(e,0,Nt.HeaderSizeBytes/4),s=new Float32Array(e,0,Nt.HeaderSizeBytes/4),a=t[0],o=t[1],l=i[1],c=i[2],u=i[3],d=i[4],h=r[10],f=new it(s[6],s[7],s[8]),p=s[9]||-gf,m=s[10]||gf;return{versionMajor:a,versionMinor:o,maxSectionCount:l,sectionCount:c,maxSplatCount:u,splatCount:d,compressionLevel:h,sceneCenter:f,minSphericalHarmonicsCoeff:p,maxSphericalHarmonicsCoeff:m}}static writeHeaderCountsToBuffer(e,t,r){const i=new Uint32Array(r,0,Nt.HeaderSizeBytes/4);i[2]=e,i[4]=t}static writeHeaderToBuffer(e,t){const r=new Uint8Array(t,0,Nt.HeaderSizeBytes),i=new Uint16Array(t,0,Nt.HeaderSizeBytes/2),s=new Uint32Array(t,0,Nt.HeaderSizeBytes/4),a=new Float32Array(t,0,Nt.HeaderSizeBytes/4);r[0]=e.versionMajor,r[1]=e.versionMinor,r[2]=0,r[3]=0,s[1]=e.maxSectionCount,s[2]=e.sectionCount,s[3]=e.maxSplatCount,s[4]=e.splatCount,i[10]=e.compressionLevel,a[6]=e.sceneCenter.x,a[7]=e.sceneCenter.y,a[8]=e.sceneCenter.z,a[9]=e.minSphericalHarmonicsCoeff||-gf,a[10]=e.maxSphericalHarmonicsCoeff||gf}static parseSectionHeaders(e,t,r=0,i){const s=e.compressionLevel,a=e.maxSectionCount,o=new Uint16Array(t,r,a*Nt.SectionHeaderSizeBytes/2),l=new Uint32Array(t,r,a*Nt.SectionHeaderSizeBytes/4),c=new Float32Array(t,r,a*Nt.SectionHeaderSizeBytes/4),u=[];let d=0,h=d/2,f=d/4,p=Nt.HeaderSizeBytes+e.maxSectionCount*Nt.SectionHeaderSizeBytes,m=0;for(let v=0;v<a;v++){const g=l[f+1],_=l[f+2],b=l[f+3],S=c[f+4],x=S/2,w=o[h+10],M=l[f+6]||Nt.CompressionLevels[s].ScaleRange,C=l[f+8],A=l[f+9],T=A*4,I=w*b+T,D=o[h+20],{bytesPerSplat:B}=Nt.calculateComponentStorage(s,D),O=B*g,H=O+I,L={bytesPerSplat:B,splatCountOffset:m,splatCount:i?g:0,maxSplatCount:g,bucketSize:_,bucketCount:b,bucketBlockSize:S,halfBucketBlockSize:x,bucketStorageSizeBytes:w,bucketsStorageSizeBytes:I,splatDataStorageSizeBytes:O,storageSizeBytes:H,compressionScaleRange:M,compressionScaleFactor:x/M,base:p,bucketsBase:p+T,dataBase:p+I,fullBucketCount:C,partiallyFilledBucketCount:A,sphericalHarmonicsDegree:D};u[v]=L,p+=H,d+=Nt.SectionHeaderSizeBytes,h=d/2,f=d/4,m+=g}return u}static writeSectionHeaderToBuffer(e,t,r,i=0){const s=new Uint16Array(r,i,Nt.SectionHeaderSizeBytes/2),a=new Uint32Array(r,i,Nt.SectionHeaderSizeBytes/4),o=new Float32Array(r,i,Nt.SectionHeaderSizeBytes/4);a[0]=e.splatCount,a[1]=e.maxSplatCount,a[2]=t>=1?e.bucketSize:0,a[3]=t>=1?e.bucketCount:0,o[4]=t>=1?e.bucketBlockSize:0,s[10]=t>=1?Nt.BucketStorageSizeBytes:0,a[6]=t>=1?e.compressionScaleRange:0,a[7]=e.storageSizeBytes,a[8]=t>=1?e.fullBucketCount:0,a[9]=t>=1?e.partiallyFilledBucketCount:0,s[20]=e.sphericalHarmonicsDegree}static writeSectionHeaderSplatCountToBuffer(e,t,r=0){const i=new Uint32Array(t,r,Nt.SectionHeaderSizeBytes/4);i[0]=e}constructFromBuffer(e,t){this.bufferData=e,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSectionMap=[];const r=Nt.parseHeader(this.bufferData);this.versionMajor=r.versionMajor,this.versionMinor=r.versionMinor,this.maxSectionCount=r.maxSectionCount,this.sectionCount=t?r.maxSectionCount:0,this.maxSplatCount=r.maxSplatCount,this.splatCount=t?r.maxSplatCount:0,this.compressionLevel=r.compressionLevel,this.sceneCenter=new it().copy(r.sceneCenter),this.minSphericalHarmonicsCoeff=r.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff=r.maxSphericalHarmonicsCoeff,this.sections=Nt.parseSectionHeaders(r,this.bufferData,Nt.HeaderSizeBytes,t),this.linkBufferArrays(),this.buildMaps()}static calculateComponentStorage(e,t){const r=Nt.CompressionLevels[e].BytesPerCenter,i=Nt.CompressionLevels[e].BytesPerScale,s=Nt.CompressionLevels[e].BytesPerRotation,a=Nt.CompressionLevels[e].BytesPerColor,o=Hv(t),l=Nt.CompressionLevels[e].BytesPerSphericalHarmonicsComponent*o,c=r+i+s+a+l;return{bytesPerCenter:r,bytesPerScale:i,bytesPerRotation:s,bytesPerColor:a,sphericalHarmonicsComponentsPerSplat:o,sphericalHarmonicsBytesPerSplat:l,bytesPerSplat:c}}linkBufferArrays(){for(let e=0;e<this.maxSectionCount;e++){const t=this.sections[e];t.bucketArray=new Float32Array(this.bufferData,t.bucketsBase,t.bucketCount*Nt.BucketStorageSizeFloats),t.partiallyFilledBucketCount>0&&(t.partiallyFilledBucketLengths=new Uint32Array(this.bufferData,t.base,t.partiallyFilledBucketCount))}}buildMaps(){let e=0;for(let t=0;t<this.maxSectionCount;t++){const r=this.sections[t];for(let i=0;i<r.maxSplatCount;i++){const s=e+i;this.globalSplatIndexToLocalSplatIndexMap[s]=i,this.globalSplatIndexToSectionMap[s]=t}e+=r.maxSplatCount}}updateLoadedCounts(e,t){Nt.writeHeaderCountsToBuffer(e,t,this.bufferData),this.sectionCount=e,this.splatCount=t}updateSectionLoadedCounts(e,t){const r=Nt.HeaderSizeBytes+Nt.SectionHeaderSizeBytes*e;Nt.writeSectionHeaderSplatCountToBuffer(t,this.bufferData,r),this.sections[e].splatCount=t}static generateFromUncompressedSplatArrays(e,t,r,i,s,a,o=[]){let l=0;for(let x=0;x<e.length;x++){const w=e[x];l=Math.max(w.sphericalHarmonicsDegree,l)}let c,u;for(let x=0;x<e.length;x++){const w=e[x];for(let M=0;M<w.splats.length;M++){const C=w.splats[M];for(let A=yn.OFFSET.FRC0;A<yn.OFFSET.FRC23&&A<C.length;A++)(!c||C[A]<c)&&(c=C[A]),(!u||C[A]>u)&&(u=C[A])}}c=c||-gf,u=u||gf;const{bytesPerSplat:d}=Nt.calculateComponentStorage(r,l),h=Nt.CompressionLevels[r].ScaleRange,f=[],p=[];let m=0;for(let x=0;x<e.length;x++){const w=e[x],M=new yn(l);for(let ie=0;ie<w.splatCount;ie++){const ae=w.splats[ie];(ae[yn.OFFSET.OPACITY]||0)>=t&&M.addSplat(ae)}const C=o[x]||{},A=(C.blockSizeFactor||1)*(s||Nt.BucketBlockSize),T=Math.ceil((C.bucketSizeFactor||1)*(a||Nt.BucketSize)),I=Nt.computeBucketsForUncompressedSplatArray(M,A,T),D=I.fullBuckets.length,B=I.partiallyFullBuckets.map(ie=>ie.splats.length),O=B.length,H=[...I.fullBuckets,...I.partiallyFullBuckets],L=M.splats.length*d,z=O*4,k=r>=1?H.length*Nt.BucketStorageSizeBytes+z:0,F=L+k,W=new ArrayBuffer(F),q=h/(A*.5),Z=new it;let se=0;for(let ie=0;ie<H.length;ie++){const ae=H[ie];Z.fromArray(ae.center);for(let ce=0;ce<ae.splats.length;ce++){let we=ae.splats[ce];const He=M.splats[we],Ge=k+se*d;Nt.writeSplatDataToSectionBuffer(He,W,Ge,r,l,Z,q,h,c,u),se++}}if(m+=se,r>=1){const ie=new Uint32Array(W,0,B.length*4);for(let ce=0;ce<B.length;ce++)ie[ce]=B[ce];const ae=new Float32Array(W,z,H.length*Nt.BucketStorageSizeFloats);for(let ce=0;ce<H.length;ce++){const we=H[ce],He=ce*3;ae[He]=we.center[0],ae[He+1]=we.center[1],ae[He+2]=we.center[2]}}f.push(W);const X=new ArrayBuffer(Nt.SectionHeaderSizeBytes);Nt.writeSectionHeaderToBuffer({maxSplatCount:se,splatCount:se,bucketSize:T,bucketCount:H.length,bucketBlockSize:A,compressionScaleRange:h,storageSizeBytes:F,fullBucketCount:D,partiallyFilledBucketCount:O,sphericalHarmonicsDegree:l},r,X,0),p.push(X)}let v=0;for(let x of f)v+=x.byteLength;const g=Nt.HeaderSizeBytes+Nt.SectionHeaderSizeBytes*f.length+v,_=new ArrayBuffer(g);Nt.writeHeaderToBuffer({versionMajor:0,versionMinor:1,maxSectionCount:f.length,sectionCount:f.length,maxSplatCount:m,splatCount:m,compressionLevel:r,sceneCenter:i,minSphericalHarmonicsCoeff:c,maxSphericalHarmonicsCoeff:u},_);let b=Nt.HeaderSizeBytes;for(let x of p)new Uint8Array(_,b,Nt.SectionHeaderSizeBytes).set(new Uint8Array(x)),b+=Nt.SectionHeaderSizeBytes;for(let x of f)new Uint8Array(_,b,x.byteLength).set(new Uint8Array(x)),b+=x.byteLength;return new Nt(_)}static computeBucketsForUncompressedSplatArray(e,t,r){let i=e.splatCount;const s=t/2,a=new it,o=new it;for(let m=0;m<i;m++){const v=e.splats[m],g=[v[yn.OFFSET.X],v[yn.OFFSET.Y],v[yn.OFFSET.Z]];(m===0||g[0]<a.x)&&(a.x=g[0]),(m===0||g[0]>o.x)&&(o.x=g[0]),(m===0||g[1]<a.y)&&(a.y=g[1]),(m===0||g[1]>o.y)&&(o.y=g[1]),(m===0||g[2]<a.z)&&(a.z=g[2]),(m===0||g[2]>o.z)&&(o.z=g[2])}const l=new it().copy(o).sub(a),c=Math.ceil(l.y/t),u=Math.ceil(l.z/t),d=new it,h=[],f={};for(let m=0;m<i;m++){const v=e.splats[m],g=[v[yn.OFFSET.X],v[yn.OFFSET.Y],v[yn.OFFSET.Z]],_=Math.floor((g[0]-a.x)/t),b=Math.floor((g[1]-a.y)/t),S=Math.floor((g[2]-a.z)/t);d.x=_*t+a.x+s,d.y=b*t+a.y+s,d.z=S*t+a.z+s;const x=_*(c*u)+b*u+S;let w=f[x];w||(f[x]=w={splats:[],center:d.toArray()}),w.splats.push(m),w.splats.length>=r&&(h.push(w),f[x]=null)}const p=[];for(let m in f)if(f.hasOwnProperty(m)){const v=f[m];v&&p.push(v)}return{fullBuckets:h,partiallyFullBuckets:p}}static preallocateUncompressed(e,t){const r=Nt.CompressionLevels[0].SphericalHarmonicsDegrees[t],i=Nt.HeaderSizeBytes+Nt.SectionHeaderSizeBytes,s=i+r.BytesPerSplat*e,a=new ArrayBuffer(s);return Nt.writeHeaderToBuffer({versionMajor:Nt.CurrentMajorVersion,versionMinor:Nt.CurrentMinorVersion,maxSectionCount:1,sectionCount:1,maxSplatCount:e,splatCount:e,compressionLevel:0,sceneCenter:new it},a),Nt.writeSectionHeaderToBuffer({maxSplatCount:e,splatCount:e,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:t},0,a,Nt.HeaderSizeBytes),{splatBuffer:new Nt(a,!0),splatBufferDataOffsetBytes:i}}};pn(Nt,"CurrentMajorVersion",0),pn(Nt,"CurrentMinorVersion",1),pn(Nt,"CenterComponentCount",3),pn(Nt,"ScaleComponentCount",3),pn(Nt,"RotationComponentCount",4),pn(Nt,"ColorComponentCount",4),pn(Nt,"CovarianceComponentCount",6),pn(Nt,"SplatScaleOffsetFloat",3),pn(Nt,"SplatRotationOffsetFloat",6),pn(Nt,"CompressionLevels",{0:{BytesPerCenter:12,BytesPerScale:12,BytesPerRotation:16,BytesPerColor:4,ScaleOffsetBytes:12,RotationffsetBytes:24,ColorOffsetBytes:40,SphericalHarmonicsOffsetBytes:44,ScaleRange:1,BytesPerSphericalHarmonicsComponent:4,SphericalHarmonicsOffsetFloat:11,SphericalHarmonicsDegrees:{0:{BytesPerSplat:44},1:{BytesPerSplat:80},2:{BytesPerSplat:140}}},1:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:2,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:42},2:{BytesPerSplat:72}}},2:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:1,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:33},2:{BytesPerSplat:48}}}}),pn(Nt,"CovarianceSizeFloats",6),pn(Nt,"HeaderSizeBytes",4096),pn(Nt,"SectionHeaderSizeBytes",1024),pn(Nt,"BucketStorageSizeBytes",12),pn(Nt,"BucketStorageSizeFloats",3),pn(Nt,"BucketBlockSize",5),pn(Nt,"BucketSize",256),pn(Nt,"computeCovariance",function(){const e=new hr,t=new dr,r=new dr,i=new dr,s=new dr,a=new dr,o=new dr;return function(l,c,u,d,h=0,f){e.makeScale(l.x,l.y,l.z),t.setFromMatrix4(e),e.makeRotationFromQuaternion(c),r.setFromMatrix4(e),i.copy(r).multiply(t),s.copy(i).transpose().premultiply(i),u&&(a.setFromMatrix4(u),o.copy(a).transpose(),s.multiply(o),s.premultiply(a)),f>=1?(d[h]=Ms(s.elements[0]),d[h+1]=Ms(s.elements[3]),d[h+2]=Ms(s.elements[6]),d[h+3]=Ms(s.elements[4]),d[h+4]=Ms(s.elements[7]),d[h+5]=Ms(s.elements[8])):(d[h]=s.elements[0],d[h+1]=s.elements[3],d[h+2]=s.elements[6],d[h+3]=s.elements[4],d[h+4]=s.elements[7],d[h+5]=s.elements[8])}}()),pn(Nt,"dot3",(e,t,r,i,s)=>{s[0]=s[1]=s[2]=0;const a=i[0],o=i[1],l=i[2];Nt.addInto3(e[0]*a,e[1]*a,e[2]*a,s),Nt.addInto3(t[0]*o,t[1]*o,t[2]*o,s),Nt.addInto3(r[0]*l,r[1]*l,r[2]*l,s)}),pn(Nt,"addInto3",(e,t,r,i)=>{i[0]=i[0]+e,i[1]=i[1]+t,i[2]=i[2]+r}),pn(Nt,"dot5",(e,t,r,i,s,a,o)=>{o[0]=o[1]=o[2]=0;const l=a[0],c=a[1],u=a[2],d=a[3],h=a[4];Nt.addInto3(e[0]*l,e[1]*l,e[2]*l,o),Nt.addInto3(t[0]*c,t[1]*c,t[2]*c,o),Nt.addInto3(r[0]*u,r[1]*u,r[2]*u,o),Nt.addInto3(i[0]*d,i[1]*d,i[2]*d,o),Nt.addInto3(s[0]*h,s[1]*h,s[2]*h,o)}),pn(Nt,"rotateSphericalHarmonics3",(e,t,r,i,s,a,o,l,c)=>{Nt.dot3(e,t,r,i,o),Nt.dot3(e,t,r,s,l),Nt.dot3(e,t,r,a,c)}),pn(Nt,"rotateSphericalHarmonics5",(e,t,r,i,s,a,o,l,c,u,d,h,f,p,m,v,g,_)=>{const b=Math.sqrt(.25),S=Math.sqrt(3/4),x=Math.sqrt(1/3),w=Math.sqrt(4/3),M=Math.sqrt(1/12);c[0]=b*(l[2]*a[0]+l[0]*a[2]+(a[2]*l[0]+a[0]*l[2])),c[1]=l[1]*a[0]+a[1]*l[0],c[2]=S*(l[1]*a[1]+a[1]*l[1]),c[3]=l[1]*a[2]+a[1]*l[2],c[4]=b*(l[2]*a[2]-l[0]*a[0]+(a[2]*l[2]-a[0]*l[0])),Nt.dot5(e,t,r,i,s,c,p),u[0]=b*(o[2]*a[0]+o[0]*a[2]+(a[2]*o[0]+a[0]*o[2])),u[1]=o[1]*a[0]+a[1]*o[0],u[2]=S*(o[1]*a[1]+a[1]*o[1]),u[3]=o[1]*a[2]+a[1]*o[2],u[4]=b*(o[2]*a[2]-o[0]*a[0]+(a[2]*o[2]-a[0]*o[0])),Nt.dot5(e,t,r,i,s,u,m),d[0]=x*(o[2]*o[0]+o[0]*o[2])+-M*(l[2]*l[0]+l[0]*l[2]+(a[2]*a[0]+a[0]*a[2])),d[1]=w*o[1]*o[0]+-x*(l[1]*l[0]+a[1]*a[0]),d[2]=o[1]*o[1]+-b*(l[1]*l[1]+a[1]*a[1]),d[3]=w*o[1]*o[2]+-x*(l[1]*l[2]+a[1]*a[2]),d[4]=x*(o[2]*o[2]-o[0]*o[0])+-M*(l[2]*l[2]-l[0]*l[0]+(a[2]*a[2]-a[0]*a[0])),Nt.dot5(e,t,r,i,s,d,v),h[0]=b*(o[2]*l[0]+o[0]*l[2]+(l[2]*o[0]+l[0]*o[2])),h[1]=o[1]*l[0]+l[1]*o[0],h[2]=S*(o[1]*l[1]+l[1]*o[1]),h[3]=o[1]*l[2]+l[1]*o[2],h[4]=b*(o[2]*l[2]-o[0]*l[0]+(l[2]*o[2]-l[0]*o[0])),Nt.dot5(e,t,r,i,s,h,g),f[0]=b*(l[2]*l[0]+l[0]*l[2]-(a[2]*a[0]+a[0]*a[2])),f[1]=l[1]*l[0]-a[1]*a[0],f[2]=S*(l[1]*l[1]-a[1]*a[1]),f[3]=l[1]*l[2]-a[1]*a[2],f[4]=b*(l[2]*l[2]-l[0]*l[0]-(a[2]*a[2]-a[0]*a[0])),Nt.dot5(e,t,r,i,s,f,_)}),pn(Nt,"writeSplatDataToSectionBuffer",function(){const e=new ArrayBuffer(12),t=new ArrayBuffer(12),r=new ArrayBuffer(16),i=new ArrayBuffer(4),s=new ArrayBuffer(256),a=new Hi,o=new it,l=new it,{X:c,Y:u,Z:d,SCALE0:h,SCALE1:f,SCALE2:p,ROTATION0:m,ROTATION1:v,ROTATION2:g,ROTATION3:_,FDC0:b,FDC1:S,FDC2:x,OPACITY:w,FRC0:M,FRC9:C}=yn.OFFSET,A=(T,I,D)=>{const B=D*2+1;return T=Math.round(T*I)+D,zi(T,0,B)};return function(T,I,D,B,O,H,L,z,k=-gf,F=gf){const W=Hv(O),q=Nt.CompressionLevels[B].BytesPerCenter,Z=Nt.CompressionLevels[B].BytesPerScale,se=Nt.CompressionLevels[B].BytesPerRotation,X=Nt.CompressionLevels[B].BytesPerColor,ie=D,ae=ie+q,ce=ae+Z,we=ce+se,He=we+X;if(T[m]!==void 0?(a.set(T[m],T[v],T[g],T[_]),a.normalize()):a.set(1,0,0,0),T[h]!==void 0?o.set(T[h]||0,T[f]||0,T[p]||0):o.set(0,0,0),B===0){const me=new Float32Array(I,ie,Nt.CenterComponentCount),be=new Float32Array(I,ce,Nt.RotationComponentCount),oe=new Float32Array(I,ae,Nt.ScaleComponentCount);if(be.set([a.x,a.y,a.z,a.w]),oe.set([o.x,o.y,o.z]),me.set([T[c],T[u],T[d]]),O>0){const j=new Float32Array(I,He,W);if(O>=1){for(let ke=0;ke<9;ke++)j[ke]=T[M+ke]||0;if(O>=2)for(let ke=0;ke<15;ke++)j[ke+9]=T[C+ke]||0}}}else{const me=new Uint16Array(e,0,Nt.CenterComponentCount),be=new Uint16Array(r,0,Nt.RotationComponentCount),oe=new Uint16Array(t,0,Nt.ScaleComponentCount);if(be.set([Ms(a.x),Ms(a.y),Ms(a.z),Ms(a.w)]),oe.set([Ms(o.x),Ms(o.y),Ms(o.z)]),l.set(T[c],T[u],T[d]).sub(H),l.x=A(l.x,L,z),l.y=A(l.y,L,z),l.z=A(l.z,L,z),me.set([l.x,l.y,l.z]),O>0){const j=B===1?Uint16Array:Uint8Array,ke=B===1?2:1,ze=new j(s,0,W);if(O>=1){for(let Le=0;Le<9;Le++){const Ze=T[M+Le]||0;ze[Le]=B===1?Ms(Ze):db(Ze,k,F)}const Ve=9*ke;if(zm(ze.buffer,0,I,He,Ve),O>=2){for(let Le=0;Le<15;Le++){const Ze=T[C+Le]||0;ze[Le+9]=B===1?Ms(Ze):db(Ze,k,F)}zm(ze.buffer,Ve,I,He+Ve,15*ke)}}}zm(me.buffer,0,I,ie,6),zm(oe.buffer,0,I,ae,6),zm(be.buffer,0,I,ce,8)}const Ge=new Uint8ClampedArray(i,0,4);Ge.set([T[b]||0,T[S]||0,T[x]||0]),Ge[3]=T[w]||0,zm(Ge.buffer,0,I,we,4)}}());let Un=Nt;const k$=new Uint8Array([112,108,121,10]),O$=new Uint8Array([10,101,110,100,95,104,101,97,100,101,114,10]),oI="end_header",lI=new Map([["char",Int8Array],["uchar",Uint8Array],["short",Int16Array],["ushort",Uint16Array],["int",Int32Array],["uint",Uint32Array],["float",Float32Array],["double",Float64Array]]),Zc=(n,e)=>{const t=(1<<e)-1;return(n&t)/t},N$=(n,e)=>{n.x=Zc(e>>>21,11),n.y=Zc(e>>>11,10),n.z=Zc(e,11)},Frt=(n,e)=>{n.x=Zc(e>>>24,8),n.y=Zc(e>>>16,8),n.z=Zc(e>>>8,8),n.w=Zc(e,8)},zrt=(n,e)=>{const t=1/(Math.sqrt(2)*.5),r=(Zc(e>>>20,10)-.5)*t,i=(Zc(e>>>10,10)-.5)*t,s=(Zc(e,10)-.5)*t,a=Math.sqrt(1-(r*r+i*i+s*s));switch(e>>>30){case 0:n.set(a,r,i,s);break;case 1:n.set(r,a,i,s);break;case 2:n.set(r,i,a,s);break;case 3:n.set(r,i,s,a);break}},Vu=(n,e,t)=>n*(1-t)+e*t,Ki=(n,e)=>{var t;return(t=n.properties.find(r=>r.name===e&&r.storage))==null?void 0:t.storage},gi=class gi{static decodeHeaderText(e){let t,r,i,s;const a=e.split(`
`).filter(d=>!d.startsWith("comment "));let o=0,l=!1;for(let d=1;d<a.length;++d){const h=a[d].split(" ");switch(h[0]){case"format":if(h[1]!=="binary_little_endian")throw new Error("Unsupported ply format");break;case"element":t={name:h[1],count:parseInt(h[2],10),properties:[],storageSizeBytes:0},t.name==="chunk"?r=t:t.name==="vertex"?i=t:t.name==="sh"&&(s=t);break;case"property":{if(!lI.has(h[1]))throw new Error(`Unrecognized property data type '${h[1]}' in ply header`);const f=lI.get(h[1]),p=f.BYTES_PER_ELEMENT*t.count;t.name==="vertex"&&(o+=f.BYTES_PER_ELEMENT),t.properties.push({type:h[1],name:h[2],storage:null,byteSize:f.BYTES_PER_ELEMENT,storageSizeByes:p}),t.storageSizeBytes+=p;break}case oI:l=!0;break;default:throw new Error(`Unrecognized header value '${h[0]}' in ply header`)}if(l)break}let c=0,u=0;return s&&(u=s.properties.length,s.properties.length>=45?c=3:s.properties.length>=24?c=2:s.properties.length>=9&&(c=1)),{chunkElement:r,vertexElement:i,shElement:s,bytesPerSplat:o,headerSizeBytes:e.indexOf(oI)+oI.length+1,sphericalHarmonicsDegree:c,sphericalHarmonicsPerSplat:u}}static decodeHeader(e){const t=(f,p)=>{const m=f.length-p.length;let v,g;for(v=0;v<=m;++v){for(g=0;g<p.length&&f[v+g]===p[g];++g);if(g===p.length)return v}return-1},r=(f,p)=>{if(f.length<p.length)return!1;for(let m=0;m<p.length;++m)if(f[m]!==p[m])return!1;return!0};let i=new Uint8Array(e),s;if(i.length>=k$.length&&!r(i,k$))throw new Error("Invalid PLY header");if(s=t(i,O$),s===-1)throw new Error("End of PLY header not found");const a=new TextDecoder("ascii").decode(i.slice(0,s)),{chunkElement:o,vertexElement:l,shElement:c,sphericalHarmonicsDegree:u,sphericalHarmonicsPerSplat:d,bytesPerSplat:h}=gi.decodeHeaderText(a);return{headerSizeBytes:s+O$.length,bytesPerSplat:h,chunkElement:o,vertexElement:l,shElement:c,sphericalHarmonicsDegree:u,sphericalHarmonicsPerSplat:d}}static readElementData(e,t,r,i,s,a=null){let o=t instanceof DataView?t:new DataView(t);i=i||0,s=s||e.count-1;for(let l=i;l<=s;++l)for(let c=0;c<e.properties.length;++c){const u=e.properties[c],d=lI.get(u.type),h=d.BYTES_PER_ELEMENT*e.count;if((!u.storage||u.storage.byteLength<h)&&(!a||a(u.name))&&(u.storage=new d(e.count)),u.storage)switch(u.type){case"char":u.storage[l]=o.getInt8(r);break;case"uchar":u.storage[l]=o.getUint8(r);break;case"short":u.storage[l]=o.getInt16(r,!0);break;case"ushort":u.storage[l]=o.getUint16(r,!0);break;case"int":u.storage[l]=o.getInt32(r,!0);break;case"uint":u.storage[l]=o.getUint32(r,!0);break;case"float":u.storage[l]=o.getFloat32(r,!0);break;case"double":u.storage[l]=o.getFloat64(r,!0);break}r+=u.byteSize}return r}static readPly(e,t=null){const r=gi.decodeHeader(e);let i=gi.readElementData(r.chunkElement,e,r.headerSizeBytes,null,null,t);return i=gi.readElementData(r.vertexElement,e,i,null,null,t),gi.readElementData(r.shElement,e,i,null,null,t),{chunkElement:r.chunkElement,vertexElement:r.vertexElement,shElement:r.shElement,sphericalHarmonicsDegree:r.sphericalHarmonicsDegree,sphericalHarmonicsPerSplat:r.sphericalHarmonicsPerSplat}}static getElementStorageArrays(e,t,r){const i={};if(t){const s=Ki(e,"min_r"),a=Ki(e,"min_g"),o=Ki(e,"min_b"),l=Ki(e,"max_r"),c=Ki(e,"max_g"),u=Ki(e,"max_b"),d=Ki(e,"min_x"),h=Ki(e,"min_y"),f=Ki(e,"min_z"),p=Ki(e,"max_x"),m=Ki(e,"max_y"),v=Ki(e,"max_z"),g=Ki(e,"min_scale_x"),_=Ki(e,"min_scale_y"),b=Ki(e,"min_scale_z"),S=Ki(e,"max_scale_x"),x=Ki(e,"max_scale_y"),w=Ki(e,"max_scale_z"),M=Ki(t,"packed_position"),C=Ki(t,"packed_rotation"),A=Ki(t,"packed_scale"),T=Ki(t,"packed_color");i.colorExtremes={minR:s,maxR:l,minG:a,maxG:c,minB:o,maxB:u},i.positionExtremes={minX:d,maxX:p,minY:h,maxY:m,minZ:f,maxZ:v},i.scaleExtremes={minScaleX:g,maxScaleX:S,minScaleY:_,maxScaleY:x,minScaleZ:b,maxScaleZ:w},i.position=M,i.rotation=C,i.scale=A,i.color=T}if(r){const s={};for(let a=0;a<45;a++){const o=`f_rest_${a}`,l=Ki(r,o);if(l)s[o]=l;else break}i.sh=s}return i}static parseToUncompressedSplatBufferSection(e,t,r,i,s,a,o,l,c=null){gi.readElementData(t,a,0,r,i,c);const u=Un.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,{positionExtremes:d,scaleExtremes:h,colorExtremes:f,position:p,rotation:m,scale:v,color:g}=gi.getElementStorageArrays(e,t),_=yn.createSplat();for(let b=r;b<=i;++b){gi.decompressBaseSplat(b,s,p,d,v,h,m,f,g,_);const S=b*u+l;Un.writeSplatDataToSectionBuffer(_,o,S,0,0)}}static parseToUncompressedSplatArraySection(e,t,r,i,s,a,o,l=null){gi.readElementData(t,a,0,r,i,l);const{positionExtremes:c,scaleExtremes:u,colorExtremes:d,position:h,rotation:f,scale:p,color:m}=gi.getElementStorageArrays(e,t);for(let v=r;v<=i;++v){const g=yn.createSplat();gi.decompressBaseSplat(v,s,h,c,p,u,f,d,m,g),o.addSplat(g)}}static parseSphericalHarmonicsToUncompressedSplatArraySection(e,t,r,i,s,a,o,l,c,u=null){gi.readElementData(t,s,a,r,i,u);const{sh:d}=gi.getElementStorageArrays(e,void 0,t),h=Object.values(d);for(let f=r;f<=i;++f)gi.decompressSphericalHarmonics(f,h,o,l,c.splats[f])}static parseToUncompressedSplatArray(e,t){const{chunkElement:r,vertexElement:i,shElement:s,sphericalHarmonicsDegree:a}=gi.readPly(e);t=Math.min(t,a);const o=new yn(t),{positionExtremes:l,scaleExtremes:c,colorExtremes:u,position:d,rotation:h,scale:f,color:p}=gi.getElementStorageArrays(r,i);let m;if(t>0){const{sh:v}=gi.getElementStorageArrays(r,void 0,s);m=Object.values(v)}for(let v=0;v<i.count;++v){o.addDefaultSplat();const g=o.getSplat(o.splatCount-1);gi.decompressBaseSplat(v,0,d,l,f,c,h,u,p,g),t>0&&gi.decompressSphericalHarmonics(v,m,t,a,g)}return o}static parseToUncompressedSplatBuffer(e,t){const{chunkElement:r,vertexElement:i,shElement:s,sphericalHarmonicsDegree:a}=gi.readPly(e);t=Math.min(t,a);const{splatBuffer:o,splatBufferDataOffsetBytes:l}=Un.preallocateUncompressed(i.count,t),{positionExtremes:c,scaleExtremes:u,colorExtremes:d,position:h,rotation:f,scale:p,color:m}=gi.getElementStorageArrays(r,i);let v;if(t>0){const{sh:b}=gi.getElementStorageArrays(r,void 0,s);v=Object.values(b)}const g=Un.CompressionLevels[0].SphericalHarmonicsDegrees[t].BytesPerSplat,_=yn.createSplat(t);for(let b=0;b<i.count;++b){gi.decompressBaseSplat(b,0,h,c,p,u,f,d,m,_),t>0&&gi.decompressSphericalHarmonics(b,v,t,a,_);const S=b*g+l;Un.writeSplatDataToSectionBuffer(_,o.bufferData,S,0,t)}return o}};pn(gi,"decompressBaseSplat",function(){const e=new it,t=new Hi,r=new it,i=new Ui,s=yn.OFFSET;return function(a,o,l,c,u,d,h,f,p,m){m=m||yn.createSplat();const v=Math.floor((o+a)/256);return N$(e,l[a]),zrt(t,h[a]),N$(r,u[a]),Frt(i,p[a]),m[s.X]=Vu(c.minX[v],c.maxX[v],e.x),m[s.Y]=Vu(c.minY[v],c.maxY[v],e.y),m[s.Z]=Vu(c.minZ[v],c.maxZ[v],e.z),m[s.ROTATION0]=t.x,m[s.ROTATION1]=t.y,m[s.ROTATION2]=t.z,m[s.ROTATION3]=t.w,m[s.SCALE0]=Math.exp(Vu(d.minScaleX[v],d.maxScaleX[v],r.x)),m[s.SCALE1]=Math.exp(Vu(d.minScaleY[v],d.maxScaleY[v],r.y)),m[s.SCALE2]=Math.exp(Vu(d.minScaleZ[v],d.maxScaleZ[v],r.z)),f.minR&&f.maxR?m[s.FDC0]=zi(Math.round(Vu(f.minR[v],f.maxR[v],i.x)*255),0,255):m[s.FDC0]=zi(Math.floor(i.x*255),0,255),f.minG&&f.maxG?m[s.FDC1]=zi(Math.round(Vu(f.minG[v],f.maxG[v],i.y)*255),0,255):m[s.FDC1]=zi(Math.floor(i.y*255),0,255),f.minB&&f.maxB?m[s.FDC2]=zi(Math.round(Vu(f.minB[v],f.maxB[v],i.z)*255),0,255):m[s.FDC2]=zi(Math.floor(i.z*255),0,255),m[s.OPACITY]=zi(Math.floor(i.w*255),0,255),m}}()),pn(gi,"decompressSphericalHarmonics",function(){const e=[0,3,8,15],t=[0,1,2,9,10,11,12,13,24,25,26,27,28,29,30,3,4,5,14,15,16,17,18,31,32,33,34,35,36,37,6,7,8,19,20,21,22,23,38,39,40,41,42,43,44];return function(r,i,s,a,o){o=o||yn.createSplat();let l=e[s],c=e[a];for(let u=0;u<3;++u)for(let d=0;d<15;++d){const h=t[u*15+d];d<l&&d<c&&(o[yn.OFFSET.FRC0+h]=i[u*c+d][r]*(8/255)-4)}return o}}());let td=gi;const Ua={INRIAV1:0,INRIAV2:1,PlayCanvasCompressed:2},[$ne,h8,p8,m8,v8,g8,y8]=[0,1,2,3,4,5,6],B$={double:$ne,int:h8,uint:p8,float:m8,short:v8,ushort:g8,uchar:y8},Urt={[$ne]:8,[h8]:4,[p8]:4,[m8]:4,[v8]:2,[g8]:2,[y8]:1},so=class so{static decodeSectionHeader(e,t,r=0){const i=[];let s=!1,a=-1,o=0,l=!1,c=null;const u=[],d=[],h=[],f={};for(let g=r;g<e.length;g++){const _=e[g].trim();if(_.startsWith("element"))if(s){a--;break}else{s=!0,r=g,a=g;const b=_.split(" ");let S=0;for(let x of b){const w=x.trim();w.length>0&&(S++,S===2?c=w:S===3&&(o=parseInt(w)))}}else if(_.startsWith("property")){const b=_.match(/(\w+)\s+(\w+)\s+(\w+)/);if(b){const S=b[2],x=b[3];h.push(x);const w=t[x];f[x]=S;const M=B$[S];w!==void 0&&(u.push(w),d[w]=M)}}if(_===so.HeaderEndToken){l=!0;break}s&&(i.push(_),a++)}const p=[];let m=0;for(let g of h){const _=f[g];if(f.hasOwnProperty(g)){const b=t[g];b!==void 0&&(p[b]=m)}m+=Urt[B$[_]]}const v=so.decodeSphericalHarmonicsFromSectionHeader(h,t);return{headerLines:i,headerStartLine:r,headerEndLine:a,fieldTypes:d,fieldIds:u,fieldOffsets:p,bytesPerVertex:m,vertexCount:o,dataSizeBytes:m*o,endOfHeader:l,sectionName:c,sphericalHarmonicsDegree:v.degree,sphericalHarmonicsCoefficientsPerChannel:v.coefficientsPerChannel,sphericalHarmonicsDegree1Fields:v.degree1Fields,sphericalHarmonicsDegree2Fields:v.degree2Fields}}static decodeSphericalHarmonicsFromSectionHeader(e,t){let r=0,i=0;for(let l of e)l.startsWith("f_rest")&&r++;i=r/3;let s=0;i>=3&&(s=1),i>=8&&(s=2);let a=[],o=[];for(let l=0;l<3;l++){if(s>=1)for(let c=0;c<3;c++)a.push(t["f_rest_"+(c+i*l)]);if(s>=2)for(let c=0;c<5;c++)o.push(t["f_rest_"+(c+i*l+3)])}return{degree:s,coefficientsPerChannel:i,degree1Fields:a,degree2Fields:o}}static getHeaderSectionNames(e){const t=[];for(let r of e)if(r.startsWith("element")){const i=r.split(" ");let s=0;for(let a of i){const o=a.trim();o.length>0&&(s++,s===2&&t.push(o))}}return t}static checkTextForEndHeader(e){return!!e.includes(so.HeaderEndToken)}static checkBufferForEndHeader(e,t,r,i){const s=new Uint8Array(e,Math.max(0,t-r),r),a=i.decode(s);return so.checkTextForEndHeader(a)}static extractHeaderFromBufferToText(e){const t=new TextDecoder;let r=0,i="";const s=100;for(;;){if(r+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,r,s);if(i+=t.decode(a),r+=s,so.checkBufferForEndHeader(e,r,s*2,t))break}return i}static readHeaderFromBuffer(e){const t=new TextDecoder;let r=0,i="";const s=100;for(;;){if(r+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,r,s);if(i+=t.decode(a),r+=s,so.checkBufferForEndHeader(e,r,s*2,t))break}return i}static convertHeaderTextToLines(e){const t=e.split(`
`),r=[];for(let i=0;i<t.length;i++){const s=t[i].trim();if(r.push(s),s===so.HeaderEndToken)break}return r}static determineHeaderFormatFromHeaderText(e){const t=so.convertHeaderTextToLines(e);let r=Ua.INRIAV1;for(let i=0;i<t.length;i++){const s=t[i].trim();if(s.startsWith("element chunk")||s.match(/[A-Za-z]*packed_[A-Za-z]*/))r=Ua.PlayCanvasCompressed;else if(s.startsWith("element codebook_centers"))r=Ua.INRIAV2;else if(s===so.HeaderEndToken)break}return r}static determineHeaderFormatFromPlyBuffer(e){const t=so.extractHeaderFromBufferToText(e);return so.determineHeaderFormatFromHeaderText(t)}static readVertex(e,t,r,i,s,a,o=!0){const l=r*t.bytesPerVertex+i,c=t.fieldOffsets,u=t.fieldTypes;for(let d of s){const h=u[d];h===m8?a[d]=e.getFloat32(l+c[d],!0):h===v8?a[d]=e.getInt16(l+c[d],!0):h===g8?a[d]=e.getUint16(l+c[d],!0):h===h8?a[d]=e.getInt32(l+c[d],!0):h===p8?a[d]=e.getUint32(l+c[d],!0):h===y8&&(o?a[d]=e.getUint8(l+c[d])/255:a[d]=e.getUint8(l+c[d]))}}};pn(so,"HeaderEndToken","end_header");let fs=so;const Gne=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0"],Hrt=Gne.map((n,e)=>e),[F$,Vrt,$rt,Grt,Wrt,qrt,Krt,Yrt,Xrt,jrt,z$,Zrt,Qrt,U$,H$,Jrt,eit,tit]=Hrt,dl=class dl{static decodeHeaderLines(e){let t=0;e.forEach(u=>{u.includes("f_rest_")&&t++});let r=0;t>=45?r=45:t>=24?r=24:t>=9&&(r=9);let s=Array.from(Array(Math.max(r-1,0))).map((u,d)=>`f_rest_${d+1}`);const a=[...Gne,...s],o=a.map((u,d)=>d),l=o.reduce((u,d)=>(u[a[d]]=d,u),{}),c=fs.decodeSectionHeader(e,l,0);return c.splatCount=c.vertexCount,c.bytesPerSplat=c.bytesPerVertex,c.fieldsToReadIndexes=o,c}static decodeHeaderText(e){const t=fs.convertHeaderTextToLines(e),r=dl.decodeHeaderLines(t);return r.headerText=e,r.headerSizeBytes=e.indexOf(fs.HeaderEndToken)+fs.HeaderEndToken.length+1,r}static decodeHeaderFromBuffer(e){const t=fs.readHeaderFromBuffer(e);return dl.decodeHeaderText(t)}static findSplatData(e,t){return new DataView(e,t.headerSizeBytes)}static parseToUncompressedSplatBufferSection(e,t,r,i,s,a,o,l=0){l=Math.min(l,e.sphericalHarmonicsDegree);const c=Un.CompressionLevels[0].SphericalHarmonicsDegrees[l].BytesPerSplat;for(let u=t;u<=r;u++){const d=dl.parseToUncompressedSplat(i,u,e,s,l),h=u*c+o;Un.writeSplatDataToSectionBuffer(d,a,h,0,l)}}static parseToUncompressedSplatArraySection(e,t,r,i,s,a,o=0){o=Math.min(o,e.sphericalHarmonicsDegree);for(let l=t;l<=r;l++){const c=dl.parseToUncompressedSplat(i,l,e,s,o);a.addSplat(c)}}static decodeSectionSplatData(e,t,r,i,s=!0){if(i=Math.min(i,r.sphericalHarmonicsDegree),s){const a=new yn(i);for(let o=0;o<t;o++){const l=dl.parseToUncompressedSplat(e,o,r,0,i);a.addSplat(l)}return a}else{const{splatBuffer:a,splatBufferDataOffsetBytes:o}=Un.preallocateUncompressed(t,i);return dl.parseToUncompressedSplatBufferSection(r,0,t-1,e,0,a.bufferData,o,i),a}}static readSplat(e,t,r,i,s){return fs.readVertex(e,t,r,i,t.fieldsToReadIndexes,s,!0)}static parseToUncompressedSplatArray(e,t=0){const{header:r,splatCount:i,splatData:s}=V$(e);return dl.decodeSectionSplatData(s,i,r,t,!0)}static parseToUncompressedSplatBuffer(e,t=0){const{header:r,splatCount:i,splatData:s}=V$(e);return dl.decodeSectionSplatData(s,i,r,t,!1)}};pn(dl,"parseToUncompressedSplat",function(){let e=[];const t=new Hi,r=yn.OFFSET.X,i=yn.OFFSET.Y,s=yn.OFFSET.Z,a=yn.OFFSET.SCALE0,o=yn.OFFSET.SCALE1,l=yn.OFFSET.SCALE2,c=yn.OFFSET.ROTATION0,u=yn.OFFSET.ROTATION1,d=yn.OFFSET.ROTATION2,h=yn.OFFSET.ROTATION3,f=yn.OFFSET.FDC0,p=yn.OFFSET.FDC1,m=yn.OFFSET.FDC2,v=yn.OFFSET.OPACITY,g=[];for(let _=0;_<45;_++)g[_]=yn.OFFSET.FRC0+_;return function(_,b,S,x=0,w=0){w=Math.min(w,S.sphericalHarmonicsDegree),dl.readSplat(_,S,b,x,e);const M=yn.createSplat(w);if(e[F$]!==void 0?(M[a]=Math.exp(e[F$]),M[o]=Math.exp(e[Vrt]),M[l]=Math.exp(e[$rt])):(M[a]=.01,M[o]=.01,M[l]=.01),e[z$]!==void 0){const C=.28209479177387814;M[f]=(.5+C*e[z$])*255,M[p]=(.5+C*e[Zrt])*255,M[m]=(.5+C*e[Qrt])*255}else e[H$]!==void 0?(M[f]=e[H$]*255,M[p]=e[Jrt]*255,M[m]=e[eit]*255):(M[f]=0,M[p]=0,M[m]=0);if(e[U$]!==void 0&&(M[v]=1/(1+Math.exp(-e[U$]))*255),M[f]=zi(Math.floor(M[f]),0,255),M[p]=zi(Math.floor(M[p]),0,255),M[m]=zi(Math.floor(M[m]),0,255),M[v]=zi(Math.floor(M[v]),0,255),w>=1&&e[tit]!==void 0){for(let C=0;C<9;C++)M[g[C]]=e[S.sphericalHarmonicsDegree1Fields[C]];if(w>=2)for(let C=0;C<15;C++)M[g[9+C]]=e[S.sphericalHarmonicsDegree2Fields[C]]}return t.set(e[Grt],e[Wrt],e[qrt],e[Krt]),t.normalize(),M[c]=t.x,M[u]=t.y,M[d]=t.z,M[h]=t.w,M[r]=e[Yrt],M[i]=e[Xrt],M[s]=e[jrt],M}}());let md=dl;function V$(n){const e=md.decodeHeaderFromBuffer(n),t=e.splatCount,r=md.findSplatData(n,e);return{header:e,splatCount:t,splatData:r}}const Wne=["features_dc","features_rest_0","features_rest_1","features_rest_2","features_rest_3","features_rest_4","features_rest_5","features_rest_6","features_rest_7","features_rest_8","features_rest_9","features_rest_10","features_rest_11","features_rest_12","features_rest_13","features_rest_14","opacity","scaling","rotation_re","rotation_im"],Uw=Wne.map((n,e)=>e),[Hw,nit,rit,$$,Vw,iit,cI]=[0,1,4,16,17,18,19],qne=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0","f_rest_1","f_rest_2","f_rest_3","f_rest_4","f_rest_5","f_rest_6","f_rest_7","f_rest_8","f_rest_9","f_rest_10","f_rest_11","f_rest_12","f_rest_13","f_rest_14","f_rest_15","f_rest_16","f_rest_17","f_rest_18","f_rest_19","f_rest_20","f_rest_21","f_rest_22","f_rest_23","f_rest_24","f_rest_25","f_rest_26","f_rest_27","f_rest_28","f_rest_29","f_rest_30","f_rest_31","f_rest_32","f_rest_33","f_rest_34","f_rest_35","f_rest_36","f_rest_37","f_rest_38","f_rest_39","f_rest_40","f_rest_41","f_rest_42","f_rest_43","f_rest_44","f_rest_45"],jP=qne.map((n,e)=>e),[G$,sit,ait,oit,lit,cit,uit,dit,fit,hit,ZP,Kne,Yne,W$]=jP,q$=ZP,pit=Kne,mit=Yne,$w=n=>{const e=(31744&n)>>10,t=1023&n;return(n>>15?-1:1)*(e?e===31?t?NaN:1/0:Math.pow(2,e-15)*(1+t/1024):t/1024*6103515625e-14)},ao=class ao{static decodeSectionHeadersFromHeaderLines(e){const t=jP.reduce((u,d)=>(u[qne[d]]=d,u),{}),r=Uw.reduce((u,d)=>(u[Wne[d]]=d,u),{}),i=fs.getHeaderSectionNames(e);let s;for(let u=0;u<i.length;u++)i[u]==="codebook_centers"&&(s=u);let a=0,o=!1;const l=[];let c=0;for(;!o;){let u;c===s?u=fs.decodeSectionHeader(e,r,a):u=fs.decodeSectionHeader(e,t,a),o=u.endOfHeader,a=u.headerEndLine+1,o||(u.splatCount=u.vertexCount,u.bytesPerSplat=u.bytesPerVertex),l.push(u),c++}return l}static decodeSectionHeadersFromHeaderText(e){const t=fs.convertHeaderTextToLines(e);return ao.decodeSectionHeadersFromHeaderLines(t)}static getSplatCountFromSectionHeaders(e){let t=0;for(let r of e)r.sectionName!=="codebook_centers"&&(t+=r.vertexCount);return t}static decodeHeaderFromHeaderText(e){const t=e.indexOf(fs.HeaderEndToken)+fs.HeaderEndToken.length+1,r=ao.decodeSectionHeadersFromHeaderText(e),i=ao.getSplatCountFromSectionHeaders(r);return{headerSizeBytes:t,sectionHeaders:r,splatCount:i}}static decodeHeaderFromBuffer(e){const t=fs.readHeaderFromBuffer(e);return ao.decodeHeaderFromHeaderText(t)}static findVertexData(e,t,r){let i=t.headerSizeBytes;for(let s=0;s<r&&s<t.sectionHeaders.length;s++){const a=t.sectionHeaders[s];i+=a.dataSizeBytes}return new DataView(e,i,t.sectionHeaders[r].dataSizeBytes)}static decodeCodeBook(e,t){const r=[],i=[];for(let s=0;s<t.vertexCount;s++){fs.readVertex(e,t,s,0,Uw,r);for(let a of Uw){const o=Uw[a];let l=i[o];l||(i[o]=l=[]),l.push(r[a])}}for(let s=0;s<i.length;s++){const a=i[s],o=.28209479177387814;for(let l=0;l<a.length;l++){const c=$w(a[l]);s===$$?a[l]=Math.round(1/(1+Math.exp(-c))*255):s===Hw?a[l]=Math.round((.5+o*c)*255):s===Vw?a[l]=Math.exp(c):a[l]=c}}return i}static decodeSectionSplatData(e,t,r,i,s){s=Math.min(s,r.sphericalHarmonicsDegree);const a=new yn(s);for(let o=0;o<t;o++){const l=ao.parseToUncompressedSplat(e,o,r,i,0,s);a.addSplat(l)}return a}static readSplat(e,t,r,i,s){return fs.readVertex(e,t,r,i,jP,s,!1)}static parseToUncompressedSplatArray(e,t=0){const r=[],i=ao.decodeHeaderFromBuffer(e,t);let s;for(let o=0;o<i.sectionHeaders.length;o++){const l=i.sectionHeaders[o];if(l.sectionName==="codebook_centers"){const c=ao.findVertexData(e,i,o);s=ao.decodeCodeBook(c,l)}}for(let o=0;o<i.sectionHeaders.length;o++){const l=i.sectionHeaders[o];if(l.sectionName!=="codebook_centers"){const c=l.vertexCount,u=ao.findVertexData(e,i,o),d=ao.decodeSectionSplatData(u,c,l,s,t);r.push(d)}}const a=new yn(t);for(let o of r)for(let l of o.splats)a.addSplat(l);return a}};pn(ao,"parseToUncompressedSplat",function(){let e=[];const t=new Hi,r=yn.OFFSET.X,i=yn.OFFSET.Y,s=yn.OFFSET.Z,a=yn.OFFSET.SCALE0,o=yn.OFFSET.SCALE1,l=yn.OFFSET.SCALE2,c=yn.OFFSET.ROTATION0,u=yn.OFFSET.ROTATION1,d=yn.OFFSET.ROTATION2,h=yn.OFFSET.ROTATION3,f=yn.OFFSET.FDC0,p=yn.OFFSET.FDC1,m=yn.OFFSET.FDC2,v=yn.OFFSET.OPACITY,g=[];for(let _=0;_<45;_++)g[_]=yn.OFFSET.FRC0+_;return function(_,b,S,x,w=0,M=0){M=Math.min(M,S.sphericalHarmonicsDegree),ao.readSplat(_,S,b,w,e);const C=yn.createSplat(M);if(e[G$]!==void 0?(C[a]=x[Vw][e[G$]],C[o]=x[Vw][e[sit]],C[l]=x[Vw][e[ait]]):(C[a]=.01,C[o]=.01,C[l]=.01),e[ZP]!==void 0?(C[f]=x[Hw][e[ZP]],C[p]=x[Hw][e[Kne]],C[m]=x[Hw][e[Yne]]):e[q$]!==void 0?(C[f]=e[q$]*255,C[p]=e[pit]*255,C[m]=e[mit]*255):(C[f]=0,C[p]=0,C[m]=0),e[W$]!==void 0&&(C[v]=x[$$][e[W$]]),C[f]=zi(Math.floor(C[f]),0,255),C[p]=zi(Math.floor(C[p]),0,255),C[m]=zi(Math.floor(C[m]),0,255),C[v]=zi(Math.floor(C[v]),0,255),M>=1&&S.sphericalHarmonicsDegree>=1){for(let B=0;B<9;B++){const O=x[nit+B%3];C[g[B]]=O[e[S.sphericalHarmonicsDegree1Fields[B]]]}if(M>=2&&S.sphericalHarmonicsDegree>=2)for(let B=0;B<15;B++){const O=x[rit+B%5];C[g[9+B]]=O[e[S.sphericalHarmonicsDegree2Fields[B]]]}}const A=x[iit][e[oit]],T=x[cI][e[lit]],I=x[cI][e[cit]],D=x[cI][e[uit]];return t.set(A,T,I,D),t.normalize(),C[c]=t.x,C[u]=t.y,C[d]=t.z,C[h]=t.w,C[r]=$w(e[dit]),C[i]=$w(e[fit]),C[s]=$w(e[hit]),C}}());let QP=ao;class K${static parseToUncompressedSplatArray(e,t=0){const r=fs.determineHeaderFormatFromPlyBuffer(e);if(r===Ua.PlayCanvasCompressed)return td.parseToUncompressedSplatArray(e,t);if(r===Ua.INRIAV1)return md.parseToUncompressedSplatArray(e,t);if(r===Ua.INRIAV2)return QP.parseToUncompressedSplatArray(e,t)}static parseToUncompressedSplatBuffer(e,t=0){const r=fs.determineHeaderFormatFromPlyBuffer(e);if(r===Ua.PlayCanvasCompressed)return td.parseToUncompressedSplatBuffer(e,t);if(r===Ua.INRIAV1)return md.parseToUncompressedSplatBuffer(e,t);if(r===Ua.INRIAV2)throw new Error("parseToUncompressedSplatBuffer() is not implemented for INRIA V2 PLY files")}}class b8{constructor(e,t,r,i){this.sectionCount=e,this.sectionFilters=t,this.groupingParameters=r,this.partitionGenerator=i}partitionUncompressedSplatArray(e){let t,r,i;if(this.partitionGenerator){const a=this.partitionGenerator(e);t=a.groupingParameters,r=a.sectionCount,i=a.sectionFilters}else t=this.groupingParameters,r=this.sectionCount,i=this.sectionFilters;const s=[];for(let a=0;a<r;a++){const o=new yn(e.sphericalHarmonicsDegree),l=i[a];for(let c=0;c<e.splatCount;c++)l(c)&&o.addSplat(e.splats[c]);s.push(o)}return{splatArrays:s,parameters:t}}static getStandardPartitioner(e=0,t=new it,r=Un.BucketBlockSize,i=Un.BucketSize){const s=a=>{const o=yn.OFFSET.X,l=yn.OFFSET.Y,c=yn.OFFSET.Z;e<=0&&(e=a.splatCount);const u=new it,d=.5,h=g=>{g.x=Math.floor(g.x/d)*d,g.y=Math.floor(g.y/d)*d,g.z=Math.floor(g.z/d)*d};a.splats.forEach(g=>{u.set(g[o],g[l],g[c]).sub(t),h(u),g.centerDist=u.lengthSq()}),a.splats.sort((g,_)=>{let b=g.centerDist,S=_.centerDist;return b>S?1:-1});const f=[],p=[];e=Math.min(a.splatCount,e);const m=Math.ceil(a.splatCount/e);let v=0;for(let g=0;g<m;g++){let _=v;f.push(b=>b>=_&&b<_+e),p.push({blocksSize:r,bucketSize:i}),v+=e}return{sectionCount:f.length,sectionFilters:f,groupingParameters:p}};return new b8(void 0,void 0,void 0,s)}}class pS{constructor(e,t,r,i,s,a,o){this.splatPartitioner=e,this.alphaRemovalThreshold=t,this.compressionLevel=r,this.sectionSize=i,this.sceneCenter=s?new it().copy(s):void 0,this.blockSize=a,this.bucketSize=o}generateFromUncompressedSplatArray(e){const t=this.splatPartitioner.partitionUncompressedSplatArray(e);return Un.generateFromUncompressedSplatArrays(t.splatArrays,this.alphaRemovalThreshold,this.compressionLevel,this.sceneCenter,this.blockSize,this.bucketSize,t.parameters)}static getStandardGenerator(e=1,t=1,r=0,i=new it,s=Un.BucketBlockSize,a=Un.BucketSize){const o=b8.getStandardPartitioner(r,i,s,a);return new pS(o,e,t,r,i,s,a)}}const hs={Downloading:0,Processing:1,Done:2};class TM extends Error{constructor(e){super(e)}}const Ii={ProgressiveToSplatBuffer:0,ProgressiveToSplatArray:1,DownloadBeforeProcessing:2};function Y$(n,e){let t=0;for(let i of n)t+=i.sizeBytes;(!e||e.byteLength<t)&&(e=new ArrayBuffer(t));let r=0;for(let i of n)new Uint8Array(e,r,i.sizeBytes).set(i.data),r+=i.sizeBytes;return e}function X$(n,e,t,r,i,s,a,o){return e?pS.getStandardGenerator(t,r,i,s,a,o).generateFromUncompressedSplatArray(n):Un.generateFromUncompressedSplatArrays([n],t,0,new it)}class _8{static loadFromURL(e,t,r,i,s,a,o=!0,l=0,c,u,d,h,f){let p;!r&&!o?p=Ii.DownloadBeforeProcessing:o?p=Ii.ProgressiveToSplatArray:p=Ii.ProgressiveToSplatBuffer;const m=Hr.ProgressiveLoadSectionSize,v=Un.HeaderSizeBytes+Un.SectionHeaderSizeBytes,g=1;let _,b,S,x,w,M=0,C=0,A=0,T=!1,I=!1,D=!1;const B=c8();let O=0,H=0,L=0,z=0,k="",F=null,W=[],q;const Z=new TextDecoder,se=(X,ie,ae)=>{const ce=X>=100;if(ae&&(W.push({data:ae,sizeBytes:ae.byteLength,startBytes:L,endBytes:L+ae.byteLength}),L+=ae.byteLength),p===Ii.DownloadBeforeProcessing)ce&&B.resolve(W);else{if(T){if(_===Ua.PlayCanvasCompressed&&!I){const we=F.headerSizeBytes+F.chunkElement.storageSizeBytes;w=Y$(W,w),w.byteLength>=we&&(td.readElementData(F.chunkElement,w,F.headerSizeBytes),O=we,H=we,I=!0)}}else if(k+=Z.decode(ae),fs.checkTextForEndHeader(k)){if(_=fs.determineHeaderFormatFromHeaderText(k),_===Ua.INRIAV1)F=md.decodeHeaderText(k),l=Math.min(l,F.sphericalHarmonicsDegree),M=F.splatCount,I=!0,z=F.headerSizeBytes+F.bytesPerSplat*M;else if(_===Ua.PlayCanvasCompressed){if(F=td.decodeHeaderText(k),l=Math.min(l,F.sphericalHarmonicsDegree),p===Ii.ProgressiveToSplatBuffer&&l>0)throw new TM("PlyLoader.loadFromURL() -> Selected PLY format has spherical harmonics data that cannot be progressively loaded.");M=F.vertexElement.count,z=F.headerSizeBytes+F.bytesPerSplat*M+F.chunkElement.storageSizeBytes}else{if(p===Ii.ProgressiveToSplatBuffer)throw new TM("PlyLoader.loadFromURL() -> Selected PLY format cannot be progressively loaded.");p=Ii.DownloadBeforeProcessing;return}if(p===Ii.ProgressiveToSplatBuffer){const we=Un.CompressionLevels[0].SphericalHarmonicsDegrees[l],He=v+we.BytesPerSplat*M;S=new ArrayBuffer(He),Un.writeHeaderToBuffer({versionMajor:Un.CurrentMajorVersion,versionMinor:Un.CurrentMinorVersion,maxSectionCount:g,sectionCount:g,maxSplatCount:M,splatCount:0,compressionLevel:0,sceneCenter:new it},S)}else q=new yn(l);O=F.headerSizeBytes,H=F.headerSizeBytes,T=!0}if(T&&I&&W.length>0&&(b=Y$(W,b),L-O>m||L>=z&&!D||ce)){const He=D?F.sphericalHarmonicsPerSplat:F.bytesPerSplat,me=(D?L:Math.min(z,L))-H,be=Math.floor(me/He),oe=be*He,j=L-H-oe,ke=H-W[0].startBytes,ze=new DataView(b,ke,oe);if(D)_===Ua.PlayCanvasCompressed&&p===Ii.ProgressiveToSplatArray&&(td.parseSphericalHarmonicsToUncompressedSplatArraySection(F.chunkElement,F.shElement,A,A+be-1,ze,0,l,F.sphericalHarmonicsDegree,q),A+=be);else{if(p===Ii.ProgressiveToSplatBuffer){const Ve=Un.CompressionLevels[0].SphericalHarmonicsDegrees[l],Le=C*Ve.BytesPerSplat+v;_===Ua.PlayCanvasCompressed?td.parseToUncompressedSplatBufferSection(F.chunkElement,F.vertexElement,0,be-1,C,ze,S,Le):md.parseToUncompressedSplatBufferSection(F,0,be-1,ze,0,S,Le,l)}else _===Ua.PlayCanvasCompressed?td.parseToUncompressedSplatArraySection(F.chunkElement,F.vertexElement,0,be-1,C,ze,q):md.parseToUncompressedSplatArraySection(F,0,be-1,ze,0,q,l);C+=be,p===Ii.ProgressiveToSplatBuffer&&(x||(Un.writeSectionHeaderToBuffer({maxSplatCount:M,splatCount:C,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:l},0,S,Un.HeaderSizeBytes),x=new Un(S,!1)),x.updateLoadedCounts(1,C)),L>=z&&(D=!0)}if(j===0)W=[];else{let Ve=[],Le=0;for(let Ze=W.length-1;Ze>=0;Ze--){const st=W[Ze];if(Le+=st.sizeBytes,Ve.unshift(st),Le>=j)break}W=Ve}O+=m,H+=oe}i&&x&&i(x,ce),ce&&(p===Ii.ProgressiveToSplatBuffer?B.resolve(x):B.resolve(q))}t&&t(X,ie,hs.Downloading)};return t&&t(0,"0%",hs.Downloading),ZT(e,se,!1,c).then(()=>(t&&t(0,"0%",hs.Processing),B.promise.then(X=>{if(t&&t(100,"100%",hs.Done),p===Ii.DownloadBeforeProcessing){const ie=W.map(ae=>ae.data);return new Blob(ie).arrayBuffer().then(ae=>_8.loadFromFileData(ae,s,a,o,l,u,d,h,f))}else return p===Ii.ProgressiveToSplatBuffer?X:Wo(()=>X$(X,o,s,a,u,d,h,f))})))}static loadFromFileData(e,t,r,i,s=0,a,o,l,c){return i?Wo(()=>K$.parseToUncompressedSplatArray(e,s)).then(u=>X$(u,i,t,r,a,o,l,c)):Wo(()=>K$.parseToUncompressedSplatBuffer(e,s))}}const vit=n=>new ReadableStream({async start(e){e.enqueue(n),e.close()}});async function git(n){try{const e=vit(n);if(!e)throw new Error("Failed to create stream from data");return await yit(e)}catch(e){throw console.error("Error decompressing gzipped data:",e),e}}async function yit(n){const e=n.pipeThrough(new DecompressionStream("gzip")),r=await new Response(e).arrayBuffer();return new Uint8Array(r)}const bit=1347635022,_it=1,Sit=.15;function xit(n){const e=n>>15&1,t=n>>10&31,r=n&1023,i=e===1?-1:1;return t===0?i*Math.pow(2,-14)*r/1024:t===31?r!==0?NaN:i*(1/0):i*Math.pow(2,t-15)*(1+r/1024)}function wit(n){return(n-128)/128}function kp(n){switch(n){case 0:return 0;case 1:return 3;case 2:return 8;case 3:return 15;default:return console.error(`[SPZ: ERROR] Unsupported SH degree: ${n}`),0}}const Cit=function(){let n=[];const e=new Hi,t=yn.OFFSET.X,r=yn.OFFSET.Y,i=yn.OFFSET.Z,s=yn.OFFSET.SCALE0,a=yn.OFFSET.SCALE1,o=yn.OFFSET.SCALE2,l=yn.OFFSET.ROTATION0,c=yn.OFFSET.ROTATION1,u=yn.OFFSET.ROTATION2,d=yn.OFFSET.ROTATION3,h=yn.OFFSET.FDC0,f=yn.OFFSET.FDC1,p=yn.OFFSET.FDC2,m=yn.OFFSET.OPACITY,v=[kp(0),kp(1),kp(2),kp(3)],g=[0,1,2,9,10,11,12,13,24,25,26,27,28,29,30,3,4,5,14,15,16,17,18,31,32,33,34,35,36,37,6,7,8,19,20,21,22,23,38,39,40,41,42,43,44];return function(_,b,S){S=Math.min(b,S);const x=yn.createSplat(S);_.scale[0]!==void 0?(x[s]=_.scale[0],x[a]=_.scale[1],x[o]=_.scale[2]):(x[s]=.01,x[a]=.01,x[o]=.01),_.color[0]!==void 0?(x[h]=_.color[0],x[f]=_.color[1],x[p]=_.color[2]):n[RED]!==void 0?(x[h]=n[RED]*255,x[f]=n[GREEN]*255,x[p]=n[BLUE]*255):(x[h]=0,x[f]=0,x[p]=0),_.alpha!==void 0&&(x[m]=_.alpha),x[h]=zi(Math.floor(x[h]),0,255),x[f]=zi(Math.floor(x[f]),0,255),x[p]=zi(Math.floor(x[p]),0,255),x[m]=zi(Math.floor(x[m]),0,255);let w=v[S],M=v[b];for(let C=0;C<3;++C)for(let A=0;A<15;++A){const T=g[C*15+A];A<w&&A<M&&(x[yn.OFFSET.FRC0+T]=_.sh[C*M+A])}return e.set(_.rotation[3],_.rotation[0],_.rotation[1],_.rotation[2]),e.normalize(),x[l]=e.x,x[c]=e.y,x[u]=e.z,x[d]=e.w,x[t]=_.position[0],x[r]=_.position[1],x[i]=_.position[2],x}}();function Mit(n,e,t,r){return!(n.positions.length!==e*3*(r?2:3)||n.scales.length!==e*3||n.rotations.length!==e*3||n.alphas.length!==e||n.colors.length!==e*3||n.sh.length!==e*t*3)}function j$(n,e,t,r,i){e=Math.min(e,n.shDegree);const s=n.numPoints,a=kp(n.shDegree),o=n.positions.length===s*3*2;if(!Mit(n,s,a,o))return null;const l={position:[],scale:[],rotation:[],alpha:void 0,color:[],sh:[]};let c;o&&(c=new Uint16Array(n.positions.buffer,n.positions.byteOffset,s*3));const u=1/(1<<n.fractionalBits),d=kp(n.shDegree),h=.28209479177387814;for(let f=0;f<s;f++){if(o)for(let _=0;_<3;_++)l.position[_]=xit(c[f*3+_]);else for(let _=0;_<3;_++){const b=f*9+_*3;let S=n.positions[b];S|=n.positions[b+1]<<8,S|=n.positions[b+2]<<16,S|=S&8388608?4278190080:0,l.position[_]=S*u}for(let _=0;_<3;_++)l.scale[_]=Math.exp(n.scales[f*3+_]/16-10);const p=n.rotations.subarray(f*3,f*3+3),m=[p[0]/127.5-1,p[1]/127.5-1,p[2]/127.5-1];l.rotation[0]=m[0],l.rotation[1]=m[1],l.rotation[2]=m[2];const v=m[0]*m[0]+m[1]*m[1]+m[2]*m[2];l.rotation[3]=Math.sqrt(Math.max(0,1-v)),l.alpha=Math.floor(n.alphas[f]);for(let _=0;_<3;_++)l.color[_]=Math.floor(((n.colors[f*3+_]/255-.5)/Sit*h+.5)*255);for(let _=0;_<3;_++)for(let b=0;b<d;b++)l.sh[_*d+b]=wit(n.sh[d*3*f+b*3+_]);const g=Cit(l,n.shDegree,e);if(t){const _=Un.CompressionLevels[0].SphericalHarmonicsDegrees[e].BytesPerSplat,b=f*_+i;Un.writeSplatDataToSectionBuffer(g,r,b,0,e)}else r.addSplat(g)}}const Tit=16,Ait=1e7;function Eit(n){const e=new DataView(n);let t=0;const r={magic:e.getUint32(t,!0),version:e.getUint32(t+4,!0),numPoints:e.getUint32(t+8,!0),shDegree:e.getUint8(t+12),fractionalBits:e.getUint8(t+13),flags:e.getUint8(t+14),reserved:e.getUint8(t+15)};if(t+=Tit,r.magic!==bit)return console.error("[SPZ ERROR] deserializePackedGaussians: header not found"),null;if(r.version<1||r.version>2)return console.error(`[SPZ ERROR] deserializePackedGaussians: version not supported: ${r.version}`),null;if(r.numPoints>Ait)return console.error(`[SPZ ERROR] deserializePackedGaussians: Too many points: ${r.numPoints}`),null;if(r.shDegree>3)return console.error(`[SPZ ERROR] deserializePackedGaussians: Unsupported SH degree: ${r.shDegree}`),null;const i=r.numPoints,s=kp(r.shDegree),a=r.version===1,o={numPoints:i,shDegree:r.shDegree,fractionalBits:r.fractionalBits,antialiased:(r.flags&_it)!==0,positions:new Uint8Array(i*3*(a?2:3)),scales:new Uint8Array(i*3),rotations:new Uint8Array(i*3),alphas:new Uint8Array(i),colors:new Uint8Array(i*3),sh:new Uint8Array(i*s*3)};try{const l=new Uint8Array(n);let c=o.positions.length,u=t;if(o.positions.set(l.slice(u,u+c)),u+=c,o.alphas.set(l.slice(u,u+o.alphas.length)),u+=o.alphas.length,o.colors.set(l.slice(u,u+o.colors.length)),u+=o.colors.length,o.scales.set(l.slice(u,u+o.scales.length)),u+=o.scales.length,o.rotations.set(l.slice(u,u+o.rotations.length)),u+=o.rotations.length,o.sh.set(l.slice(u,u+o.sh.length)),u+o.sh.length!==n.byteLength)return console.error("[SPZ ERROR] deserializePackedGaussians: incorrect buffer size"),null}catch(l){return console.error("[SPZ ERROR] deserializePackedGaussians: read error",l),null}return o}async function Iit(n){try{const e=await git(n);return Eit(e.buffer)}catch(e){return console.error("[SPZ ERROR] loadSpzPacked: decompression error",e),null}}class S8{static loadFromURL(e,t,r,i,s=!0,a=0,o,l,c,u,d){return t&&t(0,"0%",hs.Downloading),ZT(e,t,!0,o).then(h=>(t&&t(0,"0%",hs.Processing),S8.loadFromFileData(h,r,i,s,a,l,c,u,d)))}static async loadFromFileData(e,t,r,i,s=0,a,o,l,c){await Wo();const u=await Iit(e);s=Math.min(u.shDegree,s);const d=new yn(s);if(i)return j$(u,s,!1,d,0),pS.getStandardGenerator(t,r,a,o,l,c).generateFromUncompressedSplatArray(d);{const{splatBuffer:h,splatBufferDataOffsetBytes:f}=Un.preallocateUncompressed(u.numPoints,s);return j$(u,s,!0,h.bufferData,f),h}}}const di=class di{static parseToUncompressedSplatBufferSection(e,t,r,i,s,a){const o=Un.CompressionLevels[0].BytesPerCenter,l=Un.CompressionLevels[0].BytesPerScale,c=Un.CompressionLevels[0].BytesPerRotation,u=Un.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat;for(let d=e;d<=t;d++){const h=d*di.RowSizeBytes+i,f=new Float32Array(r,h,3),p=new Float32Array(r,h+di.CenterSizeBytes,3),m=new Uint8Array(r,h+di.CenterSizeBytes+di.ScaleSizeBytes,4),v=new Uint8Array(r,h+di.CenterSizeBytes+di.ScaleSizeBytes+di.RotationSizeBytes,4),g=new Hi((v[1]-128)/128,(v[2]-128)/128,(v[3]-128)/128,(v[0]-128)/128);g.normalize();const _=d*u+a,b=new Float32Array(s,_,3),S=new Float32Array(s,_+o,3),x=new Float32Array(s,_+o+l,4),w=new Uint8Array(s,_+o+l+c,4);b[0]=f[0],b[1]=f[1],b[2]=f[2],S[0]=p[0],S[1]=p[1],S[2]=p[2],x[0]=g.w,x[1]=g.x,x[2]=g.y,x[3]=g.z,w[0]=m[0],w[1]=m[1],w[2]=m[2],w[3]=m[3]}}static parseToUncompressedSplatArraySection(e,t,r,i,s){for(let a=e;a<=t;a++){const o=a*di.RowSizeBytes+i,l=new Float32Array(r,o,3),c=new Float32Array(r,o+di.CenterSizeBytes,3),u=new Uint8Array(r,o+di.CenterSizeBytes+di.ScaleSizeBytes,4),d=new Uint8Array(r,o+di.CenterSizeBytes+di.ScaleSizeBytes+di.RotationSizeBytes,4),h=new Hi((d[1]-128)/128,(d[2]-128)/128,(d[3]-128)/128,(d[0]-128)/128);h.normalize(),s.addSplatFromComonents(l[0],l[1],l[2],c[0],c[1],c[2],h.w,h.x,h.y,h.z,u[0],u[1],u[2],u[3])}}static parseStandardSplatToUncompressedSplatArray(e){const t=e.byteLength/di.RowSizeBytes,r=new yn;for(let i=0;i<t;i++){const s=i*di.RowSizeBytes,a=new Float32Array(e,s,3),o=new Float32Array(e,s+di.CenterSizeBytes,3),l=new Uint8Array(e,s+di.CenterSizeBytes+di.ScaleSizeBytes,4),c=new Uint8Array(e,s+di.CenterSizeBytes+di.ScaleSizeBytes+di.ColorSizeBytes,4),u=new Hi((c[1]-128)/128,(c[2]-128)/128,(c[3]-128)/128,(c[0]-128)/128);u.normalize(),r.addSplatFromComonents(a[0],a[1],a[2],o[0],o[1],o[2],u.w,u.x,u.y,u.z,l[0],l[1],l[2],l[3])}return r}};pn(di,"RowSizeBytes",32),pn(di,"CenterSizeBytes",12),pn(di,"ScaleSizeBytes",12),pn(di,"RotationSizeBytes",4),pn(di,"ColorSizeBytes",4);let bp=di;function Z$(n,e,t,r,i,s,a,o){return e?pS.getStandardGenerator(t,r,i,s,a,o).generateFromUncompressedSplatArray(n):Un.generateFromUncompressedSplatArrays([n],t,0,new it)}class x8{static loadFromURL(e,t,r,i,s,a,o=!0,l,c,u,d,h){let f=r?Ii.ProgressiveToSplatBuffer:Ii.ProgressiveToSplatArray;o&&(f=Ii.ProgressiveToSplatArray);const p=Un.HeaderSizeBytes+Un.SectionHeaderSizeBytes,m=Hr.ProgressiveLoadSectionSize,v=1;let g,_,b,S=0,x=0,w;const M=c8();let C=0,A=0,T=[];const I=(D,B,O,H)=>{const L=D>=100;if(O&&T.push(O),f===Ii.DownloadBeforeProcessing){L&&M.resolve(T);return}if(!H){if(r)throw new TM("Cannon directly load .splat because no file size info is available.");f=Ii.DownloadBeforeProcessing;return}if(!g){S=H/bp.RowSizeBytes,g=new ArrayBuffer(H);const z=Un.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,k=p+z*S;f===Ii.ProgressiveToSplatBuffer?(_=new ArrayBuffer(k),Un.writeHeaderToBuffer({versionMajor:Un.CurrentMajorVersion,versionMinor:Un.CurrentMinorVersion,maxSectionCount:v,sectionCount:v,maxSplatCount:S,splatCount:x,compressionLevel:0,sceneCenter:new it},_)):w=new yn(0)}if(O){new Uint8Array(g,A,O.byteLength).set(new Uint8Array(O)),A+=O.byteLength;const z=A-C;if(z>m||L){const F=(L?z:m)/bp.RowSizeBytes,W=x+F;f===Ii.ProgressiveToSplatBuffer?bp.parseToUncompressedSplatBufferSection(x,W-1,g,0,_,p):bp.parseToUncompressedSplatArraySection(x,W-1,g,0,w),x=W,f===Ii.ProgressiveToSplatBuffer&&(b||(Un.writeSectionHeaderToBuffer({maxSplatCount:S,splatCount:x,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0},0,_,Un.HeaderSizeBytes),b=new Un(_,!1)),b.updateLoadedCounts(1,x),i&&i(b,L)),C+=m}}L&&(f===Ii.ProgressiveToSplatBuffer?M.resolve(b):M.resolve(w)),t&&t(D,B,hs.Downloading)};return t&&t(0,"0%",hs.Downloading),ZT(e,I,!1,l).then(()=>(t&&t(0,"0%",hs.Processing),M.promise.then(D=>(t&&t(100,"100%",hs.Done),f===Ii.DownloadBeforeProcessing?new Blob(T).arrayBuffer().then(B=>x8.loadFromFileData(B,s,a,o,c,u,d,h)):f===Ii.ProgressiveToSplatBuffer?D:Wo(()=>Z$(D,o,s,a,c,u,d,h))))))}static loadFromFileData(e,t,r,i,s,a,o,l){return Wo(()=>{const c=bp.parseStandardSplatToUncompressedSplatArray(e);return Z$(c,i,t,r,s,a,o,l)})}}const mv=class mv{static checkVersion(e){const t=Un.CurrentMajorVersion,r=Un.CurrentMinorVersion,i=Un.parseHeader(e);if(i.versionMajor===t&&i.versionMinor>=r||i.versionMajor>t)return!0;throw new Error(`KSplat version not supported: v${i.versionMajor}.${i.versionMinor}. Minimum required: v${t}.${r}`)}static loadFromURL(e,t,r,i,s){let a,o,l,c,u=!1,d=!1,h,f=[],p=!1,m=!1,v=0,g=0,_=0,b=!1,S=!1,x=!1,w=[];const M=c8(),C=()=>{!u&&!d&&v>=Un.HeaderSizeBytes&&(d=!0,new Blob(w).arrayBuffer().then(H=>{l=new ArrayBuffer(Un.HeaderSizeBytes),new Uint8Array(l).set(new Uint8Array(H,0,Un.HeaderSizeBytes)),mv.checkVersion(l),d=!1,u=!0,c=Un.parseHeader(l),window.setTimeout(()=>{I()},1)}))};let A=0;const T=()=>{A===0&&(A++,window.setTimeout(()=>{A--,D()},1))},I=()=>{const O=()=>{m=!0,new Blob(w).arrayBuffer().then(L=>{m=!1,p=!0,h=new ArrayBuffer(c.maxSectionCount*Un.SectionHeaderSizeBytes),new Uint8Array(h).set(new Uint8Array(L,Un.HeaderSizeBytes,c.maxSectionCount*Un.SectionHeaderSizeBytes)),f=Un.parseSectionHeaders(c,h,0,!1);let z=0;for(let F=0;F<c.maxSectionCount;F++)z+=f[F].storageSizeBytes;const k=Un.HeaderSizeBytes+c.maxSectionCount*Un.SectionHeaderSizeBytes+z;if(!a){a=new ArrayBuffer(k);let F=0;for(let W=0;W<w.length;W++){const q=w[W];new Uint8Array(a,F,q.byteLength).set(new Uint8Array(q)),F+=q.byteLength}}_=Un.HeaderSizeBytes+Un.SectionHeaderSizeBytes*c.maxSectionCount;for(let F=0;F<=f.length&&F<c.maxSectionCount;F++)_+=f[F].storageSizeBytes;T()})};!m&&!p&&u&&v>=Un.HeaderSizeBytes+Un.SectionHeaderSizeBytes*c.maxSectionCount&&O()},D=()=>{if(x)return;x=!0;const O=()=>{if(x=!1,p){if(S)return;if(b=v>=_,v-g>Hr.ProgressiveLoadSectionSize||b){g+=Hr.ProgressiveLoadSectionSize,S=g>=_,o||(o=new Un(a,!1));const L=Un.HeaderSizeBytes+Un.SectionHeaderSizeBytes*c.maxSectionCount;let z=0,k=0,F=0;for(let Z=0;Z<c.maxSectionCount;Z++){const se=f[Z],X=z+se.partiallyFilledBucketCount*4+se.bucketStorageSizeBytes*se.bucketCount,ie=L+X;if(g>=ie){k++;const ae=g-ie,He=Un.CompressionLevels[c.compressionLevel].SphericalHarmonicsDegrees[se.sphericalHarmonicsDegree].BytesPerSplat;let Ge=Math.floor(ae/He);Ge=Math.min(Ge,se.maxSplatCount),F+=Ge,o.updateLoadedCounts(k,F),o.updateSectionLoadedCounts(Z,Ge)}else break;z+=se.storageSizeBytes}i(o,S);const W=g/_*100,q=W.toFixed(2)+"%";t&&t(W,q,hs.Downloading),S?M.resolve(o):D()}}};window.setTimeout(O,Hr.ProgressiveLoadSectionDelayDuration)};return ZT(e,(O,H,L)=>{L&&(w.push(L),a&&new Uint8Array(a,v,L.byteLength).set(new Uint8Array(L)),v+=L.byteLength),r?(C(),I(),D()):t&&t(O,H,hs.Downloading)},!r,s).then(O=>(t&&t(0,"0%",hs.Processing),(r?M.promise:mv.loadFromFileData(O)).then(L=>(t&&t(100,"100%",hs.Done),L))))}static loadFromFileData(e){return Wo(()=>(mv.checkVersion(e),new Un(e)))}};pn(mv,"downloadFile",function(){let e;return function(t,r){const i=new Blob([t.bufferData],{type:"application/octet-stream"});e||(e=document.createElement("a"),document.body.appendChild(e)),e.download=r,e.href=URL.createObjectURL(i),e.click()}}());let JP=mv;const lo={Splat:0,KSplat:1,Ply:2,Spz:3},Q$=n=>n.endsWith(".ply")?lo.Ply:n.endsWith(".splat")?lo.Splat:n.endsWith(".ksplat")?lo.KSplat:n.endsWith(".spz")?lo.Spz:null,J$={type:"change"},uI={type:"start"},eG={type:"end"},Gw=new Mne,tG=new Af,Rit=Math.cos(70*Sne.DEG2RAD);class Ww extends A0{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new it,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"KeyA",UP:"KeyW",RIGHT:"KeyD",BOTTOM:"KeyS"},this.mouseButtons={LEFT:xm.ROTATE,MIDDLE:xm.DOLLY,RIGHT:xm.PAN},this.touches={ONE:wm.ROTATE,TWO:wm.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Q){Q.addEventListener("keydown",he),this._domElementKeyEvents=Q},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",he),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,this.clearDampedRotation(),this.clearDampedPan(),r.object.updateProjectionMatrix(),r.dispatchEvent(J$),r.update(),s=i.NONE},this.clearDampedRotation=function(){l.theta=0,l.phi=0},this.clearDampedPan=function(){u.set(0,0,0)},this.update=function(){const Q=new it,_e=new Hi().setFromUnitVectors(e.up,new it(0,1,0)),Ae=_e.clone().invert(),ge=new it,pe=new Hi,de=new it,at=2*Math.PI;return function(){_e.setFromUnitVectors(e.up,new it(0,1,0)),Ae.copy(_e).invert();const vt=r.object.position;Q.copy(vt).sub(r.target),Q.applyQuaternion(_e),o.setFromVector3(Q),r.autoRotate&&s===i.NONE&&I(A()),r.enableDamping?(o.theta+=l.theta*r.dampingFactor,o.phi+=l.phi*r.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let et=r.minAzimuthAngle,yt=r.maxAzimuthAngle;isFinite(et)&&isFinite(yt)&&(et<-Math.PI?et+=at:et>Math.PI&&(et-=at),yt<-Math.PI?yt+=at:yt>Math.PI&&(yt-=at),et<=yt?o.theta=Math.max(et,Math.min(yt,o.theta)):o.theta=o.theta>(et+yt)/2?Math.max(et,o.theta):Math.min(yt,o.theta)),o.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,o.phi)),o.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),r.zoomToCursor&&w||r.object.isOrthographicCamera?o.radius=F(o.radius):o.radius=F(o.radius*c),Q.setFromSpherical(o),Q.applyQuaternion(Ae),vt.copy(r.target).add(Q),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let Ht=!1;if(r.zoomToCursor&&w){let Ot=null;if(r.object.isPerspectiveCamera){const ln=Q.length();Ot=F(ln*c);const Vt=ln-Ot;r.object.position.addScaledVector(S,Vt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const ln=new it(x.x,x.y,0);ln.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),Ht=!0;const Vt=new it(x.x,x.y,0);Vt.unproject(r.object),r.object.position.sub(Vt).add(ln),r.object.updateMatrixWorld(),Ot=Q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ot!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ot).add(r.object.position):(Gw.origin.copy(r.object.position),Gw.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Gw.direction))<Rit?e.lookAt(r.target):(tG.setFromNormalAndCoplanarPoint(r.object.up,r.target),Gw.intersectPlane(tG,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),Ht=!0);return c=1,w=!1,Ht||ge.distanceToSquared(r.object.position)>a||8*(1-pe.dot(r.object.quaternion))>a||de.distanceToSquared(r.target)>0?(r.dispatchEvent(J$),ge.copy(r.object.position),pe.copy(r.object.quaternion),de.copy(r.target),Ht=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",dt),r.domElement.removeEventListener("pointerdown",Le),r.domElement.removeEventListener("pointercancel",st),r.domElement.removeEventListener("wheel",J),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",st),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",he),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const a=1e-6,o=new l$,l=new l$;let c=1;const u=new it,d=new Kn,h=new Kn,f=new Kn,p=new Kn,m=new Kn,v=new Kn,g=new Kn,_=new Kn,b=new Kn,S=new it,x=new Kn;let w=!1;const M=[],C={};function A(){return 2*Math.PI/60/60*r.autoRotateSpeed}function T(){return Math.pow(.95,r.zoomSpeed)}function I(Q){l.theta-=Q}function D(Q){l.phi-=Q}const B=function(){const Q=new it;return function(Ae,ge){Q.setFromMatrixColumn(ge,0),Q.multiplyScalar(-Ae),u.add(Q)}}(),O=function(){const Q=new it;return function(Ae,ge){r.screenSpacePanning===!0?Q.setFromMatrixColumn(ge,1):(Q.setFromMatrixColumn(ge,0),Q.crossVectors(r.object.up,Q)),Q.multiplyScalar(Ae),u.add(Q)}}(),H=function(){const Q=new it;return function(Ae,ge){const pe=r.domElement;if(r.object.isPerspectiveCamera){const de=r.object.position;Q.copy(de).sub(r.target);let at=Q.length();at*=Math.tan(r.object.fov/2*Math.PI/180),B(2*Ae*at/pe.clientHeight,r.object.matrix),O(2*ge*at/pe.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(B(Ae*(r.object.right-r.object.left)/r.object.zoom/pe.clientWidth,r.object.matrix),O(ge*(r.object.top-r.object.bottom)/r.object.zoom/pe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function L(Q){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c/=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function z(Q){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c*=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function k(Q){if(!r.zoomToCursor)return;w=!0;const _e=r.domElement.getBoundingClientRect(),Ae=Q.clientX-_e.left,ge=Q.clientY-_e.top,pe=_e.width,de=_e.height;x.x=Ae/pe*2-1,x.y=-(ge/de)*2+1,S.set(x.x,x.y,1).unproject(e).sub(e.position).normalize()}function F(Q){return Math.max(r.minDistance,Math.min(r.maxDistance,Q))}function W(Q){d.set(Q.clientX,Q.clientY)}function q(Q){k(Q),g.set(Q.clientX,Q.clientY)}function Z(Q){p.set(Q.clientX,Q.clientY)}function se(Q){h.set(Q.clientX,Q.clientY),f.subVectors(h,d).multiplyScalar(r.rotateSpeed);const _e=r.domElement;I(2*Math.PI*f.x/_e.clientHeight),D(2*Math.PI*f.y/_e.clientHeight),d.copy(h),r.update()}function X(Q){_.set(Q.clientX,Q.clientY),b.subVectors(_,g),b.y>0?L(T()):b.y<0&&z(T()),g.copy(_),r.update()}function ie(Q){m.set(Q.clientX,Q.clientY),v.subVectors(m,p).multiplyScalar(r.panSpeed),H(v.x,v.y),p.copy(m),r.update()}function ae(Q){k(Q),Q.deltaY<0?z(T()):Q.deltaY>0&&L(T()),r.update()}function ce(Q){let _e=!1;switch(Q.code){case r.keys.UP:Q.ctrlKey||Q.metaKey||Q.shiftKey?D(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):H(0,r.keyPanSpeed),_e=!0;break;case r.keys.BOTTOM:Q.ctrlKey||Q.metaKey||Q.shiftKey?D(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):H(0,-r.keyPanSpeed),_e=!0;break;case r.keys.LEFT:Q.ctrlKey||Q.metaKey||Q.shiftKey?I(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):H(r.keyPanSpeed,0),_e=!0;break;case r.keys.RIGHT:Q.ctrlKey||Q.metaKey||Q.shiftKey?I(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):H(-r.keyPanSpeed,0),_e=!0;break}_e&&(Q.preventDefault(),r.update())}function we(){if(M.length===1)d.set(M[0].pageX,M[0].pageY);else{const Q=.5*(M[0].pageX+M[1].pageX),_e=.5*(M[0].pageY+M[1].pageY);d.set(Q,_e)}}function He(){if(M.length===1)p.set(M[0].pageX,M[0].pageY);else{const Q=.5*(M[0].pageX+M[1].pageX),_e=.5*(M[0].pageY+M[1].pageY);p.set(Q,_e)}}function Ge(){const Q=M[0].pageX-M[1].pageX,_e=M[0].pageY-M[1].pageY,Ae=Math.sqrt(Q*Q+_e*_e);g.set(0,Ae)}function me(){r.enableZoom&&Ge(),r.enablePan&&He()}function be(){r.enableZoom&&Ge(),r.enableRotate&&we()}function oe(Q){if(M.length==1)h.set(Q.pageX,Q.pageY);else{const Ae=Ke(Q),ge=.5*(Q.pageX+Ae.x),pe=.5*(Q.pageY+Ae.y);h.set(ge,pe)}f.subVectors(h,d).multiplyScalar(r.rotateSpeed);const _e=r.domElement;I(2*Math.PI*f.x/_e.clientHeight),D(2*Math.PI*f.y/_e.clientHeight),d.copy(h)}function j(Q){if(M.length===1)m.set(Q.pageX,Q.pageY);else{const _e=Ke(Q),Ae=.5*(Q.pageX+_e.x),ge=.5*(Q.pageY+_e.y);m.set(Ae,ge)}v.subVectors(m,p).multiplyScalar(r.panSpeed),H(v.x,v.y),p.copy(m)}function ke(Q){const _e=Ke(Q),Ae=Q.pageX-_e.x,ge=Q.pageY-_e.y,pe=Math.sqrt(Ae*Ae+ge*ge);_.set(0,pe),b.set(0,Math.pow(_.y/g.y,r.zoomSpeed)),L(b.y),g.copy(_)}function ze(Q){r.enableZoom&&ke(Q),r.enablePan&&j(Q)}function Ve(Q){r.enableZoom&&ke(Q),r.enableRotate&&oe(Q)}function Le(Q){r.enabled!==!1&&(M.length===0&&(r.domElement.setPointerCapture(Q.pointerId),r.domElement.addEventListener("pointermove",Ze),r.domElement.addEventListener("pointerup",st)),pt(Q),Q.pointerType==="touch"?Oe(Q):fe(Q))}function Ze(Q){r.enabled!==!1&&(Q.pointerType==="touch"?je(Q):V(Q))}function st(Q){Te(Q),M.length===0&&(r.domElement.releasePointerCapture(Q.pointerId),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",st)),r.dispatchEvent(eG),s=i.NONE}function fe(Q){let _e;switch(Q.button){case 0:_e=r.mouseButtons.LEFT;break;case 1:_e=r.mouseButtons.MIDDLE;break;case 2:_e=r.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case xm.DOLLY:if(r.enableZoom===!1)return;q(Q),s=i.DOLLY;break;case xm.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(r.enablePan===!1)return;Z(Q),s=i.PAN}else{if(r.enableRotate===!1)return;W(Q),s=i.ROTATE}break;case xm.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(r.enableRotate===!1)return;W(Q),s=i.ROTATE}else{if(r.enablePan===!1)return;Z(Q),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(uI)}function V(Q){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;se(Q);break;case i.DOLLY:if(r.enableZoom===!1)return;X(Q);break;case i.PAN:if(r.enablePan===!1)return;ie(Q);break}}function J(Q){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(Q.preventDefault(),r.dispatchEvent(uI),ae(Q),r.dispatchEvent(eG))}function he(Q){r.enabled===!1||r.enablePan===!1||ce(Q)}function Oe(Q){switch(ft(Q),M.length){case 1:switch(r.touches.ONE){case wm.ROTATE:if(r.enableRotate===!1)return;we(),s=i.TOUCH_ROTATE;break;case wm.PAN:if(r.enablePan===!1)return;He(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case wm.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;me(),s=i.TOUCH_DOLLY_PAN;break;case wm.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;be(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(uI)}function je(Q){switch(ft(Q),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;oe(Q),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;j(Q),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ze(Q),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ve(Q),r.update();break;default:s=i.NONE}}function dt(Q){r.enabled!==!1&&Q.preventDefault()}function pt(Q){M.push(Q)}function Te(Q){delete C[Q.pointerId];for(let _e=0;_e<M.length;_e++)if(M[_e].pointerId==Q.pointerId){M.splice(_e,1);return}}function ft(Q){let _e=C[Q.pointerId];_e===void 0&&(_e=new Kn,C[Q.pointerId]=_e),_e.set(Q.pageX,Q.pageY)}function Ke(Q){const _e=Q.pointerId===M[0].pointerId?M[1]:M[0];return C[_e.pointerId]}r.domElement.addEventListener("contextmenu",dt),r.domElement.addEventListener("pointerdown",Le),r.domElement.addEventListener("pointercancel",st),r.domElement.addEventListener("wheel",J,{passive:!1}),this.update()}}const Pit=(n,e,t,r,i)=>{const s=performance.now();let a=n.style.display==="none"?0:parseFloat(n.style.opacity);isNaN(a)&&(a=1);const o=window.setInterval(()=>{const c=performance.now()-s;let u=Math.min(c/r,1);u>.999&&(u=1);let d;e?(d=(1-u)*a,d<1e-4&&(d=0)):d=(1-a)*u+a,d>0?(n.style.display=t,n.style.opacity=d):n.style.display="none",u>=1&&(i&&i(),window.clearInterval(o))},16);return o},Dit=500,IM=class IM{constructor(e,t){this.taskIDGen=0,this.elementID=IM.elementIDGen++,this.tasks=[],this.message=e||"Loading...",this.container=t||document.body,this.spinnerContainerOuter=document.createElement("div"),this.spinnerContainerOuter.className=`spinnerOuterContainer${this.elementID}`,this.spinnerContainerOuter.style.display="none",this.spinnerContainerPrimary=document.createElement("div"),this.spinnerContainerPrimary.className=`spinnerContainerPrimary${this.elementID}`,this.spinnerPrimary=document.createElement("div"),this.spinnerPrimary.classList.add(`spinner${this.elementID}`,`spinnerPrimary${this.elementID}`),this.messageContainerPrimary=document.createElement("div"),this.messageContainerPrimary.classList.add(`messageContainer${this.elementID}`,`messageContainerPrimary${this.elementID}`),this.messageContainerPrimary.innerHTML=this.message,this.spinnerContainerMin=document.createElement("div"),this.spinnerContainerMin.className=`spinnerContainerMin${this.elementID}`,this.spinnerMin=document.createElement("div"),this.spinnerMin.classList.add(`spinner${this.elementID}`,`spinnerMin${this.elementID}`),this.messageContainerMin=document.createElement("div"),this.messageContainerMin.classList.add(`messageContainer${this.elementID}`,`messageContainerMin${this.elementID}`),this.messageContainerMin.innerHTML=this.message,this.spinnerContainerPrimary.appendChild(this.spinnerPrimary),this.spinnerContainerPrimary.appendChild(this.messageContainerPrimary),this.spinnerContainerOuter.appendChild(this.spinnerContainerPrimary),this.spinnerContainerMin.appendChild(this.spinnerMin),this.spinnerContainerMin.appendChild(this.messageContainerMin),this.spinnerContainerOuter.appendChild(this.spinnerContainerMin);const r=document.createElement("style");r.innerHTML=`

            .spinnerOuterContainer${this.elementID} {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .messageContainer${this.elementID} {
                height: 20px;
                font-family: arial;
                font-size: 12pt;
                color: #ffffff;
                text-align: center;
                vertical-align: middle;
            }

            .spinner${this.elementID} {
                padding: 15px;
                background: #07e8d6;
                z-index:99999;
            
                aspect-ratio: 1;
                border-radius: 50%;
                --_m: 
                    conic-gradient(#0000,#000),
                    linear-gradient(#000 0 0) content-box;
                -webkit-mask: var(--_m);
                    mask: var(--_m);
                -webkit-mask-composite: source-out;
                    mask-composite: subtract;
                box-sizing: border-box;
                animation: load 1s linear infinite;
            }

            .spinnerContainerPrimary${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 10px;
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-80px, -80px);
                width: 180px;
                pointer-events: auto;
            }

            .spinnerPrimary${this.elementID} {
                width: 120px;
                margin-left: 30px;
            }

            .messageContainerPrimary${this.elementID} {
                padding-top: 15px;
            }

            .spinnerContainerMin${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                display: flex;
                flex-direction: left;
                pointer-events: auto;
                min-width: 250px;
            }

            .messageContainerMin${this.elementID} {
                margin-right: 15px;
            }

            .spinnerMin${this.elementID} {
                width: 50px;
                height: 50px;
                margin-left: 15px;
                margin-right: 25px;
            }

            .messageContainerMin${this.elementID} {
                padding-top: 15px;
            }
            
            @keyframes load {
                to{transform: rotate(1turn)}
            }

        `,this.spinnerContainerOuter.appendChild(r),this.container.appendChild(this.spinnerContainerOuter),this.setMinimized(!1,!0),this.fadeTransitions=[]}addTask(e){const t={message:e,id:this.taskIDGen++};return this.tasks.push(t),this.update(),t.id}removeTask(e){let t=0;for(let r of this.tasks){if(r.id===e){this.tasks.splice(t,1);break}t++}this.update()}removeAllTasks(){this.tasks=[],this.update()}setMessageForTask(e,t){for(let r of this.tasks)if(r.id===e){r.message=t;break}this.update()}update(){this.tasks.length>0?(this.show(),this.setMessage(this.tasks[this.tasks.length-1].message)):this.hide()}show(){this.spinnerContainerOuter.style.display="block",this.visible=!0}hide(){this.spinnerContainerOuter.style.display="none",this.visible=!1}setContainer(e){this.container&&this.spinnerContainerOuter.parentElement===this.container&&this.container.removeChild(this.spinnerContainerOuter),e&&(this.container=e,this.container.appendChild(this.spinnerContainerOuter),this.spinnerContainerOuter.style.zIndex=this.container.style.zIndex+1)}setMinimized(e,t){const r=(i,s,a,o,l)=>{a?i.style.display=s?o:"none":this.fadeTransitions[l]=Pit(i,!s,o,Dit,()=>{this.fadeTransitions[l]=null})};r(this.spinnerContainerPrimary,!e,t,"block",0),r(this.spinnerContainerMin,e,t,"flex",1),this.minimized=e}setMessage(e){this.messageContainerPrimary.innerHTML=e,this.messageContainerMin.innerHTML=e}};pn(IM,"elementIDGen",0);let eD=IM;class Lit{constructor(e){this.idGen=0,this.tasks=[],this.container=e||document.body,this.progressBarContainerOuter=document.createElement("div"),this.progressBarContainerOuter.className="progressBarOuterContainer",this.progressBarContainerOuter.style.display="none",this.progressBarBox=document.createElement("div"),this.progressBarBox.className="progressBarBox",this.progressBarBackground=document.createElement("div"),this.progressBarBackground.className="progressBarBackground",this.progressBar=document.createElement("div"),this.progressBar.className="progressBar",this.progressBarBackground.appendChild(this.progressBar),this.progressBarBox.appendChild(this.progressBarBackground),this.progressBarContainerOuter.appendChild(this.progressBarBox);const t=document.createElement("style");t.innerHTML=`

            .progressBarOuterContainer {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .progressBarBox {
                z-index:99999;
                padding: 7px 9px 5px 7px;
                background-color: rgba(190, 190, 190, 0.75);
                border: #555555 1px solid;
                border-radius: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                width: 180px;
                height: 30px;
                pointer-events: auto;
            }

            .progressBarBackground {
                width: 100%;
                height: 25px;
                border-radius:10px;
                background-color: rgba(128, 128, 128, 0.75);
                border: #444444 1px solid;
                box-shadow: inset 0 0 10px #333333;
            }

            .progressBar {
                height: 25px;
                width: 0px;
                border-radius:10px;
                background-color: rgba(0, 200, 0, 0.75);
                box-shadow: inset 0 0 10px #003300;
            }

        `,this.progressBarContainerOuter.appendChild(t),this.container.appendChild(this.progressBarContainerOuter)}show(){this.progressBarContainerOuter.style.display="block"}hide(){this.progressBarContainerOuter.style.display="none"}setProgress(e){this.progressBar.style.width=e+"%"}setContainer(e){this.container&&this.progressBarContainerOuter.parentElement===this.container&&this.container.removeChild(this.progressBarContainerOuter),e&&(this.container=e,this.container.appendChild(this.progressBarContainerOuter),this.progressBarContainerOuter.style.zIndex=this.container.style.zIndex+1)}}class kit{constructor(e){pn(this,"update",function(e,t,r,i,s,a,o,l,c,u,d,h,f,p){const m=`${t.x.toFixed(5)}, ${t.y.toFixed(5)}, ${t.z.toFixed(5)}`;if(this.infoCells.cameraPosition.innerHTML!==m&&(this.infoCells.cameraPosition.innerHTML=m),r){const g=r,_=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cameraLookAt.innerHTML!==_&&(this.infoCells.cameraLookAt.innerHTML=_)}const v=`${i.x.toFixed(5)}, ${i.y.toFixed(5)}, ${i.z.toFixed(5)}`;if(this.infoCells.cameraUp.innerHTML!==v&&(this.infoCells.cameraUp.innerHTML=v),this.infoCells.orthographicCamera.innerHTML=s?"Orthographic":"Perspective",a){const g=a,_=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cursorPosition.innerHTML=_}else this.infoCells.cursorPosition.innerHTML="N/A";this.infoCells.fps.innerHTML=o,this.infoCells.renderWindow.innerHTML=`${e.x} x ${e.y}`,this.infoCells.renderSplatCount.innerHTML=`${c} splats out of ${l} (${u.toFixed(2)}%)`,this.infoCells.sortTime.innerHTML=`${d.toFixed(3)} ms`,this.infoCells.focalAdjustment.innerHTML=`${h.toFixed(3)}`,this.infoCells.splatScale.innerHTML=`${f.toFixed(3)}`,this.infoCells.pointCloudMode.innerHTML=`${p}`});this.container=e||document.body,this.infoCells={};const t=[["Camera position","cameraPosition"],["Camera look-at","cameraLookAt"],["Camera up","cameraUp"],["Camera mode","orthographicCamera"],["Cursor position","cursorPosition"],["FPS","fps"],["Rendering:","renderSplatCount"],["Sort time","sortTime"],["Render window","renderWindow"],["Focal adjustment","focalAdjustment"],["Splat scale","splatScale"],["Point cloud mode","pointCloudMode"]];this.infoPanelContainer=document.createElement("div");const r=document.createElement("style");r.innerHTML=`

            .infoPanel {
                width: 430px;
                padding: 10px;
                background-color: rgba(50, 50, 50, 0.85);
                border: #555555 2px solid;
                color: #dddddd;
                border-radius: 10px;
                z-index: 9999;
                font-family: arial;
                font-size: 11pt;
                text-align: left;
                margin: 0;
                top: 10px;
                left:10px;
                position: absolute;
                pointer-events: auto;
            }

            .info-panel-cell {
                margin-bottom: 5px;
                padding-bottom: 2px;
            }

            .label-cell {
                font-weight: bold;
                font-size: 12pt;
                width: 140px;
            }

        `,this.infoPanelContainer.append(r),this.infoPanel=document.createElement("div"),this.infoPanel.className="infoPanel";const i=document.createElement("div");i.style.display="table";for(let s of t){const a=document.createElement("div");a.style.display="table-row",a.className="info-panel-row";const o=document.createElement("div");o.style.display="table-cell",o.innerHTML=`${s[0]}: `,o.classList.add("info-panel-cell","label-cell");const l=document.createElement("div");l.style.display="table-cell",l.style.width="10px",l.innerHTML=" ",l.className="info-panel-cell";const c=document.createElement("div");c.style.display="table-cell",c.innerHTML="",c.className="info-panel-cell",this.infoCells[s[1]]=c,a.appendChild(o),a.appendChild(l),a.appendChild(c),i.appendChild(a)}this.infoPanel.appendChild(i),this.infoPanelContainer.append(this.infoPanel),this.infoPanelContainer.style.display="none",this.container.appendChild(this.infoPanelContainer),this.visible=!1}setContainer(e){this.container&&this.infoPanelContainer.parentElement===this.container&&this.container.removeChild(this.infoPanelContainer),e&&(this.container=e,this.container.appendChild(this.infoPanelContainer),this.infoPanelContainer.style.zIndex=this.container.style.zIndex+1)}show(){this.infoPanelContainer.style.display="block",this.visible=!0}hide(){this.infoPanelContainer.style.display="none",this.visible=!1}}const nG=new it;class Oit extends Ls{constructor(e=new it(0,0,1),t=new it(0,0,0),r=1,i=.1,s=16776960,a=r*.2,o=a*.2){super(),this.type="ArrowHelper";const l=new R_(i,i,r,32);l.translate(0,r/2,0);const c=new R_(0,o,a,32);c.translate(0,r,0),this.position.copy(t),this.line=new ds(l,new h0({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ds(c,new h0({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{nG.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(nG,t)}}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class fb{constructor(e){pn(this,"updateFocusMarker",function(){const e=new it,t=new hr,r=new it;return function(i,s,a){t.copy(s.matrixWorld).invert(),e.copy(i).applyMatrix4(t),e.normalize().multiplyScalar(10),e.applyMatrix4(s.matrixWorld),r.copy(s.position).sub(i);const o=r.length();this.focusMarker.position.copy(i),this.focusMarker.scale.set(o,o,o),this.focusMarker.material.uniforms.realFocusPosition.value.copy(i),this.focusMarker.material.uniforms.viewport.value.copy(a),this.focusMarker.material.uniformsNeedUpdate=!0}}());pn(this,"positionAndOrientControlPlane",function(){const e=new Hi,t=new it(0,1,0);return function(r,i){e.setFromUnitVectors(t,i),this.controlPlane.position.copy(r),this.controlPlane.quaternion.copy(e)}}());this.threeScene=e,this.splatRenderTarget=null,this.renderTargetCopyQuad=null,this.renderTargetCopyCamera=null,this.meshCursor=null,this.focusMarker=null,this.controlPlane=null,this.debugRoot=null,this.secondaryDebugRoot=null}updateSplatRenderTargetForRenderDimensions(e,t){this.destroySplatRendertarget(),this.splatRenderTarget=new vh(e,t,{format:$a,stencilBuffer:!1,depthBuffer:!0}),this.splatRenderTarget.depthTexture=new s8(e,t),this.splatRenderTarget.depthTexture.format=qp,this.splatRenderTarget.depthTexture.type=Il}destroySplatRendertarget(){this.splatRenderTarget&&(this.splatRenderTarget=null)}setupRenderTargetCopyObjects(){const e={sourceColorTexture:{type:"t",value:null},sourceDepthTexture:{type:"t",value:null}},t=new Qo({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = vec4( position.xy, 0.0, 1.0 );    
                }
            `,fragmentShader:`
                #include <common>
                #include <packing>
                varying vec2 vUv;
                uniform sampler2D sourceColorTexture;
                uniform sampler2D sourceDepthTexture;
                void main() {
                    vec4 color = texture2D(sourceColorTexture, vUv);
                    float fragDepth = texture2D(sourceDepthTexture, vUv).x;
                    gl_FragDepth = fragDepth;
                    gl_FragColor = vec4(color.rgb, color.a * 2.0);
              }
            `,uniforms:e,depthWrite:!1,depthTest:!1,transparent:!0,blending:one,blendSrc:M_,blendSrcAlpha:M_,blendDst:T_,blendDstAlpha:T_});t.extensions.fragDepth=!0,this.renderTargetCopyQuad=new ds(new Ig(2,2),t),this.renderTargetCopyCamera=new o8(-1,1,1,-1,0,1)}destroyRenderTargetCopyObjects(){this.renderTargetCopyQuad&&(ev(this.renderTargetCopyQuad),this.renderTargetCopyQuad=null)}setupMeshCursor(){if(!this.meshCursor){const e=new a8(.5,1.5,32),t=new h0({color:16777215}),r=new ds(e,t);r.rotation.set(0,0,Math.PI),r.position.set(0,1,0);const i=new ds(e,t);i.position.set(0,-1,0);const s=new ds(e,t);s.rotation.set(0,0,Math.PI/2),s.position.set(1,0,0);const a=new ds(e,t);a.rotation.set(0,0,-Math.PI/2),a.position.set(-1,0,0),this.meshCursor=new Ls,this.meshCursor.add(r),this.meshCursor.add(i),this.meshCursor.add(s),this.meshCursor.add(a),this.meshCursor.scale.set(.1,.1,.1),this.threeScene.add(this.meshCursor),this.meshCursor.visible=!1}}destroyMeshCursor(){this.meshCursor&&(ev(this.meshCursor),this.threeScene.remove(this.meshCursor),this.meshCursor=null)}setMeshCursorVisibility(e){this.meshCursor.visible=e}getMeschCursorVisibility(){return this.meshCursor.visible}setMeshCursorPosition(e){this.meshCursor.position.copy(e)}positionAndOrientMeshCursor(e,t){this.meshCursor.position.copy(e),this.meshCursor.up.copy(t.up),this.meshCursor.lookAt(t.position)}setupFocusMarker(){if(!this.focusMarker){const e=new MM(.5,32,32),t=fb.buildFocusMarkerMaterial();t.depthTest=!1,t.depthWrite=!1,t.transparent=!0,this.focusMarker=new ds(e,t)}}destroyFocusMarker(){this.focusMarker&&(ev(this.focusMarker),this.focusMarker=null)}setFocusMarkerVisibility(e){this.focusMarker.visible=e}setFocusMarkerOpacity(e){this.focusMarker.material.uniforms.opacity.value=e,this.focusMarker.material.uniformsNeedUpdate=!0}getFocusMarkerOpacity(){return this.focusMarker.material.uniforms.opacity.value}setupControlPlane(){if(!this.controlPlane){const e=new Ig(1,1);e.rotateX(-Math.PI/2);const t=new h0({color:16777215});t.transparent=!0,t.opacity=.6,t.depthTest=!1,t.depthWrite=!1,t.side=wl;const r=new ds(e,t),i=new it(0,1,0);i.normalize();const s=new it(0,0,0),a=.5,o=.01,l=56576,c=new Oit(i,s,a,o,l,.1,.03);this.controlPlane=new Ls,this.controlPlane.add(r),this.controlPlane.add(c)}}destroyControlPlane(){this.controlPlane&&(ev(this.controlPlane),this.controlPlane=null)}setControlPlaneVisibility(e){this.controlPlane.visible=e}addDebugMeshes(){this.debugRoot=this.createDebugMeshes(),this.secondaryDebugRoot=this.createSecondaryDebugMeshes(),this.threeScene.add(this.debugRoot),this.threeScene.add(this.secondaryDebugRoot)}destroyDebugMeshes(){for(let e of[this.debugRoot,this.secondaryDebugRoot])e&&(ev(e),this.threeScene.remove(e));this.debugRoot=null,this.secondaryDebugRoot=null}createDebugMeshes(e){const t=new MM(1,32,32),r=new Ls,i=(s,a)=>{let o=new ds(t,fb.buildDebugMaterial(s));o.renderOrder=e,r.add(o),o.position.fromArray(a)};return i(16711680,[-50,0,0]),i(16711680,[50,0,0]),i(65280,[0,0,-50]),i(65280,[0,0,50]),i(16755200,[5,0,5]),r}createSecondaryDebugMeshes(e){const t=new vy(3,3,3),r=new Ls;let i=12303291;const s=o=>{let l=new ds(t,fb.buildDebugMaterial(i));l.renderOrder=e,r.add(l),l.position.fromArray(o)};let a=10;return s([-a,0,-a]),s([-a,0,a]),s([a,0,-a]),s([a,0,a]),r}static buildDebugMaterial(e){const t=`
            #include <common>
            varying float ndcDepth;

            void main() {
                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position.xyz, 1.0);
                ndcDepth = gl_Position.z / gl_Position.w;
                gl_Position.x = gl_Position.x / gl_Position.w;
                gl_Position.y = gl_Position.y / gl_Position.w;
                gl_Position.z = 0.0;
                gl_Position.w = 1.0;
    
            }
        `,r=`
            #include <common>
            uniform vec3 color;
            varying float ndcDepth;
            void main() {
                gl_FragDepth = (ndcDepth + 1.0) / 2.0;
                gl_FragColor = vec4(color.rgb, 0.0);
            }
        `,i={color:{type:"v3",value:new ti(e)}},s=new Qo({uniforms:i,vertexShader:t,fragmentShader:r,transparent:!1,depthTest:!0,depthWrite:!0,side:du});return s.extensions.fragDepth=!0,s}static buildFocusMarkerMaterial(e){const t=`
            #include <common>

            uniform vec2 viewport;
            uniform vec3 realFocusPosition;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                float radius = 0.01;

                vec4 viewPosition = modelViewMatrix * vec4(position.xyz, 1.0);
                vec4 viewCenter = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

                vec4 viewFocusPosition = modelViewMatrix * vec4(realFocusPosition, 1.0);

                ndcPosition = projectionMatrix * viewPosition;
                ndcPosition = ndcPosition * vec4(1.0 / ndcPosition.w);
                ndcCenter = projectionMatrix * viewCenter;
                ndcCenter = ndcCenter * vec4(1.0 / ndcCenter.w);

                ndcFocusPosition = projectionMatrix * viewFocusPosition;
                ndcFocusPosition = ndcFocusPosition * vec4(1.0 / ndcFocusPosition.w);

                gl_Position = projectionMatrix * viewPosition;

            }
        `,r=`
            #include <common>
            uniform vec3 color;
            uniform vec2 viewport;
            uniform float opacity;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                vec2 screenPosition = vec2(ndcPosition) * viewport;
                vec2 screenCenter = vec2(ndcCenter) * viewport;

                vec2 screenVec = screenPosition - screenCenter;

                float projectedRadius = length(screenVec);

                float lineWidth = 0.0005 * viewport.y;
                float aaRange = 0.0025 * viewport.y;
                float radius = 0.06 * viewport.y;
                float radDiff = abs(projectedRadius - radius) - lineWidth;
                float alpha = 1.0 - clamp(radDiff / 5.0, 0.0, 1.0); 

                gl_FragColor = vec4(color.rgb, alpha * opacity);
            }
        `,i={color:{type:"v3",value:new ti(e)},realFocusPosition:{type:"v3",value:new it},viewport:{type:"v2",value:new Kn},opacity:{value:0}};return new Qo({uniforms:i,vertexShader:t,fragmentShader:r,transparent:!0,depthTest:!1,depthWrite:!1,side:du})}dispose(){this.destroyMeshCursor(),this.destroyFocusMarker(),this.destroyDebugMeshes(),this.destroyControlPlane(),this.destroyRenderTargetCopyObjects(),this.destroySplatRendertarget()}}const Nit=new it(1,0,0),Bit=new it(0,1,0),Fit=new it(0,0,1);class dI{constructor(e=new it,t=new it){pn(this,"intersectBox",function(){const e=new it,t=[],r=[],i=[];return function(s,a){if(r[0]=this.origin.x,r[1]=this.origin.y,r[2]=this.origin.z,i[0]=this.direction.x,i[1]=this.direction.y,i[2]=this.direction.z,this.boxContainsPoint(s,this.origin,1e-4))return a&&(a.origin.copy(this.origin),a.normal.set(0,0,0),a.distance=-1),!0;for(let o=0;o<3;o++){if(i[o]==0)continue;const l=o==0?Nit:o==1?Bit:Fit,c=i[o]<0?s.max:s.min;let u=-Math.sign(i[o]);t[0]=o==0?c.x:o==1?c.y:c.z;let d=t[0]-r[o];if(d*u<0){const h=(o+1)%3,f=(o+2)%3;if(t[2]=i[h]/i[o]*d+r[h],t[1]=i[f]/i[o]*d+r[f],e.set(t[o],t[f],t[h]),this.boxContainsPoint(s,e,1e-4))return a&&(a.origin.copy(e),a.normal.copy(l).multiplyScalar(u),a.distance=e.sub(this.origin).length()),!0}}return!1}}());pn(this,"intersectSphere",function(){const e=new it;return function(t,r,i){e.copy(t).sub(this.origin);const s=e.dot(this.direction),a=s*s,l=e.dot(e)-a,c=r*r;if(l>c)return!1;const u=Math.sqrt(c-l),d=s-u,h=s+u;if(h<0)return!1;let f=d<0?h:d;return i&&(i.origin.copy(this.origin).addScaledVector(this.direction,f),i.normal.copy(i.origin).sub(t).normalize(),i.distance=f),!0}}());this.origin=new it,this.direction=new it,this.setParameters(e,t)}setParameters(e,t){this.origin.copy(e),this.direction.copy(t).normalize()}boxContainsPoint(e,t,r){return!(t.x<e.min.x-r||t.x>e.max.x+r||t.y<e.min.y-r||t.y>e.max.y+r||t.z<e.min.z-r||t.z>e.max.z+r)}}class w8{constructor(){this.origin=new it,this.normal=new it,this.distance=0,this.splatIndex=0}set(e,t,r,i){this.origin.copy(e),this.normal.copy(t),this.distance=r,this.splatIndex=i}clone(){const e=new w8;return e.origin.copy(this.origin),e.normal.copy(this.normal),e.distance=this.distance,e.splatIndex=this.splatIndex,e}}const Xu={ThreeD:0,TwoD:1};class zit{constructor(e,t,r=!1){pn(this,"setFromCameraAndScreenPosition",function(){const e=new Kn;return function(t,r,i){if(e.x=r.x/i.x*2-1,e.y=(i.y-r.y)/i.y*2-1,t.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t;else if(t.isOrthographicCamera)this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t;else throw new Error("Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type")}}());pn(this,"intersectSplatMesh",function(){const e=new hr,t=new hr,r=new hr,i=new dI,s=new it;return function(a,o=[]){const l=a.getSplatTree();if(l){for(let c=0;c<l.subTrees.length;c++){const u=l.subTrees[c];t.copy(a.matrixWorld),a.dynamicMode&&(a.getSceneTransform(c,r),t.multiply(r)),e.copy(t).invert(),i.origin.copy(this.ray.origin).applyMatrix4(e),i.direction.copy(this.ray.origin).add(this.ray.direction),i.direction.applyMatrix4(e).sub(i.origin).normalize();const d=[];u.rootNode&&this.castRayAtSplatTreeNode(i,l,u.rootNode,d),d.forEach(h=>{h.origin.applyMatrix4(t),h.normal.applyMatrix4(t).normalize(),h.distance=s.copy(h.origin).sub(this.ray.origin).length()}),o.push(...d)}return o.sort((c,u)=>c.distance>u.distance?1:-1),o}}}());pn(this,"castRayAtSplatTreeNode",function(){const e=new Ui,t=new it,r=new it,i=new Hi,s=new w8,a=1e-7,o=new it(0,0,0),l=new hr,c=new hr,u=new hr,d=new hr,h=new hr,f=new dI;return function(p,m,v,g=[]){if(p.intersectBox(v.boundingBox)){if(v.data&&v.data.indexes&&v.data.indexes.length>0)for(let _=0;_<v.data.indexes.length;_++){const b=v.data.indexes[_],S=m.splatMesh.getSceneIndexForSplat(b);if(m.splatMesh.getScene(S).visible&&(m.splatMesh.getSplatColor(b,e),m.splatMesh.getSplatCenter(b,t),m.splatMesh.getSplatScaleAndRotation(b,r,i),!(r.x<=a||r.y<=a||m.splatMesh.splatRenderMode===Xu.ThreeD&&r.z<=a)))if(this.raycastAgainstTrueSplatEllipsoid){c.makeScale(r.x,r.y,r.z),u.makeRotationFromQuaternion(i);const w=Math.log10(e.w)*2;if(l.makeScale(w,w,w),h.copy(l).multiply(u).multiply(c),d.copy(h).invert(),f.origin.copy(p.origin).sub(t).applyMatrix4(d),f.direction.copy(p.origin).add(p.direction).sub(t),f.direction.applyMatrix4(d).sub(f.origin).normalize(),f.intersectSphere(o,1,s)){const M=s.clone();M.splatIndex=b,M.origin.applyMatrix4(h).add(t),g.push(M)}}else{let w=r.x+r.y,M=2;if(m.splatMesh.splatRenderMode===Xu.ThreeD&&(w+=r.z,M=3),w=w/M,p.intersectSphere(t,w,s)){const C=s.clone();C.splatIndex=b,g.push(C)}}}if(v.children&&v.children.length>0)for(let _ of v.children)this.castRayAtSplatTreeNode(p,m,_,g);return g}}}());this.ray=new dI(e,t),this.raycastAgainstTrueSplatEllipsoid=r}}class Vv{static buildVertexShaderBase(e=!1,t=!1,r=0,i=""){let s=`
        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
    `;return t&&(s+=`
            uniform float sceneOpacity[${Hr.MaxScenes}];
            uniform int sceneVisibility[${Hr.MaxScenes}];
        `),e&&(s+=`
            uniform highp mat4 transforms[${Hr.MaxScenes}];
        `),s+=`
        ${i}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${Hr.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${Hr.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(sIndex) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `,t&&(s+=`
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `),e?s+=`
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
            `:s+="mat4 transformModelViewMatrix = modelViewMatrix;",s+=`
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vColor = uintToRGBAVec(sampledCenterColor.r);
        `,r>=1&&(s+=`   
            if (sphericalHarmonicsDegree >= 1) {
            `,e?s+=`
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `:s+=`
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `,s+=`
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `,r>=2&&(s+=`
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `),r===1?s+=`
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `:r===2&&(s+=`
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `),s+=`
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `,r>=2&&(s+=`
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `,r===2&&(s+=`
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `),s+=`
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `),s+=`

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `),s}static getVertexShaderFadeIn(){return`
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `}static getUniforms(e=!1,t=!1,r=0,i=1,s=!1){const a={sceneCenter:{type:"v3",value:new it},fadeInComplete:{type:"i",value:0},orthographicMode:{type:"i",value:0},visibleRegionFadeStartRadius:{type:"f",value:0},visibleRegionRadius:{type:"f",value:0},currentTime:{type:"f",value:0},firstRenderTime:{type:"f",value:0},centersColorsTexture:{type:"t",value:null},sphericalHarmonicsTexture:{type:"t",value:null},sphericalHarmonicsTextureR:{type:"t",value:null},sphericalHarmonicsTextureG:{type:"t",value:null},sphericalHarmonicsTextureB:{type:"t",value:null},sphericalHarmonics8BitCompressionRangeMin:{type:"f",value:[]},sphericalHarmonics8BitCompressionRangeMax:{type:"f",value:[]},focal:{type:"v2",value:new Kn},orthoZoom:{type:"f",value:1},inverseFocalAdjustment:{type:"f",value:1},viewport:{type:"v2",value:new Kn},basisViewport:{type:"v2",value:new Kn},debugColor:{type:"v3",value:new ti},centersColorsTextureSize:{type:"v2",value:new Kn(1024,1024)},sphericalHarmonicsDegree:{type:"i",value:r},sphericalHarmonicsTextureSize:{type:"v2",value:new Kn(1024,1024)},sphericalHarmonics8BitMode:{type:"i",value:0},sphericalHarmonicsMultiTextureMode:{type:"i",value:0},splatScale:{type:"f",value:i},pointCloudModeEnabled:{type:"i",value:s?1:0},sceneIndexesTexture:{type:"t",value:null},sceneIndexesTextureSize:{type:"v2",value:new Kn(1024,1024)},sceneCount:{type:"i",value:1}};for(let o=0;o<Hr.MaxScenes;o++)a.sphericalHarmonics8BitCompressionRangeMin.value.push(-Hr.SphericalHarmonics8BitCompressionRange/2),a.sphericalHarmonics8BitCompressionRangeMax.value.push(Hr.SphericalHarmonics8BitCompressionRange/2);if(t){const o=[];for(let c=0;c<Hr.MaxScenes;c++)o.push(1);a.sceneOpacity={type:"f",value:o};const l=[];for(let c=0;c<Hr.MaxScenes;c++)l.push(1);a.sceneVisibility={type:"i",value:l}}if(e){const o=[];for(let l=0;l<Hr.MaxScenes;l++)o.push(new hr);a.transforms={type:"mat4",value:o}}return a}}class AM{static build(e=!1,t=!1,r=!1,i=2048,s=1,a=!1,o=0,l=.3){const c=`
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;let u=Vv.buildVertexShaderBase(e,t,o,c);u+=AM.buildVertexShaderProjection(r,t,i,l);const d=AM.buildFragmentShader(),h=Vv.getUniforms(e,t,o,s,a);return h.covariancesTextureSize={type:"v2",value:new Kn(1024,1024)},h.covariancesTexture={type:"t",value:null},h.covariancesTextureHalfFloat={type:"t",value:null},h.covariancesAreHalfFloat={type:"i",value:0},new Qo({uniforms:h,vertexShader:u,fragmentShader:d,transparent:!0,alphaTest:1,blending:Xf,depthTest:!0,depthWrite:!1,side:wl})}static buildVertexShaderProjection(e,t,r,i){let s=`

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;return e?s+=`
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${i};
                cov2Dm[1][1] += ${i};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `:s+=`
                cov2Dm[0][0] += ${i};
                cov2Dm[1][1] += ${i};
            `,s+=`

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(r)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(r)}.0);
            `,t&&(s+=`
                vColor.a *= splatOpacityFromScene;
            `),s+=`
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `,s+=Vv.getVertexShaderFadeIn(),s+="}",s}static buildFragmentShader(){let e=`
            precision highp float;
            #include <common>
 
            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
        `;return e+=`
            void main () {
                // Compute the positional squared distance from the center of the splat to the current fragment.
                float A = dot(vPosition, vPosition);
                // Since the positional data in vPosition has been scaled by sqrt(8), the squared result will be
                // scaled by a factor of 8. If the squared result is larger than 8, it means it is outside the ellipse
                // defined by the rectangle formed by vPosition. It also means it's farther
                // away than sqrt(8) standard deviations from the mean.
                if (A > 8.0) discard;
                vec3 color = vColor.rgb;

                // Since the rendered splat is scaled by sqrt(8), the inverse covariance matrix that is part of
                // the gaussian formula becomes the identity matrix. We're then left with (X - mean) * (X - mean),
                // and since 'mean' is zero, we have X * X, which is the same as A:
                float opacity = exp(-0.5 * A) * vColor.a;

                gl_FragColor = vec4(color.rgb, opacity);
            }
        `,e}}class EM{static build(e=!1,t=!1,r=1,i=!1,s=0){const a=`
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;let o=Vv.buildVertexShaderBase(e,t,s,a);o+=EM.buildVertexShaderProjection();const l=EM.buildFragmentShader(),c=Vv.getUniforms(e,t,s,r,i);return c.scaleRotationsTexture={type:"t",value:null},c.scaleRotationsTextureSize={type:"v2",value:new Kn(1024,1024)},new Qo({uniforms:c,vertexShader:o,fragmentShader:l,transparent:!0,alphaTest:1,blending:Xf,depthTest:!0,depthWrite:!1,side:wl})}static buildVertexShaderProjection(){let e=`

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;return e+=`

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `,e+=Vv.getVertexShaderFadeIn(),e+="}",e}static buildFragmentShader(){return`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `}}class Uit{static build(e){const t=new $l;t.setIndex([0,1,2,0,2,3]);const r=new Float32Array(4*3),i=new Ol(r,3);t.setAttribute("position",i),i.setXYZ(0,-1,-1,0),i.setXYZ(1,-1,1,0),i.setXYZ(2,1,1,0),i.setXYZ(3,1,-1,0),i.needsUpdate=!0;const s=new qQe().copy(t),a=new Uint32Array(e),o=new HQe(a,1,!1);return o.setUsage(YZe),s.setAttribute("splatIndex",o),s.instanceCount=0,s}}class Hit extends Ls{constructor(e,t=new it,r=new Hi,i=new it(1,1,1),s=1,a=1,o=!0){super(),this.splatBuffer=e,this.position.copy(t),this.quaternion.copy(r),this.scale.copy(i),this.transform=new hr,this.minimumAlpha=s,this.opacity=a,this.visible=o}copyTransformData(e){this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.transform.copy(e.transform)}updateTransform(e){e?(this.matrixWorldAutoUpdate&&this.updateWorldMatrix(!0,!1),this.transform.copy(this.matrixWorld)):(this.matrixAutoUpdate&&this.updateMatrix(),this.transform.copy(this.matrix))}}const RM=class RM{constructor(e,t,r,i){this.min=new it().copy(e),this.max=new it().copy(t),this.boundingBox=new jc(this.min,this.max),this.center=new it().copy(this.max).sub(this.min).multiplyScalar(.5).add(this.min),this.depth=r,this.children=[],this.data=null,this.id=i||RM.idGen++}};pn(RM,"idGen",0);let tD=RM;class hb{constructor(e,t){this.maxDepth=e,this.maxCentersPerNode=t,this.sceneDimensions=new it,this.sceneMin=new it,this.sceneMax=new it,this.rootNode=null,this.nodesWithIndexes=[],this.splatMesh=null}static convertWorkerSubTreeNode(e){const t=new it().fromArray(e.min),r=new it().fromArray(e.max),i=new tD(t,r,e.depth,e.id);if(e.data.indexes){i.data={indexes:[]};for(let s of e.data.indexes)i.data.indexes.push(s)}if(e.children)for(let s of e.children)i.children.push(hb.convertWorkerSubTreeNode(s));return i}static convertWorkerSubTree(e,t){const r=new hb(e.maxDepth,e.maxCentersPerNode);r.sceneMin=new it().fromArray(e.sceneMin),r.sceneMax=new it().fromArray(e.sceneMax),r.splatMesh=t,r.rootNode=hb.convertWorkerSubTreeNode(e.rootNode);const i=(s,a)=>{s.children.length===0&&a(s);for(let o of s.children)i(o,a)};return r.nodesWithIndexes=[],i(r.rootNode,s=>{s.data&&s.data.indexes&&s.data.indexes.length>0&&r.nodesWithIndexes.push(s)}),r}}function Vit(n){let e=0;class t{constructor(l,c){this.min=[l[0],l[1],l[2]],this.max=[c[0],c[1],c[2]]}containsPoint(l){return l[0]>=this.min[0]&&l[0]<=this.max[0]&&l[1]>=this.min[1]&&l[1]<=this.max[1]&&l[2]>=this.min[2]&&l[2]<=this.max[2]}}class r{constructor(l,c){this.maxDepth=l,this.maxCentersPerNode=c,this.sceneDimensions=[],this.sceneMin=[],this.sceneMax=[],this.rootNode=null,this.addedIndexes={},this.nodesWithIndexes=[],this.splatMesh=null,this.disposed=!1}}class i{constructor(l,c,u,d){this.min=[l[0],l[1],l[2]],this.max=[c[0],c[1],c[2]],this.center=[(c[0]-l[0])*.5+l[0],(c[1]-l[1])*.5+l[1],(c[2]-l[2])*.5+l[2]],this.depth=u,this.children=[],this.data=null,this.id=d||e++}}processSplatTreeNode=function(o,l,c,u){const d=l.data.indexes.length;if(d<o.maxCentersPerNode||l.depth>o.maxDepth){const _=[];for(let b=0;b<l.data.indexes.length;b++)o.addedIndexes[l.data.indexes[b]]||(_.push(l.data.indexes[b]),o.addedIndexes[l.data.indexes[b]]=!0);l.data.indexes=_,l.data.indexes.sort((b,S)=>b>S?1:-1),o.nodesWithIndexes.push(l);return}const h=[l.max[0]-l.min[0],l.max[1]-l.min[1],l.max[2]-l.min[2]],f=[h[0]*.5,h[1]*.5,h[2]*.5],p=[l.min[0]+f[0],l.min[1]+f[1],l.min[2]+f[2]],m=[new t([p[0]-f[0],p[1],p[2]-f[2]],[p[0],p[1]+f[1],p[2]]),new t([p[0],p[1],p[2]-f[2]],[p[0]+f[0],p[1]+f[1],p[2]]),new t([p[0],p[1],p[2]],[p[0]+f[0],p[1]+f[1],p[2]+f[2]]),new t([p[0]-f[0],p[1],p[2]],[p[0],p[1]+f[1],p[2]+f[2]]),new t([p[0]-f[0],p[1]-f[1],p[2]-f[2]],[p[0],p[1],p[2]]),new t([p[0],p[1]-f[1],p[2]-f[2]],[p[0]+f[0],p[1],p[2]]),new t([p[0],p[1]-f[1],p[2]],[p[0]+f[0],p[1],p[2]+f[2]]),new t([p[0]-f[0],p[1]-f[1],p[2]],[p[0],p[1],p[2]+f[2]])],v=[];for(let _=0;_<m.length;_++)v[_]=[];const g=[0,0,0];for(let _=0;_<d;_++){const b=l.data.indexes[_],S=c[b];g[0]=u[S],g[1]=u[S+1],g[2]=u[S+2];for(let x=0;x<m.length;x++)m[x].containsPoint(g)&&v[x].push(b)}for(let _=0;_<m.length;_++){const b=new i(m[_].min,m[_].max,l.depth+1);b.data={indexes:v[_]},l.children.push(b)}l.data={};for(let _ of l.children)processSplatTreeNode(o,_,c,u)};const s=(o,l,c)=>{const u=[0,0,0],d=[0,0,0],h=[],f=Math.floor(o.length/4);for(let m=0;m<f;m++){const v=m*4,g=o[v],_=o[v+1],b=o[v+2],S=Math.round(o[v+3]);(m===0||g<u[0])&&(u[0]=g),(m===0||g>d[0])&&(d[0]=g),(m===0||_<u[1])&&(u[1]=_),(m===0||_>d[1])&&(d[1]=_),(m===0||b<u[2])&&(u[2]=b),(m===0||b>d[2])&&(d[2]=b),h.push(S)}const p=new r(l,c);return p.sceneMin=u,p.sceneMax=d,p.rootNode=new i(p.sceneMin,p.sceneMax,0),p.rootNode.data={indexes:h},p};function a(o,l,c){const u=[];for(let h of o){const f=Math.floor(h.length/4);for(let p=0;p<f;p++){const m=p*4,v=Math.round(h[m+3]);u[v]=m}}const d=[];for(let h of o){const f=s(h,l,c);d.push(f),processSplatTreeNode(f,f.rootNode,u,h)}n.postMessage({subTrees:d})}n.onmessage=o=>{o.data.process&&a(o.data.process.centers,o.data.process.maxDepth,o.data.process.maxCentersPerNode)}}function $it(n,e,t,r,i){n.postMessage({process:{centers:e,maxDepth:r,maxCentersPerNode:i}},t)}function Git(){return new Worker(URL.createObjectURL(new Blob(["(",Vit.toString(),")(self)"],{type:"application/javascript"})))}class Wit{constructor(e,t){pn(this,"processSplatMesh",function(e,t=()=>!0,r,i){this.splatTreeWorker||(this.splatTreeWorker=Git()),this.splatMesh=e,this.subTrees=[];const s=new it,a=(o,l)=>{const c=new Float32Array(l*4);let u=0;for(let d=0;d<l;d++){const h=d+o;if(t(h)){e.getSplatCenter(h,s);const f=u*4;c[f]=s.x,c[f+1]=s.y,c[f+2]=s.z,c[f+3]=h,u++}}return c};return new Promise(o=>{const l=()=>this.disposed?(this.diposeSplatTreeWorker(),o(),!0):!1;r&&r(!1),Wo(()=>{if(l())return;const c=[];if(e.dynamicMode){let u=0;for(let d=0;d<e.scenes.length;d++){const f=e.getScene(d).splatBuffer.getSplatCount(),p=a(u,f);c.push(p),u+=f}}else{const u=a(0,e.getSplatCount());c.push(u)}this.splatTreeWorker.onmessage=u=>{l()||u.data.subTrees&&(i&&i(!1),Wo(()=>{if(!l()){for(let d of u.data.subTrees){const h=hb.convertWorkerSubTree(d,e);this.subTrees.push(h)}this.diposeSplatTreeWorker(),i&&i(!0),Wo(()=>{o()})}}))},Wo(()=>{if(l())return;r&&r(!0);const u=c.map(d=>d.buffer);$it(this.splatTreeWorker,c,u,this.maxDepth,this.maxCentersPerNode)})})})});this.maxDepth=e,this.maxCentersPerNode=t,this.subTrees=[],this.splatMesh=null}dispose(){this.diposeSplatTreeWorker(),this.disposed=!0}diposeSplatTreeWorker(){this.splatTreeWorker&&this.splatTreeWorker.terminate(),this.splatTreeWorker=null}countLeaves(){let e=0;return this.visitLeaves(()=>{e++}),e}visitLeaves(e){const t=(r,i)=>{r.children.length===0&&i(r);for(let s of r.children)t(s,i)};for(let r of this.subTrees)t(r.rootNode,e)}}function qit(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Kit(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,S=a||e.has("OES_texture_float"),x=b&&S,w=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:b,floatFragmentTextures:S,floatVertexTextures:x,maxSamples:w}}const pb={Default:0,Gradual:1,Instant:2},$v={None:0,Error:1,Warning:2,Info:3,Debug:4},rG=new $l,Yit=new h0,qw=6,Xit=4,jit=4,Zit=4,Qit=6,Jit=8,fI=4,hI=4,iG=1,est=.012,tst=.003,sG=1,aG=16777216;class Xs extends ds{constructor(t=Xu.ThreeD,r=!1,i=!1,s=!1,a=1,o=!0,l=!1,c=!1,u=1024,d=$v.None,h=0,f=1,p=.3){super(rG,Yit);pn(this,"buildSplatTree",function(t=[],r,i){return new Promise(s=>{this.disposeSplatTree(),this.baseSplatTree=new Wit(8,1e3);const a=performance.now(),o=new Ui;this.baseSplatTree.processSplatMesh(this,l=>{this.getSplatColor(l,o);const c=this.getSceneIndexForSplat(l),u=t[c]||1;return o.w>=u},r,i).then(()=>{const l=performance.now()-a;if(this.logLevel>=$v.Info&&console.log("SplatTree build: "+l+" ms"),this.disposed)s();else{this.splatTree=this.baseSplatTree,this.baseSplatTree=null;let c=0,u=0,d=0;this.splatTree.visitLeaves(h=>{const f=h.data.indexes.length;f>0&&(u+=f,d++,c++)}),this.logLevel>=$v.Info&&(console.log(`SplatTree leaves: ${this.splatTree.countLeaves()}`),console.log(`SplatTree leaves with splats:${c}`),u=u/d,console.log(`Avg splat count per node: ${u}`),console.log(`Total splat count: ${this.getSplatCount()}`)),s()}})})});pn(this,"updateUniforms",function(){const t=new Kn;return function(r,i,s,a,o,l){if(this.getSplatCount()>0){if(t.set(r.x*this.devicePixelRatio,r.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(t),this.material.uniforms.basisViewport.value.set(1/t.x,1/t.y),this.material.uniforms.focal.value.set(i,s),this.material.uniforms.orthographicMode.value=a?1:0,this.material.uniforms.orthoZoom.value=o,this.material.uniforms.inverseFocalAdjustment.value=l,this.dynamicMode)for(let u=0;u<this.scenes.length;u++)this.material.uniforms.transforms.value[u].copy(this.getScene(u).transform);if(this.enableOptionalEffects)for(let u=0;u<this.scenes.length;u++)this.material.uniforms.sceneOpacity.value[u]=zi(this.getScene(u).opacity,0,1),this.material.uniforms.sceneVisibility.value[u]=this.getScene(u).visible?1:0,this.material.uniformsNeedUpdate=!0;this.material.uniformsNeedUpdate=!0}}}());pn(this,"setupDistancesComputationTransformFeedback",function(){let t;return function(){const r=this.getMaxSplatCount();if(!this.renderer)return;const i=this.lastRenderer!==this.renderer,s=t!==r;if(!i&&!s)return;i?this.disposeDistancesComputationGPUResources():s&&this.disposeDistancesComputationGPUBufferResources();const a=this.renderer.getContext(),o=(f,p,m)=>{const v=f.createShader(p);if(!v)return console.error("Fatal error: gl could not create a shader object."),null;if(f.shaderSource(v,m),f.compileShader(v),!f.getShaderParameter(v,f.COMPILE_STATUS)){let _="unknown";p===f.VERTEX_SHADER?_="vertex shader":p===f.FRAGMENT_SHADER&&(_="fragement shader");const b=f.getShaderInfoLog(v);return console.error("Failed to compile "+_+" with these errors:"+b),f.deleteShader(v),null}return v};let l;this.integerBasedDistancesComputation?(l=`#version 300 es
                in ivec4 center;
                flat out int distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform ivec4 transforms[${Hr.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `:l+=`
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `):(l=`#version 300 es
                in vec4 center;
                flat out float distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform mat4 transforms[${Hr.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `:l+=`
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `);const c=`#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `,u=a.getParameter(a.VERTEX_ARRAY_BINDING),d=a.getParameter(a.CURRENT_PROGRAM),h=d?a.getProgramParameter(d,a.DELETE_STATUS):!1;if(i&&(this.distancesTransformFeedback.vao=a.createVertexArray()),a.bindVertexArray(this.distancesTransformFeedback.vao),i){const f=a.createProgram(),p=o(a,a.VERTEX_SHADER,l),m=o(a,a.FRAGMENT_SHADER,c);if(!p||!m)throw new Error("Could not compile shaders for distances computation on GPU.");if(a.attachShader(f,p),a.attachShader(f,m),a.transformFeedbackVaryings(f,["distance"],a.SEPARATE_ATTRIBS),a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS)){const g=a.getProgramInfoLog(f);throw console.error("Fatal error: Failed to link program: "+g),a.deleteProgram(f),a.deleteShader(m),a.deleteShader(p),new Error("Could not link shaders for distances computation on GPU.")}this.distancesTransformFeedback.program=f,this.distancesTransformFeedback.vertexShader=p,this.distancesTransformFeedback.vertexShader=m}if(a.useProgram(this.distancesTransformFeedback.program),this.distancesTransformFeedback.centersLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"center"),this.dynamicMode){this.distancesTransformFeedback.sceneIndexesLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"sceneIndex");for(let f=0;f<this.scenes.length;f++)this.distancesTransformFeedback.transformsLocs[f]=a.getUniformLocation(this.distancesTransformFeedback.program,`transforms[${f}]`)}else this.distancesTransformFeedback.modelViewProjLoc=a.getUniformLocation(this.distancesTransformFeedback.program,"modelViewProj");(i||s)&&(this.distancesTransformFeedback.centersBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?a.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,a.INT,0,0):a.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,a.FLOAT,!1,0,0),this.dynamicMode&&(this.distancesTransformFeedback.sceneIndexesBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),a.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,a.UNSIGNED_INT,0,0))),(i||s)&&(this.distancesTransformFeedback.outDistancesBuffer=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),a.bufferData(a.ARRAY_BUFFER,r*4,a.STATIC_READ),i&&(this.distancesTransformFeedback.id=a.createTransformFeedback()),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),d&&h!==!0&&a.useProgram(d),u&&a.bindVertexArray(u),this.lastRenderer=this.renderer,t=r}}());pn(this,"fillTransformsArray",function(){const t=[];return function(r){t.length!==r.length&&(t.length=r.length);for(let i=0;i<this.scenes.length;i++){const a=this.getScene(i).transform.elements;for(let o=0;o<16;o++)t[i*16+o]=a[o]}r.set(t)}}());pn(this,"computeDistancesOnGPU",function(){const t=new hr;return function(r,i){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING),o=s.getParameter(s.CURRENT_PROGRAM),l=o?s.getProgramParameter(o,s.DELETE_STATUS):!1;if(s.bindVertexArray(this.distancesTransformFeedback.vao),s.useProgram(this.distancesTransformFeedback.program),s.enable(s.RASTERIZER_DISCARD),this.dynamicMode)for(let d=0;d<this.scenes.length;d++)if(t.copy(this.getScene(d).transform),t.premultiply(r),this.integerBasedDistancesComputation){const h=Xs.getIntegerMatrixArray(t),f=[h[2],h[6],h[10],h[14]];s.uniform4i(this.distancesTransformFeedback.transformsLocs[d],f[0],f[1],f[2],f[3])}else s.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[d],!1,t.elements);else if(this.integerBasedDistancesComputation){const d=Xs.getIntegerMatrixArray(r),h=[d[2],d[6],d[10]];s.uniform3i(this.distancesTransformFeedback.modelViewProjLoc,h[0],h[1],h[2])}else{const d=[r.elements[2],r.elements[6],r.elements[10]];s.uniform3f(this.distancesTransformFeedback.modelViewProjLoc,d[0],d[1],d[2])}s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?s.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,s.INT,0,0):s.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,s.FLOAT,!1,0,0),this.dynamicMode&&(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),s.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,s.UNSIGNED_INT,0,0)),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),s.beginTransformFeedback(s.POINTS),s.drawArrays(s.POINTS,0,this.getSplatCount()),s.endTransformFeedback(),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,null),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),s.disable(s.RASTERIZER_DISCARD);const c=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);s.flush();const u=new Promise(d=>{const h=()=>{if(this.disposed)d();else switch(s.clientWaitSync(c,0,0)){case s.TIMEOUT_EXPIRED:return this.computeDistancesOnGPUSyncTimeout=setTimeout(h),this.computeDistancesOnGPUSyncTimeout;case s.WAIT_FAILED:throw new Error("should never get here");default:this.computeDistancesOnGPUSyncTimeout=null,s.deleteSync(c);const v=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),s.getBufferSubData(s.ARRAY_BUFFER,0,i),s.bindBuffer(s.ARRAY_BUFFER,null),v&&s.bindVertexArray(v),d()}};this.computeDistancesOnGPUSyncTimeout=setTimeout(h)});return o&&l!==!0&&s.useProgram(o),a&&s.bindVertexArray(a),u}}());pn(this,"getSplatCenter",function(){const t={};return function(r,i,s){this.getLocalSplatParameters(r,t,s),t.splatBuffer.getSplatCenter(t.localIndex,i,t.sceneTransform)}}());pn(this,"getSplatScaleAndRotation",function(){const t={},r=new it;return function(i,s,a,o){this.getLocalSplatParameters(i,t,o),r.x=void 0,r.y=void 0,r.z=void 0,this.splatRenderMode===Xu.TwoD&&(r.z=0),t.splatBuffer.getSplatScaleAndRotation(t.localIndex,s,a,t.sceneTransform,r)}}());pn(this,"getSplatColor",function(){const t={};return function(r,i){this.getLocalSplatParameters(r,t),t.splatBuffer.getSplatColor(t.localIndex,i)}}());this.renderer=void 0,this.splatRenderMode=t,this.dynamicMode=r,this.enableOptionalEffects=i,this.halfPrecisionCovariancesOnGPU=s,this.devicePixelRatio=a,this.enableDistancesComputationOnGPU=o,this.integerBasedDistancesComputation=l,this.antialiased=c,this.kernel2DSize=p,this.maxScreenSpaceSplatSize=u,this.logLevel=d,this.sphericalHarmonicsDegree=h,this.minSphericalHarmonicsDegree=0,this.sceneFadeInRateMultiplier=f,this.scenes=[],this.splatTree=null,this.baseSplatTree=null,this.splatDataTextures={},this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new jc,this.calculatedSceneCenter=new it,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!1,this.lastRenderer=null,this.visible=!1}static buildScenes(t,r,i){const s=[];s.length=r.length;for(let a=0;a<r.length;a++){const o=r[a],l=i[a]||{};let c=l.position||[0,0,0],u=l.rotation||[0,0,0,1],d=l.scale||[1,1,1];const h=new it().fromArray(c),f=new Hi().fromArray(u),p=new it().fromArray(d),m=Xs.createScene(o,h,f,p,l.splatAlphaRemovalThreshold||1,l.opacity,l.visible);t.add(m),s[a]=m}return s}static createScene(t,r,i,s,a,o=1,l=!0){return new Hit(t,r,i,s,a,o,l)}static buildSplatIndexMaps(t){const r=[],i=[];let s=0;for(let a=0;a<t.length;a++){const l=t[a].getMaxSplatCount();for(let c=0;c<l;c++)r[s]=c,i[s]=a,s++}return{localSplatIndexMap:r,sceneIndexMap:i}}build(t,r,i=!0,s=!1,a,o,l=!0){this.sceneOptions=r,this.finalBuild=s;const c=Xs.getTotalMaxSplatCountForSplatBuffers(t),u=Xs.buildScenes(this,t,r);if(i)for(let v=0;v<this.scenes.length&&v<u.length;v++){const g=u[v],_=this.getScene(v);g.copyTransformData(_)}this.scenes=u;let d=3;for(let v of t){const g=v.getMinSphericalHarmonicsDegree();g<d&&(d=g)}this.minSphericalHarmonicsDegree=Math.min(d,this.sphericalHarmonicsDegree);let h=!1;if(t.length!==this.lastBuildScenes.length)h=!0;else for(let v=0;v<t.length;v++)if(t[v]!==this.lastBuildScenes[v].splatBuffer){h=!0;break}let f=!0;if((this.scenes.length!==1||this.lastBuildSceneCount!==this.scenes.length||this.lastBuildMaxSplatCount!==c||h)&&(f=!1),!f){this.boundingBox=new jc,l||(this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.firstRenderTime=-1),this.lastBuildScenes=[],this.lastBuildSplatCount=0,this.lastBuildMaxSplatCount=0,this.disposeMeshData(),this.geometry=Uit.build(c),this.splatRenderMode===Xu.ThreeD?this.material=AM.build(this.dynamicMode,this.enableOptionalEffects,this.antialiased,this.maxScreenSpaceSplatSize,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree,this.kernel2DSize):this.material=EM.build(this.dynamicMode,this.enableOptionalEffects,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree);const v=Xs.buildSplatIndexMaps(t);this.globalSplatIndexToLocalSplatIndexMap=v.localSplatIndexMap,this.globalSplatIndexToSceneIndexMap=v.sceneIndexMap}const p=this.getSplatCount(!0);this.enableDistancesComputationOnGPU&&this.setupDistancesComputationTransformFeedback();const m=this.refreshGPUDataFromSplatBuffers(f);for(let v=0;v<this.scenes.length;v++)this.lastBuildScenes[v]=this.scenes[v];return this.lastBuildSplatCount=p,this.lastBuildMaxSplatCount=this.getMaxSplatCount(),this.lastBuildSceneCount=this.scenes.length,s&&this.scenes.length>0&&this.buildSplatTree(r.map(v=>v.splatAlphaRemovalThreshold||1),a,o).then(()=>{this.onSplatTreeReadyCallback&&this.onSplatTreeReadyCallback(this.splatTree),this.onSplatTreeReadyCallback=null}),this.visible=this.scenes.length>0,m}freeIntermediateSplatData(){const t=r=>{delete r.source.data,delete r.image,r.onUpdate=null};delete this.splatDataTextures.baseData.covariances,delete this.splatDataTextures.baseData.centers,delete this.splatDataTextures.baseData.colors,delete this.splatDataTextures.baseData.sphericalHarmonics,delete this.splatDataTextures.centerColors.data,delete this.splatDataTextures.covariances.data,this.splatDataTextures.sphericalHarmonics&&delete this.splatDataTextures.sphericalHarmonics.data,this.splatDataTextures.sceneIndexes&&delete this.splatDataTextures.sceneIndexes.data,this.splatDataTextures.centerColors.texture.needsUpdate=!0,this.splatDataTextures.centerColors.texture.onUpdate=()=>{t(this.splatDataTextures.centerColors.texture)},this.splatDataTextures.covariances.texture.needsUpdate=!0,this.splatDataTextures.covariances.texture.onUpdate=()=>{t(this.splatDataTextures.covariances.texture)},this.splatDataTextures.sphericalHarmonics&&(this.splatDataTextures.sphericalHarmonics.texture?(this.splatDataTextures.sphericalHarmonics.texture.needsUpdate=!0,this.splatDataTextures.sphericalHarmonics.texture.onUpdate=()=>{t(this.splatDataTextures.sphericalHarmonics.texture)}):this.splatDataTextures.sphericalHarmonics.textures.forEach(r=>{r.needsUpdate=!0,r.onUpdate=()=>{t(r)}})),this.splatDataTextures.sceneIndexes&&(this.splatDataTextures.sceneIndexes.texture.needsUpdate=!0,this.splatDataTextures.sceneIndexes.texture.onUpdate=()=>{t(this.splatDataTextures.sceneIndexes.texture)})}dispose(){this.disposeMeshData(),this.disposeTextures(),this.disposeSplatTree(),this.enableDistancesComputationOnGPU&&(this.computeDistancesOnGPUSyncTimeout&&(clearTimeout(this.computeDistancesOnGPUSyncTimeout),this.computeDistancesOnGPUSyncTimeout=null),this.disposeDistancesComputationGPUResources()),this.scenes=[],this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.renderer=null,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new jc,this.calculatedSceneCenter=new it,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!0,this.lastRenderer=null,this.visible=!1}disposeMeshData(){this.geometry&&this.geometry!==rG&&(this.geometry.dispose(),this.geometry=null),this.material&&(this.material.dispose(),this.material=null)}disposeTextures(){for(let t in this.splatDataTextures)if(this.splatDataTextures.hasOwnProperty(t)){const r=this.splatDataTextures[t];r.texture&&(r.texture.dispose(),r.texture=null)}this.splatDataTextures=null}disposeSplatTree(){this.splatTree&&(this.splatTree.dispose(),this.splatTree=null),this.baseSplatTree&&(this.baseSplatTree.dispose(),this.baseSplatTree=null)}getSplatTree(){return this.splatTree}onSplatTreeReady(t){this.onSplatTreeReadyCallback=t}getDataForDistancesComputation(t,r){const i=this.integerBasedDistancesComputation?this.getIntegerCenters(t,r,!0):this.getFloatCenters(t,r,!0),s=this.getSceneIndexes(t,r);return{centers:i,sceneIndexes:s}}refreshGPUDataFromSplatBuffers(t){const r=this.getSplatCount(!0);this.refreshDataTexturesFromSplatBuffers(t);const i=t?this.lastBuildSplatCount:0,{centers:s,sceneIndexes:a}=this.getDataForDistancesComputation(i,r-1);return this.enableDistancesComputationOnGPU&&this.refreshGPUBuffersForDistancesComputation(s,a,t),{from:i,to:r-1,count:r-i,centers:s,sceneIndexes:a}}refreshGPUBuffersForDistancesComputation(t,r,i=!1){const s=i?this.lastBuildSplatCount:0;this.updateGPUCentersBufferForDistancesComputation(i,t,s),this.updateGPUTransformIndexesBufferForDistancesComputation(i,r,s)}refreshDataTexturesFromSplatBuffers(t){const r=this.getSplatCount(!0),i=this.lastBuildSplatCount,s=r-1;t?this.updateBaseDataFromSplatBuffers(i,s):(this.setupDataTextures(),this.updateBaseDataFromSplatBuffers()),this.updateDataTexturesFromBaseData(i,s),this.updateVisibleRegion(t)}setupDataTextures(){const t=this.getMaxSplatCount(),r=this.getSplatCount(!0);this.disposeTextures();const i=(C,A)=>{const T=new Kn(4096,1024);for(;T.x*T.y*C<t*A;)T.y*=2;return T},s=C=>C>=1?Qit:jit,a=C=>{const A=s(C),T=i(A,6);return{elementsPerTexelStored:A,texSize:T}};let o=this.getTargetCovarianceCompressionLevel();const l=0,c=this.getTargetSphericalHarmonicsCompressionLevel();let u,d,h;if(this.splatRenderMode===Xu.ThreeD){const C=a(o);C.texSize.x*C.texSize.y>aG&&o===0&&(o=1),u=new Float32Array(t*qw)}else d=new Float32Array(t*3),h=new Float32Array(t*4);const f=new Float32Array(t*3),p=new Uint8Array(t*4);let m=Float32Array;c===1?m=Uint16Array:c===2&&(m=Uint8Array);const v=Hv(this.minSphericalHarmonicsDegree),g=this.minSphericalHarmonicsDegree?new m(t*v):void 0,_=i(hI,4),b=new Uint32Array(_.x*_.y*hI);Xs.updateCenterColorsPaddedData(0,r-1,f,p,b);const S=new vf(b,_.x,_.y,zv,Il);if(S.internalFormat="RGBA32UI",S.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=S,this.material.uniforms.centersColorsTextureSize.value.copy(_),this.material.uniformsNeedUpdate=!0,this.splatDataTextures={baseData:{covariances:u,scales:d,rotations:h,centers:f,colors:p,sphericalHarmonics:g},centerColors:{data:b,texture:S,size:_}},this.splatRenderMode===Xu.ThreeD){const C=a(o),A=C.elementsPerTexelStored,T=C.texSize;let I=o>=1?Uint32Array:Float32Array;const D=o>=1?Jit:Zit,B=new I(T.x*T.y*D);o===0?B.set(u):Xs.updatePaddedCompressedCovariancesTextureData(u,B,0,0,u.length);let O;if(o>=1)O=new vf(B,T.x,T.y,zv,Il),O.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=O;else{O=new vf(B,T.x,T.y,$a,lc),this.material.uniforms.covariancesTexture.value=O;const H=new vf(new Uint32Array(32),2,2,zv,Il);H.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=H,H.needsUpdate=!0}O.needsUpdate=!0,this.material.uniforms.covariancesAreHalfFloat.value=o>=1?1:0,this.material.uniforms.covariancesTextureSize.value.copy(T),this.splatDataTextures.covariances={data:B,texture:O,size:T,compressionLevel:o,elementsPerTexelStored:A,elementsPerTexelAllocated:D}}else{const A=i(fI,6);let T=Float32Array,I=lc;const D=new T(A.x*A.y*fI);Xs.updateScaleRotationsPaddedData(0,r-1,d,h,D);const B=new vf(D,A.x,A.y,$a,I);B.needsUpdate=!0,this.material.uniforms.scaleRotationsTexture.value=B,this.material.uniforms.scaleRotationsTextureSize.value.copy(A),this.splatDataTextures.scaleRotations={data:D,texture:B,size:A,compressionLevel:l}}if(g){const C=c===2?fu:py;let A=v;A%2!==0&&A++;const T=4,I=$a;let D=i(T,A);if(D.x*D.y<=aG){const B=D.x*D.y*T,O=new m(B);for(let L=0;L<r;L++){const z=v*L,k=A*L;for(let F=0;F<v;F++)O[k+F]=g[z+F]}const H=new vf(O,D.x,D.y,I,C);H.needsUpdate=!0,this.material.uniforms.sphericalHarmonicsTexture.value=H,this.splatDataTextures.sphericalHarmonics={componentCount:v,paddedComponentCount:A,data:O,textureCount:1,texture:H,size:D,compressionLevel:c,elementsPerTexel:T}}else{const B=v/3;A=B,A%2!==0&&A++,D=i(T,A);const O=D.x*D.y*T,H=[this.material.uniforms.sphericalHarmonicsTextureR,this.material.uniforms.sphericalHarmonicsTextureG,this.material.uniforms.sphericalHarmonicsTextureB],L=[],z=[];for(let k=0;k<3;k++){const F=new m(O);L.push(F);for(let q=0;q<r;q++){const Z=v*q,se=A*q;if(B>=3){for(let X=0;X<3;X++)F[se+X]=g[Z+k*3+X];if(B>=8)for(let X=0;X<5;X++)F[se+3+X]=g[Z+9+k*5+X]}}const W=new vf(F,D.x,D.y,I,C);z.push(W),W.needsUpdate=!0,H[k].value=W}this.material.uniforms.sphericalHarmonicsMultiTextureMode.value=1,this.splatDataTextures.sphericalHarmonics={componentCount:v,componentCountPerChannel:B,paddedComponentCount:A,data:L,textureCount:3,textures:z,size:D,compressionLevel:c,elementsPerTexel:T}}this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(D),this.material.uniforms.sphericalHarmonics8BitMode.value=c===2?1:0;for(let B=0;B<this.scenes.length;B++){const O=this.scenes[B].splatBuffer;this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[B]=O.minSphericalHarmonicsCoeff,this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[B]=O.maxSphericalHarmonicsCoeff}this.material.uniformsNeedUpdate=!0}const x=i(iG,4),w=new Uint32Array(x.x*x.y*iG);for(let C=0;C<r;C++)w[C]=this.globalSplatIndexToSceneIndexMap[C];const M=new vf(w,x.x,x.y,YT,Il);M.internalFormat="R32UI",M.needsUpdate=!0,this.material.uniforms.sceneIndexesTexture.value=M,this.material.uniforms.sceneIndexesTextureSize.value.copy(x),this.material.uniformsNeedUpdate=!0,this.splatDataTextures.sceneIndexes={data:w,texture:M,size:x},this.material.uniforms.sceneCount.value=this.scenes.length}updateBaseDataFromSplatBuffers(t,r){const i=this.splatDataTextures.covariances,s=i?i.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,c=l?l.compressionLevel:0;this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,this.splatDataTextures.baseData.sphericalHarmonics,void 0,s,o,c,t,r,t)}updateDataTexturesFromBaseData(t,r){const i=this.splatDataTextures.covariances,s=i?i.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,c=l?l.compressionLevel:0,u=this.splatDataTextures.centerColors,d=u.data,h=u.texture;Xs.updateCenterColorsPaddedData(t,r,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,d);const f=this.renderer?this.renderer.properties.get(h):null;if(!f||!f.__webglTexture?h.needsUpdate=!0:this.updateDataTexture(d,u.texture,u.size,f,hI,Xit,4,t,r),i){const b=i.texture,S=t*qw,x=r*qw;if(s===0)for(let M=S;M<=x;M++){const C=this.splatDataTextures.baseData.covariances[M];i.data[M]=C}else Xs.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,i.data,t*i.elementsPerTexelAllocated,S,x);const w=this.renderer?this.renderer.properties.get(b):null;!w||!w.__webglTexture?b.needsUpdate=!0:s===0?this.updateDataTexture(i.data,i.texture,i.size,w,i.elementsPerTexelStored,qw,4,t,r):this.updateDataTexture(i.data,i.texture,i.size,w,i.elementsPerTexelAllocated,i.elementsPerTexelAllocated,2,t,r)}if(a){const b=a.data,S=a.texture,x=6,w=o===0?4:2;Xs.updateScaleRotationsPaddedData(t,r,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,b);const M=this.renderer?this.renderer.properties.get(S):null;!M||!M.__webglTexture?S.needsUpdate=!0:this.updateDataTexture(b,a.texture,a.size,M,fI,x,w,t,r)}const p=this.splatDataTextures.baseData.sphericalHarmonics;if(p){let b=4;c===1?b=2:c===2&&(b=1);const S=(M,C,A,T,I)=>{const D=this.renderer?this.renderer.properties.get(M):null;!D||!D.__webglTexture?M.needsUpdate=!0:this.updateDataTexture(T,M,C,D,A,I,b,t,r)},x=l.componentCount,w=l.paddedComponentCount;if(l.textureCount===1){const M=l.data;for(let C=t;C<=r;C++){const A=x*C,T=w*C;for(let I=0;I<x;I++)M[T+I]=p[A+I]}S(l.texture,l.size,l.elementsPerTexel,M,w)}else{const M=l.componentCountPerChannel;for(let C=0;C<3;C++){const A=l.data[C];for(let T=t;T<=r;T++){const I=x*T,D=w*T;if(M>=3){for(let B=0;B<3;B++)A[D+B]=p[I+C*3+B];if(M>=8)for(let B=0;B<5;B++)A[D+3+B]=p[I+9+C*5+B]}}S(l.textures[C],l.size,l.elementsPerTexel,A,w)}}}const m=this.splatDataTextures.sceneIndexes,v=m.data;for(let b=this.lastBuildSplatCount;b<=r;b++)v[b]=this.globalSplatIndexToSceneIndexMap[b];const g=m.texture,_=this.renderer?this.renderer.properties.get(g):null;!_||!_.__webglTexture?g.needsUpdate=!0:this.updateDataTexture(v,m.texture,m.size,_,1,1,1,this.lastBuildSplatCount,r)}getTargetCovarianceCompressionLevel(){return this.halfPrecisionCovariancesOnGPU?1:0}getTargetSphericalHarmonicsCompressionLevel(){return Math.max(1,this.getMaximumSplatBufferCompressionLevel())}getMaximumSplatBufferCompressionLevel(){let t;for(let r=0;r<this.scenes.length;r++){const s=this.getScene(r).splatBuffer;(r===0||s.compressionLevel>t)&&(t=s.compressionLevel)}return t}getMinimumSplatBufferCompressionLevel(){let t;for(let r=0;r<this.scenes.length;r++){const s=this.getScene(r).splatBuffer;(r===0||s.compressionLevel<t)&&(t=s.compressionLevel)}return t}static computeTextureUpdateRegion(t,r,i,s,a){const o=a/s,l=t*o,c=Math.floor(l/i),u=c*i*s,d=r*o,h=Math.floor(d/i),f=h*i*s+i*s;return{dataStart:u,dataEnd:f,startRow:c,endRow:h}}updateDataTexture(t,r,i,s,a,o,l,c,u){const d=this.renderer.getContext(),h=Xs.computeTextureUpdateRegion(c,u,i.x,a,o),f=h.dataEnd-h.dataStart,p=new t.constructor(t.buffer,h.dataStart*l,f),m=h.endRow-h.startRow+1,v=this.webGLUtils.convert(r.type),g=this.webGLUtils.convert(r.format,r.colorSpace),_=d.getParameter(d.TEXTURE_BINDING_2D);d.bindTexture(d.TEXTURE_2D,s.__webglTexture),d.texSubImage2D(d.TEXTURE_2D,0,0,h.startRow,i.x,m,g,v,p),d.bindTexture(d.TEXTURE_2D,_)}static updatePaddedCompressedCovariancesTextureData(t,r,i,s,a){let o=new DataView(r.buffer),l=i,c=0;for(let u=s;u<=a;u+=2)o.setUint16(l*2,t[u],!0),o.setUint16(l*2+2,t[u+1],!0),l+=2,c++,c>=3&&(l+=2,c=0)}static updateCenterColorsPaddedData(t,r,i,s,a){for(let o=t;o<=r;o++){const l=o*4,c=o*3,u=o*4;a[u]=Drt(s,l),a[u+1]=sI(i[c]),a[u+2]=sI(i[c+1]),a[u+3]=sI(i[c+2])}}static updateScaleRotationsPaddedData(t,r,i,s,a){for(let l=t;l<=r;l++){const c=l*3,u=l*4,d=l*6;a[d]=i[c],a[d+1]=i[c+1],a[d+2]=i[c+2],a[d+3]=s[u],a[d+4]=s[u+1],a[d+5]=s[u+2]}}updateVisibleRegion(t){const r=this.getSplatCount(!0),i=new it;if(!t){const a=new it;this.scenes.forEach(o=>{a.add(o.splatBuffer.sceneCenter)}),a.multiplyScalar(1/this.scenes.length),this.calculatedSceneCenter.copy(a),this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter),this.material.uniformsNeedUpdate=!0}const s=t?this.lastBuildSplatCount:0;for(let a=s;a<r;a++){this.getSplatCenter(a,i,!0);const o=i.sub(this.calculatedSceneCenter).length();o>this.maxSplatDistanceFromSceneCenter&&(this.maxSplatDistanceFromSceneCenter=o)}this.maxSplatDistanceFromSceneCenter-this.visibleRegionBufferRadius>sG&&(this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter,this.visibleRegionRadius=Math.max(this.visibleRegionBufferRadius-sG,0)),this.finalBuild&&(this.visibleRegionRadius=this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter),this.updateVisibleRegionFadeDistance()}updateVisibleRegionFadeDistance(t=pb.Default){const r=est*this.sceneFadeInRateMultiplier,i=tst*this.sceneFadeInRateMultiplier,s=this.finalBuild?r:i,a=t===pb.Default?s:i;this.visibleRegionFadeStartRadius=(this.visibleRegionRadius-this.visibleRegionFadeStartRadius)*a+this.visibleRegionFadeStartRadius;const l=(this.visibleRegionBufferRadius>0?this.visibleRegionFadeStartRadius/this.visibleRegionBufferRadius:0)>.99,c=l||t===pb.Instant?1:0;this.material.uniforms.visibleRegionFadeStartRadius.value=this.visibleRegionFadeStartRadius,this.material.uniforms.visibleRegionRadius.value=this.visibleRegionRadius,this.material.uniforms.firstRenderTime.value=this.firstRenderTime,this.material.uniforms.currentTime.value=performance.now(),this.material.uniforms.fadeInComplete.value=c,this.material.uniformsNeedUpdate=!0,this.visibleRegionChanging=!l}updateRenderIndexes(t,r){const i=this.geometry;i.attributes.splatIndex.set(t),i.attributes.splatIndex.needsUpdate=!0,r>0&&this.firstRenderTime===-1&&(this.firstRenderTime=performance.now()),i.instanceCount=r,i.setDrawRange(0,r)}updateTransforms(){for(let t=0;t<this.scenes.length;t++)this.getScene(t).updateTransform(this.dynamicMode)}setSplatScale(t=1){this.splatScale=t,this.material.uniforms.splatScale.value=t,this.material.uniformsNeedUpdate=!0}getSplatScale(){return this.splatScale}setPointCloudModeEnabled(t){this.pointCloudModeEnabled=t,this.material.uniforms.pointCloudModeEnabled.value=t?1:0,this.material.uniformsNeedUpdate=!0}getPointCloudModeEnabled(){return this.pointCloudModeEnabled}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(t=!1){return t?Xs.getTotalSplatCountForScenes(this.scenes):this.lastBuildSplatCount}static getTotalSplatCountForScenes(t){let r=0;for(let i of t)i&&i.splatBuffer&&(r+=i.splatBuffer.getSplatCount());return r}static getTotalSplatCountForSplatBuffers(t){let r=0;for(let i of t)r+=i.getSplatCount();return r}getMaxSplatCount(){return Xs.getTotalMaxSplatCountForScenes(this.scenes)}static getTotalMaxSplatCountForScenes(t){let r=0;for(let i of t)i&&i.splatBuffer&&(r+=i.splatBuffer.getMaxSplatCount());return r}static getTotalMaxSplatCountForSplatBuffers(t){let r=0;for(let i of t)r+=i.getMaxSplatCount();return r}disposeDistancesComputationGPUResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.vao&&(t.deleteVertexArray(this.distancesTransformFeedback.vao),this.distancesTransformFeedback.vao=null),this.distancesTransformFeedback.program&&(t.deleteProgram(this.distancesTransformFeedback.program),t.deleteShader(this.distancesTransformFeedback.vertexShader),t.deleteShader(this.distancesTransformFeedback.fragmentShader),this.distancesTransformFeedback.program=null,this.distancesTransformFeedback.vertexShader=null,this.distancesTransformFeedback.fragmentShader=null),this.disposeDistancesComputationGPUBufferResources(),this.distancesTransformFeedback.id&&(t.deleteTransformFeedback(this.distancesTransformFeedback.id),this.distancesTransformFeedback.id=null)}disposeDistancesComputationGPUBufferResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.centersBuffer&&(this.distancesTransformFeedback.centersBuffer=null,t.deleteBuffer(this.distancesTransformFeedback.centersBuffer)),this.distancesTransformFeedback.outDistancesBuffer&&(t.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer),this.distancesTransformFeedback.outDistancesBuffer=null)}setRenderer(t){if(t!==this.renderer){this.renderer=t;const r=this.renderer.getContext(),i=new qit(r),s=new Kit(r,i,{});if(i.init(s),this.webGLUtils=new zne(r,i),this.enableDistancesComputationOnGPU&&this.getSplatCount()>0){this.setupDistancesComputationTransformFeedback();const{centers:a,sceneIndexes:o}=this.getDataForDistancesComputation(0,this.getSplatCount()-1);this.refreshGPUBuffersForDistancesComputation(a,o)}}}updateGPUCentersBufferForDistancesComputation(t,r,i){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=this.integerBasedDistancesComputation?Uint32Array:Float32Array,l=16,c=i*l;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,c,r);else{const u=new o(this.getMaxSplatCount()*l);u.set(r),s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}updateGPUTransformIndexesBufferForDistancesComputation(t,r,i){if(!this.renderer||!this.dynamicMode)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=i*4;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,o,r);else{const l=new Uint32Array(this.getMaxSplatCount()*4);l.set(r),s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}getSceneIndexes(t,r){let i;const s=r-t+1;i=new Uint32Array(s);for(let a=t;a<=r;a++)i[a]=this.globalSplatIndexToSceneIndexMap[a];return i}getLocalSplatParameters(t,r,i){i==null&&(i=!this.dynamicMode),r.splatBuffer=this.getSplatBufferForSplat(t),r.localIndex=this.getSplatLocalIndex(t),r.sceneTransform=i?this.getSceneTransformForSplat(t):null}fillSplatDataArrays(t,r,i,s,a,o,l,c=0,u=0,d=1,h,f,p=0,m){const v=new it;v.x=void 0,v.y=void 0,this.splatRenderMode===Xu.ThreeD?v.z=void 0:v.z=1;const g=new hr;let _=0,b=this.scenes.length-1;m!=null&&m>=0&&m<=this.scenes.length&&(_=m,b=m);for(let S=_;S<=b;S++){l==null&&(l=!this.dynamicMode);const x=this.getScene(S),w=x.splatBuffer;let M;if(l&&(this.getSceneTransform(S,g),M=g),t&&w.fillSplatCovarianceArray(t,M,h,f,p,c),r||i){if(!r||!i)throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');w.fillSplatScaleRotationArray(r,i,M,h,f,p,u,v)}s&&w.fillSplatCenterArray(s,M,h,f,p),a&&w.fillSplatColorArray(a,x.minimumAlpha,h,f,p),o&&w.fillSphericalHarmonicsArray(o,this.minSphericalHarmonicsDegree,M,h,f,p,d),p+=w.getSplatCount()}}getIntegerCenters(t,r,i=!1){const s=r-t+1,a=new Float32Array(s*3);this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t);let o,l=i?4:3;o=new Int32Array(s*l);for(let c=0;c<s;c++){for(let u=0;u<3;u++)o[c*l+u]=Math.round(a[c*3+u]*1e3);i&&(o[c*l+3]=1e3)}return o}getFloatCenters(t,r,i=!1){const s=r-t+1,a=new Float32Array(s*3);if(this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t),!i)return a;let o=new Float32Array(s*4);for(let l=0;l<s;l++){for(let c=0;c<3;c++)o[l*4+c]=a[l*3+c];o[l*4+3]=1}return o}getSceneTransform(t,r){const i=this.getScene(t);i.updateTransform(this.dynamicMode),r.copy(i.transform)}getScene(t){if(t<0||t>=this.scenes.length)throw new Error("SplatMesh::getScene() -> Invalid scene index.");return this.scenes[t]}getSceneCount(){return this.scenes.length}getSplatBufferForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).splatBuffer}getSceneIndexForSplat(t){return this.globalSplatIndexToSceneIndexMap[t]}getSceneTransformForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).transform}getSplatLocalIndex(t){return this.globalSplatIndexToLocalSplatIndexMap[t]}static getIntegerMatrixArray(t){const r=t.elements,i=[];for(let s=0;s<16;s++)i[s]=Math.round(r[s]*1e3);return i}computeBoundingBox(t=!1,r){let i=this.getSplatCount();if(r!=null){if(r<0||r>=this.scenes.length)throw new Error("SplatMesh::computeBoundingBox() -> Invalid scene index.");i=this.scenes[r].splatBuffer.getSplatCount()}const s=new Float32Array(i*3);this.fillSplatDataArrays(null,null,null,s,null,null,t,void 0,void 0,void 0,void 0,r);const a=new it,o=new it;for(let l=0;l<i;l++){const c=l*3,u=s[c],d=s[c+1],h=s[c+2];(l===0||u<a.x)&&(a.x=u),(l===0||d<a.y)&&(a.y=d),(l===0||h<a.z)&&(a.z=h),(l===0||u>o.x)&&(o.x=u),(l===0||d>o.y)&&(o.y=d),(l===0||h>o.z)&&(o.z=h)}return new jc(a,o)}}var nst="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEbA2AAAGAQf39/f39/f39/f39/f39/fwBgAAF/AhIBA2VudgZtZW1vcnkCAwCAgAQDBAMAAQIHVAQRX193YXNtX2NhbGxfY3RvcnMAABhfX3dhc21fYXBwbHlfZGF0YV9yZWxvY3MAAAtzb3J0SW5kZXhlcwABE2Vtc2NyaXB0ZW5fdGxzX2luaXQAAgqWEAMDAAELihAEAXwDewN/A30gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEBA0AgAyABQQJ0IgVqIAIgACAFaigCAEECdGooAgAiBTYCACAFIAogBSAKSBshCiAFIA0gBSANShshDSABQQFqIgEgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiFWooAgAiFkECdGooAgAiFEcEQAJ/IAX9CQI4IAggFEEGdGoiDv0JAgwgDioCHP0gASAOKgIs/SACIA4qAjz9IAP95gEgBf0JAiggDv0JAgggDioCGP0gASAOKgIo/SACIA4qAjj9IAP95gEgBf0JAgggDv0JAgAgDioCEP0gASAOKgIg/SACIA4qAjD9IAP95gEgBf0JAhggDv0JAgQgDioCFP0gASAOKgIk/SACIA4qAjT9IAP95gH95AH95AH95AEiEf1f/QwAAAAAAECPQAAAAAAAQI9AIhL98gEiE/0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBP9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/REgDv0cAQJ/IBEgEf0NCAkKCwwNDg8AAAAAAAAAAP1fIBL98gEiEf0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9HAICfyAR/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAyESIBQhDwsgAyAVaiABIBZBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmogEf0bA2oiDjYCACAOIAogCiAOShshCiAOIA0gDSAOSBshDSACQQFqIgIgC0cNAAsMAwsCfyAFKgIIu/0UIAUqAhi7/SIB/QwAAAAAAECPQAAAAAAAQI9A/fIBIhH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIQ4CfyAR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyECAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQIgAv0RIA79HAEgBf0cAiESIAwhBQNAIAMgBUECdCICaiABIAAgAmooAgBBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmoiAjYCACACIAogAiAKSBshCiACIA0gAiANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEBA0AgAyABQQJ0IgVqAn8gAiAAIAVqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAFBAWoiASALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIRcgBSoCGCEYIAUqAgghGUH4////ByEKQYiAgIB4IQ0gDCEFA0ACfyAXIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCAZIAIqAgCUIBggAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIUaigCAEECdCIVaigCACIORwRAIAX9CQI4IAggDkEGdGoiD/0JAgwgDyoCHP0gASAPKgIs/SACIA8qAjz9IAP95gEgBf0JAiggD/0JAgggDyoCGP0gASAPKgIo/SACIA8qAjj9IAP95gEgBf0JAgggD/0JAgAgDyoCEP0gASAPKgIg/SACIA8qAjD9IAP95gEgBf0JAhggD/0JAgQgDyoCFP0gASAPKgIk/SACIA8qAjT9IAP95gH95AH95AH95AEhESAOIQ8LIAMgFGoCfyAR/R8DIAEgFUECdCIOQQxyaioCAJQgEf0fAiABIA5BCHJqKgIAlCAR/R8AIAEgDmoqAgCUIBH9HwEgASAOQQRyaioCAJSSkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSACQQFqIgIgC0cNAAsMAQtBiICAgHghDUH4////ByEKCyALIAxLBEAgCUEBa7MgDbIgCrKTlSEXIAwhDQNAAn8gFyADIA1BAnRqIgEoAgAgCmuylCIYi0MAAABPXQRAIBioDAELQYCAgIB4CyEOIAEgDjYCACAEIA5BAnRqIgEgASgCAEEBajYCACANQQFqIg0gC0cNAAsLIAlBAk8EQCAEKAIAIQ1BASEKA0AgBCAKQQJ0aiIBIAEoAgAgDWoiDTYCACAKQQFqIgogCUcNAAsLIAxBAEoEQCAMIQoDQCAGIApBAWsiAUECdCICaiAAIAJqKAIANgIAIApBAUshAiABIQogAg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCwsEAEEACw==",oG="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACEgEDZW52Bm1lbW9yeQIDAICABAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=",rst="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQrrDwICAAvlDwQBfAN7B30DfyALIAprIQwCQAJAIA4EQCANBEBB+P///wchCkGIgICAeCENIAsgDE0NAyAMIQUDQCADIAVBAnQiAWogAiAAIAFqKAIAQQJ0aigCACIBNgIAIAEgCiABIApIGyEKIAEgDSABIA1KGyENIAVBAWoiBSALRw0ACwwDCyAPBEAgCyAMTQ0CQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIcaigCACIdQQJ0aigCACIbRwRAAn8gBf0JAjggCCAbQQZ0aiIO/QkCDCAOKgIc/SABIA4qAiz9IAIgDioCPP0gA/3mASAF/QkCKCAO/QkCCCAOKgIY/SABIA4qAij9IAIgDioCOP0gA/3mASAF/QkCCCAO/QkCACAOKgIQ/SABIA4qAiD9IAIgDioCMP0gA/3mASAF/QkCGCAO/QkCBCAOKgIU/SABIA4qAiT9IAIgDioCNP0gA/3mAf3kAf3kAf3kASIR/V/9DAAAAAAAQI9AAAAAAABAj0AiEv3yASIT/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOAn8gE/0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9ESAO/RwBAn8gESAR/Q0ICQoLDA0ODwABAgMAAQID/V8gEv3yASIR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAgJ/IBH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/RwDIRIgGyEPCyADIBxqIAEgHUEEdGr9AAAAIBL9tQEiEf0bACAR/RsBaiAR/RsCaiAR/RsDaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAgi7/RQgBSoCGLv9IgH9DAAAAAAAQI9AAAAAAABAj0D98gEiEf0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBH9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQL9ESAO/RwBIAX9HAIhEiAMIQUDQCADIAVBAnQiAmogASAAIAJqKAIAQQR0av0AAAAgEv21ASIR/RsAIBH9GwFqIBH9GwJqIgI2AgAgAiAKIAIgCkgbIQogAiANIAIgDUobIQ0gBUEBaiIFIAtHDQALDAILIA0EQEH4////ByEKQYiAgIB4IQ0gCyAMTQ0CIAwhBQNAIAMgBUECdCIBagJ/IAIgACABaigCAEECdGoqAgC7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgD0UEQCALIAxNDQEgBSoCKCEUIAUqAhghFSAFKgIIIRZB+P///wchCkGIgICAeCENIAwhBQNAAn8gFCABIAAgBUECdCIHaigCAEEEdGoiAioCCJQgFiACKgIAlCAVIAIqAgSUkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDiADIAdqIA42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gBUEBaiIFIAtHDQALDAILIAsgDE0NAEF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiG2ooAgBBAnQiHGooAgAiDkcEQCAFKgI4IhQgCCAOQQZ0aiIPKgI8lCAFKgIoIhUgDyoCOJQgBSoCCCIWIA8qAjCUIAUqAhgiFyAPKgI0lJKSkiEYIBQgDyoCLJQgFSAPKgIolCAWIA8qAiCUIBcgDyoCJJSSkpIhGSAUIA8qAhyUIBUgDyoCGJQgFiAPKgIQlCAXIA8qAhSUkpKSIRogFCAPKgIMlCAVIA8qAgiUIBYgDyoCAJQgFyAPKgIElJKSkiEUIA4hDwsgAyAbagJ/IBggASAcQQJ0aiIOKgIMlCAZIA4qAgiUIBQgDioCAJQgGiAOKgIElJKSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAJBAWoiAiALRw0ACwwBC0GIgICAeCENQfj///8HIQoLIAsgDEsEQCAJQQFrsyANsiAKspOVIRQgDCENA0ACfyAUIAMgDUECdGoiASgCACAKa7KUIhWLQwAAAE9dBEAgFagMAQtBgICAgHgLIQ4gASAONgIAIAQgDkECdGoiASABKAIAQQFqNgIAIA1BAWoiDSALRw0ACwsgCUECTwRAIAQoAgAhDUEBIQoDQCAEIApBAnRqIgEgASgCACANaiINNgIAIApBAWoiCiAJRw0ACwsgDEEASgRAIAwhCgNAIAYgCkEBayIBQQJ0IgJqIAAgAmooAgA2AgAgCkEBSyABIQoNAAsLIAsgDEoEQCALIQoDQCAGIAsgBCADIApBAWsiCkECdCIBaigCAEECdGoiAigCACIFa0ECdGogACABaigCADYCACACIAVBAWs2AgAgCiAMSg0ACwsL",ist="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=";function sst(n){let e,t,r,i,s,a,o,l,c,u,d,h,f,p,m,v,g,_,b,S;function x(w,M,C,A,T,I,D){const B=performance.now();if(!r&&(new Uint32Array(t,o,T.byteLength/S.BytesPerInt).set(T),new Float32Array(t,u,D.byteLength/S.BytesPerFloat).set(D),A)){let k;i?k=new Int32Array(t,d,I.byteLength/S.BytesPerInt):k=new Float32Array(t,d,I.byteLength/S.BytesPerFloat),k.set(I)}v||(v=new Uint32Array(_)),new Float32Array(t,m,16).set(C),new Uint32Array(t,f,_).set(v),e.exports.sortIndexes(o,p,d,h,f,m,l,c,u,_,w,M,a,A,i,s);const O={sortDone:!0,splatSortCount:w,splatRenderCount:M,sortTime:0};if(!r){const L=new Uint32Array(t,l,M);(!g||g.length<M)&&(g=new Uint32Array(M)),g.set(L),O.sortedIndexes=g}const H=performance.now();O.sortTime=H-B,n.postMessage(O)}n.onmessage=w=>{if(w.data.centers)centers=w.data.centers,sceneIndexes=w.data.sceneIndexes,i?new Int32Array(t,p+w.data.range.from*S.BytesPerInt*4,w.data.range.count*4).set(new Int32Array(centers)):new Float32Array(t,p+w.data.range.from*S.BytesPerFloat*4,w.data.range.count*4).set(new Float32Array(centers)),s&&new Uint32Array(t,c+w.data.range.from*4,w.data.range.count).set(new Uint32Array(sceneIndexes)),b=w.data.range.from+w.data.range.count;else if(w.data.sort){const M=Math.min(w.data.sort.splatRenderCount||0,b),C=Math.min(w.data.sort.splatSortCount||0,b),A=w.data.sort.usePrecomputedDistances;let T,I,D;r||(T=w.data.sort.indexesToSort,D=w.data.sort.transforms,A&&(I=w.data.sort.precomputedDistances)),x(C,M,w.data.sort.modelViewProj,A,T,I,D)}else if(w.data.init){S=w.data.init.Constants,a=w.data.init.splatCount,r=w.data.init.useSharedMemory,i=w.data.init.integerBasedSort,s=w.data.init.dynamicMode,_=w.data.init.distanceMapRange,b=0;const M=i?S.BytesPerInt*4:S.BytesPerFloat*4,C=new Uint8Array(w.data.init.sorterWasmBytes),A=16*S.BytesPerFloat,T=a*S.BytesPerInt,I=a*M,D=A,B=i?a*S.BytesPerInt:a*S.BytesPerFloat,O=a*S.BytesPerInt,H=a*S.BytesPerInt,L=i?_*S.BytesPerInt*2:_*S.BytesPerFloat*2,z=s?a*S.BytesPerInt:0,k=s?S.MaxScenes*A:0,F=S.MemoryPageSize*32,W=T+I+D+B+O+L+H+z+k+F,q=Math.floor(W/S.MemoryPageSize)+1,Z={module:{},env:{memory:new WebAssembly.Memory({initial:q,maximum:q,shared:!0})}};WebAssembly.compile(C).then(se=>WebAssembly.instantiate(se,Z)).then(se=>{e=se,o=0,p=o+T,m=p+I,d=m+D,h=d+B,f=h+O,l=f+L,c=l+H,u=c+z,t=Z.env.memory.buffer,r?n.postMessage({sortSetupPhase1Complete:!0,indexesToSortBuffer:t,indexesToSortOffset:o,sortedIndexesBuffer:t,sortedIndexesOffset:l,precomputedDistancesBuffer:t,precomputedDistancesOffset:d,transformsBuffer:t,transformsOffset:u}):n.postMessage({sortSetupPhase1Complete:!0})})}}}function ast(n,e,t,r,i,s=Hr.DefaultSplatSortDistanceMapPrecision){const a=new Worker(URL.createObjectURL(new Blob(["(",sst.toString(),")(self)"],{type:"application/javascript"})));let o=nst;const l=u8()?Hne():null;!t&&!e?(o=oG,l&&l.major<=16&&l.minor<4&&(o=ist)):t?e||l&&l.major<=16&&l.minor<4&&(o=rst):o=oG;const c=atob(o),u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d);return a.postMessage({init:{sorterWasmBytes:u.buffer,splatCount:n,useSharedMemory:e,integerBasedSort:r,dynamicMode:i,distanceMapRange:1<<s,Constants:{BytesPerFloat:Hr.BytesPerFloat,BytesPerInt:Hr.BytesPerInt,MemoryPageSize:Hr.MemoryPageSize,MaxScenes:Hr.MaxScenes}}}),a}const Um={None:0,VR:1,AR:2};class Rg{static createButton(e,t={}){const r=document.createElement("button");function i(){let c=null;async function u(f){f.addEventListener("end",d),await e.xr.setSession(f),r.textContent="EXIT VR",c=f}function d(){c.removeEventListener("end",d),r.textContent="ENTER VR",c=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="ENTER VR";const h={...t,optionalFeatures:["local-floor","bounded-floor","layers",...t.optionalFeatures||[]]};r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){c===null?navigator.xr.requestSession("immersive-vr",h).then(u):(c.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",h).then(u).catch(f=>{console.warn(f)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",h).then(u).catch(f=>{console.warn(f)})}function s(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function a(){s(),r.textContent="VR NOT SUPPORTED"}function o(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),r.textContent="VR NOT ALLOWED"}function l(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return r.id="VRButton",r.style.display="none",l(r),navigator.xr.isSessionSupported("immersive-vr").then(function(c){c?i():a(),c&&Rg.xrSessionIsGranted&&r.click()}).catch(o),r;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{Rg.xrSessionIsGranted=!0})}}}Rg.xrSessionIsGranted=!1;Rg.registerSessionGrantedListener();class ost{static createButton(e,t={}){const r=document.createElement("button");function i(){if(t.domOverlay===void 0){const h=document.createElement("div");h.style.display="none",document.body.appendChild(h);const f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("width",38),f.setAttribute("height",38),f.style.position="absolute",f.style.right="20px",f.style.top="20px",f.addEventListener("click",function(){c.end()}),h.appendChild(f);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),p.setAttribute("stroke","#fff"),p.setAttribute("stroke-width",2),f.appendChild(p),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:h}}let c=null;async function u(h){h.addEventListener("end",d),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(h),r.textContent="STOP AR",t.domOverlay.root.style.display="",c=h}function d(){c.removeEventListener("end",d),r.textContent="START AR",t.domOverlay.root.style.display="none",c=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="START AR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){c===null?navigator.xr.requestSession("immersive-ar",t).then(u):(c.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(u).catch(h=>{console.warn(h)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(u).catch(h=>{console.warn(h)})}function s(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function a(){s(),r.textContent="AR NOT SUPPORTED"}function o(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),r.textContent="AR NOT ALLOWED"}function l(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return r.id="ARButton",r.style.display="none",l(r),navigator.xr.isSessionSupported("immersive-ar").then(function(c){c?i():a()}).catch(o),r;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}}const pI={Always:0,OnChange:1,Never:2},lst=50,cst=.75,ust=15e5,dst=10,fst=2.5,hst=60,Ef=class Ef{constructor(e={}){pn(this,"onKeyDown",function(){const e=new it,t=new hr,r=new hr;return function(i){switch(e.set(0,0,-1),e.transformDirection(this.camera.matrixWorld),t.makeRotationAxis(e,Math.PI/128),r.makeRotationAxis(e,-Math.PI/128),i.code){case"KeyG":this.focalAdjustment+=.02,this.forceRenderNextFrame();break;case"KeyF":this.focalAdjustment-=.02,this.forceRenderNextFrame();break;case"ArrowLeft":this.camera.up.transformDirection(t);break;case"ArrowRight":this.camera.up.transformDirection(r);break;case"KeyC":this.showMeshCursor=!this.showMeshCursor;break;case"KeyU":this.showControlPlane=!this.showControlPlane;break;case"KeyI":this.showInfo=!this.showInfo,this.showInfo?this.infoPanel.show():this.infoPanel.hide();break;case"KeyO":this.usingExternalCamera||this.setOrthographicMode(!this.camera.isOrthographicCamera);break;case"KeyP":this.usingExternalCamera||this.splatMesh.setPointCloudModeEnabled(!this.splatMesh.getPointCloudModeEnabled());break;case"Equal":this.usingExternalCamera||this.splatMesh.setSplatScale(this.splatMesh.getSplatScale()+.05);break;case"Minus":this.usingExternalCamera||this.splatMesh.setSplatScale(Math.max(this.splatMesh.getSplatScale()-.05,0));break}}}());pn(this,"onMouseUp",function(){const e=new Kn;return function(t){e.copy(this.mousePosition).sub(this.mouseDownPosition),Fm()-this.mouseDownTime<.5&&e.length()<2&&this.onMouseClick(t)}}());pn(this,"checkForFocalPointChange",function(){const e=new Kn,t=new it,r=[];return function(){if(!this.transitioningCameraTarget&&(this.getRenderDimensions(e),r.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,e),this.raycaster.intersectSplatMesh(this.splatMesh,r),r.length>0)){const s=r[0].origin;t.copy(s).sub(this.camera.position),t.length()>cst&&(this.previousCameraTarget.copy(this.controls.target),this.nextCameraTarget.copy(s),this.transitioningCameraTarget=!0,this.transitioningCameraTargetStartTime=Fm())}}}());pn(this,"updateSplatMesh",function(){const e=new Kn;return function(){if(!this.splatMesh)return;if(this.splatMesh.getSplatCount()>0){this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode),this.splatMesh.updateTransforms(),this.getRenderDimensions(e);const r=this.camera.projectionMatrix.elements[0]*.5*this.devicePixelRatio*e.x,i=this.camera.projectionMatrix.elements[5]*.5*this.devicePixelRatio*e.y,s=this.camera.isOrthographicCamera?1/this.devicePixelRatio:1,a=this.focalAdjustment*s,o=1/a;this.adjustForWebXRStereo(e),this.splatMesh.updateUniforms(e,r*a,i*a,this.camera.isOrthographicCamera,this.camera.zoom||1,o)}}}());pn(this,"addSplatBuffers",function(){return function(e,t=[],r=!0,i=!0,s=!0,a=!1,o=!1,l=!0){if(this.isDisposingOrDisposed())return Promise.resolve();let c=null;const u=()=>{c!==null&&(this.loadingSpinner.removeTask(c),c=null)};return this.splatRenderReady=!1,new Promise(d=>{i&&(c=this.loadingSpinner.addTask("Processing splats...")),Wo(()=>{if(this.isDisposingOrDisposed())d();else{const h=this.addSplatBuffersToMesh(e,t,r,s,a,l),f=this.splatMesh.getMaxSplatCount();this.sortWorker&&this.sortWorker.maxSplatCount!==f&&this.disposeSortWorker(),this.gpuAcceleratedSort||this.preSortMessages.push({centers:h.centers.buffer,sceneIndexes:h.sceneIndexes.buffer,range:{from:h.from,to:h.to,count:h.count}}),(!this.sortWorker&&f>0?this.setupSortWorker(this.splatMesh):Promise.resolve()).then(()=>{this.isDisposingOrDisposed()||this.runSplatSort(!0,!0).then(m=>{!this.sortWorker||!m?(this.splatRenderReady=!0,u(),d()):(o?this.splatRenderReady=!0:this.runAfterNextSort.push(()=>{this.splatRenderReady=!0}),this.runAfterNextSort.push(()=>{u(),d()}))})})}},!0)})}}());pn(this,"addSplatBuffersToMesh",function(){let e;return function(t,r,i=!0,s=!1,a=!1,o=!0){if(this.isDisposingOrDisposed())return;let l=[],c=[];a||(l=this.splatMesh.scenes.map(f=>f.splatBuffer)||[],c=this.splatMesh.sceneOptions?this.splatMesh.sceneOptions.map(f=>f):[]),l.push(...t),c.push(...r),this.renderer&&this.splatMesh.setRenderer(this.renderer);const u=f=>{if(this.isDisposingOrDisposed())return;const p=this.splatMesh.getSplatCount();s&&p>=ust&&!f&&!e&&(this.loadingSpinner.setMinimized(!0,!0),e=this.loadingSpinner.addTask("Optimizing data structures..."))},d=f=>{this.isDisposingOrDisposed()||f&&e&&(this.loadingSpinner.removeTask(e),e=null)},h=this.splatMesh.build(l,c,!0,i,u,d,o);return i&&this.freeIntermediateSplatData&&this.splatMesh.freeIntermediateSplatData(),h}}());pn(this,"shouldRender",function(){let e=0;const t=new it,r=new Hi,i=1e-4;return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return!1;let s=!1,a=!1;if(this.camera){const o=this.camera.position,l=this.camera.quaternion;a=Math.abs(o.x-t.x)>i||Math.abs(o.y-t.y)>i||Math.abs(o.z-t.z)>i||Math.abs(l.x-r.x)>i||Math.abs(l.y-r.y)>i||Math.abs(l.z-r.z)>i||Math.abs(l.w-r.w)>i}return s=this.renderMode!==pI.Never&&(e===0||this.splatMesh.visibleRegionChanging||a||this.renderMode===pI.Always||this.dynamicMode===!0||this.renderNextFrame),this.camera&&(t.copy(this.camera.position),r.copy(this.camera.quaternion)),e++,s}}());pn(this,"render",function(){return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return;const e=r=>{for(let i of r.children)if(i.visible)return!0;return!1},t=this.renderer.autoClear;e(this.threeScene)&&(this.renderer.render(this.threeScene,this.camera),this.renderer.autoClear=!1),this.renderer.render(this.splatMesh,this.camera),this.renderer.autoClear=!1,this.sceneHelper.getFocusMarkerOpacity()>0&&this.renderer.render(this.sceneHelper.focusMarker,this.camera),this.showControlPlane&&this.renderer.render(this.sceneHelper.controlPlane,this.camera),this.renderer.autoClear=t}}());pn(this,"updateFPS",function(){let e=Fm(),t=0;return function(){if(this.consecutiveRenderFrames>hst){const r=Fm();r-e>=1?(this.currentFPS=t,t=0,e=r):t++}else this.currentFPS=null}}());pn(this,"updateForRendererSizeChanges",function(){const e=new Kn,t=new Kn;let r;return function(){this.usingExternalCamera||(this.renderer.getSize(t),(r===void 0||r!==this.camera.isOrthographicCamera||t.x!==e.x||t.y!==e.y)&&(this.camera.isOrthographicCamera?(this.camera.left=-t.x/2,this.camera.right=t.x/2,this.camera.top=t.y/2,this.camera.bottom=-t.y/2):this.camera.aspect=t.x/t.y,this.camera.updateProjectionMatrix(),e.copy(t),r=this.camera.isOrthographicCamera))}}());pn(this,"timingSensitiveUpdates",function(){let e;return function(){const t=Fm();e||(e=t);const r=t-e;this.updateCameraTransition(t),this.updateFocusMarker(r),e=t}}());pn(this,"updateCameraTransition",function(){let e=new it,t=new it,r=new it;return function(i){if(this.transitioningCameraTarget){t.copy(this.previousCameraTarget).sub(this.camera.position).normalize(),r.copy(this.nextCameraTarget).sub(this.camera.position).normalize();const s=Math.acos(t.dot(r)),o=(s/(Math.PI/3)*.65+.3)/s*(i-this.transitioningCameraTargetStartTime);e.copy(this.previousCameraTarget).lerp(this.nextCameraTarget,o),this.camera.lookAt(e),this.controls.target.copy(e),o>=1&&(this.transitioningCameraTarget=!1)}}}());pn(this,"updateFocusMarker",function(){const e=new Kn;let t=!1;return function(r){if(this.getRenderDimensions(e),this.transitioningCameraTarget){this.sceneHelper.setFocusMarkerVisibility(!0);const i=Math.max(this.sceneHelper.getFocusMarkerOpacity(),0);let s=Math.min(i+dst*r,1);this.sceneHelper.setFocusMarkerOpacity(s),this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e),t=!0,this.forceRenderNextFrame()}else{let i;if(t?i=1:i=Math.min(this.sceneHelper.getFocusMarkerOpacity(),1),i>0){this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e);let s=Math.max(i-fst*r,0);this.sceneHelper.setFocusMarkerOpacity(s),s===0&&this.sceneHelper.setFocusMarkerVisibility(!1)}i>0&&this.forceRenderNextFrame(),t=!1}}}());pn(this,"updateMeshCursor",function(){const e=[],t=new Kn;return function(){this.showMeshCursor?(this.forceRenderNextFrame(),this.getRenderDimensions(t),e.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,t),this.raycaster.intersectSplatMesh(this.splatMesh,e),e.length>0?(this.sceneHelper.setMeshCursorVisibility(!0),this.sceneHelper.positionAndOrientMeshCursor(e[0].origin,this.camera)):this.sceneHelper.setMeshCursorVisibility(!1)):(this.sceneHelper.getMeschCursorVisibility()&&this.forceRenderNextFrame(),this.sceneHelper.setMeshCursorVisibility(!1))}}());pn(this,"updateInfoPanel",function(){const e=new Kn;return function(){if(!this.showInfo)return;const t=this.splatMesh.getSplatCount();this.getRenderDimensions(e);const r=this.controls?this.controls.target:null,i=this.showMeshCursor?this.sceneHelper.meshCursor.position:null,s=t>0?this.splatRenderCount/t*100:0;this.infoPanel.update(e,this.camera.position,r,this.camera.up,this.camera.isOrthographicCamera,i,this.currentFPS||"N/A",t,this.splatRenderCount,s,this.lastSortTime,this.focalAdjustment,this.splatMesh.getSplatScale(),this.splatMesh.getPointCloudModeEnabled())}}());pn(this,"runSplatSort",function(){const e=new hr,t=[],r=new it(0,0,-1),i=new it(0,0,-1),s=new it,a=new it,o=[],l=[{angleThreshold:.55,sortFractions:[.125,.33333,.75]},{angleThreshold:.65,sortFractions:[.33333,.66667]},{angleThreshold:.8,sortFractions:[.5]}];return function(c=!1,u=!1){if(!this.initialized)return Promise.resolve(!1);if(this.sortRunning)return Promise.resolve(!0);if(this.splatMesh.getSplatCount()<=0)return this.splatRenderCount=0,Promise.resolve(!1);let d=0,h=0,f=!1,p=!1;if(i.set(0,0,-1).applyQuaternion(this.camera.quaternion),d=i.dot(r),h=a.copy(this.camera.position).sub(s).length(),!c&&!this.splatMesh.dynamicMode&&o.length===0&&(d<=.99&&(f=!0),h>=1&&(p=!0),!f&&!p))return Promise.resolve(!1);this.sortRunning=!0;let{splatRenderCount:m,shouldSortAll:v}=this.gatherSceneNodesForSort();v=v||u,this.splatRenderCount=m,e.copy(this.camera.matrixWorld).invert();const g=this.perspectiveCamera||this.camera;e.premultiply(g.projectionMatrix),this.splatMesh.dynamicMode||e.multiply(this.splatMesh.matrixWorld);let _=Promise.resolve(!0);return this.gpuAcceleratedSort&&(o.length<=1||o.length%2===0)&&(_=this.splatMesh.computeDistancesOnGPU(e,this.sortWorkerPrecomputedDistances)),_.then(()=>{if(o.length===0)if(this.splatMesh.dynamicMode||v)o.push(this.splatRenderCount);else{for(let x of l)if(d<x.angleThreshold){for(let w of x.sortFractions)o.push(Math.floor(this.splatRenderCount*w));break}o.push(this.splatRenderCount)}let b=Math.min(o.shift(),this.splatRenderCount);this.splatSortCount=b,t[0]=this.camera.position.x,t[1]=this.camera.position.y,t[2]=this.camera.position.z;const S={modelViewProj:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:b,usePrecomputedDistances:this.gpuAcceleratedSort};return this.splatMesh.dynamicMode&&this.splatMesh.fillTransformsArray(this.sortWorkerTransforms),this.sharedMemoryForWorkers||(S.indexesToSort=this.sortWorkerIndexesToSort,S.transforms=this.sortWorkerTransforms,this.gpuAcceleratedSort&&(S.precomputedDistances=this.sortWorkerPrecomputedDistances)),this.sortPromise=new Promise(x=>{this.sortPromiseResolver=x}),this.preSortMessages.length>0&&(this.preSortMessages.forEach(x=>{this.sortWorker.postMessage(x)}),this.preSortMessages=[]),this.sortWorker.postMessage({sort:S}),o.length===0&&(s.copy(this.camera.position),r.copy(i)),!0}),_}}());pn(this,"gatherSceneNodesForSort",function(){const e=[];let t=null;const r=new it,i=new it,s=new it,a=new hr,o=new hr,l=new hr,c=new it,u=new it(0,0,-1),d=new it,h=f=>d.copy(f.max).sub(f.min).length();return function(f=!1){this.getRenderDimensions(c);const p=c.y/2/Math.tan(this.camera.fov/2*Sne.DEG2RAD),m=Math.atan(c.x/2/p),v=Math.atan(c.y/2/p),g=Math.cos(m),_=Math.cos(v),b=this.splatMesh.getSplatTree();if(b){o.copy(this.camera.matrixWorld).invert(),this.splatMesh.dynamicMode||o.multiply(this.splatMesh.matrixWorld);let S=0,x=0;for(let M=0;M<b.subTrees.length;M++){const C=b.subTrees[M];a.copy(o),this.splatMesh.dynamicMode&&(this.splatMesh.getSceneTransform(M,l),a.multiply(l));const A=C.nodesWithIndexes.length;for(let T=0;T<A;T++){const I=C.nodesWithIndexes[T];if(!I.data||!I.data.indexes||I.data.indexes.length===0)continue;s.copy(I.center).applyMatrix4(a);const D=s.length();s.normalize(),r.copy(s).setX(0).normalize(),i.copy(s).setY(0).normalize();const B=u.dot(i),O=u.dot(r),H=h(I),L=O<_-.6,z=B<g-.6;!f&&(z||L)&&D>H||(x+=I.data.indexes.length,e[S]=I,I.data.distanceToNode=D,S++)}}e.length=S,e.sort((M,C)=>M.data.distanceToNode<C.data.distanceToNode?-1:1);let w=x*Hr.BytesPerInt;for(let M=0;M<S;M++){const C=e[M],A=C.data.indexes.length,T=A*Hr.BytesPerInt;new Uint32Array(this.sortWorkerIndexesToSort.buffer,w-T,A).set(C.data.indexes),w-=T}return{splatRenderCount:x,shouldSortAll:!1}}else{const S=this.splatMesh.getSplatCount();if(!t||t.length!==S){t=new Uint32Array(S);for(let x=0;x<S;x++)t[x]=x}return this.sortWorkerIndexesToSort.set(t),{splatRenderCount:S,shouldSortAll:!0}}}}());if(e.cameraUp||(e.cameraUp=[0,1,0]),this.cameraUp=new it().fromArray(e.cameraUp),e.initialCameraPosition||(e.initialCameraPosition=[0,10,15]),this.initialCameraPosition=new it().fromArray(e.initialCameraPosition),e.initialCameraLookAt||(e.initialCameraLookAt=[0,0,0]),this.initialCameraLookAt=new it().fromArray(e.initialCameraLookAt),this.dropInMode=e.dropInMode||!1,(e.selfDrivenMode===void 0||e.selfDrivenMode===null)&&(e.selfDrivenMode=!0),this.selfDrivenMode=e.selfDrivenMode&&!this.dropInMode,this.selfDrivenUpdateFunc=this.selfDrivenUpdate.bind(this),e.useBuiltInControls===void 0&&(e.useBuiltInControls=!0),this.useBuiltInControls=e.useBuiltInControls,this.rootElement=e.rootElement,this.ignoreDevicePixelRatio=e.ignoreDevicePixelRatio||!1,this.devicePixelRatio=this.ignoreDevicePixelRatio?1:window.devicePixelRatio||1,this.halfPrecisionCovariancesOnGPU=e.halfPrecisionCovariancesOnGPU||!1,this.threeScene=e.threeScene,this.renderer=e.renderer,this.camera=e.camera,this.gpuAcceleratedSort=e.gpuAcceleratedSort||!1,(e.integerBasedSort===void 0||e.integerBasedSort===null)&&(e.integerBasedSort=!0),this.integerBasedSort=e.integerBasedSort,(e.sharedMemoryForWorkers===void 0||e.sharedMemoryForWorkers===null)&&(e.sharedMemoryForWorkers=!0),this.sharedMemoryForWorkers=e.sharedMemoryForWorkers,this.dynamicScene=!!e.dynamicScene,this.antialiased=e.antialiased||!1,this.kernel2DSize=e.kernel2DSize===void 0?.3:e.kernel2DSize,this.webXRMode=e.webXRMode||Um.None,this.webXRMode!==Um.None&&(this.gpuAcceleratedSort=!1),this.webXRActive=!1,this.webXRSessionInit=e.webXRSessionInit||{},this.renderMode=e.renderMode||pI.Always,this.sceneRevealMode=e.sceneRevealMode||pb.Default,this.focalAdjustment=e.focalAdjustment||1,this.maxScreenSpaceSplatSize=e.maxScreenSpaceSplatSize||1024,this.logLevel=e.logLevel||$v.None,this.sphericalHarmonicsDegree=e.sphericalHarmonicsDegree||0,this.enableOptionalEffects=e.enableOptionalEffects||!1,(e.enableSIMDInSort===void 0||e.enableSIMDInSort===null)&&(e.enableSIMDInSort=!0),this.enableSIMDInSort=e.enableSIMDInSort,(e.inMemoryCompressionLevel===void 0||e.inMemoryCompressionLevel===null)&&(e.inMemoryCompressionLevel=0),this.inMemoryCompressionLevel=e.inMemoryCompressionLevel,(e.optimizeSplatData===void 0||e.optimizeSplatData===null)&&(e.optimizeSplatData=!0),this.optimizeSplatData=e.optimizeSplatData,(e.freeIntermediateSplatData===void 0||e.freeIntermediateSplatData===null)&&(e.freeIntermediateSplatData=!1),this.freeIntermediateSplatData=e.freeIntermediateSplatData,u8()){const r=Hne();r.major<17&&(this.enableSIMDInSort=!1),r.major<16&&(this.sharedMemoryForWorkers=!1)}(e.splatRenderMode===void 0||e.splatRenderMode===null)&&(e.splatRenderMode=Xu.ThreeD),this.splatRenderMode=e.splatRenderMode,this.sceneFadeInRateMultiplier=e.sceneFadeInRateMultiplier||1,this.splatSortDistanceMapPrecision=e.splatSortDistanceMapPrecision||Hr.DefaultSplatSortDistanceMapPrecision;const t=this.integerBasedSort?20:24;this.splatSortDistanceMapPrecision=zi(this.splatSortDistanceMapPrecision,10,t),this.onSplatMeshChangedCallback=null,this.createSplatMesh(),this.controls=null,this.perspectiveControls=null,this.orthographicControls=null,this.orthographicCamera=null,this.perspectiveCamera=null,this.showMeshCursor=!1,this.showControlPlane=!1,this.showInfo=!1,this.sceneHelper=null,this.sortWorker=null,this.sortRunning=!1,this.splatRenderCount=0,this.splatSortCount=0,this.lastSplatSortCount=0,this.sortWorkerIndexesToSort=null,this.sortWorkerSortedIndexes=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.preSortMessages=[],this.runAfterNextSort=[],this.selfDrivenModeRunning=!1,this.splatRenderReady=!1,this.raycaster=new zit,this.infoPanel=null,this.startInOrthographicMode=!1,this.currentFPS=0,this.lastSortTime=0,this.consecutiveRenderFrames=0,this.previousCameraTarget=new it,this.nextCameraTarget=new it,this.mousePosition=new Kn,this.mouseDownPosition=new Kn,this.mouseDownTime=null,this.resizeObserver=null,this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.keyDownListener=null,this.sortPromise=null,this.sortPromiseResolver=null,this.splatSceneDownloadPromises={},this.splatSceneDownloadAndBuildPromise=null,this.splatSceneRemovalPromise=null,this.loadingSpinner=new eD(null,this.rootElement||document.body),this.loadingSpinner.hide(),this.loadingProgressBar=new Lit(this.rootElement||document.body),this.loadingProgressBar.hide(),this.infoPanel=new kit(this.rootElement||document.body),this.infoPanel.hide(),this.usingExternalCamera=!!(this.dropInMode||this.camera),this.usingExternalRenderer=!!(this.dropInMode||this.renderer),this.initialized=!1,this.disposing=!1,this.disposed=!1,this.disposePromise=null,this.dropInMode||this.init()}createSplatMesh(){this.splatMesh=new Xs(this.splatRenderMode,this.dynamicScene,this.enableOptionalEffects,this.halfPrecisionCovariancesOnGPU,this.devicePixelRatio,this.gpuAcceleratedSort,this.integerBasedSort,this.antialiased,this.maxScreenSpaceSplatSize,this.logLevel,this.sphericalHarmonicsDegree,this.sceneFadeInRateMultiplier,this.kernel2DSize),this.splatMesh.frustumCulled=!1,this.onSplatMeshChangedCallback&&this.onSplatMeshChangedCallback()}init(){this.initialized||(this.rootElement||(this.usingExternalRenderer?this.rootElement=this.renderer.domElement||document.body:(this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="absolute",document.body.appendChild(this.rootElement))),this.setupCamera(),this.setupRenderer(),this.setupWebXR(this.webXRSessionInit),this.setupControls(),this.setupEventHandlers(),this.threeScene=this.threeScene||new UQe,this.sceneHelper=new fb(this.threeScene),this.sceneHelper.setupMeshCursor(),this.sceneHelper.setupFocusMarker(),this.sceneHelper.setupControlPlane(),this.loadingProgressBar.setContainer(this.rootElement),this.loadingSpinner.setContainer(this.rootElement),this.infoPanel.setContainer(this.rootElement),this.initialized=!0)}setupCamera(){if(!this.usingExternalCamera){const e=new Kn;this.getRenderDimensions(e),this.perspectiveCamera=new xl(lst,e.x/e.y,.1,1e3),this.orthographicCamera=new o8(e.x/-2,e.x/2,e.y/2,e.y/-2,.1,1e3),this.camera=this.startInOrthographicMode?this.orthographicCamera:this.perspectiveCamera,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt)}}setupRenderer(){if(!this.usingExternalRenderer){const e=new Kn;this.getRenderDimensions(e),this.renderer=new Prt({antialias:!1,precision:"highp"}),this.renderer.setPixelRatio(this.devicePixelRatio),this.renderer.autoClear=!0,this.renderer.setClearColor(new ti(0),0),this.renderer.setSize(e.x,e.y),this.resizeObserver=new ResizeObserver(()=>{this.getRenderDimensions(e),this.renderer.setSize(e.x,e.y),this.forceRenderNextFrame()}),this.resizeObserver.observe(this.rootElement),this.rootElement.appendChild(this.renderer.domElement)}}setupWebXR(e){this.webXRMode&&(this.webXRMode===Um.VR?this.rootElement.appendChild(Rg.createButton(this.renderer,e)):this.webXRMode===Um.AR&&this.rootElement.appendChild(ost.createButton(this.renderer,e)),this.renderer.xr.addEventListener("sessionstart",t=>{this.webXRActive=!0}),this.renderer.xr.addEventListener("sessionend",t=>{this.webXRActive=!1}),this.renderer.xr.enabled=!0,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt))}setupControls(){if(this.useBuiltInControls&&this.webXRMode===Um.None){this.usingExternalCamera?this.camera.isOrthographicCamera?this.orthographicControls=new Ww(this.camera,this.renderer.domElement):this.perspectiveControls=new Ww(this.camera,this.renderer.domElement):(this.perspectiveControls=new Ww(this.perspectiveCamera,this.renderer.domElement),this.orthographicControls=new Ww(this.orthographicCamera,this.renderer.domElement));for(let e of[this.orthographicControls,this.perspectiveControls])e&&(e.listenToKeyEvents(window),e.rotateSpeed=.5,e.maxPolarAngle=Math.PI*.75,e.minPolarAngle=.1,e.enableDamping=!0,e.dampingFactor=.05,e.target.copy(this.initialCameraLookAt),e.update());this.controls=this.camera.isOrthographicCamera?this.orthographicControls:this.perspectiveControls,this.controls.update()}}setupEventHandlers(){this.useBuiltInControls&&this.webXRMode===Um.None&&(this.mouseMoveListener=this.onMouseMove.bind(this),this.renderer.domElement.addEventListener("pointermove",this.mouseMoveListener,!1),this.mouseDownListener=this.onMouseDown.bind(this),this.renderer.domElement.addEventListener("pointerdown",this.mouseDownListener,!1),this.mouseUpListener=this.onMouseUp.bind(this),this.renderer.domElement.addEventListener("pointerup",this.mouseUpListener,!1),this.keyDownListener=this.onKeyDown.bind(this),window.addEventListener("keydown",this.keyDownListener,!1))}removeEventHandlers(){this.useBuiltInControls&&(this.renderer.domElement.removeEventListener("pointermove",this.mouseMoveListener),this.mouseMoveListener=null,this.renderer.domElement.removeEventListener("pointerdown",this.mouseDownListener),this.mouseDownListener=null,this.renderer.domElement.removeEventListener("pointerup",this.mouseUpListener),this.mouseUpListener=null,window.removeEventListener("keydown",this.keyDownListener),this.keyDownListener=null)}setRenderMode(e){this.renderMode=e}setActiveSphericalHarmonicsDegrees(e){this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value=e,this.splatMesh.material.uniformsNeedUpdate=!0}onSplatMeshChanged(e){this.onSplatMeshChangedCallback=e}onMouseMove(e){this.mousePosition.set(e.offsetX,e.offsetY)}onMouseDown(){this.mouseDownPosition.copy(this.mousePosition),this.mouseDownTime=Fm()}onMouseClick(e){this.mousePosition.set(e.offsetX,e.offsetY),this.checkForFocalPointChange()}getRenderDimensions(e){this.rootElement?(e.x=this.rootElement.offsetWidth,e.y=this.rootElement.offsetHeight):this.renderer.getSize(e)}setOrthographicMode(e){if(e===this.camera.isOrthographicCamera)return;const t=this.camera,r=e?this.orthographicCamera:this.perspectiveCamera;if(r.position.copy(t.position),r.up.copy(t.up),r.rotation.copy(t.rotation),r.quaternion.copy(t.quaternion),r.matrix.copy(t.matrix),this.camera=r,this.controls){const i=o=>{o.saveState(),o.reset()},s=this.controls,a=e?this.orthographicControls:this.perspectiveControls;i(a),i(s),a.target.copy(s.target),e?Ef.setCameraZoomFromPosition(r,t,s):Ef.setCameraPositionFromZoom(r,t,a),this.controls=a,this.camera.lookAt(this.controls.target)}}adjustForWebXRStereo(e){if(this.camera&&this.webXRActive){const r=this.renderer.xr.getCamera().projectionMatrix.elements[0],i=this.camera.projectionMatrix.elements[0];e.x*=i/r}}isLoadingOrUnloading(){return Object.keys(this.splatSceneDownloadPromises).length>0||this.splatSceneDownloadAndBuildPromise!==null||this.splatSceneRemovalPromise!==null}isDisposingOrDisposed(){return this.disposing||this.disposed}addSplatSceneDownloadPromise(e){this.splatSceneDownloadPromises[e.id]=e}removeSplatSceneDownloadPromise(e){delete this.splatSceneDownloadPromises[e.id]}setSplatSceneDownloadAndBuildPromise(e){this.splatSceneDownloadAndBuildPromise=e}clearSplatSceneDownloadAndBuildPromise(){this.splatSceneDownloadAndBuildPromise=null}addSplatScene(e,t={}){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");t.progressiveLoad&&this.splatMesh.scenes&&this.splatMesh.scenes.length>0&&(console.log('addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'),t.progressiveLoad=!1);const r=t.format!==void 0&&t.format!==null?t.format:Q$(e),i=Ef.isProgressivelyLoadable(r)&&t.progressiveLoad,s=t.showLoadingUI!==void 0&&t.showLoadingUI!==null?t.showLoadingUI:!0;let a=null;s&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=()=>{this.loadingProgressBar.hide(),this.loadingSpinner.removeAllTasks()},l=(m,v,g)=>{if(s)if(g===hs.Downloading)if(m==100)this.loadingSpinner.setMessageForTask(a,"Download complete!");else if(i)this.loadingSpinner.setMessageForTask(a,"Downloading splats...");else{const _=v?`: ${v}`:"...";this.loadingSpinner.setMessageForTask(a,`Downloading${_}`)}else g===hs.Processing&&this.loadingSpinner.setMessageForTask(a,"Processing splats...")};let c=!1,u=0;const d=(m,v)=>{s&&((m&&i||v&&!i)&&(this.loadingSpinner.removeTask(a),!v&&!c&&this.loadingProgressBar.show()),i&&(v?(c=!0,this.loadingProgressBar.hide()):this.loadingProgressBar.setProgress(u)))},h=(m,v,g)=>{u=m,l(m,v,g),t.onProgress&&t.onProgress(m,v,g)},f=(m,v,g)=>{!i&&t.onProgress&&t.onProgress(0,"0%",hs.Processing);const _={rotation:t.rotation||t.orientation,position:t.position,scale:t.scale,splatAlphaRemovalThreshold:t.splatAlphaRemovalThreshold};return this.addSplatBuffers([m],[_],g,v&&s,s,i,i).then(()=>{!i&&t.onProgress&&t.onProgress(100,"100%",hs.Processing),d(v,g)})};return(i?this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this):this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this))(e,r,t.splatAlphaRemovalThreshold,f.bind(this),h,o.bind(this),t.headers)}downloadAndBuildSingleSplatSceneStandardLoad(e,t,r,i,s,a,o){const l=this.downloadSplatSceneToSplatBuffer(e,r,s,!1,void 0,t,o),c=aI(l.abortHandler);return l.then(u=>(this.removeSplatSceneDownloadPromise(l),i(u,!0,!0).then(()=>{c.resolve(),this.clearSplatSceneDownloadAndBuildPromise()}))).catch(u=>{a&&a(),this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(l),c.reject(this.updateError(u,`Viewer::addSplatScene -> Could not load file ${e}`))}),this.addSplatSceneDownloadPromise(l),this.setSplatSceneDownloadAndBuildPromise(c.promise),c.promise}downloadAndBuildSingleSplatSceneProgressiveLoad(e,t,r,i,s,a,o){let l=0,c=!1;const u=[],d=()=>{if(u.length>0&&!c&&!this.isDisposingOrDisposed()){c=!0;const v=u.shift();i(v.splatBuffer,v.firstBuild,v.finalBuild).then(()=>{c=!1,v.firstBuild?p.resolve():v.finalBuild&&(m.resolve(),this.clearSplatSceneDownloadAndBuildPromise()),u.length>0&&Wo(()=>d())})}},h=(v,g)=>{this.isDisposingOrDisposed()||(g||u.length===0||v.getSplatCount()>u[0].splatBuffer.getSplatCount())&&(u.push({splatBuffer:v,firstBuild:l===0,finalBuild:g}),l++,d())},f=this.downloadSplatSceneToSplatBuffer(e,r,s,!0,h,t,o),p=aI(f.abortHandler),m=aI();return this.addSplatSceneDownloadPromise(f),this.setSplatSceneDownloadAndBuildPromise(m.promise),f.then(()=>{this.removeSplatSceneDownloadPromise(f)}).catch(v=>{this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(f);const g=this.updateError(v,"Viewer::addSplatScene -> Could not load one or more scenes");p.reject(g),a&&a(g)}),p.promise}addSplatScenes(e,t=!0,r=void 0){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");const i=e.length,s=[];let a;t&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=(d,h,f,p)=>{s[d]=h;let m=0;for(let v=0;v<i;v++)m+=s[v]||0;m=m/i,f=`${m.toFixed(2)}%`,t&&p===hs.Downloading&&this.loadingSpinner.setMessageForTask(a,m==100?"Download complete!":`Downloading: ${f}`),r&&r(m,f,p)},l=[],c=[];for(let d=0;d<e.length;d++){const h=e[d],f=h.format!==void 0&&h.format!==null?h.format:Q$(h.path),p=this.downloadSplatSceneToSplatBuffer(h.path,h.splatAlphaRemovalThreshold,o.bind(this,d),!1,void 0,f,h.headers);l.push(p),c.push(p.promise)}const u=new P_((d,h)=>{Promise.all(c).then(f=>{t&&this.loadingSpinner.removeTask(a),r&&r(0,"0%",hs.Processing),this.addSplatBuffers(f,e,!0,t,t,!1,!1).then(()=>{r&&r(100,"100%",hs.Processing),this.clearSplatSceneDownloadAndBuildPromise(),d()})}).catch(f=>{t&&this.loadingSpinner.removeTask(a),this.clearSplatSceneDownloadAndBuildPromise(),h(this.updateError(f,"Viewer::addSplatScenes -> Could not load one or more splat scenes."))}).finally(()=>{this.removeSplatSceneDownloadPromise(u)})},d=>{for(let h of l)h.abort(d)});return this.addSplatSceneDownloadPromise(u),this.setSplatSceneDownloadAndBuildPromise(u),u}downloadSplatSceneToSplatBuffer(e,t=1,r=void 0,i=!1,s=void 0,a,o){try{if(a===lo.Splat||a===lo.KSplat||a===lo.Ply){const l=i?!1:this.optimizeSplatData;if(a===lo.Splat)return x8.loadFromURL(e,r,i,s,t,this.inMemoryCompressionLevel,l,o);if(a===lo.KSplat)return JP.loadFromURL(e,r,i,s,o);if(a===lo.Ply)return _8.loadFromURL(e,r,i,s,t,this.inMemoryCompressionLevel,l,this.sphericalHarmonicsDegree,o)}else if(a===lo.Spz)return S8.loadFromURL(e,r,t,this.inMemoryCompressionLevel,this.optimizeSplatData,this.sphericalHarmonicsDegree,o)}catch(l){throw this.updateError(l,null)}throw new Error(`Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${e}`)}static isProgressivelyLoadable(e){return e===lo.Splat||e===lo.KSplat||e===lo.Ply}setupSortWorker(e){if(!this.isDisposingOrDisposed())return new Promise(t=>{const r=this.integerBasedSort?Int32Array:Float32Array,i=e.getSplatCount(),s=e.getMaxSplatCount();this.sortWorker=ast(s,this.sharedMemoryForWorkers,this.enableSIMDInSort,this.integerBasedSort,this.splatMesh.dynamicMode,this.splatSortDistanceMapPrecision),this.sortWorker.onmessage=a=>{if(a.data.sortDone){if(this.sortRunning=!1,this.sharedMemoryForWorkers)this.splatMesh.updateRenderIndexes(this.sortWorkerSortedIndexes,a.data.splatRenderCount);else{const o=new Uint32Array(a.data.sortedIndexes.buffer,0,a.data.splatRenderCount);this.splatMesh.updateRenderIndexes(o,a.data.splatRenderCount)}this.lastSplatSortCount=this.splatSortCount,this.lastSortTime=a.data.sortTime,this.sortPromiseResolver(),this.sortPromiseResolver=null,this.forceRenderNextFrame(),this.runAfterNextSort.length>0&&(this.runAfterNextSort.forEach(o=>{o()}),this.runAfterNextSort.length=0)}else if(a.data.sortCanceled)this.sortRunning=!1;else if(a.data.sortSetupPhase1Complete){this.logLevel>=$v.Info&&console.log("Sorting web worker WASM setup complete."),this.sharedMemoryForWorkers?(this.sortWorkerSortedIndexes=new Uint32Array(a.data.sortedIndexesBuffer,a.data.sortedIndexesOffset,s),this.sortWorkerIndexesToSort=new Uint32Array(a.data.indexesToSortBuffer,a.data.indexesToSortOffset,s),this.sortWorkerPrecomputedDistances=new r(a.data.precomputedDistancesBuffer,a.data.precomputedDistancesOffset,s),this.sortWorkerTransforms=new Float32Array(a.data.transformsBuffer,a.data.transformsOffset,Hr.MaxScenes*16)):(this.sortWorkerIndexesToSort=new Uint32Array(s),this.sortWorkerPrecomputedDistances=new r(s),this.sortWorkerTransforms=new Float32Array(Hr.MaxScenes*16));for(let o=0;o<i;o++)this.sortWorkerIndexesToSort[o]=o;if(this.sortWorker.maxSplatCount=s,this.logLevel>=$v.Info){console.log("Sorting web worker ready.");const o=this.splatMesh.getSplatDataTextures(),l=o.covariances.size,c=o.centerColors.size;console.log("Covariances texture size: "+l.x+" x "+l.y),console.log("Centers/colors texture size: "+c.x+" x "+c.y)}t()}}})}updateError(e,t){return e instanceof Une?e:e instanceof TM?new Error("File type or server does not support progressive loading."):t?new Error(t):e}disposeSortWorker(){this.sortWorker&&this.sortWorker.terminate(),this.sortWorker=null,this.sortPromise=null,this.sortPromiseResolver&&(this.sortPromiseResolver(),this.sortPromiseResolver=null),this.preSortMessages=[],this.sortRunning=!1}removeSplatScene(e,t=!0){return this.removeSplatScenes([e],t)}removeSplatScenes(e,t=!0){if(this.isLoadingOrUnloading())throw new Error("Cannot remove splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot remove splat scene after dispose() is called.");let r;return this.splatSceneRemovalPromise=new Promise((i,s)=>{let a;t&&(this.loadingSpinner.removeAllTasks(),this.loadingSpinner.show(),a=this.loadingSpinner.addTask("Removing splat scene..."));const o=()=>{t&&(this.loadingSpinner.hide(),this.loadingSpinner.removeTask(a))},l=u=>{o(),this.splatSceneRemovalPromise=null,u?s(u):i()},c=()=>this.isDisposingOrDisposed()?(l(),!0):!1;r=this.sortPromise||Promise.resolve(),r.then(()=>{if(c())return;const u=[],d=[],h=[];for(let f=0;f<this.splatMesh.scenes.length;f++){let p=!1;for(let m of e)if(m===f){p=!0;break}if(!p){const m=this.splatMesh.scenes[f];u.push(m.splatBuffer),d.push(this.splatMesh.sceneOptions[f]),h.push({position:m.position.clone(),quaternion:m.quaternion.clone(),scale:m.scale.clone()})}}this.disposeSortWorker(),this.splatMesh.dispose(),this.sceneRevealMode=pb.Instant,this.createSplatMesh(),this.addSplatBuffers(u,d,!0,!1,!0).then(()=>{c()||(o(),this.splatMesh.scenes.forEach((f,p)=>{f.position.copy(h[p].position),f.quaternion.copy(h[p].quaternion),f.scale.copy(h[p].scale)}),this.splatMesh.updateTransforms(),this.splatRenderReady=!1,this.runSplatSort(!0).then(()=>{if(c()){this.splatRenderReady=!0;return}r=this.sortPromise||Promise.resolve(),r.then(()=>{this.splatRenderReady=!0,l()})}))}).catch(f=>{l(f)})})}),this.splatSceneRemovalPromise}start(){if(this.selfDrivenMode)this.webXRMode?this.renderer.setAnimationLoop(this.selfDrivenUpdateFunc):this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc),this.selfDrivenModeRunning=!0;else throw new Error("Cannot start viewer unless it is in self driven mode.")}stop(){this.selfDrivenMode&&this.selfDrivenModeRunning&&(this.webXRMode?this.renderer.setAnimationLoop(null):cancelAnimationFrame(this.requestFrameId),this.selfDrivenModeRunning=!1)}async dispose(){if(this.isDisposingOrDisposed())return this.disposePromise;let e=[],t=[];for(let r in this.splatSceneDownloadPromises)if(this.splatSceneDownloadPromises.hasOwnProperty(r)){const i=this.splatSceneDownloadPromises[r];t.push(i),e.push(i.promise)}return this.sortPromise&&e.push(this.sortPromise),this.disposing=!0,this.disposePromise=Promise.all(e).finally(()=>{this.stop(),this.orthographicControls&&(this.orthographicControls.dispose(),this.orthographicControls=null),this.perspectiveControls&&(this.perspectiveControls.dispose(),this.perspectiveControls=null),this.controls=null,this.splatMesh&&(this.splatMesh.dispose(),this.splatMesh=null),this.sceneHelper&&(this.sceneHelper.dispose(),this.sceneHelper=null),this.resizeObserver&&(this.resizeObserver.unobserve(this.rootElement),this.resizeObserver=null),this.disposeSortWorker(),this.removeEventHandlers(),this.loadingSpinner.removeAllTasks(),this.loadingSpinner.setContainer(null),this.loadingProgressBar.hide(),this.loadingProgressBar.setContainer(null),this.infoPanel.setContainer(null),this.camera=null,this.threeScene=null,this.splatRenderReady=!1,this.initialized=!1,this.renderer&&(this.usingExternalRenderer||(this.rootElement.removeChild(this.renderer.domElement),this.renderer.dispose()),this.renderer=null),this.usingExternalRenderer||document.body.removeChild(this.rootElement),this.sortWorkerSortedIndexes=null,this.sortWorkerIndexesToSort=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.disposed=!0,this.disposing=!1,this.disposePromise=null}),t.forEach(r=>{r.abort("Scene disposed")}),this.disposePromise}selfDrivenUpdate(){this.selfDrivenMode&&!this.webXRMode&&(this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc)),this.update(),this.shouldRender()?(this.render(),this.consecutiveRenderFrames++):this.consecutiveRenderFrames=0,this.renderNextFrame=!1}forceRenderNextFrame(){this.renderNextFrame=!0}update(e,t){this.dropInMode&&this.updateForDropInMode(e,t),!(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())&&(this.controls&&(this.controls.update(),this.camera.isOrthographicCamera&&!this.usingExternalCamera&&Ef.setCameraPositionFromZoom(this.camera,this.camera,this.controls)),this.runSplatSort(),this.updateForRendererSizeChanges(),this.updateSplatMesh(),this.updateMeshCursor(),this.updateFPS(),this.timingSensitiveUpdates(),this.updateInfoPanel(),this.updateControlPlane())}updateForDropInMode(e,t){this.renderer=e,this.splatMesh&&this.splatMesh.setRenderer(this.renderer),this.camera=t,this.controls&&(this.controls.object=t),this.init()}updateControlPlane(){this.showControlPlane?(this.sceneHelper.setControlPlaneVisibility(!0),this.sceneHelper.positionAndOrientControlPlane(this.controls.target,this.camera.up)):this.sceneHelper.setControlPlaneVisibility(!1)}getSplatMesh(){return this.splatMesh}getSplatScene(e){return this.splatMesh.getScene(e)}getSceneCount(){return this.splatMesh.getSceneCount()}isMobile(){return navigator.userAgent.includes("Mobi")}};pn(Ef,"setCameraPositionFromZoom",function(){const e=new it;return function(t,r,i){const s=1/(r.zoom*.001);e.copy(i.target).sub(t.position).normalize().multiplyScalar(s).negate(),t.position.copy(i.target).add(e)}}()),pn(Ef,"setCameraZoomFromPosition",function(){const e=new it;return function(t,r,i){const s=e.copy(i.target).sub(r.position).length();t.zoom=1/(s*.001)}}());let lG=Ef;const pst="./teaser.png",mst=Ie({__name:"Teaser",setup(n){return(e,t)=>{const r=dn("el-divider"),i=dn("el-col"),s=dn("el-row");return $(),ue("div",null,[xe(r),xe(s,{justify:"center"},{default:Re(()=>[xe(i,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Re(()=>[ye("img",{src:pst,style:{width:"100%","object-fit":"contain"}})]),_:1})]),_:1})])}}}),vst=Jo(mst,[["__scopeId","data-v-91980148"]]),gst="./sgad.png",yst=Ie({__name:"Method",setup(n){return(e,t)=>{const r=dn("el-divider"),i=dn("el-row"),s=dn("el-col");return $(),ue("div",null,[xe(r),xe(i,{justify:"center"},{default:Re(()=>t[0]||(t[0]=[ye("h1",{class:"section-title"},"Method",-1)])),_:1,__:[0]}),xe(i,{justify:"center"},{default:Re(()=>[xe(s,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Re(()=>[ye("img",{src:gst,alt:"展示图片",style:{width:"100%",height:"auto","border-radius":"8px","margin-top":"20px"}})]),_:1})]),_:1})])}}}),bst=Jo(yst,[["__scopeId","data-v-4a2dee92"]]),_st={components:{Title:ZDe,Teaser:vst,Abstract:e6e,Method:bst,BibTeX:i6e,ImageSelector:ALe}};function Sst(n,e,t,r,i,s){const a=dn("Title"),o=dn("Teaser"),l=dn("Abstract"),c=dn("Method"),u=dn("ImageSelector"),d=dn("BibTeX");return $(),ue(Bt,null,[xe(a),xe(o),xe(l),xe(c),xe(u),xe(d)],64)}const xst=Jo(_st,[["render",Sst]]),wst={class:"bg"},Cst={class:"footer"},Mst=["href"],Tst=Ie({__name:"Footer",setup(n){const e={Nerfies:"https://github.com/nerfies/nerfies.github.io",Vue:"https://cn.vuejs.org/",Vite:"https://cn.vitejs.dev/",ElementPlus:"https://element-plus.org/zh-CN/",template:"https://github.com/JunyaoHu/academic-project-page-template-vue"};return(t,r)=>{const i=dn("el-row");return $(),ue("div",wst,[xe(i,{justify:"center"},{default:Re(()=>[ye("p",Cst,[r[0]||(r[0]=Bn(" Thanks to the ",-1)),ye("a",{href:e.template},"academic-project-page-template-vue",8,Mst),r[1]||(r[1]=Bn(" for this website template. ",-1))])]),_:1})])}}}),Ast=Jo(Tst,[["__scopeId","data-v-d966fd6d"]]),Est={components:{Header:SDe,Main:xst,Footer:Ast}};function Ist(n,e,t,r,i,s){const a=dn("Header"),o=dn("el-header"),l=dn("Main"),c=dn("el-main"),u=dn("Footer"),d=dn("el-footer"),h=dn("el-container"),f=dn("el-backtop");return $(),ue("div",null,[xe(h,null,{default:Re(()=>[xe(o,null,{default:Re(()=>[xe(a)]),_:1}),xe(c,null,{default:Re(()=>[xe(l)]),_:1}),xe(d,null,{default:Re(()=>[xe(u)]),_:1})]),_:1}),xe(f,{right:40,bottom:80})])}const Rst=Jo(Est,[["render",Ist]]),Xne=LW(Rst);Xne.use(gDe);Xne.mount("#app")});export default Pst();
